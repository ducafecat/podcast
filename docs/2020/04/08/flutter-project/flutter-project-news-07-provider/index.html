<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
    

    

    



    <meta charset="utf-8">
    
    
    
    
    <title>Flutter 实战从零开始 新闻客户端 - 07 Provider、认证授权、骨架屏、磁盘缓存 | duCafeCat</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="flutter">
    <meta name="description" content="本节目标 第一次登录显示欢迎界面 离线登录 Provider 响应数据管理 实现 APP 色彩灰度处理 注销登录 Http Status 401 认证授权 首页磁盘缓存 首页缓存策略，延">
<meta name="keywords" content="flutter">
<meta property="og:type" content="article">
<meta property="og:title" content="Flutter 实战从零开始 新闻客户端 - 07 Provider、认证授权、骨架屏、磁盘缓存">
<meta property="og:url" content="https://ducafecat.tech/2020/04/08/flutter-project/flutter-project-news-07-provider/index.html">
<meta property="og:site_name" content="duCafeCat">
<meta property="og:description" content="本节目标 第一次登录显示欢迎界面 离线登录 Provider 响应数据管理 实现 APP 色彩灰度处理 注销登录 Http Status 401 认证授权 首页磁盘缓存 首页缓存策略，延">
<meta property="og:locale" content="en">
<meta property="og:image" content="https://ducafecat.tech/2020/04/08/flutter-project/flutter-project-news-07-provider/bg.jpg">
<meta property="og:image" content="https://ducafecat.tech/2020/04/08/flutter-project/flutter-project-news-07-provider/2020-04-08-22-08-21.png">
<meta property="og:updated_time" content="2020-04-08T14:24:51.092Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Flutter 实战从零开始 新闻客户端 - 07 Provider、认证授权、骨架屏、磁盘缓存">
<meta name="twitter:description" content="本节目标 第一次登录显示欢迎界面 离线登录 Provider 响应数据管理 实现 APP 色彩灰度处理 注销登录 Http Status 401 认证授权 首页磁盘缓存 首页缓存策略，延">
<meta name="twitter:image" content="https://ducafecat.tech/2020/04/08/flutter-project/flutter-project-news-07-provider/bg.jpg">
    
        <link rel="alternate" type="application/atom+xml" title="duCafeCat" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">猫哥</h5>
          <a href="mailto:ducafecat@gmail.com" title="ducafecat@gmail.com" class="mail">ducafecat@gmail.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
            <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">Flutter 实战从零开始 新闻客户端 - 07 Provider、认证授权、骨架屏、磁盘缓存</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off"
                placeholder="Search" />
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
         
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">
    <div class="container fade-scale">
        <h1 class="title">Flutter 实战从零开始 新闻客户端 - 07 Provider、认证授权、骨架屏、磁盘缓存</h1>
        <h5 class="subtitle">
             <time datetime="2020-04-07T16:00:00.000Z" itemprop="datePublished" class="page-time">
	2020-04-08
</time>


<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Flutter-实战从零开始/">Flutter 实战从零开始</a></li></ul>
 
        </h5>
    </div>

    

</header>

<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#本节目标"><span class="post-toc-number">1.</span> <span class="post-toc-text">本节目标</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#视频"><span class="post-toc-number">2.</span> <span class="post-toc-text">视频</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#资源"><span class="post-toc-number">3.</span> <span class="post-toc-text">资源</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第一次显示欢迎界面、离线登录"><span class="post-toc-number">4.</span> <span class="post-toc-text">第一次显示欢迎界面、离线登录</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Provider-实现动态灰度处理"><span class="post-toc-number">5.</span> <span class="post-toc-text">Provider 实现动态灰度处理</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#步骤-1：安装依赖"><span class="post-toc-number">5.1.</span> <span class="post-toc-text">步骤 1：安装依赖</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#步骤-2：创建响应数据类"><span class="post-toc-number">5.2.</span> <span class="post-toc-text">步骤 2：创建响应数据类</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#步骤-3：初始响应数据"><span class="post-toc-number">5.3.</span> <span class="post-toc-text">步骤 3：初始响应数据</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#方式一：先创建数据对象，再挂载"><span class="post-toc-number">5.3.1.</span> <span class="post-toc-text">方式一：先创建数据对象，再挂载</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#方式二：挂载时，创建对象"><span class="post-toc-number">5.3.2.</span> <span class="post-toc-text">方式二：挂载时，创建对象</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#步骤-4：通知数据发声变化"><span class="post-toc-number">5.4.</span> <span class="post-toc-text">步骤 4：通知数据发声变化</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#步骤-5：收到数据发声变化"><span class="post-toc-number">5.5.</span> <span class="post-toc-text">步骤 5：收到数据发声变化</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#方式一：Consumer"><span class="post-toc-number">5.5.1.</span> <span class="post-toc-text">方式一：Consumer</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#方式二：Provider-of"><span class="post-toc-number">5.5.2.</span> <span class="post-toc-text">方式二：Provider.of</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#多个响应数据处理"><span class="post-toc-number">5.6.</span> <span class="post-toc-text">多个响应数据处理</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#注销登录"><span class="post-toc-number">6.</span> <span class="post-toc-text">注销登录</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Http-Status-401-认证授权"><span class="post-toc-number">7.</span> <span class="post-toc-text">Http Status 401 认证授权</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#dio-封装界面的上下文对象-BuildContext-context"><span class="post-toc-number">7.1.</span> <span class="post-toc-text">dio 封装界面的上下文对象 BuildContext context</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#错误处理-401-去登录界面"><span class="post-toc-number">7.2.</span> <span class="post-toc-text">错误处理 401 去登录界面</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#首页磁盘缓存"><span class="post-toc-number">8.</span> <span class="post-toc-text">首页磁盘缓存</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#首页缓存策略，延迟-1-3-秒"><span class="post-toc-number">9.</span> <span class="post-toc-text">首页缓存策略，延迟 1~3 秒</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#首页骨架屏"><span class="post-toc-number">10.</span> <span class="post-toc-text">首页骨架屏</span></a></li></ol>
        </nav>
    </aside>


<article id="post-flutter-project/flutter-project-news-07-provider" class="post-article article-type-post fade"
    itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">Flutter 实战从零开始 新闻客户端 - 07 Provider、认证授权、骨架屏、磁盘缓存</h1>
        <div class="post-meta">
            <time class="post-time" title="2020-04-08 00:00:00" datetime="2020-04-07T16:00:00.000Z"  itemprop="datePublished">2020-04-08</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Flutter-实战从零开始/">Flutter 实战从零开始</a></li></ul>



            

        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="bg.jpg" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<h2 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h2><ul>
<li>第一次登录显示欢迎界面</li>
<li>离线登录</li>
<li>Provider 响应数据管理</li>
<li>实现 APP 色彩灰度处理</li>
<li>注销登录</li>
<li>Http Status 401 认证授权</li>
<li>首页磁盘缓存</li>
<li>首页缓存策略，延迟 1~3 秒</li>
<li>首页骨架屏</li>
</ul>
<h2 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h2><ul>
<li><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">b 站</a></li>
<li><a href="https://www.youtube.com/watch?v=Uucg6GGGBsY&amp;list=PL274L1n86T80VZR30KaLOKV6jqwTq5E8D" target="_blank" rel="noopener">油管镜像</a></li>
</ul>
<h2 id="资源"><a href="#资源" class="headerlink" title="资源"></a>资源</h2><ul>
<li><p>蓝湖设计稿（加微信给授权 ducafecat）<br><a href="https://lanhuapp.com/url/wbhGq" target="_blank" rel="noopener">https://lanhuapp.com/url/wbhGq</a></p>
</li>
<li><p>YAPI 接口管理<br><a href="http://yapi.demo.qunar.com/" target="_blank" rel="noopener">http://yapi.demo.qunar.com/</a></p>
</li>
<li><p>代码<br><a href="https://github.com/ducafecat/flutter_learn_news/releases/tag/v1.0.7" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news/releases/tag/v1.0.7</a></p>
</li>
<li><p>参考</p>
<ul>
<li><a href="https://pub.flutter-io.cn/packages/provider" target="_blank" rel="noopener">provider</a></li>
<li><a href="https://pub.flutter-io.cn/packages/pk_skeleton" target="_blank" rel="noopener">pk_skeleton</a></li>
</ul>
</li>
</ul>
<h2 id="第一次显示欢迎界面、离线登录"><a href="#第一次显示欢迎界面、离线登录" class="headerlink" title="第一次显示欢迎界面、离线登录"></a>第一次显示欢迎界面、离线登录</h2><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="2020-04-08-22-08-21.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<ul>
<li>lib/global.dart</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="markdown">/// 是否第一次打开</span></span></span><br><span class="line"><span class="keyword">static</span> <span class="built_in">bool</span> isFirstOpen = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="markdown">/// 是否离线登录</span></span></span><br><span class="line"><span class="keyword">static</span> <span class="built_in">bool</span> isOfflineLogin = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="markdown">/// init</span></span></span><br><span class="line"><span class="keyword">static</span> Future init() <span class="keyword">async</span> &#123;</span><br><span class="line">  ...</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 读取设备第一次打开</span></span><br><span class="line">  isFirstOpen = !StorageUtil().getBool(STORAGE_DEVICE_ALREADY_OPEN_KEY);</span><br><span class="line">  <span class="keyword">if</span> (isFirstOpen) &#123;</span><br><span class="line">    StorageUtil().setBool(STORAGE_DEVICE_ALREADY_OPEN_KEY, <span class="keyword">true</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 读取离线用户信息</span></span><br><span class="line">  <span class="keyword">var</span> _profileJSON = StorageUtil().getJSON(STORAGE_USER_PROFILE_KEY);</span><br><span class="line">  <span class="keyword">if</span> (_profileJSON != <span class="keyword">null</span>) &#123;</span><br><span class="line">    profile = UserLoginResponseEntity.fromJson(_profileJSON);</span><br><span class="line">    isOfflineLogin = <span class="keyword">true</span>;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>lib/pages/index/index.dart</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IndexPage</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  IndexPage(&#123;Key key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _IndexPageState createState() =&gt; _IndexPageState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_IndexPageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">IndexPage</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    ScreenUtil.init(</span><br><span class="line">      context,</span><br><span class="line">      width: <span class="number">375</span>,</span><br><span class="line">      height: <span class="number">812</span> - <span class="number">44</span> - <span class="number">34</span>,</span><br><span class="line">      allowFontScaling: <span class="keyword">true</span>,</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      body: Global.isFirstOpen == <span class="keyword">true</span></span><br><span class="line">          ? WelcomePage()</span><br><span class="line">          : Global.isOfflineLogin == <span class="keyword">true</span> ? ApplicationPage() : SignInPage(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Provider-实现动态灰度处理"><a href="#Provider-实现动态灰度处理" class="headerlink" title="Provider 实现动态灰度处理"></a>Provider 实现动态灰度处理</h2><p><a href="https://pub.flutter-io.cn/packages/provider" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/provider</a></p>
<h3 id="步骤-1：安装依赖"><a href="#步骤-1：安装依赖" class="headerlink" title="步骤 1：安装依赖"></a>步骤 1：安装依赖</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dependencies:</span></span><br><span class="line"><span class="attr">  provider:</span> <span class="string">^4.0.4</span></span><br></pre></td></tr></table></figure>
<h3 id="步骤-2：创建响应数据类"><a href="#步骤-2：创建响应数据类" class="headerlink" title="步骤 2：创建响应数据类"></a>步骤 2：创建响应数据类</h3><ul>
<li>lib/common/provider/app.dart</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="markdown">/// 系统相应状态</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AppState</span> <span class="title">with</span> <span class="title">ChangeNotifier</span> </span>&#123;</span><br><span class="line">  <span class="built_in">bool</span> _isGrayFilter;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">get</span> isGrayFilter =&gt; _isGrayFilter;</span><br><span class="line"></span><br><span class="line">  AppState(&#123;<span class="built_in">bool</span> isGrayFilter = <span class="keyword">false</span>&#125;) &#123;</span><br><span class="line">    <span class="keyword">this</span>._isGrayFilter = isGrayFilter;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3：初始响应数据"><a href="#步骤-3：初始响应数据" class="headerlink" title="步骤 3：初始响应数据"></a>步骤 3：初始响应数据</h3><h4 id="方式一：先创建数据对象，再挂载"><a href="#方式一：先创建数据对象，再挂载" class="headerlink" title="方式一：先创建数据对象，再挂载"></a>方式一：先创建数据对象，再挂载</h4><ul>
<li>lib/global.dart</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="markdown">/// 应用状态</span></span></span><br><span class="line"><span class="keyword">static</span> AppState appState = AppState();</span><br></pre></td></tr></table></figure>
<ul>
<li>lib/main.dart</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main() =&gt; Global.init().then((e) =&gt; runApp(</span><br><span class="line">      MultiProvider(</span><br><span class="line">        providers: [</span><br><span class="line">          ChangeNotifierProvider&lt;AppState&gt;.value(</span><br><span class="line">            value: Global.appState,</span><br><span class="line">          ),</span><br><span class="line">        ],</span><br><span class="line">        child: MyApp(),</span><br><span class="line">      ),</span><br><span class="line">    ));</span><br></pre></td></tr></table></figure>
<h4 id="方式二：挂载时，创建对象"><a href="#方式二：挂载时，创建对象" class="headerlink" title="方式二：挂载时，创建对象"></a>方式二：挂载时，创建对象</h4><ul>
<li>lib/main.dart</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main() =&gt; Global.init().then((e) =&gt; runApp(</span><br><span class="line">      MultiProvider(</span><br><span class="line">        providers: [</span><br><span class="line">          ChangeNotifierProvider&lt;AppState&gt;(</span><br><span class="line">            Create: (_) =&gt; <span class="keyword">new</span> AppState(),</span><br><span class="line">          ),</span><br><span class="line">        ],</span><br><span class="line">        child: MyApp(),</span><br><span class="line">      ),</span><br><span class="line">    ));</span><br></pre></td></tr></table></figure>
<h3 id="步骤-4：通知数据发声变化"><a href="#步骤-4：通知数据发声变化" class="headerlink" title="步骤 4：通知数据发声变化"></a>步骤 4：通知数据发声变化</h3><ul>
<li>lib/common/provider/app.dart</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AppState</span> <span class="title">with</span> <span class="title">ChangeNotifier</span> </span>&#123;</span><br><span class="line">  ...</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 切换灰色滤镜</span></span><br><span class="line">  switchGrayFilter() &#123;</span><br><span class="line">    _isGrayFilter = !_isGrayFilter;</span><br><span class="line">    notifyListeners();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-5：收到数据发声变化"><a href="#步骤-5：收到数据发声变化" class="headerlink" title="步骤 5：收到数据发声变化"></a>步骤 5：收到数据发声变化</h3><h4 id="方式一：Consumer"><a href="#方式一：Consumer" class="headerlink" title="方式一：Consumer"></a>方式一：Consumer</h4><ul>
<li>lib/main.dart</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main() =&gt; Global.init().then((e) =&gt; runApp(</span><br><span class="line">      MultiProvider(</span><br><span class="line">        providers: [</span><br><span class="line">          ChangeNotifierProvider&lt;AppState&gt;.value(</span><br><span class="line">            value: Global.appState,</span><br><span class="line">          ),</span><br><span class="line">        ],</span><br><span class="line">        child: Consumer&lt;AppState&gt;(builder: (context, appState, _) &#123;</span><br><span class="line">          <span class="keyword">if</span> (appState.isGrayFilter) &#123;</span><br><span class="line">            <span class="keyword">return</span> ColorFiltered(</span><br><span class="line">              colorFilter: ColorFilter.mode(Colors.white, BlendMode.color),</span><br><span class="line">              child: MyApp(),</span><br><span class="line">            );</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> MyApp();</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;),</span><br><span class="line">      ),</span><br><span class="line">    ));</span><br></pre></td></tr></table></figure>
<h4 id="方式二：Provider-of"><a href="#方式二：Provider-of" class="headerlink" title="方式二：Provider.of"></a>方式二：Provider.of</h4><ul>
<li>lib/pages/account/account.dart</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> appState = Provider.of&lt;AppState&gt;(context);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> Column(</span><br><span class="line">  children: &lt;Widget&gt;[</span><br><span class="line">    MaterialButton(</span><br><span class="line">      onPressed: () &#123;</span><br><span class="line">        appState.switchGrayFilter();</span><br><span class="line">      &#125;,</span><br><span class="line">      child: Text(<span class="string">'灰色切换 <span class="subst">$&#123;appState.isGrayFilter&#125;</span>'</span>),</span><br><span class="line">    ),</span><br><span class="line">  ],</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h3 id="多个响应数据处理"><a href="#多个响应数据处理" class="headerlink" title="多个响应数据处理"></a>多个响应数据处理</h3><ul>
<li><p>挂载用 MultiProvider</p>
</li>
<li><p>接收用 Consumer2 ~ Consumer6</p>
</li>
</ul>
<h2 id="注销登录"><a href="#注销登录" class="headerlink" title="注销登录"></a>注销登录</h2><ul>
<li>lib/common/utils/authentication.dart</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="markdown">/// 检查是否有 token</span></span></span><br><span class="line">Future&lt;<span class="built_in">bool</span>&gt; isAuthenticated() <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="keyword">var</span> profileJSON = StorageUtil().getJSON(STORAGE_USER_PROFILE_KEY);</span><br><span class="line">  <span class="keyword">return</span> profileJSON != <span class="keyword">null</span> ? <span class="keyword">true</span> : <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="markdown">/// 删除缓存 token</span></span></span><br><span class="line">Future deleteAuthentication() <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="keyword">await</span> StorageUtil().remove(STORAGE_USER_PROFILE_KEY);</span><br><span class="line">  Global.profile = <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="markdown">/// 重新登录</span></span></span><br><span class="line">Future goLoginPage(BuildContext context) <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="keyword">await</span> deleteAuthentication();</span><br><span class="line">  Navigator.pushNamedAndRemoveUntil(</span><br><span class="line">      context, <span class="string">"/sign-in"</span>, (Route&lt;<span class="keyword">dynamic</span>&gt; route) =&gt; <span class="keyword">false</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>lib/pages/account/account.dart</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_AccountPageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">AccountPage</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">final</span> appState = Provider.of&lt;AppState&gt;(context);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> Column(</span><br><span class="line">      children: &lt;Widget&gt;[</span><br><span class="line">        Text(<span class="string">'用户: <span class="subst">$&#123;Global.profile.displayName&#125;</span>'</span>),</span><br><span class="line">        Divider(),</span><br><span class="line">        MaterialButton(</span><br><span class="line">          onPressed: () &#123;</span><br><span class="line">            goLoginPage(context);</span><br><span class="line">          &#125;,</span><br><span class="line">          child: Text(<span class="string">'退出'</span>),</span><br><span class="line">        ),</span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Http-Status-401-认证授权"><a href="#Http-Status-401-认证授权" class="headerlink" title="Http Status 401 认证授权"></a>Http Status 401 认证授权</h2><h3 id="dio-封装界面的上下文对象-BuildContext-context"><a href="#dio-封装界面的上下文对象-BuildContext-context" class="headerlink" title="dio 封装界面的上下文对象 BuildContext context"></a>dio 封装界面的上下文对象 BuildContext context</h3><ul>
<li>lib/common/utils/http.dart</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Future post(</span><br><span class="line">  <span class="built_in">String</span> path, &#123;</span><br><span class="line">  <span class="meta">@required</span> BuildContext context,</span><br><span class="line">  <span class="keyword">dynamic</span> params,</span><br><span class="line">  Options options,</span><br><span class="line">&#125;) <span class="keyword">async</span> &#123;</span><br><span class="line">  Options requestOptions = options ?? Options();</span><br><span class="line">  requestOptions = requestOptions.merge(extra: &#123;</span><br><span class="line">    <span class="string">"context"</span>: context,</span><br><span class="line">  &#125;);</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="错误处理-401-去登录界面"><a href="#错误处理-401-去登录界面" class="headerlink" title="错误处理 401 去登录界面"></a>错误处理 401 去登录界面</h3><ul>
<li>lib/common/utils/http.dart</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 添加拦截器</span></span><br><span class="line">dio.interceptors</span><br><span class="line">    .add(InterceptorsWrapper(onRequest: (RequestOptions options) &#123;</span><br><span class="line">  <span class="keyword">return</span> options; <span class="comment">//continue</span></span><br><span class="line">&#125;, onResponse: (Response response) &#123;</span><br><span class="line">  <span class="keyword">return</span> response; <span class="comment">// continue</span></span><br><span class="line">&#125;, onError: (DioError e) &#123;</span><br><span class="line">  ErrorEntity eInfo = createErrorEntity(e);</span><br><span class="line">  <span class="comment">// 错误提示</span></span><br><span class="line">  toastInfo(msg: eInfo.message);</span><br><span class="line">  <span class="comment">// 错误交互处理</span></span><br><span class="line">  <span class="keyword">var</span> context = e.request.extra[<span class="string">"context"</span>];</span><br><span class="line">  <span class="keyword">if</span> (context != <span class="keyword">null</span>) &#123;</span><br><span class="line">    <span class="keyword">switch</span> (eInfo.code) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">401</span>: <span class="comment">// 没有权限 重新登录</span></span><br><span class="line">        goLoginPage(context);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">default</span>:</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> eInfo;</span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure>
<h2 id="首页磁盘缓存"><a href="#首页磁盘缓存" class="headerlink" title="首页磁盘缓存"></a>首页磁盘缓存</h2><ul>
<li>lib/common/utils/net_cache.dart</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 策略 1 内存缓存优先，2 然后才是磁盘缓存</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1 内存缓存</span></span><br><span class="line"><span class="keyword">var</span> ob = cache[key];</span><br><span class="line"><span class="keyword">if</span> (ob != <span class="keyword">null</span>) &#123;</span><br><span class="line">  <span class="comment">//若缓存未过期，则返回缓存内容</span></span><br><span class="line">  <span class="keyword">if</span> ((<span class="built_in">DateTime</span>.now().millisecondsSinceEpoch - ob.timeStamp) / <span class="number">1000</span> &lt;</span><br><span class="line">      CACHE_MAXAGE) &#123;</span><br><span class="line">    <span class="keyword">return</span> cache[key].response;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">//若已过期则删除缓存，继续向服务器请求</span></span><br><span class="line">    cache.remove(key);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2 磁盘缓存</span></span><br><span class="line"><span class="keyword">if</span> (cacheDisk) &#123;</span><br><span class="line">  <span class="keyword">var</span> cacheData = StorageUtil().getJSON(key);</span><br><span class="line">  <span class="keyword">if</span> (cacheData != <span class="keyword">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> Response(</span><br><span class="line">      statusCode: <span class="number">200</span>,</span><br><span class="line">      data: cacheData,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="首页缓存策略，延迟-1-3-秒"><a href="#首页缓存策略，延迟-1-3-秒" class="headerlink" title="首页缓存策略，延迟 1~3 秒"></a>首页缓存策略，延迟 1~3 秒</h2><ul>
<li>lib/pages/main/channels_widget.dart</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 如果有磁盘缓存，延迟3秒拉取更新档案</span></span><br><span class="line">_loadLatestWithDiskCache() &#123;</span><br><span class="line">  <span class="keyword">if</span> (CACHE_ENABLE == <span class="keyword">true</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> cacheData = StorageUtil().getJSON(STORAGE_INDEX_NEWS_CACHE_KEY);</span><br><span class="line">    <span class="keyword">if</span> (cacheData != <span class="keyword">null</span>) &#123;</span><br><span class="line">      Timer(<span class="built_in">Duration</span>(seconds: <span class="number">3</span>), () &#123;</span><br><span class="line">        _controller.callRefresh();</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="首页骨架屏"><a href="#首页骨架屏" class="headerlink" title="首页骨架屏"></a>首页骨架屏</h2><p><a href="https://pub.flutter-io.cn/packages/pk_skeleton" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/pk_skeleton</a></p>
<ul>
<li>lib/pages/main/main.dart</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@override</span></span><br><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">  <span class="keyword">return</span> _newsPageList == <span class="keyword">null</span></span><br><span class="line">      ? cardListSkeleton()</span><br><span class="line">      : EasyRefresh(</span><br><span class="line">          enableControlFinishRefresh: <span class="keyword">true</span>,</span><br><span class="line">          controller: _controller,</span><br><span class="line">          ...</span><br></pre></td></tr></table></figure>
<hr>
<p>© 猫哥</p>
<p><a href="https://ducafecat.tech/">https://ducafecat.tech</a></p>

        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        

        
        邮箱 ducafecat@gmail.com / 微信 ducafecat / 留言板 disqus
        
    </div>
    
    <footer>
        <a href="https://ducafecat.tech">
            <img src="/img/avatar.jpg" alt="猫哥">
            猫哥
        </a>
    </footer>
</blockquote>

        


        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/flutter/">flutter</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://ducafecat.tech/2020/04/08/flutter-project/flutter-project-news-07-provider/&title=《Flutter 实战从零开始 新闻客户端 - 07 Provider、认证授权、骨架屏、磁盘缓存》 — duCafeCat&pic=https://ducafecat.tech/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://ducafecat.tech/2020/04/08/flutter-project/flutter-project-news-07-provider/&title=《Flutter 实战从零开始 新闻客户端 - 07 Provider、认证授权、骨架屏、磁盘缓存》 — duCafeCat&source=" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://ducafecat.tech/2020/04/08/flutter-project/flutter-project-news-07-provider/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Flutter 实战从零开始 新闻客户端 - 07 Provider、认证授权、骨架屏、磁盘缓存》 — duCafeCat&url=https://ducafecat.tech/2020/04/08/flutter-project/flutter-project-news-07-provider/&via=https://ducafecat.tech" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://ducafecat.tech/2020/04/08/flutter-project/flutter-project-news-07-provider/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2020/04/17/flutter-project/flutter-project-news-08-auto-route/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">Flutter 实战从零开始 新闻客户端 - 08 路由管理 auto_route</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2020/03/31/flutter-project/flutter-project-news-06-main-ui/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">Flutter 实战从零开始 新闻客户端 - 06 代码规范、业务代码组织、新闻首页实现</h4>
      </a>
    </div>
  
</nav>



    

















</article>


</div>

        <footer class="footer">
    <div class="top">
        

        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>This blog is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</span>
        </p>
    </div>
    <div class="bottom">
        <p><span>猫哥 &copy; 2018 - 2020</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://ducafecat.tech/2020/04/08/flutter-project/flutter-project-news-07-provider/&title=《Flutter 实战从零开始 新闻客户端 - 07 Provider、认证授权、骨架屏、磁盘缓存》 — duCafeCat&pic=https://ducafecat.tech/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://ducafecat.tech/2020/04/08/flutter-project/flutter-project-news-07-provider/&title=《Flutter 实战从零开始 新闻客户端 - 07 Provider、认证授权、骨架屏、磁盘缓存》 — duCafeCat&source=" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://ducafecat.tech/2020/04/08/flutter-project/flutter-project-news-07-provider/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Flutter 实战从零开始 新闻客户端 - 07 Provider、认证授权、骨架屏、磁盘缓存》 — duCafeCat&url=https://ducafecat.tech/2020/04/08/flutter-project/flutter-project-news-07-provider/&via=https://ducafecat.tech" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://ducafecat.tech/2020/04/08/flutter-project/flutter-project-news-07-provider/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN4AAADeCAAAAAB3DOFrAAACs0lEQVR42u3a24obQQwE0Pz/TycQ8hDI2q6Suu0snHkyi+dyemFaLunHj/j4+fv4+3P7l82V//18+MDDw8MbPfqj49Glnz9Ecp18mfK7fLEEeHh4eNd4+Ss7p7bXSd7q+TPj4eHh/Q+8/GV9trLFw8PD+7685PZ5MJEX4nkwgYeHh/dOXv6I7Tc3m8TsefDw8PBu82YNsM9+vt7fw8PDwxt11ZMCtw0m8obW5jn/XAEPDw/vAi9pWT0nbTaY2ahBsrjRLfHw8PAWvHYEqo0AZoMCbSRRhLl4eHh4a17b1N/cPlnps4U+Hh4e3g1e287PAe9h4+Hh4b2fl/ykv7dJzFpfRSCCh4eHd5Q3C1XbtlbyiEm0kUQeeHh4eJ/lPWfPNpi8lZWUzi8WDg8PD+8CL48M2hZXu7Xko1fJWXh4eHj3eO3G0JbdbVG+3zBW+x4eHh5ezJsFr22HbXb9TTMMDw8P7wYvuX2Si7bR8GyYdXXg4eHhXea1QeomMmjbabNmGx4eHt4pXnvCvg3WBrirjQcPDw/vAu9GUJuPWG2GDPJ/DB4eHt5ZXvIiTn7jb8a22q2o+A4eHh7eBd7+9m2QcapMT0pzPDw8vHu8tiyetfxnIwIHCnQ8PDy8o7x8mCkfzMoj3XxkYRgQ4+Hh4X2I1+4zbcCxKaZfnIWHh4d3gff8tBfN+HIjyQPiGfhFYY2Hh4d3iLePD1brGt9x1oTDw8PDu81rX+tJ+JuEF2fD4mO7Fh4eHl5azRYv39mgVb5Ym0AEDw8P7zavHZZK2Dm1LdmTcx9mLXh4eHhHeW3zKQkgZtHtbE978bsBDw8P70O8fESgHpAaleB4eHh435HXNq7yzablPbwmHh4e3jXeLCzIo4G2DZYvNB4eHt77ebOf+vkwQb4Qs5DiSn8PDw8P7+tzfwGuaMabWt5odwAAAABJRU5ErkJggg==" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: false };


lazyScripts.push('//s22.cnzz.com/z_stat.php?id=1274928662&web_id=1274928662')

</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>



<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
</script>

<script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" async></script>








</body>
</html>
