<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
    

    

    



    <meta charset="utf-8">
    
    
    
    
    <title>Flutter æ··åˆå¼€å‘ - 02 ç™¾åº¦åœ°å›¾å®šä½åŠŸèƒ½ android ç¯‡ | duCafeCat</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="flutter">
    <meta name="description" content="æœ¬èŠ‚ç›®æ ‡ ç™¾åº¦åœ°å›¾ä¸šåŠ¡ ç™¾åº¦ç»„ä»¶åˆå§‹ ç¼–å†™å®šä½ä»£ç  android ç¯‡">
<meta name="keywords" content="flutter">
<meta property="og:type" content="article">
<meta property="og:title" content="Flutter æ··åˆå¼€å‘ - 02 ç™¾åº¦åœ°å›¾å®šä½åŠŸèƒ½ android ç¯‡">
<meta property="og:url" content="https://ducafecat.tech/2020/08/04/flutter-daily/flutter-plugins-02-baidu-map-android/index.html">
<meta property="og:site_name" content="duCafeCat">
<meta property="og:description" content="æœ¬èŠ‚ç›®æ ‡ ç™¾åº¦åœ°å›¾ä¸šåŠ¡ ç™¾åº¦ç»„ä»¶åˆå§‹ ç¼–å†™å®šä½ä»£ç  android ç¯‡">
<meta property="og:locale" content="en">
<meta property="og:image" content="https://ducafecat.tech/2020/08/04/flutter-daily/flutter-plugins-02-baidu-map-android/2020-08-06-18-10-40.png">
<meta property="og:image" content="https://ducafecat.tech/2020/08/04/flutter-daily/flutter-plugins-02-baidu-map-android/2020-08-12-15-01-43.png">
<meta property="og:image" content="https://ducafecat.tech/2020/08/04/flutter-daily/flutter-plugins-02-baidu-map-android/2020-08-06-16-27-33.png">
<meta property="og:image" content="https://ducafecat.tech/2020/08/04/flutter-daily/flutter-plugins-02-baidu-map-android/2020-08-06-16-29-26.png">
<meta property="og:image" content="https://ducafecat.tech/2020/08/04/flutter-daily/flutter-plugins-02-baidu-map-android/2020-08-06-16-27-07.png">
<meta property="og:image" content="https://ducafecat.tech/2020/08/04/flutter-daily/flutter-plugins-02-baidu-map-android/2020-08-06-16-30-34.png">
<meta property="og:updated_time" content="2020-08-13T06:41:09.630Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Flutter æ··åˆå¼€å‘ - 02 ç™¾åº¦åœ°å›¾å®šä½åŠŸèƒ½ android ç¯‡">
<meta name="twitter:description" content="æœ¬èŠ‚ç›®æ ‡ ç™¾åº¦åœ°å›¾ä¸šåŠ¡ ç™¾åº¦ç»„ä»¶åˆå§‹ ç¼–å†™å®šä½ä»£ç  android ç¯‡">
<meta name="twitter:image" content="https://ducafecat.tech/2020/08/04/flutter-daily/flutter-plugins-02-baidu-map-android/2020-08-06-18-10-40.png">
    
        <link rel="alternate" type="application/atom+xml" title="duCafeCat" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">çŒ«å“¥</h5>
          <a href="mailto:ducafecat@gmail.com" title="ducafecat@gmail.com" class="mail">ducafecat@gmail.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                ä¸»é¡µ
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
            <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">Flutter æ··åˆå¼€å‘ - 02 ç™¾åº¦åœ°å›¾å®šä½åŠŸèƒ½ android ç¯‡</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off"
                placeholder="Search" />
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
         
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">
    <div class="container fade-scale">
        <h1 class="title">Flutter æ··åˆå¼€å‘ - 02 ç™¾åº¦åœ°å›¾å®šä½åŠŸèƒ½ android ç¯‡</h1>
        <h5 class="subtitle">
             <time datetime="2020-08-03T16:00:00.000Z" itemprop="datePublished" class="page-time">
	2020-08-04
</time>


<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Flutteræ··åˆå¼€å‘/">Flutteræ··åˆå¼€å‘</a></li></ul>
 
        </h5>
    </div>

    

</header>

<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#æœ¬èŠ‚ç›®æ ‡"><span class="post-toc-number">1.</span> <span class="post-toc-text">æœ¬èŠ‚ç›®æ ‡</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#ç¯å¢ƒ"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">ç¯å¢ƒ</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#è§†é¢‘"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">è§†é¢‘</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#ä»£ç "><span class="post-toc-number">1.3.</span> <span class="post-toc-text">ä»£ç </span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#æ­£æ–‡"><span class="post-toc-number">1.4.</span> <span class="post-toc-text">æ­£æ–‡</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#åˆ›å»ºç»„ä»¶çš„å‡ ç§æ–¹å¼"><span class="post-toc-number">1.4.1.</span> <span class="post-toc-text">åˆ›å»ºç»„ä»¶çš„å‡ ç§æ–¹å¼</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ç°æˆè½®å­ç›´æ¥ç”¨"><span class="post-toc-number">1.4.1.1.</span> <span class="post-toc-text">ç°æˆè½®å­ç›´æ¥ç”¨</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#å¯å‚è€ƒçš„ç»„ä»¶ä»£ç "><span class="post-toc-number">1.4.1.2.</span> <span class="post-toc-text">å¯å‚è€ƒçš„ç»„ä»¶ä»£ç </span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#å‚è€ƒå®˜æ–¹é›†æˆæ–‡æ¡£ç¼–å†™ç»„ä»¶"><span class="post-toc-number">1.4.1.3.</span> <span class="post-toc-text">å‚è€ƒå®˜æ–¹é›†æˆæ–‡æ¡£ç¼–å†™ç»„ä»¶</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#ç»„ä»¶ä»£ç "><span class="post-toc-number">1.4.2.</span> <span class="post-toc-text">ç»„ä»¶ä»£ç </span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ç™¾åº¦åº”ç”¨ç®¡ç†ï¼Œåˆ›å»º-AK"><span class="post-toc-number">1.4.2.1.</span> <span class="post-toc-text">ç™¾åº¦åº”ç”¨ç®¡ç†ï¼Œåˆ›å»º AK</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#è®¾ç½®-Android-æƒé™"><span class="post-toc-number">1.4.2.2.</span> <span class="post-toc-text">è®¾ç½® Android æƒé™</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#æ·»åŠ -android-libs-åº“æ–‡ä»¶"><span class="post-toc-number">1.4.2.3.</span> <span class="post-toc-text">æ·»åŠ  android libs åº“æ–‡ä»¶</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ç¼–å†™-Flutter-ç»„ä»¶ä»£ç "><span class="post-toc-number">1.4.2.4.</span> <span class="post-toc-text">ç¼–å†™ Flutter ç»„ä»¶ä»£ç </span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#è§¦å‘-registerWith-çš„æ–¹å¼ï¼Œè€é¡¹ç›®"><span class="post-toc-number">1.4.2.5.</span> <span class="post-toc-text">è§¦å‘ registerWith çš„æ–¹å¼ï¼Œè€é¡¹ç›®</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#æˆå‘˜å˜é‡ã€åŒæ­¥ã€å¼‚æ­¥å¤„ç†"><span class="post-toc-number">1.4.2.6.</span> <span class="post-toc-text">æˆå‘˜å˜é‡ã€åŒæ­¥ã€å¼‚æ­¥å¤„ç†</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ"><span class="post-toc-number">1.4.2.7.</span> <span class="post-toc-text">ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#åœ°å›¾ä¸šåŠ¡å‚æ•°"><span class="post-toc-number">1.4.2.8.</span> <span class="post-toc-text">åœ°å›¾ä¸šåŠ¡å‚æ•°</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ç¼–å†™å¯åŠ¨ã€åœæ­¢åŠŸèƒ½"><span class="post-toc-number">1.4.2.9.</span> <span class="post-toc-text">ç¼–å†™å¯åŠ¨ã€åœæ­¢åŠŸèƒ½</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ç™¾åº¦å®šä½å›è°ƒ"><span class="post-toc-number">1.4.2.10.</span> <span class="post-toc-text">ç™¾åº¦å®šä½å›è°ƒ</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ä½ç½®æé†’æœåŠ¡"><span class="post-toc-number">1.4.2.11.</span> <span class="post-toc-text">ä½ç½®æé†’æœåŠ¡</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Example-ä»£ç "><span class="post-toc-number">1.4.3.</span> <span class="post-toc-text">Example ä»£ç </span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#åŠ¨æ€æˆæƒ"><span class="post-toc-number">1.4.3.1.</span> <span class="post-toc-text">åŠ¨æ€æˆæƒ</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ä¸»ç•Œé¢ä»£ç "><span class="post-toc-number">1.4.3.2.</span> <span class="post-toc-text">ä¸»ç•Œé¢ä»£ç </span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#å®šä½æœåŠ¡ä»£ç "><span class="post-toc-number">1.4.3.3.</span> <span class="post-toc-text">å®šä½æœåŠ¡ä»£ç </span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#å‚è€ƒ"><span class="post-toc-number">1.5.</span> <span class="post-toc-text">å‚è€ƒ</span></a></li></ol></li></ol>
        </nav>
    </aside>


<article id="post-flutter-daily/flutter-plugins-02-baidu-map-android" class="post-article article-type-post fade"
    itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">Flutter æ··åˆå¼€å‘ - 02 ç™¾åº¦åœ°å›¾å®šä½åŠŸèƒ½ android ç¯‡</h1>
        <div class="post-meta">
            <time class="post-time" title="2020-08-04 00:00:00" datetime="2020-08-03T16:00:00.000Z"  itemprop="datePublished">2020-08-04</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Flutteræ··åˆå¼€å‘/">Flutteræ··åˆå¼€å‘</a></li></ul>



            

        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="2020-08-06-18-10-40.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>
<h1 id="æœ¬èŠ‚ç›®æ ‡"><a href="#æœ¬èŠ‚ç›®æ ‡" class="headerlink" title="æœ¬èŠ‚ç›®æ ‡"></a>æœ¬èŠ‚ç›®æ ‡</h1><ul>
<li>ç™¾åº¦åœ°å›¾ä¸šåŠ¡</li>
<li>ç™¾åº¦ç»„ä»¶åˆå§‹</li>
<li>ç¼–å†™å®šä½ä»£ç  android ç¯‡</li>
</ul>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="2020-08-12-15-01-43.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>
<h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ flutter doctor</span><br><span class="line">Doctor summary (to see all details, run flutter doctor -v):</span><br><span class="line">[âœ“] Flutter (Channel stable, 1.20.1, on Mac OS X 10.15.6 19G73, locale zh-Hans-CN)</span><br><span class="line">[âœ“] Android toolchain - develop <span class="keyword">for</span> Android devices (Android SDK version 29.0.2)</span><br><span class="line">[âœ“] Xcode - develop <span class="keyword">for</span> iOS and macOS (Xcode 11.6)</span><br><span class="line">[âœ“] Android Studio (version 4.0)</span><br><span class="line">[âœ“] VS Code (version 1.47.3)</span><br></pre></td></tr></table></figure>
<h2 id="è§†é¢‘"><a href="#è§†é¢‘" class="headerlink" title="è§†é¢‘"></a>è§†é¢‘</h2><p><a href="https://www.bilibili.com/video/BV1iK411T7LC/" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1iK411T7LC/</a></p>
<iframe src="//player.bilibili.com/player.html?bvid=BV1iK411T7LC&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" height="400px"> </iframe>

<h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><p><a href="https://github.com/ducafecat/flutter_baidu_plugin_ducafecat/releases/tag/v1.0.2" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_baidu_plugin_ducafecat/releases/tag/v1.0.2</a></p>
<p>å¯ä»¥ç›´æ¥ç”¨ ğŸ‘‡ v1.0.3</p>
<p><a href="https://github.com/ducafecat/flutter_baidu_plugin_ducafecat/releases/tag/v1.0.3" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_baidu_plugin_ducafecat/releases/tag/v1.0.3</a></p>
<h2 id="æ­£æ–‡"><a href="#æ­£æ–‡" class="headerlink" title="æ­£æ–‡"></a>æ­£æ–‡</h2><h3 id="åˆ›å»ºç»„ä»¶çš„å‡ ç§æ–¹å¼"><a href="#åˆ›å»ºç»„ä»¶çš„å‡ ç§æ–¹å¼" class="headerlink" title="åˆ›å»ºç»„ä»¶çš„å‡ ç§æ–¹å¼"></a>åˆ›å»ºç»„ä»¶çš„å‡ ç§æ–¹å¼</h3><h4 id="ç°æˆè½®å­ç›´æ¥ç”¨"><a href="#ç°æˆè½®å­ç›´æ¥ç”¨" class="headerlink" title="ç°æˆè½®å­ç›´æ¥ç”¨"></a>ç°æˆè½®å­ç›´æ¥ç”¨</h4><ul>
<li><p>å®˜æ–¹ä»“åº“æœç´¢</p>
<p><a href="https://pub.dev/flutter/packages" target="_blank" rel="noopener">https://pub.dev/flutter/packages</a></p>
<p><a href="https://pub.flutter-io.cn/flutter/packages" target="_blank" rel="noopener">https://pub.flutter-io.cn/flutter/packages</a></p>
</li>
</ul>
<h4 id="å¯å‚è€ƒçš„ç»„ä»¶ä»£ç "><a href="#å¯å‚è€ƒçš„ç»„ä»¶ä»£ç " class="headerlink" title="å¯å‚è€ƒçš„ç»„ä»¶ä»£ç "></a>å¯å‚è€ƒçš„ç»„ä»¶ä»£ç </h4><ul>
<li><p>é€šè¿‡ä»“åº“ï¼ŒæŸ¥æ‰¾ github ä»£ç ä»“</p>
</li>
<li><p>ç½‘ç«™ã€å®¢æœç´¢å–ä»£ç </p>
</li>
</ul>
<h4 id="å‚è€ƒå®˜æ–¹é›†æˆæ–‡æ¡£ç¼–å†™ç»„ä»¶"><a href="#å‚è€ƒå®˜æ–¹é›†æˆæ–‡æ¡£ç¼–å†™ç»„ä»¶" class="headerlink" title="å‚è€ƒå®˜æ–¹é›†æˆæ–‡æ¡£ç¼–å†™ç»„ä»¶"></a>å‚è€ƒå®˜æ–¹é›†æˆæ–‡æ¡£ç¼–å†™ç»„ä»¶</h4><ul>
<li>å®˜ç½‘æ–‡æ¡£</li>
</ul>
<p><a href="http://lbsyun.baidu.com/index.php?title=flutter/loc" target="_blank" rel="noopener">http://lbsyun.baidu.com/index.php?title=flutter/loc</a></p>
<h3 id="ç»„ä»¶ä»£ç "><a href="#ç»„ä»¶ä»£ç " class="headerlink" title="ç»„ä»¶ä»£ç "></a>ç»„ä»¶ä»£ç </h3><h4 id="ç™¾åº¦åº”ç”¨ç®¡ç†ï¼Œåˆ›å»º-AK"><a href="#ç™¾åº¦åº”ç”¨ç®¡ç†ï¼Œåˆ›å»º-AK" class="headerlink" title="ç™¾åº¦åº”ç”¨ç®¡ç†ï¼Œåˆ›å»º AK"></a>ç™¾åº¦åº”ç”¨ç®¡ç†ï¼Œåˆ›å»º AK</h4><ul>
<li>åº”ç”¨ç®¡ç†</li>
</ul>
<p><a href="https://lbsyun.baidu.com/apiconsole/key#/home" target="_blank" rel="noopener">https://lbsyun.baidu.com/apiconsole/key#/home</a></p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="2020-08-06-16-27-33.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>
<ul>
<li>æŸ¥è¯¢ SHA1</li>
</ul>
<p><a href="http://lbsyun.baidu.com/index.php?title=FAQ/SHA1" target="_blank" rel="noopener">http://lbsyun.baidu.com/index.php?title=FAQ/SHA1</a></p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="2020-08-06-16-29-26.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">keytool -list -v -keystore ~/.android/debug.keystore -<span class="built_in">alias</span> androiddebugkey</span><br></pre></td></tr></table></figure>
<ul>
<li>è®¾ç½® AK</li>
</ul>
<p>example/android/app/src/main/AndroidManifest.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- åœ¨è¿™é‡Œè®¾ç½®androidç«¯ak--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta-data</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:name</span>=<span class="string">"com.baidu.lbsapi.API_KEY"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:value</span>=<span class="string">"aCUtcLDufllGi4nEaKgU8FmBqufFyekh"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">application</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="è®¾ç½®-Android-æƒé™"><a href="#è®¾ç½®-Android-æƒé™" class="headerlink" title="è®¾ç½® Android æƒé™"></a>è®¾ç½® Android æƒé™</h4><ul>
<li>æ–‡æ¡£</li>
</ul>
<p><a href="http://lbsyun.baidu.com/index.php?title=android-locsdk/guide/create-project/android-studio" target="_blank" rel="noopener">http://lbsyun.baidu.com/index.php?title=android-locsdk/guide/create-project/android-studio</a></p>
<ul>
<li>android/src/main/AndroidManifest.xml</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">manifest</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">package</span>=<span class="string">"tech.ducafecat.flutter_baidu_plugin_ducafecat"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è¿™ä¸ªæƒé™ç”¨äºè¿›è¡Œç½‘ç»œå®šä½--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.ACCESS_COARSE_LOCATION"</span>&gt;</span><span class="tag">&lt;/<span class="name">uses-permission</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è¿™ä¸ªæƒé™ç”¨äºè®¿é—®GPSå®šä½--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.ACCESS_FINE_LOCATION"</span>&gt;</span><span class="tag">&lt;/<span class="name">uses-permission</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ç”¨äºè®¿é—®wifiç½‘ç»œä¿¡æ¯ï¼Œwifiä¿¡æ¯ä¼šç”¨äºè¿›è¡Œç½‘ç»œå®šä½--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.ACCESS_WIFI_STATE"</span>&gt;</span><span class="tag">&lt;/<span class="name">uses-permission</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è·å–è¿è¥å•†ä¿¡æ¯ï¼Œç”¨äºæ”¯æŒæä¾›è¿è¥å•†ä¿¡æ¯ç›¸å…³çš„æ¥å£--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.ACCESS_NETWORK_STATE"</span>&gt;</span><span class="tag">&lt;/<span class="name">uses-permission</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è¿™ä¸ªæƒé™ç”¨äºè·å–wifiçš„è·å–æƒé™ï¼Œwifiä¿¡æ¯ä¼šç”¨æ¥è¿›è¡Œç½‘ç»œå®šä½--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.CHANGE_WIFI_STATE"</span>&gt;</span><span class="tag">&lt;/<span class="name">uses-permission</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ç”¨äºè¯»å–æ‰‹æœºå½“å‰çš„çŠ¶æ€--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.READ_PHONE_STATE"</span>&gt;</span><span class="tag">&lt;/<span class="name">uses-permission</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å†™å…¥æ‰©å±•å­˜å‚¨ï¼Œå‘æ‰©å±•å¡å†™å…¥æ•°æ®ï¼Œç”¨äºå†™å…¥ç¦»çº¿å®šä½æ•°æ®--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.WRITE_EXTERNAL_STORAGE"</span>&gt;</span><span class="tag">&lt;/<span class="name">uses-permission</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è®¿é—®ç½‘ç»œï¼Œç½‘ç»œå®šä½éœ€è¦ä¸Šç½‘--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.INTERNET"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è¯»å–ç³»ç»Ÿä¿¡æ¯ï¼ŒåŒ…å«ç³»ç»Ÿç‰ˆæœ¬ç­‰ä¿¡æ¯ï¼Œç”¨ä½œç»Ÿè®¡--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"com.android.launcher.permission.READ_SETTINGS"</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ç¨‹åºåœ¨æ‰‹æœºå±å¹•å…³é—­ååå°è¿›ç¨‹ä»ç„¶è¿è¡Œ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.WAKE_LOCK"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">application</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å£°æ˜serviceç»„ä»¶ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">service</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:name</span>=<span class="string">"com.baidu.location.f"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:enabled</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:process</span>=<span class="string">":remote"</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">service</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">application</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="æ·»åŠ -android-libs-åº“æ–‡ä»¶"><a href="#æ·»åŠ -android-libs-åº“æ–‡ä»¶" class="headerlink" title="æ·»åŠ  android libs åº“æ–‡ä»¶"></a>æ·»åŠ  android libs åº“æ–‡ä»¶</h4><ul>
<li>ç›®å½• android/libs</li>
</ul>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="2020-08-06-16-27-07.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>
<ul>
<li>android/build.gradle</li>
</ul>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">android &#123;</span><br><span class="line">    compileSdkVersion <span class="number">28</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">sourceSets</span> &#123;</span><br><span class="line">        main &#123;</span><br><span class="line">            jniLibs.srcDir <span class="string">'libs'</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    defaultConfig &#123;</span><br><span class="line">        minSdkVersion <span class="number">16</span></span><br><span class="line">    &#125;</span><br><span class="line">    lintOptions &#123;</span><br><span class="line">        disable <span class="string">'InvalidPackage'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    implementation files(<span class="string">'libs/BaiduLBS_Android.jar'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ç¼–å†™-Flutter-ç»„ä»¶ä»£ç "><a href="#ç¼–å†™-Flutter-ç»„ä»¶ä»£ç " class="headerlink" title="ç¼–å†™ Flutter ç»„ä»¶ä»£ç "></a>ç¼–å†™ Flutter ç»„ä»¶ä»£ç </h4><ul>
<li>ç›®å½• lib</li>
</ul>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="2020-08-06-16-30-34.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>
<ul>
<li>åœ°ç†ä¿¡æ¯ lib/entity/flutter_baidu_location.dart</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// <span class="markdown">ç™¾åº¦å®šä½ç»“æœç±»ï¼Œç”¨äºå­˜å‚¨å„ç±»å®šä½ç»“æœä¿¡æ¯</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BaiduLocation</span> </span>&#123;</span><br><span class="line">  <span class="comment">/// <span class="markdown">å®šä½æˆåŠŸæ—¶é—´</span></span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> locTime;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">å®šä½ç»“æœç±»å‹</span></span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">int</span> locType;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">åŠå¾„</span></span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">double</span> radius;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">çº¬åº¦</span></span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">double</span> latitude;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">ç»åº¦</span></span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">double</span> longitude;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">æµ·æ‹”</span></span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">double</span> altitude;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">å›½å®¶</span></span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> country;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">çœä»½</span></span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> province;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">åŸå¸‚</span></span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> city;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">åŒºå¿</span></span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> district;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">è¡—é“</span></span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> street;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">åœ°å€</span></span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> address;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">ä½ç½®è¯­ä¹‰åŒ–æè¿°ï¼Œä¾‹å¦‚"åœ¨ç™¾åº¦å¤§å¦é™„è¿‘"</span></span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> locationDetail;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">å‘¨è¾¹poiä¿¡æ¯ï¼Œæ¯ä¸ªpoiä¹‹é—´ç”¨"|"éš”å¼€</span></span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> poiList;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">å®šä½ç»“æœå›è°ƒæ—¶é—´</span></span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> callbackTime;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">é”™è¯¯ç </span></span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">int</span> errorCode;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">å®šä½å¤±è´¥æè¿°ä¿¡æ¯</span></span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> errorInfo;</span><br><span class="line"></span><br><span class="line">  BaiduLocation(</span><br><span class="line">      &#123;<span class="keyword">this</span>.locTime,</span><br><span class="line">      <span class="keyword">this</span>.locType,</span><br><span class="line">      <span class="keyword">this</span>.radius,</span><br><span class="line">      <span class="keyword">this</span>.latitude,</span><br><span class="line">      <span class="keyword">this</span>.longitude,</span><br><span class="line">      <span class="keyword">this</span>.altitude,</span><br><span class="line">      <span class="keyword">this</span>.country,</span><br><span class="line">      <span class="keyword">this</span>.province,</span><br><span class="line">      <span class="keyword">this</span>.city,</span><br><span class="line">      <span class="keyword">this</span>.district,</span><br><span class="line">      <span class="keyword">this</span>.street,</span><br><span class="line">      <span class="keyword">this</span>.address,</span><br><span class="line">      <span class="keyword">this</span>.locationDetail,</span><br><span class="line">      <span class="keyword">this</span>.poiList,</span><br><span class="line">      <span class="keyword">this</span>.callbackTime,</span><br><span class="line">      <span class="keyword">this</span>.errorCode,</span><br><span class="line">      <span class="keyword">this</span>.errorInfo&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">æ ¹æ®ä¼ å…¥çš„mapç”ŸæˆBaiduLocationå¯¹è±¡</span></span></span><br><span class="line">  <span class="keyword">factory</span> BaiduLocation.fromMap(<span class="built_in">dynamic</span> value) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> BaiduLocation(</span><br><span class="line">      locTime: value[<span class="string">'locTime'</span>],</span><br><span class="line">      locType: value[<span class="string">'locType'</span>],</span><br><span class="line">      radius: value[<span class="string">'radius'</span>],</span><br><span class="line">      latitude: value[<span class="string">'latitude'</span>],</span><br><span class="line">      longitude: value[<span class="string">'longitude'</span>],</span><br><span class="line">      altitude: value[<span class="string">'altitude'</span>],</span><br><span class="line">      country: value[<span class="string">'country'</span>],</span><br><span class="line">      province: value[<span class="string">'province'</span>],</span><br><span class="line">      city: value[<span class="string">'city'</span>],</span><br><span class="line">      district: value[<span class="string">'district'</span>],</span><br><span class="line">      street: value[<span class="string">'street'</span>],</span><br><span class="line">      address: value[<span class="string">'address'</span>],</span><br><span class="line">      locationDetail: value[<span class="string">'locationDetail'</span>],</span><br><span class="line">      poiList: value[<span class="string">'poiList'</span>],</span><br><span class="line">      callbackTime: value[<span class="string">'callbackTime'</span>],</span><br><span class="line">      errorCode: value[<span class="string">'errorCode'</span>],</span><br><span class="line">      errorInfo: value[<span class="string">'errorInfo'</span>],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">è·å–å¯¹æœ¬ç±»æ‰€æœ‰å˜é‡èµ‹å€¼åçš„mapé”®å€¼å¯¹</span></span></span><br><span class="line">  <span class="built_in">Map</span> getMap() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="string">"locTime"</span>: locTime,</span><br><span class="line">      <span class="string">"locType"</span>: locType,</span><br><span class="line">      <span class="string">"radius"</span>: radius,</span><br><span class="line">      <span class="string">"latitude"</span>: latitude,</span><br><span class="line">      <span class="string">"longitude"</span>: longitude,</span><br><span class="line">      <span class="string">"altitude"</span>: altitude,</span><br><span class="line">      <span class="string">"country"</span>: country,</span><br><span class="line">      <span class="string">"province"</span>: province,</span><br><span class="line">      <span class="string">"city"</span>: city,</span><br><span class="line">      <span class="string">"district"</span>: district,</span><br><span class="line">      <span class="string">"street"</span>: street,</span><br><span class="line">      <span class="string">"address"</span>: address,</span><br><span class="line">      <span class="string">"locationDescribe"</span>: locationDetail,</span><br><span class="line">      <span class="string">"poiList"</span>: poiList,</span><br><span class="line">      <span class="string">"callbackTime"</span>: callbackTime,</span><br><span class="line">      <span class="string">"errorCode"</span>: errorCode,</span><br><span class="line">      <span class="string">"errorInfo"</span>: errorInfo,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>android é…ç½®é¡¹ lib/entity/flutter_baidu_location_android_option.dart</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// <span class="markdown">è®¾ç½®androidç«¯å®šä½å‚æ•°ç±»</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BaiduLocationAndroidOption</span> </span>&#123;</span><br><span class="line">  <span class="comment">/// <span class="markdown">åæ ‡ç³»ç±»å‹</span></span></span><br><span class="line">  <span class="built_in">String</span> coorType;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">æ˜¯å¦éœ€è¦è¿”å›åœ°å€ä¿¡æ¯</span></span></span><br><span class="line">  <span class="built_in">bool</span> isNeedAddres;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">æ˜¯å¦éœ€è¦è¿”å›æµ·æ‹”é«˜åº¦ä¿¡æ¯</span></span></span><br><span class="line">  <span class="built_in">bool</span> isNeedAltitude;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">æ˜¯å¦éœ€è¦è¿”å›å‘¨è¾¹poiä¿¡æ¯</span></span></span><br><span class="line">  <span class="built_in">bool</span> isNeedLocationPoiList;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">æ˜¯å¦éœ€è¦è¿”å›æ–°ç‰ˆæœ¬rgcä¿¡æ¯</span></span></span><br><span class="line">  <span class="built_in">bool</span> isNeedNewVersionRgc;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">æ˜¯å¦éœ€è¦è¿”å›ä½ç½®æè¿°ä¿¡æ¯</span></span></span><br><span class="line">  <span class="built_in">bool</span> isNeedLocationDescribe;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">æ˜¯å¦ä½¿ç”¨gps</span></span></span><br><span class="line">  <span class="built_in">bool</span> openGps;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">å¯é€‰ï¼Œè®¾ç½®å‘èµ·å®šä½è¯·æ±‚çš„é—´éš”ï¼Œintç±»å‹ï¼Œå•ä½ms</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">å¦‚æœè®¾ç½®ä¸º0ï¼Œåˆ™ä»£è¡¨å•æ¬¡å®šä½ï¼Œå³ä»…å®šä½ä¸€æ¬¡ï¼Œé»˜è®¤ä¸º0</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">å¦‚æœè®¾ç½®é0ï¼Œéœ€è®¾ç½®1000msä»¥ä¸Šæ‰æœ‰æ•ˆ</span></span></span><br><span class="line">  <span class="built_in">int</span> scanspan;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">è®¾ç½®å®šä½æ¨¡å¼ï¼Œå¯é€‰çš„æ¨¡å¼æœ‰é«˜ç²¾åº¦ã€ä»…è®¾å¤‡ã€ä»…ç½‘ç»œã€‚é»˜è®¤ä¸ºé«˜ç²¾åº¦æ¨¡å¼</span></span></span><br><span class="line">  <span class="built_in">int</span> locationMode;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">å¯é€‰ï¼Œè®¾ç½®åœºæ™¯å®šä½å‚æ•°ï¼ŒåŒ…æ‹¬ç­¾åˆ°åœºæ™¯ã€è¿åŠ¨åœºæ™¯ã€å‡ºè¡Œåœºæ™¯</span></span></span><br><span class="line">  <span class="built_in">int</span> locationPurpose;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">å¯é€‰ï¼Œè®¾ç½®è¿”å›ç»çº¬åº¦åæ ‡ç±»å‹ï¼Œé»˜è®¤GCJ02</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">GCJ02ï¼šå›½æµ‹å±€åæ ‡ï¼›</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">BD09llï¼šç™¾åº¦ç»çº¬åº¦åæ ‡ï¼›</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">BD09ï¼šç™¾åº¦å¢¨å¡æ‰˜åæ ‡ï¼›</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">æµ·å¤–åœ°åŒºå®šä½ï¼Œæ— éœ€è®¾ç½®åæ ‡ç±»å‹ï¼Œç»Ÿä¸€è¿”å›WGS84ç±»å‹åæ ‡</span></span></span><br><span class="line">  <span class="keyword">void</span> setCoorType(<span class="built_in">String</span> coorType) &#123;</span><br><span class="line">    <span class="keyword">this</span>.coorType = coorType;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">æ˜¯å¦éœ€è¦è¿”å›åœ°å€ä¿¡æ¯</span></span></span><br><span class="line">  <span class="keyword">void</span> setIsNeedAddres(<span class="built_in">bool</span> isNeedAddres) &#123;</span><br><span class="line">    <span class="keyword">this</span>.isNeedAddres = isNeedAddres;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">æ˜¯å¦éœ€è¦è¿”å›æµ·æ‹”é«˜åº¦ä¿¡æ¯</span></span></span><br><span class="line">  <span class="keyword">void</span> setIsNeedAltitude(<span class="built_in">bool</span> isNeedAltitude) &#123;</span><br><span class="line">    <span class="keyword">this</span>.isNeedAltitude = isNeedAltitude;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">æ˜¯å¦éœ€è¦è¿”å›å‘¨è¾¹poiä¿¡æ¯</span></span></span><br><span class="line">  <span class="keyword">void</span> setIsNeedLocationPoiList(<span class="built_in">bool</span> isNeedLocationPoiList) &#123;</span><br><span class="line">    <span class="keyword">this</span>.isNeedLocationPoiList = isNeedLocationPoiList;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">æ˜¯å¦éœ€è¦è¿”å›ä½ç½®æè¿°ä¿¡æ¯</span></span></span><br><span class="line">  <span class="keyword">void</span> setIsNeedLocationDescribe(<span class="built_in">bool</span> isNeedLocationDescribe) &#123;</span><br><span class="line">    <span class="keyword">this</span>.isNeedLocationDescribe = isNeedLocationDescribe;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">æ˜¯å¦éœ€è¦è¿”å›æ–°ç‰ˆæœ¬rgcä¿¡æ¯</span></span></span><br><span class="line">  <span class="keyword">void</span> setIsNeedNewVersionRgc(<span class="built_in">bool</span> isNeedNewVersionRgc) &#123;</span><br><span class="line">    <span class="keyword">this</span>.isNeedNewVersionRgc = isNeedNewVersionRgc;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">æ˜¯å¦ä½¿ç”¨gps</span></span></span><br><span class="line">  <span class="keyword">void</span> setOpenGps(<span class="built_in">bool</span> openGps) &#123;</span><br><span class="line">    <span class="keyword">this</span>.openGps = openGps;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">å¯é€‰ï¼Œè®¾ç½®å‘èµ·å®šä½è¯·æ±‚çš„é—´éš”ï¼Œintç±»å‹ï¼Œå•ä½ms</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">å¦‚æœè®¾ç½®ä¸º0ï¼Œåˆ™ä»£è¡¨å•æ¬¡å®šä½ï¼Œå³ä»…å®šä½ä¸€æ¬¡ï¼Œé»˜è®¤ä¸º0</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">å¦‚æœè®¾ç½®é0ï¼Œéœ€è®¾ç½®1000msä»¥ä¸Šæ‰æœ‰æ•ˆ</span></span></span><br><span class="line">  <span class="keyword">void</span> setScanspan(<span class="built_in">int</span> scanspan) &#123;</span><br><span class="line">    <span class="keyword">this</span>.scanspan = scanspan;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">è®¾ç½®å®šä½æ¨¡å¼ï¼Œå¯é€‰çš„æ¨¡å¼æœ‰é«˜ç²¾åº¦ã€ä»…è®¾å¤‡ã€ä»…ç½‘ç»œï¼Œé»˜è®¤ä¸ºé«˜ç²¾åº¦æ¨¡å¼</span></span></span><br><span class="line">  <span class="keyword">void</span> setLocationMode(LocationMode locationMode) &#123;</span><br><span class="line">    <span class="keyword">if</span> (locationMode == LocationMode.Hight_Accuracy) &#123;</span><br><span class="line">      <span class="keyword">this</span>.locationMode = <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (locationMode == LocationMode.Device_Sensors) &#123;</span><br><span class="line">      <span class="keyword">this</span>.locationMode = <span class="number">2</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (locationMode == LocationMode.Battery_Saving) &#123;</span><br><span class="line">      <span class="keyword">this</span>.locationMode = <span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">å¯é€‰ï¼Œè®¾ç½®åœºæ™¯å®šä½å‚æ•°ï¼ŒåŒ…æ‹¬ç­¾åˆ°åœºæ™¯ã€è¿åŠ¨åœºæ™¯ã€å‡ºè¡Œåœºæ™¯</span></span></span><br><span class="line">  <span class="keyword">void</span> setLocationPurpose(BDLocationPurpose locationPurpose) &#123;</span><br><span class="line">    <span class="keyword">if</span> (locationPurpose == BDLocationPurpose.SignIn) &#123;</span><br><span class="line">      <span class="keyword">this</span>.locationPurpose = <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (locationPurpose == BDLocationPurpose.Transport) &#123;</span><br><span class="line">      <span class="keyword">this</span>.locationPurpose = <span class="number">2</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (locationPurpose == BDLocationPurpose.Sport) &#123;</span><br><span class="line">      <span class="keyword">this</span>.locationPurpose = <span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  BaiduLocationAndroidOption(</span><br><span class="line">      &#123;<span class="keyword">this</span>.coorType,</span><br><span class="line">      <span class="keyword">this</span>.isNeedAddres,</span><br><span class="line">      <span class="keyword">this</span>.isNeedAltitude,</span><br><span class="line">      <span class="keyword">this</span>.isNeedLocationPoiList,</span><br><span class="line">      <span class="keyword">this</span>.isNeedNewVersionRgc,</span><br><span class="line">      <span class="keyword">this</span>.openGps,</span><br><span class="line">      <span class="keyword">this</span>.isNeedLocationDescribe,</span><br><span class="line">      <span class="keyword">this</span>.scanspan,</span><br><span class="line">      <span class="keyword">this</span>.locationMode,</span><br><span class="line">      <span class="keyword">this</span>.locationPurpose&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">æ ¹æ®ä¼ å…¥çš„mapç”ŸæˆBaiduLocationAndroidOptionå¯¹è±¡</span></span></span><br><span class="line">  <span class="keyword">factory</span> BaiduLocationAndroidOption.fromMap(<span class="built_in">dynamic</span> value) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> BaiduLocationAndroidOption(</span><br><span class="line">      coorType: value[<span class="string">'coorType'</span>],</span><br><span class="line">      isNeedAddres: value[<span class="string">'isNeedAddres'</span>],</span><br><span class="line">      isNeedAltitude: value[<span class="string">'isNeedAltitude'</span>],</span><br><span class="line">      isNeedLocationPoiList: value[<span class="string">'isNeedLocationPoiList'</span>],</span><br><span class="line">      isNeedNewVersionRgc: value[<span class="string">'isNeedNewVersionRgc'</span>],</span><br><span class="line">      openGps: value[<span class="string">'openGps'</span>],</span><br><span class="line">      isNeedLocationDescribe: value[<span class="string">''</span>],</span><br><span class="line">      scanspan: value[<span class="string">'scanspan'</span>],</span><br><span class="line">      locationMode: value[<span class="string">'locationMode'</span>],</span><br><span class="line">      locationPurpose: value[<span class="string">'LocationPurpose'</span>],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">è·å–å¯¹æœ¬ç±»æ‰€æœ‰å˜é‡èµ‹å€¼åçš„mapé”®å€¼å¯¹</span></span></span><br><span class="line">  <span class="built_in">Map</span> getMap() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="string">"coorType"</span>: coorType,</span><br><span class="line">      <span class="string">"isNeedAddres"</span>: isNeedAddres,</span><br><span class="line">      <span class="string">"isNeedAltitude"</span>: isNeedAltitude,</span><br><span class="line">      <span class="string">"isNeedLocationPoiList"</span>: isNeedLocationPoiList,</span><br><span class="line">      <span class="string">"isNeedNewVersionRgc"</span>: isNeedNewVersionRgc,</span><br><span class="line">      <span class="string">"openGps"</span>: openGps,</span><br><span class="line">      <span class="string">"isNeedLocationDescribe"</span>: isNeedLocationDescribe,</span><br><span class="line">      <span class="string">"scanspan"</span>: scanspan,</span><br><span class="line">      <span class="string">"locationMode"</span>: locationMode,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/// <span class="markdown">å®šä½æ¨¡å¼æšä¸¾ç±»</span></span></span><br><span class="line"><span class="keyword">enum</span> LocationMode &#123;</span><br><span class="line">  <span class="comment">/// <span class="markdown">é«˜ç²¾åº¦æ¨¡å¼</span></span></span><br><span class="line">  Hight_Accuracy,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">ä½åŠŸè€—æ¨¡å¼</span></span></span><br><span class="line">  Battery_Saving,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">ä»…è®¾å¤‡(Gps)æ¨¡å¼</span></span></span><br><span class="line">  Device_Sensors</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/// <span class="markdown">åœºæ™¯å®šä½æšä¸¾ç±»</span></span></span><br><span class="line"><span class="keyword">enum</span> BDLocationPurpose &#123;</span><br><span class="line">  <span class="comment">///  <span class="markdown">ç­¾åˆ°åœºæ™¯</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">åªè¿›è¡Œä¸€æ¬¡å®šä½è¿”å›æœ€æ¥è¿‘çœŸå®ä½ç½®çš„å®šä½ç»“æœï¼ˆå®šä½é€Ÿåº¦å¯èƒ½ä¼šå»¶è¿Ÿ1-3sï¼‰</span></span></span><br><span class="line">  SignIn,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">å‡ºè¡Œåœºæ™¯</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">é«˜ç²¾åº¦è¿ç»­å®šä½ï¼Œé€‚ç”¨äºæœ‰æˆ·å†…å¤–åˆ‡æ¢çš„åœºæ™¯ï¼Œå«æ˜Ÿå®šä½å’Œç½‘ç»œå®šä½ç›¸äº’åˆ‡æ¢ï¼Œå«æ˜Ÿå®šä½æˆåŠŸä¹‹åç½‘ç»œå®šä½ä¸å†è¿”å›ï¼Œå«æ˜Ÿä¿¡å·æ–­å¼€ä¹‹åä¸€æ®µæ—¶é—´æ‰ä¼šè¿”å›ç½‘ç»œç»“æœ</span></span></span><br><span class="line">  Sport,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">è¿åŠ¨åœºæ™¯</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">é«˜ç²¾åº¦è¿ç»­å®šä½ï¼Œé€‚ç”¨äºæœ‰æˆ·å†…å¤–åˆ‡æ¢çš„åœºæ™¯ï¼Œå«æ˜Ÿå®šä½å’Œç½‘ç»œå®šä½ç›¸äº’åˆ‡æ¢ï¼Œå«æ˜Ÿå®šä½æˆåŠŸä¹‹åç½‘ç»œå®šä½ä¸å†è¿”å›ï¼Œå«æ˜Ÿä¿¡å·æ–­å¼€ä¹‹åä¸€æ®µæ—¶é—´æ‰ä¼šè¿”å›ç½‘ç»œç»“æœ</span></span></span><br><span class="line">  Transport</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ios é…ç½®é¡¹ lib/entity/flutter_baidu_location_ios_option.dart</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// <span class="markdown">è®¾ç½®iosç«¯å®šä½å‚æ•°ç±»</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BaiduLocationIOSOption</span> </span>&#123;</span><br><span class="line">  <span class="comment">/// <span class="markdown">è®¾ç½®ä½ç½®è·å–è¶…æ—¶æ—¶é—´</span></span></span><br><span class="line">  <span class="built_in">int</span> locationTimeout;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">è®¾ç½®è·å–åœ°å€ä¿¡æ¯è¶…æ—¶æ—¶é—´</span></span></span><br><span class="line">  <span class="built_in">int</span> reGeocodeTimeout;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">è®¾ç½®åº”ç”¨ä½ç½®ç±»å‹</span></span></span><br><span class="line">  <span class="built_in">String</span> activityType;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">è®¾ç½®è¿”å›ä½ç½®çš„åæ ‡ç³»ç±»å‹</span></span></span><br><span class="line">  <span class="built_in">String</span> BMKLocationCoordinateType;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">è®¾ç½®é¢„æœŸç²¾åº¦å‚æ•°</span></span></span><br><span class="line">  <span class="built_in">String</span> desiredAccuracy;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">æ˜¯å¦éœ€è¦æœ€æ–°ç‰ˆæœ¬rgcæ•°æ®</span></span></span><br><span class="line">  <span class="built_in">bool</span> isNeedNewVersionRgc;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">æŒ‡å®šå®šä½æ˜¯å¦ä¼šè¢«ç³»ç»Ÿè‡ªåŠ¨æš‚åœ</span></span></span><br><span class="line">  <span class="built_in">bool</span> pausesLocationUpdatesAutomatically;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">æŒ‡å®šæ˜¯å¦å…è®¸åå°å®šä½</span></span></span><br><span class="line">  <span class="built_in">bool</span> allowsBackgroundLocationUpdates;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">è®¾å®šå®šä½çš„æœ€å°æ›´æ–°è·ç¦»</span></span></span><br><span class="line">  <span class="built_in">double</span> distanceFilter;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">æŒ‡å®šæ˜¯å¦å…è®¸åå°å®šä½</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">allowsBackgroundLocationUpdatesä¸ºtrueåˆ™å…è®¸åå°å®šä½</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">allowsBackgroundLocationUpdatesä¸ºfalseåˆ™ä¸å…è®¸åå°å®šä½</span></span></span><br><span class="line">  <span class="keyword">void</span> setAllowsBackgroundLocationUpdates(</span><br><span class="line">      <span class="built_in">bool</span> allowsBackgroundLocationUpdates) &#123;</span><br><span class="line">    <span class="keyword">this</span>.allowsBackgroundLocationUpdates = allowsBackgroundLocationUpdates;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">æŒ‡å®šå®šä½æ˜¯å¦ä¼šè¢«ç³»ç»Ÿè‡ªåŠ¨æš‚åœ</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">pausesLocationUpdatesAutomaticallyä¸ºtrueåˆ™å®šä½ä¼šè¢«ç³»ç»Ÿè‡ªåŠ¨æš‚åœ</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">pausesLocationUpdatesAutomaticallyä¸ºfalseåˆ™å®šä½ä¸ä¼šè¢«ç³»ç»Ÿè‡ªåŠ¨æš‚åœ</span></span></span><br><span class="line">  <span class="keyword">void</span> setPauseLocUpdateAutomatically(<span class="built_in">bool</span> pausesLocationUpdatesAutomatically) &#123;</span><br><span class="line">    <span class="keyword">this</span>.pausesLocationUpdatesAutomatically =</span><br><span class="line">        pausesLocationUpdatesAutomatically;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">è®¾ç½®ä½ç½®è·å–è¶…æ—¶æ—¶é—´</span></span></span><br><span class="line">  <span class="keyword">void</span> setLocationTimeout(<span class="built_in">int</span> locationTimeout) &#123;</span><br><span class="line">    <span class="keyword">this</span>.locationTimeout = locationTimeout;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">è®¾ç½®è·å–åœ°å€ä¿¡æ¯è¶…æ—¶æ—¶é—´</span></span></span><br><span class="line">  <span class="keyword">void</span> setReGeocodeTimeout(<span class="built_in">int</span> reGeocodeTimeout) &#123;</span><br><span class="line">    <span class="keyword">this</span>.reGeocodeTimeout = reGeocodeTimeout;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">è®¾ç½®åº”ç”¨ä½ç½®ç±»å‹</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">activityTypeå¯é€‰å€¼åŒ…æ‹¬:</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">"CLActivityTypeOther"</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">"CLActivityTypeAutomotiveNavigation"</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">"CLActivityTypeFitness"</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">"CLActivityTypeOtherNavigation"</span></span></span><br><span class="line">  <span class="keyword">void</span> setActivityType(<span class="built_in">String</span> activityType) &#123;</span><br><span class="line">    <span class="keyword">this</span>.activityType = activityType;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">è®¾ç½®è¿”å›ä½ç½®çš„åæ ‡ç³»ç±»å‹</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">BMKLocationCoordinateTypeå¯é€‰å€¼åŒ…æ‹¬:</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">"BMKLocationCoordinateTypeBMK09LL"</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">"BMKLocationCoordinateTypeBMK09MC"</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">"BMKLocationCoordinateTypeWGS84"</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">"BMKLocationCoordinateTypeGCJ02"</span></span></span><br><span class="line">  <span class="keyword">void</span> setBMKLocationCoordinateType(<span class="built_in">String</span> BMKLocationCoordinateType) &#123;</span><br><span class="line">    <span class="keyword">this</span>.BMKLocationCoordinateType = BMKLocationCoordinateType;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">è®¾ç½®é¢„æœŸç²¾åº¦å‚æ•°</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">desiredAccuracyå¯é€‰å€¼åŒ…æ‹¬:</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">"kCLLocationAccuracyBest"</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">"kCLLocationAccuracyNearestTenMeters"</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">"kCLLocationAccuracyHundredMeters"</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">"kCLLocationAccuracyKilometer"</span></span></span><br><span class="line">  <span class="keyword">void</span> setDesiredAccuracy(<span class="built_in">String</span> desiredAccuracy) &#123;</span><br><span class="line">    <span class="keyword">this</span>.desiredAccuracy = desiredAccuracy;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">è®¾å®šå®šä½çš„æœ€å°æ›´æ–°è·ç¦»</span></span></span><br><span class="line">  <span class="keyword">void</span> setDistanceFilter(<span class="built_in">double</span> distanceFilter) &#123;</span><br><span class="line">    <span class="keyword">this</span>.distanceFilter = distanceFilter;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">æ˜¯å¦éœ€è¦æœ€æ–°ç‰ˆæœ¬rgcæ•°æ®</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">isNeedNewVersionRgcä¸ºtrueåˆ™éœ€è¦è¿”å›æœ€æ–°ç‰ˆæœ¬rgcæ•°æ®</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">isNeedNewVersionRgcä¸ºfalseåˆ™ä¸éœ€è¦è¿”å›æœ€æ–°ç‰ˆæœ¬rgcæ•°æ®</span></span></span><br><span class="line">  <span class="keyword">void</span> setIsNeedNewVersionRgc(<span class="built_in">bool</span> isNeedNewVersionRgc) &#123;</span><br><span class="line">    <span class="keyword">this</span>.isNeedNewVersionRgc = isNeedNewVersionRgc;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  BaiduLocationIOSOption(</span><br><span class="line">      &#123;<span class="keyword">this</span>.locationTimeout,</span><br><span class="line">      <span class="keyword">this</span>.reGeocodeTimeout,</span><br><span class="line">      <span class="keyword">this</span>.activityType,</span><br><span class="line">      <span class="keyword">this</span>.BMKLocationCoordinateType,</span><br><span class="line">      <span class="keyword">this</span>.desiredAccuracy,</span><br><span class="line">      <span class="keyword">this</span>.isNeedNewVersionRgc,</span><br><span class="line">      <span class="keyword">this</span>.pausesLocationUpdatesAutomatically,</span><br><span class="line">      <span class="keyword">this</span>.allowsBackgroundLocationUpdates,</span><br><span class="line">      <span class="keyword">this</span>.distanceFilter&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">æ ¹æ®ä¼ å…¥çš„mapç”ŸæˆBaiduLocationIOSOptionå¯¹è±¡</span></span></span><br><span class="line">  <span class="keyword">factory</span> BaiduLocationIOSOption.fromMap(<span class="built_in">dynamic</span> value) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> BaiduLocationIOSOption(</span><br><span class="line">      locationTimeout: value[<span class="string">'locationTimeout'</span>],</span><br><span class="line">      reGeocodeTimeout: value[<span class="string">'reGeocodeTimeout'</span>],</span><br><span class="line">      activityType: value[<span class="string">'activityType'</span>],</span><br><span class="line">      BMKLocationCoordinateType: value[<span class="string">'BMKLocationCoordinateType'</span>],</span><br><span class="line">      desiredAccuracy: value[<span class="string">'desiredAccuracy'</span>],</span><br><span class="line">      isNeedNewVersionRgc: value[<span class="string">'isNeedNewVersionRgc'</span>],</span><br><span class="line">      pausesLocationUpdatesAutomatically:</span><br><span class="line">          value[<span class="string">'pausesLocationUpdatesAutomatically'</span>],</span><br><span class="line">      allowsBackgroundLocationUpdates: value[<span class="string">'allowsBackgroundLocationUpdates'</span>],</span><br><span class="line">      distanceFilter: value[<span class="string">'distanceFilter'</span>],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">è·å–å¯¹æœ¬ç±»æ‰€æœ‰å˜é‡èµ‹å€¼åçš„mapé”®å€¼å¯¹</span></span></span><br><span class="line">  <span class="built_in">Map</span> getMap() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="string">"locationTimeout"</span>: locationTimeout,</span><br><span class="line">      <span class="string">"reGeocodeTimeout"</span>: reGeocodeTimeout,</span><br><span class="line">      <span class="string">"activityType"</span>: activityType,</span><br><span class="line">      <span class="string">"BMKLocationCoordinateType"</span>: BMKLocationCoordinateType,</span><br><span class="line">      <span class="string">"desiredAccuracy"</span>: desiredAccuracy,</span><br><span class="line">      <span class="string">"isNeedNewVersionRgc"</span>: isNeedNewVersionRgc,</span><br><span class="line">      <span class="string">"pausesLocationUpdatesAutomatically"</span>: pausesLocationUpdatesAutomatically,</span><br><span class="line">      <span class="string">"allowsBackgroundLocationUpdates"</span>: allowsBackgroundLocationUpdates,</span><br><span class="line">      <span class="string">"distanceFilter"</span>: distanceFilter,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>æ¥å£ lib/flutter_baidu_plugin_ducafecat.dart</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'dart:async'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'dart:io'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/services.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FlutterBaiduPluginDucafecat</span> </span>&#123;</span><br><span class="line">  <span class="comment">/// <span class="markdown">flutterç«¯ä¸»åŠ¨è°ƒç”¨åŸç”Ÿç«¯æ–¹æ³•</span></span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> MethodChannel _channel =</span><br><span class="line">      <span class="keyword">const</span> MethodChannel(<span class="string">'flutter_baidu_plugin_ducafecat'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">åŸç”Ÿç«¯ä¸»åŠ¨å›ä¼ ç»“æœæ•°æ®åˆ°flutterç«¯</span></span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> EventChannel _stream =</span><br><span class="line">      <span class="keyword">const</span> EventChannel(<span class="string">"flutter_baidu_plugin_ducafecat_stream"</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">ios ä¸‹è®¾ç½® key</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">android åœ¨ AndroidManifest.xml ä¸­è®¾ç½®</span></span></span><br><span class="line">  <span class="keyword">static</span> Future&lt;<span class="built_in">bool</span>&gt; setApiKey(<span class="built_in">String</span> key) <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">await</span> _channel.invokeMethod(<span class="string">"setApiKey"</span>, key);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">è®¾ç½®å®šä½å‚æ•°</span></span></span><br><span class="line">  <span class="keyword">void</span> prepareLoc(<span class="built_in">Map</span> androidMap, <span class="built_in">Map</span> iosMap) &#123;</span><br><span class="line">    <span class="built_in">Map</span> map;</span><br><span class="line">    <span class="keyword">if</span> (Platform.isAndroid) &#123;</span><br><span class="line">      map = androidMap;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      map = iosMap;</span><br><span class="line">    &#125;</span><br><span class="line">    _channel.invokeMethod(<span class="string">"updateOption"</span>, map);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">å¯åŠ¨å®šä½</span></span></span><br><span class="line">  <span class="keyword">void</span> startLocation() &#123;</span><br><span class="line">    _channel.invokeMethod(<span class="string">'startLocation'</span>);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">åœæ­¢å®šä½</span></span></span><br><span class="line">  <span class="keyword">void</span> stopLocation() &#123;</span><br><span class="line">    _channel.invokeMethod(<span class="string">'stopLocation'</span>);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">åŸç”Ÿç«¯å›ä¼ é”®å€¼å¯¹mapåˆ°flutterç«¯</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">mapä¸­keyä¸ºisInChinaå¯¹åº”çš„valueï¼Œå¦‚æœä¸º1åˆ™åˆ¤æ–­æ˜¯åœ¨å›½å†…ï¼Œä¸º0åˆ™åˆ¤æ–­æ˜¯åœ¨å›½å¤–</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">mapä¸­å­˜åœ¨keyä¸ºnearbyåˆ™åˆ¤æ–­ä¸ºå·²åˆ°è¾¾è®¾ç½®ç›‘å¬ä½ç½®é™„è¿‘</span></span></span><br><span class="line">  Stream&lt;<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">Object</span>&gt;&gt; onResultCallback() &#123;</span><br><span class="line">    Stream&lt;<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">Object</span>&gt;&gt; _resultMap;</span><br><span class="line">    <span class="keyword">if</span> (_resultMap == <span class="keyword">null</span>) &#123;</span><br><span class="line">      _resultMap = _stream.receiveBroadcastStream().map&lt;<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">Object</span>&gt;&gt;(</span><br><span class="line">          (element) =&gt; element.cast&lt;<span class="built_in">String</span>, <span class="built_in">Object</span>&gt;());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> _resultMap;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="è§¦å‘-registerWith-çš„æ–¹å¼ï¼Œè€é¡¹ç›®"><a href="#è§¦å‘-registerWith-çš„æ–¹å¼ï¼Œè€é¡¹ç›®" class="headerlink" title="è§¦å‘ registerWith çš„æ–¹å¼ï¼Œè€é¡¹ç›®"></a>è§¦å‘ registerWith çš„æ–¹å¼ï¼Œè€é¡¹ç›®</h4><blockquote>
<p>// This static function is optional and equivalent to onAttachedToEngine. It supports the old<br>// pre-Flutter-1.12 Android projects. You are encouraged to continue supporting<br>// plugin registration via this function while apps migrate to use the new Android APIs<br>// post-flutter-1.12 via <a href="https://flutter.dev/go/android-project-migration" target="_blank" rel="noopener">https://flutter.dev/go/android-project-migration</a>.</p>
</blockquote>
<ul>
<li>android ç»„ä»¶ä»£ç </li>
</ul>
<p>android/src/main/java/tech/ducafecat/flutter_baidu_plugin_ducafecat/FlutterBaiduPluginDucafecatPlugin.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">registerWith</span><span class="params">(Registrar registrar)</span> </span>&#123;</span><br><span class="line">  ......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>example android æ³¨å†Œç»„ä»¶</li>
</ul>
<p>example/android/app/src/main/java/io/flutter/plugins/GeneratedPluginRegistrant.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">GeneratedPluginRegistrant</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">registerWith</span><span class="params">(PluginRegistry registry)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (alreadyRegisteredWith(registry)) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    LocationFlutterPlugin.registerWith(registry.registrarFor(<span class="string">"com.baidu.bdmap_location_flutter_plugin.LocationFlutterPlugin"</span>));</span><br><span class="line">    PermissionHandlerPlugin.registerWith(registry.registrarFor(<span class="string">"com.baseflow.permissionhandler.PermissionHandlerPlugin"</span>));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">alreadyRegisteredWith</span><span class="params">(PluginRegistry registry)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> String key = GeneratedPluginRegistrant<span class="class">.<span class="keyword">class</span>.<span class="title">getCanonicalName</span>()</span>;</span><br><span class="line">    <span class="keyword">if</span> (registry.hasPlugin(key)) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    registry.registrarFor(key);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æˆå‘˜å˜é‡ã€åŒæ­¥ã€å¼‚æ­¥å¤„ç†"><a href="#æˆå‘˜å˜é‡ã€åŒæ­¥ã€å¼‚æ­¥å¤„ç†" class="headerlink" title="æˆå‘˜å˜é‡ã€åŒæ­¥ã€å¼‚æ­¥å¤„ç†"></a>æˆå‘˜å˜é‡ã€åŒæ­¥ã€å¼‚æ­¥å¤„ç†</h4><p>MethodChannel è¯·æ±‚æ–¹æ³•åï¼ŒåŒæ­¥è¿”å›ç»“æœ</p>
<p>EventChannel ç»„ä»¶ä¸»åŠ¨æ¨æ¶ˆæ¯åˆ° Flutter</p>
<ul>
<li>android/src/main/java/tech/ducafecat/flutter_baidu_plugin_ducafecat/FlutterBaiduPluginDucafecatPlugin.java</li>
</ul>
<p>ç”¨åˆ°çš„æˆå‘˜å˜é‡å…ˆå®šä¹‰ä¸‹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FlutterBaiduPluginDucafecatPlugin</span> <span class="keyword">implements</span> <span class="title">FlutterPlugin</span>, <span class="title">MethodCallHandler</span>, <span class="title">EventChannel</span>.<span class="title">StreamHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é€šé“åç§°</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String CHANNEL_METHOD_LOCATION = <span class="string">"flutter_baidu_plugin_ducafecat"</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String CHANNEL_STREAM_LOCATION = <span class="string">"flutter_baidu_plugin_ducafecat_stream"</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> Context mContext = <span class="keyword">null</span>; <span class="comment">// flutter view context</span></span><br><span class="line">  <span class="keyword">private</span> LocationClient mLocationClient = <span class="keyword">null</span>; <span class="comment">// å®šä½å¯¹è±¡</span></span><br><span class="line">  <span class="keyword">private</span> EventChannel.EventSink mEventSink = <span class="keyword">null</span>; <span class="comment">// äº‹ä»¶å¯¹è±¡</span></span><br><span class="line">  <span class="keyword">private</span> BDNotifyListener mNotifyListener; <span class="comment">// ä½ç½®æé†’å¯¹è±¡</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">boolean</span> isPurporseLoc = <span class="keyword">false</span>; <span class="comment">// ç­¾åˆ°åœºæ™¯</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">boolean</span> isInChina = <span class="keyword">false</span>;  <span class="comment">// æ˜¯å¦å¯ç”¨å›½å†…å¤–ä½ç½®åˆ¤æ–­åŠŸèƒ½</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">boolean</span> isNotify = <span class="keyword">false</span>; <span class="comment">// ä½ç½®æé†’</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// é€šé“å¯¹è±¡</span></span><br><span class="line">  <span class="keyword">private</span> MethodChannel channel = <span class="keyword">null</span>;</span><br><span class="line">  <span class="keyword">private</span> EventChannel eventChannel = <span class="keyword">null</span>;</span><br></pre></td></tr></table></figure>
<h4 id="ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ"><a href="#ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ"></a>ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ</h4><ul>
<li>æ–‡ä»¶</li>
</ul>
<p>android/src/main/java/tech/ducafecat/flutter_baidu_plugin_ducafecat/FlutterBaiduPluginDucafecatPlugin.java</p>
<ul>
<li>ç»„ä»¶æ³¨å†Œ onAttachedToEngine</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAttachedToEngine</span><span class="params">(@NonNull FlutterPluginBinding flutterPluginBinding)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">this</span>.mContext = flutterPluginBinding.getApplicationContext();</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * å¼€å§‹ã€åœæ­¢å®šä½</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  channel = <span class="keyword">new</span> MethodChannel(flutterPluginBinding.getBinaryMessenger(), CHANNEL_METHOD_LOCATION);</span><br><span class="line">  channel.setMethodCallHandler(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ç›‘å¬ä½ç½®å˜åŒ–</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  eventChannel = <span class="keyword">new</span> EventChannel(flutterPluginBinding.getBinaryMessenger(), CHANNEL_STREAM_LOCATION);</span><br><span class="line">  eventChannel.setStreamHandler(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>è€é¡¹ç›® ç»„ä»¶æ³¨å†Œ registerWith</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">registerWith</span><span class="params">(Registrar registrar)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    FlutterBaiduPluginDucafecatPlugin plugin = <span class="keyword">new</span> FlutterBaiduPluginDucafecatPlugin();</span><br><span class="line">    plugin.mContext = registrar.context();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¼€å§‹ã€åœæ­¢å®šä½</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">final</span> MethodChannel channel = <span class="keyword">new</span> MethodChannel(registrar.messenger(), CHANNEL_METHOD_LOCATION);</span><br><span class="line">    channel.setMethodCallHandler(plugin);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç›‘å¬ä½ç½®å˜åŒ–</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">final</span> EventChannel eventChannel = <span class="keyword">new</span> EventChannel(registrar.messenger(), CHANNEL_STREAM_LOCATION);</span><br><span class="line">    eventChannel.setStreamHandler(plugin);</span><br><span class="line"></span><br><span class="line"><span class="comment">//    final MethodChannel channel = new MethodChannel(registrar.messenger(), "flutter_baidu_plugin_ducafecat");</span></span><br><span class="line"><span class="comment">//    channel.setMethodCallHandler(new FlutterBaiduPluginDucafecatPlugin());</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>æ³¨é”€ç»„ä»¶ onCancel</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCancel</span><span class="params">(Object arguments)</span> </span>&#123;</span><br><span class="line">  stopLocation();</span><br><span class="line">  <span class="keyword">if</span> (isNotify) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">null</span> != mLocationClient) &#123;</span><br><span class="line">      mLocationClient.removeNotifyEvent(mNotifyListener);</span><br><span class="line">    &#125;</span><br><span class="line">    mNotifyListener = <span class="keyword">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>é”€æ¯ç»„ä»¶ onDetachedFromEngine</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onDetachedFromEngine</span><span class="params">(@NonNull FlutterPluginBinding binding)</span> </span>&#123;</span><br><span class="line">  channel.setMethodCallHandler(<span class="keyword">null</span>);</span><br><span class="line">  eventChannel.setStreamHandler(<span class="keyword">null</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>æ–¹æ³•è°ƒç”¨ onMethodCall</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onMethodCall</span><span class="params">(@NonNull MethodCall call, @NonNull Result result)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="string">"startLocation"</span>.equals(call.method)) &#123;</span><br><span class="line">    startLocation(); <span class="comment">// å¯åŠ¨å®šä½</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">"stopLocation"</span>.equals(call.method)) &#123;</span><br><span class="line">    stopLocation(); <span class="comment">// åœæ­¢å®šä½</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">"updateOption"</span>.equals(call.method)) &#123; <span class="comment">// è®¾ç½®å®šä½å‚æ•°</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      updateOption((Map) call.arguments);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> ((<span class="string">"getPlatformVersion"</span>).equals(call.method)) &#123;</span><br><span class="line">    result.success(<span class="string">"Android "</span> + android.os.Build.VERSION.RELEASE);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    result.notImplemented();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>flutter onListen å›è°ƒå¯¹è±¡</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onListen</span><span class="params">(Object arguments, EventChannel.EventSink events)</span> </span>&#123;</span><br><span class="line">  mEventSink = events;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="åœ°å›¾ä¸šåŠ¡å‚æ•°"><a href="#åœ°å›¾ä¸šåŠ¡å‚æ•°" class="headerlink" title="åœ°å›¾ä¸šåŠ¡å‚æ•°"></a>åœ°å›¾ä¸šåŠ¡å‚æ•°</h4><ul>
<li>æ›´æ–°å‚æ•° updateOption</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å‡†å¤‡å®šä½</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> arguments</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">updateOption</span><span class="params">(Map arguments)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">null</span> == mLocationClient) &#123;</span><br><span class="line">    mLocationClient = <span class="keyword">new</span> LocationClient(mContext);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// åˆ¤æ–­æ˜¯å¦å¯ç”¨ä½ç½®æé†’åŠŸèƒ½</span></span><br><span class="line">  <span class="keyword">if</span> (arguments.containsKey(<span class="string">"isNotify"</span>)) &#123;</span><br><span class="line">    isNotify = <span class="keyword">true</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">null</span> == mNotifyListener) &#123;</span><br><span class="line">      mNotifyListener = <span class="keyword">new</span> MyNotifyLister();</span><br><span class="line">    &#125;</span><br><span class="line">    mLocationClient.registerNotify(mNotifyListener);</span><br><span class="line">    <span class="keyword">double</span> lat = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">double</span> lon = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">float</span> radius = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (arguments.containsKey(<span class="string">"latitude"</span>)) &#123;</span><br><span class="line">      lat = (<span class="keyword">double</span>)arguments.get(<span class="string">"latitude"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (arguments.containsKey(<span class="string">"longitude"</span>)) &#123;</span><br><span class="line">      lon = (<span class="keyword">double</span>)arguments.get(<span class="string">"longitude"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (arguments.containsKey(<span class="string">"radius"</span>)) &#123;</span><br><span class="line">      <span class="keyword">double</span> radius1 = (<span class="keyword">double</span>)arguments.get(<span class="string">"radius"</span>);</span><br><span class="line">      radius = Float.parseFloat(String.valueOf(radius1));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    String coorType = mLocationClient.getLocOption().getCoorType();</span><br><span class="line">    mNotifyListener.SetNotifyLocation(lat, lon, radius, coorType);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    isNotify = <span class="keyword">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  mLocationClient.registerLocationListener(<span class="keyword">new</span> CurrentLocationListener());</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åˆ¤æ–­æ˜¯å¦å¯ç”¨å›½å†…å¤–ä½ç½®åˆ¤æ–­åŠŸèƒ½</span></span><br><span class="line">  <span class="keyword">if</span> (arguments.containsKey(<span class="string">"isInChina"</span>)) &#123;</span><br><span class="line">    isInChina = <span class="keyword">true</span>;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    isInChina =<span class="keyword">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  LocationClientOption option = <span class="keyword">new</span> LocationClientOption();</span><br><span class="line">  parseOptions(option, arguments);</span><br><span class="line">  option.setProdName(<span class="string">"flutter"</span>);</span><br><span class="line">  mLocationClient.setLocOption(option);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>è§£æå®šä½å‚æ•° parseOptions</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è§£æå®šä½å‚æ•°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> option</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> arguments</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">parseOptions</span><span class="params">(LocationClientOption option,Map arguments)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (arguments != <span class="keyword">null</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯é€‰ï¼Œè®¾ç½®æ˜¯å¦è¿”å›é€†åœ°ç†åœ°å€ä¿¡æ¯ã€‚é»˜è®¤æ˜¯true</span></span><br><span class="line">    <span class="keyword">if</span> (arguments.containsKey(<span class="string">"isNeedAddres"</span>)) &#123;</span><br><span class="line">      <span class="keyword">if</span> (((<span class="keyword">boolean</span>)arguments.get(<span class="string">"isNeedAddres"</span>))) &#123;</span><br><span class="line">        option.setIsNeedAddress(<span class="keyword">true</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        option.setIsNeedAddress(<span class="keyword">false</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯é€‰ï¼Œè®¾ç½®å®šä½æ¨¡å¼ï¼Œå¯é€‰çš„æ¨¡å¼æœ‰é«˜ç²¾åº¦ã€ä»…è®¾å¤‡ã€ä»…ç½‘ç»œã€‚é»˜è®¤ä¸ºé«˜ç²¾åº¦æ¨¡å¼</span></span><br><span class="line">    <span class="keyword">if</span> (arguments.containsKey(<span class="string">"locationMode"</span>)) &#123;</span><br><span class="line">      <span class="keyword">if</span> (((<span class="keyword">int</span>)arguments.get(<span class="string">"locationMode"</span>)) == <span class="number">1</span>) &#123;</span><br><span class="line">        option.setLocationMode(LocationClientOption.LocationMode.Hight_Accuracy); <span class="comment">// é«˜ç²¾åº¦æ¨¡å¼</span></span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (((<span class="keyword">int</span>)arguments.get(<span class="string">"locationMode"</span>)) == <span class="number">2</span>) &#123;</span><br><span class="line">        option.setLocationMode(LocationClientOption.LocationMode.Device_Sensors); <span class="comment">// ä»…è®¾å¤‡æ¨¡å¼</span></span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (((<span class="keyword">int</span>)arguments.get(<span class="string">"locationMode"</span>)) == <span class="number">3</span>) &#123;</span><br><span class="line">        option.setLocationMode(LocationClientOption.LocationMode.Battery_Saving); <span class="comment">// ä»…ç½‘ç»œæ¨¡å¼</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯é€‰ï¼Œè®¾ç½®åœºæ™¯å®šä½å‚æ•°ï¼ŒåŒ…æ‹¬ç­¾åˆ°åœºæ™¯ã€è¿åŠ¨åœºæ™¯ã€å‡ºè¡Œåœºæ™¯</span></span><br><span class="line">    <span class="keyword">if</span> ((arguments.containsKey(<span class="string">"LocationPurpose"</span>))) &#123;</span><br><span class="line">      isPurporseLoc = <span class="keyword">true</span>;</span><br><span class="line">      <span class="keyword">if</span>  (((<span class="keyword">int</span>)arguments.get(<span class="string">"LocationPurpose"</span>)) == <span class="number">1</span>) &#123;</span><br><span class="line">        option.setLocationPurpose(LocationClientOption.BDLocationPurpose.SignIn); <span class="comment">// ç­¾åˆ°åœºæ™¯</span></span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (((<span class="keyword">int</span>)arguments.get(<span class="string">"LocationPurpose"</span>)) == <span class="number">2</span>) &#123;</span><br><span class="line">        option.setLocationPurpose(LocationClientOption.BDLocationPurpose.Transport); <span class="comment">// è¿åŠ¨åœºæ™¯</span></span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (((<span class="keyword">int</span>)arguments.get(<span class="string">"LocationPurpose"</span>)) == <span class="number">3</span>) &#123;</span><br><span class="line">        option.setLocationPurpose(LocationClientOption.BDLocationPurpose.Sport); <span class="comment">// å‡ºè¡Œåœºæ™¯</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      isPurporseLoc = <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯é€‰ï¼Œè®¾ç½®éœ€è¦è¿”å›æµ·æ‹”é«˜åº¦ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">if</span> (arguments.containsKey(<span class="string">"isNeedAltitude"</span>)) &#123;</span><br><span class="line">      <span class="keyword">if</span> (((<span class="keyword">boolean</span>)arguments.get(<span class="string">"isNeedAltitude"</span>))) &#123;</span><br><span class="line">        option.setIsNeedAddress(<span class="keyword">true</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        option.setIsNeedAltitude(<span class="keyword">false</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯é€‰ï¼Œè®¾ç½®æ˜¯å¦ä½¿ç”¨gpsï¼Œé»˜è®¤false</span></span><br><span class="line">    <span class="keyword">if</span> (arguments.containsKey(<span class="string">"openGps"</span>)) &#123;</span><br><span class="line">      <span class="keyword">if</span>(((<span class="keyword">boolean</span>)arguments.get(<span class="string">"openGps"</span>))) &#123;</span><br><span class="line">        option.setOpenGps(<span class="keyword">true</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        option.setOpenGps(<span class="keyword">false</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯é€‰ï¼Œè®¾ç½®æ˜¯å¦å…è®¸è¿”å›é€†åœ°ç†åœ°å€ä¿¡æ¯ï¼Œé»˜è®¤æ˜¯true</span></span><br><span class="line">    <span class="keyword">if</span> (arguments.containsKey(<span class="string">"isNeedLocationDescribe"</span>)) &#123;</span><br><span class="line">      <span class="keyword">if</span>(((<span class="keyword">boolean</span>)arguments.get(<span class="string">"isNeedLocationDescribe"</span>))) &#123;</span><br><span class="line">        option.setIsNeedLocationDescribe(<span class="keyword">true</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        option.setIsNeedLocationDescribe(<span class="keyword">false</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯é€‰ï¼Œè®¾ç½®å‘èµ·å®šä½è¯·æ±‚çš„é—´éš”ï¼Œintç±»å‹ï¼Œå•ä½ms</span></span><br><span class="line">    <span class="comment">// å¦‚æœè®¾ç½®ä¸º0ï¼Œåˆ™ä»£è¡¨å•æ¬¡å®šä½ï¼Œå³ä»…å®šä½ä¸€æ¬¡ï¼Œé»˜è®¤ä¸º0</span></span><br><span class="line">    <span class="comment">// å¦‚æœè®¾ç½®é0ï¼Œéœ€è®¾ç½®1000msä»¥ä¸Šæ‰æœ‰æ•ˆ</span></span><br><span class="line">    <span class="keyword">if</span> (arguments.containsKey(<span class="string">"scanspan"</span>)) &#123;</span><br><span class="line">      option.setScanSpan((<span class="keyword">int</span>)arguments.get(<span class="string">"scanspan"</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å¯é€‰ï¼Œè®¾ç½®è¿”å›ç»çº¬åº¦åæ ‡ç±»å‹ï¼Œé»˜è®¤GCJ02</span></span><br><span class="line">    <span class="comment">// GCJ02ï¼šå›½æµ‹å±€åæ ‡ï¼›</span></span><br><span class="line">    <span class="comment">// BD09llï¼šç™¾åº¦ç»çº¬åº¦åæ ‡ï¼›</span></span><br><span class="line">    <span class="comment">// BD09ï¼šç™¾åº¦å¢¨å¡æ‰˜åæ ‡ï¼›</span></span><br><span class="line">    <span class="comment">// æµ·å¤–åœ°åŒºå®šä½ï¼Œæ— éœ€è®¾ç½®åæ ‡ç±»å‹ï¼Œç»Ÿä¸€è¿”å›WGS84ç±»å‹åæ ‡</span></span><br><span class="line">    <span class="keyword">if</span> (arguments.containsKey(<span class="string">"coorType"</span>)) &#123;</span><br><span class="line">      option.setCoorType((String)arguments.get(<span class="string">"coorType"</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¾ç½®æ˜¯å¦éœ€è¦è¿”å›é™„è¿‘çš„poiåˆ—è¡¨</span></span><br><span class="line">    <span class="keyword">if</span> (arguments.containsKey(<span class="string">"isNeedLocationPoiList"</span>)) &#123;</span><br><span class="line">      <span class="keyword">if</span> (((<span class="keyword">boolean</span>)arguments.get(<span class="string">"isNeedLocationPoiList"</span>))) &#123;</span><br><span class="line">        option.setIsNeedLocationPoiList(<span class="keyword">true</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        option.setIsNeedLocationPoiList(<span class="keyword">false</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è®¾ç½®æ˜¯å¦éœ€è¦æœ€æ–°ç‰ˆæœ¬rgcæ•°æ®</span></span><br><span class="line">    <span class="keyword">if</span> (arguments.containsKey(<span class="string">"isNeedNewVersionRgc"</span>)) &#123;</span><br><span class="line">      <span class="keyword">if</span> (((<span class="keyword">boolean</span>)arguments.get(<span class="string">"isNeedNewVersionRgc"</span>))) &#123;</span><br><span class="line">        option.setIsNeedLocationPoiList(<span class="keyword">true</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        option.setIsNeedLocationPoiList(<span class="keyword">false</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ç¼–å†™å¯åŠ¨ã€åœæ­¢åŠŸèƒ½"><a href="#ç¼–å†™å¯åŠ¨ã€åœæ­¢åŠŸèƒ½" class="headerlink" title="ç¼–å†™å¯åŠ¨ã€åœæ­¢åŠŸèƒ½"></a>ç¼–å†™å¯åŠ¨ã€åœæ­¢åŠŸèƒ½</h4><ul>
<li>å¼€å§‹å®šä½</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">startLocation</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(<span class="keyword">null</span> != mLocationClient) &#123;</span><br><span class="line">    mLocationClient.start();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>åœæ­¢å®šä½</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">stopLocation</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">null</span> != mLocationClient) &#123;</span><br><span class="line">    mLocationClient.stop();</span><br><span class="line">    mLocationClient = <span class="keyword">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ç™¾åº¦å®šä½å›è°ƒ"><a href="#ç™¾åº¦å®šä½å›è°ƒ" class="headerlink" title="ç™¾åº¦å®šä½å›è°ƒ"></a>ç™¾åº¦å®šä½å›è°ƒ</h4><ul>
<li>CurrentLocationListener</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * æ ¼å¼åŒ–æ—¶é—´</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> time</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> strPattern</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="keyword">private</span> String <span class="title">formatUTC</span><span class="params">(<span class="keyword">long</span> time, String strPattern)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (TextUtils.isEmpty(strPattern)) &#123;</span><br><span class="line">      strPattern = <span class="string">"yyyy-MM-dd HH:mm:ss"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    SimpleDateFormat sdf = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      sdf = <span class="keyword">new</span> SimpleDateFormat(strPattern, Locale.CHINA);</span><br><span class="line">      sdf.applyPattern(strPattern);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Throwable e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sdf == <span class="keyword">null</span> ? <span class="string">"NULL"</span> : sdf.format(time);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">CurrentLocationListener</span> <span class="keyword">extends</span> <span class="title">BDAbstractLocationListener</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceiveLocation</span><span class="params">(BDLocation bdLocation)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">null</span> == mEventSink) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      Map&lt;String, Object&gt; result = <span class="keyword">new</span> LinkedHashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">      <span class="comment">// åˆ¤æ–­å›½å†…å¤–è·å–ç»“æœ</span></span><br><span class="line">      <span class="keyword">if</span> (isInChina) &#123;</span><br><span class="line">        <span class="keyword">if</span> (bdLocation.getLocationWhere() == BDLocation.LOCATION_WHERE_IN_CN) &#123;</span><br><span class="line">          result.put(<span class="string">"isInChina"</span>, <span class="number">1</span>); <span class="comment">// åœ¨å›½å†…</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          result.put(<span class="string">"isInChina"</span>, <span class="number">0</span>); <span class="comment">// åœ¨å›½å¤–</span></span><br><span class="line">        &#125;</span><br><span class="line">        mEventSink.success(result);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// åœºæ™¯å®šä½è·å–ç»“æœ</span></span><br><span class="line">      <span class="keyword">if</span> (isPurporseLoc) &#123;</span><br><span class="line">        result.put(<span class="string">"latitude"</span>, bdLocation.getLatitude()); <span class="comment">// çº¬åº¦</span></span><br><span class="line">        result.put(<span class="string">"longitude"</span>, bdLocation.getLongitude()); <span class="comment">// ç»åº¦</span></span><br><span class="line">        mEventSink.success(result);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      result.put(<span class="string">"callbackTime"</span>, formatUTC(System.currentTimeMillis(), <span class="string">"yyyy-MM-dd HH:mm:ss"</span>));</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">null</span> != bdLocation) &#123;</span><br><span class="line">        <span class="keyword">if</span> (bdLocation.getLocType() == BDLocation.TypeGpsLocation</span><br><span class="line">                || bdLocation.getLocType() == BDLocation.TypeNetWorkLocation</span><br><span class="line">                || bdLocation.getLocType() == BDLocation.TypeOffLineLocation) &#123;</span><br><span class="line">          result.put(<span class="string">"locType"</span>, bdLocation.getLocType()); <span class="comment">// å®šä½ç»“æœç±»å‹</span></span><br><span class="line">          result.put(<span class="string">"locTime"</span>, bdLocation.getTime()); <span class="comment">// å®šä½æˆåŠŸæ—¶é—´</span></span><br><span class="line">          result.put(<span class="string">"latitude"</span>, bdLocation.getLatitude()); <span class="comment">// çº¬åº¦</span></span><br><span class="line">          result.put(<span class="string">"longitude"</span>, bdLocation.getLongitude()); <span class="comment">// ç»åº¦</span></span><br><span class="line">          <span class="keyword">if</span> (bdLocation.hasAltitude()) &#123;</span><br><span class="line">            result.put(<span class="string">"altitude"</span>, bdLocation.getAltitude()); <span class="comment">// é«˜åº¦</span></span><br><span class="line">          &#125;</span><br><span class="line">          result.put(<span class="string">"radius"</span>, Double.parseDouble(String.valueOf(bdLocation.getRadius()))); <span class="comment">// å®šä½ç²¾åº¦</span></span><br><span class="line">          result.put(<span class="string">"country"</span>, bdLocation.getCountry()); <span class="comment">// å›½å®¶</span></span><br><span class="line">          result.put(<span class="string">"province"</span>, bdLocation.getProvince()); <span class="comment">// çœä»½</span></span><br><span class="line">          result.put(<span class="string">"city"</span>, bdLocation.getCity()); <span class="comment">// åŸå¸‚</span></span><br><span class="line">          result.put(<span class="string">"district"</span>, bdLocation.getDistrict()); <span class="comment">// åŒºåŸŸ</span></span><br><span class="line">          result.put(<span class="string">"town"</span>, bdLocation.getTown()); <span class="comment">// åŸé•‡</span></span><br><span class="line">          result.put(<span class="string">"street"</span>, bdLocation.getStreet()); <span class="comment">// è¡—é“</span></span><br><span class="line">          result.put(<span class="string">"address"</span>, bdLocation.getAddrStr()); <span class="comment">// åœ°å€</span></span><br><span class="line">          result.put(<span class="string">"locationDetail"</span>, bdLocation.getLocationDescribe()); <span class="comment">// ä½ç½®è¯­ä¹‰åŒ–æè¿°</span></span><br><span class="line">          <span class="keyword">if</span> (<span class="keyword">null</span> != bdLocation.getPoiList() &amp;&amp; !bdLocation.getPoiList().isEmpty()) &#123;</span><br><span class="line"></span><br><span class="line">            List&lt;Poi&gt; pois = bdLocation.getPoiList();</span><br><span class="line">            StringBuilder stringBuilder = <span class="keyword">new</span> StringBuilder();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (pois.size() == <span class="number">1</span>) &#123;</span><br><span class="line">              stringBuilder.append(pois.get(<span class="number">0</span>).getName()).append(<span class="string">","</span>).append(pois.get(<span class="number">0</span>).getTags())</span><br><span class="line">                      .append(pois.get(<span class="number">0</span>).getAddr());</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">              <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; pois.size() - <span class="number">1</span>; i++) &#123;</span><br><span class="line">                stringBuilder.append(pois.get(i).getName()).append(<span class="string">","</span>).append(pois.get(i).getTags())</span><br><span class="line">                        .append(pois.get(i).getAddr()).append(<span class="string">"|"</span>);</span><br><span class="line">              &#125;</span><br><span class="line">              stringBuilder.append(pois.get(pois.size()-<span class="number">1</span>).getName()).append(<span class="string">","</span>).append(pois.get(pois.size()-<span class="number">1</span>).getTags())</span><br><span class="line">                      .append(pois.get(pois.size()-<span class="number">1</span>).getAddr());</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            result.put(<span class="string">"poiList"</span>,stringBuilder.toString()); <span class="comment">// å‘¨è¾¹poiä¿¡æ¯</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">if</span> (bdLocation.getFloor() != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="comment">// å½“å‰æ”¯æŒé«˜ç²¾åº¦å®¤å†…å®šä½</span></span><br><span class="line">            String buildingID = bdLocation.getBuildingID();<span class="comment">// ç™¾åº¦å†…éƒ¨å»ºç­‘ç‰©ID</span></span><br><span class="line">            String buildingName = bdLocation.getBuildingName();<span class="comment">// ç™¾åº¦å†…éƒ¨å»ºç­‘ç‰©ç¼©å†™</span></span><br><span class="line">            String floor = bdLocation.getFloor();<span class="comment">// å®¤å†…å®šä½çš„æ¥¼å±‚ä¿¡æ¯ï¼Œå¦‚ f1,f2,b1,b2</span></span><br><span class="line">            StringBuilder stringBuilder = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">            stringBuilder.append(buildingID).append(<span class="string">"-"</span>).append(buildingName).append(<span class="string">"-"</span>).append(floor);</span><br><span class="line">            result.put(<span class="string">"indoor"</span>, stringBuilder.toString()); <span class="comment">// å®¤å†…å®šä½ç»“æœä¿¡æ¯</span></span><br><span class="line">            mLocationClient.startIndoorMode();<span class="comment">// å¼€å¯å®¤å†…å®šä½æ¨¡å¼ï¼ˆé‡å¤è°ƒç”¨ä¹Ÿæ²¡é—®é¢˜ï¼‰ï¼Œå¼€å¯åï¼Œå®šä½SDKä¼šèåˆå„ç§å®šä½ä¿¡æ¯ï¼ˆGPS,WI-FIï¼Œè“ç‰™ï¼Œä¼ æ„Ÿå™¨ç­‰ï¼‰è¿ç»­å¹³æ»‘çš„è¾“å‡ºå®šä½ç»“æœï¼›</span></span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            mLocationClient.stopIndoorMode(); <span class="comment">// å¤„äºå®¤å¤–åˆ™å…³é—­å®¤å†…å®šä½æ¨¡å¼</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          result.put(<span class="string">"errorCode"</span>, bdLocation.getLocType()); <span class="comment">// å®šä½ç»“æœé”™è¯¯ç </span></span><br><span class="line">          result.put(<span class="string">"errorInfo"</span>, bdLocation.getLocTypeDescription()); <span class="comment">// å®šä½å¤±è´¥æè¿°ä¿¡æ¯</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        result.put(<span class="string">"errorCode"</span>, -<span class="number">1</span>);</span><br><span class="line">        result.put(<span class="string">"errorInfo"</span>, <span class="string">"location is null"</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      mEventSink.success(result); <span class="comment">// androidç«¯å®æ—¶æ£€æµ‹ä½ç½®å˜åŒ–ï¼Œå°†ä½ç½®ç»“æœå‘é€åˆ°flutterç«¯</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h4 id="ä½ç½®æé†’æœåŠ¡"><a href="#ä½ç½®æé†’æœåŠ¡" class="headerlink" title="ä½ç½®æé†’æœåŠ¡"></a>ä½ç½®æé†’æœåŠ¡</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyNotifyLister</span> <span class="keyword">extends</span> <span class="title">BDNotifyListener</span> </span>&#123;</span><br><span class="line">  <span class="comment">// å·²åˆ°è¾¾è®¾ç½®ç›‘å¬ä½ç½®é™„è¿‘</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNotify</span><span class="params">(BDLocation mlocation, <span class="keyword">float</span> distance)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">null</span> == mEventSink) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Map&lt;String, Object&gt; result = <span class="keyword">new</span> LinkedHashMap&lt;&gt;();</span><br><span class="line">    result.put(<span class="string">"nearby"</span>, <span class="string">"å·²åˆ°è¾¾è®¾ç½®ç›‘å¬ä½ç½®é™„è¿‘"</span>); <span class="comment">// 1ä¸ºå·²ç»åˆ°è¾¾ 0ä¸ºæœªåˆ°è¾¾</span></span><br><span class="line">    mEventSink.success(result);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Example-ä»£ç "><a href="#Example-ä»£ç " class="headerlink" title="Example ä»£ç "></a>Example ä»£ç </h3><h4 id="åŠ¨æ€æˆæƒ"><a href="#åŠ¨æ€æˆæƒ" class="headerlink" title="åŠ¨æ€æˆæƒ"></a>åŠ¨æ€æˆæƒ</h4><ul>
<li>example/pubspec.yaml</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dependencies:</span></span><br><span class="line">  <span class="attr">flutter:</span></span><br><span class="line">    <span class="attr">sdk:</span> <span class="string">flutter</span></span><br><span class="line"></span><br><span class="line">  <span class="string">...</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">permission_handler:</span> <span class="string">^5.0.1+1</span></span><br></pre></td></tr></table></figure>
<ul>
<li>example/lib/main.dart</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_MyAppState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">MyApp</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    _requestPermission(); <span class="comment">// æ‰§è¡Œæƒé™è¯·æ±‚</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åŠ¨æ€ç”³è¯·å®šä½æƒé™</span></span><br><span class="line">  Future&lt;<span class="built_in">bool</span>&gt; _requestPermission() <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="built_in">Map</span>&lt;Permission, PermissionStatus&gt; statuses = <span class="keyword">await</span> [</span><br><span class="line">      Permission.location,</span><br><span class="line">      Permission.storage,</span><br><span class="line">    ].request();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> statuses[Permission.location].isGranted &amp;&amp;</span><br><span class="line">        statuses[Permission.storage].isGranted;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ä¸»ç•Œé¢ä»£ç "><a href="#ä¸»ç•Œé¢ä»£ç " class="headerlink" title="ä¸»ç•Œé¢ä»£ç "></a>ä¸»ç•Œé¢ä»£ç </h4><ul>
<li>example/lib/main.dart</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'dart:io'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'dart:async'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_baidu_plugin_ducafecat/flutter_baidu_plugin_ducafecat.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_baidu_plugin_ducafecat_example/views/location-view.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:permission_handler/permission_handler.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  runApp(MyApp());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _MyAppState createState() =&gt; _MyAppState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_MyAppState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">MyApp</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    _requestPermission(); <span class="comment">// æ‰§è¡Œæƒé™è¯·æ±‚</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (Platform.isIOS == <span class="keyword">true</span>) &#123;</span><br><span class="line">      FlutterBaiduPluginDucafecat.setApiKeyForIOS(</span><br><span class="line">          <span class="string">"dkYT07blcAj3drBbcN1eGFYqt16HP1pR"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> dispose() &#123;</span><br><span class="line">    <span class="keyword">super</span>.dispose();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åŠ¨æ€ç”³è¯·å®šä½æƒé™</span></span><br><span class="line">  Future&lt;<span class="built_in">bool</span>&gt; _requestPermission() <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="built_in">Map</span>&lt;Permission, PermissionStatus&gt; statuses = <span class="keyword">await</span> [</span><br><span class="line">      Permission.location,</span><br><span class="line">      Permission.storage,</span><br><span class="line">    ].request();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> statuses[Permission.location].isGranted &amp;&amp;</span><br><span class="line">        statuses[Permission.storage].isGranted;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      routes: &#123;</span><br><span class="line">        <span class="string">"location_view"</span>: (context) =&gt; LocationView(),</span><br><span class="line">      &#125;,</span><br><span class="line">      home: MyHome(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyHome</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(title: Text(<span class="string">'åœ°å›¾æ’ä»¶'</span>)),</span><br><span class="line">      body: SingleChildScrollView(</span><br><span class="line">        child: Column(</span><br><span class="line">          children: [</span><br><span class="line">            ListTile(</span><br><span class="line">              title: Text(<span class="string">'å®šä½ä¿¡æ¯'</span>),</span><br><span class="line">              subtitle: Text(<span class="string">'ç‚¹å‡»å¼€å§‹åï¼Œç™¾åº¦åœ°å›¾å®æ—¶æ¨é€ç»çº¬åº¦ä¿¡æ¯'</span>),</span><br><span class="line">              leading: Icon(Icons.location_searching),</span><br><span class="line">              trailing: Icon(Icons.keyboard_arrow_right),</span><br><span class="line">              onTap: () &#123;</span><br><span class="line">                Navigator.pushNamed(context, <span class="string">"location_view"</span>);</span><br><span class="line">              &#125;,</span><br><span class="line">            )</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="å®šä½æœåŠ¡ä»£ç "><a href="#å®šä½æœåŠ¡ä»£ç " class="headerlink" title="å®šä½æœåŠ¡ä»£ç "></a>å®šä½æœåŠ¡ä»£ç </h4><ul>
<li>example/lib/views/location-view.dart</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'dart:async'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_baidu_plugin_ducafecat/entity/flutter_baidu_location.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_baidu_plugin_ducafecat/entity/flutter_baidu_location_android_option.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_baidu_plugin_ducafecat/entity/flutter_baidu_location_ios_option.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_baidu_plugin_ducafecat/flutter_baidu_plugin_ducafecat.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LocationView</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  LocationView(&#123;Key key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _LocationViewState createState() =&gt; _LocationViewState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_LocationViewState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">LocationView</span>&gt; </span>&#123;</span><br><span class="line">  FlutterBaiduPluginDucafecat _locationPlugin = FlutterBaiduPluginDucafecat();</span><br><span class="line">  StreamSubscription&lt;<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">Object</span>&gt;&gt; _locationListener; <span class="comment">// äº‹ä»¶ç›‘å¬</span></span><br><span class="line">  BaiduLocation _baiduLocation; <span class="comment">// ç»çº¬åº¦ä¿¡æ¯</span></span><br><span class="line">  <span class="comment">// Map&lt;String, Object&gt; _loationResult; // è¿”å›æ ¼å¼æ•°æ®</span></span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> dispose() &#123;</span><br><span class="line">    <span class="keyword">super</span>.dispose();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å–æ¶ˆç›‘å¬</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">null</span> != _locationListener) &#123;</span><br><span class="line">      _locationListener.cancel();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¿”å›å®šä½ä¿¡æ¯</span></span><br><span class="line">  <span class="keyword">void</span> _setupListener() &#123;</span><br><span class="line">    <span class="keyword">if</span> (_locationListener != <span class="keyword">null</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    _locationListener =</span><br><span class="line">        _locationPlugin.onResultCallback().listen((<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">Object</span>&gt; result) &#123;</span><br><span class="line">      setState(() &#123;</span><br><span class="line">        <span class="comment">// _loationResult = result;</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          _baiduLocation = BaiduLocation.fromMap(result);</span><br><span class="line">          <span class="built_in">print</span>(_baiduLocation);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">          <span class="built_in">print</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è®¾ç½®androidç«¯å’Œiosç«¯å®šä½å‚æ•°</span></span><br><span class="line">  <span class="keyword">void</span> _setLocOption() &#123;</span><br><span class="line">    <span class="comment">// android ç«¯è®¾ç½®å®šä½å‚æ•°</span></span><br><span class="line">    BaiduLocationAndroidOption androidOption = <span class="keyword">new</span> BaiduLocationAndroidOption();</span><br><span class="line">    androidOption.setCoorType(<span class="string">"bd09ll"</span>); <span class="comment">// è®¾ç½®è¿”å›çš„ä½ç½®åæ ‡ç³»ç±»å‹</span></span><br><span class="line">    androidOption.setIsNeedAltitude(<span class="keyword">true</span>); <span class="comment">// è®¾ç½®æ˜¯å¦éœ€è¦è¿”å›æµ·æ‹”é«˜åº¦ä¿¡æ¯</span></span><br><span class="line">    androidOption.setIsNeedAddres(<span class="keyword">true</span>); <span class="comment">// è®¾ç½®æ˜¯å¦éœ€è¦è¿”å›åœ°å€ä¿¡æ¯</span></span><br><span class="line">    androidOption.setIsNeedLocationPoiList(<span class="keyword">true</span>); <span class="comment">// è®¾ç½®æ˜¯å¦éœ€è¦è¿”å›å‘¨è¾¹poiä¿¡æ¯</span></span><br><span class="line">    androidOption.setIsNeedNewVersionRgc(<span class="keyword">true</span>); <span class="comment">// è®¾ç½®æ˜¯å¦éœ€è¦è¿”å›æœ€æ–°ç‰ˆæœ¬rgcä¿¡æ¯</span></span><br><span class="line">    androidOption.setIsNeedLocationDescribe(<span class="keyword">true</span>); <span class="comment">// è®¾ç½®æ˜¯å¦éœ€è¦è¿”å›ä½ç½®æè¿°</span></span><br><span class="line">    androidOption.setOpenGps(<span class="keyword">true</span>); <span class="comment">// è®¾ç½®æ˜¯å¦éœ€è¦ä½¿ç”¨gps</span></span><br><span class="line">    androidOption.setLocationMode(LocationMode.Hight_Accuracy); <span class="comment">// è®¾ç½®å®šä½æ¨¡å¼</span></span><br><span class="line">    androidOption.setScanspan(<span class="number">1000</span>); <span class="comment">// è®¾ç½®å‘èµ·å®šä½è¯·æ±‚æ—¶é—´é—´éš”</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">Map</span> androidMap = androidOption.getMap();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ios ç«¯è®¾ç½®å®šä½å‚æ•°</span></span><br><span class="line">    BaiduLocationIOSOption iosOption = <span class="keyword">new</span> BaiduLocationIOSOption();</span><br><span class="line">    iosOption.setIsNeedNewVersionRgc(<span class="keyword">true</span>); <span class="comment">// è®¾ç½®æ˜¯å¦éœ€è¦è¿”å›æœ€æ–°ç‰ˆæœ¬rgcä¿¡æ¯</span></span><br><span class="line">    iosOption.setBMKLocationCoordinateType(</span><br><span class="line">        <span class="string">"BMKLocationCoordinateTypeBMK09LL"</span>); <span class="comment">// è®¾ç½®è¿”å›çš„ä½ç½®åæ ‡ç³»ç±»å‹</span></span><br><span class="line">    iosOption.setActivityType(<span class="string">"CLActivityTypeAutomotiveNavigation"</span>); <span class="comment">// è®¾ç½®åº”ç”¨ä½ç½®ç±»å‹</span></span><br><span class="line">    iosOption.setLocationTimeout(<span class="number">10</span>); <span class="comment">// è®¾ç½®ä½ç½®è·å–è¶…æ—¶æ—¶é—´</span></span><br><span class="line">    iosOption.setDesiredAccuracy(<span class="string">"kCLLocationAccuracyBest"</span>); <span class="comment">// è®¾ç½®é¢„æœŸç²¾åº¦å‚æ•°</span></span><br><span class="line">    iosOption.setReGeocodeTimeout(<span class="number">10</span>); <span class="comment">// è®¾ç½®è·å–åœ°å€ä¿¡æ¯è¶…æ—¶æ—¶é—´</span></span><br><span class="line">    iosOption.setDistanceFilter(<span class="number">100</span>); <span class="comment">// è®¾ç½®å®šä½æœ€å°æ›´æ–°è·ç¦»</span></span><br><span class="line">    iosOption.setAllowsBackgroundLocationUpdates(<span class="keyword">true</span>); <span class="comment">// æ˜¯å¦å…è®¸åå°å®šä½</span></span><br><span class="line">    iosOption.setPauseLocUpdateAutomatically(<span class="keyword">true</span>); <span class="comment">//  å®šä½æ˜¯å¦ä¼šè¢«ç³»ç»Ÿè‡ªåŠ¨æš‚åœ</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">Map</span> iosMap = iosOption.getMap();</span><br><span class="line"></span><br><span class="line">    _locationPlugin.prepareLoc(androidMap, iosMap);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¯åŠ¨å®šä½</span></span><br><span class="line">  <span class="keyword">void</span> _handleStartLocation() &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">null</span> != _locationPlugin) &#123;</span><br><span class="line">      _setupListener();</span><br><span class="line">      _setLocOption();</span><br><span class="line">      _locationPlugin.startLocation();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åœæ­¢å®šä½</span></span><br><span class="line">  <span class="keyword">void</span> _handleStopLocation() &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">null</span> != _locationPlugin) &#123;</span><br><span class="line">      _locationPlugin.stopLocation();</span><br><span class="line">      setState(() &#123;</span><br><span class="line">        _baiduLocation = <span class="keyword">null</span>;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ˜¾ç¤ºåœ°ç†ä¿¡æ¯</span></span><br><span class="line">  Widget _buildLocationView() &#123;</span><br><span class="line">    <span class="keyword">return</span> _baiduLocation != <span class="keyword">null</span></span><br><span class="line">        ? Table(</span><br><span class="line">            children: [</span><br><span class="line">              TableRow(children: [</span><br><span class="line">                TableCell(child: Text(<span class="string">'ç»åº¦'</span>)),</span><br><span class="line">                TableCell(child: Text(_baiduLocation.longitude.toString())),</span><br><span class="line">              ]),</span><br><span class="line">              TableRow(children: [</span><br><span class="line">                TableCell(child: Text(<span class="string">'çº¬åº¦'</span>)),</span><br><span class="line">                TableCell(child: Text(_baiduLocation.latitude.toString())),</span><br><span class="line">              ]),</span><br><span class="line">              TableRow(children: [</span><br><span class="line">                TableCell(child: Text(<span class="string">'å›½å®¶'</span>)),</span><br><span class="line">                TableCell(</span><br><span class="line">                    child: Text(_baiduLocation.country != <span class="keyword">null</span></span><br><span class="line">                        ? _baiduLocation.country</span><br><span class="line">                        : <span class="string">""</span>)),</span><br><span class="line">              ]),</span><br><span class="line">              TableRow(children: [</span><br><span class="line">                TableCell(child: Text(<span class="string">'çœä»½'</span>)),</span><br><span class="line">                TableCell(</span><br><span class="line">                    child: Text(_baiduLocation.province != <span class="keyword">null</span></span><br><span class="line">                        ? _baiduLocation.province</span><br><span class="line">                        : <span class="string">""</span>)),</span><br><span class="line">              ]),</span><br><span class="line">              TableRow(children: [</span><br><span class="line">                TableCell(child: Text(<span class="string">'åŸå¸‚'</span>)),</span><br><span class="line">                TableCell(</span><br><span class="line">                    child: Text(_baiduLocation.city != <span class="keyword">null</span></span><br><span class="line">                        ? _baiduLocation.city</span><br><span class="line">                        : <span class="string">""</span>)),</span><br><span class="line">              ]),</span><br><span class="line">              TableRow(children: [</span><br><span class="line">                TableCell(child: Text(<span class="string">'åŒºå¿'</span>)),</span><br><span class="line">                TableCell(</span><br><span class="line">                    child: Text(_baiduLocation.district != <span class="keyword">null</span></span><br><span class="line">                        ? _baiduLocation.district</span><br><span class="line">                        : <span class="string">""</span>)),</span><br><span class="line">              ]),</span><br><span class="line">              TableRow(children: [</span><br><span class="line">                TableCell(child: Text(<span class="string">'è¡—é“'</span>)),</span><br><span class="line">                TableCell(</span><br><span class="line">                    child: Text(_baiduLocation.street != <span class="keyword">null</span></span><br><span class="line">                        ? _baiduLocation.street</span><br><span class="line">                        : <span class="string">""</span>)),</span><br><span class="line">              ]),</span><br><span class="line">              TableRow(children: [</span><br><span class="line">                TableCell(child: Text(<span class="string">'åœ°å€'</span>)),</span><br><span class="line">                TableCell(</span><br><span class="line">                    child: Text(_baiduLocation.address != <span class="keyword">null</span></span><br><span class="line">                        ? _baiduLocation.address</span><br><span class="line">                        : <span class="string">""</span>)),</span><br><span class="line">              ]),</span><br><span class="line">              TableRow(children: [</span><br><span class="line">                TableCell(child: Text(<span class="string">'ä½ç½®è¯­ä¹‰åŒ–æè¿°'</span>)),</span><br><span class="line">                TableCell(</span><br><span class="line">                    child: Text(_baiduLocation.locationDetail != <span class="keyword">null</span></span><br><span class="line">                        ? _baiduLocation.locationDetail</span><br><span class="line">                        : <span class="string">""</span>)),</span><br><span class="line">              ]),</span><br><span class="line">              TableRow(children: [</span><br><span class="line">                TableCell(child: Text(<span class="string">'å‘¨è¾¹poiä¿¡æ¯'</span>)),</span><br><span class="line">                TableCell(</span><br><span class="line">                    child: Text(_baiduLocation.poiList != <span class="keyword">null</span></span><br><span class="line">                        ? _baiduLocation.poiList</span><br><span class="line">                        : <span class="string">""</span>)),</span><br><span class="line">              ]),</span><br><span class="line">              TableRow(children: [</span><br><span class="line">                TableCell(child: Text(<span class="string">'é”™è¯¯ç '</span>)),</span><br><span class="line">                TableCell(</span><br><span class="line">                    child: Text(_baiduLocation.errorCode != <span class="keyword">null</span></span><br><span class="line">                        ? _baiduLocation.errorCode.toString()</span><br><span class="line">                        : <span class="string">""</span>)),</span><br><span class="line">              ]),</span><br><span class="line">              TableRow(children: [</span><br><span class="line">                TableCell(child: Text(<span class="string">'å®šä½å¤±è´¥æè¿°ä¿¡æ¯'</span>)),</span><br><span class="line">                TableCell(</span><br><span class="line">                    child: Text(_baiduLocation.errorInfo != <span class="keyword">null</span></span><br><span class="line">                        ? _baiduLocation.errorInfo</span><br><span class="line">                        : <span class="string">""</span>)),</span><br><span class="line">              ]),</span><br><span class="line">            ],</span><br><span class="line">          )</span><br><span class="line">        : Container();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ§åˆ¶é¢æ¿</span></span><br><span class="line">  Widget _buildControlPlan() &#123;</span><br><span class="line">    <span class="keyword">return</span> Row(</span><br><span class="line">      mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">      children: [</span><br><span class="line">        MaterialButton(</span><br><span class="line">          color: Colors.blue,</span><br><span class="line">          textColor: Colors.white,</span><br><span class="line">          onPressed: _baiduLocation == <span class="keyword">null</span> ? _handleStartLocation : <span class="keyword">null</span>,</span><br><span class="line">          child: Text(<span class="string">'å¼€å§‹å®šä½'</span>),</span><br><span class="line">        ),</span><br><span class="line">        MaterialButton(</span><br><span class="line">          color: Colors.blue,</span><br><span class="line">          textColor: Colors.white,</span><br><span class="line">          onPressed: _baiduLocation != <span class="keyword">null</span> ? _handleStopLocation : <span class="keyword">null</span>,</span><br><span class="line">          child: Text(<span class="string">'æš‚åœå®šä½'</span>),</span><br><span class="line">        )</span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">'å®šä½ä¿¡æ¯'</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: SingleChildScrollView(</span><br><span class="line">        child: Column(</span><br><span class="line">          children: [</span><br><span class="line">            _buildControlPlan(),</span><br><span class="line">            Divider(),</span><br><span class="line">            _buildLocationView(),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><hr>
<p>Â© çŒ«å“¥</p>
<p><a href="https://ducafecat.tech/">https://ducafecat.tech</a><br><a href="https://ducafecat.gitee.io" target="_blank" rel="noopener">https://ducafecat.gitee.io</a></p>

        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        

        
        é‚®ç®± ducafecat@gmail.com / å¾®ä¿¡ ducafecat / ç•™è¨€æ¿ disqus
        
    </div>
    
    <footer>
        <a href="https://ducafecat.tech">
            <img src="/img/avatar.jpg" alt="çŒ«å“¥">
            çŒ«å“¥
        </a>
    </footer>
</blockquote>

        


        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/flutter/">flutter</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://ducafecat.tech/2020/08/04/flutter-daily/flutter-plugins-02-baidu-map-android/&title=ã€ŠFlutter æ··åˆå¼€å‘ - 02 ç™¾åº¦åœ°å›¾å®šä½åŠŸèƒ½ android ç¯‡ã€‹ â€” duCafeCat&pic=https://ducafecat.tech/img/avatar.jpg" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://ducafecat.tech/2020/08/04/flutter-daily/flutter-plugins-02-baidu-map-android/&title=ã€ŠFlutter æ··åˆå¼€å‘ - 02 ç™¾åº¦åœ°å›¾å®šä½åŠŸèƒ½ android ç¯‡ã€‹ â€” duCafeCat&source=" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://ducafecat.tech/2020/08/04/flutter-daily/flutter-plugins-02-baidu-map-android/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€ŠFlutter æ··åˆå¼€å‘ - 02 ç™¾åº¦åœ°å›¾å®šä½åŠŸèƒ½ android ç¯‡ã€‹ â€” duCafeCat&url=https://ducafecat.tech/2020/08/04/flutter-daily/flutter-plugins-02-baidu-map-android/&via=https://ducafecat.tech" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://ducafecat.tech/2020/08/04/flutter-daily/flutter-plugins-02-baidu-map-android/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2020/08/21/flutter-daily/flutter-plugins-02-baidu-map-ios/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">Flutter æ··åˆå¼€å‘ - 03 ç™¾åº¦åœ°å›¾å®šä½åŠŸèƒ½ ios ç¯‡</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2020/07/30/flutter-daily/flutter-plugins-01-developing-packages-plugins/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">Flutter æ··åˆå¼€å‘ - 01 ç¼–å†™è®¾å¤‡ç«¯ç»„ä»¶çš„æ­£ç¡®å§¿åŠ¿!</h4>
      </a>
    </div>
  
</nav>



    

















</article>


</div>

        <footer class="footer">
    <div class="top">
        

        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>This blog is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</span>
        </p>
    </div>
    <div class="bottom">
        <p><span>çŒ«å“¥ &copy; 2018 - 2020</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://ducafecat.tech/2020/08/04/flutter-daily/flutter-plugins-02-baidu-map-android/&title=ã€ŠFlutter æ··åˆå¼€å‘ - 02 ç™¾åº¦åœ°å›¾å®šä½åŠŸèƒ½ android ç¯‡ã€‹ â€” duCafeCat&pic=https://ducafecat.tech/img/avatar.jpg" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://ducafecat.tech/2020/08/04/flutter-daily/flutter-plugins-02-baidu-map-android/&title=ã€ŠFlutter æ··åˆå¼€å‘ - 02 ç™¾åº¦åœ°å›¾å®šä½åŠŸèƒ½ android ç¯‡ã€‹ â€” duCafeCat&source=" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://ducafecat.tech/2020/08/04/flutter-daily/flutter-plugins-02-baidu-map-android/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€ŠFlutter æ··åˆå¼€å‘ - 02 ç™¾åº¦åœ°å›¾å®šä½åŠŸèƒ½ android ç¯‡ã€‹ â€” duCafeCat&url=https://ducafecat.tech/2020/08/04/flutter-daily/flutter-plugins-02-baidu-map-android/&via=https://ducafecat.tech" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://ducafecat.tech/2020/08/04/flutter-daily/flutter-plugins-02-baidu-map-android/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>æ‰«ä¸€æ‰«ï¼Œåˆ†äº«åˆ°å¾®ä¿¡</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPYAAAD2CAAAAADAeSUUAAADOElEQVR42u3awY7iQAwEUP7/p9nrSgtMlZvREvNyGjEh6dccSrb7douv+1/X7L+v7/z3nmf3359ct9+4sLGxsS/Cvr+88mXly80BJ+/9YWuwsbGx17GT4EkSIX/m6wh8tgX51vzwXmxsbOwvZicFwCzM8vuxsbGxsWfstlTIwy8pTv5bgGFjY2NfhN2+8nWpkJQceZNots639dKwsbGxP56dR8vn//0r821sbGzsD2bfyysPpLZ5dMKrFdjY2NiL2LMjO+34Nv9W297Kh8EPno+NjY29gt2ObNtP2rbOe4cQUW5jY2NjL2LPCo+2QZ9HXfLM/GgRNjY29m72LHhyWNtySmKsHWY8qL2wsbGxV7DbllBeWtxH1+/9GEedMGxsbOwPZreD2JPhQR5ys23KW1fY2NjYW9ltLLUNnZNy4uRI6IOVY2NjYy9lz6jDBn3QVEraQ/md0TwZGxsb+7LsWdtoduxmNgBIPq8DDBsbG3sFe3YgJo+KhPfeAqb4CbGxsbFXsPMXnJcNs0KoLYqi8MPGxsb+AnY+7k0Ssv1uUqLMVvV0PICNjY19WXZbMCQvmzXu261vRxEPtg8bGxt7BfukhdTGRo5v76+fiY2Njb2OnQxKZ8udLe7k6E+0cmxsbOx17OTWWalwfuCmHSpHb8HGxsZex84f0bZvilA5iMk6MrGxsbEXsdvmUd42asuMZOvzDYp+QmxsbOyl7GRBJzGWFzazdRajX2xsbOwV7PxBbeS0Tz7ZoDxEb7PFYWNjY38wOw+kPKjaRk+76HcNkrGxsbE3sdvmUT6snS3opLzJn4ONjY29iZ23kNrAmx3NzIcEbQsMGxsbeyu7JbUDg7bAyMcD7RD6QSmCjY2NvYid89pio42iJFbzddZNJWxsbOxLse/llR95rPd+dEhoWOpgY2NjL2LPFnrSHkrKnnybZmNgbGxs7H3sk6FpvhHJc2YtqvY4ETY2NvZWdhIMs9b/ySB5mLdJyYSNjY399eyTYGvjLS9miqYVNjY29hezk0hLjuPk44eTcW9xUgkbGxv74uzz4W47PHjXNTzig42Njb2InTdoZiPbk+Khjb12zdjY2NgXZ/8BRokDvo5VdVUAAAAASUVORK5CYII=" alt="å¾®ä¿¡åˆ†äº«äºŒç»´ç ">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: false };


lazyScripts.push('//s22.cnzz.com/z_stat.php?id=1274928662&web_id=1274928662')

</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>



<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
</script>

<script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" async></script>








</body>
</html>
