<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>duCafeCat</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://blog.ducafecat.tech/"/>
  <updated>2021-09-28T14:24:09.598Z</updated>
  <id>https://blog.ducafecat.tech/</id>
  
  <author>
    <name>猫哥</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>下一个 Flutter 项目要记住的 11 件事</title>
    <link href="https://blog.ducafecat.tech/2021/09/29/translation/11-things-to-remember-for-your-next-flutter-project/"/>
    <id>https://blog.ducafecat.tech/2021/09/29/translation/11-things-to-remember-for-your-next-flutter-project/</id>
    <published>2021-09-28T16:00:00.000Z</published>
    <updated>2021-09-28T14:24:09.598Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-09-28-22-24-07.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://medium.com/flutter-community/11-things-to-remember-for-your-next-flutter-project-1c7c380895ca" target="_blank" rel="noopener">https://medium.com/flutter-community/11-things-to-remember-for-your-next-flutter-project-1c7c380895ca</a></p></blockquote><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><p>创建一个新的 Flutter 项目是一件好事ーー新鲜的代码库、没有遗留代码(还没有)、空安全性、您最喜欢的软件包的最新版本等等。但是与此同时，您应该在项目开始时做出关键的决策，这些决策将为未来奠定基础，例如工具、包、文件结构、状态管理解决方案、测试计划。否则，这个项目最终会变成另一碗意大利面和肉丸。为了避免这种情况，我准备了一个列表，在我看来，这个项目中最重要的元素应该尽早决定。我希望它能帮助你，因此ーー快乐的阅读！</p><h3 id="1-静态程序分析"><a href="#1-静态程序分析" class="headerlink" title="1. 静态程序分析"></a>1. 静态程序分析</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/bd704092466e4573308d6e471fb4afeb8ac8c7aad8c018e7cba7bd90eb37dea0.com/max/1314/0*6hBqp3qp2ZMwks8t" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>I will not write messy code ( 我不会写乱七八糟的代码(<a href="https://i2.wp.com/www.thecuriousdev.org/wp-content/uploads/2017/12/messy-code.gif?fit=657%2C352&amp;ssl=1" target="_blank" rel="noopener">source 来源</a>)</p><p>Linter 是一个静态分析工具，用于识别和标记代码中的编程错误、警告和样式缺陷，以便您修复它们。在 Flutter 上下文中，这是最容易实现的东西之一，也是保持代码干净的最有用的东西之一。</p><p>有很多不同的规则可以让你的代码遵循，但是我建议你使用一个预先定义的规则，它已经遵循了基于 Dart 样式指南的最佳实践:</p><p><a href="https://dart-lang.github.io/linter/lints/index.html" target="_blank" rel="noopener">https://dart-lang.github.io/linter/lints/index.html</a></p><p><a href="https://dart.dev/guides/language/effective-dart/style" target="_blank" rel="noopener">https://dart.dev/guides/language/effective-dart/style</a></p><ul><li><a href="https://pub.dev/packages/lint" target="_blank" rel="noopener">lint</a>;</li><li><a href="https://pub.dev/packages/flutter_lints" target="_blank" rel="noopener">flutter_lints Flutter</a>;</li><li><a href="https://pub.dev/packages/very_good_analysis" target="_blank" rel="noopener">very_good_analysis</a>.</li></ul><p>无论选择哪个包，都可以在 analysisservices _ options. yaml 文件中添加或删除任何特定的静态分析规则。</p><h3 id="2-本地化-l10n"><a href="#2-本地化-l10n" class="headerlink" title="2. 本地化(l10n)"></a>2. 本地化(l10n)</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/811f04d4990c001086c653aa6ff67bafe7ee361b2a7083357ba5b1c04f0bd02f.jpg" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/811f04d4990c001086c653aa6ff67bafe7ee361b2a7083357ba5b1c04f0bd02f.jpg" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>本地化 [来源](<a href="https://marcosantadev.com/wp-content/uploads/Localization_Tips.jpg" target="_blank" rel="noopener">https://marcosantadev.com/wp-content/uploads/Localization_Tips.jpg</a></p><p>什么是本地化(简称 l10n) ？</p><blockquote><p>本地化是对产品或服务的调整，以满足特定语言、文化或期望人群的“外观和感觉”的需要ー <a href="https://searchcio.techtarget.com/definition/localization" target="_blank" rel="noopener">TechTarget</a></p></blockquote><p>建立一个用户感觉自然的应用程序是必要的，例如使用正确的翻译、日期和货币格式、文本方向。因此，本地化是一个基本的工具。即使您正在构建单个区域/语言应用程序，我仍然建议您尽早实现本地化，从而将文本与 UI 代码分离开来。因此，可以在不影响代码的情况下对它们进行重用和调整。</p><p><a href="https://flutter.dev/docs/development/accessibility-and-localization/internationalization" target="_blank" rel="noopener">Flutter documentation</a> 精巧地解释了国际化应用程序的过程。如果缺省方式看起来太复杂，或者您需要一些有用的扩展和帮助器方法，那么有一些流行的第三方包，比如 <a href="https://pub.dev/packages/easy_localization" target="_blank" rel="noopener">easy_localization</a> ，可以帮助您完成本地化过程。</p><h3 id="3-环境-有一些味道"><a href="#3-环境-有一些味道" class="headerlink" title="3. 环境(有一些味道)"></a>3. 环境(有一些味道)</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/3c4d6600a7e7c3f3b52d8786d5e90b563f5bf451fbf9100bed67762dbe7b9818.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>Programming environments <a href="https://jaxenter.com/wp-content/uploads/2020/07/production1.png" target="_blank" rel="noopener">来源</a></p><p>我敢打赌，当有人在生产中损坏数据或删除整个用户表时，您至少已经从您的环境中听说过一个案例(没有双关意思)。相信我，这一点也不好玩。因此，为你的项目创建不同的环境是一个很好的实践:</p><p>(本地)环境ー用来让你抓狂: 在代码中做实验，直接在数据库中更改数据，使用快捷键并硬编码认证标记或提供模拟数据。玩得开心，并提供这些功能</p><ul><li><p>帮助您验证代码中的更改，用“真实”数据(通常在这种环境中使用生产数据快照)测试特性，并在将应用程序发布到生产环境之前验证它。如果你的团队中有质量保证工程师，这就是他们发光发热的地方</p></li><li><p>环境ー由真实用户使用的环境，其中数据损坏是不可接受的(请始终进行备份)</p></li></ul><p>拥有这样的环境可以帮助您在这些更改到达用户手中之前安全地实验和验证特性。</p><p>现在，另一个部分——味道。不，不，我们不是在讨论甜的、咸的或酸的东西ーー这只是在编程中用来描述应用程序的不同构建变体的另一个术语。例如，您希望使图标和标题、 API 端点或任何其他配置对于每个特定环境都不同。为此，您需要定义一种不同的“味道”，这种味道在为特定环境构建应用程序时使用。这里有一些关于如何为 <a href="https://flutter.dev/docs/deployment/flavors" target="_blank" rel="noopener">create flavours for Flutter</a> 。</p><h3 id="4-持续集成和持续交付"><a href="#4-持续集成和持续交付" class="headerlink" title="4. 持续集成和持续交付"></a>4. 持续集成和持续交付</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/743197c473ae4d8361bf6582ed935c01e76feb8fdf2578799edaa9ac76894c09.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>持续集成阶段(CI)和持续交付集成阶段(CD)<a href="https://www.parasoft.com/wp-content/uploads/2021/04/CICD_CICD.png" target="_blank" rel="noopener">source 来源</a></p><p>在引入不同的环境之后，自然而然的下一步是自动化构建、测试和发布应用程序的过程。CI/CD 本身就是一个相当复杂的主题，无论如何我都不是这个领域的专家，因此我建议搜索一些关于如何使应用程序开发的不同阶段自动化的其他资源。</p><p>然而，有很多 <a href="https://www.cio.com/article/3407714/what-is-noops-the-quest-for-fully-automated-it-operations.html" target="_blank" rel="noopener">NoOps</a> 解决方案是与 Flutter 兼容的，所以你可以轻松自动化你的开发过程:</p><ul><li><a href="https://appcircle.io/" target="_blank" rel="noopener">Appcircle</a>;</li><li><a href="https://codemagic.io/" target="_blank" rel="noopener">Codemagic 代码魔法</a>;</li><li><a href="https://www.bitrise.io/" target="_blank" rel="noopener">Bitrise</a>;</li><li><a href="https://appcenter.ms/" target="_blank" rel="noopener">VS App Center</a> (还没有 Flutter 集成，但是有一些资源可以帮助你设置所有的东西)</li></ul><p>这些解决方案中的任何一个都可以解决问题ーー简单地说，选择一个符合你的需要和预算的方案。</p><h3 id="5-后端代码"><a href="#5-后端代码" class="headerlink" title="5. 后端代码"></a>5. 后端代码</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/9b1621f1e675f665d9f0487fba9bef324bb02be3766afc5fa788baef8af6fe42.jpeg" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>( 另一个关于后端的迷因(<a href="https://i.imgur.com/G7hDEvr.jpeg" target="_blank" rel="noopener">source 来源</a>)</p><p>您是否已经用任何特殊的或者不那么花哨的编程语言实现了后端？很好，您可以跳过这一步，但我仍然建议您查看一些云解决方案，以供将来参考。</p><p>在简化版本中，应用程序的后端部分有两个选项:</p><ol><li>使用您喜欢的任何编程语言和框架实现自定义后端解决方案，但是稍后将处理所有<a href="https://en.wikipedia.org/wiki/DevOps" target="_blank" rel="noopener">DevOps</a> 让你的代码和数据可以从应用程序中访问</li><li>使用任何云解决方案来加速开发过程，并将大部分 DevOps 留给云供应商</li></ol><p>如果你觉得第二个选择很有吸引力，可以从支持 Flutter 的云平台中选择一些:</p><ul><li><a href="https://firebase.google.com/" target="_blank" rel="noopener">Google Firebase 谷歌 Firebase</a>;</li><li><a href="https://aws.amazon.com/amplify/" target="_blank" rel="noopener">AWS Amplify</a>;</li><li><a href="https://supabase.io/" target="_blank" rel="noopener">Supabase 女名女子名</a>;</li></ul><p>云平台为您的应用程序提供身份验证、数据库、存储、 API 选项和许多其他特性。如果您只需要验证这个想法并快速构建 MVP，而不需要花费大量时间在成熟的后端解决方案上，那么上述任何一个都是一个很好的选择。</p><h3 id="6-日志记录，崩溃数据和分析"><a href="#6-日志记录，崩溃数据和分析" class="headerlink" title="6. 日志记录，崩溃数据和分析"></a>6. 日志记录，崩溃数据和分析</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/0573b48428be13b9963d7702019654887a0a75d4420a5778a9191a4b144e52f7.com/max/1276/0*P3_7XCAmphsbs09H" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>( 哎呀，出问题了<a href="https://image.slidesharecdn.com/googleiofirebase-160628162912/95/google-io-extended-vientiane-2016-introducing-firebase-17-638.jpg?cb=1467131395" target="_blank" rel="noopener">source 来源</a>)</p><p>伐木被低估了ーー在这里，我说过了！一切都很好，直到出现问题，你需要了解这方面的信息。当我们讨论什么应该记录，什么不应该记录时，总有一个灰色地带。但有一件事情始终是明确的: 您必须知道应用程序何时崩溃以及问题的原因。你收集的关于这个事件的数据越多，就越容易发现和解决这个问题。</p><p>像 <a href="https://sentry.io/" target="_blank" rel="noopener">Sentry</a>, <a href="https://firebase.google.com/products/crashlytics" target="_blank" rel="noopener">Firebase Crashlytics</a>, <a href="https://www.datadoghq.com/" target="_blank" rel="noopener">Datadog</a> 、 Datadog 这样的服务可以帮助你记录最重要的数据、崩溃报告，甚至在你的应用程序或相关服务出现故障时设置通知。</p><p>另一种类型的日志记录是收集用户数据用于分析目的。当您构建一个全新的、可能是一流的产品时，了解用户的需求、他们的行为以及他们如何使用应用程序是至关重要的。为此，各种分析工具可以集成到您的 Flutter 应用程序，如 <a href="https://firebase.google.com/products/analytics" target="_blank" rel="noopener">Firebase Analytics</a> 分析，<a href="https://docs.microsoft.com/en-us/appcenter/analytics/" target="_blank" rel="noopener">App Center Analytics</a> 中心分析和许多更多。</p><h3 id="7-应用程序-branding"><a href="#7-应用程序-branding" class="headerlink" title="7. 应用程序 branding"></a>7. 应用程序 branding</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/4b3911aca61e285e931ab1d73320fef8fc4bdb7961f81c5dc828b04045901971.com/max/1400/0*832kkYT17YlRJOQj" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>Material theming ( Material 主题化(<a href="https://9to5google.com/wp-content/uploads/sites/4/2018/05/material-theming1.png?w=1600" target="_blank" rel="noopener">source 来源</a>)</p><p>任何应用程序或品牌的主要目标之一就是获得认可。使用正确的颜色调色板，标志，图标，设计元素，内容，字体，有时甚至布局使你的产品脱颖而出。这就是应用程序的品牌化，在开始的时候准备好基本的部分将会在整个项目中节省你很多时间。</p><p>如果你已经准备好了你的 UI 原型或者设计组件，现在是时候把它们转移到你的应用程序中并定义主题—- 颜色、字体、形状等等。为了方便起见，一个叫 <a href="https://twitter.com/RydMike" target="_blank" rel="noopener">Mike Rydstrom</a> 的好人为这个 <a href="https://pub.dev/packages/flex_color_scheme" target="_blank" rel="noopener">flex_color_scheme</a> 方案创建了一个出色的包。</p><h3 id="8-项目结构和状态管理"><a href="#8-项目结构和状态管理" class="headerlink" title="8. 项目结构和状态管理"></a>8. 项目结构和状态管理</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/4526ea77f5b7b8029bc8ead79fdcef91692c0b9aae0a1e9da8ac8c5cf835949b.gif" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>( Flutter 状态管理(<a href="https://flutter.dev/docs/development/data-and-backend/state-mgmt/intro" target="_blank" rel="noopener">source 来源</a>)</p><p>是的，有争议的那个。需要澄清的是，根本没有所谓的“最佳国家管理解决方案”或“最佳应用程序架构”——如果有人不这么认为，请记住，他们可能也会先把牛奶倒进碗里，然后再倒麦片。这是最糟糕的部分ーー我不能教你最好的方法。我只能提供几个选项或分享我的偏好。</p><p>下一个 Flutter 项目的几个文件结构选项:</p><ul><li><a href="https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html" target="_blank" rel="noopener">Clean Architecture 清洁的建筑</a> — ー清晰的关注点分离，是否长久存在。老实说，我不喜欢这样。我觉得这个概念中有太多的抽象，可能会减缓开发进程</li><li><a href="https://www.oreilly.com/library/view/software-architecture-patterns/9781491971437/ch01.html" target="_blank" rel="noopener">Layered Architecture 分层建筑</a> ー依赖于将数据、业务和表示逻辑分为不同层次的想法。这样的文件结构对于中小型项目来说工作得很好，但是我觉得当项目增长时，这些层会变得越来越不堪重负</li><li>Modular Architecture (I have described this concept 模块化体系结构(我已经描述了这个概念<a href="https://mkobuolys.medium.com/flutter-shopping-app-prototype-lessons-learned-16d6646bbed7" target="_blank" rel="noopener">here 这里</a>) ー把程式码分割成不同功能的模组，以便不同的模组互相作用。这是我最喜欢的一个ー它与集团国家管理解决方案(TEAM BLoC，YEAH!)顺利地工作对于大型项目来说，规模很大。然而，它也带来了一些挑战，比如公共逻辑放在哪里，不同的模块应该如何通信等等</li></ul><p>关于《 Flutter 》中的国家管理问题，我想我们已经到了可以把整个会议都用来讨论这个问题的时候了，但是事后还没有最后的答案。我只想补充一点，选择一个你觉得最舒服的。你可以在 <a href="https://flutter.dev/docs/development/data-and-backend/state-mgmt/options" target="_blank" rel="noopener">here</a> 找到一个全面的选项列表。</p><h3 id="9-代码生成"><a href="#9-代码生成" class="headerlink" title="9. 代码生成"></a>9. 代码生成</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/2098abe11b01c29609565b598ec606f3c9782f1e1e839fbcbbe1572b275b5742.jpg" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>Code generation ( 代码生成(<a href="https://resqsoft1.files.wordpress.com/2013/05/customizing_instant_code_generation_illu.jpg" target="_blank" rel="noopener">source 来源</a>)</p><p>如果您想简化一些步骤并节省一些开发时间，您可以在项目中使用代码生成。少编码，多交付！ <a href="https://youtu.be/GGwTfsPDiO0?t=514" target="_blank" rel="noopener">Code less, deliver more</a></p><p>有一系列不同的工具可以使用，无论是处理本地化、资产、解析 JSON、生成模型类、实现服务定位器、路由，还是处理不可变状态。唯一要做的就是调查可用的工具和包，并选择最好的工具和包来满足您的项目需求。</p><p>对于一个快速 Flutter 项目启动，我建议检查出 <a href="https://github.com/VeryGoodOpenSource/very_good_cli" target="_blank" rel="noopener">Very Good CLI</a> 。这将节省您几个小时的配置(不幸的是，我已经学会了艰难的方式)。</p><p>此外，上个月我还做了一个关于 <a href="https://youtu.be/kg60JQJ-tBE?t=13157" target="_blank" rel="noopener">code generation</a> 的演讲ーー它可能是 Flutter 代码生成旅程的起点，所以看看吧！</p><h3 id="10-测试策略"><a href="#10-测试策略" class="headerlink" title="10. 测试策略"></a>10. 测试策略</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/967e5cc34b411cc892cd4688ecbca44e5235b50073c79497494ce804448d2a03.jpg" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>Application testing ( 应用程式测试(<a href="https://codoid.com/wp-content/uploads/2020/08/strategies-for-mobile-app-testing-1.jpg" target="_blank" rel="noopener">source 来源</a>)</p><p>用测试来覆盖 100% 的代码是好还是坏？当然，这很棒，但是代价是什么呢？这样想的话，您可能会掉进一个注定要陷入困境的深渊，在那里您花费更多的时间编写测试，而不是开发特性。为了避免这种情况，您需要一个测试策略。</p><p>不要误会我的意思ー用测试覆盖代码是一件好事，而且代码中越隐蔽的地方，在实现新特性时就越安全。只是，在我看来，与编写测试所花费的时间相比，您应该找到测试仍然为您带来更多价值的平衡点。例如，这是我的测试策略:</p><ul><li>Business logic (services, repositories, BLoCs) should be covered 85-100% in 业务逻辑(服务、存储库、集群)应该在<strong>unit/integration tests 单元/集成测试</strong> ー这是所有应用程序中最重要的部分，因此我看到了测试的很大价值;</li><li><strong>Widget tests 小部件测试</strong> 应该包含所有可重用的 UI 组件。当单个组件被正确测试时，您可以开始测试单个屏幕，但是不要太详细</li><li><strong>End-to-end tests 端到端测试</strong>, 涵盖了主要的应用程序流以及与 UI 的交互。没有深层次的魔法ーー只是经历一些关键的工作流程。它们包含的屏幕越多越好</li><li>当整个用户界面准备就绪并实现时ー<strong>golden tests 黄金试验</strong> 确保 UI 不会受到以后更改的影响</li></ul><p>老实说，我仍然在测试中寻找中庸之道，但是相信我，你会在一个又一个项目中做得更好。</p><h3 id="11-自述文件"><a href="#11-自述文件" class="headerlink" title="11. 自述文件"></a>11. 自述文件</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/c6d6a081c0e8c70e6fb812ce0e074fbc48f07d43525787591da18f9d2b714b51.com/max/1400/0*IFzSuqZAadpUJ7f7" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>Make a README ( 自述文件(<a href="https://www.makeareadme.com/images/open-graph-logo.png?v=20181203" target="_blank" rel="noopener">source 来源</a>)</p><p>你没听错，文件。README 文件是项目中最重要的文档，尤其是在团队中工作时。</p><p>您是否刚刚引入了一个需要代码生成的新解决方案？您是否刚刚添加了一个有用的 bash 脚本来自动完成这个过程？您是否实现了一个必须在项目中的任何地方使用的全局记录器？我们无法读取你的思想ーー在 README 文件中提到这一点！</p><p>没有太多的文档(至少我没有遇到过这种情况) ，只有缺乏关于项目和代码的信息。所有生成、测试和运行代码的命令、各种文件结构决策、图表、外部工具和服务、关于不同环境的信息(没有 SECRET KEYS)都应该放在这里，并保存在一个单独的地方。这是一个无聊的工作，但却是一个非常有价值的工作！</p><p>Phew, what a ride… ( 这车真不错… .<a href="https://giphy.com/gifs/relief-z23hGvopHu7w4" target="_blank" rel="noopener">source 来源</a>)</p><p>就是这样! 谢谢你花时间阅读这篇文章。</p><p>我错过了什么吗? 在评论中提及吧! 在构建一个新的 Flutter 应用程序时，你的清单是什么？</p><hr><p>© 猫哥</p><ul><li><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p></li><li><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p></li><li><p>微信群 ducafecat</p></li><li><p>b 站 <a href="https://space.bilibili.com/404904528" target="_blank" rel="noopener">https://space.bilibili.com/404904528</a></p></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.tech/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 如何在10分钟内快速的创建图片编辑器</title>
    <link href="https://blog.ducafecat.tech/2021/09/29/translation/how-to-build-a-photo-editing-app-in-10-minutes-using-flutter-and-img-ly/"/>
    <id>https://blog.ducafecat.tech/2021/09/29/translation/how-to-build-a-photo-editing-app-in-10-minutes-using-flutter-and-img-ly/</id>
    <published>2021-09-28T16:00:00.000Z</published>
    <updated>2021-09-29T14:48:00.038Z</updated>
    
    <content type="html"><![CDATA[<h2 id="猫哥说"><a href="#猫哥说" class="headerlink" title="猫哥说"></a>猫哥说</h2><p>我最近在做一个社交 APP，里面需要图片、视频的编辑器，如果你和我一样有这样的需求</p><p>你可以试试这款 <a href="https://img.ly" target="_blank" rel="noopener">https://img.ly</a></p><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><p><a href="https://promise-amadi.medium.com/how-to-build-a-photo-editing-app-in-10-minutes-using-flutter-and-img-ly-5d9601173822" target="_blank" rel="noopener">https://promise-amadi.medium.com/how-to-build-a-photo-editing-app-in-10-minutes-using-flutter-and-img-ly-5d9601173822</a></p><h2 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h2><p><a href="https://github.com/Wizpna/photo_editor.git" target="_blank" rel="noopener">https://github.com/Wizpna/photo_editor.git</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://img.ly/photo-sdk" target="_blank" rel="noopener">https://img.ly/photo-sdk</a></li><li><a href="https://pub.dev/packages/photo_editor_sdk" target="_blank" rel="noopener">https://pub.dev/packages/photo_editor_sdk</a></li><li><a href="https://pub.dev/packages/image_picker" target="_blank" rel="noopener">https://pub.dev/packages/image_picker</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/bc6eb61a67ada8af5036f74db19400c341317221d60e0e09abdce7329a87d53f.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>大家好，在今天的文章中，你将学习如何使用 Flutter 和 Img.ly 构建一个照片编辑应用程序。</p><p>但是，在我深入本教程的技术方面之前，我想对 IMG.LY 做一个简单的解释。</p><p>IMG.LY 是一家总部位于德国的公司，通过其图片和视频编辑 SDK 提供最先进的图像和视频处理解决方案。</p><p>主要用于照片编辑目的，而且 SDK 很容易在移动应用程序上实现。</p><h3 id="那么让我们开始吧"><a href="#那么让我们开始吧" class="headerlink" title="那么让我们开始吧"></a>那么让我们开始吧</h3><p>使用 Visual Studio、 IntelliJ 或 Android Studio 创建一个新的 Flutter 项目。</p><p>成功创建一个新的 flutter 项目后，打开“ pubspec.yaml”，并安装 <a href="https://pub.dev/packages/photo_editor_sdk" target="_blank" rel="noopener">photo_editor_sdk</a> 和 <a href="https://pub.dev/packages/image_picker" target="_blank" rel="noopener">image_picker</a> 插件。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dependencies:</span><br><span class="line">  photo_editor_sdk: ^<span class="number">2.0</span><span class="number">.0</span></span><br><span class="line">  image_picker: ^<span class="number">0.8</span><span class="number">.1</span>+<span class="number">3</span></span><br></pre></td></tr></table></figure><p>注意: <code>image_picker</code> 这个插件将用于从设备中获取照片，而 <code>photo_editor_sdk</code> 将用于照片编辑。</p><h3 id="为-Android-配置-PhotoEditor-SDK"><a href="#为-Android-配置-PhotoEditor-SDK" class="headerlink" title="为 Android 配置 PhotoEditor SDK"></a>为 Android 配置 PhotoEditor SDK</h3><p>SDK 相当大，因此你需要为你的项目启用 Multidex 如下:</p><ol><li>编辑 <code>android/build.gradle</code> 并在顶部添加以下行</li></ol><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">buildscript &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        google()</span><br><span class="line">        jcenter()</span><br><span class="line">        maven &#123; url <span class="string">"https://artifactory.img.ly/artifactory/imgly"</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    dependencies &#123;</span><br><span class="line">        classpath <span class="string">'com.android.tools.build:gradle:4.1.0'</span> classpath <span class="string">"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version"</span> classpath <span class="string">'ly.img.android.sdk:plugin:8.3.1'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>请注意: 为了更新 Android 版本的 PhotoEditor SDK，将版本字符串 version 8.3.1 替换为更新的版本 <a href="https://github.com/imgly/pesdk-android-demo/releases" target="_blank" rel="noopener">newer release</a> 。</p></blockquote><ol start="2"><li>打开 <code>**android/app/build.gradle** file</code> (not <code>android/build.gradle</code>) 并在末尾添加以下代码行:</li></ol><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">android &#123;</span><br><span class="line">  defaultConfig &#123;</span><br><span class="line">      applicationId <span class="string">"com.example.photo_editor"</span> minSdkVersion <span class="number">16</span></span><br><span class="line">      targetSdkVersion <span class="number">30</span></span><br><span class="line">      versionCode flutterVersionCode.toInteger()</span><br><span class="line">      versionName flutterVersionName</span><br><span class="line">      multiDexEnabled <span class="keyword">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">dependencies &#123;</span><br><span class="line">    implementation <span class="string">"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version"</span></span><br><span class="line">    implementation <span class="string">'androidx.multidex:multidex:2.0.1'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>打开 <code>android/app/build.gradle</code> file (not <code>android/build.gradle</code>) 在 apply plugin 下面添加以下行 <code>apply plugin: &quot;com.android.application&quot;</code>:</li></ol><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">apply plugin: <span class="string">'ly.img.android.sdk'</span></span><br><span class="line">apply plugin: <span class="string">'kotlin-android'</span></span><br><span class="line"></span><br><span class="line">apply plugin: <span class="string">'ly.img.android.sdk'</span>apply from: <span class="string">"$flutterRoot/packages/flutter_tools/gradle/flutter.gradle"</span><span class="comment">// Comment out the modules you don't need, to save size.</span></span><br><span class="line">imglyConfig &#123;</span><br><span class="line">    modules &#123;</span><br><span class="line">        include <span class="string">'ui:text'</span></span><br><span class="line">        include <span class="string">'ui:focus'</span></span><br><span class="line">        include <span class="string">'ui:frame'</span></span><br><span class="line">        include <span class="string">'ui:brush'</span></span><br><span class="line">        include <span class="string">'ui:filter'</span></span><br><span class="line">        include <span class="string">'ui:sticker'</span></span><br><span class="line">        include <span class="string">'ui:overlay'</span></span><br><span class="line">        include <span class="string">'ui:transform'</span></span><br><span class="line">        include <span class="string">'ui:adjustment'</span></span><br><span class="line">        include <span class="string">'ui:text-design'</span><span class="comment">// This module is big, remove the serializer if you don't need that feature.</span></span><br><span class="line">        include <span class="string">'backend:serializer'</span><span class="comment">// Remove the asset packs you don't need, these are also big in size.</span></span><br><span class="line">        include <span class="string">'assets:font-basic'</span></span><br><span class="line">        include <span class="string">'assets:frame-basic'</span></span><br><span class="line">        include <span class="string">'assets:filter-basic'</span></span><br><span class="line">        include <span class="string">'assets:overlay-basic'</span></span><br><span class="line">        include <span class="string">'assets:sticker-shapes'</span></span><br><span class="line">        include <span class="string">'assets:sticker-emoticons'</span>include <span class="string">'backend:sticker-smart'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="为-iOS-设置-ImagePicker"><a href="#为-iOS-设置-ImagePicker" class="headerlink" title="为 iOS 设置 ImagePicker"></a>为 iOS 设置 ImagePicker</h3><p>打开 <code>&lt;project root&gt;/ios/Runner/Info.plist</code> 并将以下键添加到 <strong>Info.plist</strong> 文件中</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;key&gt;NSPhotoLibraryUsageDescription&lt;/key&gt;</span><br><span class="line">           &lt;string&gt;app needs permission <span class="keyword">for</span> the photo <span class="keyword">library</span>&lt;/string&gt;</span><br><span class="line">           &lt;key&gt;NSCameraUsageDescription&lt;/key&gt;</span><br><span class="line">           &lt;string&gt;app needs access to the camera.&lt;/string&gt;</span><br><span class="line">           &lt;key&gt;NSMicrophoneUsageDescription&lt;/key&gt;</span><br><span class="line">           &lt;string&gt;app needs access to the microphone, <span class="keyword">if</span> you intend to record videos.&lt;/string&gt;</span><br></pre></td></tr></table></figure><p>打开你的 <strong>main.dart</strong> 文件，像下面的代码片段一样更新你的代码:</p><p>您必须创建一个名为 <strong>imgFromGallery</strong> 的方法</p><blockquote><p>当调用 <strong>imgFromGallery</strong> 方法时，它将打开设备上的图像目录。</p></blockquote><p>下一步将创建另一个名为 <strong>imglyEditor.</strong> 的方法。</p><blockquote><p>当调用 <strong>imglyEditor</strong> 方法时，它将打开 Img.ly 编辑器。</p></blockquote><p>使用物理设备或模拟器测试运行应用程序。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/3b2f00c0eb5e1790c9e8cd5033a0c9a258a9668088a0989c3c5568598ddb2484.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>P.S: 这是源码 <a href="https://github.com/Wizpna/photo_editor.git" target="_blank" rel="noopener"><strong>source code</strong></a></p><hr><p>© 猫哥</p><ul><li><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p></li><li><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p></li><li><p>微信群 ducafecat</p></li><li><p>b 站 <a href="https://space.bilibili.com/404904528" target="_blank" rel="noopener">https://space.bilibili.com/404904528</a></p></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.tech/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;猫哥说&quot;&gt;&lt;a href=&quot;#猫哥说&quot; class=&quot;headerlink&quot; title=&quot;猫哥说&quot;&gt;&lt;/a&gt;猫哥说&lt;/h2&gt;&lt;p&gt;我最近在做一个社交 APP，里面需要图片、视频的编辑器，如果你和我一样有这样的需求&lt;/p&gt;
&lt;p&gt;你可以试试这款 &lt;a href=&quot;
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>基于 Linux 的 Flutter 方法通道 Channels</title>
    <link href="https://blog.ducafecat.tech/2021/09/24/translation/using-flutter-method-channels-on-linux/"/>
    <id>https://blog.ducafecat.tech/2021/09/24/translation/using-flutter-method-channels-on-linux/</id>
    <published>2021-09-23T16:00:00.000Z</published>
    <updated>2021-09-24T01:05:29.342Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-09-24-09-05-26.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://medium.com/flutter-community/using-flutter-method-channels-on-linux-2f6ae3e99653" target="_blank" rel="noopener">https://medium.com/flutter-community/using-flutter-method-channels-on-linux-2f6ae3e99653</a></p></blockquote><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/charafau/linux_method_channel" target="_blank" rel="noopener">https://github.com/charafau/linux_method_channel</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://flutter.dev/docs/development/platform-integration/platform-channels" target="_blank" rel="noopener">https://flutter.dev/docs/development/platform-integration/platform-channels</a></li><li><a href="https://engine.chinmaygarde.com/fl__value_8cc.html" target="_blank" rel="noopener">https://engine.chinmaygarde.com/fl__value_8cc.html</a></li><li><a href="https://engine.chinmaygarde.com/fl__value_8h.html#a1b2a2f35eb78370fbb2d1af774f6d245" target="_blank" rel="noopener">https://engine.chinmaygarde.com/fl__value_8h.html#a1b2a2f35eb78370fbb2d1af774f6d245</a></li><li><a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.cpptools" target="_blank" rel="noopener">https://marketplace.visualstudio.com/items?itemName=ms-vscode.cpptools</a></li><li><a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.cmake-tools" target="_blank" rel="noopener">https://marketplace.visualstudio.com/items?itemName=ms-vscode.cmake-tools</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><h1 id="Flutter-Method-Channels-on-Linux"><a href="#Flutter-Method-Channels-on-Linux" class="headerlink" title="Flutter Method Channels on Linux"></a>Flutter Method Channels on Linux</h1><h1 id="基于-Linux-的-Flutter-方法通道"><a href="#基于-Linux-的-Flutter-方法通道" class="headerlink" title="基于 Linux 的 Flutter 方法通道"></a>基于 Linux 的 Flutter 方法通道</h1><p>又见面了！今天我将继续我的 Flutter Linux 之旅，我们将再次接触 Linux 集成。上次我们设法为插件开发设置了 Visual Studio Code，今天我们将进一步研究 Method Channels。</p><p>如果你想创建一个带有方法通道支持的插件，非常简单，只需要使用 <code>flutter create \-t plugin \--platforms=linux &lt;name of your project&gt;</code> 从模板生成一个 Flutter 项目。但是，如果你不想创建一个单独的插件，只是添加一些自定义代码到 Flutter Linux 应用程序中呢？我发现这并不简单，所以我想我会写这篇文章，这样你就不用自己解决了。</p><p>为了不再拖延下去，让我们开始吧。</p><h1 id="创建方法通道"><a href="#创建方法通道" class="headerlink" title="创建方法通道"></a>创建方法通道</h1><p>首先，我们需要创建编解码器 <code>codec</code> ，<code>binary messenger</code> 二进制信使和信道。接下来，我们将向自定义方法分配一个方法调用，我们将在下一步中创建这个方法。</p><p>为此，让我们打开我的 <code>my_application.cc</code> 。在 <code>linux</code> 文件夹中抄送并导航到我的 <code>my_application_activate</code> 函数。接下来，我们在插件初始化之后实现上面描述的对象。</p><p>在下面的示例中，<code>name_of_our_channel</code> 的名称是我们从 Dart 代码调用的方法。</p><h1 id="回调函数"><a href="#回调函数" class="headerlink" title="回调函数"></a>回调函数</h1><p>现在我们来创建一个回调函数:</p><p>非常简单，我们传递一个通道、 methodcall 和一些用户数据。</p><p>To check for the channel’s method name we need to use the <code>fl_method_call_get_name</code> function on <code>method_call</code> object. And compare it with <code>strcmp</code> like so:</p><p>为了检查通道的方法名，我们需要在 <code>method_call</code> 对象上使用 <code>fl_method_call_get_name</code> 函数。然后把它和 <code>strcmp</code> 比较，就像这样:</p><h1 id="方法未实现响应"><a href="#方法未实现响应" class="headerlink" title="方法未实现响应"></a>方法未实现响应</h1><p>如果传递给 channel 的方法不存在，我们需要返回未实现的结果来做这件事，我们需要调用 <code>fl_method_call_respond</code></p><h1 id="错误处理"><a href="#错误处理" class="headerlink" title="错误处理"></a>错误处理</h1><p>在开始讨论参数和自定义结果之前，让我们先快速了解一下错误处理。</p><p>幸运的是，它与未实现的方法非常相似:</p><p>我们可以看到它几乎是相同的，我们只是用 <code>fl_method_error_response_new</code> 创建结果，而不是用 <code>fl_method_not_implemented_response_new</code>。</p><h1 id="获取-Dart-参数"><a href="#获取-Dart-参数" class="headerlink" title="获取 Dart 参数"></a>获取 Dart 参数</h1><p>好了，现在是时候从头开始写我们想写的东西了。让我们假设我们想要从 Dart 发送数据到 c + + ，为了做到这一点，我们只需要从 Dart 端发送一个地图，但是如何获取呢？</p><p>为此，我们需要调用 <code>fl_method_call_get_args(FlMethodCall)</code> ，它返回一个指向 <code>FlValue</code> 的指针。</p><p>接下来我们检查返回的值是否是正确的类型:</p><p>在上面的例子中，我们查找字符串，但是还有其他的，比如 int、 float、 bool、 map。对于完整的清单检验 <a href="https://engine.chinmaygarde.com/fl__value_8cc.html" target="_blank" rel="noopener">Flutter Engine Documentation</a></p><p>类型检查也是一样，检查枚举的整个列表到 <a href="https://engine.chinmaygarde.com/fl__value_8h.html#ae514203eea95fec354c1648957f77a4d" target="_blank" rel="noopener">Documentation</a></p><h1 id="返回一些值"><a href="#返回一些值" class="headerlink" title="返回一些值"></a>返回一些值</h1><p>我们几乎完成了，我们设法处理了未实现的方法、错误和从方法中获取参数。剩下的是返回 Dart 的值。</p><p>对我们来说幸运的是，这与我们已经完成的工作非常相似，我们只需要创建 <code>FlMethodResponse</code> 并将 <code>FlValue</code> 放入其中。下面是一个例子:</p><p>像前面一样，这里有更多价值创造函数的文档链接 <a href="https://engine.chinmaygarde.com/fl__value_8h.html#a1b2a2f35eb78370fbb2d1af774f6d245" target="_blank" rel="noopener">link to documentation for more value creation function</a></p><h1 id="代码完成-调试"><a href="#代码完成-调试" class="headerlink" title="代码完成 + 调试"></a>代码完成 + 调试</h1><p>我想我应该给你一些奖励，因为你来到这里，所以我决定在 Visual Studio Code 中编写代码完成和调试的设置程序。</p><p>在开始之前，必须安装 <a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.cpptools" target="_blank" rel="noopener">C++</a> 和 <a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.cmake-tools" target="_blank" rel="noopener">Cmake</a> 插件。</p><p>首先让我们设置代码完成。创建名为 <code>c_cpp_properties.json</code> 的文件。Json 在里面。在你的项目的根目录下放一个 <code>.vscode</code> 文件夹，然后把这个配置文件放进去:</p><p>检查编译器路径(Flutter 使用 Clang)并根据需要调整 c/c + + 标准。</p><p>为了设置调试，我们需要在 <code>launch.json</code> 中创建启动配置 <code>.vscode</code> 文件夹。让我们来看一下配置:</p><p>非常简单，但是需要更改二进制名称。此外，要知道，使它的工作，你需要建立您的 Flutter 项目与 <code>flutter run</code>。</p><h1 id="本文结束"><a href="#本文结束" class="headerlink" title="本文结束"></a>本文结束</h1><p>谢谢你的阅读，希望你会发现它很有用。</p><p>编程愉快！</p><p>完整的例子可以在这里找到。</p><p><a href="https://github.com/charafau/linux_method_channel" target="_blank" rel="noopener">https://github.com/charafau/linux_method_channel</a></p><hr><p>© 猫哥</p><ul><li><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p></li><li><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p></li><li><p>微信群 ducafecat</p></li><li><p>b 站 <a href="https://space.bilibili.com/404904528" target="_blank" rel="noopener">https://space.bilibili.com/404904528</a></p></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.tech/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>flutter 最简单的应用程序图标制作方法</title>
    <link href="https://blog.ducafecat.tech/2021/09/17/translation/the-easiest-way-to-make-app-icons-in-flutter/"/>
    <id>https://blog.ducafecat.tech/2021/09/17/translation/the-easiest-way-to-make-app-icons-in-flutter/</id>
    <published>2021-09-16T16:00:00.000Z</published>
    <updated>2021-09-17T01:02:32.677Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-09-17-09-01-55.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://medium.com/@bharadwaj.palakurthy/the-easiest-way-to-make-app-icons-in-flutter-9fe1bc9dd646" target="_blank" rel="noopener">https://medium.com/@bharadwaj.palakurthy/the-easiest-way-to-make-app-icons-in-flutter-9fe1bc9dd646</a></p></blockquote><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://pub.flutter-io.cn/packages/flutter_launcher_icons" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/flutter_launcher_icons</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/e50c1729b6a2a06718db1590902fa4d9a84bf207fe77d8cba5daf2766fd4ad3a.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>让我们承认这一点ーー管理应用程序图标是一项重复的任务。他们必须生成的多分辨率和手动放置在几个文件夹，这是一个世俗的任务采取。你可能需要做一些小的改变或者修改，现在你必须重复整个替换图标的过程。</p><p>不仅如此，根据我们选择的平台或操作系统的版本，还应用了不同的规则。所以把这些都记在心里，这个过程最好是自动化，而不是手动完成。我们将在这里使用这个名为“ flutter_launcher_icons”的 flutter 包来自动生成所有需要的分辨率。</p><h3 id="Flutter-Launcher-Icons"><a href="#Flutter-Launcher-Icons" class="headerlink" title="Flutter Launcher Icons:"></a>Flutter Launcher Icons:</h3><p>一个命令行工具，简化了更新应用程序启动图标的任务。完全灵活，允许你选择你想要更新启动器图标的平台，如果你想要的话，选择保留你的旧启动器图标，以防你想在未来的某个时候返回。</p><h3 id="先决条件"><a href="#先决条件" class="headerlink" title="先决条件"></a>先决条件</h3><p>在任何情况下，当从图形编辑器导出时，应该是:</p><ul><li>Format: 32-bit 格式: 32 位<strong>PNG 巴布亚新几内亚</strong></li><li>Icon size 图标大小<strong>must be up to 1024x1024 pixels 必须达到 1024x1024 像素</strong></li><li>确保在 40 像素处可见(这是最小的图标)<strong>(Apple Requirement) (苹果需求)</strong></li><li>最大尺寸<strong>1024KB (Android Requirement) 1024KB (Android 版本要求)</strong></li><li>图标必须用<strong>no transparency 没有透明度</strong></li><li>形状必须是正方形<strong>no rounded corners 没有圆角</strong></li><li>需要一个自适应的 android 图标<strong>background 背景</strong>and 及<strong>foreground 前景</strong>to be separated 分开</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/e3f60e43c5b3946488dc86982a76dbab056195e66d946fb867c1fe77f67cdda6.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>安卓产品图标关键字</p><p>The intended look might be different from the guidelines provided by the platforms. So we’ll be creating 3 different flavors for android, iOS, adaptive icons.</p><p>预期的外观可能与平台提供的指导方针不同。因此，我们将为 android、 iOS 和自适应图标创建三种不同的风格。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/2af230975ce3c7d2008bf1962f3c24b0a1d57db3d8b0752bf1cdb32eb97ed7b1.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>预期外观</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/a03aa910cb3c1a3353928b9684a8137f244380db9ee87340a26f4e8e3ef3eae9.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>Android and iOS (no transparency) 安卓和 iOS (没有透明度)</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/5aa8577609eab9bc5e67af5c0b5a34cd4ecf8515fc80d4d22a782edb8471bb9c.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>Adaptive Icons for Android 8.0 and above 8.0 及以上版本的自适应图标</p><h3 id="实施方案"><a href="#实施方案" class="headerlink" title="实施方案:"></a>实施方案:</h3><p>我们将使用一个名为 flutter_launcher_icons 的包</p><p>现在我们需要分别在你的代码中实现它:</p><ul><li>第一步: 添加依赖项。</li></ul><blockquote><p>将 dependency 添加到位于 Flutter 项目根目录中的 pubspec.yaml 文件:</p></blockquote><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dev_dependencies:</span><br><span class="line">  flutter_launcher_icons: any</span><br></pre></td></tr></table></figure><ul><li>第二步: 配置属性</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">flutter_icons:</span><br><span class="line">  ios: <span class="keyword">true</span></span><br><span class="line">  android: <span class="keyword">true</span></span><br><span class="line">  image_path_ios: <span class="string">"assets/launcher/icon.png"</span></span><br><span class="line">  image_path_android: <span class="string">"assets/launcher/icon.png"</span></span><br><span class="line">  adaptive_icon_background: <span class="string">"assets/launcher/background.png"</span></span><br><span class="line">  adaptive_icon_foreground: <span class="string">"assets/launcher/foreground.png"</span></span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/e189e5ab390a63ccc1a010f83fb7e2e484a53a324348238aa74c561c70f203f2.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>图像在你的 assets/launcher/</p><ul><li>第三步: 运行包</li></ul><blockquote><p>设置完配置后，剩下要做的就是运行包。</p></blockquote><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">flutter pub <span class="keyword">get</span></span><br><span class="line">flutter pub run flutter_launcher_icons:main</span><br></pre></td></tr></table></figure><ul><li>第四步: 跑步</li></ul><p>如果一切顺利，资产已经产生。现在，您已经准备好构建应用程序并运行它了。恭喜你</p><h3 id="属性"><a href="#属性" class="headerlink" title="属性:"></a>属性:</h3><blockquote><p>目前，它只能用于为 android/ios 分配图标</p></blockquote><ul><li><strong>image_path 图像路径</strong>: : 图标图像文件的位置，你想用它作为应用程序启动图标</li><li><strong>image_path_android 图片/path/android</strong>: : 特定于 Android 平台的图标图像文件的位置</li><li><strong>image_path_ios 图片/path/ios</strong>: : 特定于 iOS 平台的图标图像文件位置</li></ul><blockquote><p>接下来的两个属性只在生成 Android 启动器图标时使用</p></blockquote><ul><li><strong>adaptive_icon_background 背景</strong>: You can pass in a solid color (E.g. “#ffffff”) or image asset (E.g. “assets/images/christmas-background.png”) which will be used to fill out the background of the adaptive icon.</li><li><strong>adaptive_icon_foreground 自适应图标前景</strong>: The image asset which will be used for the icon foreground of the adaptive icon : 将用于自适应图标的前景图标的图像资产</li></ul><h1 id="Thank-you"><a href="#Thank-you" class="headerlink" title="Thank you!"></a>Thank you!</h1><h1 id="谢谢"><a href="#谢谢" class="headerlink" title="谢谢"></a>谢谢</h1><hr><p>© 猫哥</p><ul><li><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p></li><li><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p></li><li><p>微信群 ducafecat</p></li><li><p>b 站 <a href="https://space.bilibili.com/404904528" target="_blank" rel="noopener">https://space.bilibili.com/404904528</a></p></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.tech/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>flutter 多选项目插件</title>
    <link href="https://blog.ducafecat.tech/2021/09/16/translation/explore-multi-select-items-in-flutter/"/>
    <id>https://blog.ducafecat.tech/2021/09/16/translation/explore-multi-select-items-in-flutter/</id>
    <published>2021-09-15T16:00:00.000Z</published>
    <updated>2021-09-16T01:45:21.842Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-09-16-09-45-19.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://medium.com/flutterdevs/explore-multi-select-items-in-flutter-a90665e17be" target="_blank" rel="noopener">https://medium.com/flutterdevs/explore-multi-select-items-in-flutter-a90665e17be</a></p></blockquote><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://pub.dev/packages/multi_select_item" target="_blank" rel="noopener">https://pub.dev/packages/multi_select_item</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/f02f6f1939a99e095851e09ab65e0317ad6a3851f3fc0f1415ed1b8ac79c5220.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>Flutter 小部件是使用现代框架构建的。这就像是一种反应。在这里，我们从小部件开始创建任何应用程序。屏幕中的每个组件都是一个小部件。这个小部件描述了根据他目前的配置和状态，他的前景应该是什么样的。小部件展示类似于它的想法和当前的设置和状态。</p><p>Flutter 自动化测试使您能够满足您的应用程序的高响应性，因为它有助于在您的应用程序中发现 bug 和各种问题。 Flutter 是一个工具，开发移动，桌面，网络应用程序与代码 \&amp; 是一个免费和开放源码的工具。 Flutter 有能力容易测试任何应用程序。这种能力就是他们在目标平台上按照我们希望的方式工作。 Dart 测试适用于单元测试和非 ui 测试; 它在开发机器上运行，不依赖于 Flutter 应用程序的 GUI。</p><p>在这个博客，我们将探索 Flutter 多选择项目。我们还将实现一个演示的多项目在 Flutter 选择。如何使用它们在您的 Flutter 应用程序。那么让我们开始吧。</p><ul><li>多选择项 | Flutter 包装</li></ul><p><a href="https://pub.dev/packages/multi_select_item" target="_blank" rel="noopener">https://pub.dev/packages/multi_select_item</a></p><h3 id="多选项目"><a href="#多选项目" class="headerlink" title="多选项目:"></a>多选项目:</h3><p>多选项这是一个处理多选项的 Flutter 库使用这个库我们创建一个列表，当我们可以删除这个列表中的项目时使用这个小部件我们将它包装在列表视图构建器项目中，这样我们就可以很容易地创建一个多选项列表。</p><h3 id="实施方案"><a href="#实施方案" class="headerlink" title="实施方案:"></a>实施方案:</h3><p>你需要分别在你的代码中实现它:</p><p><strong>第一步: 添加依赖项。</strong></p><blockquote><p>将依赖项添加到 pubspec ー yaml 文件。</p></blockquote><p>首先，在 pubspec. yaml 中添加 flutter 本地化和 intl 库。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dependencies:</span><br><span class="line">  multi_select_item: ^<span class="number">1.0</span><span class="number">.3</span></span><br></pre></td></tr></table></figure><p><strong>步骤 2: 导入包:</strong></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:multi_select_item/multi_select_item.dart'</span>;</span><br></pre></td></tr></table></figure><p><strong>第三步: 启用 AndriodX</strong></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">org.gradle.jvmargs=-Xmx1536M</span><br><span class="line">android.enableR8=<span class="keyword">true</span></span><br><span class="line">android.useAndroidX=<span class="keyword">true</span></span><br><span class="line">android.enableJetifier=<span class="keyword">true</span></span><br></pre></td></tr></table></figure><h3 id="代码步骤"><a href="#代码步骤" class="headerlink" title="代码步骤:"></a>代码步骤:</h3><p>要实现这一点，您需要先编写“首先定义控制器”。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MultiSelectController controller = <span class="keyword">new</span> MultiSelectController();</span><br></pre></td></tr></table></figure><p>在此之后，我们创建了一个列表，该列表在 initState ()内定义了它的值，并在此之后按列表长度确定控制器的设置长度。参考下面的代码包括在内。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@override</span></span><br><span class="line"><span class="keyword">void</span> initState() &#123;</span><br><span class="line">  <span class="keyword">super</span>.initState();</span><br><span class="line"></span><br><span class="line">  multiSelectList.add(&#123;<span class="string">"images"</span>: <span class="string">'assets/images/resort_1.jpg'</span>, <span class="string">"desc"</span>:<span class="string">"Welcome to New York City!"</span>&#125;);</span><br><span class="line">  multiSelectList.add(&#123;<span class="string">"images"</span>:<span class="string">'assets/images/resort_2.jpg'</span> ,<span class="string">"desc"</span>:<span class="string">"Welcome to Los Angeles!"</span>&#125;);</span><br><span class="line">  multiSelectList.add(&#123;<span class="string">"images"</span>:<span class="string">'assets/images/resort_3.jpg'</span> ,<span class="string">"desc"</span>:<span class="string">"Welcome to Chicago!"</span>&#125;);</span><br><span class="line">  multiSelectList.add(&#123;<span class="string">"images"</span>:<span class="string">'assets/images/resort_4.jpg'</span>, <span class="string">"desc"</span>:<span class="string">"Welcome to Houston!"</span>&#125;);</span><br><span class="line"></span><br><span class="line">  controller.disableEditingWhenNoneSelected = <span class="keyword">true</span>;</span><br><span class="line">  controller.<span class="keyword">set</span>(multiSelectList.length);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在这之后，我们使用一个 ListViewBuilder 小部件，其中我们使用了 MultiSelectItem ()小部件，其中我们使用了卡片及其子属性，我们使用了行小部件，其中我们初始化上面定义的列表值，该列表值具有图像和文本，并在其 onSelected ()上列出控制器是在 setState 内部定义的，用于选择值。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">ListView.builder(</span><br><span class="line">  itemCount: multiSelectList.length,</span><br><span class="line">  itemBuilder: (context, index) &#123;</span><br><span class="line">    <span class="keyword">return</span> MultiSelectItem(</span><br><span class="line">      isSelecting: controller.isSelecting,</span><br><span class="line">      onSelected: () &#123;</span><br><span class="line">        setState(() &#123;</span><br><span class="line">          controller.toggle(index);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;,</span><br><span class="line">      child:Container(</span><br><span class="line">        height:<span class="number">75</span>,</span><br><span class="line">        margin: EdgeInsets.only(left:<span class="number">15</span>,right:<span class="number">15</span>,top:<span class="number">15</span>),</span><br><span class="line">        decoration: BoxDecoration(</span><br><span class="line">          borderRadius: BorderRadius.circular(<span class="number">12</span>),</span><br><span class="line">          color: Colors._transparent_,</span><br><span class="line">        ),</span><br><span class="line">        child:Card(</span><br><span class="line">          color:controller.isSelected(index)</span><br><span class="line">              ? Colors._grey_.shade200:Colors._white_,</span><br><span class="line">          shape: RoundedRectangleBorder(</span><br><span class="line"></span><br><span class="line">            borderRadius: BorderRadius.all(Radius.circular(<span class="number">8.0</span>)),</span><br><span class="line"></span><br><span class="line">          ),</span><br><span class="line">          child:Padding(</span><br><span class="line">            padding:EdgeInsets.symmetric(vertical:<span class="number">10</span>, horizontal: <span class="number">12</span>),</span><br><span class="line">            child: Row(</span><br><span class="line">              children: [</span><br><span class="line">                _<span class="comment">//contentPadding: EdgeInsets.symmetric(vertical: 12, horizontal: 16),_ ClipRRect(</span></span><br><span class="line">                  borderRadius: BorderRadius.circular(<span class="number">12</span>),</span><br><span class="line">                  child:Image.asset(multiSelectList[index][<span class="string">'images'</span>],fit:BoxFit.cover,width:<span class="number">60</span>,height:<span class="number">60</span>,),</span><br><span class="line">                ),</span><br><span class="line">                SizedBox(width:<span class="number">20</span>,),</span><br><span class="line">                Text(multiSelectList[index][<span class="string">'desc'</span>], style: TextStyle(fontSize:<span class="number">14</span>)),</span><br><span class="line">              ],</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;,</span><br><span class="line">),</span><br></pre></td></tr></table></figure><p>之后，我们将删除选定的项目，以删除这我们采取 forEach 和排序的价值，这将排序我们的选择项目首先从最大的 id 最小的 id，然后它将逐一删除它。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> delete() &#123;</span><br><span class="line">  <span class="keyword">var</span> list = controller.selectedIndexes;</span><br><span class="line">  list.sort((b, a) =&gt;</span><br><span class="line">      a.compareTo(b));</span><br><span class="line">  list.forEach((element) &#123;</span><br><span class="line">    multiSelectList.removeAt(element);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  setState(() &#123;</span><br><span class="line">    controller.<span class="keyword">set</span>(multiSelectList.length);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="全部代码"><a href="#全部代码" class="headerlink" title="全部代码 :"></a>全部代码 :</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:multi_select_item/multi_select_item.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MultiSelectListDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _MultiSelectListDemoState createState() =&gt; <span class="keyword">new</span> _MultiSelectListDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_MultiSelectListDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">MultiSelectListDemo</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="built_in">List</span> multiSelectList = [];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  MultiSelectController controller = <span class="keyword">new</span> MultiSelectController();</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line"></span><br><span class="line">    multiSelectList.add(&#123;<span class="string">"images"</span>: <span class="string">'assets/images/resort_1.jpg'</span>, <span class="string">"desc"</span>:<span class="string">"Welcome to New York City!"</span>&#125;);</span><br><span class="line">    multiSelectList.add(&#123;<span class="string">"images"</span>:<span class="string">'assets/images/resort_2.jpg'</span> ,<span class="string">"desc"</span>:<span class="string">"Welcome to Los Angeles!"</span>&#125;);</span><br><span class="line">    multiSelectList.add(&#123;<span class="string">"images"</span>:<span class="string">'assets/images/resort_3.jpg'</span> ,<span class="string">"desc"</span>:<span class="string">"Welcome to Chicago!"</span>&#125;);</span><br><span class="line">    multiSelectList.add(&#123;<span class="string">"images"</span>:<span class="string">'assets/images/resort_4.jpg'</span>, <span class="string">"desc"</span>:<span class="string">"Welcome to Houston!"</span>&#125;);</span><br><span class="line">    multiSelectList.add(&#123;<span class="string">"images"</span>:<span class="string">'assets/images/sanfrancisco.jpg'</span>, <span class="string">"desc"</span>:<span class="string">"Welcome to San francisco!"</span>&#125;);</span><br><span class="line"></span><br><span class="line">    controller.disableEditingWhenNoneSelected = <span class="keyword">true</span>;</span><br><span class="line">    controller.<span class="keyword">set</span>(multiSelectList.length);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> add() &#123;</span><br><span class="line">    multiSelectList.add(&#123;<span class="string">"images"</span>: multiSelectList.length&#125;);</span><br><span class="line">    multiSelectList.add(&#123;<span class="string">"desc"</span>: multiSelectList.length&#125;);</span><br><span class="line"></span><br><span class="line">    setState(() &#123;</span><br><span class="line">      controller.<span class="keyword">set</span>(multiSelectList.length);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> delete() &#123;</span><br><span class="line">    <span class="keyword">var</span> list = controller.selectedIndexes;</span><br><span class="line">    list.sort((b, a) =&gt;</span><br><span class="line">        a.compareTo(b));</span><br><span class="line">    list.forEach((element) &#123;</span><br><span class="line">      multiSelectList.removeAt(element);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    setState(() &#123;</span><br><span class="line">      controller.<span class="keyword">set</span>(multiSelectList.length);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> selectAll() &#123;</span><br><span class="line">    setState(() &#123;</span><br><span class="line">      controller.toggleAll();</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> WillPopScope(</span><br><span class="line">      onWillPop: () <span class="keyword">async</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> before = !controller.isSelecting;</span><br><span class="line">        setState(() &#123;</span><br><span class="line">          controller.deselectAll();</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span> before;</span><br><span class="line">      &#125;,</span><br><span class="line">      child: <span class="keyword">new</span> Scaffold(</span><br><span class="line">        appBar: <span class="keyword">new</span> AppBar(</span><br><span class="line">          title: <span class="keyword">new</span> Text(<span class="string">'Selected <span class="subst">$&#123;controller.selectedIndexes.length&#125;</span>'</span> ),</span><br><span class="line">          actions: (controller.isSelecting)</span><br><span class="line">              ? &lt;Widget&gt;[</span><br><span class="line">            IconButton(</span><br><span class="line">              icon: Icon(Icons._select_all_),</span><br><span class="line">              onPressed: selectAll,</span><br><span class="line">            ),</span><br><span class="line">            IconButton(</span><br><span class="line">              icon: Icon(Icons._delete_),</span><br><span class="line">              onPressed: delete,</span><br><span class="line">            )</span><br><span class="line">          ]</span><br><span class="line">              : &lt;Widget&gt;[],</span><br><span class="line">        ),</span><br><span class="line">        body:Container(</span><br><span class="line"></span><br><span class="line">          child: ListView.builder(</span><br><span class="line">            itemCount: multiSelectList.length,</span><br><span class="line">            itemBuilder: (context, index) &#123;</span><br><span class="line">              <span class="keyword">return</span> InkWell(</span><br><span class="line">                onTap: () &#123;&#125;,</span><br><span class="line">                child: MultiSelectItem(</span><br><span class="line">                  isSelecting: controller.isSelecting,</span><br><span class="line">                  onSelected: () &#123;</span><br><span class="line">                    setState(() &#123;</span><br><span class="line">                      controller.toggle(index);</span><br><span class="line">                    &#125;);</span><br><span class="line">                  &#125;,</span><br><span class="line">                  child:Container(</span><br><span class="line">                      height:<span class="number">75</span>,</span><br><span class="line">                    margin: EdgeInsets.only(left:<span class="number">15</span>,right:<span class="number">15</span>,top:<span class="number">15</span>),</span><br><span class="line">                    decoration: BoxDecoration(</span><br><span class="line">                      borderRadius: BorderRadius.circular(<span class="number">12</span>),</span><br><span class="line">                      color: Colors._transparent_,</span><br><span class="line">                    ),</span><br><span class="line">                    child:Card(</span><br><span class="line">                      color:controller.isSelected(index)</span><br><span class="line">                          ? Colors._grey_.shade200:Colors._white_,</span><br><span class="line">                      shape: RoundedRectangleBorder(</span><br><span class="line"></span><br><span class="line">                        borderRadius: BorderRadius.all(Radius.circular(<span class="number">8.0</span>)),</span><br><span class="line"></span><br><span class="line">                      ),</span><br><span class="line">                      child:Padding(</span><br><span class="line">                        padding:EdgeInsets.symmetric(vertical:<span class="number">10</span>, horizontal: <span class="number">12</span>),</span><br><span class="line">                        child: Row(</span><br><span class="line">                          children: [</span><br><span class="line">                            _<span class="comment">//contentPadding: EdgeInsets.symmetric(vertical: 12, horizontal: 16),_ ClipRRect(</span></span><br><span class="line">                              borderRadius: BorderRadius.circular(<span class="number">12</span>),</span><br><span class="line">                              child:Image.asset(multiSelectList[index][<span class="string">'images'</span>],fit:BoxFit.cover,width:<span class="number">60</span>,height:<span class="number">60</span>,),</span><br><span class="line">                            ),</span><br><span class="line">                            SizedBox(width:<span class="number">20</span>,),</span><br><span class="line">                            Text(multiSelectList[index][<span class="string">'desc'</span>], style: TextStyle(fontSize:<span class="number">14</span>)),</span><br><span class="line">                          ],</span><br><span class="line">                        ),</span><br><span class="line">                      ),</span><br><span class="line">                    ),</span><br><span class="line">                  ),</span><br><span class="line">                ),</span><br><span class="line">              );</span><br><span class="line">            &#125;,</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="结语"><a href="#结语" class="headerlink" title="结语:"></a>结语:</h2><p>在本文中，我解释了 Explore GetIt In Flutter，你可以根据自己的修改和实验，这个小介绍来自 Explore GetIt In Flutter 从我们这边的演示。</p><p>我希望这个博客将为您提供充分的信息，在尝试在您的 Flutter 项目探索 GetIt 在 Flutter 。我们向你展示了什么是探索和 Flutter 是在您的 Flutter 应用的工作，所以请尝试它。</p><p>如果我做错了什么，请在评论中告诉我，我很乐意改进。</p><hr><p>© 猫哥</p><ul><li><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p></li><li><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p></li><li><p>微信群 ducafecat</p></li><li><p>b 站 <a href="https://space.bilibili.com/404904528" target="_blank" rel="noopener">https://space.bilibili.com/404904528</a></p></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.tech/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter SnackBar 组件插件</title>
    <link href="https://blog.ducafecat.tech/2021/09/14/translation/snackbar-widget-in-flutter/"/>
    <id>https://blog.ducafecat.tech/2021/09/14/translation/snackbar-widget-in-flutter/</id>
    <published>2021-09-13T16:00:00.000Z</published>
    <updated>2021-09-14T01:18:40.614Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-09-14-09-15-10.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://medium.com/flutterdevs/snackbar-widget-in-flutter-476bb2431538" target="_blank" rel="noopener">https://medium.com/flutterdevs/snackbar-widget-in-flutter-476bb2431538</a></p></blockquote><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/flutter-devs/flutter_snackbar_demo" target="_blank" rel="noopener">https://github.com/flutter-devs/flutter_snackbar_demo</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://pub.flutter-io.cn/packages/another_flushbar" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/another_flushbar</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><h3 id="了解如何创建静态和自定义-SnackBar-小部件在您的-Flutter-应用程序"><a href="#了解如何创建静态和自定义-SnackBar-小部件在您的-Flutter-应用程序" class="headerlink" title="了解如何创建静态和自定义 SnackBar 小部件在您的 Flutter 应用程序"></a>了解如何创建静态和自定义 SnackBar 小部件在您的 Flutter 应用程序</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/f730b3b2021dd58f1e32d8d62e00e6e780e24f69354e5caca791be2b06752368.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>无论何时你要编写在 Flutter 构建任何东西的代码，它都会在一个小部件中。Flutter 应用程序屏幕上的每个元素都是一个小部件。屏幕的透视图完全依赖于用于构建应用程序的小部件的选择和分组。此外，应用程序代码的结构是一个小部件树。</p><p>在本博客中，我们将了解静态和自定义 SnackBar 小部件及其在 flutter 中的功能。我们将在这个 <strong>SnackBar Widget</strong> 小部件上看到一个简单演示程序的实现。</p><p><a href="https://pub.flutter-io.cn/packages/another_flushbar" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/another_flushbar</a></p><p>在 Flutter 中，SnackBar 是一个小工具，它可以轻量级地在你的应用程序中弹出一条快速消息，在发生事情时短暂地标示出用户。使用 SnackBar，你可以在你的应用程序底部弹出一条消息几秒钟。</p><p>默认情况下，SnackBar 显示在屏幕的底部，当指定的时间完成，它将从屏幕上消失，我们可以使一个自定义的 SnackBar 也和它包含一些行动，允许用户添加或删除任何行动和图像。SnackBar 需要一个 Scaffold，带有一个 Scaffold 实例，你的 SnackBar 会立即弹出。通过使用 scaffold，可以很容易地在小部件树中的任何位置获得 scaffold 的引用。功能。</p><blockquote><p>演示模块:</p></blockquote><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/bcd6543078ae65a9e26b0c3ae36a26051bf808c3262a0f7de4fa75d98d47f6c8.gif" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="如何实现-dart-文件中的代码"><a href="#如何实现-dart-文件中的代码" class="headerlink" title="如何实现 dart 文件中的代码:"></a>如何实现 dart 文件中的代码:</h3><blockquote><p>你需要分别在你的代码中实现它:</p></blockquote><p>首先，在这个 Dart 文件中，我创建了两个按钮，第一个按钮用于显示默认的 SnackBar，第二个按钮用于自定义 SnackBar。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/8bdd3d30e80748e96cb2df7b0c947e00e6760f23f7d0c40674c1d930b4d2bebc.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>Default SnackBar 默认 SnackBar</p><p>显示 SnackBar 有两个步骤。首先，您必须创建一个 SnackBar，这可以通过调用以下构造函数来完成。非常简单易用。这是密码。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> snackBar = SnackBar(content: Text(<span class="string">'Yay! A DefaultSnackBar!'</span>));</span><br><span class="line">ScaffoldMessenger._of_(context).showSnackBar(snackBar);</span><br></pre></td></tr></table></figure><p>但默认情况下，我们的一些要求没有得到满足。所以 May 自定义 SnackBar 正在做这件事。对于自定义 SnackBar，我必须使用 Flushbar 依赖项。这是一个非常和谐的依赖性设计您的自定义 SnackBar 根据您的选择。</p><blockquote><p>首先，在 pubspec.yaml 中添加 SnackBar 的依赖项</p></blockquote><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">another_flushbar: ^<span class="number">1.10</span><span class="number">.24</span></span><br></pre></td></tr></table></figure><p>然后必须创建一个方法来显示自定义 SnackBar。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> showFloatingFlushbar( &#123;<span class="meta">@required</span> BuildContext? context,</span><br><span class="line">  <span class="meta">@required</span> <span class="built_in">String</span>? message,</span><br><span class="line">  <span class="meta">@required</span> <span class="built_in">bool</span>? isError&#125;)&#123;</span><br><span class="line">  Flushbar? flush;</span><br><span class="line">  <span class="built_in">bool</span>? _wasButtonClicked;</span><br><span class="line">  flush = Flushbar&lt;<span class="built_in">bool</span>&gt;(</span><br><span class="line">    title: <span class="string">"Hey User"</span>,</span><br><span class="line">    message: message,</span><br><span class="line">    backgroundColor: isError! ? Colors._red_ : Colors._blueAccent_,</span><br><span class="line">    duration: <span class="built_in">Duration</span>(seconds: <span class="number">3</span>),</span><br><span class="line">    margin: EdgeInsets.all(<span class="number">20</span>),</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    icon: Icon(</span><br><span class="line">      Icons._info_outline_,</span><br><span class="line">      color: Colors._white_,),</span><br><span class="line">    mainButton: FlatButton(</span><br><span class="line">      onPressed: () &#123;</span><br><span class="line">        flush!.dismiss(<span class="keyword">true</span>); _<span class="comment">// result = true_ &#125;,</span></span><br><span class="line">      child: Text(</span><br><span class="line">        <span class="string">"ADD"</span>,</span><br><span class="line">        style: TextStyle(color: Colors._amber_),</span><br><span class="line">      ),</span><br><span class="line">    ),) _<span class="comment">// &lt;bool&gt; is the type of the result passed to dismiss() and collected by show().then((result)&#123;&#125;)_ ..show(context!).then((result) &#123;</span></span><br><span class="line"></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当我们运行应用程序时，我们应该获得屏幕输出，就像下面的屏幕截图一样。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/202f9454cb264a5431f78a4238e5726adaedaa5fea777a62e4ec609661c107cf.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>Custom SnackBar 自定义 SnackBar</p><h1 id="全部代码"><a href="#全部代码" class="headerlink" title="全部代码:"></a>全部代码:</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:another_flushbar/flushbar.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SnackBarView</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> SnackBarView(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _SnackBarViewState createState() =&gt; _SnackBarViewState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_SnackBarViewState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">SnackBarView</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      body: Column(</span><br><span class="line">       mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">        children: [</span><br><span class="line">          _buildSnackBarButton()</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Widget _buildSnackBarButton() &#123;</span><br><span class="line">    <span class="keyword">return</span> Column(</span><br><span class="line">      children: [</span><br><span class="line">        Center(</span><br><span class="line">          child: InkWell(</span><br><span class="line">            onTap: ()&#123;</span><br><span class="line">              <span class="keyword">final</span> snackBar = SnackBar(content: Text(<span class="string">'Yay! A Default SnackBar!'</span>));</span><br><span class="line">              ScaffoldMessenger._of_(context).showSnackBar(snackBar);</span><br><span class="line">            &#125;,</span><br><span class="line">            child: Container(</span><br><span class="line">              height: <span class="number">40</span>,</span><br><span class="line">              width: <span class="number">180</span>,</span><br><span class="line">              decoration: BoxDecoration(</span><br><span class="line">                color: Colors._pinkAccent_,</span><br><span class="line">                borderRadius: BorderRadius.all(Radius.circular(<span class="number">15</span>))</span><br><span class="line">              ),</span><br><span class="line">              child: Center(</span><br><span class="line">                child: Text(<span class="string">"SnackBar"</span>,</span><br><span class="line">                style: TextStyle(</span><br><span class="line">                  color: Colors._white_,</span><br><span class="line">                  fontSize: <span class="number">16</span>,</span><br><span class="line"></span><br><span class="line">                ),),</span><br><span class="line">              ),</span><br><span class="line"></span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">        SizedBox(height: <span class="number">10</span>,),</span><br><span class="line">        Center(</span><br><span class="line">          child: InkWell(</span><br><span class="line">            onTap: ()&#123;</span><br><span class="line">              showFloatingFlushbar(context: context,</span><br><span class="line">                  message: <span class="string">'Custom Snackbar!'</span>,</span><br><span class="line">                  isError: <span class="keyword">false</span>);</span><br><span class="line">              _<span class="comment">// showSnackBar(</span></span><br><span class="line">              <span class="comment">//     context: context,</span></span><br><span class="line">              <span class="comment">//     message: 'Custom Snackbar!',</span></span><br><span class="line">              <span class="comment">//     isError: false);_ &#125;,</span></span><br><span class="line">            child: Container(</span><br><span class="line">              height: <span class="number">40</span>,</span><br><span class="line">              width: <span class="number">180</span>,</span><br><span class="line">              decoration: BoxDecoration(</span><br><span class="line">                color: Colors._pinkAccent_,</span><br><span class="line">                borderRadius: BorderRadius.all(Radius.circular(<span class="number">15</span>))</span><br><span class="line">              ),</span><br><span class="line">              child: Center(</span><br><span class="line">                child: Text(<span class="string">"Custom SnackBar"</span>,</span><br><span class="line"></span><br><span class="line">                style: TextStyle(</span><br><span class="line">                  color: Colors._white_,</span><br><span class="line">                  fontSize: <span class="number">16</span>,</span><br><span class="line"></span><br><span class="line">                ),),</span><br><span class="line">              ),</span><br><span class="line"></span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> showFloatingFlushbar( &#123;<span class="meta">@required</span> BuildContext? context,</span><br><span class="line">  <span class="meta">@required</span> <span class="built_in">String</span>? message,</span><br><span class="line">  <span class="meta">@required</span> <span class="built_in">bool</span>? isError&#125;)&#123;</span><br><span class="line">  Flushbar? flush;</span><br><span class="line">  <span class="built_in">bool</span>? _wasButtonClicked;</span><br><span class="line">  flush = Flushbar&lt;<span class="built_in">bool</span>&gt;(</span><br><span class="line">    title: <span class="string">"Hey User"</span>,</span><br><span class="line">    message: message,</span><br><span class="line">    backgroundColor: isError! ? Colors._red_ : Colors._blueAccent_,</span><br><span class="line">    duration: <span class="built_in">Duration</span>(seconds: <span class="number">3</span>),</span><br><span class="line">    margin: EdgeInsets.all(<span class="number">20</span>),</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    icon: Icon(</span><br><span class="line">      Icons._info_outline_,</span><br><span class="line">      color: Colors._white_,),</span><br><span class="line">    mainButton: FlatButton(</span><br><span class="line">      onPressed: () &#123;</span><br><span class="line">        flush!.dismiss(<span class="keyword">true</span>); _<span class="comment">// result = true_ &#125;,</span></span><br><span class="line">      child: Text(</span><br><span class="line">        <span class="string">"ADD"</span>,</span><br><span class="line">        style: TextStyle(color: Colors._amber_),</span><br><span class="line">      ),</span><br><span class="line">    ),) _<span class="comment">// &lt;bool&gt; is the type of the result passed to dismiss() and collected by show().then((result)&#123;&#125;)_ ..show(context!).then((result) &#123;</span></span><br><span class="line"></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> showSnackBar(</span><br><span class="line">    &#123;<span class="meta">@required</span> BuildContext? context,</span><br><span class="line">    <span class="meta">@required</span> <span class="built_in">String</span>? message,</span><br><span class="line">    <span class="meta">@required</span> <span class="built_in">bool</span>? isError&#125;) &#123;</span><br><span class="line">  <span class="keyword">final</span> snackBar = SnackBar(</span><br><span class="line">    content: Text(</span><br><span class="line">      message!,</span><br><span class="line">      style: TextStyle(fontSize: <span class="number">14.0</span>, fontWeight: FontWeight._normal_),</span><br><span class="line">    ),</span><br><span class="line">    duration: <span class="built_in">Duration</span>(seconds: <span class="number">3</span>),</span><br><span class="line">    backgroundColor: isError! ? Colors._red_ : Colors._green_,</span><br><span class="line">    width: <span class="number">340.0</span>,</span><br><span class="line">    padding: <span class="keyword">const</span> EdgeInsets.symmetric(</span><br><span class="line">      horizontal: <span class="number">8.0</span>,</span><br><span class="line">    ),</span><br><span class="line">    behavior: SnackBarBehavior.floating,</span><br><span class="line">    shape: RoundedRectangleBorder(</span><br><span class="line">      borderRadius: BorderRadius.circular(<span class="number">10.0</span>),</span><br><span class="line">    ),</span><br><span class="line"></span><br><span class="line">    action: SnackBarAction(</span><br><span class="line">      label: <span class="string">'Undo'</span>,</span><br><span class="line">      textColor: Colors._white_,</span><br><span class="line">      onPressed: () &#123;&#125;,</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">  ScaffoldMessenger._of_(context!).showSnackBar(snackBar);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion:"></a>Conclusion:</h1><h1 id="结语"><a href="#结语" class="headerlink" title="结语:"></a>结语:</h1><p>在本文中，我已经简单介绍了 SnackBar 小部件的基本概况，您可以根据自己的选择修改这段代码。这是我对 SnackBar Widget On User Interaction 的一个小小介绍，它正在使用 Flutter 工作。</p><p>我希望这个博客将提供您尝试在您的 Flutter 项目探索，SnackBar 小工具充分的信息。</p><p>如果我做错了什么，请在评论中告诉我，我很乐意改进。</p><p>鼓掌如果这篇文章对你有帮助的话。</p><h1 id="GitHub-Link"><a href="#GitHub-Link" class="headerlink" title="GitHub Link:"></a>GitHub Link:</h1><h1 id="链接"><a href="#链接" class="headerlink" title="链接:"></a>链接:</h1><p>找到 Flutter SnackBar Demo 的源代码:</p><p><a href="https://github.com/flutter-devs/flutter_snackbar_demo" target="_blank" rel="noopener">https://github.com/flutter-devs/flutter_snackbar_demo</a></p><hr><p>© 猫哥</p><ul><li><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p></li><li><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p></li><li><p>微信群 ducafecat</p></li><li><p>b 站 <a href="https://space.bilibili.com/404904528" target="_blank" rel="noopener">https://space.bilibili.com/404904528</a></p></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.tech/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Dart 2.14 发布 新增语言特性</title>
    <link href="https://blog.ducafecat.tech/2021/09/11/translation/announcing-dart-2-14/"/>
    <id>https://blog.ducafecat.tech/2021/09/11/translation/announcing-dart-2-14/</id>
    <published>2021-09-10T16:00:00.000Z</published>
    <updated>2021-09-10T04:04:31.007Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-09-10-12-01-48.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://medium.com/dartlang/announcing-dart-2-14-b48b9bb2fb67" target="_blank" rel="noopener">https://medium.com/dartlang/announcing-dart-2-14-b48b9bb2fb67</a></p></blockquote><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><p>Dart 2.14 的发布对 Apple Silicon 处理器提供了更好的支持，并新增了更多提升生产力的功能，例如通过代码样式分析捕获 lint 错误、更快的发布工具、更好的级联代码格式以及一些细小的语言特性更新。</p><h3 id="Dart-SDK-对-Apple-Silicon-支持"><a href="#Dart-SDK-对-Apple-Silicon-支持" class="headerlink" title="Dart SDK 对 Apple Silicon 支持"></a>Dart SDK 对 Apple Silicon 支持</h3><p>自从在 2020 年末 Apple 发布了新的 <a href="https://support.apple.com/en-us/HT211814" title="https://support.apple.com/en-us/HT211814" target="_blank" rel="noopener">Apple Silicon</a> 处理器以来， Dart SDK 一直致力于增加对该处理器上的 Native 执行支持。</p><p>现在从 Dart 2.14.1 正式增加了对 Apple Silicon 的支持，当 <a href="https://dart.dev/get-dart" title="https://dart.dev/get-dart" target="_blank" rel="noopener">下载</a> MacOS 的 Dart SDK 时，一定要选择 ARM64 选项，<strong>这里需要额外注意， Flutter SDK 中的 Dart SDK 还没有绑定这一项改进</strong>。</p><p>本次更新支持在 Apple Silicon 上运行 SDK/Dart VM 本身，以及对 <code>dart compile</code> 编译后的可执行文件在 Apple Silicon 上运行的支持，<strong>由于 Dart 命令行工具使用原生 Apple Silicon ，因此它们的启动速度会快得多</strong> 。</p><h3 id="Dart-和-Flutter-共享的标准-lint"><a href="#Dart-和-Flutter-共享的标准-lint" class="headerlink" title="Dart 和 Flutter 共享的标准 lint"></a>Dart 和 Flutter 共享的标准 lint</h3><p>开发人员通常会需要他们的代码遵循某种风格，其中许多规则不仅仅是风格偏好（如众所周知的制表符与空格的问题），还涵盖了可能导致错误或引入错误的编码风格。</p><p>比如 <strong>Dart 风格指南要求对所有控制流结构使用花括号</strong>，例如 <code>if-else</code> 语句，这可以防止经典的 <a href="https://en.wikipedia.org/wiki/Dangling_else" title="https://en.wikipedia.org/wiki/Dangling_else" target="_blank" rel="noopener">dangling else</a> 问题，也就是在多个嵌套的 <code>if-else</code> 语句上会存在解释歧义。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/b3fd33030a2c9411a3d01bc777149e8c4155e1c797d035768433df86e4d510d5.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>另一个例子是类型推断，虽然在声明具有初始值的变量时使用类型推断没有问题，但<strong>在<a href="https://dart-lang.github.io/linter/lints/prefer_typing_uninitialized_variables.html" title="https://dart-lang.github.io/linter/lints/prefer_typing_uninitialized_variables.html" target="_blank" rel="noopener">声明未初始化的变量</a> 时指定类型很重要，因为这可以确保类型安全</strong>。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/8e7fbbe5d627aae911538c5b9a32395c4bfdbd60724ac4dda0738e124cd6dfbe.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>良好代码风格的通常是通过代码审查来维持，但是通过在编写代码时，运行静态分析来强制执行规则通常会更有效得多。</p><p>在 Dart 中，这种静态分析规则是高度<a href="https://dart.dev/guides/language/analysis-options" title="https://dart.dev/guides/language/analysis-options" target="_blank" rel="noopener">可配置的</a>，Dart 提供了有<a href="https://dart.dev/tools/linter-rules" title="https://dart.dev/tools/linter-rules" target="_blank" rel="noopener">数百条样式规则</a>（也称为<em>lints</em>），有了如此丰富的选项，选择启用这些的规则时，一开始可能会有些不知所措。</p><blockquote><p>配置支持： <a href="https://dart.dev/guides/language/analysis-options" title="https://dart.dev/guides/language/analysis-options" target="_blank" rel="noopener">dart.dev/guides/lang…</a></p><p>lint 规则： <a href="https://dart.dev/tools/linter-rules" title="https://dart.dev/tools/linter-rules" target="_blank" rel="noopener">dart.dev/tools/linte…</a></p></blockquote><p>Dart 团队维护了一个 <a href="https://dart.dev/guides/language/effective-dart/style" title="https://dart.dev/guides/language/effective-dart/style" target="_blank" rel="noopener">Dart 风格指南</a>，它描述了 Dart 团队认为编写和设计 Dart 代码的最佳方式。</p><blockquote><p>风格指南: <a href="https://dart.dev/guides/language/effective-dart/style" title="https://dart.dev/guides/language/effective-dart/style" target="_blank" rel="noopener">dart.dev/guides/lang…</a></p></blockquote><p>许多开发人员以及 pub.dev 站点<a href="https://pub.dev/help/scoring" title="https://pub.dev/help/scoring" target="_blank" rel="noopener">评分</a>引擎都使用了一套叫 <a href="https://github.com/google/pedantic" title="https://github.com/google/pedantic" target="_blank" rel="noopener">Pedantic</a> 的 lint 规则， Pedantic 起源于 Google 内部的 Dart 风格指南，由于历史原因它不同于一般的 Dart 风格指南，此外 Flutter 框架也从未使用过 Pedantic 的规则集，而是拥有自己的一套规范规则。</p><p>这听起来可能有点混乱，但是在本次的 2.14 发布中，Dart 团队很高兴地宣布<strong>现在拥有一套全新的 lint 集合来实现代码样式指南</strong>，并且 Dart 和 Flutter SDK 默认情况下将这些规则集用于新项目：</p><ul><li><p><a href="https://github.com/dart-lang/lints/blob/main/lib/core.yaml" title="https://github.com/dart-lang/lints/blob/main/lib/core.yaml" target="_blank" rel="noopener"><code>package:lints/core.yaml</code></a>： <strong>所有 Dart 代码都应遵循的 Dart 风格指南中的主要规则，pub.dev 评分引擎已更新为 lints/core 而不是 Pedantic。</strong></p></li><li><p><code>package:lints/recommended.yaml</code> ：核心规则之外加上推荐规则，建议将它用于所有通用 Dart 代码。</p></li><li><p><code>package:flutter_lints/flutter.yaml</code>：核心和推荐之外的 Flutter 特定推荐规则，这个集合推荐用于所有 Flutter 代码。</p></li></ul><p>如果你已经存在现有的 Dart 或者 Flutter 项目，强烈建议升级到这些新规则集，从 pedantic 升级只需几步：<a href="https://github.com/dart-lang/lints%23migrating-from-packagepedantic" title="https://github.com/dart-lang/lints#migrating-from-packagepedantic" target="_blank" rel="noopener">github.com/dart-lang/l…</a> 。</p><h3 id="Dart-格式化程序和级联"><a href="#Dart-格式化程序和级联" class="headerlink" title="Dart 格式化程序和级联"></a>Dart 格式化程序和级联</h3><p>Dart 2.14 对 Dart 格式化程序如何使用<a href="https://dart.dev/guides/language/language-tour%23cascade-notation" title="https://dart.dev/guides/language/language-tour#cascade-notation" target="_blank" rel="noopener">级联</a> 格式化代码进行了一些优化。</p><p>以前格式化程序在某些情况下出现一些令人困惑的格式，例如 <code>doIt()</code> 在这个例子中调用了什么？</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> result = errorState ? foo : bad..doIt();</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure><p>它看起来像是被  <code>bad</code> 调用 ，<strong>但实际上级联适是用于整个 <code>?</code> 表达式上的</strong>，因此级联是在该表达式的结果上调用的，而不仅仅是在 false 子句上，新的格式化程序清晰地描述了这一点：</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">var</span> result = errorState ? foo : bad</span><br><span class="line">..doIt();</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure><p>Dart 团队还大大提高了格式化包含级联的代码的速度；在<a href="https://developers.google.com/protocol-buffers/docs/reference/dart-generated" title="https://developers.google.com/protocol-buffers/docs/reference/dart-generated" target="_blank" rel="noopener">协议缓冲区</a>生成的 Dart 代码中，可以看到格式化速度提高了 10 倍。</p><h3 id="Pub-支持忽略文件"><a href="#Pub-支持忽略文件" class="headerlink" title="Pub 支持忽略文件"></a>Pub 支持忽略文件</h3><p>目前当开发者将包<a href="https://dart.dev/tools/pub/publishing" title="https://dart.dev/tools/pub/publishing" target="_blank" rel="noopener">发布</a>到<a href="https://pub.dev/" title="https://pub.dev/" target="_blank" rel="noopener">pub.dev</a>社区时，pub 会抓取该文件夹中的所有文件，但是会跳过隐藏文件（以 . 开头的文件）和<code>.gitignore</code> 文件。</p><p>Dart 2.14 中更新的 pub 命令支持新 <code>.pubignore</code> 文件，开发者可以在其中列出不想上传到 pub.dev 的文件，此文件使用与 <code>.gitignore</code> 文件相同的格式。</p><blockquote><p>有关详细信息，请参阅包发布文档 <a href="https://dart.dev/tools/pub/publishing%23what-files-are-published" title="https://dart.dev/tools/pub/publishing#what-files-are-published" target="_blank" rel="noopener">dart.dev/tools/pub/p…</a></p></blockquote><h3 id="Pub-and-“dart-test”-性能"><a href="#Pub-and-“dart-test”-性能" class="headerlink" title="Pub and “dart test” 性能"></a>Pub and “dart test” 性能</h3><p>虽然 pub 最常用于管理代码依赖项，但它还有第二个重要的用途：驱动工具。</p><p>比如 Dart 测试工具通过 <code>dart test</code> 命令运行，而它实际上只是 <code>command pub run test:test</code> 命令的包装， <code>package:test</code> 在调用该 <code>test</code> 入口点之前，pub 首先将其编译为可以更快运行的本机代码。</p><p>在 Dart 2.14 之前对 pubspec 的任何更改（包括与 <code>package:test</code> 无关的更改）都会使此测试构建无效，并且还会看到一堆这样的输出，其中包含“预编译可执行文件”：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ dart test</span><br><span class="line">Precompiling executable... (11.6s)</span><br><span class="line">Precompiled test:test.</span><br><span class="line">00:01 +1: All tests passed!</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure><p>在 Dart 2.14 中，pub 在构建步骤方面更加智能，让构建仅在版本更改时发生，此外还使用并行化改进了执行构建步骤的方式，因此可以完成得更快。</p><h3 id="新的语言功能"><a href="#新的语言功能" class="headerlink" title="新的语言功能"></a>新的语言功能</h3><p>Dart 2.14 还包含一些语言特性变化。</p><p>首先添加了一个新的 <a href="https://github.com/dart-lang/language/issues/120" title="https://github.com/dart-lang/language/issues/120" target="_blank" rel="noopener">三重移位</a> 运算符 ( <code>&gt;&gt;&gt;</code>)，这类似于现有的移位运算符 ( <code>&gt;&gt;</code>)，但 <code>&gt;&gt;</code> 执行算术移位，<code>&gt;&gt;&gt;</code> 执行逻辑或无符号移位，其中零位移入最高有效位，而不管被移位的数字是正数还是负数。</p><p>此次还删除了对类型参数的旧限制，该限制不允许使用泛型函数类型作为类型参数，以下所有内容在 2.14 之前都是无效的，但现在是允许的：</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">late <span class="built_in">List</span>&lt;T <span class="built_in">Function</span>&lt;T&gt;(T)&gt; idFunctions;</span><br><span class="line"><span class="keyword">var</span> callback = [&lt;T&gt;(T value) =&gt; value];</span><br><span class="line">late S <span class="built_in">Function</span>&lt;S <span class="keyword">extends</span> T <span class="built_in">Function</span>&lt;T&gt;(T)&gt;(S) f;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure><p>最后对注释类型进行了小幅调整，（诸如 <code>@Deprecated</code> 在 Dart 代码中常用来捕获元数据的注解）以前注解不能传递类型参数，因此 <code>@TypeHelper&lt;int&gt;(42, &quot;The meaning&quot;)</code> 不允许使用诸如此类的代码，而现在此限制现已取消。</p><h3 id="包和核心库更改"><a href="#包和核心库更改" class="headerlink" title="包和核心库更改"></a>包和核心库更改</h3><p>对核心 Dart 包和库进行了许多增强修改，包括：</p><ul><li><p><code>dart:core</code>： 添加了静态方法 <code>hash</code>、<code>hashAll</code> 和 <code>hashAllUnordered</code>。</p></li><li><p><code>dart:core</code>： <code>DateTime</code> 类现在可以更好地处理本地时间。</p></li><li><p><code>package:ffi</code>：添加了对使用 <a href="https://pub.dev/documentation/ffi/latest/ffi/Arena-class.html" title="https://pub.dev/documentation/ffi/latest/ffi/Arena-class.html" target="_blank" rel="noopener">arena</a> 分配器管理内存的支持（<a href="https://github.com/dart-lang/sdk/blob/master/samples/ffi/resource_management/arena_sample.dart" title="https://github.com/dart-lang/sdk/blob/master/samples/ffi/resource_management/arena_sample.dart" target="_blank" rel="noopener">示例</a>）。Arenas 是一种<a href="https://en.wikipedia.org/wiki/Region-based_memory_management" title="https://en.wikipedia.org/wiki/Region-based_memory_management" target="_blank" rel="noopener">基于区域的内存管理</a>形式，一旦退出 arena/region 就会自动释放资源。</p></li><li><p><code>package:ffigen</code>：现在支持从 C 类型定义生成 Dart 类型定义。</p></li></ul><h3 id="重大变化"><a href="#重大变化" class="headerlink" title="重大变化"></a>重大变化</h3><p>Dart 2.14 还包含一些重大更改，预计这些变化只会影响一些特定的用例。</p><h4 id="46545：取消对-ECMAScript5-的支持"><a href="#46545：取消对-ECMAScript5-的支持" class="headerlink" title="#46545：取消对 ECMAScript5 的支持"></a><a href="https://github.com/dart-lang/sdk/issues/46545" title="https://github.com/dart-lang/sdk/issues/46545" target="_blank" rel="noopener">#46545</a>：取消对 ECMAScript5 的支持</h4><p><a href="https://caniuse.com/es6" title="https://caniuse.com/es6" target="_blank" rel="noopener">所有浏览器都</a>支持最新的 ECMAScript 版本，因此两年前 Dart 就<a href="https://groups.google.com/a/dartlang.org/g/announce/c/x7eDinVT6fM/m/ZSFl2a9tEAAJ%3Fpli%3D1" title="https://groups.google.com/a/dartlang.org/g/announce/c/x7eDinVT6fM/m/ZSFl2a9tEAAJ?pli=1" target="_blank" rel="noopener">宣布</a> 计划弃用对 ECMAScript 5 (ES5) 的支持，这使 Dart 能够利用最新 ECMAScript 中的改进并生成更小的输出，<strong>在 Dart 2.14 中，这项工作已经完成，Dart Web 编译器不再支持 ES5。因此不再支持较旧的浏览器（例如 IE11）</strong>。</p><h4 id="46100：弃用-stagehand、dartfmt-和-dart2native"><a href="#46100：弃用-stagehand、dartfmt-和-dart2native" class="headerlink" title="#46100：弃用 stagehand、dartfmt 和 dart2native"></a><a href="https://github.com/dart-lang/sdk/issues/46100" title="https://github.com/dart-lang/sdk/issues/46100" target="_blank" rel="noopener">#46100</a>：弃用 stagehand、dartfmt 和 dart2native</h4><p>在 2020 年 10 月的 <a href="https://medium.com/dartlang/announcing-dart-2-10-350823952bd5" title="https://medium.com/dartlang/announcing-dart-2-10-350823952bd5" target="_blank" rel="noopener">Dart 2.10 博客文章中</a> 宣布了将所有 Dart CLI 开发人员工具组合成一个单一的组合<code>dart</code>工具（类似于该<code>flutter</code>工具），而现在 Dart 2.14 弃用了 <code>dartfmt</code> 和 <code>dart2native</code> 命令，并停止使用 <code>stagehand</code> ，这些工具在统一在 <code>dart-tool</code> 中都有等价的替代品。</p><h4 id="45451：弃用-VM-Native-扩展"><a href="#45451：弃用-VM-Native-扩展" class="headerlink" title="#45451：弃用 VM Native 扩展"></a><a href="https://github.com/dart-lang/sdk/issues/45451" title="https://github.com/dart-lang/sdk/issues/45451" target="_blank" rel="noopener">#45451</a>：弃用 VM Native 扩展</h4><p>Dart SDK 已弃用 Dart VM 的 Native 扩展，这是从 Dart 代码调用 Native 代码的旧机制，Dart <a href="https://dart.dev/guides/libraries/c-interop" title="https://dart.dev/guides/libraries/c-interop" target="_blank" rel="noopener">FFI</a>（外来函数接口）是当前用于此用例的新机制，正在积极<a href="https://medium.com/dartlang/announcing-dart-2-13-c6d547b57067" title="https://medium.com/dartlang/announcing-dart-2-13-c6d547b57067" target="_blank" rel="noopener">发展</a> 以使其功能更加强大且易于使用。</p><hr><p>© 猫哥</p><ul><li><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p></li><li><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p></li><li><p>微信群 ducafecat</p></li><li><p>b 站 <a href="https://space.bilibili.com/404904528" target="_blank" rel="noopener">https://space.bilibili.com/404904528</a></p></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.tech/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 2.5 的新功能</title>
    <link href="https://blog.ducafecat.tech/2021/09/10/translation/whats-new-in-flutter-2-5-6/"/>
    <id>https://blog.ducafecat.tech/2021/09/10/translation/whats-new-in-flutter-2-5-6/</id>
    <published>2021-09-09T16:00:00.000Z</published>
    <updated>2021-09-10T00:39:22.699Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-09-10-08-26-51.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://medium.com/flutter/whats-new-in-flutter-2-5-6f080c3f3dc" target="_blank" rel="noopener">https://medium.com/flutter/whats-new-in-flutter-2-5-6f080c3f3dc</a></p></blockquote><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><p>您好，欢迎来到 Flutter 2.5！这是一个大版本，在 Flutter 版本历史上排名第二：关闭了 4600 个问题，从 252 个贡献者和 216 个审阅者合并了 3932 个 PR。如果我们回顾过去一年，我们会看到 1337 位贡献者创建了 21,072 个巨大的 PR，其中 15,172 个被合并。虽然“Flutter 中的新功能”博客文章重点介绍了新功能，但我们在 Flutter 方面的第一项工作始终是确保您拥有所需的功能，并达到最高的质量水平。 事实上，此版本继续了许多重要的性能和工具改进，以跟踪您自己的应用程序中的性能问题。同时，还有许多新功能，包括对 Android 的全屏支持、更多 Material You（也称为 v3）支持、更新的文本编辑以支持可切换的键盘快捷键、在 Widget Inspector，对在 Visual Studio Code 项目中添加依赖项的新支持，对从 IntelliJ/Android Studio 中的测试运行获取覆盖率信息的新支持，以及一个全新的应用程序模板，为您的真实 Flutter 应用程序提供更好的基础。此版本充满了令人兴奋的新更新，让我们开始吧。</p><h3 id="性能：iOS-着色器预热、异步任务、GC-和消息传递"><a href="#性能：iOS-着色器预热、异步任务、GC-和消息传递" class="headerlink" title="性能：iOS 着色器预热、异步任务、GC 和消息传递"></a>性能：iOS 着色器预热、异步任务、GC 和消息传递</h3><p>此版本带来了多项性能改进。此列表中的第一个 PR 用于从离线训练运行 ( <a href="https://github.com/flutter/engine/pull/25644" title="https://github.com/flutter/engine/pull/25644" target="_blank" rel="noopener">#25644</a> ) 中连接 Metal 着色器预编译，它（如我们的基准测试所示）将最坏情况的帧光栅化时间减少了 2/3 秒，将第 99 个百分位帧减少了一半。我们继续在减少 iOS 卡顿方面取得进展，这是沿着这条道路迈出的又一步。然而，着色器预热只是卡顿的来源之一。以前，处理来自网络、文件系统、插件或其他隔离的异步事件可能会中断动画，这是另一个卡顿的来源。以下改进调度策略 ( <a href="https://github.com/flutter/engine/pull/25789" title="https://github.com/flutter/engine/pull/25789" target="_blank" rel="noopener">#25789</a>) 在此版本的 UI 隔离的事件循环中，帧处理现在优先于处理其他异步事件，从而在我们的测试中消除了此源的卡顿。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/588cf9e40b6f8e751f638b25b8d38ae7d5a47fe24040f8df88e91bbbcced09e3.png" alt="image.png" title="">                </div>                <div class="image-caption">image.png</div>            </figure><p><em>由于前后处理异步事件结果导致的帧滞后</em></p><p>另一个导致卡顿的原因是垃圾收集器 (GC) 暂停 UI 线程以回收内存。以前，某些图像的内存只会延迟回收以响应 Dart VM 执行的 GC。作为早期版本中的解决方法，Flutter 引擎会向 Dart VM 暗示图像内存可以通过 GC 回收，这在理论上可以导致更及时的内存回收。不幸的是，在实践中，这导致了太多的主要 GC，并且有时仍然无法足够快地回收内存以避免内存受限设备上的低内存情况。在这个版本中，未使用的图像的内存被急切地回收（<a href="https://github.com/flutter/engine/pull/26219" title="https://github.com/flutter/engine/pull/26219" target="_blank" rel="noopener">#26219</a>、<a href="https://github.com/flutter/flutter/pull/82883" title="https://github.com/flutter/flutter/pull/82883" target="_blank" rel="noopener">#82883</a>、<a href="https://github.com/flutter/flutter/pull/84740" title="https://github.com/flutter/flutter/pull/84740" target="_blank" rel="noopener">#84740</a>），大大减少了 GC。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/a4e0292ebdf7787351e7e3c5834092d2361d1b75774556656a79aadfafa382fa.png" alt="image.png" title="">                </div>                <div class="image-caption">image.png</div>            </figure><p><em>添加修复程序之前和之后的 GC 以急切地回收未使用的大图像内存</em></p><p>例如，在我们的一项测试中，播放 20 秒动画 GIF 从需要 400 多次 GC 变为只需要 4 次。更少的主要 GC 意味着涉及图像出现和消失的动画将减少卡顿，并消耗更少的 CPU 和功率。 Flutter 2.5 的另一个性能改进是在 Dart 和 Objective-C/Swift (iOS) 或 Dart 和 Java/Kotlin (Android) 之间发送消息时的延迟。通常作为<a href="https://docs.google.com/document/d/1oNLxJr_ZqjENVhF94-PqxsGPx0qGXx-pRJxXL6LSagc/edit%23heading%3Dh.9gabvat7tlxf" title="https://docs.google.com/document/d/1oNLxJr_ZqjENVhF94-PqxsGPx0qGXx-pRJxXL6LSagc/edit#heading=h.9gabvat7tlxf" target="_blank" rel="noopener">调整</a>消息频道的一部分，从消息编解码器中删除不必要的副本可将延迟减少多达 50%，具体取决于消息大小和设备（<a href="https://github.com/flutter/engine/pull/25988" title="https://github.com/flutter/engine/pull/25988" target="_blank" rel="noopener">#25988</a>，<a href="https://github.com/flutter/engine/pull/26331" title="https://github.com/flutter/engine/pull/26331" target="_blank" rel="noopener">#26331</a>）。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/2468f9052db2e005813c30039c146011dbfd6f6555bee1d8844c1d8e12333986.png" alt="image.png" title="">                </div>                <div class="image-caption">image.png</div>            </figure><p><em>之前和之后的 iOS 消息延迟</em></p><p>您可以<a href="https://medium.com/flutter/improving-platform-channel-performance-in-flutter-e5b4e5df04af" title="https://medium.com/flutter/improving-platform-channel-performance-in-flutter-e5b4e5df04af" target="_blank" rel="noopener">在</a>Aaron Clarke<a href="https://medium.com/flutter/improving-platform-channel-performance-in-flutter-e5b4e5df04af" title="https://medium.com/flutter/improving-platform-channel-performance-in-flutter-e5b4e5df04af" target="_blank" rel="noopener">撰写</a>的<a href="https://medium.com/flutter/improving-platform-channel-performance-in-flutter-e5b4e5df04af" title="https://medium.com/flutter/improving-platform-channel-performance-in-flutter-e5b4e5df04af" target="_blank" rel="noopener">提高 Flutter</a>中的<a href="https://medium.com/flutter/improving-platform-channel-performance-in-flutter-e5b4e5df04af" title="https://medium.com/flutter/improving-platform-channel-performance-in-flutter-e5b4e5df04af" target="_blank" rel="noopener">平台通道性能</a>博客文章中阅读有关这项工作的详细信息。 如果您的目标是 iOS，那么最后一个性能更新：在此版本中，在 Apple Silicon M1 Mac 上构建的 Flutter 应用程序在 ARM iOS 模拟器 ( <a href="https://github.com/flutter/flutter/pull/85642" title="https://github.com/flutter/flutter/pull/85642" target="_blank" rel="noopener">#pull/85642</a> )上本地运行。这意味着 Intel x86_64 指令和 ARM 之间没有 Rosetta 转换，这会提高您的 iOS 应用程序测试期间的性能，并允许您避免一些微妙的 Rosetta 问题（<a href="https://github.com/flutter/flutter/issues/74970%23issuecomment-858170914" title="https://github.com/flutter/flutter/issues/74970#issuecomment-858170914" target="_blank" rel="noopener">#74970</a>、<a href="https://github.com/flutter/flutter/issues/79641" title="https://github.com/flutter/flutter/issues/79641" target="_blank" rel="noopener">#79641</a>）。这是全面支持 Flutter for Apple Silicon 的又一步。请继续关注更多。</p><h3 id="Dart-2-14：格式、语言特性、发布和-linting-开箱即用"><a href="#Dart-2-14：格式、语言特性、发布和-linting-开箱即用" class="headerlink" title="Dart 2.14：格式、语言特性、发布和 linting 开箱即用"></a>Dart 2.14：格式、语言特性、发布和 linting 开箱即用</h3><p>当然，如果没有 Dart 语言和构建它的运行时，Flutter 就不是 Flutter。此版本的 Flutter 随 Dart 2.14 一起发布。<a href="https://medium.com/%40mit.mit/announcing-dart-2-14-b48b9bb2fb67" title="https://medium.com/@mit.mit/announcing-dart-2-14-b48b9bb2fb67" target="_blank" rel="noopener">新版本的 Dart</a>带有新的格式，使<a href="https://dart.dev/guides/language/language-tour%23cascade-notation" title="https://dart.dev/guides/language/language-tour#cascade-notation" target="_blank" rel="noopener">级联</a>更加清晰，新的 pub 支持忽略文件，以及新的语言功能，包括传奇的三重移位运算符的回归。此外，也是 Dart 2.14 最好的事情之一，是此版本创建了一组标准的 lint，在新的 Dart 和 Flutter 项目之间共享，开箱即用。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/990b950eea59097fb5a2f3e5ab6b69dbcf4d8dda59310c3de672eddf64fcfd42.png" alt="image.png" title="">                </div>                <div class="image-caption">image.png</div>            </figure><p>_<code>flutter create</code> 开箱即用，带有一个 analysis_options.yaml 文件，其中预先填充了推荐的 Flutter lints_ 您不仅会在创建新的 Dart 或 Flutter 项目时获得这些 lint，而且<a href="https://flutter.dev/docs/release/breaking-changes/flutter-lints-package%23migration-guide" title="https://flutter.dev/docs/release/breaking-changes/flutter-lints-package#migration-guide" target="_blank" rel="noopener">只需几个步骤</a>，您也可以将相同的分析添加到现有应用程序中。有关这些 lint 的详细信息、新语言功能等，请查看<a href="https://medium.com/dartlang/announcing-dart-2-13-c6d547b57067" title="https://medium.com/dartlang/announcing-dart-2-13-c6d547b57067" target="_blank" rel="noopener">Dart 2.14 的发布公告</a>。</p><h3 id="框架：Android-全屏、Material-You-amp-文本编辑快捷方式"><a href="#框架：Android-全屏、Material-You-amp-文本编辑快捷方式" class="headerlink" title="框架：Android 全屏、Material You &amp; 文本编辑快捷方式"></a>框架：Android 全屏、Material You &amp; 文本编辑快捷方式</h3><p>Flutter 2.5 版本包括对该框架的许多修复和改进。从<a href="https://github.com/flutter/flutter/pull/81303" title="https://github.com/flutter/flutter/pull/81303" target="_blank" rel="noopener">Android</a>开始<a href="https://github.com/flutter/flutter/pull/81303" title="https://github.com/flutter/flutter/pull/81303" target="_blank" rel="noopener">，我们修复了一系列与全屏模式相关的问题</a>，在它们之间有近 100 次竖起大拇指。模式本身的名称使其成为我们最喜欢的新功能之一：<em>向后倾斜、粘性、粘性沉浸和边缘到边缘</em>。此更改还添加了一种在其他模式下收听全屏更改的方法。例如，如果用户与应用互动，当系统 UI 返回时，开发人员现在可以编写代码以返回全屏或执行其他操作。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/36da53110e6f729b70ca46c2513c4d02756dce0c66e0620f11fd5b5c3cf699c8.png" alt="image.png" title="">                </div>                <div class="image-caption">image.png</div>            </figure><p><em>新的 Android 边到边模式：普通模式（左）、边到边模式（中）、带有自定义 SystemUIOverlayStyle 的边到边（右）</em> 在此版本中，我们继续构建对新 Material You（又名 v3）规范的支持，包括对浮动操作按钮大小和主题的更新（<a href="https://github.com/flutter/flutter/pull/86441" title="https://github.com/flutter/flutter/pull/86441" target="_blank" rel="noopener">#86441</a>），以及 MaterialState.scrolledUnder 您可以使用示例代码中的示例代码查看的新状态公关 ( <a href="https://github.com/flutter/flutter/pull/79999" title="https://github.com/flutter/flutter/pull/79999" target="_blank" rel="noopener">#79999</a> )。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/94c3bc9574bd46421d51e81e8c1ebb24e4be13baf46b203b9b6f8efbedbb11b7.png" alt="image.png" title="">                </div>                <div class="image-caption">image.png</div>            </figure><p><em>新材料您的 FAB 尺寸</em></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/e14616e736c0c38bd2bead41927e4eb99b27dba52b339eb7aff0f11d9d28fdd6.png" alt="01.gif" title="">                </div>                <div class="image-caption">01.gif</div>            </figure><p><em>新的 MaterialState.scrolledUnder 状态在起作用</em> 当我们谈论滚动时，另一个改进是添加了滚动指标通知（<a href="https://github.com/flutter/flutter/pull/85221" title="https://github.com/flutter/flutter/pull/85221" target="_blank" rel="noopener">#85221</a>、<a href="https://github.com/flutter/flutter/pull/85499" title="https://github.com/flutter/flutter/pull/85499" target="_blank" rel="noopener">#85499</a>），即使用户没有滚动，它<a href="https://github.com/flutter/flutter/pull/85499" title="https://github.com/flutter/flutter/pull/85499" target="_blank" rel="noopener">也会</a>提供可滚动区域的通知。例如，下面显示了滚动条根据 的基础大小适当地出现或消失 ListView：</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/d33eecb82565e969cf7c23132dd5e4021260939f9da890ba195e943ee91b9bc3.png" alt="02.gif" title="">                </div>                <div class="image-caption">02.gif</div>            </figure><p><em>新的滚动指标通知使滚动条无需滚动即可自动出现和消失</em> 在这种情况下，您不必编写任何代码，但如果您想捕获<a href="https://master-api.flutter.dev/flutter/widgets/ScrollMetricsNotification-class.html" title="https://master-api.flutter.dev/flutter/widgets/ScrollMetricsNotification-class.html" target="_blank" rel="noopener">ScrollMetricNotification</a>更改，则可以。特别感谢社区贡献者<a href="https://github.com/xu-baolin" title="https://github.com/xu-baolin" target="_blank" rel="noopener">xu-baoolin</a>，他为此付出了努力并提出了一个很好的解决方案。 社区的另一个出色贡献是为 ScaffoldMessenger. 你可能还记得 ScaffoldMessenger 从 <a href="https://medium.com/flutter/whats-new-in-flutter-2-0-fe8e95ecc65" title="https://medium.com/flutter/whats-new-in-flutter-2-0-fe8e95ecc65" target="_blank" rel="noopener">Flutter 2.0 发布公告</a>作为一个更强大的方式来显示 SnackBars 在屏幕的底部为用户提供通知。在 Flutter 2.5 中，您现在可以在脚手架的顶部添加一个 banner ，该 banner 会一直保持到用户关闭它为止。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/2bb567197fc06a010901f197ec49ff419bc3e549f895591c6c1d3346fb1ae4ae.png" alt="03.gif" title="">                </div>                <div class="image-caption">03.gif</div>            </figure><p>您的应用程序可以通过调用以下 showMaterialBanner 方法来获得此行为 ScaffoldMessenger：</p><p><a href="https://material.io/components/banners%23usage" title="https://material.io/components/banners#usage" target="_blank" rel="noopener">banner</a> 的<a href="https://material.io/components/banners%23usage" title="https://material.io/components/banners#usage" target="_blank" rel="noopener">Material 指南规定</a>您的应用一次只能显示一个，因此如果您的应用调用 showMaterialBanner 多次，ScaffoldMessenger 它将维护一个队列，显示每个新 banner ，因为前一个 banner 已被关闭。感谢<a href="https://github.com/Calamity210" title="https://github.com/Calamity210" target="_blank" rel="noopener">Calamity210</a>对 Flutter 中的 Material 支持做出了如此出色的补充！ 在 Flutter 2.0 及其新的文本编辑功能的基础上进一步构建，例如文本选择枢轴点以及能够在处理后停止键盘事件的传播，在此版本中，我们添加了使文本编辑键盘快捷键可覆盖的功能（<a href="https://github.com/flutter/flutter/pull/85381" title="https://github.com/flutter/flutter/pull/85381" target="_blank" rel="noopener">#85381</a>）。如果您希望<strong>Ctrl-A</strong>执行一些自定义操作而不是选择所有文本，您可以这样做。本<a href="https://github.com/flutter/flutter/blob/b524270af147847f64fa296cf6eed3633ffe683d/packages/flutter/lib/src/widgets/default_text_editing_shortcuts.dart%23L163" title="https://github.com/flutter/flutter/blob/b524270af147847f64fa296cf6eed3633ffe683d/packages/flutter/lib/src/widgets/default_text_editing_shortcuts.dart#L163" target="_blank" rel="noopener">DefaultTextEditingShortcuts</a>类包含每个平台上受支持扑每键盘快捷键列表。如果您想覆盖任何内容，请使用 Flutter 的现有<a href="https://api.flutter.dev/flutter/widgets/Shortcuts-class.html" title="https://api.flutter.dev/flutter/widgets/Shortcuts-class.html" target="_blank" rel="noopener">Shortcuts</a>小部件将任何快捷方式重新映射到现有或自定义意图。您可以将该小部件放置在小部件树中要应用覆盖的任何位置。查看<a href="https://api.flutter.dev/flutter/widgets/DefaultTextEditingShortcuts-class.html" title="https://api.flutter.dev/flutter/widgets/DefaultTextEditingShortcuts-class.html" target="_blank" rel="noopener">API 参考</a>中的一些示例。</p><h3 id="插件：相机、图像选择器和插件"><a href="#插件：相机、图像选择器和插件" class="headerlink" title="插件：相机、图像选择器和插件"></a>插件：相机、图像选择器和插件</h3><p>另一个有很多改进<a href="https://pub.dev/packages/camera" title="https://pub.dev/packages/camera" target="_blank" rel="noopener">的插件</a>是<a href="https://pub.dev/packages/camera" title="https://pub.dev/packages/camera" target="_blank" rel="noopener">相机插件</a>：</p><ul><li><a href="https://github.com/flutter/plugins/pull/3795" title="https://github.com/flutter/plugins/pull/3795" target="_blank" rel="noopener">3795</a> [相机] android-rework 第 1 部分：支持 Android 相机功能的基类</li><li><a href="https://github.com/flutter/plugins/pull/3796" title="https://github.com/flutter/plugins/pull/3796" target="_blank" rel="noopener">3796</a> [相机] android-rework 第 2 部分：Android 自动对焦功能</li><li><a href="https://github.com/flutter/plugins/pull/3797" title="https://github.com/flutter/plugins/pull/3797" target="_blank" rel="noopener">3797</a> [camera] android-rework part 3：Android 曝光相关功能</li><li><a href="https://github.com/flutter/plugins/pull/3798" title="https://github.com/flutter/plugins/pull/3798" target="_blank" rel="noopener">3798</a> [相机] android-rework 第 4 部分：Android 闪光和变焦功能</li><li><a href="https://github.com/flutter/plugins/pull/3799" title="https://github.com/flutter/plugins/pull/3799" target="_blank" rel="noopener">3799</a> [相机] android-rework 第 5 部分：Android FPS 范围、分辨率和传感器方向功能</li><li><a href="https://github.com/flutter/plugins/pull/4039" title="https://github.com/flutter/plugins/pull/4039" target="_blank" rel="noopener">4039</a> [相机] android-rework 第 6 部分：Android 曝光和焦点功能</li><li><a href="https://github.com/flutter/plugins/pull/4052" title="https://github.com/flutter/plugins/pull/4052" target="_blank" rel="noopener">4052</a> [camera] android-rework part 7：Android 降噪功能</li><li><a href="https://github.com/flutter/plugins/pull/4054" title="https://github.com/flutter/plugins/pull/4054" target="_blank" rel="noopener">4054</a> [相机] android-rework 第 8 部分：最终实现的支持模块</li><li><a href="https://github.com/flutter/plugins/pull/4010" title="https://github.com/flutter/plugins/pull/4010" target="_blank" rel="noopener">4010</a> [camera] 在 iOS 上不触发平面设备方向</li><li><a href="https://github.com/flutter/plugins/pull/4158" title="https://github.com/flutter/plugins/pull/4158" target="_blank" rel="noopener">4158</a> [相机] 修复坐标旋转以在 iOS 上设置焦点和曝光点</li><li><a href="https://github.com/flutter/plugins/pull/4197" title="https://github.com/flutter/plugins/pull/4197" target="_blank" rel="noopener">4197</a> [相机] 修复相机预览并不总是在方向改变时重建</li><li><a href="https://github.com/flutter/plugins/pull/3992" title="https://github.com/flutter/plugins/pull/3992" target="_blank" rel="noopener">3992</a> [camera] 设置不受支持的 FocusMode 时防止崩溃</li><li><a href="https://github.com/flutter/plugins/pull/4151" title="https://github.com/flutter/plugins/pull/4151" target="_blank" rel="noopener">4151</a> [camera] 引入 camera_web 包</li></ul><p><a href="https://pub.dev/packages/image_picker" title="https://pub.dev/packages/image_picker" target="_blank" rel="noopener">image_picker 插件</a>也做了很多工作，专注于端到端的相机体验：</p><ul><li><a href="https://github.com/flutter/plugins/pull/3898" title="https://github.com/flutter/plugins/pull/3898" target="_blank" rel="noopener">3898</a> [image_picker] 图像选择器修复相机设备</li><li><a href="https://github.com/flutter/plugins/pull/3956" title="https://github.com/flutter/plugins/pull/3956" target="_blank" rel="noopener">3956</a> [image_picker] 将相机捕获的存储位置更改为 Android 上的内部缓存，以符合新的 Google Play 存储要求</li><li><a href="https://github.com/flutter/plugins/pull/4001" title="https://github.com/flutter/plugins/pull/4001" target="_blank" rel="noopener">4001</a> [image_picker] 删除了对相机权限的冗余请求</li><li><a href="https://github.com/flutter/plugins/pull/4019" title="https://github.com/flutter/plugins/pull/4019" target="_blank" rel="noopener">4019</a> [image_picker] 当相机是源时修复旋转</li></ul><p>这项工作改进了适用于 Android 的相机和 image_picker 插件的功能和稳健性。此外，您会注意到<a href="https://pub.dev/packages/camera_web" title="https://pub.dev/packages/camera_web" target="_blank" rel="noopener">摄像头插件</a>的早期版本可用于网络支持 ( <a href="https://github.com/flutter/plugins/pull/4151" title="https://github.com/flutter/plugins/pull/4151" target="_blank" rel="noopener">#4151</a> )。此预览为在 Web 上查看相机预览、拍照、使用闪光灯和缩放控件提供基本支持。它目前不是<a href="https://flutter.dev/docs/development/packages-and-plugins/developing-packages%23endorsed-federated-plugin" title="https://flutter.dev/docs/development/packages-and-plugins/developing-packages#endorsed-federated-plugin" target="_blank" rel="noopener">认可的插件</a>，因此您需要<a href="https://pub.dev/packages/camera_web/install" title="https://pub.dev/packages/camera_web/install" target="_blank" rel="noopener">明确添加它</a>以在您的网络应用程序中使用。 最初的 Android 相机重写工作由<a href="https://github.com/acoutts" title="https://github.com/acoutts" target="_blank" rel="noopener">acoutts</a>贡献。相机和 image_picker 工作是由降落<a href="https://www.baseflow.com/open-source/flutter" title="https://www.baseflow.com/open-source/flutter" target="_blank" rel="noopener">基流</a>，一家咨询公司，专门从事 Flutter 和知名的<a href="https://pub.dev/publishers/baseflow.com/packages" title="https://pub.dev/publishers/baseflow.com/packages" target="_blank" rel="noopener">上 pub.dev 自己的包</a>。camera_web 的工作主要由总部位于美国的 Flutter 咨询公司<a href="https://verygood.ventures/" title="https://verygood.ventures/" target="_blank" rel="noopener">Very Good Ventures</a>完成。非常感谢大家对 Flutter 社区的贡献！ 另一个有价值的社区贡献是 Flutter 社区组织，以<a href="https://plus.fluttercommunity.dev/" title="https://plus.fluttercommunity.dev/" target="_blank" rel="noopener">“plus”插件</a>而闻名。在此版本的 Flutter 中，Flutter 团队的每个相应插件现在都带有一个类似<a href="https://pub.dev/packages/battery" title="https://pub.dev/packages/battery" target="_blank" rel="noopener">电池</a>的建议：</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/99ea75ff9f1090884b4a11d7112455e69bec96389d5ba6c9558a4699f9bde6ae.png" alt="image.png" title="">                </div>                <div class="image-caption">image.png</div>            </figure><p>此外，由于这些插件不再被积极维护，它们不再被标记为 Flutter 最喜欢的插件。如果您还没有这样做，我们建议您使用以下插件的 plus 版本：</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/c0f906fb95498f2fbe0627a586be246d842dd242515761adccfb86fbeb1b80ff.png" alt="image.png" title="">                </div>                <div class="image-caption">image.png</div>            </figure><h3 id="Flutter-DevTools：性能、小部件检查器和润色"><a href="#Flutter-DevTools：性能、小部件检查器和润色" class="headerlink" title="Flutter DevTools：性能、小部件检查器和润色"></a>Flutter DevTools：性能、小部件检查器和润色</h3><p>此版本的 Flutter 对 Flutter DevTools 进行了许多改进。首先也是最重要的是 DevTools 中增加的支持以利用引擎更新（<a href="https://github.com/flutter/engine/pull/26205" title="https://github.com/flutter/engine/pull/26205" target="_blank" rel="noopener">#26205</a>、<a href="https://github.com/flutter/engine/pull/26233" title="https://github.com/flutter/engine/pull/26233" target="_blank" rel="noopener">#26233</a>、<a href="https://github.com/flutter/engine/pull/26237" title="https://github.com/flutter/engine/pull/26237" target="_blank" rel="noopener">#26237</a>、<a href="https://github.com/flutter/engine/pull/26970" title="https://github.com/flutter/engine/pull/26970" target="_blank" rel="noopener">#26970</a>、<a href="https://github.com/flutter/engine/pull/27074" title="https://github.com/flutter/engine/pull/27074" target="_blank" rel="noopener">#27074</a>、<a href="https://github.com/flutter/engine/pull/26617" title="https://github.com/flutter/engine/pull/26617" target="_blank" rel="noopener">#26617</a>）。其中一组更新使 Flutter 能够更好地将跟踪事件与特定框架相关联，这有助于开发人员确定框架可能超出预算的原因。您可以在 DevTools Frames 图表中看到这一点，该图表已被重建为“实时”；框架在您的应用程序中呈现时填充在此图表中。从此图表中选择一个帧导航到该帧的时间线事件：</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/94f16b23503dee50ec875f2e473255d99f0fd5ff629f5364d0f3c8968111992b.png" alt="04.gif" title="">                </div>                <div class="image-caption">04.gif</div>            </figure><p>Flutter 引擎现在还可以识别时间线中的着色器编译事件。Flutter DevTools 使用这些事件来帮助您诊断应用程序中的着色器编译卡顿。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/095d7cbe442e8c506b6e8757394d87689465ffb912a511faca9dd74d494d5947.png" alt="05.png" title="">                </div>                <div class="image-caption">05.png</div>            </figure><p>DevTools 检测由于着色器编译而丢失的帧 借助这项新功能，DevTools 会检测您何时因着色器编译丢失帧，以便您可以解决问题。要像第一次一样运行您的应用程序（在填充着色器缓存之前，就像为任何用户一样），请 flutter run 与–purge-persistent-cache 标志一起使用。这会清除缓存以确保您重现用户在“首次运行”或“重新打开”(iOS) 体验中看到的环境。此功能仍在开发中，因此请<a href="https://b.corp.google.com/issues/new%3Fcomponent%3D775375%26template%3D1369639" title="https://b.corp.google.com/issues/new?component=775375&amp;template=1369639" target="_blank" rel="noopener">提交</a>您发现的<a href="https://b.corp.google.com/issues/new%3Fcomponent%3D775375%26template%3D1369639" title="https://b.corp.google.com/issues/new?component=775375&amp;template=1369639" target="_blank" rel="noopener">问题</a>的问题，或者我们可以做出的任何改进以帮助调试着色器编译卡顿。 此外，当您跟踪应用程序中的 CPU 性能问题时，您可能会被来自 Dart 和 Flutter 库和/或引擎本机代码的分析数据淹没。如果您想关闭其中任何一个以专注于您自己的代码，您可以使用新的 CPU Profiler 功能 ( <a href="https://github.com/flutter/devtools/pull/3236" title="https://github.com/flutter/devtools/pull/3236" target="_blank" rel="noopener">#3236</a> ) 来实现，该功能使您能够从任何这些来源中隐藏分析器信息。 <figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img 3324="" src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/046e0bb38d9e0e0581ddcf3e34d3e07a19b1b541baf76b7fd4bcb272efb92145.png" alt="06.png](https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/18f169bfdc53e483e4979abc3a66fa03e5e4b65f4d7076824ca2db7d99a7d9dc.png) 对于您没有过滤掉的任何类别，它们现在已经进行了颜色编码（[#3310](https://github.com/flutter/devtools/pull/3310 " https:="" github.com="" flutter="" devtools="" pull="" 3310")、[#3324](https:="" "https:="" 3324")），以便您可以轻松查看="" cpu="" 帧图表的哪些部分来自系统的哪些部分。="" ![07.png"="" title="">                </div>                <div class="image-caption">06.png](https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/18f169bfdc53e483e4979abc3a66fa03e5e4b65f4d7076824ca2db7d99a7d9dc.png) 对于您没有过滤掉的任何类别，它们现在已经进行了颜色编码（[#3310](https://github.com/flutter/devtools/pull/3310 "https://github.com/flutter/devtools/pull/3310")、[#3324](https://github.com/flutter/devtools/pull/3324 "https://github.com/flutter/devtools/pull/3324")），以便您可以轻松查看 CPU 帧图表的哪些部分来自系统的哪些部分。 ![07.png</div>            </figure> 彩色框架图，用于识别应用中的应用、原生、Dart 和 Flutter 代码活动 性能并不是您想要调试的唯一因素。此版本的 DevTools 附带了对 Widget Inspector 的更新，允许您将鼠标悬停在小部件上以评估对象、视图属性、小部件状态等。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/2d23a82bce320f3b09c307bb2b9408f573ea3d67195dde996ae76be17780e5d6.png" alt="08.png" title="">                </div>                <div class="image-caption">08.png</div>            </figure><p>而且，当您选择一个小部件时，它会自动填充在新的小部件检查器控制台中，您可以在其中浏览小部件的属性。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/f10e8902465e874e4fe8feb4f6f45075a7ac61ffc6e8540081128fdd87c044a5.png" alt="09.png" title="">                </div>                <div class="image-caption">09.png</div>            </figure><p>在断点处暂停时，您还可以从控制台计算表达式。 除了新功能外，Widget Inspector 还进行了翻新。为了让 DevTools 成为了解和调试 Flutter 应用程序的更有用的目的地，我们与芬兰的一家创意技术机构<a href="https://codemate.com/" title="https://codemate.com/" target="_blank" rel="noopener">Codemate</a>合作进行了一些更新。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/42d51a5854af7ab495df09be2a1ba3ec3555634b676786180c660682a136d9d3.png" alt="10.png" title="">                </div>                <div class="image-caption">10.png</div>            </figure><p>Flutter DevTools 优化了 UX 以提高易用性 在此屏幕截图中，您可以看到以下更改：</p><ul><li><strong>更好地传达调试切换按钮的作用</strong>——这些按钮具有新图标、面向任务的标签，以及描述它们的作用和何时使用它们的丰富工具提示。每个工具提示进一步链接到该功能的详细文档。</li><li><strong>更容易扫描和定位感兴趣的</strong>小部件——Flutter 框架中常用的小部件现在在检查器左侧的小部件树视图中显示图标。它们根据类别进一步进行颜色编码。例如，布局小部件显示为蓝色，而内容小部件显示为绿色。此外，每个文本小部件现在显示其内容的预览。</li><li><strong>对齐布局资源管理器和小部件树的配色方案</strong>- 现在可以更轻松地从布局资源管理器和小部件树中识别相同的小部件。例如，下面屏幕截图中的“列”小部件位于布局浏览器中的蓝色背景上，并且在小部件树视图中具有蓝色图标。</li></ul><p>我们很想<a href="https://github.com/flutter/devtools/issues" title="https://github.com/flutter/devtools/issues" target="_blank" rel="noopener">听听您对</a>由这些更新或我们可以做出的任何其他改进引起的任何问题<a href="https://github.com/flutter/devtools/issues" title="https://github.com/flutter/devtools/issues" target="_blank" rel="noopener">的想法</a>，以确保 DevTools 运行良好。而这些亮点仅仅是个开始。有关此版本 Flutter 的 DevTools 新功能的完整列表，请查看发行说明：</p><ul><li><a href="https://groups.google.com/g/flutter-announce/c/LSNbc2rKIjQ/m/7Y7cWgO2CQAJ" title="https://groups.google.com/g/flutter-announce/c/LSNbc2rKIjQ/m/7Y7cWgO2CQAJ" target="_blank" rel="noopener">Flutter DevTools 2.3.2 发行说明</a></li><li><a href="https://groups.google.com/g/flutter-announce/c/qenYe5LuHb8/m/tkWcBCVaAQAJ" title="https://groups.google.com/g/flutter-announce/c/qenYe5LuHb8/m/tkWcBCVaAQAJ" target="_blank" rel="noopener">Flutter DevTools 2.4.0 发行说明</a></li><li><a href="https://groups.google.com/g/flutter-announce/c/yBEZOWdV9nc/m/KCX3m2BpCAAJ" title="https://groups.google.com/g/flutter-announce/c/yBEZOWdV9nc/m/KCX3m2BpCAAJ" target="_blank" rel="noopener">Flutter DevTools 2.6.0 发行说明</a></li></ul><h3 id="IntelliJ-Android-Studio：集成测试、测试覆盖率和图标预览"><a href="#IntelliJ-Android-Studio：集成测试、测试覆盖率和图标预览" class="headerlink" title="IntelliJ/Android Studio：集成测试、测试覆盖率和图标预览"></a>IntelliJ/Android Studio：集成测试、测试覆盖率和图标预览</h3><p>Flutter 的 IntelliJ/Android Studio 插件在此版本中也进行了许多改进，首先是运行集成测试的能力 ( <a href="https://github.com/flutter/flutter-intellij/pull/5459" title="https://github.com/flutter/flutter-intellij/pull/5459" target="_blank" rel="noopener">#5459</a> )。集成测试是在设备上运行的整个应用程序测试，位于 integration_test 目录中，并使用与 testWidgets()小部件单元测试相同的功能。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/68ef3cb8915b4c7445c3fcfc9830259d8d8fbae64d7761ceec4e7784b019a6c2.png" alt="11.png" title="">                </div>                <div class="image-caption">11.png</div>            </figure><p>在 IntelliJ/Android Studio 中集成测试您的 Flutter 应用程序 要将集成测试添加到您的项目，请<a href="https://flutter.dev/docs/testing/integration-tests" title="https://flutter.dev/docs/testing/integration-tests" target="_blank" rel="noopener">按照 flutter.dev 上的说明进行操作</a>。要将测试与 IntelliJ 或 Android Studio 连接，请添加启动集成测试的运行配置并连接设备以供测试使用。运行配置可以让你运行测试，包括设置断点、步进等。 此外，Flutter 最新的 IJ/AS 插件允许您查看单元测试和集成测试运行的覆盖率信息。您可以从“调试”按钮旁边的工具栏按钮访问它：</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/363a259339319b0b59d14bd10cc4def785350af1b41cb90c57c478b66f941115.png" alt="12.png" title="">                </div>                <div class="image-caption">12.png</div>            </figure><p>覆盖信息在编辑器的装订线中使用红色和绿色条显示。在这个例子中，第 9-13 行被测试，但第 3 和 4 行没有被测试。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/931a916c00a58badcb0b79f4cae4ed06bc8761c84699e77dcec43cee2e04a6d3.png" alt="13.png" title="">                </div>                <div class="image-caption">13.png</div>            </figure><p>最新版本还包括预览来自 pub.dev 包中使用的图标的新功能，这些包是围绕 TrueType 字体文件（<a href="https://github.com/flutter/flutter-intellij/pull/5504" title="https://github.com/flutter/flutter-intellij/pull/5504" target="_blank" rel="noopener">#5504</a>、<a href="https://github.com/flutter/flutter-intellij/pull/5595" title="https://github.com/flutter/flutter-intellij/pull/5595" target="_blank" rel="noopener">#5595</a>、<a href="https://github.com/flutter/flutter-intellij/pull/5677" title="https://github.com/flutter/flutter-intellij/pull/5677" target="_blank" rel="noopener">#5677</a>、<a href="https://github.com/flutter/flutter-intellij/pull/5704" title="https://github.com/flutter/flutter-intellij/pull/5704" target="_blank" rel="noopener">#5704</a>）构建的，就像 Material 和 Cupertino 图标支持预览一样。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/d26f41074e494f4f2b2a6ae2995778e7753da146f392873f63c23a6b67a374b2.png" alt="14.png" title="">                </div>                <div class="image-caption">14.png</div>            </figure><p>IntelliJ/Android Studio 中的图标预览 要启用图标预览，您需要告诉插件您正在使用哪些软件包。插件设置/首选项页面中有一个新的文本字段：</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/fc9e115b1ace04efb542703c28a16d48e6603ba3019c84b17e870d3d41922d30.png" alt="15.png" title="">                </div>                <div class="image-caption">15.png</div>            </figure><p>请注意，这适用于在类中定义为静态常量的图标，如屏幕截图中的示例代码所示。它不适用于表达式，例如 LineIcons.addressBook()or LineIcons.values[‘code’]。如果您是不使用此功能的图标包的作者，请创建一个<a href="https://github.com/flutter/flutter-intellij/issues" title="https://github.com/flutter/flutter-intellij/issues" target="_blank" rel="noopener">问题</a>。 这是 Flutter 的 IntelliJ/Android Studio 插件的更多更新，您可以在发行说明中阅读：</p><ul><li><a href="https://groups.google.com/g/flutter-announce/c/nZPj0uIW3h4/m/2Xnx8KQtAwAJ" title="https://groups.google.com/g/flutter-announce/c/nZPj0uIW3h4/m/2Xnx8KQtAwAJ" target="_blank" rel="noopener">Flutter IntelliJ 插件 M57 发布</a></li><li><a href="https://groups.google.com/g/flutter-announce/c/WJUH0m6cu-U/m/_n0RltLFAAAJ" title="https://groups.google.com/g/flutter-announce/c/WJUH0m6cu-U/m/_n0RltLFAAAJ" target="_blank" rel="noopener">Flutter IntelliJ 插件 M58 发布</a></li><li><a href="https://groups.google.com/g/flutter-announce/c/CNzqxtybpBA/m/nSu7QabMAQAJ" title="https://groups.google.com/g/flutter-announce/c/CNzqxtybpBA/m/nSu7QabMAQAJ" target="_blank" rel="noopener">Flutter IntelliJ 插件 M59 发布</a></li><li><a href="https://groups.google.com/g/flutter-announce/c/qc40yulxvAg/m/B_1HuGmoBQAJ" title="https://groups.google.com/g/flutter-announce/c/qc40yulxvAg/m/B_1HuGmoBQAJ" target="_blank" rel="noopener">Flutter IntelliJ 插件 M60 发布</a></li></ul><h3 id="Visual-Studio-Code：依赖项、Fix-All-和-Test-Runner"><a href="#Visual-Studio-Code：依赖项、Fix-All-和-Test-Runner" class="headerlink" title="Visual Studio Code：依赖项、Fix All 和 Test Runner"></a>Visual Studio Code：依赖项、Fix All 和 Test Runner</h3><p>Flutter 的 Visual Studio Code 插件也在此版本中得到了改进，从两个新命令“Dart：添加依赖项”和“Dart：添加开发依赖项”（<a href="https://github.com/Dart-Code/Dart-Code/issues/3306" title="https://github.com/Dart-Code/Dart-Code/issues/3306" target="_blank" rel="noopener">#3306</a>，<a href="https://github.com/Dart-Code/Dart-Code/issues/3474" title="https://github.com/Dart-Code/Dart-Code/issues/3474" target="_blank" rel="noopener">#3474</a>）开始。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/c7c3d562c2181881140ae82dfecb8c2e2193d36f50b81188e46ffcc05a8bba35.png" alt="16.gif" title="">                </div>                <div class="image-caption">16.gif</div>            </figure><p>在 Visual Studio Code 中添加 Dart 依赖项 这些命令提供的功能类似于<a href="https://marketplace.visualstudio.com/items%3FitemName%3Djeroen-meijer.pubspec-assist" title="https://marketplace.visualstudio.com/items?itemName=jeroen-meijer.pubspec-assist" target="_blank" rel="noopener">Jeroen Meijer 的 Pubspec Assist 插件</a>已经提供了一段时间。这些新命令开箱即用，并提供定期从 pub.dev 获取的包类型过滤列表。 您可能还对适用于 Dart 文件的“全部修复”命令（<a href="https://github.com/Dart-Code/Dart-Code/issues/3445" title="https://github.com/Dart-Code/Dart-Code/issues/3445" target="_blank" rel="noopener">#3445</a>、<a href="https://github.com/Dart-Code/Dart-Code/issues/3469" title="https://github.com/Dart-Code/Dart-Code/issues/3469" target="_blank" rel="noopener">#3469</a>）感兴趣，并且可以一步修复所有与<a href="https://dart.dev/tools/dart-fix" title="https://dart.dev/tools/dart-fix" target="_blank" rel="noopener">dart fix</a>相同的问题。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/d9110d9bc4f2d74715a4f40eac5f6a2244059d246dfd6e15e8d21048741655e7.png" alt="17.gif" title="">                </div>                <div class="image-caption">17.gif</div>            </figure><p>使用 Flutter Fix 规则修复代码中的所有已知问题 这也可以通过添加 source.fixAll 到 editor.codeActionsOnSaveVS Code 设置来设置为在保存时运行。 或者，如果您想尝试预览功能，您可以启用该 dart.previewVsCodeTestRunner 设置并查看通过新的 Visual Studio Code 测试运行程序运行的 Dart 和 Flutter 测试。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/6d804b6919e9cdb3e635587d2886793723c36f9fd6d71f95e96d04b57afb9ea9.png" alt="18.png" title="">                </div>                <div class="image-caption">18.png</div>            </figure><p>使用新的 Visual Studio Code 测试运行程序测试您的 Dart 和 Flutter 代码 Visual Studio Code 测试运行器看起来与当前的 Dart 和 Flutter 测试运行器略有不同，它将跨会话保留结果。Visual Studio Code 测试运行器还添加了新的装订线图标，显示测试的最后状态，可以单击以运行测试（或右键单击以获取上下文菜单）。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/30e066bfd5b36f3c59a1ab8e115c2c45b83e1cc9310bb885cb0875c3bd2f8368.png" alt="19.png" title="">                </div>                <div class="image-caption">19.png</div>            </figure><p>在即将发布的版本中，现有的 Dart 和 Flutter 测试运行器将被移除，以支持新的 Visual Studio Code 测试运行器。 这只是 Visual Studio Code 新功能和修复的冰山一角。有关所有详细信息，请查看发行说明：</p><ul><li><a href="https://dartcode.org/releases/v3-26/" title="https://dartcode.org/releases/v3-26/" target="_blank" rel="noopener">v3.26</a> VS Code Test Runner 集成，Flutter 创建设置，…</li><li><a href="https://dartcode.org/releases/v3-25/" title="https://dartcode.org/releases/v3-25/" target="_blank" rel="noopener">v3.25</a>额外的依赖管理改进，修复所有文件/保存时，……</li><li><a href="https://dartcode.org/releases/v3-24/" title="https://dartcode.org/releases/v3-24/" target="_blank" rel="noopener">v3.24</a>依赖树改进，更容易启动配置，编辑器改进</li><li><a href="https://dartcode.org/releases/v3-23/" title="https://dartcode.org/releases/v3-23/" target="_blank" rel="noopener">v3.23</a> Profile Mode 改进，改进的依赖关系树，LSP 改进</li></ul><h3 id="工具：例外、新应用模板和-Pigeon-1-0"><a href="#工具：例外、新应用模板和-Pigeon-1-0" class="headerlink" title="工具：例外、新应用模板和 Pigeon 1.0"></a>工具：例外、新应用模板和 Pigeon 1.0</h3><p>在之前的 Flutter 版本中，您可能对期望未处理的异常感到沮丧，因此您可以触发调试器并找出它们的来源，结果却发现 Flutter 框架没有让异常通过以触发“未处理的调试器中的 expectation”处理程序。在此版本中，调试器现在可以在未处理的异常上正确中断，而这些异常以前刚刚被框架捕获 ( <a href="https://github.com/flutter/flutter/issues/17007" title="https://github.com/flutter/flutter/issues/17007" target="_blank" rel="noopener">#17007</a> )。这改善了调试体验，因为您的调试器现在可以将您直接指向他们代码中的抛出行，而不是指向框架深处的随机行。一个相关的新功能使您能够决定 FutureBuilder 是否应该重新抛出或吞下错误 (# <a href="https://github.com/flutter/flutter/pull/84308" title="https://github.com/flutter/flutter/pull/84308" target="_blank" rel="noopener">84308</a>）。这应该会为您提供大量额外的例外情况，以帮助您追踪 Flutter 应用程序中的问题。 自 Flutter 诞生以来，就出现了 Counter 应用模板，它具有许多优点：它展示了 Dart 语言的许多特性，展示了几个关键的 Flutter 概念，并且它足够小，可以放入单个文件中，即使有很多的解释性评论。然而，它没有为现实世界的 Flutter 应用程序提供一个特别好的起点。在此版本中，通过以下命令提供了一个新模板 ( <a href="https://github.com/flutter/flutter/pull/83530" title="https://github.com/flutter/flutter/pull/83530" target="_blank" rel="noopener">#83530</a> )： $ flutter create -t skeleton my<em>app <figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/5ca62ed8f16e6168c93f5c21ecbd49f811d7882a99eba2f318069996e42e6887.png" alt="20.gif" title="">                </div>                <div class="image-caption">20.gif</div>            </figure> </em>新的 Flutter 骨架模板在起作用_ 骨架模板生成一个遵循社区最佳实践的两页列表视图 Flutter 应用程序（带有详细信息视图）。它的开发经过大量内部和外部审查，为构建生产质量应用程序提供了更好的基础，并支持以下功能：</p><ul><li>用于 ChangeNotifier 协调多个小部件</li><li>默认情况下使用 arb 文件生成本地化</li><li>包括示例图像并为图像资产建立 1x、2x 和 3x 文件夹</li><li>使用“功能优先”的文件夹组织</li><li>支持共享首选项</li><li>支持明暗主题</li><li>支持多页面间导航</li></ul><p>随着时间的推移，随着 Flutter 最佳实践的发展，预计这个新模板也会随之发展。 另一方面，如果您正在开发插件而不是应用程序，那么您可能会对 Pigeon 的 1.0 版本感兴趣。Pigeon 是一个代码生成工具，用于在 Flutter 及其主机平台之间生成类型安全的互操作代码。它允许您定义插件 API 的描述，并为 Dart、Java 和 Objective-C（分别可用于 Kotlin 和 Swift）生成框架代码。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/616578393e56c2f5bf2d9fdf68aa5ca0c5e292dc1602a142247fd1acadfcd4be.png" alt="21.png" title="">                </div>                <div class="image-caption">21.png</div>            </figure><p>示例生成的 Pigeon 代码 Flutter 团队的一些插件中已经使用了 Pigeon。在此版本中，它提供了更多有用的错误消息，增加了对泛型、原始数据类型作为参数和返回类型以及多个参数的支持，预计将来会更频繁地使用它。如果您想在自己的插件或添加到应用程序项目中利用 Pigeon，可以在<a href="https://pub.dev/packages/pigeon" title="https://pub.dev/packages/pigeon" target="_blank" rel="noopener">Pigeon 插件页面</a>找到更多信息。</p><h3 id="重大更改和弃用"><a href="#重大更改和弃用" class="headerlink" title="重大更改和弃用"></a>重大更改和弃用</h3><p>以下是 Flutter 2.5 版本中的重大变化：</p><ul><li><a href="https://flutter.dev/docs/release/breaking-changes/default-scroll-behavior-drag" title="https://flutter.dev/docs/release/breaking-changes/default-scroll-behavior-drag" target="_blank" rel="noopener">默认拖动滚动设备</a></li><li><a href="https://flutter.dev/docs/release/breaking-changes/2-2-deprecations" title="https://flutter.dev/docs/release/breaking-changes/2-2-deprecations" target="_blank" rel="noopener">在 v2.2 之后删除了弃用的 API</a></li><li><a href="https://flutter.dev/docs/release/breaking-changes/flutter-lints-package" title="https://flutter.dev/docs/release/breaking-changes/flutter-lints-package" target="_blank" rel="noopener">引入包：flutter_lints</a></li><li><a href="https://flutter.dev/docs/release/breaking-changes/theme-data-accent-properties" title="https://flutter.dev/docs/release/breaking-changes/theme-data-accent-properties" target="_blank" rel="noopener">ThemeData 的重音属性已被弃用</a></li><li><a href="https://flutter.dev/docs/release/breaking-changes/gesture-recognizer-add-allowed-pointer" title="https://flutter.dev/docs/release/breaking-changes/gesture-recognizer-add-allowed-pointer" target="_blank" rel="noopener">手势识别器清理</a></li><li><a href="https://flutter.dev/docs/release/breaking-changes/animation-sheet-builder-display" title="https://flutter.dev/docs/release/breaking-changes/animation-sheet-builder-display" target="_blank" rel="noopener">用 collate 替换 AnimationSheetBuilder.display</a></li><li><a href="https://flutter.dev/docs/release/breaking-changes/platform-views-using-html-slots-web" title="https://flutter.dev/docs/release/breaking-changes/platform-views-using-html-slots-web" target="_blank" rel="noopener">使用 HTML 插槽在 Web 中呈现平台视图</a></li><li><a href="https://github.com/flutter/flutter/pull/80756" title="https://github.com/flutter/flutter/pull/80756" target="_blank" rel="noopener">将 LogicalKeySet 迁移到 SingleActivator</a></li></ul><p>有关自 1.17 版本以来重大更改的完整列表，<a href="https://flutter.dev/docs/release/breaking-changes" title="https://flutter.dev/docs/release/breaking-changes" target="_blank" rel="noopener">请参阅 flutter.dev</a>。 随着我们继续更新 Flutter Fix（在您的 IDE 中和通过 dart fix 命令可用），我们总共有 157 条规则来自动迁移受这些或过去的重大更改以及任何弃用影响的代码。一如既往，非常感谢社区<a href="https://github.com/flutter/tests/blob/master/README.md" title="https://github.com/flutter/tests/blob/master/README.md" target="_blank" rel="noopener">贡献测试</a>，他们帮助我们识别这些重大变化。要了解更多信息，请查看<a href="https://github.com/flutter/flutter/wiki/Tree-hygiene%23handling-breaking-changes" title="https://github.com/flutter/flutter/wiki/Tree-hygiene#handling-breaking-changes" target="_blank" rel="noopener">我们的重大变更政策</a>。 此外，随着 Flutter 2.5 的发布，我们将弃用<a href="http%3A//flutter.dev/go/rfc-ios8-deprecation" title="http://flutter.dev/go/rfc-ios8-deprecation">2020 年 9 月宣布的</a>对 iOS 8 的支持。放弃对市场份额不到 1% 的 iOS 8 的支持，使 Flutter 团队能够专注于更广泛使用的新平台。弃用意味着这些平台可以工作，但我们不会在这些平台上测试 Flutter 的新版本或插件。您可以<a href="https://flutter.dev/docs/development/tools/sdk/release-notes/supported-platforms" title="https://flutter.dev/docs/development/tools/sdk/release-notes/supported-platforms" target="_blank" rel="noopener">在 flutter.dev 上查看当前支持的 Flutter 平台列表</a>。</p><h3 id="概括"><a href="#概括" class="headerlink" title="概括"></a>概括</h3><p>最后，一如既往地感谢世界各地的 Flutter 社区让这一切成为可能。对于在此更新中贡献和审查了 1000 个 PR 的数百名开发人员，这里是您每项努力的成果。我们正在共同努力为世界各地的开发人员转变应用程序开发流程，以便您可以从单个代码库中交付更多、更快、部署到您关心的平台。 请继续关注 Google Flutter 团队的更多更新。今年还没有结束！</p><blockquote><p><a href="https://medium.com/flutter/whats-new-in-flutter-2-5-6f080c3f3dc" title="https://medium.com/flutter/whats-new-in-flutter-2-5-6f080c3f3dc" target="_blank" rel="noopener">原文链接： What’s new in Flutter 2.5</a></p></blockquote><hr><p>© 猫哥</p><ul><li><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p></li><li><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p></li><li><p>微信群 ducafecat</p></li><li><p>b 站 <a href="https://space.bilibili.com/404904528" target="_blank" rel="noopener">https://space.bilibili.com/404904528</a></p></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.tech/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter HeroMode Widget 动画转场组件</title>
    <link href="https://blog.ducafecat.tech/2021/09/09/translation/heromode-widget-in-flutter/"/>
    <id>https://blog.ducafecat.tech/2021/09/09/translation/heromode-widget-in-flutter/</id>
    <published>2021-09-08T16:00:00.000Z</published>
    <updated>2021-09-08T14:39:11.996Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-09-08-22-37-25.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://medium.com/flutterdevs/heromode-widget-in-flutter-9fac046fbf86" target="_blank" rel="noopener">https://medium.com/flutterdevs/heromode-widget-in-flutter-9fac046fbf86</a></p></blockquote><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/flutter-devs/flutter_heromode_demo" target="_blank" rel="noopener">https://github.com/flutter-devs/flutter_heromode_demo</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://flutter.dev" target="_blank" rel="noopener">https://flutter.dev</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/32acb7208d1e0d71fa12197ab96bcbc1859decd8fd79ab730e87974bc7904b3d.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>在 Flutter 中，Flutter 应用程序屏幕上的每个组件都是一个小工具。屏幕的透视图完全依赖于用于构建应用程序的小部件的选择和分组。此外，应用程序代码的结构是一个小部件树。</p><p>在本博客中，我们将了解 HeroMode 小部件及其在 flutter 中的功能。我们将在这个 HeroMode 小部件的演示程序的实现中看到。</p><blockquote><p>“ Flutter 是谷歌的 UI 工具包，它可以帮助你在创纪录的时间内用一个代码库为移动设备、网络和桌面构建漂亮的本地组合应用程序。”</p></blockquote><p>它是免费和开源的。它最初是由谷歌发展而来，目前由 ECMA 标准监管。 Flutter 应用程序利用达特编程语言来制作应用程序。这个 dart 编程和其他编程语言有一些相同的亮点，比如 Kotlin 和 Swift，并且可以被转换成 JavaScript 代码。</p><blockquote><p>如果你想探索更多关于 Flutter ，请访问 Flutter 的官方网站，以获得更多的信息。 <a href="https://flutter.dev/" target="_blank" rel="noopener"><strong><em>Flutter’s official website</em></strong></a></p></blockquote><blockquote><p>以下这些公司和产品正在使用 Flutter —— Flutter 展示</p></blockquote><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/8f50977cf5496998ae96200efe3f9ec7411bc57883bfaba12216e3d5ff702603.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="HeroMode-小部件"><a href="#HeroMode-小部件" class="headerlink" title="HeroMode 小部件"></a>HeroMode 小部件</h3><p>Hero 小部件是一个伟大的开箱即用的动画，用于通信小部件从一个页面飞到另一个页面的导航动作。英雄动画是两个不同页面之间共享的元素过渡(动画)。现在来看看这个，想象一个超级英雄在行动中飞行。例如，您必须有一个图像列表。当我们用英雄标签包装它的时候。现在我们点击一个项目清单。而且当被敲击时。然后图像列表项目的土地其位置在详细页面。当我们取消它并返回到列表页面，然后 hero 小部件返回到它的页面。</p><p>HeroMode 小部件具有动画功能，可以在两个屏幕之间启用或禁用元素。基本上，当你想禁用 Hero 小部件的动画功能时，这个小部件是必需的。如果您想了解 Hero 模式小部件，那么首先您需要了解 Hero 小部件。</p><p>是 Hero 小部件的一部分，引入这个小部件的目的是启用和禁用 Hero 小部件的动画—- 如果你不想在两个屏幕之间动画元素，然后用 HeroMode 小部件包装 Hero 小部件，我们可以通过使用它们的静态属性或动态地启用和禁用它们，然后通过包装这个小部件，当你仔细看下面的例子视频时发生了什么，那么你就可以看到这个动画中的可衡量的区别。</p><blockquote><p>演示模块:</p></blockquote><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/552359ab23d3c57a42c46bffa11a28c46effa90f200feccd0d7578f4445e90f4.gif" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="如何实现-dart-文件中的代码"><a href="#如何实现-dart-文件中的代码" class="headerlink" title="如何实现 dart 文件中的代码:"></a>如何实现 dart 文件中的代码:</h3><blockquote><p>你需要分别在你的代码中实现它:</p></blockquote><p>首先，我为集合创建了一个 ViewModel 类，并在开关按钮上获得一个布尔值。这是我在 HeroMode Widget 中通过的。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">bool</span> _isHeroModeEnable= <span class="keyword">true</span>;</span><br><span class="line"><span class="built_in">bool</span> <span class="keyword">get</span> isHeroModeEnable =&gt; _isHeroModeEnable;<span class="keyword">set</span> isHeroModeEnable(<span class="built_in">bool</span> value) &#123;</span><br><span class="line">  _isHeroModeEnable = value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当我们运行应用程序时，我们应该得到屏幕的输出，就像下面的屏幕截图一样。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/5850f7b2e53a2bb37b51f6542628196bb079024a171eaa476982c05304c9ef86.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>然后，我必须添加一个文本和开关按钮来显示 HeroMode 小部件的启用和禁用功能。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">Widget buildCategoriesSection() &#123;</span><br><span class="line">  <span class="keyword">return</span> Container(</span><br><span class="line">    padding: EdgeInsets.only(left: <span class="number">20</span>),</span><br><span class="line">    child: Row(</span><br><span class="line">      _<span class="comment">//mainAxisAlignment: MainAxisAlignment.center,_ children: [</span></span><br><span class="line">        Container(</span><br><span class="line">          child: Text(<span class="string">"Hero Mode"</span>,</span><br><span class="line">            style: TextStyle(</span><br><span class="line">                color: Colors._white_,</span><br><span class="line">              fontSize: <span class="number">18</span>,</span><br><span class="line">              fontWeight: FontWeight._bold_ ),),</span><br><span class="line">        ),</span><br><span class="line">        Switch(</span><br><span class="line">          value: model!=<span class="keyword">null</span> &amp;&amp; model!.isHeroModeEnable,</span><br><span class="line">          onChanged:(value)&#123;</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">"value:$value"</span>);</span><br><span class="line">            model!.isHeroModeEnable=value;</span><br><span class="line">          &#125;,  activeTrackColor: Color(ColorConstants._light_blue_),</span><br><span class="line">         activeColor: Color(ColorConstants._pure_white_),</span><br><span class="line">        ),</span><br><span class="line"></span><br><span class="line">      ],</span><br><span class="line">    ),</span><br><span class="line">  );&#125;</span><br></pre></td></tr></table></figure><p>然后，我用电影标题 API 创建了一个列表视图，但是您可以根据需要为测试目的使用一个虚拟图像列表。在此之后，我用 Hero 小部件包装图像，用 HeroMode 小部件包装 Hero 小部件。禁用 Hero 小部件的动画。基本上，这是一个媒介，以启用和禁用动画的英雄小部件。您不能直接从 Hero Widget 禁用动画。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">Widget _buildPopularSection() &#123;</span><br><span class="line">  <span class="keyword">return</span> Container(</span><br><span class="line">    height: <span class="number">300</span>,</span><br><span class="line">    padding: EdgeInsets.only(left: <span class="number">20</span>, top: <span class="number">5</span>),</span><br><span class="line">    width: MediaQuery._of_(context).size.width,</span><br><span class="line">    child: model != <span class="keyword">null</span> &amp;&amp; model!.isPopularLoading ? Center(child: CircularProgressIndicator())</span><br><span class="line">        : Provider.value(</span><br><span class="line">            value: Provider._of_&lt;HomeViewModel&gt;(context),</span><br><span class="line">            child: Consumer(</span><br><span class="line">              builder: (context, value, child) =&gt; Container(</span><br><span class="line">                child: ListView.builder(</span><br><span class="line">                  shrinkWrap: <span class="keyword">true</span>,</span><br><span class="line">                  itemCount: model != <span class="keyword">null</span> &amp;&amp;   model!.popularMovies != <span class="keyword">null</span> ? model!.popularMovies!.results!.length : <span class="number">0</span>,</span><br><span class="line">                  scrollDirection: Axis.horizontal,</span><br><span class="line">                  itemBuilder: (context, index) &#123;</span><br><span class="line">                    <span class="keyword">return</span> _buildPopularItem(</span><br><span class="line">                        index, model!.popularMovies!.results![index]);</span><br><span class="line">                  &#125;,</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">  );</span><br><span class="line">&#125;Widget _buildPopularItem(<span class="built_in">int</span> index, Results result) &#123;</span><br><span class="line">  <span class="keyword">return</span> GestureDetector(</span><br><span class="line">    onTap: () &#123;</span><br><span class="line">      Navigator._push_(</span><br><span class="line">        context,</span><br><span class="line">        MaterialPageRoute(</span><br><span class="line">            builder: (context) =&gt; MovieDetailView(movieDataModel: result)),</span><br><span class="line">      );</span><br><span class="line">    &#125;,</span><br><span class="line">    child: Column(</span><br><span class="line">      crossAxisAlignment: CrossAxisAlignment.start,</span><br><span class="line">      children: [</span><br><span class="line">        Container(</span><br><span class="line">          height: <span class="number">200</span>,</span><br><span class="line">          width: <span class="number">150</span>,</span><br><span class="line">          margin: EdgeInsets.only(right: <span class="number">16</span>),</span><br><span class="line">          child: HeroMode(</span><br><span class="line">            child: Hero(</span><br><span class="line">                tag: <span class="string">'<span class="subst">$&#123;result.id&#125;</span>'</span>,</span><br><span class="line">              child: ClipRRect(</span><br><span class="line">                borderRadius: BorderRadius.circular(<span class="number">25.0</span>),</span><br><span class="line">                child: Image.network(</span><br><span class="line">                  Constants._IMAGE_BASE_URL_ +</span><br><span class="line">                      Constants._IMAGE_SIZE_1_ +</span><br><span class="line">                      <span class="string">'<span class="subst">$&#123;result.posterPath&#125;</span>'</span>,</span><br><span class="line">                  fit: BoxFit.cover,</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">            enabled: <span class="keyword">true</span>,</span><br><span class="line">            _<span class="comment">//enabled:model.isHeroModeEnabled,_ ),</span></span><br><span class="line">        ),</span><br><span class="line">        SizedBox(</span><br><span class="line">          height: <span class="number">18</span>,</span><br><span class="line">        ),</span><br><span class="line">        Container(</span><br><span class="line">          child: Text(</span><br><span class="line">            result.title!,</span><br><span class="line">            style: TextStyle(color: Colors._white_, fontSize: <span class="number">15</span>),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">        SizedBox(</span><br><span class="line">          height: <span class="number">5</span>,</span><br><span class="line">        ),</span><br><span class="line">        Container(</span><br><span class="line">          child: GFRating(</span><br><span class="line">            value: _rating,</span><br><span class="line">            color: Color(ColorConstants._orange_),</span><br><span class="line">            size: <span class="number">16</span>,</span><br><span class="line">            onChanged: (value) &#123;</span><br><span class="line">              setState(() &#123;</span><br><span class="line">                _rating = value;</span><br><span class="line">              &#125;);</span><br><span class="line">            &#125;,</span><br><span class="line">          ),</span><br><span class="line">        )</span><br><span class="line">      ],</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当我们运行应用程序时，我们应该得到屏幕的输出，就像下面的屏幕截图一样。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/32cb67fba60c454e198547ddecd729b94323d90bfaecbc49beb6223b3f8f9e3b.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>最后，我创建了第二个省道文件，在这个文件中，我制作了一个方法来显示图像动画。然后使用相同标记的 Hero 小部件包装图像。当您有多个图像时，然后传递图像列表 id。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">Widget _buildMovieBanner(Results movieItems) &#123;</span><br><span class="line">  <span class="keyword">return</span> Container(</span><br><span class="line">    height: <span class="number">380</span>,</span><br><span class="line">    child: Stack(</span><br><span class="line">      children: [</span><br><span class="line">        Positioned(</span><br><span class="line">          top: <span class="number">20</span>,</span><br><span class="line">          child: Container(</span><br><span class="line">            height: <span class="number">350</span>,</span><br><span class="line">            width: <span class="number">240</span>,</span><br><span class="line">            margin: EdgeInsets.only(left: <span class="number">28</span>, right: <span class="number">30</span>),</span><br><span class="line">            decoration: BoxDecoration(</span><br><span class="line">              borderRadius: BorderRadius.circular(<span class="number">22</span>),</span><br><span class="line">              color: Color(ColorConstants._saphire_blue2_),</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">        Positioned(</span><br><span class="line">          top: <span class="number">10</span>,</span><br><span class="line">          child: Container(</span><br><span class="line">            height: <span class="number">350</span>,</span><br><span class="line">            width: <span class="number">250</span>,</span><br><span class="line">            margin: EdgeInsets.only(left: <span class="number">22</span>, right: <span class="number">25</span>),</span><br><span class="line">            decoration: BoxDecoration(</span><br><span class="line">              borderRadius: BorderRadius.circular(<span class="number">22</span>),</span><br><span class="line">              color: Color(ColorConstants._cobaltBlue_),</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">        Container(</span><br><span class="line">          height: <span class="number">350</span>,</span><br><span class="line">          width: <span class="number">260</span>,</span><br><span class="line">          margin: EdgeInsets.only(left: <span class="number">16</span>, right: <span class="number">16</span>),</span><br><span class="line">          decoration: BoxDecoration(</span><br><span class="line">            borderRadius: BorderRadius.circular(<span class="number">20</span>),</span><br><span class="line">          ),</span><br><span class="line">          child: ClipRRect(</span><br><span class="line">            borderRadius: BorderRadius.circular(<span class="number">24</span>),</span><br><span class="line">            child: Hero(</span><br><span class="line">              tag: <span class="string">'<span class="subst">$&#123;widget.movieDataModel.id&#125;</span>'</span>,</span><br><span class="line">              child: Image.network(</span><br><span class="line">                Constants._IMAGE_BASE_URL_ +</span><br><span class="line">                    Constants._IMAGE_SIZE_1_ +</span><br><span class="line">                    widget.movieDataModel.posterPath!,</span><br><span class="line">                fit: BoxFit.cover,</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ],</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="结语"><a href="#结语" class="headerlink" title="结语:"></a>结语:</h2><p>In this article, I have explained the basic overview of the HeroMode Widget in a flutter, you can modify this code according to your choice. This was a small introduction to HeroMode Widget On User Interaction from my side, and it’s working using Flutter.</p><p>在本文中，我已经简单介绍了 HeroMode 小部件的基本概况，您可以根据自己的选择修改这段代码。这是一个小的介绍 HeroMode 小部件用户交互从我这边，它的工作使用 Flutter。</p><p>I hope this blog will provide you with sufficient information on Trying up the Explore, HeroMode Widget in your flutter projects<strong>.</strong></p><p>我希望这个博客将提供您尝试在您的 Flutter 项目的探索，HeroMode 小部件充足的信息。</p><p>❤ ❤ Thanks for reading this article ❤❤</p><p>❤ Thanks for reading this article ❤❤</p><p>If I got something wrong\? Let me know in the comments. I would love to improve.</p><p>如果我做错了什么，请在评论中告诉我，我很乐意改进。</p><p>Clap 👏 If this article helps you.</p><p>鼓掌如果这篇文章对你有帮助的话。</p><h2 id="GitHub-链接"><a href="#GitHub-链接" class="headerlink" title="GitHub 链接"></a>GitHub 链接</h2><p><a href="https://github.com/flutter-devs/flutter_heromode_demo" target="_blank" rel="noopener">https://github.com/flutter-devs/flutter_heromode_demo</a></p><hr><p>© 猫哥</p><ul><li><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p></li><li><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p></li><li><p>微信群 ducafecat</p></li><li><p>b 站 <a href="https://space.bilibili.com/404904528" target="_blank" rel="noopener">https://space.bilibili.com/404904528</a></p></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.tech/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Windows Flutter 开发环境的建立</title>
    <link href="https://blog.ducafecat.tech/2021/09/08/translation/setting-up-flutter-development-environment-for-windows-vs-code/"/>
    <id>https://blog.ducafecat.tech/2021/09/08/translation/setting-up-flutter-development-environment-for-windows-vs-code/</id>
    <published>2021-09-07T16:00:00.000Z</published>
    <updated>2021-09-07T09:32:44.679Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-09-07-17-32-43.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://srihari-sundaramurugan.medium.com/setting-up-flutter-development-environment-for-windows-vs-code-93820f4caa57" target="_blank" rel="noopener">https://srihari-sundaramurugan.medium.com/setting-up-flutter-development-environment-for-windows-vs-code-93820f4caa57</a></p></blockquote><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><blockquote><p>作为一个开发人员，我一直想尝试 flutter 已经很久了。当我开始使用 Flutter 时，设置它花费了我大量的时间，我不得不通过各种教程和文章来设置开发环境。我写这篇博客是因为我不想让我的开发同事们在这个过程中面对我不得不面对的错误。</p></blockquote><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/c8fae13f1b6e9207d47a8438764a7aec57480872f6dc52336bf6a2aed3154667.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="系统要求"><a href="#系统要求" class="headerlink" title="系统要求:"></a>系统要求:</h2><p>要安装和运行 Flutter，您的开发环境必须满足以下最低要求:</p><ul><li><strong>Operating Systems 操作系统</strong>: Windows 7 SP1 或更高版本(64 位) ，基于 x86-64</li><li><strong>Disk Space 磁盘空间</strong>: 1.64 GB (不包括 IDE/工具的磁盘空间)</li><li><strong>Tools 工具</strong> : Flutter 取决于这些工具在您的环境中是否可用</li><li><a href="https://docs.microsoft.com/en-us/powershell/scripting/install/installing-windows-powershell" target="_blank" rel="noopener">Windows PowerShell 5.0</a> or newer (this is pre-installed with Windows 10) 或更新(这是预装 Windows 10)</li><li><a href="https://git-scm.com/download/win" target="_blank" rel="noopener">Git for Windows 适用于 Windows 的 Git</a> 2. x, with the 2. x，加上<strong>Use Git from the Windows Command Prompt 使用命令提示符的 Git</strong> option. 选择</li><li>如果已经安装了 Git for Windows，请确保您可以运行<code>git</code> 命令来自命令提示符或 PowerShell</li></ul><h1 id="需要下载-安装的东西"><a href="#需要下载-安装的东西" class="headerlink" title="需要下载/安装的东西:"></a>需要下载/安装的东西:</h1><p>以下是您在此过程中将要下载/安装的内容:</p><ul><li><strong>Flutter Flutter</strong> SDK</li></ul><blockquote><p>软件开发软件开发工具包</p></blockquote><ul><li><strong>Andriod Studio</strong></li><li><strong>Java SE</strong> Development Kit 开发工具包</li><li><strong>Git 饭桶</strong>for windows 为了窗户</li><li><strong>VS Code VS 代码</strong> (Visual Studio Code)</li></ul><blockquote><p>我们开始吧？</p></blockquote><h2 id="Flutter-SDK-软件开发工具包"><a href="#Flutter-SDK-软件开发工具包" class="headerlink" title="Flutter SDK (软件开发工具包) :"></a>Flutter SDK (软件开发工具包) :</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/528da7c315fd64c6963a9529e57f90f3a005b6d732914540ead9eb3270cbc0b6.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>A clip from 一个剪辑自<a href="https://flutter.dev/docs/get-started/install/windows" target="_blank" rel="noopener">https://flutter.dev/docs/get-started/install/windows</a></p><p>您可以从正式的 Flutter 安装文档中下载 Flutter SDK 的最新稳定版本。目前 windows 的稳定版本是 2.2.3-stable，当你阅读这篇博客时可能会有所不同。下载当时可用的最新版本。</p><ul><li>. zip 中提取 Flutter SDK</li><li>在你的 c 盘中创建一个文件夹<code>C:\src</code> 并粘贴提取的 Flutter SDK</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/1336b4381497954d6c5a5c3958b51a6ca1099af8a1fb513c64dd938c0ff05c3b.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>C 驱动下的 Flutter SDK</p><ul><li>现在进入 Flutter 文件夹，然后进入垃圾箱</li><li>复制垃圾桶的路径</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/9ff69420d5a03e1d60e360f8fb48b2c9e805d4166cb2a030bbec3ca3bee8313d.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>打开窗口搜索并键入<code>env</code>.</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/93ded20c98806cdf0119634814314a0bc7a026e2ffbddada4042522b2ecebc16.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>现在打开“编辑环境变量为您的帐户”</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/d4a3821c825e36677f5dc4d2762fe5c5afede101827d539c8bbc19cb745cb67c.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>双击<code>path</code></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/2c2d9a0adce17303ed350a325dadf55ab507dda076d0f8d48c36702640461b21.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>Click 点击<code>New</code> 并粘贴的路径<code>flutter\bin</code> 然后按「确定」</li><li>现在，打开 cmd (或任何终端窗口)并输入以下命令</li></ul><p><code>dart where flutter dart</code></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/81878f1cf6c17c252104f7c28299d31a2beac02688b10b71d34d414992da8cc5.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>如果您得到了 Flutter 和省道文件的位置，您已经成功地安装了 Flutter SDK 并设置了它的路径。</p><h2 id="Java-SE-开发工具包"><a href="#Java-SE-开发工具包" class="headerlink" title="Java SE 开发工具包:"></a><strong>Java SE</strong> 开发工具包:</h2><blockquote><p>如果您的 pc 上已经安装了 JDK，请确保将其设置为“ JAVA.home”路径。</p></blockquote><p><strong>现在，让我们设置 java se:</strong></p><ul><li>Download “Java SE 8” from 从网站下载「 javase8」<a href="https://www.oracle.com/java/technologies/javase/javase-jdk8-downloads.html" target="_blank" rel="noopener">JDK SE 8 DOWNLOAD 8 DOWNLOAD</a>.</li><li>Under “Java SE Development Kit 8u301”, you’ll see this 在“ javase 开发工具包 8u301”下，您将看到这个</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/bc96265feb8f73b23292d48d8818a69a9e2cb82cf40790380d42e39fc2923585.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p><a href="https://www.oracle.com/java/technologies/javase/javase-jdk8-downloads.html" target="_blank" rel="noopener">https://www.oracle.com/java/technologies/javase/javase-jdk8-downloads.html</a></p><ul><li>下载并安装 x64/x86 w.r.t. 您的 PC 的规范</li><li>安装后，导航到 <code>\bin</code> : 在我的案例中:</li></ul><p><code>dart C:Program FilesJavajdk1.8.0_301bin</code></p><ul><li>复制路径，打开“编辑环境变量为您的帐户”</li><li>创建一个新变量<code>JAVA_HOME</code> .</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/abfc757e152824f4f22d4a41b068ec9e7fc1fe1b78f14f947df8535cdd94dc5b.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>JAVA_HOME Environment Variable 环境变量</p><p>您已经完成了 JDK 的设置</p><h2 id="Andriod-Studio"><a href="#Andriod-Studio" class="headerlink" title="Andriod Studio:"></a>Andriod Studio:</h2><blockquote><p>我们正在下载 andriod studio 来建立 andriod 模拟器。</p></blockquote><ul><li>下载 Andriod Studio<a href="https://developer.android.com/studio" target="_blank" rel="noopener">ANDRIOD STUDIO</a>.</li><li>Install it. 安装它</li><li>现在，打开 CMD/Terminal，运行以下命令:</li></ul><p><code>dart flutter doctor</code></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/62084fbc0c62df82f04a07364703ea39b72a72c04c9aa624c6473c5c6bb0c3dc.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><blockquote><p>你可能不会得到绿蜱的一切，检查只有 andriod 工作室，因为现在。</p></blockquote><ul><li>如果 Flutter 找不到它，就跑 <code>flutter config --android-studio-dir &lt;directory&gt;</code> 设置 Android Studio 安装的目录</li><li>打开 Andriod Studio</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/792bb40366aba820edd5aec1d8a3b7c73f797e6e3c8675e6928d135ff354156c.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><blockquote><p>如果你想在 Andriod Studio 开发应用程序,</p><p>- Go to plugins, search for “Dart” and “Flutter”.</p><p>- 下载它们，并重新启动 andriod studio。现在你可以在仪表板上看到一个“创建新的 Flutter 项目”。</p></blockquote><ul><li>Select 选择 <code>More Actions</code>.</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/0ec615045f383a6ed9893c0d3fc9c6f996e0a3705117e564451d755f5e8fa1ee.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>Andriod Studio</p><ul><li>Choose 选择<code>AVD Manager</code> .</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/b4534218f41630a78d555cd6b4d0ef3da6ece5bc87b8e7a9a112033a40ab8110.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>AVD Manager — Andriod Studio</p><ul><li>Click 点击<code>+ Create Virtual Device…</code> .</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/3fa7890b0537419b29e57300385be62a8a621da82f325bd34e725d33ef259844.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>Create Virtual Device — AVD Manager — Andriod Studio</p><ul><li>选择一个你喜欢的 Andriod 设备，然后点击下一步</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/97d86ce409f48f9cf11eb21aa54efa74f0c6b5d98d6e11bad5e1447ca16b4a0a.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>Create Virtual Device — AVD Manager — Andriod Studio</p><ul><li>点击下载你想要的 Andriod 版本<code>Download</code> (blue), under (蓝色) ，在下面<code>Release Name</code> .</li><li>一旦下载完毕，点击下一步</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/3a3171298be84fe19e782193cf2bb626c4b2760cc5a8f7f93eacd1677cac5f89.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>Create Virtual Device — AVD Manager — Andriod Studio</p><ul><li>Now, Finish. 现在，完成</li></ul><p>🍻Cheers to you, you’re almost done!. 🥳</p><p>为你干杯，你就快完成了</p><h2 id="Visual-Studio-代码"><a href="#Visual-Studio-代码" class="headerlink" title="Visual Studio 代码:"></a>Visual Studio 代码:</h2><blockquote><p>向我最喜欢的 IDE 问好！</p></blockquote><ul><li>Download VS Code from 下载 VS 代码<a href="https://code.visualstudio.com/download" target="_blank" rel="noopener">VS CODE DOWNLOAD VS 代码下载</a>.</li><li>安装并打开 VS 代码</li><li>开放式扩展</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/bcae04a74a9ddfb3eaee8dadb750a53a43289289e84b82b2451673483badd1ef.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>Extensions — VS Code</p><ul><li>Search for 搜寻<code>Flutter</code> in the extensions, and install this: 然后安装这个:</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/d37562009b2c5170fdf4c107ee7d1b90747ca85a7212a85fa69530e841c89371.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>VS Code Flutter 扩展</p><blockquote><p>好了，一切都结束了。现在，是时候给心房 Flutter 医生做检查了。</p></blockquote><ul><li>打开 CMD/终端，然后运行</li></ul><p><code>dart flutter doctor</code></p><ul><li>您可能仍然有一个未检查的框</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/010a6535f853385b994c9fcd76bdd489228f49b5f83207011e54899d170cc55a.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>Flutter Doctor Flutter</p><ul><li>在你的终端上运行这个命令,</li></ul><p><code>dart flutter doctor \--andriod-licenses</code></p><ul><li>Now, run 现在，跑吧<code>flutter doctor</code> again. 再一次</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.oss-cn-beijing.aliyuncs.com/podcast/0b5a21e4827f6085be4eac4ee4d2d18804a04a3a1634c1fa07cd99ad68d8ef3d.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>Flutter Doctor Flutter</p><blockquote><p>Yipieee，现在你已经准备好开发 Flutter 应用程序了。</p></blockquote><p>写博客会让我感到快乐，并鼓励我写更多这样的博客。</p><hr><p>© 猫哥</p><ul><li><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p></li><li><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p></li><li><p>微信群 ducafecat</p></li><li><p>b 站 <a href="https://space.bilibili.com/404904528" target="_blank" rel="noopener">https://space.bilibili.com/404904528</a></p></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.tech/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 的 keyboard_actions 插件</title>
    <link href="https://blog.ducafecat.tech/2021/09/06/translation/keyboard-actions-in-flutter/"/>
    <id>https://blog.ducafecat.tech/2021/09/06/translation/keyboard-actions-in-flutter/</id>
    <published>2021-09-05T16:00:00.000Z</published>
    <updated>2021-09-05T13:40:45.726Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-09-05-21-39-17.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://medium.com/flutterdevs/keyboard-actions-in-flutter-ae4781286806" target="_blank" rel="noopener">https://medium.com/flutterdevs/keyboard-actions-in-flutter-ae4781286806</a></p></blockquote><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/flutter-devs/KeyboardAction" target="_blank" rel="noopener">https://github.com/flutter-devs/KeyboardAction</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://pub.dev/packages/keyboard_actions" target="_blank" rel="noopener">https://pub.dev/packages/keyboard_actions</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><p>了解如何在您的 Flutter 应用程序自定义默认键盘</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-09-05-21-28-04.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>Flutter 中的键盘动作</p><p>安卓/IoS 提供的键盘没有隐藏键盘的按钮，这给用户带来了很多不便。当我们的应用程序有许多需要在工具栏上显示操作键和处理定义为字段的函数的 textfield 时。键盘操作是当用户点击当前字段时指示该字段操作的键。</p><p>在这篇文章中，我将演示如何使用包含字段的表单输入在应用程序中显示键盘操作。我们还将实现一个演示程序，并使用包 <code>keyboard action</code> 来演示这些特性。我试图用一种简单的方式来解释我的项目</p><h1 id="简介"><a href="#简介" class="headerlink" title="简介:"></a>简介:</h1><p><code>KEYBOARD_ACTION</code> 提供了几个软件包，使您的设备键盘可定制。今天，我们讨论 KEYBOARD action。在 iOS 中有一个众所周知的问题，当我们使用数字输入字段时，它不会显示键盘内部/上方的完成按钮。因此，键盘操作提供了各种功能，有助于克服用户和开发人员目前面临的问题。</p><p><a href="https://pub.dev/packages/keyboard_actions" target="_blank" rel="noopener">https://pub.dev/packages/keyboard_actions</a></p><blockquote><p>特点:</p></blockquote><ul><li>完成键盘按钮(您可以自定义按钮)</li><li>在文本字段之间上下移动(可以隐藏设置)<code>nextFocus: false</code>).</li><li>键盘栏定制</li><li>键盘栏下方的自定义页脚小部件</li><li>用简单的方法创建你自己的键盘</li><li>你可以在安卓、 iOS 或者两个平台上使用它</li><li>与对话框兼容</li></ul><h1 id="设立项目"><a href="#设立项目" class="headerlink" title="设立项目:"></a>设立项目:</h1><p><strong>第一步:</strong> 使用包装</p><h2 id="keyboard-actions-Flutter-Package"><a href="#keyboard-actions-Flutter-Package" class="headerlink" title="keyboard_actions | Flutter Package"></a>keyboard_actions | Flutter Package</h2><h2 id="键盘操作-Flutter-Package"><a href="#键盘操作-Flutter-Package" class="headerlink" title="键盘操作 | Flutter Package"></a>键盘操作 | Flutter Package</h2><h3 id="以一种简单的方式为-Android-iOS-键盘添加特性。因为安卓-iOS-提供的键盘"><a href="#以一种简单的方式为-Android-iOS-键盘添加特性。因为安卓-iOS-提供的键盘" class="headerlink" title="以一种简单的方式为 Android/iOS 键盘添加特性。因为安卓/iOS 提供的键盘.."></a>以一种简单的方式为 Android/iOS 键盘添加特性。因为安卓/iOS 提供的键盘..</h3><p>pub.dev</p><p><a href="https://pub.dev/packages/keyboard_actions" target="_blank" rel="noopener">https://pub.dev/packages/keyboard_actions</a></p><p>在 pubspec.yaml 文件的依赖关系中添加 youtube player_iframe 插件，然后运行 \$flutter pub get 命令。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dependencies:</span><br><span class="line">  keyboard_actions: ^<span class="number">3.4</span><span class="number">.4</span></span><br></pre></td></tr></table></figure><p><strong>步骤 2:</strong> 将包导入为</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:keyboard_actions/keyboard_actions.dart'</span>;</span><br></pre></td></tr></table></figure><h1 id="Code-Implementation"><a href="#Code-Implementation" class="headerlink" title="Code Implementation:"></a><strong><em>Code Implementation:</em></strong></h1><h1 id="代码实施"><a href="#代码实施" class="headerlink" title="代码实施:"></a>代码实施:</h1><p><strong>1.</strong> 创建一个新的 dart 文件，名为<code>home_screen.dart</code> . 文件夹来设计用户界面，并编写您希望在项目中实现的逻辑</p><p><strong>2.</strong> 我在 flutter demo 项目中构建了长长的 Forms，并在 Android 上运行了这个应用程序。如果我们使用的是 IOS 设备，那么它不会显示<strong>done 完成</strong> 在 iOS 系统中，当我们使用数字输入字段时，在 Android 系统中，键盘内/上方的按钮不会显示</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">Card(</span><br><span class="line">  shape: RoundedRectangleBorder(</span><br><span class="line">    borderRadius: BorderRadius.circular(<span class="number">10.0</span>),</span><br><span class="line">  ),</span><br><span class="line">  elevation: <span class="number">8.0</span>,</span><br><span class="line">  child: Container(</span><br><span class="line">    padding: EdgeInsets.only(left: <span class="number">12</span>),</span><br><span class="line">    child: Form(</span><br><span class="line">      key: _formKey,</span><br><span class="line">      child: SingleChildScrollView(</span><br><span class="line">        child: Column(</span><br><span class="line">          children: &lt;Widget&gt;[</span><br><span class="line">            TextFormField(</span><br><span class="line">              decoration: InputDecoration(</span><br><span class="line">                  labelText: <span class="string">'Input Number with Custom Footer'</span>),</span><br><span class="line">              controller: _customController,</span><br><span class="line">              focusNode: _nodeText6,</span><br><span class="line">              keyboardType: TextInputType._number_,</span><br><span class="line">            ),</span><br><span class="line">            TextFormField(</span><br><span class="line">              decoration: InputDecoration(labelText: <span class="string">'Input Number'</span>),</span><br><span class="line">              focusNode: _nodeText1,</span><br><span class="line">              keyboardType: TextInputType._number_,</span><br><span class="line">                textInputAction: TextInputAction.next</span><br><span class="line">            ),</span><br><span class="line">            TextFormField(</span><br><span class="line">              decoration: InputDecoration(</span><br><span class="line">                  labelText: <span class="string">'Custom cross Button'</span>),</span><br><span class="line">              focusNode: _nodeText2,</span><br><span class="line">              keyboardType: TextInputType._text_,</span><br><span class="line">            ),</span><br><span class="line">            TextFormField(</span><br><span class="line">              decoration: InputDecoration(</span><br><span class="line">                  labelText: <span class="string">'Input Number with Custom Action'</span>),</span><br><span class="line">              focusNode: _nodeText3,</span><br><span class="line">              keyboardType: TextInputType._number_,</span><br><span class="line">            ),</span><br><span class="line">            TextFormField(</span><br><span class="line">              decoration: InputDecoration(</span><br><span class="line">                  labelText: <span class="string">'Input Text without Done button'</span>),</span><br><span class="line">              focusNode: _nodeText4,</span><br><span class="line">              keyboardType: TextInputType._text_,</span><br><span class="line">            ),</span><br><span class="line">            TextFormField(</span><br><span class="line">              decoration: InputDecoration(</span><br><span class="line">                  labelText: <span class="string">'Input Number with Toolbar Buttons'</span>),</span><br><span class="line">              focusNode: _nodeText5,</span><br><span class="line">              keyboardType: TextInputType._number_,</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">  ),</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p><strong>3.</strong> 现在，要在项目中添加键盘操作，您需要将所有 TextFormField 包装在 Widget KeyboardAction 下，这个 Widget KeyboardAction 需要 keyboardactivesconfig 配置才能在键盘上添加配置。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> KeyboardActions(</span><br><span class="line">    tapOutsideBehavior: TapOutsideBehavior.translucentDismiss,</span><br><span class="line">    _<span class="comment">//autoScroll: true,_ config: _buildConfig(context),</span></span><br><span class="line">    child: Card(</span><br><span class="line">      shape: RoundedRectangleBorder(</span><br><span class="line">        borderRadius: BorderRadius.circular(<span class="number">10.0</span>),</span><br><span class="line">      ),</span><br><span class="line">      elevation: <span class="number">8.0</span>,</span><br><span class="line">      child: Container(</span><br><span class="line">        padding: EdgeInsets.only(left: <span class="number">12</span>),</span><br><span class="line">        child: Form(</span><br><span class="line">          key: _formKey,</span><br><span class="line">          child: SingleChildScrollView(</span><br><span class="line">            child: Column(</span><br><span class="line">              children: &lt;Widget&gt;[</span><br><span class="line">                TextFormField(</span><br><span class="line">                  decoration: InputDecoration(</span><br><span class="line">                      labelText: <span class="string">'Input Number with Custom Footer'</span>),</span><br><span class="line">                  controller: _customController,</span><br><span class="line">                  focusNode: _nodeText6,</span><br><span class="line">                  keyboardType: TextInputType._number_,</span><br><span class="line">                ),</span><br></pre></td></tr></table></figure><p><strong>4.</strong> 提供了一个功能，当我们按下设备屏幕上键盘以外的任何地方时，可以关闭键盘。所以，我们需要加上这一行</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tapOutsideBehavior: TapOutsideBehavior.translucentDismiss,</span><br></pre></td></tr></table></figure><p><strong>5.</strong> 我们应该初始化分配给不同文本字段的 FocusNode 对象。因此，开发人员进行定制，因为它允许键盘将焦点集中在这个小部件上。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> FocusNode _nodeText1 = FocusNode();<span class="comment">//Add In TextFormField TextFormField(</span></span><br><span class="line">              decoration: InputDecoration(</span><br><span class="line">                  labelText: <span class="string">'Input Number with Toolbar Buttons'</span>),</span><br><span class="line">              focusNode: _nodeText1,</span><br><span class="line">              keyboardType: TextInputType._number_,</span><br><span class="line">            )</span><br></pre></td></tr></table></figure><p><strong>6.</strong> 我们将定义 keyboardansconfig。包装器为单个配置键盘的动作栏。在 keyboardansconfig 中，我们根据您的需求为每个 TextFormField 单独定义由键盘执行的操作。我们可以自定义键盘颜色，键盘和内容之间的分隔线颜色，显示箭头前/后移动输入之间的焦点。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">KeyboardActionsConfig _buildConfig(BuildContext context) &#123;</span><br><span class="line">  <span class="keyword">return</span> KeyboardActionsConfig(</span><br><span class="line">    keyboardActionsPlatform: KeyboardActionsPlatform.ALL,</span><br><span class="line">    keyboardBarColor: Colors._grey_[<span class="number">200</span>],</span><br><span class="line">    keyboardSeparatorColor: Colors._redAccent_,</span><br><span class="line">    nextFocus: <span class="keyword">true</span>,</span><br><span class="line">    actions: [</span><br></pre></td></tr></table></figure><p><strong>7.</strong> 现在，我们将根据不同的 TextFormField 中的需求定义动作。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">actions: [</span><br><span class="line">  KeyboardActionsItem(</span><br><span class="line">    focusNode: _nodeText1,</span><br><span class="line">  ),</span><br></pre></td></tr></table></figure><p><strong>8.</strong> 要在应用程序中显示带有自定义页脚的输入，您需要在您的 KeyboardActionsItem 中实现下面的代码，在这里我们必须在 Text 小部件中传递 TextController。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">KeyboardActionsItem(</span><br><span class="line">  focusNode: _nodeText6,</span><br><span class="line">  footerBuilder: (_) =&gt; PreferredSize(</span><br><span class="line">      child: SizedBox(</span><br><span class="line">          height: <span class="number">40</span>,</span><br><span class="line">          child: Center(</span><br><span class="line">            child: Text(_customController.text),</span><br><span class="line">          )),</span><br><span class="line">      preferredSize: Size.fromHeight(<span class="number">40</span>)),</span><br><span class="line">),</span><br></pre></td></tr></table></figure><p><strong>9.</strong> 为了在你的应用程序中显示自定义对话框，将这个逻辑添加到 KeyboardActionsItem 中指定的焦点节点。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">KeyboardActionsItem(</span><br><span class="line">  focusNode: _nodeText3,</span><br><span class="line">  onTapAction: () &#123;</span><br><span class="line">    showDialog(</span><br><span class="line">        context: context,</span><br><span class="line">        builder: (context) &#123;</span><br><span class="line">          <span class="keyword">return</span> AlertDialog(</span><br><span class="line">            content: Text(<span class="string">"Show Custom Action"</span>),</span><br><span class="line">            actions: &lt;Widget&gt;[</span><br><span class="line">              FlatButton(</span><br><span class="line">                child: Text(<span class="string">"OK"</span>),</span><br><span class="line">                onPressed: () =&gt; Navigator._of_(context).pop(),</span><br><span class="line">              )</span><br><span class="line">            ],</span><br><span class="line">          );</span><br><span class="line">        &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">),</span><br></pre></td></tr></table></figure><blockquote><p>当我们运行应用程序时，我们得到屏幕的输出视频，如下所示，用户可以观察输出。</p></blockquote><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="demo.gif" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h1 id="结语"><a href="#结语" class="headerlink" title="结语:"></a>结语:</h1><p>在本文中，我已经简单地介绍了 KeyboardAction 包的基本结构; 您可以根据自己的选择修改这段代码，也可以根据自己的需求使用这个包。这是一个小的介绍键盘定制用户交互从我这边，它的工作使用 Flutter 。</p><hr><p>© 猫哥</p><ul><li><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p></li><li><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p></li><li><p>微信群 ducafecat</p></li><li><p>b 站 <a href="https://space.bilibili.com/404904528" target="_blank" rel="noopener">https://space.bilibili.com/404904528</a></p></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.tech/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>在 Flutter 中探索 GetIt</title>
    <link href="https://blog.ducafecat.tech/2021/09/02/translation/explore-getit-in-flutter/"/>
    <id>https://blog.ducafecat.tech/2021/09/02/translation/explore-getit-in-flutter/</id>
    <published>2021-09-01T16:00:00.000Z</published>
    <updated>2021-09-01T09:58:31.455Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-09-01-17-53-49.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://medium.com/flutterdevs/explore-getit-in-flutter-8db723e9d7cf" target="_blank" rel="noopener">https://medium.com/flutterdevs/explore-getit-in-flutter-8db723e9d7cf</a></p></blockquote><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://pub.dev/packages/get_it" target="_blank" rel="noopener">https://pub.dev/packages/get_it</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><p>它的 Flutter 小部件是建立使用一个现代框架。这就像是一种反应。在这里，我们从小部件开始创建任何应用程序。屏幕中的每个组件都是一个小部件。这个小部件描述了根据他目前的配置和状态，他的前景应该是什么样的。使您的小部件不具有直接依赖关系，可以使您的代码更好地组织，更容易测试和维护。但是现在您需要一种从 UI 代码访问这些对象的方法。当我来到 Flutter 从。小部件展示类似于它的想法和当前的设置和状态。Flutter 是一个免费的开源工具，用于开发移动、桌面、 web 应用程序，只需要一个代码库。</p><p>在本文中，我们将用 Flutter 获得它的包装来说明什么是 Flutter 获得它。在包的帮助下，以及如何使用他们在您的 Flutter 应用程序。那么让我们开始吧。</p><h1 id="Flutter"><a href="#Flutter" class="headerlink" title="Flutter :"></a>Flutter :</h1><p>Flutter 是谷歌的用户界面工具包，它可以帮助你在创纪录的时间内为移动设备、网络和桌面构建漂亮的、本地组合的应用程序。 Flutter 提供了很棒的开发工具，具有惊人的 hot reload 性能</p><h1 id="返回文章页面搞定它"><a href="#返回文章页面搞定它" class="headerlink" title="返回文章页面搞定它:"></a>返回文章页面搞定它:</h1><p>软件包就是这样一种简单的服务定位器，在这个服务定位器中，你有一个中央注册中心，通过注册类，我们可以得到一个类的实例，我们使用它来代替继承的小部件或提供者来访问对象 Is。从你的用户界面。</p><p>服务定位器和依赖注入都是控制反转的一种形式。IOC 允许来自任何地方的请求，从注册其类类型到访问容器。</p><h1 id="实施方案"><a href="#实施方案" class="headerlink" title="实施方案:"></a>实施方案:</h1><p>第一步: 添加依赖项</p><blockquote><p>将依赖项添加到 pubspec ー yaml 文件。</p></blockquote><p>依赖性:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dependencies:</span><br><span class="line">  get_it: ^<span class="number">7.2</span><span class="number">.0</span></span><br></pre></td></tr></table></figure><p>第二步: 进口</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:get_it/get_it.dart'</span>;</span><br></pre></td></tr></table></figure><p>第三步: 启用 AndriodX</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">org.gradle.jvmargs=-Xmx1536M</span><br><span class="line">android.enableR8=<span class="keyword">true</span></span><br><span class="line">android.useAndroidX=<span class="keyword">true</span></span><br><span class="line">android.enableJetifier=<span class="keyword">true</span></span><br></pre></td></tr></table></figure><h1 id="代码实施"><a href="#代码实施" class="headerlink" title="代码实施:"></a>代码实施:</h1><p>在解释 GetIt 之前，我们将在下面的参考文献中给出一个在我们的代码中使用的 GitIt 方法。</p><p>这是我们的服务定位器。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GetIt getIt = GetIt._instance_;</span><br></pre></td></tr></table></figure><p>接下来，我们创建了一个名为 getappmodel 的抽象类，它扩展了 ChangeNotifier。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">GetItAppModel</span> <span class="keyword">extends</span> <span class="title">ChangeNotifier</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> incrementCounter();</span><br><span class="line">  <span class="built_in">int</span> <span class="keyword">get</span> counter;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>现在我们已经创建了一个名为 getappmodelimplementation 的类，它从 getappmodel 类中扩展，我们已经创建了 incrementCounter ()方法，该方法增加计数器值。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GetItAppModelImplementation</span> <span class="keyword">extends</span> <span class="title">GetItAppModel</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">int</span> _counter = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  GetItAppModelImplementation() &#123;</span><br><span class="line">  Future.delayed(<span class="built_in">Duration</span>(seconds: <span class="number">3</span>)).then((_) =&gt; getIt.signalReady(<span class="keyword">this</span>));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">int</span> <span class="keyword">get</span> counter =&gt; _counter;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> incrementCounter() &#123;</span><br><span class="line">    _counter++;</span><br><span class="line">    notifyListeners();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在这之后，我们将创建一个计数器应用程序，在这个程序中，我们已经在内部获取了两个文本部件，外部是 floatingActionButton，点击它将调用 getappmodel ()类，在计数器应用程序中，该值将在上面的列部件中增加，该列部件由 FutureBuilder 和 getIt.allReady ()包装，在未来的属性中定义。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">FutureBuilder(</span><br><span class="line">    future: getIt.allReady(),</span><br><span class="line">    builder: (context, snapshot) &#123;</span><br><span class="line">      <span class="keyword">if</span> (snapshot.hasData) &#123;</span><br><span class="line">        <span class="keyword">return</span> Scaffold(</span><br><span class="line"></span><br><span class="line">          body: Center(</span><br><span class="line">            child: Column(</span><br><span class="line">              mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">              children: &lt;Widget&gt;[</span><br><span class="line">                Text(</span><br><span class="line">                  <span class="string">'You have pushed the button this many times:'</span>,</span><br><span class="line">                ),</span><br><span class="line">                Text(</span><br><span class="line">                  getIt&lt;GetItAppModel&gt;().counter.toString(),</span><br><span class="line">                  style: Theme._of_(context).textTheme.headline4,</span><br><span class="line">                ),</span><br><span class="line">              ],</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">          floatingActionButton: FloatingActionButton(</span><br><span class="line">            onPressed: getIt&lt;GetItAppModel&gt;().incrementCounter,</span><br><span class="line">            tooltip: <span class="string">'Increment'</span>,</span><br><span class="line">            child: Icon(Icons._add_),</span><br><span class="line">          ),</span><br><span class="line">        );</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Column(</span><br><span class="line">          mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">          mainAxisSize: MainAxisSize.min,</span><br><span class="line">          children: [</span><br><span class="line">            Text(<span class="string">'Initialisation'</span>),</span><br><span class="line">            SizedBox(</span><br><span class="line">              height: <span class="number">16</span>,</span><br><span class="line">            ),</span><br><span class="line">            CircularProgressIndicator(),</span><br><span class="line">          ],</span><br><span class="line">        );</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure><h1 id="全部代码"><a href="#全部代码" class="headerlink" title="全部代码:"></a>全部代码:</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_getit_exm/app_model.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_getit_exm/main.dart'</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GetItExm</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  GetItExm(&#123;Key? key, required <span class="keyword">this</span>.title&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> title;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _GetItExmState createState() =&gt; _GetItExmState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_GetItExmState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">GetItExm</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    getIt</span><br><span class="line">        .isReady&lt;GetItAppModel&gt;()</span><br><span class="line">        .then((_) =&gt; getIt&lt;GetItAppModel&gt;().addListener(update));</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> dispose() &#123;</span><br><span class="line">    getIt&lt;GetItAppModel&gt;().removeListener(update);</span><br><span class="line">    <span class="keyword">super</span>.dispose();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> update() =&gt; setState(() =&gt; &#123;&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Material(</span><br><span class="line">      child: FutureBuilder(</span><br><span class="line">          future: getIt.allReady(),</span><br><span class="line">          builder: (context, snapshot) &#123;</span><br><span class="line">            <span class="keyword">if</span> (snapshot.hasData) &#123;</span><br><span class="line">              <span class="keyword">return</span> Scaffold(</span><br><span class="line">                appBar: AppBar(</span><br><span class="line">                  title: Text(widget.title),</span><br><span class="line">                ),</span><br><span class="line">                body: Center(</span><br><span class="line">                  child: Column(</span><br><span class="line">                    mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">                    children: &lt;Widget&gt;[</span><br><span class="line">                      Text(</span><br><span class="line">                        <span class="string">'You have pushed the button this many times:'</span>,</span><br><span class="line">                      ),</span><br><span class="line">                      Text(</span><br><span class="line">                        getIt&lt;GetItAppModel&gt;().counter.toString(),</span><br><span class="line">                        style: Theme._of_(context).textTheme.headline4,</span><br><span class="line">                      ),</span><br><span class="line">                    ],</span><br><span class="line">                  ),</span><br><span class="line">                ),</span><br><span class="line">                floatingActionButton: FloatingActionButton(</span><br><span class="line">                  onPressed: getIt&lt;GetItAppModel&gt;().incrementCounter,</span><br><span class="line">                  tooltip: <span class="string">'Increment'</span>,</span><br><span class="line">                  child: Icon(Icons._add_),</span><br><span class="line">                ),</span><br><span class="line">              );</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">              <span class="keyword">return</span> Column(</span><br><span class="line">                mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">                mainAxisSize: MainAxisSize.min,</span><br><span class="line">                children: [</span><br><span class="line">                  Text(<span class="string">'Waiting for initialisation'</span>),</span><br><span class="line">                  SizedBox(</span><br><span class="line">                    height: <span class="number">16</span>,</span><br><span class="line">                  ),</span><br><span class="line">                  CircularProgressIndicator(),</span><br><span class="line">                ],</span><br><span class="line">              );</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="结语"><a href="#结语" class="headerlink" title="结语:"></a>结语:</h1><p>在本文中，我解释了 Explore GetIt In Flutter，你可以根据自己的修改和实验，这个小介绍来自 Explore GetIt In Flutter 从我们这边的演示。</p><p>我希望这个博客将为您提供充分的信息，在尝试在您的 Flutter 项目探索 GetIt 在 Flutter 。我们向你展示了什么是探索和 Flutter 是在您的 Flutter 应用的工作，所以请尝试它。</p><hr><p>© 猫哥</p><ul><li><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p></li><li><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p></li><li><p>微信群 ducafecat</p></li><li><p>b 站 <a href="https://space.bilibili.com/404904528" target="_blank" rel="noopener">https://space.bilibili.com/404904528</a></p></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.tech/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>在 Flutter 中探索 StreamBuilder</title>
    <link href="https://blog.ducafecat.tech/2021/09/01/translation/exploring-streambuilder-in-flutter/"/>
    <id>https://blog.ducafecat.tech/2021/09/01/translation/exploring-streambuilder-in-flutter/</id>
    <published>2021-08-31T16:00:00.000Z</published>
    <updated>2021-09-01T09:59:12.197Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-09-01-17-37-55.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://medium.com/flutterdevs/exploring-streambuilder-in-flutter-5958381bca67" target="_blank" rel="noopener">https://medium.com/flutterdevs/exploring-streambuilder-in-flutter-5958381bca67</a></p></blockquote><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><p>异步交互可能需要一个理想的机会来进行总结。偶尔，在周期结束之前可能会发出一些值。在 Dart 中，您可以创建一个返回 Stream 的容量，该容量可以在异步进程处于活动状态时发射一些值。假设您需要根据一个 Stream 的快照在 Flutter 中构造一个小部件，那么有一个名为 StreamBuilder 的小部件。</p><p>在这个博客中，我们将探索 Flutter 中的 StreamBuilder。我们还将实现一个演示程序，并向您展示如何在您的 Flutter 应用程序中使用 StreamBuilder。</p><h1 id="介绍"><a href="#介绍" class="headerlink" title="介绍:"></a>介绍:</h1><p>StreamBuilder 可以监听公开的流，并返回小部件和捕获获得的流信息的快照。造溪者提出了两个论点。</p><blockquote><p><em>A stream</em></p><p>构建器，它可以将流中的多个组件更改为小部件</p></blockquote><p>Stream 像一条线。当您从一端输入值而从另一端输入侦听器时，侦听器将获得该值。一个流可以有多个侦听器，这些侦听器的负载可以获得流水线，流水线将获得等价值。如何在流上放置值是通过使用流控制器实现的。流构建器是一个小部件，它可以将用户定义的对象更改为流。</p><h1 id="建造者"><a href="#建造者" class="headerlink" title="建造者:"></a>建造者:</h1><blockquote><p>要使用 StreamBuilder，需要调用下面的构造函数:</p></blockquote><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> StreamBuilder(&#123;</span><br><span class="line">Key? key,</span><br><span class="line">Stream&lt;T&gt;? stream,</span><br><span class="line">T? initialData,</span><br><span class="line">required AsyncWidgetBuilder&lt;T&gt; builder,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>实际上，您需要创建一个 Stream 并将其作为流争用传递。然后，在这一点上，您需要传递一个 AsyncWidgetBuilder，该 AsyncWidgetBuilder 可用于构造依赖于 Stream 快照的小部件。</p><h1 id="参数"><a href="#参数" class="headerlink" title="参数:"></a>参数:</h1><blockquote><p>下面是 StreamBuilderare 的一些参数:</p></blockquote><ul><li><code>Key? key</code>: 小部件的键，用于控制小部件如何被另一个小部件取代</li><li><code>Stream&lt;T&gt;? stream</code>: 一个流，其快照可以通过生成器函数获得</li><li><code>T? initialData</code>: 将利用这些数据制作初始快照</li><li><code>required AsyncWidgetBuilder&lt;T&gt; builder</code>: 生成过程由此生成器使用</li></ul><h1 id="如何实现-dart-文件中的代码"><a href="#如何实现-dart-文件中的代码" class="headerlink" title="如何实现 dart 文件中的代码:"></a>如何实现 dart 文件中的代码:</h1><p>你需要分别在你的代码中实现它:</p><blockquote><p>让我们创建一个流:</p></blockquote><p>下面的函数返回一个每秒生成一个数字的 Stream。你需要使用 async * 关键字来创建一个流。若要发出值，可以使用 yield 关键字后跟要发出的值。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;<span class="built_in">int</span>&gt; generateNumbers = (() <span class="keyword">async</span>* &#123;</span><br><span class="line">  <span class="keyword">await</span> Future&lt;<span class="keyword">void</span>&gt;.delayed(<span class="built_in">Duration</span>(seconds: <span class="number">2</span>));</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">await</span> Future&lt;<span class="keyword">void</span>&gt;.delayed(<span class="built_in">Duration</span>(seconds: <span class="number">1</span>));</span><br><span class="line">    <span class="keyword">yield</span> i;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><blockquote><p><em>From that point onward, pass it as the stream argument</em></p><p>从那一点开始，把它作为流参数传递下去</p></blockquote><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">StreamBuilder&lt;<span class="built_in">int</span>&gt;(</span><br><span class="line">stream: generateNumbers,</span><br><span class="line"><span class="comment">// other arguments</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><blockquote><p>让我们创建一个 AsyncWidgetBuilder</p></blockquote><p>构造函数期望您传递一个类型为 AsyncWidgetBuilder 的命名争用构建器。这是一个有两个参数的函数，它们的类型都是 BuildContext 和 AsyncSnapshot \&lt; t &gt; 。后续的边界(包含当前快照)可以用来确定应该呈现的内容。</p><p>要创建这个函数，首先需要了解 AsyncSnapshot。AsyncSnapshot 是使用异步计算的最新通信的不变描述。在这种独特的情况下，它解决了与 Stream 的最新通信。可以通过 AsyncSnapshot 属性获取流的最新快照。您可能需要使用的属性之一是 connectionState，这个枚举将当前关联状态转换为异步计算，在这种特殊情况下，这种异步计算就是 Steam。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">StreamBuilder&lt;<span class="built_in">int</span>&gt;(</span><br><span class="line">  stream: generateNumbers,</span><br><span class="line">  builder: (</span><br><span class="line">      BuildContext context,</span><br><span class="line">      AsyncSnapshot&lt;<span class="built_in">int</span>&gt; snapshot,</span><br><span class="line">      ) &#123;</span><br><span class="line">    <span class="keyword">if</span> (snapshot.connectionState == ConnectionState.waiting) &#123;</span><br><span class="line">      <span class="keyword">return</span> CircularProgressIndicator();</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (snapshot.connectionState == ConnectionState.active</span><br><span class="line">        || snapshot.connectionState == ConnectionState.done) &#123;</span><br><span class="line">      <span class="keyword">if</span> (snapshot.hasError) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">const</span> Text(<span class="string">'Error'</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (snapshot.hasData) &#123;</span><br><span class="line">        <span class="keyword">return</span> Text(</span><br><span class="line">            snapshot.data.toString(),</span><br><span class="line">            style: <span class="keyword">const</span> TextStyle(color: Colors._red_, fontSize: <span class="number">40</span>)</span><br><span class="line">        );</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">const</span> Text(<span class="string">'Empty data'</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> Text(<span class="string">'State: <span class="subst">$&#123;snapshot.connectionState&#125;</span>'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">),</span><br></pre></td></tr></table></figure><p>AsyncSnapshot 还有一个名为 hasError 的属性，可用于检查快照是否包含非空错误值。如果异步活动的最新结果失败，hasError 值将有效。为了获取信息，首先，您可以通过获取其 hasData 属性来检查快照是否包含信息，如果 Stream 有效地释放了任何非空值，那么 hasData 属性将是有效的。然后，在这一点上，您可以从 AsyncSnapshot 的数据属性获取信息。</p><p>由于上面属性的值，您可以计算出应该在屏幕上呈现什么。在下面的代码中，当 connectionState 值正在等待时，将显示一个 CircularProgressIndicator。当 connectionState 更改为 active 或 done 时，可以检查快照是否有错误或信息。建造函数称为 Flutter 管道的检测。因此，它将获得一个与时间相关的快照子组。这意味着，如果在实际上相似的时间里，Stream 发出了一些值，那么一部分值可能没有传递给构建器。</p><blockquote><p>枚举有一些可能的值:</p></blockquote><ul><li>> none: 无: 不与任何异步计算关联。如果流为空，则可能发生</li><li>> waiting: 等待: 与异步计算关联并等待协作。在这个上下文中，它暗示流还没有完成</li><li>> active: 活跃的: 与活动的异步计算相关联。例如，如果一个 Stream 已经返回了任何值，但此时还没有结束</li><li>> done: &gt; 完成: 与结束的异步计算相关联。在这个上下文中，它暗示流已经完成</li></ul><blockquote><p>设置初始数据:</p></blockquote><p>您可以选择传递一个 worth 作为 initialData 参数，这个参数将被利用，直到 Stream 发出 a。如果传递的值不为空，那么当 connectionState 在等待时，hasData 属性在任何事件中首先都将为 true</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">StreamBuilder&lt;<span class="built_in">int</span>&gt;(</span><br><span class="line">initialData: <span class="number">0</span>,</span><br><span class="line"><span class="comment">// other arguments</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>要在 connectionState 等待时显示初始数据，应该调整 if snapshot.connectionState = = connectionState.waiting，然后调整上面代码中的块。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (snapshot.connectionState == ConnectionState.waiting) &#123;</span><br><span class="line">  <span class="keyword">return</span> Column(</span><br><span class="line">    crossAxisAlignment: CrossAxisAlignment.center,</span><br><span class="line">    mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">    children: [</span><br><span class="line">      CircularProgressIndicator(),</span><br><span class="line">      Visibility(</span><br><span class="line">        visible: snapshot.hasData,</span><br><span class="line">        child: Text(</span><br><span class="line">          snapshot.data.toString(),</span><br><span class="line">          style: <span class="keyword">const</span> TextStyle(color: Colors._black_, fontSize: <span class="number">24</span>),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    ],</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当我们运行应用程序，我们应该得到屏幕的输出像下面的屏幕视频。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="demo.gif" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h1 id="Code-File"><a href="#Code-File" class="headerlink" title="Code File:"></a>Code File:</h1><h1 id="密码档案"><a href="#密码档案" class="headerlink" title="密码档案:"></a>密码档案:</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_steambuilder_demo/splash_screen.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() =&gt; runApp(MyApp());</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      home: Splash(),</span><br><span class="line">      debugShowCheckedModeBanner: <span class="keyword">false</span>,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Stream&lt;<span class="built_in">int</span>&gt; generateNumbers = (() <span class="keyword">async</span>* &#123;</span><br><span class="line">  <span class="keyword">await</span> Future&lt;<span class="keyword">void</span>&gt;.delayed(<span class="built_in">Duration</span>(seconds: <span class="number">2</span>));</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">await</span> Future&lt;<span class="keyword">void</span>&gt;.delayed(<span class="built_in">Duration</span>(seconds: <span class="number">1</span>));</span><br><span class="line">    <span class="keyword">yield</span> i;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StreamBuilderDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;StatefulWidget&gt; createState() &#123;</span><br><span class="line">    <span class="keyword">return</span> _StreamBuilderDemoState ();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_StreamBuilderDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">StreamBuilderDemo</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  initState() &#123;</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        automaticallyImplyLeading: <span class="keyword">false</span>,</span><br><span class="line">        title: <span class="keyword">const</span> Text(<span class="string">'Flutter StreamBuilder Demo'</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: SizedBox(</span><br><span class="line">        width: <span class="built_in">double</span>._infinity_,</span><br><span class="line">        child: Center(</span><br><span class="line">          child: StreamBuilder&lt;<span class="built_in">int</span>&gt;(</span><br><span class="line">            stream: generateNumbers,</span><br><span class="line">            initialData: <span class="number">0</span>,</span><br><span class="line">            builder: (</span><br><span class="line">                BuildContext context,</span><br><span class="line">                AsyncSnapshot&lt;<span class="built_in">int</span>&gt; snapshot,</span><br><span class="line">                ) &#123;</span><br><span class="line">              <span class="keyword">if</span> (snapshot.connectionState == ConnectionState.waiting) &#123;</span><br><span class="line">                <span class="keyword">return</span> Column(</span><br><span class="line">                  crossAxisAlignment: CrossAxisAlignment.center,</span><br><span class="line">                  mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">                  children: [</span><br><span class="line">                    CircularProgressIndicator(),</span><br><span class="line">                    Visibility(</span><br><span class="line">                      visible: snapshot.hasData,</span><br><span class="line">                      child: Text(</span><br><span class="line">                        snapshot.data.toString(),</span><br><span class="line">                        style: <span class="keyword">const</span> TextStyle(color: Colors._black_, fontSize: <span class="number">24</span>),</span><br><span class="line">                      ),</span><br><span class="line">                    ),</span><br><span class="line">                  ],</span><br><span class="line">                );</span><br><span class="line">              &#125; <span class="keyword">else</span> <span class="keyword">if</span> (snapshot.connectionState == ConnectionState.active</span><br><span class="line">                  || snapshot.connectionState == ConnectionState.done) &#123;</span><br><span class="line">                <span class="keyword">if</span> (snapshot.hasError) &#123;</span><br><span class="line">                  <span class="keyword">return</span> <span class="keyword">const</span> Text(<span class="string">'Error'</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (snapshot.hasData) &#123;</span><br><span class="line">                  <span class="keyword">return</span> Text(</span><br><span class="line">                      snapshot.data.toString(),</span><br><span class="line">                      style: <span class="keyword">const</span> TextStyle(color: Colors._red_, fontSize: <span class="number">40</span>)</span><br><span class="line">                  );</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                  <span class="keyword">return</span> <span class="keyword">const</span> Text(<span class="string">'Empty data'</span>);</span><br><span class="line">                &#125;</span><br><span class="line">              &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> Text(<span class="string">'State: <span class="subst">$&#123;snapshot.connectionState&#125;</span>'</span>);</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="结语"><a href="#结语" class="headerlink" title="结语:"></a>结语:</h1><p>在本文中，我已经简单介绍了 StreamBuilder 的基本结构; 您可以根据自己的选择修改这段代码。这是我对 StreamBuilder On User Interaction 的一个小小介绍，它正在使用 Flutter 工作。</p><hr><p>© 猫哥</p><ul><li><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p></li><li><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p></li><li><p>微信群 ducafecat</p></li><li><p>b 站 <a href="https://space.bilibili.com/404904528" target="_blank" rel="noopener">https://space.bilibili.com/404904528</a></p></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.tech/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 自定义单选按钮</title>
    <link href="https://blog.ducafecat.tech/2021/08/24/translation/exploring-custom-radio-button-in-flutter/"/>
    <id>https://blog.ducafecat.tech/2021/08/24/translation/exploring-custom-radio-button-in-flutter/</id>
    <published>2021-08-23T16:00:00.000Z</published>
    <updated>2021-08-23T23:50:35.394Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-08-24-07-49-36.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://medium.com/flutterdevs/exploring-custom-radio-button-in-flutter-4a93a7892185" target="_blank" rel="noopener">https://medium.com/flutterdevs/exploring-custom-radio-button-in-flutter-4a93a7892185</a></p></blockquote><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><blockquote><p>了解如何创建一个自定义单选按钮在您的 Flutter 应用程序</p></blockquote><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-08-24-07-36-53.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>单选按钮则称为选择按钮，它保存布尔值。它允许客户从一组预定义的选择中选择一个选择。这个组件使它不完全相同于一个复选框，我们可以选择一个以上的替代和未选择的状态重新建立。我们可以组织至少两个单选按钮的集合，并在屏幕上显示为带有白色区域的圆形孔用于未选择或圆点用于选择。</p><p>我们同样可以给每个相关的单选按钮一个标签，描绘单选按钮地址的决定。一个单选按钮可以选择通过点击鼠标在圆形孔或利用控制台备用方式。</p><p>在这个博客，我们将探索自定义 Flutter 单选按钮。我们将看到如何实现一个自定义单选按钮演示程序，以及如何在您的颤振应用程序创建。</p><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>Flutter 允许我们利用 Radio 小部件制作单选按钮。用这个小部件制作的单选按钮由一个空白的外部圆和一个强内部圆组成，最后一个按钮显示在选择状态。时不时地，你可能需要制作一个 radio gathering，其替代方案利用自定义设计，而不是传统的 radio gathering 。本文举例说明了如何使用定制 catches 进行 radio gathering。</p><blockquote><p>Demo Module :</p><p>演示模块:</p></blockquote><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="demo.gif" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>这个演示视频显示了如何创建一个自定义单选按钮在 Flutter。它显示了如何自定义单选按钮将工作在您的 Flutter 应用程序。它展示了当用户点击按钮时，单选组将如何使用自定义按钮。动画的。它会显示在你的设备上。</p><h3 id="如何实现-dart-文件中的代码"><a href="#如何实现-dart-文件中的代码" class="headerlink" title="如何实现 dart 文件中的代码:"></a>如何实现 dart 文件中的代码:</h3><p>你需要分别在你的代码中实现它:</p><blockquote><p>在 lib 文件夹中创建一个名为 <code>radio_opton.dart</code> 的新 dart 文件。</p></blockquote><p>因为单选按钮包含一个标签，所以我们不能使用单选按钮。综上所述，我们将创建一个自定义类，它可以用于做出称为 MyRadioOption 的选择。受 Flutter 的 Radio 小部件的激励，该类具有 value、 groupValue 和 onChanged 属性。该属性的价值解决了替代品的价值，在类似群体的所有选择中，它应该是非同寻常的。</p><p>groupValue 属性是当前选定的值。如果选项值与 groupvalue 匹配，则该选项处于选定状态。onChanged 属性存储当用户选择一个选项时将调用的回调函数。当用户选择一个选项时，回调函数负责更新 groupValue。此外，我们还添加了标签和文本属性，因为我们需要在按钮上显示标签，并在按钮的右侧显示文本。</p><p>groupValue 属性是目前选择的值。如果选择值与 groupvalue 匹配，则替换处于选择状态。onChanged 属性存储回调函数，客户机选择时将考虑该函数。当客户机选择一个替代方案时，回调函数有义务更新 groupValue。此外，我们还添加了标签和文本属性，因为我们需要在按钮上显示名称，并在按钮的右侧显示内容。</p><blockquote><p>下面是类的属性和构造函数。我们利用一个常规的类 T，理由是这个值可以是任何类型。</p></blockquote><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyRadioOption</span>&lt;<span class="title">T</span>&gt; <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> T value;</span><br><span class="line">  <span class="keyword">final</span> T? groupValue;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> label;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> text;</span><br><span class="line">  <span class="keyword">final</span> ValueChanged&lt;T?&gt; onChanged;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> MyRadioOption(&#123;</span><br><span class="line">    required <span class="keyword">this</span>.value,</span><br><span class="line">    required <span class="keyword">this</span>.groupValue,</span><br><span class="line">    required <span class="keyword">this</span>.label,</span><br><span class="line">    required <span class="keyword">this</span>.text,</span><br><span class="line">    required <span class="keyword">this</span>.onChanged,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="comment">// TODO implement</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后，我们将制作布局。按钮是一个圆圈，里面有名字。为了制作圆形，使用一个圆形边框作为形状的图形装饰容器。名称可以使用 Text 作为容器的子部件。然后，在这一点上，我们可以创建一个由按钮和文本小部件组成的 Row。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyRadioOption</span>&lt;<span class="title">T</span>&gt; <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> T value;</span><br><span class="line">  <span class="keyword">final</span> T? groupValue;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> label;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> text;</span><br><span class="line">  <span class="keyword">final</span> ValueChanged&lt;T?&gt; onChanged;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> MyRadioOption(&#123;</span><br><span class="line">    required <span class="keyword">this</span>.value,</span><br><span class="line">    required <span class="keyword">this</span>.groupValue,</span><br><span class="line">    required <span class="keyword">this</span>.label,</span><br><span class="line">    required <span class="keyword">this</span>.text,</span><br><span class="line">    required <span class="keyword">this</span>.onChanged,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  Widget _buildLabel() &#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">bool</span> isSelected = value == groupValue;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> Container(</span><br><span class="line">      width: <span class="number">30</span>,</span><br><span class="line">      height: <span class="number">30</span>,</span><br><span class="line">      decoration: ShapeDecoration(</span><br><span class="line">        shape: CircleBorder(</span><br><span class="line">          side: BorderSide(</span><br><span class="line">            color: Colors.black,</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">        color: isSelected ? Colors.cyan : Colors.white,</span><br><span class="line">      ),</span><br><span class="line">      child: Center(</span><br><span class="line">        child: Text(</span><br><span class="line">          value.toString(),</span><br><span class="line">          style: TextStyle(</span><br><span class="line">            color: isSelected ? Colors.white : Colors.cyan,</span><br><span class="line">            fontSize: <span class="number">20</span>,</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Widget _buildText() &#123;</span><br><span class="line">    <span class="keyword">return</span> Text(</span><br><span class="line">      text,</span><br><span class="line">      style: <span class="keyword">const</span> TextStyle(color: Colors.black, fontSize: <span class="number">24</span>),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Container(</span><br><span class="line">      margin: EdgeInsets.all(<span class="number">8</span>),</span><br><span class="line">      child: InkWell(</span><br><span class="line">        onTap: () =&gt; onChanged(value),</span><br><span class="line">        splashColor: Colors.cyan.withOpacity(<span class="number">0.5</span>),</span><br><span class="line">        child: Padding(</span><br><span class="line">          padding: EdgeInsets.all(<span class="number">5</span>),</span><br><span class="line">          child: Row(</span><br><span class="line">            children: [</span><br><span class="line">              _buildLabel(),</span><br><span class="line">              <span class="keyword">const</span> SizedBox(width: <span class="number">10</span>),</span><br><span class="line">              _buildText(),</span><br><span class="line">            ],</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>在 lib 文件夹中创建一个名为 <code>custom_radio_demo.dart</code> 的新 dart 文件。</p></blockquote><p>下面是一个类，其中我们使用 MyRadioOption 作为选择的无线电组。有一个状态变量 _ groupValue 和一个 ValueChanged 函数，这是当客户机选择一个备选方案时要考虑的回调函数。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>? _groupValue;</span><br><span class="line"></span><br><span class="line">ValueChanged&lt;<span class="built_in">String</span>?&gt; _valueChangedHandler() &#123;</span><br><span class="line">  <span class="keyword">return</span> (value) =&gt; setState(() =&gt; _groupValue = value!);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>在主体中，如何调用 MyRadioOption 的构造函数。</p></blockquote><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">MyRadioOption&lt;<span class="built_in">String</span>&gt;(</span><br><span class="line">  value: <span class="string">'1'</span>,</span><br><span class="line">  groupValue: _groupValue,</span><br><span class="line">  onChanged: _valueChangedHandler(),</span><br><span class="line">  label: <span class="string">'1'</span>,</span><br><span class="line">  text: <span class="string">'Phone Gap'</span>,</span><br><span class="line">),</span><br><span class="line">MyRadioOption&lt;<span class="built_in">String</span>&gt;(</span><br><span class="line">  value: <span class="string">'2'</span>,</span><br><span class="line">  groupValue: _groupValue,</span><br><span class="line">  onChanged: _valueChangedHandler(),</span><br><span class="line">  label: <span class="string">'2'</span>,</span><br><span class="line">  text: <span class="string">'Appcelerator'</span>,</span><br><span class="line">),</span><br></pre></td></tr></table></figure><p>当我们运行应用程序时，我们应该获得屏幕输出，就像下面的屏幕截图一样。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-08-24-07-42-36.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>Final Output 最终输出</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_custom_radio_button/radio_option.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CustomRadioDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State createState() =&gt; <span class="keyword">new</span> _CustomRadioDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_CustomRadioDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">CustomRadioDemo</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">String</span>? _groupValue;</span><br><span class="line"></span><br><span class="line">  ValueChanged&lt;<span class="built_in">String</span>?&gt; _valueChangedHandler() &#123;</span><br><span class="line">    <span class="keyword">return</span> (value) =&gt; setState(() =&gt; _groupValue = value!);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        automaticallyImplyLeading: <span class="keyword">false</span>,</span><br><span class="line">        title: <span class="keyword">const</span> Text(<span class="string">'Flutter Custom Radio Button Demo'</span>),</span><br><span class="line">        backgroundColor: Colors.cyan,</span><br><span class="line">      ),</span><br><span class="line">      body: Column(</span><br><span class="line">        children: [</span><br><span class="line">          Padding(</span><br><span class="line">            padding: <span class="keyword">const</span> EdgeInsets.all(<span class="number">10.0</span>),</span><br><span class="line">            child: Text(<span class="string">"Best Cross-Platform Mobile App Development Tools for 2021"</span>,</span><br><span class="line">              style: TextStyle(fontWeight: FontWeight.bold,fontSize: <span class="number">18</span>),),</span><br><span class="line">          ),</span><br><span class="line">          SizedBox(height: <span class="number">10</span>,),</span><br><span class="line">          MyRadioOption&lt;<span class="built_in">String</span>&gt;(</span><br><span class="line">            value: <span class="string">'1'</span>,</span><br><span class="line">            groupValue: _groupValue,</span><br><span class="line">            onChanged: _valueChangedHandler(),</span><br><span class="line">            label: <span class="string">'1'</span>,</span><br><span class="line">            text: <span class="string">'Phone Gap'</span>,</span><br><span class="line">          ),</span><br><span class="line">          MyRadioOption&lt;<span class="built_in">String</span>&gt;(</span><br><span class="line">            value: <span class="string">'2'</span>,</span><br><span class="line">            groupValue: _groupValue,</span><br><span class="line">            onChanged: _valueChangedHandler(),</span><br><span class="line">            label: <span class="string">'2'</span>,</span><br><span class="line">            text: <span class="string">'Appcelerator'</span>,</span><br><span class="line">          ),</span><br><span class="line">          MyRadioOption&lt;<span class="built_in">String</span>&gt;(</span><br><span class="line">            value: <span class="string">'3'</span>,</span><br><span class="line">            groupValue: _groupValue,</span><br><span class="line">            onChanged: _valueChangedHandler(),</span><br><span class="line">            label: <span class="string">'3'</span>,</span><br><span class="line">            text: <span class="string">'React Native'</span>,</span><br><span class="line">          ),</span><br><span class="line">          MyRadioOption&lt;<span class="built_in">String</span>&gt;(</span><br><span class="line">            value: <span class="string">'4'</span>,</span><br><span class="line">            groupValue: _groupValue,</span><br><span class="line">            onChanged: _valueChangedHandler(),</span><br><span class="line">            label: <span class="string">'4'</span>,</span><br><span class="line">            text: <span class="string">'Native Script'</span>,</span><br><span class="line">          ),</span><br><span class="line">          MyRadioOption&lt;<span class="built_in">String</span>&gt;(</span><br><span class="line">            value: <span class="string">'5'</span>,</span><br><span class="line">            groupValue: _groupValue,</span><br><span class="line">            onChanged: _valueChangedHandler(),</span><br><span class="line">            label: <span class="string">'5'</span>,</span><br><span class="line">            text: <span class="string">'Flutter'</span>,</span><br><span class="line">          ),</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h3><p>在本文中，我已经解释了自定义单选按钮的基本结构，您可以根据自己的选择修改这段代码。这是一个小的介绍自定义单选按钮对用户交互从我这边，它的工作使用 Flutter。</p><p>我希望这个博客将提供您尝试在您的 Flutter 项目的自定义单选按钮充足的信息。我们将向您展示介绍是什么？.这是一个如何制作自定义单选按钮的例子。从根本上说，每一种选择都应该具有价值和集团价值。组值应该是类似组中所有备选项中非常相似的东西。当客户选择一个替代方案时，组值会更新，所以请尝试一下。</p><p>如果我做错了什么，请在评论中告诉我，我很乐意改进。</p><p>鼓掌如果这篇文章对你有帮助。</p><hr><p>© 猫哥</p><ul><li><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p></li><li><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p></li><li><p>微信群 ducafecat</p></li><li><p>b 站 <a href="https://space.bilibili.com/404904528" target="_blank" rel="noopener">https://space.bilibili.com/404904528</a></p></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.tech/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>flutter 采用 BlurHash 算法实现图像缩略图</title>
    <link href="https://blog.ducafecat.tech/2021/08/19/translation/exploring-blurhash-image-placeholder-in-flutter/"/>
    <id>https://blog.ducafecat.tech/2021/08/19/translation/exploring-blurhash-image-placeholder-in-flutter/</id>
    <published>2021-08-18T16:00:00.000Z</published>
    <updated>2021-08-18T22:35:41.331Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-08-19-06-32-44.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://medium.com/flutterdevs/exploring-blurhash-image-placeholder-in-flutter-24dad611c487" target="_blank" rel="noopener">https://medium.com/flutterdevs/exploring-blurhash-image-placeholder-in-flutter-24dad611c487</a></p></blockquote><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://pub.dev/packages/flutter_blurhash" target="_blank" rel="noopener">https://pub.dev/packages/flutter_blurhash</a></li><li><a href="https://blurha.sh/" target="_blank" rel="noopener">https://blurha.sh/</a></li><li><a href="https://github.com/woltapp/blurhash" target="_blank" rel="noopener">https://github.com/woltapp/blurhash</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-08-19-06-19-55.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>根据联想速度的不同，从网络中叠加一张图片可能需要几分钟时间。在获取图片时，完全可以预期它会显示一个占位符。有一些显示占位符的策略。例如，您可以显示一个彩色框。在任何情况下，如果占位符可以像真实的图片一样，那就更令人愉快了。因此，你可以使用 BlurHash。</p><p>在这个博客中，我们将探索 Flutter 图片占位符。我们将看到如何实现 blur hash 的演示程序，以及如何使用 BlurHash 作为图像占位符，在您的 flutter 应用程序中使用 <code>flutter_blurhash</code> 包。</p><p><a href="https://pub.dev/packages/flutter_blurhash" target="_blank" rel="noopener">https://pub.dev/packages/flutter_blurhash</a></p><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>BlurHash 是图片占位符的保守描述。它的工作原理是从图片生成一个散列字符串。生成的散列字符串将用于传递占位符。本文介绍了在 Flutter 应用程序中解析要作为图片占位符交付的 BlurHash 字符串的最佳方法。</p><h3 id="演示"><a href="#演示" class="headerlink" title="演示"></a>演示</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="demo.gif" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>这个演示视频展示了如何在 Flutter 中使用 blurhash。它展示了 blurhash 如何在您的 Flutter 应用程序中使用 <code>flutter_blurhash</code> 包工作。它显示了图像占位符的紧凑表示形式。它会显示在你的设备上。</p><h3 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h3><p>这里有 BlurHash 的构造函数:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> BlurHash(&#123;</span><br><span class="line">  required <span class="keyword">this</span>.hash,</span><br><span class="line">  Key? key,</span><br><span class="line">  <span class="keyword">this</span>.color = Colors.blueGrey,</span><br><span class="line">  <span class="keyword">this</span>.imageFit = BoxFit.fill,</span><br><span class="line">  <span class="keyword">this</span>.decodingWidth = _DEFAULT_SIZE,</span><br><span class="line">  <span class="keyword">this</span>.decodingHeight = _DEFAULT_SIZE,</span><br><span class="line">  <span class="keyword">this</span>.image,</span><br><span class="line">  <span class="keyword">this</span>.onDecoded,</span><br><span class="line">  <span class="keyword">this</span>.onReady,</span><br><span class="line">  <span class="keyword">this</span>.onStarted,</span><br><span class="line">  <span class="keyword">this</span>.duration = <span class="keyword">const</span> <span class="built_in">Duration</span>(milliseconds: <span class="number">1000</span>),</span><br><span class="line">  <span class="keyword">this</span>.curve = Curves.easeOut,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>构造函数期望您传递一个边界散列，它是利用 BlurHash 算法得到的散列字符串。万一你现在没有散列字符串，你可以利用他们的权威站点 blurha。Sh 来创建您需要利用的图片的散列字符串。</p><h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><p>BlurHash 的一些参数是:</p><ul><li>hash: 需要此参数。要解码的散列</li><li>onDecoded: 此参数用于在对哈希进行解码时回调</li><li>image: 此参数用于远程下载资源</li><li>imageFit: 此参数用于如何适应解码和下载的图像</li><li>color: 此参数用于在解码前显示背景颜色</li><li>duration: 此参数用于动画持续时间。默认值为 const Duration(milliseconds: 1000).</li><li>curve: 此参数用于动画曲线。默认为 Curves.easeOut.</li><li>onStarted: 此参数用于在下载开始时调用的回调</li><li>onReady: 此参数用于在下载映像时回调</li></ul><h3 id="实施"><a href="#实施" class="headerlink" title="实施"></a>实施</h3><ul><li>第一步: 添加依赖项</li></ul><p>将依赖项添加到 pubspec ー yaml 文件。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">flutter_blurhash:</span> <span class="string">^0.6.0</span></span><br></pre></td></tr></table></figure><ul><li>第二步: 导入</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_blurhash/flutter_blurhash.dart'</span>;</span><br></pre></td></tr></table></figure><ul><li>第三步: 在应用程序的根目录中运行 flutter 软件包。</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ flutter packages get</span><br></pre></td></tr></table></figure><h3 id="如何实现-dart-文件中的代码"><a href="#如何实现-dart-文件中的代码" class="headerlink" title="如何实现 dart 文件中的代码"></a>如何实现 dart 文件中的代码</h3><p>你需要分别在你的代码中实现它:</p><blockquote><p>在 lib 文件夹中创建一个名为 main.dart 的新 dart 文件。</p></blockquote><p>下面是一个只传递散列参数的模型。因为没有传递 Image 参数，它将显示占位符直到时间结束。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">BlurHash(</span><br><span class="line">  hash: <span class="string">'LHA-Vc_4s9ad4oMwt8t7RhXTNGRj'</span>,</span><br><span class="line">),</span><br></pre></td></tr></table></figure><p>当我们运行应用程序时，我们应该得到屏幕的输出，就像下面的屏幕截图一样。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-08-19-06-27-18.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>在主体中，我们将添加 <code>BlurHash()</code> 方法。在此方法中，我们将添加 imageFit，这意味着您可以通过将 BoxFit 枚举作为 imageFit 参数传递给构造函数来设置如何将图像适配到可访问空间。如果没有传递参数，值默认为 BoxFit.fill。imageFit 竞争的使用类似于 FittedBox 的合适属性。目前，我们将增加持续时间意味着图片已有效下载后，图片将活跃一个给定的期限之前完全显示。持续时间可以通过传递持续时间尊重作为持续时间争用来设置。如果没有传递参数，默认值是 1 秒</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">BlurHash(</span><br><span class="line">  imageFit: BoxFit.fitWidth,</span><br><span class="line">  duration: <span class="keyword">const</span> <span class="built_in">Duration</span>(seconds: <span class="number">4</span>),</span><br><span class="line">  curve: Curves.bounceInOut,</span><br><span class="line">  hash: <span class="string">'LHA-Vc_4s9ad4oMwt8t7RhXTNGRj'</span>,</span><br><span class="line">  image: <span class="string">'https://images.unsplash.com/photo-1486072889922-9aea1fc0a34d?ixid=MnwxMjA3fDB8MHxzZWFyY2h8MXx8bW91dGFpbnxlbnwwfHwwfHw%3D&amp;ixlib=rb-1.2.1&amp;auto=format&amp;fit=crop&amp;w=500&amp;q=60'</span>,</span><br><span class="line">),</span><br></pre></td></tr></table></figure><p>现在，我们将设置曲线意味着动画曲线可以通过设置曲线参数。默认值是 Curves.easeOut。最后，我们将添加 image 表示图像参数传递的位置，图像的远程 URL 作为值。当我们运行应用程序时，我们应该得到屏幕的输出，就像下面的屏幕截图一样。</p><p>现在，我们将设置曲线意味着动画曲线可以通过曲线参数设置。默认值是 Curves.easeOut。最后，我们将添加一个图像，这意味着图像参数是以图片的远端 URL 作为值传递的。当我们运行应用程序时，我们应该得到屏幕的输出，就像下面的屏幕截图一样。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-08-19-06-29-17.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="完整代码"><a href="#完整代码" class="headerlink" title="完整代码"></a>完整代码</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_blur_hash_demo/splash_screen.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_blurhash/flutter_blurhash.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() =&gt; runApp(MyApp());</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      debugShowCheckedModeBanner: <span class="keyword">false</span>,</span><br><span class="line">      home: Splash(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BlurHashDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) =&gt;</span><br><span class="line">         Scaffold(</span><br><span class="line">          appBar: AppBar(</span><br><span class="line">            backgroundColor: Colors.teal,</span><br><span class="line">            automaticallyImplyLeading: <span class="keyword">false</span>,</span><br><span class="line">              title: Text(<span class="string">"Flutter BlurHash Demo"</span>)</span><br><span class="line">          ),</span><br><span class="line">          body: Center(</span><br><span class="line">            child: BlurHash(</span><br><span class="line">              imageFit: BoxFit.fitWidth,</span><br><span class="line">              duration: <span class="keyword">const</span> <span class="built_in">Duration</span>(seconds: <span class="number">4</span>),</span><br><span class="line">              curve: Curves.bounceInOut,</span><br><span class="line">              hash: <span class="string">'LHA-Vc_4s9ad4oMwt8t7RhXTNGRj'</span>,</span><br><span class="line">              image: <span class="string">'https://images.unsplash.com/photo-1486072889922-9aea1fc0a34d?ixid=MnwxMjA3fDB8MHxzZWFyY2h8MXx8bW91dGFpbnxlbnwwfHwwfHw%3D&amp;ixlib=rb-1.2.1&amp;auto=format&amp;fit=crop&amp;w=500&amp;q=60'</span>,</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">      );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h3><p>在这篇文章中，我简单地解释了 BlurHash 图像占位符的基本结构; 您可以根据自己的选择修改这段代码。这是一个小的介绍 BlurHash 图片占位符用户交互从我这边，它的工作使用 Flutter。</p><hr><p>© 猫哥</p><ul><li><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p></li><li><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p></li><li><p>微信群 ducafecat</p></li><li><p>b 站 <a href="https://space.bilibili.com/404904528" target="_blank" rel="noopener">https://space.bilibili.com/404904528</a></p></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.tech/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 可拖动的悬浮动作按钮</title>
    <link href="https://blog.ducafecat.tech/2021/08/16/translation/draggable-floating-action-button-in-flutter/"/>
    <id>https://blog.ducafecat.tech/2021/08/16/translation/draggable-floating-action-button-in-flutter/</id>
    <published>2021-08-15T16:00:00.000Z</published>
    <updated>2021-08-16T03:29:23.977Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-08-16-11-25-54.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://medium.com/flutterdevs/draggable-floating-action-button-in-flutter-2149a7e47f06" target="_blank" rel="noopener">https://medium.com/flutterdevs/draggable-floating-action-button-in-flutter-2149a7e47f06</a></p></blockquote><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://pub.flutter-io.cn/packages/get#reactive-state-manager" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/get#reactive-state-manager</a></li><li><a href="https://dart.dev/guides/language/extension-methods" target="_blank" rel="noopener">https://dart.dev/guides/language/extension-methods</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-08-16-11-18-31.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>Flutter 允许您使用 FloatingActionButton 小部件添加一个浮动操作按钮。尽管如此，它不允许你拖动按钮。考虑一下你需要让它可拖动的可能性。本文有一个模型，它公开了制作一个浮动操作按钮需要做的事情，这个按钮可以在屏幕的任何地方拖动，只要它在父窗口小部件中。</p><p>在这个博客中，我们将探索 Flutter 的拖动浮动按钮。我们将看到如何实现一个演示程序的拖曳浮动行动按钮，并显示如何创建您的 Flutter 应用程序。</p><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>下面的演示视频显示了如何创建一个可拖动的漂浮动作按钮在 Flutter。它显示了如何拖动浮动行动按钮将在您的 Flutter 应用程序的工作。它显示当代码成功运行时，用户将一个浮动操作按钮拖动到屏幕周围的任何地方，只要它在父窗口小部件中。它会显示在你的设备上。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="introduction.gif" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="如何实现-dart-文件中的代码"><a href="#如何实现-dart-文件中的代码" class="headerlink" title="如何实现 dart 文件中的代码"></a>如何实现 dart 文件中的代码</h3><p>你需要分别在你的代码中实现它:</p><p>在 lib 文件夹中创建一个名为 main.dart 的新 dart 文件。</p><p>首先，我们将创建一个 <code>Globalkey</code>，并将其命名为 <code>_parentKey</code></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> GlobalKey _parentKey = GlobalKey();</span><br></pre></td></tr></table></figure><p>在正文中，我们将添加一个具有高度和宽度的 Container 小部件。它是子属性，我们将添加 Stack 小部件。在这个小部件中，我们将添加一个键、文本和一个 DraggableFloatingActionButton ()。在按钮内部，我们将添加一个具有高度和宽度的容器。在其子属性中添加图像。此外，我们还将添加 initialOffset、父键和 onPressed。我们将深入定义下面的代码。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">Container(</span><br><span class="line">  width: <span class="number">300</span>,</span><br><span class="line">  height: <span class="number">300</span>,</span><br><span class="line">  child: Stack(</span><br><span class="line">    key: _parentKey,</span><br><span class="line">    children: [</span><br><span class="line">      Container(color: Colors.cyan),</span><br><span class="line">      Center(</span><br><span class="line">        child: <span class="keyword">const</span> Text(</span><br><span class="line">          <span class="string">"FlutterDev's.com"</span>,</span><br><span class="line">          style: <span class="keyword">const</span> TextStyle(color: Colors.white, fontSize: <span class="number">24</span>),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">      DraggableFloatingActionButton(</span><br><span class="line">        child: Container(</span><br><span class="line">          width: <span class="number">60</span>,</span><br><span class="line">          height: <span class="number">60</span>,</span><br><span class="line">          decoration: ShapeDecoration(</span><br><span class="line">            shape: CircleBorder(),</span><br><span class="line">            color: Colors.white,</span><br><span class="line">          ),</span><br><span class="line">          child: Image.asset(<span class="string">"assets/logo.png"</span>),</span><br><span class="line">        ),</span><br><span class="line">        initialOffset: <span class="keyword">const</span> Offset(<span class="number">120</span>, <span class="number">70</span>),</span><br><span class="line">        parentKey: _parentKey,</span><br><span class="line">        onPressed: () &#123;&#125;,</span><br><span class="line">      ),</span><br><span class="line">    ],</span><br><span class="line">  ),</span><br><span class="line">)</span><br></pre></td></tr></table></figure><blockquote><p>创建一个名为 <code>draggable_floating_action_button.dart</code> 的代码文件。</p></blockquote><p>我们将为这样的小部件创建一个类。我们需要处理的主要问题是使按钮在指针之后可拖动的能力。可以使用的小部件之一是监听器，它可以识别指针移动事件并给出移动细节。基本上，按钮应该作为侦听器的子级进行包装。</p><p>Listener 小部件具有 onPointerMove 争用，可以利用该争用来传递一个回调，该回调在指针移动时将被考虑。回调函数应该有一个边界 <code>PointerMoveEvent</code>，其中包含 x 和 y 标题中的开发增量(增量)。Dx 和 delta。).捕获物的偏移量应该通过移动三角洲来刷新。</p><p>下面是制作可拖动浮动操作按钮的类。它有几个争论，包括子，initialOffset，和 onPressed。子小部件是利用依赖于当前偏移量的定位小部件交付的。此外，它还被包装为监听器小部件的子部件。此外，还有一个策略 <code>_updatePosition</code> ，根据移动的增量刷新当前的偏移量。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DraggableFloatingActionButton</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> Widget child;</span><br><span class="line">  <span class="keyword">final</span> Offset initialOffset;</span><br><span class="line">  <span class="keyword">final</span> VoidCallback onPressed;</span><br><span class="line"></span><br><span class="line">  DraggableFloatingActionButton(&#123;</span><br><span class="line">    required <span class="keyword">this</span>.child,</span><br><span class="line">    required <span class="keyword">this</span>.initialOffset,</span><br><span class="line">    required <span class="keyword">this</span>.onPressed,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;StatefulWidget&gt; createState() =&gt; _DraggableFloatingActionButtonState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_DraggableFloatingActionButtonState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">DraggableFloatingActionButton</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">bool</span> _isDragging = <span class="keyword">false</span>;</span><br><span class="line">  late Offset _offset;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    _offset = widget.initialOffset;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> _updatePosition(PointerMoveEvent pointerMoveEvent) &#123;</span><br><span class="line">    <span class="built_in">double</span> newOffsetX = _offset.dx + pointerMoveEvent.delta.dx;</span><br><span class="line">    <span class="built_in">double</span> newOffsetY = _offset.dy + pointerMoveEvent.delta.dy;</span><br><span class="line"></span><br><span class="line">    setState(() &#123;</span><br><span class="line">      _offset = Offset(newOffsetX, newOffsetY);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Positioned(</span><br><span class="line">      left: _offset.dx,</span><br><span class="line">      top: _offset.dy,</span><br><span class="line">      child: Listener(</span><br><span class="line">        onPointerMove: (PointerMoveEvent pointerMoveEvent) &#123;</span><br><span class="line">          _updatePosition(pointerMoveEvent);</span><br><span class="line"></span><br><span class="line">          setState(() &#123;</span><br><span class="line">            _isDragging = <span class="keyword">true</span>;</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;,</span><br><span class="line">        onPointerUp: (PointerUpEvent pointerUpEvent) &#123;</span><br><span class="line">          <span class="built_in">print</span>(<span class="string">'onPointerUp'</span>);</span><br><span class="line"></span><br><span class="line">          <span class="keyword">if</span> (_isDragging) &#123;</span><br><span class="line">            setState(() &#123;</span><br><span class="line">              _isDragging = <span class="keyword">false</span>;</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            widget.onPressed();</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        child: widget.child,</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>您需要向父部件添加一个键，并将其传递给 DraggableFloatingActionButton 部件。您可以从 currentContext 属性中获得 RenderBox，该属性具有 findRenderObject 策略。然后，在这一点上，您可以从 RenderBox 的 size 属性获得父级的大小。您应该谨慎，因为应该在构建树之后调用 findRenderObject 技术。随后，您需要利用 WidgetsBinding 的 addPostFrameCallback 来调用它。</p><p>技术的 <code>_updatePosition</code> 也应该改变。如果新的偏移量小于最小偏移量，则该值必须设置为最小偏移量。如果新的偏移量比最大偏移量更值得注意，则该值必须设置为最大偏移量。对于 x 轴和 y 轴都需要这样做。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DraggableFloatingActionButton</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> Widget child;</span><br><span class="line">  <span class="keyword">final</span> Offset initialOffset;</span><br><span class="line">  <span class="keyword">final</span> VoidCallback onPressed;</span><br><span class="line"></span><br><span class="line">  DraggableFloatingActionButton(&#123;</span><br><span class="line">    required <span class="keyword">this</span>.child,</span><br><span class="line">    required <span class="keyword">this</span>.initialOffset,</span><br><span class="line">    required <span class="keyword">this</span>.onPressed,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;StatefulWidget&gt; createState() =&gt; _DraggableFloatingActionButtonState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_DraggableFloatingActionButtonState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">DraggableFloatingActionButton</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> GlobalKey _key = GlobalKey();</span><br><span class="line"></span><br><span class="line">  <span class="built_in">bool</span> _isDragging = <span class="keyword">false</span>;</span><br><span class="line">  late Offset _offset;</span><br><span class="line">  late Offset _minOffset;</span><br><span class="line">  late Offset _maxOffset;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    _offset = widget.initialOffset;</span><br><span class="line"></span><br><span class="line">    WidgetsBinding.instance?.addPostFrameCallback(_setBoundary);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> _setBoundary(_) &#123;</span><br><span class="line">    <span class="keyword">final</span> RenderBox parentRenderBox = widget.parentKey.currentContext?.findRenderObject() <span class="keyword">as</span> RenderBox;</span><br><span class="line">    <span class="keyword">final</span> RenderBox renderBox = _key.currentContext?.findRenderObject() <span class="keyword">as</span> RenderBox;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">final</span> Size parentSize = parentRenderBox.size;</span><br><span class="line">      <span class="keyword">final</span> Size size = renderBox.size;</span><br><span class="line"></span><br><span class="line">      setState(() &#123;</span><br><span class="line">        _minOffset = <span class="keyword">const</span> Offset(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">        _maxOffset = Offset(</span><br><span class="line">            parentSize.width - size.width,</span><br><span class="line">            parentSize.height - size.height</span><br><span class="line">        );</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">'catch: $e'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> _updatePosition(PointerMoveEvent pointerMoveEvent) &#123;</span><br><span class="line">    <span class="built_in">double</span> newOffsetX = _offset.dx + pointerMoveEvent.delta.dx;</span><br><span class="line">    <span class="built_in">double</span> newOffsetY = _offset.dy + pointerMoveEvent.delta.dy;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (newOffsetX &lt; _minOffset.dx) &#123;</span><br><span class="line">      newOffsetX = _minOffset.dx;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (newOffsetX &gt; _maxOffset.dx) &#123;</span><br><span class="line">      newOffsetX = _maxOffset.dx;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (newOffsetY &lt; _minOffset.dy) &#123;</span><br><span class="line">      newOffsetY = _minOffset.dy;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (newOffsetY &gt; _maxOffset.dy) &#123;</span><br><span class="line">      newOffsetY = _maxOffset.dy;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    setState(() &#123;</span><br><span class="line">      _offset = Offset(newOffsetX, newOffsetY);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Positioned(</span><br><span class="line">      left: _offset.dx,</span><br><span class="line">      top: _offset.dy,</span><br><span class="line">      child: Listener(</span><br><span class="line">        onPointerMove: (PointerMoveEvent pointerMoveEvent) &#123;</span><br><span class="line">          _updatePosition(pointerMoveEvent);</span><br><span class="line"></span><br><span class="line">          setState(() &#123;</span><br><span class="line">            _isDragging = <span class="keyword">true</span>;</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;,</span><br><span class="line">        onPointerUp: (PointerUpEvent pointerUpEvent) &#123;</span><br><span class="line">          <span class="built_in">print</span>(<span class="string">'onPointerUp'</span>);</span><br><span class="line"></span><br><span class="line">          <span class="keyword">if</span> (_isDragging) &#123;</span><br><span class="line">            setState(() &#123;</span><br><span class="line">              _isDragging = <span class="keyword">false</span>;</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            widget.onPressed();</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        child: Container(</span><br><span class="line">          key: _key,</span><br><span class="line">          child: widget.child,</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当我们运行应用程序时，我们应该得到屏幕的输出，就像下面的屏幕截图一样。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-08-16-11-23-10.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="全部代码"><a href="#全部代码" class="headerlink" title="全部代码"></a>全部代码</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/cupertino.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_draggable_floating/draggable_floating_action_button.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_draggable_floating/splash_screen.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() =&gt; runApp(MyApp());</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      debugShowCheckedModeBanner: <span class="keyword">false</span>,</span><br><span class="line">      home: Splash(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DraggableFloatingActionButtonDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> GlobalKey _parentKey = GlobalKey();</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        automaticallyImplyLeading: <span class="keyword">false</span>,</span><br><span class="line">        title: <span class="keyword">const</span> Text(<span class="string">'Flutter Draggable Floating Action Button'</span>),</span><br><span class="line">        backgroundColor: Colors.cyan,</span><br><span class="line">      ),</span><br><span class="line">      body: Column(</span><br><span class="line">        children: [</span><br><span class="line">          Container(</span><br><span class="line">            height: <span class="number">150</span>,</span><br><span class="line">          ),</span><br><span class="line">          Container(</span><br><span class="line">            width: <span class="number">300</span>,</span><br><span class="line">            height: <span class="number">300</span>,</span><br><span class="line">            child: Stack(</span><br><span class="line">              key: _parentKey,</span><br><span class="line">              children: [</span><br><span class="line">                Container(color: Colors.cyan),</span><br><span class="line">                Center(</span><br><span class="line">                  child: <span class="keyword">const</span> Text(</span><br><span class="line">                    <span class="string">"FlutterDev's.com"</span>,</span><br><span class="line">                    style: <span class="keyword">const</span> TextStyle(color: Colors.white, fontSize: <span class="number">24</span>),</span><br><span class="line">                  ),</span><br><span class="line">                ),</span><br><span class="line">                DraggableFloatingActionButton(</span><br><span class="line">                  child: Container(</span><br><span class="line">                    width: <span class="number">60</span>,</span><br><span class="line">                    height: <span class="number">60</span>,</span><br><span class="line">                    decoration: ShapeDecoration(</span><br><span class="line">                      shape: CircleBorder(),</span><br><span class="line">                      color: Colors.white,</span><br><span class="line">                    ),</span><br><span class="line">                    child: Image.asset(<span class="string">"assets/logo.png"</span>),</span><br><span class="line">                  ),</span><br><span class="line">                  initialOffset: <span class="keyword">const</span> Offset(<span class="number">120</span>, <span class="number">70</span>),</span><br><span class="line">                  parentKey: _parentKey,</span><br><span class="line">                  onPressed: () &#123;&#125;,</span><br><span class="line">                ),</span><br><span class="line">              ],</span><br><span class="line">            ),</span><br><span class="line">          )</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h3><p>在这篇文章中，我已经解释了可拖动浮动按钮的基本结构，您可以根据自己的选择修改这个代码。这是一个小的介绍可拖动浮动操作按钮对用户交互从我这边，它的工作使用 Flutter。</p><p>我希望这个博客将提供给您充分的信息，尝试在您的 Flutter 项目的拖曳浮动行动按钮。我们将向您展示介绍是什么？.这就是在 Flutter 制作一个可拖动的浮动按钮的方法。从根本上讲，您可以利用 Listener 小部件来区分指针移动事件，并根据开发增量更新按钮偏移量。监听器小部件同样支持区分指针事件，除非按钮最近被拖动，否则应该在这些事件上执行按钮的活动。同样，您需要获得父按钮和按钮的大小，以防止按钮超出父按钮的范围。所以请尝试一下。</p><hr><p>© 猫哥</p><ul><li><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p></li><li><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p></li><li><p>微信群 ducafecat</p></li><li><p>b 站 <a href="https://space.bilibili.com/404904528" target="_blank" rel="noopener">https://space.bilibili.com/404904528</a></p></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.tech/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 动画转场欢迎屏 concentric_transition</title>
    <link href="https://blog.ducafecat.tech/2021/08/10/translation/explore-concentric-transition-in-flutter/"/>
    <id>https://blog.ducafecat.tech/2021/08/10/translation/explore-concentric-transition-in-flutter/</id>
    <published>2021-08-09T16:00:00.000Z</published>
    <updated>2021-08-09T23:06:34.586Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-08-10-07-06-27.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://medium.com/flutterdevs/explore-concentric-transition-in-flutter-82ef4194d3d9" target="_blank" rel="noopener">https://medium.com/flutterdevs/explore-concentric-transition-in-flutter-82ef4194d3d9</a></p></blockquote><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/tiamo/flutter-concentric-transition/tree/master/example" target="_blank" rel="noopener">https://github.com/tiamo/flutter-concentric-transition/tree/master/example</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://pub.flutter-io.cn/packages/concentric_transition" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/concentric_transition</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-08-10-06-27-08.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>Flutter 小部件是使用现代框架构建的。这就像是一种反应。在这里，我们从小部件开始创建任何应用程序。屏幕中的每个组件都是一个小部件。这个小部件描述了根据他目前的配置和状态，他的前景应该是什么样的。小部件展示类似于它的想法和当前的设置和状态。</p><p>Flutter 自动化测试使您能够满足您的应用程序的高响应性，因为它有助于在您的应用程序中发现 bug 和各种问题。Flutter 是一个工具，开发移动，桌面，网络应用程序与代码 &amp; 是一个免费和开放源码的工具。</p><p>在本文中，我们将用 Flutter concentric_transition 探索 Concentric Transition 在 Flutter。利用该软件包，可以很容易地实现 Flutter 向心过渡。那么让我们开始吧。</p><p><a href="https://pub.dev/packages/concentric_transition" target="_blank" rel="noopener">https://pub.dev/packages/concentric_transition</a></p><h3 id="Concentric-Transition"><a href="#Concentric-Transition" class="headerlink" title="Concentric Transition"></a>Concentric Transition</h3><p>Concentric Transition 插件是一个非常好的 Flutter 插件。用户可以使用这个插件创建一个动画类型的入门屏幕，并创建自定义动画屏幕，如同心页面路由器，自定义剪刀，等等，就像我们使用同心页面，然后为我们提供动画类型的页面路线，将我们从一个屏幕到另一个屏幕。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="1.gif" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2.gif" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="3.gif" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="4.gif" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="5.gif" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="6.gif" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><ul><li>Concentric PageView 页面</li><li>Concentric Clipper 剪切图</li><li>Concentric PageRoute 转场路由</li></ul><h3 id="依赖包"><a href="#依赖包" class="headerlink" title="依赖包"></a>依赖包</h3><p>你需要分别在你的代码中实现它:</p><ul><li>第一步: 添加依赖项</li></ul><p>将依赖项添加到 pubspec ー yaml 文件。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dependencies:</span></span><br><span class="line"><span class="attr">  concentric_transition:</span> <span class="string">^1.0.1+1</span></span><br></pre></td></tr></table></figure><ul><li>第二步: 导入包</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:concentric_transition/concentric_transition.dart'</span>;</span><br></pre></td></tr></table></figure><ul><li>第三步: 运行 Run flutter package get</li></ul><h3 id="加入代码"><a href="#加入代码" class="headerlink" title="加入代码"></a>加入代码</h3><blockquote><p>你需要分别在你的代码中实现它:</p></blockquote><p>在定义 ConcentricPageView 之前，我们将创建一个类，在这个类中，我们将定义其标题、图像、颜色等，如下面的代码引用所示。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">OnboardingData</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span>? title;</span><br><span class="line">  <span class="keyword">final</span> Image? icon;</span><br><span class="line">  <span class="keyword">final</span> Color bgColor;</span><br><span class="line">  <span class="keyword">final</span> Color textColor;</span><br><span class="line"></span><br><span class="line">  OnboardingData(&#123;</span><br><span class="line">    <span class="keyword">this</span>.title,</span><br><span class="line">    <span class="keyword">this</span>.icon,</span><br><span class="line">    <span class="keyword">this</span>.bgColor = Colors.white,</span><br><span class="line">    <span class="keyword">this</span>.textColor = Colors.black,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在此之后，我们将在一个列表中定义入职类数据，该列表将在屏幕上显示给我们的数据。让我们用下面的代码来理解一下。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="built_in">List</span>&lt;OnboardingData&gt; onBoardingData = [</span><br><span class="line">  OnboardingData(</span><br><span class="line">    icon:Image.asset(<span class="string">'assets/images/melon.png'</span>),</span><br><span class="line">    title: <span class="string">"Fresh Lemon\nfruits"</span>,</span><br><span class="line">    <span class="comment">//textColor: Colors.white,</span></span><br><span class="line">    bgColor: Color(<span class="number">0xffCFFFCE</span>),</span><br><span class="line">  ),</span><br><span class="line">  OnboardingData(</span><br><span class="line">    icon:Image.asset(<span class="string">'assets/images/orange.png'</span>),</span><br><span class="line">    title: <span class="string">"Fresh Papaya\nfruits"</span>,</span><br><span class="line">    bgColor: Color(<span class="number">0xffFFE0E1</span>),</span><br><span class="line">  ),</span><br><span class="line">  OnboardingData(</span><br><span class="line">    icon:Image.asset(<span class="string">'assets/images/papaya.png'</span>),</span><br><span class="line">    title: <span class="string">"Fresh Papaya\nfruits"</span>,</span><br><span class="line">    bgColor: Color(<span class="number">0xffFCF1B5</span>),</span><br><span class="line">    <span class="comment">//textColor: Colors.white,</span></span><br><span class="line">  ),</span><br><span class="line">];</span><br></pre></td></tr></table></figure><p>现在，我们将在动画的颜色和持续时间所在的主体中使用 ConcentricPageView 小部件。使用列小部件，我们将在一个框中显示图像，并在图像下方显示其标题。让我们用下面的代码来理解一下。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">ConcentricPageView(</span><br><span class="line">  colors: colors,</span><br><span class="line">  radius: <span class="number">30</span>,</span><br><span class="line">  curve: Curves.ease,</span><br><span class="line">  duration: <span class="built_in">Duration</span>(seconds: <span class="number">2</span>),</span><br><span class="line">  itemBuilder: (index, value) &#123;</span><br><span class="line">    OnboardingData page = onBoardingData[index % onBoardingData.length];</span><br><span class="line">    <span class="keyword">return</span> Container(</span><br><span class="line">      child: Theme(</span><br><span class="line">        data: ThemeData(</span><br><span class="line">          textTheme: TextTheme(</span><br><span class="line">            headline6: TextStyle(</span><br><span class="line">              color: page.textColor,</span><br><span class="line">              fontWeight: FontWeight.w600,</span><br><span class="line">              fontFamily: <span class="string">'Helvetica'</span>,</span><br><span class="line">              letterSpacing: <span class="number">0.0</span>,</span><br><span class="line">              fontSize: <span class="number">17</span>,</span><br><span class="line">            ),</span><br><span class="line">            subtitle2: TextStyle(</span><br><span class="line">              color: page.textColor,</span><br><span class="line">              fontWeight: FontWeight.w300,</span><br><span class="line">              fontSize: <span class="number">18</span>,</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">        child: OnBoardingPage(onboardingDataPage: page),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;,</span><br><span class="line">),</span><br></pre></td></tr></table></figure><p>当我们运行应用程序时，我们应该得到屏幕的输出，就像下面的屏幕截图一样。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-08-10-06-32-55.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="完整代码"><a href="#完整代码" class="headerlink" title="完整代码"></a>完整代码</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'dart:ui'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:concentric_transition/concentric_transition.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/cupertino.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/painting.dart'</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcentricPageViewDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">List</span>&lt;OnboardingData&gt; onBoardingData = [</span><br><span class="line">    OnboardingData(</span><br><span class="line">      icon:Image.asset(<span class="string">'assets/images/melon.png'</span>),</span><br><span class="line">      title: <span class="string">"Fresh Lemon\nfruits"</span>,</span><br><span class="line">      <span class="comment">//textColor: Colors.white,</span></span><br><span class="line">      bgColor: Color(<span class="number">0xffCFFFCE</span>),</span><br><span class="line">    ),</span><br><span class="line">    OnboardingData(</span><br><span class="line"></span><br><span class="line">      icon:Image.asset(<span class="string">'assets/images/orange.png'</span>),</span><br><span class="line">      title: <span class="string">"Fresh Papaya\nfruits"</span>,</span><br><span class="line">      bgColor: Color(<span class="number">0xffFFE0E1</span>),</span><br><span class="line">    ),</span><br><span class="line">    OnboardingData(</span><br><span class="line"></span><br><span class="line">      icon:Image.asset(<span class="string">'assets/images/papaya.png'</span>),</span><br><span class="line">      title: <span class="string">"Fresh Papaya\nfruits"</span>,</span><br><span class="line">      bgColor: Color(<span class="number">0xffFCF1B5</span>),</span><br><span class="line">      <span class="comment">//textColor: Colors.white,</span></span><br><span class="line">    ),</span><br><span class="line">  ];</span><br><span class="line"></span><br><span class="line">  <span class="built_in">List</span>&lt;Color&gt; <span class="keyword">get</span> colors =&gt; onBoardingData.map((p) =&gt; p.bgColor).toList();</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      debugShowCheckedModeBanner: <span class="keyword">false</span>,</span><br><span class="line">      home: Scaffold(</span><br><span class="line">        body: ConcentricPageView(</span><br><span class="line">          colors: colors,</span><br><span class="line">          radius: <span class="number">30</span>,</span><br><span class="line">          curve: Curves.ease,</span><br><span class="line">          duration: <span class="built_in">Duration</span>(seconds: <span class="number">2</span>),</span><br><span class="line">          itemBuilder: (index, value) &#123;</span><br><span class="line">            OnboardingData page = onBoardingData[index % onBoardingData.length];</span><br><span class="line">            <span class="keyword">return</span> Container(</span><br><span class="line">              child: Theme(</span><br><span class="line">                data: ThemeData(</span><br><span class="line">                  textTheme: TextTheme(</span><br><span class="line">                    headline6: TextStyle(</span><br><span class="line">                      color: page.textColor,</span><br><span class="line">                      fontWeight: FontWeight.w600,</span><br><span class="line">                      fontFamily: <span class="string">'Helvetica'</span>,</span><br><span class="line">                      letterSpacing: <span class="number">0.0</span>,</span><br><span class="line">                      fontSize: <span class="number">17</span>,</span><br><span class="line">                    ),</span><br><span class="line">                    subtitle2: TextStyle(</span><br><span class="line">                      color: page.textColor,</span><br><span class="line">                      fontWeight: FontWeight.w300,</span><br><span class="line">                      fontSize: <span class="number">18</span>,</span><br><span class="line">                    ),</span><br><span class="line">                  ),</span><br><span class="line">                ),</span><br><span class="line">                child: OnBoardingPage(onboardingDataPage: page),</span><br><span class="line">              ),</span><br><span class="line">            );</span><br><span class="line">          &#125;,</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">OnBoardingPage</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> OnboardingData onboardingDataPage;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> OnBoardingPage(&#123;</span><br><span class="line">    Key? key,</span><br><span class="line">    required <span class="keyword">this</span>.onboardingDataPage,</span><br><span class="line">  &#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Container(</span><br><span class="line">      margin: EdgeInsets.symmetric(</span><br><span class="line">        horizontal: <span class="number">30.0</span>,</span><br><span class="line">      ),</span><br><span class="line">      child: Column(</span><br><span class="line"><span class="comment">//        mainAxisAlignment: MainAxisAlignment.center,</span></span><br><span class="line">        children: &lt;Widget&gt;[</span><br><span class="line">          _buildPicture(context),</span><br><span class="line">          SizedBox(height: <span class="number">30</span>),</span><br><span class="line">          _buildText(context),</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Widget _buildText(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Text(</span><br><span class="line">      onboardingDataPage.title!,</span><br><span class="line">      style: Theme.of(context).textTheme.headline6,</span><br><span class="line">      textAlign: TextAlign.center,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Widget _buildPicture(</span><br><span class="line">      BuildContext context, &#123;</span><br><span class="line">        <span class="built_in">double</span> size = <span class="number">190</span>,</span><br><span class="line">        <span class="built_in">double</span> iconSize = <span class="number">170</span>,</span><br><span class="line">      &#125;) &#123;</span><br><span class="line">    <span class="keyword">return</span> Container(</span><br><span class="line">      width: size,</span><br><span class="line">      height: size,</span><br><span class="line">      decoration: BoxDecoration(</span><br><span class="line">        borderRadius: BorderRadius.all(Radius.circular(<span class="number">60.0</span>)),</span><br><span class="line">        color: onboardingDataPage.bgColor</span><br><span class="line"><span class="comment">//            .withBlue(page.bgColor.blue - 40)</span></span><br><span class="line">            .withGreen(onboardingDataPage.bgColor.green + <span class="number">20</span>)</span><br><span class="line">            .withRed(onboardingDataPage.bgColor.red - <span class="number">100</span>)</span><br><span class="line">            .withAlpha(<span class="number">90</span>),</span><br><span class="line">      ),</span><br><span class="line">      padding:EdgeInsets.all(<span class="number">15</span>),</span><br><span class="line">      margin: EdgeInsets.only(</span><br><span class="line">        top: <span class="number">140</span>,</span><br><span class="line">      ),</span><br><span class="line">      child:onboardingDataPage.icon,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">OnboardingData</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span>? title;</span><br><span class="line">  <span class="keyword">final</span> Image? icon;</span><br><span class="line">  <span class="keyword">final</span> Color bgColor;</span><br><span class="line">  <span class="keyword">final</span> Color textColor;</span><br><span class="line"></span><br><span class="line">  OnboardingData(&#123;</span><br><span class="line">    <span class="keyword">this</span>.title,</span><br><span class="line">    <span class="keyword">this</span>.icon,</span><br><span class="line">    <span class="keyword">this</span>.bgColor = Colors.white,</span><br><span class="line">    <span class="keyword">this</span>.textColor = Colors.black,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h3><p>在这篇文章中，我解释了探索 Concentric Transition Flutter，你可以根据自己的修改和实验，这个小介绍是从探索 Concentric Transition Flutter 从我们这边演示。</p><p>我希望这个博客将提供您尝试在您的 Flutter 项目探索 Concentric Transition 充分的信息。我们向您展示了什么探索 Concentric Transition 在 Flutter 是和工作在您的 Flutter 应用，所以请尝试它。</p><hr><p>© 猫哥</p><ul><li><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p></li><li><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p></li><li><p>微信群 ducafecat</p></li><li><p>b 站 <a href="https://space.bilibili.com/404904528" target="_blank" rel="noopener">https://space.bilibili.com/404904528</a></p></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.tech/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 定制时间简化组件 time_planner</title>
    <link href="https://blog.ducafecat.tech/2021/08/06/translation/explore-customizable-time-planner-in-flutter/"/>
    <id>https://blog.ducafecat.tech/2021/08/06/translation/explore-customizable-time-planner-in-flutter/</id>
    <published>2021-08-05T16:00:00.000Z</published>
    <updated>2021-08-05T22:28:34.351Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-08-06-06-28-32.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="老铁记得-转发-，猫哥会呈现更多-Flutter-好文"><a href="#老铁记得-转发-，猫哥会呈现更多-Flutter-好文" class="headerlink" title="老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~"></a>老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~</h2><h2 id="微信群-ducafecat"><a href="#微信群-ducafecat" class="headerlink" title="微信群 ducafecat"></a>微信群 ducafecat</h2><h2 id="b-站-https-space-bilibili-com-404904528"><a href="#b-站-https-space-bilibili-com-404904528" class="headerlink" title="b 站 https://space.bilibili.com/404904528"></a>b 站 <a href="https://space.bilibili.com/404904528" target="_blank" rel="noopener">https://space.bilibili.com/404904528</a></h2><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://medium.com/flutterdevs/explore-customizable-time-planner-in-flutter-c8108218b52c" target="_blank" rel="noopener">https://medium.com/flutterdevs/explore-customizable-time-planner-in-flutter-c8108218b52c</a></p></blockquote><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://pub.dev/packages/time_planner" target="_blank" rel="noopener">https://pub.dev/packages/time_planner</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-08-06-06-05-41.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>从一开始，Flutter 就是一次伟大的邂逅。建造迷人的用户界面从来没有这么快。不管你是一个业余爱好者还是一个有教养的开发者，要无可救药地迷恋上 Flutter 并不难。所有的软件开发人员都明白，日期是最棘手的事情。同样，时间表也不是特例。</p><p>在移动应用程序中，有很多情况下用户需要输入出生日期、预订机票、安排会议等等。</p><p>在这个文章，我们将探索定制的时间规划 Flutter。我们还将实现一个演示程序，并创建一个可定制的时间计划使用时间规划器包在您的 Flutter 应用程序。</p><p><a href="https://pub.dev/packages/time_planner" target="_blank" rel="noopener">https://pub.dev/packages/time_planner</a></p><h3 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h3><p>一个愉快的，简单的利用，定制的时间规划为 Flutter 移动，桌面和网络。这是一个按时间表向客户显示任务的小部件。每行显示一个小时，每列显示一天，但是您可以更改该部分的标题并显示您需要的任何其他内容。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-08-06-06-08-07.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-08-06-06-07-08.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-08-06-06-07-33.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-08-06-06-08-23.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>这个演示视频显示了如何创建一个可定制的时间计划在 Flutter。它展示了如何定制的时间计划将工作，使用您的 Flutter 应用程序的时间计划包。它显示当用户点击任何行和列时，将创建一个随机的时间计划器。动画的。它会显示在你的设备上。</p><h3 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h3><p>时间计划器有以下几个属性:</p><ul><li>startHour: 这属性是用来时间从这个开始，它将从 1 开始</li><li>endHour: 这属性用于此时间结束，最大值为 24</li><li>headers: 这属性用于创建天数，每天是一个 TimePlannerTitle。你应该至少创造一天</li><li>tasks: 这属性用于在时间计划器上列出小部件</li><li>style: 这属性用于时间计划程序的样式</li><li>currentTimeAnimation: 这属性用于小部件加载滚动到动画的当前时间。默认值为 true</li></ul><h3 id="Implementation"><a href="#Implementation" class="headerlink" title="Implementation"></a>Implementation</h3><ul><li>第一步: 添加依赖项</li></ul><p>将依赖项添加到 pubspec ー yaml 文件。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">time_planner:</span> <span class="string">^0.0.3</span></span><br></pre></td></tr></table></figure><ul><li>第二步: 导入</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:time_planner/time_planner.dart'</span>;</span><br></pre></td></tr></table></figure><ul><li>第三步: 在应用程序的根目录中运行 flutter 软件包。</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter packages get</span><br></pre></td></tr></table></figure><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><p>你需要分别在你的代码中实现它:</p><blockquote><p>在 lib 文件夹中创建一个名为 main.dart 的新 dart 文件。</p></blockquote><p>首先，我们创建一个名为变量任务的 TimePlannerTask 列表。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">List</span>&lt;TimePlannerTask&gt; tasks = [];</span><br></pre></td></tr></table></figure><p>我们将创建一个 _addobject ()方法。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> _addObject(BuildContext context) &#123;</span><br><span class="line">  <span class="built_in">List</span>&lt;Color?&gt; colors = [</span><br><span class="line">    Colors.purple,</span><br><span class="line">    Colors.blue,</span><br><span class="line">    Colors.green,</span><br><span class="line">    Colors.orange,</span><br><span class="line">    Colors.cyan</span><br><span class="line">  ];</span><br><span class="line"></span><br><span class="line">  setState(() &#123;</span><br><span class="line">    tasks.add(</span><br><span class="line">      TimePlannerTask(</span><br><span class="line">        color: colors[Random().nextInt(colors.length)],</span><br><span class="line">        dateTime: TimePlannerDateTime(</span><br><span class="line">            day: Random().nextInt(<span class="number">10</span>),</span><br><span class="line">            hour: Random().nextInt(<span class="number">14</span>) + <span class="number">6</span>,</span><br><span class="line">            minutes: Random().nextInt(<span class="number">60</span>)),</span><br><span class="line">        minutesDuration: Random().nextInt(<span class="number">90</span>) + <span class="number">30</span>,</span><br><span class="line">        daysDuration: Random().nextInt(<span class="number">4</span>) + <span class="number">1</span>,</span><br><span class="line">        onTap: () &#123;</span><br><span class="line">          ScaffoldMessenger.of(context).showSnackBar(</span><br><span class="line">              SnackBar(content: Text(<span class="string">'You click on time planner object'</span>)));</span><br><span class="line">        &#125;,</span><br><span class="line">        child: Text(</span><br><span class="line">          <span class="string">'this is a demo'</span>,</span><br><span class="line">          style: TextStyle(color: Colors.grey[<span class="number">350</span>], fontSize: <span class="number">12</span>),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  ScaffoldMessenger.of(context).showSnackBar(</span><br><span class="line">      SnackBar(content: Text(<span class="string">'Random task added to time planner!'</span>)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在函数中，我们将添加 tasks.add ()方法。在内部，我们将添加 TimePlannerTask ()小部件。在这个小部件中，我们将添加颜色、日期时间、 minutesDuration 和 daysDuration。我们还将在用户点击时间计划器时显示 snackBar 消息。</p><p>在正文中，我们将添加 TimePlanner ()小部件。在内部，我们将添加 startHour、 endHour 和 header。在头文件中，我们将添加一些 TimePlannerTitle ()。此外，我们还将添加任务和样式。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">TimePlanner(</span><br><span class="line">  startHour: <span class="number">2</span>,</span><br><span class="line">  endHour: <span class="number">24</span>,</span><br><span class="line">  headers: [</span><br><span class="line">    TimePlannerTitle(</span><br><span class="line">      date: <span class="string">"7/20/2021"</span>,</span><br><span class="line">      title: <span class="string">"tuesday"</span>,</span><br><span class="line">    ),</span><br><span class="line">    TimePlannerTitle(</span><br><span class="line">      date: <span class="string">"7/21/2021"</span>,</span><br><span class="line">      title: <span class="string">"wednesday"</span>,</span><br><span class="line">    ),</span><br><span class="line">    TimePlannerTitle(</span><br><span class="line">      date: <span class="string">"7/22/2021"</span>,</span><br><span class="line">      title: <span class="string">"thursday"</span>,</span><br><span class="line">    ),</span><br><span class="line">    TimePlannerTitle(</span><br><span class="line">      date: <span class="string">"7/23/2021"</span>,</span><br><span class="line">      title: <span class="string">"friday"</span>,</span><br><span class="line">    ),</span><br><span class="line">    TimePlannerTitle(</span><br><span class="line">      date: <span class="string">"7/24/2021"</span>,</span><br><span class="line">      title: <span class="string">"saturday"</span>,</span><br><span class="line">    ),</span><br><span class="line">    TimePlannerTitle(</span><br><span class="line">      date: <span class="string">"7/25/2021"</span>,</span><br><span class="line">      title: <span class="string">"sunday"</span>,</span><br><span class="line">    ),</span><br><span class="line">    TimePlannerTitle(</span><br><span class="line">      date: <span class="string">"7/26/2021"</span>,</span><br><span class="line">      title: <span class="string">"monday"</span>,</span><br><span class="line">    ),</span><br><span class="line">    TimePlannerTitle(</span><br><span class="line">      date: <span class="string">"7/27/2021"</span>,</span><br><span class="line">      title: <span class="string">"tuesday"</span>,</span><br><span class="line">    ),</span><br><span class="line">    TimePlannerTitle(</span><br><span class="line">      date: <span class="string">"7/28/2021"</span>,</span><br><span class="line">      title: <span class="string">"wednesday"</span>,</span><br><span class="line">    ),</span><br><span class="line">    TimePlannerTitle(</span><br><span class="line">      date: <span class="string">"7/29/2021"</span>,</span><br><span class="line">      title: <span class="string">"thursday"</span>,</span><br><span class="line">    ),</span><br><span class="line">    TimePlannerTitle(</span><br><span class="line">      date: <span class="string">"7/30/2021"</span>,</span><br><span class="line">      title: <span class="string">"friday"</span>,</span><br><span class="line">    ),</span><br><span class="line">    TimePlannerTitle(</span><br><span class="line">      date: <span class="string">"7/31/2021"</span>,</span><br><span class="line">      title: <span class="string">"Saturday"</span>,</span><br><span class="line">    ),</span><br><span class="line">  ],</span><br><span class="line">  tasks: tasks,</span><br><span class="line">  style: TimePlannerStyle(</span><br><span class="line">      showScrollBar: <span class="keyword">true</span></span><br><span class="line">  ),</span><br><span class="line">),</span><br></pre></td></tr></table></figure><blockquote><p>现在，我们将创建一个漂浮的 actionbutton ()。</p></blockquote><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">floatingActionButton: FloatingActionButton(</span><br><span class="line">  onPressed: () =&gt; _addObject(context),</span><br><span class="line">  tooltip: <span class="string">'Add random task'</span>,</span><br><span class="line">  child: Icon(Icons.add),</span><br><span class="line">),</span><br></pre></td></tr></table></figure><p>当我们运行应用程序时，我们应该得到屏幕的输出，就像下面的屏幕截图一样。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-08-06-06-15-06.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="Code-File"><a href="#Code-File" class="headerlink" title="Code File"></a>Code File</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'dart:math'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_customizable_time_plan/splash_screen.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:time_planner/time_planner.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  runApp(MyApp());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      debugShowCheckedModeBanner: <span class="keyword">false</span>,</span><br><span class="line">      theme: ThemeData.dark(),</span><br><span class="line">      home: Splash()</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyHomePage</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  MyHomePage(&#123;Key? key, required <span class="keyword">this</span>.title&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> title;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _MyHomePageState createState() =&gt; _MyHomePageState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_MyHomePageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">MyHomePage</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">List</span>&lt;TimePlannerTask&gt; tasks = [];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> _addObject(BuildContext context) &#123;</span><br><span class="line">    <span class="built_in">List</span>&lt;Color?&gt; colors = [</span><br><span class="line">      Colors.purple,</span><br><span class="line">      Colors.blue,</span><br><span class="line">      Colors.green,</span><br><span class="line">      Colors.orange,</span><br><span class="line">      Colors.cyan</span><br><span class="line">    ];</span><br><span class="line"></span><br><span class="line">    setState(() &#123;</span><br><span class="line">      tasks.add(</span><br><span class="line">        TimePlannerTask(</span><br><span class="line">          color: colors[Random().nextInt(colors.length)],</span><br><span class="line">          dateTime: TimePlannerDateTime(</span><br><span class="line">              day: Random().nextInt(<span class="number">10</span>),</span><br><span class="line">              hour: Random().nextInt(<span class="number">14</span>) + <span class="number">6</span>,</span><br><span class="line">              minutes: Random().nextInt(<span class="number">60</span>)),</span><br><span class="line">          minutesDuration: Random().nextInt(<span class="number">90</span>) + <span class="number">30</span>,</span><br><span class="line">          daysDuration: Random().nextInt(<span class="number">4</span>) + <span class="number">1</span>,</span><br><span class="line">          onTap: () &#123;</span><br><span class="line">            ScaffoldMessenger.of(context).showSnackBar(</span><br><span class="line">                SnackBar(content: Text(<span class="string">'You click on time planner object'</span>)));</span><br><span class="line">          &#125;,</span><br><span class="line">          child: Text(</span><br><span class="line">            <span class="string">'this is a demo'</span>,</span><br><span class="line">            style: TextStyle(color: Colors.grey[<span class="number">350</span>], fontSize: <span class="number">12</span>),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      );</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    ScaffoldMessenger.of(context).showSnackBar(</span><br><span class="line">        SnackBar(content: Text(<span class="string">'Random task added to time planner!'</span>)));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        automaticallyImplyLeading: <span class="keyword">false</span>,</span><br><span class="line">        title: Text(widget.title),</span><br><span class="line">        centerTitle: <span class="keyword">true</span>,</span><br><span class="line">      ),</span><br><span class="line">      body: Center(</span><br><span class="line">        child: TimePlanner(</span><br><span class="line">          startHour: <span class="number">2</span>,</span><br><span class="line">          endHour: <span class="number">24</span>,</span><br><span class="line">          headers: [</span><br><span class="line">            TimePlannerTitle(</span><br><span class="line">              date: <span class="string">"7/20/2021"</span>,</span><br><span class="line">              title: <span class="string">"tuesday"</span>,</span><br><span class="line">            ),</span><br><span class="line">            TimePlannerTitle(</span><br><span class="line">              date: <span class="string">"7/21/2021"</span>,</span><br><span class="line">              title: <span class="string">"wednesday"</span>,</span><br><span class="line">            ),</span><br><span class="line">            TimePlannerTitle(</span><br><span class="line">              date: <span class="string">"7/22/2021"</span>,</span><br><span class="line">              title: <span class="string">"thursday"</span>,</span><br><span class="line">            ),</span><br><span class="line">            TimePlannerTitle(</span><br><span class="line">              date: <span class="string">"7/23/2021"</span>,</span><br><span class="line">              title: <span class="string">"friday"</span>,</span><br><span class="line">            ),</span><br><span class="line">            TimePlannerTitle(</span><br><span class="line">              date: <span class="string">"7/24/2021"</span>,</span><br><span class="line">              title: <span class="string">"saturday"</span>,</span><br><span class="line">            ),</span><br><span class="line">            TimePlannerTitle(</span><br><span class="line">              date: <span class="string">"7/25/2021"</span>,</span><br><span class="line">              title: <span class="string">"sunday"</span>,</span><br><span class="line">            ),</span><br><span class="line">            TimePlannerTitle(</span><br><span class="line">              date: <span class="string">"7/26/2021"</span>,</span><br><span class="line">              title: <span class="string">"monday"</span>,</span><br><span class="line">            ),</span><br><span class="line">            TimePlannerTitle(</span><br><span class="line">              date: <span class="string">"7/27/2021"</span>,</span><br><span class="line">              title: <span class="string">"tuesday"</span>,</span><br><span class="line">            ),</span><br><span class="line">            TimePlannerTitle(</span><br><span class="line">              date: <span class="string">"7/28/2021"</span>,</span><br><span class="line">              title: <span class="string">"wednesday"</span>,</span><br><span class="line">            ),</span><br><span class="line">            TimePlannerTitle(</span><br><span class="line">              date: <span class="string">"7/29/2021"</span>,</span><br><span class="line">              title: <span class="string">"thursday"</span>,</span><br><span class="line">            ),</span><br><span class="line">            TimePlannerTitle(</span><br><span class="line">              date: <span class="string">"7/30/2021"</span>,</span><br><span class="line">              title: <span class="string">"friday"</span>,</span><br><span class="line">            ),</span><br><span class="line">            TimePlannerTitle(</span><br><span class="line">              date: <span class="string">"7/31/2021"</span>,</span><br><span class="line">              title: <span class="string">"Saturday"</span>,</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">          tasks: tasks,</span><br><span class="line">          style: TimePlannerStyle(</span><br><span class="line">              showScrollBar: <span class="keyword">true</span></span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">      floatingActionButton: FloatingActionButton(</span><br><span class="line">        onPressed: () =&gt; _addObject(context),</span><br><span class="line">        tooltip: <span class="string">'Add random task'</span>,</span><br><span class="line">        child: Icon(Icons.add),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h3><p>在这篇文章中，我已经简单地解释了 Customizable Time Planner 的基本结构; 您可以根据自己的选择修改这段代码。这是一个小规模的介绍定制时间计划对用户交互从我这边，它的工作使用 Flutter。</p><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.tech/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 新人指导插件 onboarding_overlay</title>
    <link href="https://blog.ducafecat.tech/2021/08/05/translation/explore-onboarding-overlay-in-flutter/"/>
    <id>https://blog.ducafecat.tech/2021/08/05/translation/explore-onboarding-overlay-in-flutter/</id>
    <published>2021-08-04T16:00:00.000Z</published>
    <updated>2021-08-05T01:00:44.901Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-08-05-09-00-43.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="老铁记得-转发-，猫哥会呈现更多-Flutter-好文"><a href="#老铁记得-转发-，猫哥会呈现更多-Flutter-好文" class="headerlink" title="老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~"></a>老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~</h2><h2 id="微信群-ducafecat"><a href="#微信群-ducafecat" class="headerlink" title="微信群 ducafecat"></a>微信群 ducafecat</h2><h2 id="b-站-https-space-bilibili-com-404904528"><a href="#b-站-https-space-bilibili-com-404904528" class="headerlink" title="b 站 https://space.bilibili.com/404904528"></a>b 站 <a href="https://space.bilibili.com/404904528" target="_blank" rel="noopener">https://space.bilibili.com/404904528</a></h2><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://medium.com/flutterdevs/explore-onboarding-overlay-in-flutter-5ed882e123ac" target="_blank" rel="noopener">https://medium.com/flutterdevs/explore-onboarding-overlay-in-flutter-5ed882e123ac</a></p></blockquote><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://pub.flutter-io.cn/packages/onboarding_overlay" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/onboarding_overlay</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-08-05-08-43-35.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>Flutter 是一个开源的用户界面软件开发软件开发工具包。Flutter 是一个开源项目，由 Google 负责维护。目前，在 2021 年 3 月。谷歌已经发布了另一个新版本的 Flutter 2。作为一个软件开发工具包应用程序的 Flutter 是很好的，但是当构建一个大的应用程序时，在代码中会有一些问题或者 bug 需要调试。</p><p>Flutter 提供了多种调试工具，如时间轴检查器、内存和性能检查器等。这些工具简化了开发者的调试过程，下面列出了调试 Flutter 应用程序的不同工具。</p><p>你好朋友，我将谈论我的新博客上探索上板扑覆盖。我们还将实现一个探索 Onboarding 覆盖小部件演示，并使用它们在您的 Flutter 应用程序。那么让我们开始吧。</p><h3 id="Flutter"><a href="#Flutter" class="headerlink" title="Flutter"></a>Flutter</h3><p>Flutter 是谷歌的用户界面工具包，它可以帮助你在创纪录的时间内用一个代码库为移动、网络和桌面构建漂亮的本地组合应用程序。这意味着你可以使用一种编程语言和一个代码库来创建两个不同的应用程序(iOS 和 Android)。</p><h3 id="Onboarding-Overlay"><a href="#Onboarding-Overlay" class="headerlink" title="Onboarding Overlay"></a>Onboarding Overlay</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-08-05-08-49-40.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-08-05-08-49-53.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-08-05-08-50-04.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>按照自定义的设计指南，Onboarding Overlay Package 动画包实现了 Onboarding 覆盖，在这里，我们可以使用任何 Onboarding 覆盖中的小部件，我们使用它向用户介绍一个他们不知道的功能。Onboarding overlay 是一个灵活的 Onboarding 小部件，可以通过任意数量的步骤和任意起始点启动和停止。</p><p><a href="https://pub.flutter-io.cn/packages/onboarding_overlay" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/onboarding_overlay</a></p><h3 id="Implementation"><a href="#Implementation" class="headerlink" title="Implementation"></a>Implementation</h3><p>你需要分别在你的代码中实现它:</p><ul><li>第一步: 添加依赖项。</li></ul><p>将依赖项添加到 pubspec.yaml 文件。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dependencies:</span></span><br><span class="line"><span class="attr">  onboarding_overlay:</span> <span class="string">^2.1.0</span></span><br></pre></td></tr></table></figure><ul><li>步骤 2: 导入包:</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:onboarding_overlay/onboarding_overlay.dart'</span>;</span><br></pre></td></tr></table></figure><ul><li>第三步: 在应用程序的根目录中运行 flutter 软件包。</li></ul><h3 id="Implementation-1"><a href="#Implementation-1" class="headerlink" title="Implementation"></a>Implementation</h3><p>在 <code>libfolder</code> 中创建一个名为 <code>onboarding_overlay_demo.dart</code> 的新 dart 文件。</p><p>首先，我们必须定义 GlobalKey 和它的内部，它的名字是 onBoardingKey 和 scaffoldKey。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> GlobalKey&lt;OnboardingState&gt; onboardingKey = GlobalKey&lt;OnboardingState&gt;();</span><br><span class="line"><span class="keyword">final</span> GlobalKey&lt;ScaffoldState&gt; scaffoldKey = GlobalKey&lt;ScaffoldState&gt;();</span><br></pre></td></tr></table></figure><p>现在我们将使用 Onboarding Widget，其中我们将使用 Steps 属性，其中我们已经使用了一些不同类型的属性，如标题，titleTextColor，labelBoxPadding，labelBoxDecoration，bodyText 等，我们已经使用了下面的代码，可以在参考的帮助下理解。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">OnboardingStep(</span><br><span class="line">  focusNode: focusNodes[<span class="number">0</span>],</span><br><span class="line">  title: <span class="string">'Tap anywhere to continue Tap anywhere to continue'</span>,</span><br><span class="line">  titleTextColor: Colors.black,</span><br><span class="line">  bodyText: <span class="string">'Tap anywhere to continue Tap anywhere to continue'</span>,</span><br><span class="line">  labelBoxPadding: <span class="keyword">const</span> EdgeInsets.all(<span class="number">16.0</span>),</span><br><span class="line">  labelBoxDecoration: BoxDecoration(</span><br><span class="line">      shape: BoxShape.rectangle,</span><br><span class="line">      borderRadius: <span class="keyword">const</span> BorderRadius.all(Radius.circular(<span class="number">8.0</span>)),</span><br><span class="line">      color: <span class="keyword">const</span> Color(<span class="number">0xFF00E1FF</span>),</span><br><span class="line">      border: Border.all(</span><br><span class="line">        color: <span class="keyword">const</span> Color(<span class="number">0xFF1E05FB</span>),</span><br><span class="line">        width: <span class="number">1.0</span>,</span><br><span class="line">        style: BorderStyle.solid,</span><br><span class="line">      )),</span><br><span class="line">  arrowPosition: ArrowPosition.bottomCenter,</span><br><span class="line">  hasArrow: <span class="keyword">true</span>,</span><br><span class="line">  hasLabelBox: <span class="keyword">true</span>,</span><br><span class="line">  fullscreen: <span class="keyword">true</span>,</span><br><span class="line">),</span><br></pre></td></tr></table></figure><h3 id="Code-File"><a href="#Code-File" class="headerlink" title="Code File"></a>Code File</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:onboarding_overlay/onboarding_overlay.dart'</span>;<span class="class"><span class="keyword">class</span> <span class="title">OnBoardingOverlayDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> OnBoardingOverlayDemo(&#123;</span><br><span class="line">    Key? key,</span><br><span class="line">    required <span class="keyword">this</span>.focusNodes,</span><br><span class="line">  &#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">List</span>&lt;FocusNode&gt; focusNodes;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _OnBoardingOverlayDemoState createState() =&gt; _OnBoardingOverlayDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_OnBoardingOverlayDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">OnBoardingOverlayDemo</span>&gt; </span>&#123;</span><br><span class="line">  late <span class="built_in">int</span> _counter;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    _counter = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> dispose() &#123;</span><br><span class="line">    <span class="keyword">super</span>.dispose();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> _increment(BuildContext context) &#123;</span><br><span class="line">    setState(() &#123;</span><br><span class="line">      _counter++;</span><br><span class="line">      Onboarding.of(context)!.show();</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        leading: IconButton(</span><br><span class="line">          focusNode: widget.focusNodes[<span class="number">4</span>],</span><br><span class="line">          icon: <span class="keyword">const</span> Icon(Icons.menu),</span><br><span class="line">          onPressed: () &#123;&#125;,</span><br><span class="line">        ),</span><br><span class="line">        title: Focus(</span><br><span class="line">          focusNode: widget.focusNodes[<span class="number">3</span>],</span><br><span class="line">          child: <span class="keyword">const</span> Text(<span class="string">'Title'</span>),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">      body: Center(</span><br><span class="line">        child: Column(</span><br><span class="line">          mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">          children: &lt;Widget&gt;[</span><br><span class="line">            Focus(</span><br><span class="line">              focusNode: widget.focusNodes[<span class="number">0</span>],</span><br><span class="line">              child: <span class="keyword">const</span> Text(<span class="string">'You have pushed the button this many times:'</span>),</span><br><span class="line">            ),</span><br><span class="line">            Focus(</span><br><span class="line">              focusNode: widget.focusNodes[<span class="number">2</span>],</span><br><span class="line">              child: Text(</span><br><span class="line">                <span class="string">'$_counter'</span>,</span><br><span class="line">                style: Theme.of(context).textTheme.headline4,</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">      floatingActionButton: FloatingActionButton(</span><br><span class="line">        focusNode: widget.focusNodes[<span class="number">1</span>],</span><br><span class="line">        onPressed: () &#123;</span><br><span class="line">          _increment(context);</span><br><span class="line">        &#125;,</span><br><span class="line">        child: <span class="keyword">const</span> Icon(Icons.add),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h3><p>在这篇文章中，我已经解释了在 Flutter 探索在板上覆盖，你可以根据自己的修改和实验，这个小介绍是从我们这边的 Flutter 探索在板上覆盖演示。</p><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.tech/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 中的响应式框架</title>
    <link href="https://blog.ducafecat.tech/2021/07/27/translation/responsive-framework-in-flutter/"/>
    <id>https://blog.ducafecat.tech/2021/07/27/translation/responsive-framework-in-flutter/</id>
    <published>2021-07-26T16:00:00.000Z</published>
    <updated>2021-07-27T00:38:59.648Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-27-08-38-56.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="猫哥说"><a href="#猫哥说" class="headerlink" title="猫哥说"></a>猫哥说</h2><p>这是个自动管理响应界面处理的组件，比较适合在 flutter web 的项目中。</p><p>自动管理了你的 Resizing、最大、最小尺寸、Scaling 缩放比例，但是我没有发现布局的控制，但是这已经很不错了，又可以少写代码了。</p><ul><li>最小尺寸效果</li></ul><p><a href="https://gallery.codelessly.com/flutterwebsites/minimal/?utm_medium=link&amp;utm_campaign=demo#/" target="_blank" rel="noopener">https://gallery.codelessly.com/flutterwebsites/minimal/?utm_medium=link&amp;utm_campaign=demo#/</a></p><ul><li>Flutter.dev 官网</li></ul><p><a href="https://gallery.codelessly.com/flutterwebsites/flutterwebsite/?utm_medium=link&amp;utm_campaign=demo" target="_blank" rel="noopener">https://gallery.codelessly.com/flutterwebsites/flutterwebsite/?utm_medium=link&amp;utm_campaign=demo</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-27-08-30-34.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-27-08-31-01.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="老铁记得-转发-，猫哥会呈现更多-Flutter-好文"><a href="#老铁记得-转发-，猫哥会呈现更多-Flutter-好文" class="headerlink" title="老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~"></a>老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~</h2><h2 id="微信群-ducafecat"><a href="#微信群-ducafecat" class="headerlink" title="微信群 ducafecat"></a>微信群 ducafecat</h2><h2 id="b-站-https-space-bilibili-com-404904528"><a href="#b-站-https-space-bilibili-com-404904528" class="headerlink" title="b 站 https://space.bilibili.com/404904528"></a>b 站 <a href="https://space.bilibili.com/404904528" target="_blank" rel="noopener">https://space.bilibili.com/404904528</a></h2><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://medium.com/flutterdevs/responsive-framework-in-flutter-74b8b2a360a9" target="_blank" rel="noopener">https://medium.com/flutterdevs/responsive-framework-in-flutter-74b8b2a360a9</a></p></blockquote><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://pub.dev/packages/responsive_framework" target="_blank" rel="noopener">https://pub.dev/packages/responsive_framework</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-27-08-14-15.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>Flutter 是 Google 的用户界面工具宝库，用于从一个代码库生成优秀的、本地编译的 iOS 和 Android 应用程序。为了构建任何应用程序，我们从小部件开始ー Flutter 应用程序的构建方块。窗口小部件根据当前的设计和状态描述他们的视图应该类似的内容。它整合了一个文本小部件、行小部件、列小部件、容器小部件等等。</p><p>本文利用 Flutter 响应框架软件包对 Flutter 响应框架进行了研究。有了软件包的帮助，我们可以很容易地实现一个响应屏幕。那么让我们开始吧。</p><h3 id="响应式框架"><a href="#响应式框架" class="headerlink" title="响应式框架"></a>响应式框架</h3><p>响应式框架会自动调整你的用户界面以适应不同的屏幕尺寸。创建您的用户界面一次，并有它显示像素完美的移动，平板电脑和桌面！</p><p>支持多种显示大小通常意味着多次重新创建相同的布局。在传统的 Bootstrap 方法下，构建响应式 UI 是耗时、令人沮丧和重复的。此外，让一切像素完美几乎是不可能的，简单的编辑需要几个小时。</p><h3 id="实施方案"><a href="#实施方案" class="headerlink" title="实施方案"></a>实施方案</h3><ul><li>第一步: 添加依赖项</li></ul><p>将依赖项添加到 pubspec.yaml 文件。</p><p>依赖性:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dependencies:</span></span><br><span class="line"><span class="attr">  responsive_framework:</span> <span class="string">^0.1.4</span></span><br></pre></td></tr></table></figure><ul><li>第二步: 导入</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:responsive_framework/responsive_framework.dart'</span>;</span><br></pre></td></tr></table></figure><ul><li>第三步: 启用 AndriodX</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">org.gradle.jvmargs=-Xmx1536M</span><br><span class="line">android.enableR8=true</span><br><span class="line">android.useAndroidX=true</span><br><span class="line">android.enableJetifier=true</span><br></pre></td></tr></table></figure><h3 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h3><blockquote><p>你需要分别在你的代码中实现它</p></blockquote><p>在创建类似于响应式框架的 UI 之前，我们在 main 的 Material 应用部件中添加了 ResponsiveWrapper.builder() 。文件中初始化 MaxWith，MinWith 和 Breakpoints 的 List 类型，在它内部调整设备的大小，如移动设备，平板电脑，桌面，并且自动缩放值是定义的，让我们理解它与下面的代码引用。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">ResponsiveWrapper.builder(</span><br><span class="line">    BouncingScrollWrapper.builder(context, widget!),</span><br><span class="line">    maxWidth: <span class="number">1200</span>,</span><br><span class="line">    minWidth: <span class="number">450</span>,</span><br><span class="line">    defaultScale: <span class="keyword">true</span>,</span><br><span class="line">    breakpoints: [</span><br><span class="line">      ResponsiveBreakpoint.resize(<span class="number">450</span>, name: MOBILE),</span><br><span class="line">      ResponsiveBreakpoint.autoScale(<span class="number">800</span>, name: MOBILE),</span><br><span class="line">      ResponsiveBreakpoint.autoScale(<span class="number">800</span>, name: TABLET),</span><br><span class="line">      ResponsiveBreakpoint.autoScale(<span class="number">1000</span>, name: TABLET),</span><br><span class="line">      ResponsiveBreakpoint.resize(<span class="number">1200</span>, name: DESKTOP),</span><br><span class="line">      ResponsiveBreakpoint.autoScale(<span class="number">2460</span>, name: <span class="string">"4K"</span>),</span><br><span class="line">    ],</span><br><span class="line">    background: Container(color: Color(<span class="number">0xFFF5F5F5</span>))</span><br><span class="line">  ),</span><br></pre></td></tr></table></figure><p>自动缩放按比例缩小和扩展布局，保持 UI 的精确外观。这就消除了手动调整布局以适应移动设备、平板电脑和桌面的需要。</p><p>在此之后，我们创建了一个用户配置文件屏幕，其中是用户的图像，以及两种不同类型的列表，其中图像和一些文本已经给出。</p><h3 id="全部代码"><a href="#全部代码" class="headerlink" title="全部代码"></a>全部代码</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:responsive_framwork_demo/Constants/Constants.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:responsive_framwork_demo/device_size.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:responsive_framwork_demo/model/popular_course_model.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:responsive_framwork_demo/model/result_model.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProfileScreen</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _ProfileScreenState createState() =&gt; _ProfileScreenState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_ProfileScreenState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">ProfileScreen</span>&gt; </span>&#123;</span><br><span class="line">  late <span class="built_in">List</span>&lt;PopularCourseModel&gt; popularCourseModel;</span><br><span class="line">  late <span class="built_in">List</span>&lt;ResultModel&gt; resultModel;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    popularCourseModel = Constants.getPopularCourseModel();</span><br><span class="line">    resultModel = Constants.getResultModel();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      backgroundColor: Colors.white,</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        backgroundColor: Colors.white,</span><br><span class="line">        elevation: <span class="number">0.0</span>,</span><br><span class="line">        title: Text(</span><br><span class="line">          <span class="string">'PROFILE'</span>,</span><br><span class="line">          style: TextStyle(</span><br><span class="line">              fontFamily: <span class="string">'Poppins Medium'</span>,</span><br><span class="line">              color: Colors.black,</span><br><span class="line">              fontSize: <span class="number">15</span>,</span><br><span class="line">              fontWeight: FontWeight.bold,</span><br><span class="line">              letterSpacing: <span class="number">0.5</span>),</span><br><span class="line">        ),</span><br><span class="line">        centerTitle: <span class="keyword">true</span>,</span><br><span class="line">      ),</span><br><span class="line">      body: SingleChildScrollView(</span><br><span class="line">        child: Container(</span><br><span class="line">          padding: EdgeInsets.only(top: <span class="number">20</span>),</span><br><span class="line">          child: Column(</span><br><span class="line">            children: [</span><br><span class="line">              ClipOval(</span><br><span class="line">                child: CircleAvatar(</span><br><span class="line">                  maxRadius: <span class="number">50</span>,</span><br><span class="line">                  child: Image.asset(</span><br><span class="line">                    <span class="string">'assets/images/mans_img.jpeg'</span>,</span><br><span class="line">                    width: DeviceSize.width(context),</span><br><span class="line">                    fit: BoxFit.fill,</span><br><span class="line">                  ),</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">              SizedBox(</span><br><span class="line">                height: <span class="number">30</span>,</span><br><span class="line">              ),</span><br><span class="line">              Text(</span><br><span class="line">                <span class="string">'Crowley Singer'</span>,</span><br><span class="line">                style: TextStyle(</span><br><span class="line">                    fontFamily: <span class="string">'Poppins Medium'</span>,</span><br><span class="line">                    color: Colors.black,</span><br><span class="line">                    fontSize: <span class="number">15</span>,</span><br><span class="line">                    fontWeight: FontWeight.bold,</span><br><span class="line">                    letterSpacing: <span class="number">0.3</span>),</span><br><span class="line">              ),</span><br><span class="line">              Container(</span><br><span class="line">                margin: EdgeInsets.only(top: <span class="number">25</span>, left: <span class="number">20</span>, right: <span class="number">20</span>),</span><br><span class="line">                child: Row(</span><br><span class="line">                  mainAxisAlignment: MainAxisAlignment.spaceAround,</span><br><span class="line">                  children: [</span><br><span class="line">                    Column(</span><br><span class="line">                      children: [</span><br><span class="line">                        Text(</span><br><span class="line">                          <span class="string">'22'</span>,</span><br><span class="line">                          style: TextStyle(</span><br><span class="line">                              fontFamily: <span class="string">'Poppins Medium'</span>,</span><br><span class="line">                              color: Colors.black,</span><br><span class="line">                              fontSize: <span class="number">15</span>,</span><br><span class="line">                              fontWeight: FontWeight.bold,</span><br><span class="line">                              letterSpacing: <span class="number">0.5</span>),</span><br><span class="line">                        ),</span><br><span class="line">                        SizedBox(</span><br><span class="line">                          height: <span class="number">10</span>,</span><br><span class="line">                        ),</span><br><span class="line">                        Text(</span><br><span class="line">                          <span class="string">'Courses'</span>,</span><br><span class="line">                          style: TextStyle(</span><br><span class="line">                              fontFamily: <span class="string">'Poppins Regular'</span>,</span><br><span class="line">                              color: Colors.black45,</span><br><span class="line">                              fontSize: <span class="number">11</span>,</span><br><span class="line">                              fontWeight: FontWeight.bold,</span><br><span class="line">                              letterSpacing: <span class="number">0.3</span>),</span><br><span class="line">                        ),</span><br><span class="line">                      ],</span><br><span class="line">                    ),</span><br><span class="line">                    Container(</span><br><span class="line">                      height: <span class="number">32</span>,</span><br><span class="line">                      width: <span class="number">1</span>,</span><br><span class="line">                      color: Colors.black12,</span><br><span class="line">                    ),</span><br><span class="line">                    Column(</span><br><span class="line">                      children: [</span><br><span class="line">                        Text(</span><br><span class="line">                          <span class="string">'32'</span>,</span><br><span class="line">                          style: TextStyle(</span><br><span class="line">                              fontFamily: <span class="string">'Poppins Medium'</span>,</span><br><span class="line">                              color: Colors.black,</span><br><span class="line">                              fontSize: <span class="number">15</span>,</span><br><span class="line">                              fontWeight: FontWeight.bold,</span><br><span class="line">                              letterSpacing: <span class="number">0.5</span>),</span><br><span class="line">                        ),</span><br><span class="line">                        SizedBox(</span><br><span class="line">                          height: <span class="number">10</span>,</span><br><span class="line">                        ),</span><br><span class="line">                        Text(</span><br><span class="line">                          <span class="string">'Mentors'</span>,</span><br><span class="line">                          style: TextStyle(</span><br><span class="line">                              fontFamily: <span class="string">'Poppins Regular'</span>,</span><br><span class="line">                              color: Colors.black45,</span><br><span class="line">                              fontSize: <span class="number">11</span>,</span><br><span class="line">                              fontWeight: FontWeight.bold,</span><br><span class="line">                              letterSpacing: <span class="number">0.3</span>),</span><br><span class="line">                        ),</span><br><span class="line">                      ],</span><br><span class="line">                    ),</span><br><span class="line">                    Container(</span><br><span class="line">                      height: <span class="number">32</span>,</span><br><span class="line">                      width: <span class="number">1</span>,</span><br><span class="line">                      color: Colors.black12,</span><br><span class="line">                    ),</span><br><span class="line">                    Column(</span><br><span class="line">                      children: [</span><br><span class="line">                        Text(</span><br><span class="line">                          <span class="string">'48'</span>,</span><br><span class="line">                          style: TextStyle(</span><br><span class="line">                              fontFamily: <span class="string">'Poppins Medium'</span>,</span><br><span class="line">                              color: Colors.black,</span><br><span class="line">                              fontSize: <span class="number">15</span>,</span><br><span class="line">                              fontWeight: FontWeight.bold,</span><br><span class="line">                              letterSpacing: <span class="number">0.5</span>),</span><br><span class="line">                        ),</span><br><span class="line">                        SizedBox(</span><br><span class="line">                          height: <span class="number">10</span>,</span><br><span class="line">                        ),</span><br><span class="line">                        Text(</span><br><span class="line">                          <span class="string">'Friends'</span>,</span><br><span class="line">                          style: TextStyle(</span><br><span class="line">                              fontFamily: <span class="string">'Poppins Regular'</span>,</span><br><span class="line">                              color: Colors.black45,</span><br><span class="line">                              fontSize: <span class="number">11</span>,</span><br><span class="line">                              fontWeight: FontWeight.bold,</span><br><span class="line">                              letterSpacing: <span class="number">0.3</span>),</span><br><span class="line">                        ),</span><br><span class="line">                      ],</span><br><span class="line">                    ),</span><br><span class="line">                  ],</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">              Container(</span><br><span class="line">                margin: EdgeInsets.only(top: <span class="number">30</span>, left: <span class="number">20</span>, right: <span class="number">20</span>),</span><br><span class="line">                height: <span class="number">1</span>,</span><br><span class="line">                color: Colors.black12,</span><br><span class="line">                width: DeviceSize.width(context),</span><br><span class="line">              ),</span><br><span class="line">              Container(</span><br><span class="line">                margin: EdgeInsets.only(top: <span class="number">30</span>, left: <span class="number">20</span>, right: <span class="number">20</span>),</span><br><span class="line">                child: Row(</span><br><span class="line">                  mainAxisAlignment: MainAxisAlignment.spaceBetween,</span><br><span class="line">                  children: [</span><br><span class="line">                    Text(</span><br><span class="line">                      <span class="string">'YOUR COURSES'</span>,</span><br><span class="line">                      style: TextStyle(</span><br><span class="line">                          fontFamily: <span class="string">'Poppins Medium'</span>,</span><br><span class="line">                          color: Colors.black,</span><br><span class="line">                          fontSize: <span class="number">12</span>,</span><br><span class="line">                          fontWeight: FontWeight.w700,</span><br><span class="line">                          letterSpacing: <span class="number">0.5</span>),</span><br><span class="line">                    ),</span><br><span class="line">                    Icon(Icons.more_horiz),</span><br><span class="line">                  ],</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">              Container(</span><br><span class="line">                margin: EdgeInsets.only(top: <span class="number">10</span>, left: <span class="number">20</span>, right: <span class="number">20</span>),</span><br><span class="line">                height: DeviceSize.height(context) / <span class="number">7</span>,</span><br><span class="line">                <span class="comment">// color:Colors.purple,</span></span><br><span class="line">                child: ListView.separated(</span><br><span class="line">                  separatorBuilder: (BuildContext context, <span class="built_in">int</span> index) &#123;</span><br><span class="line">                    <span class="keyword">return</span> SizedBox(width: <span class="number">10</span>);</span><br><span class="line">                  &#125;,</span><br><span class="line">                  scrollDirection: Axis.horizontal,</span><br><span class="line">                  <span class="comment">// padding:EdgeInsets.only(left:10),</span></span><br><span class="line">                  <span class="comment">//shrinkWrap: true,</span></span><br><span class="line">                  itemCount: popularCourseModel.length,</span><br><span class="line">                  itemBuilder: (BuildContext context, <span class="built_in">int</span> index) &#123;</span><br><span class="line">                    <span class="keyword">return</span> _buildYourCourseModel(</span><br><span class="line">                        popularCourseModel[index], index);</span><br><span class="line">                  &#125;,</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">              Container(</span><br><span class="line">                margin: EdgeInsets.only(top: <span class="number">30</span>, left: <span class="number">20</span>, right: <span class="number">20</span>),</span><br><span class="line">                child: Row(</span><br><span class="line">                  mainAxisAlignment: MainAxisAlignment.spaceBetween,</span><br><span class="line">                  children: [</span><br><span class="line">                    Text(</span><br><span class="line">                      <span class="string">'YOUR PROGRESS'</span>,</span><br><span class="line">                      style: TextStyle(</span><br><span class="line">                          fontFamily: <span class="string">'Poppins Medium'</span>,</span><br><span class="line">                          color: Colors.black,</span><br><span class="line">                          fontSize: <span class="number">12</span>,</span><br><span class="line">                          fontWeight: FontWeight.w700,</span><br><span class="line">                          letterSpacing: <span class="number">0.5</span>),</span><br><span class="line">                    ),</span><br><span class="line">                    Icon(Icons.more_horiz),</span><br><span class="line">                  ],</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">              Container(</span><br><span class="line">                <span class="comment">//  height:DeviceSize.height(context),</span></span><br><span class="line">                width: DeviceSize.width(context),</span><br><span class="line"></span><br><span class="line">                margin: EdgeInsets.only(top: <span class="number">20</span>),</span><br><span class="line"></span><br><span class="line">                child: ListView.separated(</span><br><span class="line">                  separatorBuilder: (BuildContext context, <span class="built_in">int</span> index) &#123;</span><br><span class="line">                    <span class="keyword">return</span> SizedBox(height: <span class="number">10</span>);</span><br><span class="line">                  &#125;,</span><br><span class="line">                  scrollDirection: Axis.vertical,</span><br><span class="line">                  <span class="comment">// padding:EdgeInsets.only(left:10),</span></span><br><span class="line">                  physics: NeverScrollableScrollPhysics(),</span><br><span class="line">                  shrinkWrap: <span class="keyword">true</span>,</span><br><span class="line">                  itemCount: resultModel.length,</span><br><span class="line">                  itemBuilder: (BuildContext context, <span class="built_in">int</span> index) &#123;</span><br><span class="line">                    <span class="keyword">return</span> _buildResultModel(resultModel[index], index);</span><br><span class="line">                  &#125;,</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">            ],</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Widget _buildYourCourseModel(PopularCourseModel items, <span class="built_in">int</span> index) &#123;</span><br><span class="line">    <span class="keyword">return</span> Container(</span><br><span class="line">      width: <span class="number">70</span>,</span><br><span class="line">      child: Column(</span><br><span class="line">        <span class="comment">//mainAxisAlignment: MainAxisAlignment.spaceEvenly,</span></span><br><span class="line">        children: &lt;Widget&gt;[</span><br><span class="line">          Container(</span><br><span class="line">            decoration: BoxDecoration(</span><br><span class="line">              shape: BoxShape.circle,</span><br><span class="line">              color: Colors.white,</span><br><span class="line">              boxShadow: [</span><br><span class="line">                BoxShadow(</span><br><span class="line">                  color: Colors.blueGrey.shade50,</span><br><span class="line">                  offset: <span class="keyword">const</span> Offset(</span><br><span class="line">                    <span class="number">5.0</span>,</span><br><span class="line">                    <span class="number">5.0</span>,</span><br><span class="line">                  ),</span><br><span class="line">                  blurRadius: <span class="number">10.0</span>,</span><br><span class="line">                  spreadRadius: <span class="number">2.0</span>,</span><br><span class="line">                ), <span class="comment">//BoxShadow</span></span><br><span class="line">                BoxShadow(</span><br><span class="line">                  color: Colors.white,</span><br><span class="line">                  offset: <span class="keyword">const</span> Offset(<span class="number">0.0</span>, <span class="number">0.0</span>),</span><br><span class="line">                  blurRadius: <span class="number">0.0</span>,</span><br><span class="line">                  spreadRadius: <span class="number">0.0</span>,</span><br><span class="line">                ), <span class="comment">//BoxShadow</span></span><br><span class="line">              ],</span><br><span class="line">            ),</span><br><span class="line">            child: ClipOval(</span><br><span class="line">              child: CircleAvatar(</span><br><span class="line">                backgroundColor: Colors.white,</span><br><span class="line">                maxRadius: <span class="number">30</span>,</span><br><span class="line">                <span class="comment">//  child:Image.asset('assets/images/earth.png',height:45,color:Colors.blueAccent,) ,</span></span><br><span class="line">                child: Padding(</span><br><span class="line">                  padding: EdgeInsets.all(<span class="number">4</span>),</span><br><span class="line">                  child: Image.asset(</span><br><span class="line">                    items.img,</span><br><span class="line">                    fit: BoxFit.cover,</span><br><span class="line">                    scale: <span class="number">7</span>,</span><br><span class="line">                  ),</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">          Expanded(</span><br><span class="line">            child: Container(</span><br><span class="line">              padding: EdgeInsets.only(top: <span class="number">0</span>),</span><br><span class="line">              alignment: Alignment.center,</span><br><span class="line">              child: Text(</span><br><span class="line">                items.title,</span><br><span class="line">                style: TextStyle(</span><br><span class="line">                    fontFamily: <span class="string">'Poppins Medium'</span>,</span><br><span class="line">                    fontWeight: FontWeight.w700,</span><br><span class="line">                    letterSpacing: <span class="number">0.3</span>,</span><br><span class="line">                    fontSize: <span class="number">11</span>,</span><br><span class="line">                    color: Colors.black),</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Widget _buildResultModel(ResultModel items, <span class="built_in">int</span> index) &#123;</span><br><span class="line">    <span class="keyword">return</span> Container(</span><br><span class="line">      margin: EdgeInsets.only(left: <span class="number">20</span>, right: <span class="number">20</span>),</span><br><span class="line"></span><br><span class="line">      height: DeviceSize.height(context) / <span class="number">9</span>,</span><br><span class="line"></span><br><span class="line"><span class="comment">//     / color:Colors.pink,</span></span><br><span class="line">      child: Row(</span><br><span class="line">        children: [</span><br><span class="line">          Container(</span><br><span class="line">            decoration: BoxDecoration(</span><br><span class="line">              shape: BoxShape.circle,</span><br><span class="line">              color: Colors.white,</span><br><span class="line">              boxShadow: [</span><br><span class="line">                BoxShadow(</span><br><span class="line">                  color: Colors.blueGrey.shade50,</span><br><span class="line">                  offset: <span class="keyword">const</span> Offset(</span><br><span class="line">                    <span class="number">5.0</span>,</span><br><span class="line">                    <span class="number">5.0</span>,</span><br><span class="line">                  ),</span><br><span class="line">                  blurRadius: <span class="number">10.0</span>,</span><br><span class="line">                  spreadRadius: <span class="number">2.0</span>,</span><br><span class="line">                ), <span class="comment">//BoxShadow</span></span><br><span class="line">                BoxShadow(</span><br><span class="line">                  color: Colors.white,</span><br><span class="line">                  offset: <span class="keyword">const</span> Offset(<span class="number">0.0</span>, <span class="number">0.0</span>),</span><br><span class="line">                  blurRadius: <span class="number">0.0</span>,</span><br><span class="line">                  spreadRadius: <span class="number">0.0</span>,</span><br><span class="line">                ), <span class="comment">//BoxShadow</span></span><br><span class="line">              ],</span><br><span class="line">            ),</span><br><span class="line">            child: ClipOval(</span><br><span class="line">              child: CircleAvatar(</span><br><span class="line">                backgroundColor: Colors.white,</span><br><span class="line">                maxRadius: <span class="number">28</span>,</span><br><span class="line">                <span class="comment">//  child:Image.asset('assets/images/earth.png',height:45,color:Colors.blueAccent,) ,</span></span><br><span class="line">                child: Padding(</span><br><span class="line">                  padding: EdgeInsets.all(<span class="number">4</span>),</span><br><span class="line">                  child: Image.asset(</span><br><span class="line">                    items.img,</span><br><span class="line">                    fit: BoxFit.cover,</span><br><span class="line">                    scale: <span class="number">7</span>,</span><br><span class="line">                  ),</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">          SizedBox(</span><br><span class="line">            width: <span class="number">20</span>,</span><br><span class="line">          ),</span><br><span class="line">          Column(</span><br><span class="line">            mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">            crossAxisAlignment: CrossAxisAlignment.start,</span><br><span class="line">            children: [</span><br><span class="line">              Text(</span><br><span class="line">                items.title,</span><br><span class="line">                style: TextStyle(</span><br><span class="line">                    fontFamily: <span class="string">'Poppins Medium'</span>,</span><br><span class="line">                    color: Colors.black,</span><br><span class="line">                    fontSize: <span class="number">11.5</span>,</span><br><span class="line">                    fontWeight: FontWeight.w700,</span><br><span class="line">                    letterSpacing: <span class="number">0.5</span>),</span><br><span class="line">              ),</span><br><span class="line">              SizedBox(</span><br><span class="line">                height: <span class="number">5</span>,</span><br><span class="line">              ),</span><br><span class="line">              Text(</span><br><span class="line">                items.subTitle,</span><br><span class="line">                style: TextStyle(</span><br><span class="line">                    fontFamily: <span class="string">'Poppins Regular'</span>,</span><br><span class="line">                    color: Colors.black45,</span><br><span class="line">                    fontSize: <span class="number">11</span>,</span><br><span class="line">                    fontWeight: FontWeight.w700,</span><br><span class="line">                    letterSpacing: <span class="number">0.5</span>),</span><br><span class="line">              ),</span><br><span class="line">            ],</span><br><span class="line">          ),</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>在这篇文章中，我解释了在 Flutter 响应框架，你可以根据自己的修改和实验，这个小介绍是从我们这边的 Flutter 响应框架演示。</p><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.tech/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>flutter fvm 版本控制</title>
    <link href="https://blog.ducafecat.tech/2021/07/22/translation/version-management-in-flutter/"/>
    <id>https://blog.ducafecat.tech/2021/07/22/translation/version-management-in-flutter/</id>
    <published>2021-07-21T16:00:00.000Z</published>
    <updated>2021-07-22T00:39:23.780Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-22-08-39-22.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="老铁记得-转发-，猫哥会呈现更多-Flutter-好文"><a href="#老铁记得-转发-，猫哥会呈现更多-Flutter-好文" class="headerlink" title="老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~"></a>老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~</h2><h2 id="微信群-ducafecat"><a href="#微信群-ducafecat" class="headerlink" title="微信群 ducafecat"></a>微信群 ducafecat</h2><h2 id="b-站-https-space-bilibili-com-404904528"><a href="#b-站-https-space-bilibili-com-404904528" class="headerlink" title="b 站 https://space.bilibili.com/404904528"></a>b 站 <a href="https://space.bilibili.com/404904528" target="_blank" rel="noopener">https://space.bilibili.com/404904528</a></h2><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://medium.com/flutterdevs/version-management-in-flutter-c232b04f1919" target="_blank" rel="noopener">https://medium.com/flutterdevs/version-management-in-flutter-c232b04f1919</a></p></blockquote><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://github.com/leoafarias/fvm" target="_blank" rel="noopener">https://github.com/leoafarias/fvm</a></li><li><a href="https://fvm.app/" target="_blank" rel="noopener">https://fvm.app/</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-22-08-19-43.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>Flutter 是一个可移植的 UI 工具包。换句话说，它是一个全面的应用软件开发工具包(SDK) ，包括小部件和工具。Flutter 是一个免费的开源工具，用于开发移动、桌面和 web 应用程序。Flutter 是一种跨平台的开发工具。这意味着用同样的代码，我们可以同时创建 ios 和 android 应用程序。这是在整个过程中节省时间和资源的最佳方式。在这方面，hot reload 正在获得移动开发者的支持。允许我们通过热重装快速查看在代码中实现的更改。</p><p>Flutter 管理版本允许不同类型的 Flutter 版本可在项目的基础上。这意味着我们可以为不同类型的项目定义特定类型的 Flutter 版本，它允许我们释放多个通道，在本地缓存它，因此切换版本。那我们就不用等安装好了。</p><p>在本文中，我们将学习 Flutter 版本管理。在这里，我们将看到如何建立工作版本管理抖动。我们开始吧。我们开始吧。</p><h3 id="版本管理-FVM"><a href="#版本管理-FVM" class="headerlink" title="版本管理(FVM)"></a>版本管理(FVM)</h3><p>在进行 Flutter 项目时，需要发布更新的 Flutter 和应用程序，并进行验证，切换不同类型的软件开发工具包进行测试，这需要时间。为了避免这一点，我们使用 Flutter 版本管理，它为我们提供了不同类型的 Flutter 版本我们的机器。因此，每次 Flutter 可以测试应用程序对更新 Flutter 版本没有等待安装，将能够切换到 Flutter 版本相应。</p><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>首先需要确定 Flutter 是否已经安装，以及 Flutter 是否是稳定通道。如果没有，则在命令行中键入以下代码。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// set flutter to stable channel</span></span><br><span class="line">flutter channel stable<span class="comment">// check flutter channel</span></span><br><span class="line">flutter channel<span class="comment">// output</span></span><br><span class="line">Flutter channels:</span><br><span class="line">  master</span><br><span class="line">  dev</span><br><span class="line">  beta</span><br><span class="line">* stable</span><br></pre></td></tr></table></figure><p>在这之后，我们必须确定我们的 Flutter 是否已经安装或没有，如果没有，那么首先我们将安装 FVM</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pub global activate fvm</span><br></pre></td></tr></table></figure><p>step 现在我们将看到在安装过程结束时给出了一些警告，因此我们需要将 fvm 路径添加到 shell 配置文件(。在进行下一个步骤之前，请使用 bashrc、 bash_profile 等</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PATH=”<span class="variable">$PATH</span>:`<span class="built_in">pwd</span>`/flutter/bin”$ fvm install</span><br><span class="line"><span class="built_in">export</span> PATH=”<span class="variable">$PATH</span>:`<span class="built_in">pwd</span>`/bin/cache/dart-sdk/bin”</span><br><span class="line"><span class="built_in">export</span> PATH=”<span class="variable">$PATH</span>:`<span class="built_in">pwd</span>`/.pub-cache/bin”</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-22-08-27-39.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="SDK-版本说明"><a href="#SDK-版本说明" class="headerlink" title="SDK 版本说明"></a>SDK 版本说明</h3><p>DVM 允许我们安装多种类型的 Flutter 释放或通道安装通道使用稳定和安装 Flutter 释放版本我们将使用 v2.0.5 或 1.17.0-dev. 3.1 和一旦我们运行-跳过-安装，它将跳过安装</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ fvm install stable or fvm install 2.0.5</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-22-08-28-19.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="Project-Config-SDK-Version"><a href="#Project-Config-SDK-Version" class="headerlink" title="Project Config SDK Version"></a>Project Config SDK Version</h3><p>在此之后，我们将看到，无论项目是否配置为使用特定的版本，如果没有，我们将在没有参数的适当版本上安装它。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ fvm install</span><br></pre></td></tr></table></figure><h3 id="已安装的-Flutter-版本列表"><a href="#已安装的-Flutter-版本列表" class="headerlink" title="已安装的 Flutter 版本列表"></a>已安装的 Flutter 版本列表</h3><p>现在，通过输入以下命令，我们可以通过使用下面的命令 FVM 将存储 SDK 版本来列出我们机器上已安装的版本。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ fvm list</span><br></pre></td></tr></table></figure><h3 id="升级-SDK-版本"><a href="#升级-SDK-版本" class="headerlink" title="升级 SDK 版本"></a>升级 SDK 版本</h3><p>使用升级 SDK 版本命令时，我们需要升级我们目前的 SDK 版本，所以你必须调用您的 Flutter SDK 命令作为正常的 Flutter 安装。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ fvm flutter upgrade</span><br></pre></td></tr></table></figure><h3 id="设置-IDE"><a href="#设置-IDE" class="headerlink" title="设置 IDE"></a>设置 IDE</h3><p>现在我们来看看如何配置 IDE，下面我们展示了如何在 android studio 和 VS Code 中进行配置，现在让我们来看看。</p><ul><li>Android Studio</li></ul><p>在根项目目录中复制下面的绝对符号链接。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Example: /absolute/path-to-your-project/.fvm/flutter_sdk</span><br></pre></td></tr></table></figure><p>然后我们将在 Android Studio 的菜单中打开 Languages and Frameworks-&gt; Now search for flutter or flutter and change the path to flutter SDK。然后实施改变。现在您可以使用选定的 Flutter 版本运行它并调试它。如果你想看到新的设置，然后我们可以使用 Android 工作室将重新启动。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-22-08-30-46.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>VS Code</li></ul><p>现在我们将在这里配置 VS Code，我们将看到如何完成 VS Code 过程。</p><p>目录的路径，我们可以在代码中看到 FVM 安装的所有版本</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"dart.flutterSdkPaths"</span>: [<span class="string">"<span class="variable">$YOUR_PATH</span>/fvm/versions"</span>,],</span><br></pre></td></tr></table></figure><p>为了获得上面的路径，我们将执行 fvm list 命令</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// copy this path</span><br><span class="line">Versions path:  <span class="variable">$YOUR_PATH</span>/fvm/versions</span><br></pre></td></tr></table></figure><p>输入 cmd + shift + p 来使用 sdk，然后输入 change sdk，现在你可以选择你喜欢的版本了。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-22-08-32-16.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>在这篇文章中，我对版本管理做了一个简单的解释，你可以根据自己的需要对其进行修改和实验，这个简单的介绍来自于版本管理的 Flutter。</p><p>我希望这个博客将提供您尝试在 Flutter 版本管理充分的信息。我们向您展示了 Flutter 探索版本管理和工作在您的 Flutter 应用程序，所以请尝试它。</p><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.tech/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>在 dart fluter 中使用 typedef</title>
    <link href="https://blog.ducafecat.tech/2021/07/20/translation/explore-typedef-in-dart-fluter/"/>
    <id>https://blog.ducafecat.tech/2021/07/20/translation/explore-typedef-in-dart-fluter/</id>
    <published>2021-07-19T16:00:00.000Z</published>
    <updated>2021-07-20T00:06:15.277Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-20-08-05-07.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="老铁记得-转发-，猫哥会呈现更多-Flutter-好文"><a href="#老铁记得-转发-，猫哥会呈现更多-Flutter-好文" class="headerlink" title="老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~"></a>老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~</h2><h2 id="微信群-ducafecat"><a href="#微信群-ducafecat" class="headerlink" title="微信群 ducafecat"></a>微信群 ducafecat</h2><h2 id="b-站-https-space-bilibili-com-404904528"><a href="#b-站-https-space-bilibili-com-404904528" class="headerlink" title="b 站 https://space.bilibili.com/404904528"></a>b 站 <a href="https://space.bilibili.com/404904528" target="_blank" rel="noopener">https://space.bilibili.com/404904528</a></h2><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://medium.com/flutterdevs/explore-typedef-in-dart-fluter-6dd102fdf5f9" target="_blank" rel="noopener">https://medium.com/flutterdevs/explore-typedef-in-dart-fluter-6dd102fdf5f9</a></p></blockquote><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://dart.dev/guides/language/language-tour#typedefs" target="_blank" rel="noopener">https://dart.dev/guides/language/language-tour#typedefs</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-20-06-13-37.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>在这个博客中，我们将探索 TypeDef In Dart &amp; Fluter。它告诉你在 Dart 中使用 typedef 的最好方法。它同样工程在 Flutter 和有一个利用例子在您的 Flutter 应用程序。</p><p>在 Dart 中，您可以使用 typedef 关键字创建类型别名来使用某种类型。本文介绍了如何制作函数型和非函数型的 typedef，以及如何利用所制作的 typedef。</p><h3 id="如何为函数使用-typedef"><a href="#如何为函数使用-typedef" class="headerlink" title="如何为函数使用 typedef"></a>如何为函数使用 typedef</h3><p>Typedef 关键字最初是在 Dart 1 中使用的，用来暗示函数。在 Dart 1 中，如果需要将函数用作变量、字段或边界，则需要首先使用 typedef。</p><p>要使用类型别名，只需将函数标记降级为 typedef。从那时起，您可以使用 typedef 作为变量、字段或边界，如下面的模型所示。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> IntOperation&lt;<span class="built_in">int</span>&gt; = <span class="built_in">int</span> <span class="built_in">Function</span>(<span class="built_in">int</span> a, <span class="built_in">int</span> b);</span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span> processTwoInts (IntOperation&lt;<span class="built_in">int</span>&gt; intOperation, <span class="built_in">int</span> a, <span class="built_in">int</span> b) &#123;</span><br><span class="line">  <span class="keyword">return</span> intOperation(a, b);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  IntOperation&lt;<span class="built_in">int</span>&gt; intOperation;</span><br><span class="line"></span><br><span class="line">  MyClass(<span class="keyword">this</span>.intOperation);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">int</span> doIntOperation(<span class="built_in">int</span> a, <span class="built_in">int</span> b) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.intOperation(a, b);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  IntOperation&lt;<span class="built_in">int</span>&gt; sumTwoNumbers = (<span class="built_in">int</span> a, <span class="built_in">int</span> b) =&gt; a + b;</span><br><span class="line">  <span class="built_in">print</span>(sumTwoNumbers(<span class="number">2</span>, <span class="number">2</span>));</span><br><span class="line"></span><br><span class="line">  <span class="built_in">print</span>(processTwoInts(sumTwoNumbers, <span class="number">2</span>, <span class="number">1</span>));</span><br><span class="line"></span><br><span class="line">  MyClass myClass = MyClass(sumTwoNumbers);</span><br><span class="line">  <span class="built_in">print</span>(myClass.doIntOperation(<span class="number">4</span>, <span class="number">4</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当我们运行应用程序时，我们应该得到屏幕的输出，就像屏幕下方的最终输出一样:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">4</span><br><span class="line">3</span><br><span class="line">8</span><br></pre></td></tr></table></figure><blockquote><p>下面是函数具有泛型参数类型的另一个模型。</p></blockquote><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> Compare&lt;T&gt; = <span class="built_in">bool</span> <span class="built_in">Function</span>(T a, T b);</span><br><span class="line"><span class="built_in">bool</span> compareAsc(<span class="built_in">int</span> a, <span class="built_in">int</span> b) =&gt; a &lt; b;</span><br><span class="line"><span class="built_in">int</span> compareAsc2(<span class="built_in">int</span> a, <span class="built_in">int</span> b) =&gt; a - b;</span><br><span class="line"></span><br><span class="line"><span class="built_in">bool</span> doComparison&lt;T&gt;(Compare&lt;T&gt; compare, T a, T b) &#123;</span><br><span class="line">  <span class="keyword">assert</span>(compare <span class="keyword">is</span> Compare&lt;T&gt;);</span><br><span class="line">  <span class="keyword">return</span> compare(a, b);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="built_in">print</span>(compareAsc <span class="keyword">is</span> Compare&lt;<span class="built_in">int</span>&gt;);</span><br><span class="line">  <span class="built_in">print</span>(compareAsc2 <span class="keyword">is</span> Compare&lt;<span class="built_in">int</span>&gt;);</span><br><span class="line"></span><br><span class="line">  doComparison(compareAsc, <span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">  doComparison(compareAsc2, <span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当我们运行应用程序时，我们应该得到屏幕的输出，就像屏幕下方的最终输出一样:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">true</span></span><br><span class="line"><span class="literal">false</span></span><br><span class="line"><span class="literal">true</span></span><br></pre></td></tr></table></figure><p>自从 Dart 2 之后，你可以在任何地方使用函数类型的标点符号。因此，再使用 typedef 并不重要。另外还表示喜欢内联函数类型。这是因为阅读代码的个人可以直接看到函数类型。下面是可以与没有 typedef 的主体模型进行比较的内容。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> processTwoInts (<span class="built_in">int</span> <span class="built_in">Function</span>(<span class="built_in">int</span> a, <span class="built_in">int</span> b) intOperation, <span class="built_in">int</span> a, <span class="built_in">int</span> b) &#123;</span><br><span class="line">  <span class="keyword">return</span> intOperation(a, b);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">int</span> <span class="built_in">Function</span>(<span class="built_in">int</span> a, <span class="built_in">int</span> b) intOperation;</span><br><span class="line"></span><br><span class="line">  MyClass(<span class="keyword">this</span>.intOperation);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">int</span> doIntOperation(<span class="built_in">int</span> a, <span class="built_in">int</span> b) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.intOperation(a, b);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="built_in">int</span> <span class="built_in">Function</span>(<span class="built_in">int</span> a, <span class="built_in">int</span> b) sumTwoNumbers = (<span class="built_in">int</span> a, <span class="built_in">int</span> b) =&gt; a + b;</span><br><span class="line">  <span class="built_in">print</span>(sumTwoNumbers(<span class="number">2</span>, <span class="number">2</span>));</span><br><span class="line"></span><br><span class="line">  <span class="built_in">print</span>(processTwoInts(sumTwoNumbers, <span class="number">2</span>, <span class="number">1</span>));</span><br><span class="line"></span><br><span class="line">  MyClass myClass = MyClass(sumTwoNumbers);</span><br><span class="line">  <span class="built_in">print</span>(myClass.doIntOperation(<span class="number">4</span>, <span class="number">4</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>尽管如此，如果函数很长而且大部分时间被利用，那么使用 typedef 很有价值。</p><h3 id="对-Non-Functions-使用-typedef"><a href="#对-Non-Functions-使用-typedef" class="headerlink" title="对 Non-Functions 使用 typedef:"></a>对 Non-Functions 使用 typedef:</h3><p>在 Dart 2.13 之前，你可以使用 typedef 来处理函数类型。自从 Dart 2.13 以来，你同样可以使用 typedefs 来创建暗示非函数的类型别名。使用基本上是相同的，你只需要允许类型作为一个 typedef。</p><p>首先，你的 Dart 表格应该是 2.13 或以上版本。为 Flutter，你需要利用版本 2.2 或以上。此外，您还需要在 pubspec 中刷新基本 SDK 表单。Yaml to 2.13.0 and run bar get (for Dart)或 Flutter pub get (for Flutter)。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">environment:</span></span><br><span class="line"><span class="attr">  sdk:</span> <span class="string">"&gt;=2.13.0 &lt;3.0.0"</span></span><br></pre></td></tr></table></figure><p>例如，您需要描述存储整数数据列表的类型。由于这个原因，您可以创建一个 typedef，其类型是 <code>List &lt;int&gt;</code> 。之后，如果需要描述用于放置信息显示的变量，可以使用 typedef 作为类型。在下面的模型中，我们刻画了一个类型为 <code>List &lt;int&gt;</code> 的被认为是 DataList 的 typedef。正如您可以在下面的代码中找到的，利用 typedef 可以给您提供与利用实际类型相似的操作。您可以直接降级列表值，并访问 List 的技术和属性。如果你检查 runtimeType，你会得到 <code>List &lt;int&gt;</code> 作为结果。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> DataList = <span class="built_in">List</span>&lt;<span class="built_in">int</span>&gt;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  DataList data = [<span class="number">50</span>, <span class="number">60</span>];</span><br><span class="line">  data.add(<span class="number">100</span>);</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'length: <span class="subst">$&#123;data.length&#125;</span>'</span>);</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'values: $data'</span>);</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'type: <span class="subst">$&#123;data.runtimeType&#125;</span>'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>当我们运行应用程序时，我们应该得到屏幕的输出，就像屏幕下方的最终输出一样:</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">length: 3</span><br><span class="line">values: [50,60,100]</span><br><span class="line"><span class="built_in">type</span>: List&lt;int&gt;</span><br></pre></td></tr></table></figure><p>与变量不同，类型别名同样可以用作技术的字段、参数和返回值。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> DataList = <span class="built_in">List</span>&lt;<span class="built_in">int</span>&gt;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  DataList currentData;</span><br><span class="line"></span><br><span class="line">  MyClass(&#123;required <span class="keyword">this</span>.currentData&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">set</span> data(DataList currentData) &#123;</span><br><span class="line">    <span class="keyword">this</span>.currentData = currentData;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  ScoreList getMultipliedData(<span class="built_in">int</span> multiplyFactor) &#123;</span><br><span class="line">    DataList result = [];</span><br><span class="line"></span><br><span class="line">    currentData.forEach((element) &#123;</span><br><span class="line">      result.add(element * multiplyFactor);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  MyClass myClass = MyClass(currentData: [<span class="number">50</span>, <span class="number">60</span>, <span class="number">70</span>]);</span><br><span class="line"></span><br><span class="line">  myClass.data = [<span class="number">60</span>, <span class="number">70</span>];</span><br><span class="line">  <span class="built_in">print</span>(myClass.currentData);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">print</span>(myClass.getMultipliedData(<span class="number">3</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>当我们运行应用程序时，我们应该得到屏幕的输出，就像屏幕下方的最终输出一样:</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[70, 90]</span><br><span class="line">[180, 210]</span><br></pre></td></tr></table></figure><p>下面是另一种模式。例如，您需要一个用于存储请求正文的类型，该类型的键和值类型对于每种类型都可能不同。对于这种情况，<code>Map &lt;String，dynamic&gt; data type</code> 是合理的。尽管如此，每次您需要声明一个请求主体变量时，您可以为该类型创建 typedef，而不是使用 <code>Map &lt;String，dynamic&gt;</code> 。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> RequestBody = <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="keyword">final</span> RequestBody requestBody1 = &#123;</span><br><span class="line">    <span class="string">'type'</span>: <span class="string">'BUY'</span>,</span><br><span class="line">    <span class="string">'itemId'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'amount'</span>: <span class="number">200</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">final</span> RequestBody requestBody2 = &#123;</span><br><span class="line">    <span class="string">'type'</span>: <span class="string">'CANCEL_BUY'</span>,</span><br><span class="line">    <span class="string">'orderId'</span>: <span class="string">'04567835'</span>,</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">print</span>(requestBody1);</span><br><span class="line">  <span class="built_in">print</span>(requestBody2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>当我们运行应用程序时，我们应该得到屏幕的输出，就像屏幕下方的最终输出一样:</p></blockquote><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;type: BUY, itemId: 2, amount: 200&#125;</span><br><span class="line">&#123;type: CANCEL_BUY, orderId: 04567835&#125;</span><br></pre></td></tr></table></figure><p>还可以定义具有泛型类型参数的类型别名。下面的 ValueList 类型别名有一个泛型类型参数 t。使用类型别名定义变量时，可以传递要使用的泛型类型。</p><p>类似地，您可以表示具有泛型类型参数的类型别名。下面的 NumberList 类型别名具有一个非独占类型参数 t。在利用类型别名对变量进行特征化时，可以传递常规类型以进行利用。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> NumberList&lt;T&gt; = <span class="built_in">List</span>&lt;T&gt;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  NumberList&lt;<span class="built_in">String</span>&gt; numbers = [<span class="string">'1'</span>, <span class="string">'2'</span>, <span class="string">'3'</span>];</span><br><span class="line">  numbers.add(<span class="string">'4'</span>);</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'length: <span class="subst">$&#123;numbers.length&#125;</span>'</span>);</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'numbers: $numbers'</span>);</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'type: <span class="subst">$&#123;numbers.runtimeType&#125;</span>'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>当我们运行应用程序时，我们应该得到屏幕的输出，就像屏幕下方的最终输出一样:</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">length: 4</span><br><span class="line">numbers: [1, 2, 3, 4]</span><br><span class="line"><span class="built_in">type</span>: List&lt;String&gt;</span><br></pre></td></tr></table></figure><h3 id="Usage-in-Flutter"><a href="#Usage-in-Flutter" class="headerlink" title="Usage in Flutter"></a>Usage in Flutter</h3><p>下面的代码是一个 Flutter 模型，它为 <code>List &lt;widget&gt;</code> 类型定义了 typedef。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> WidgetList = <span class="built_in">List</span>&lt;Widget&gt;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() =&gt; runApp(MyApp());</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      title: <span class="string">'Flutter Demo'</span>,</span><br><span class="line">      home: TypedefExample(),</span><br><span class="line">      debugShowCheckedModeBanner: <span class="keyword">false</span>,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TypedefExample</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  WidgetList buildMethod() &#123;</span><br><span class="line">    <span class="keyword">return</span> &lt;Widget&gt;[</span><br><span class="line">      <span class="keyword">const</span> FlutterLogo(size: <span class="number">60</span>),</span><br><span class="line">      <span class="keyword">const</span> Text(<span class="string">'FlutterDevs.com'</span>, style: <span class="keyword">const</span> TextStyle(color:  Colors.blue, fontSize: <span class="number">24</span>)),</span><br><span class="line">    ];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: <span class="keyword">const</span> Text(<span class="string">'Flutter Demo'</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: SizedBox(</span><br><span class="line">        width: <span class="built_in">double</span>.infinity,</span><br><span class="line">        child: Column(</span><br><span class="line">          mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">          children: buildMethod(),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h3><p>在这篇文章中，我解释了在 Dart &amp; Fluter 中 TypeDef 的基本结构，您可以根据自己的选择修改这个代码。这是一个小型介绍 TypeDef 在 Dart 和 Fluter 对用户交互从我这边，它的工作使用 Flutter。</p><p>我希望这个博客能够为你提供足够的信息，帮助你在你的项目中尝试使用 TypeDef In Dart &amp; Fluter。这就是如何制作和利用 Dart/Flutter 中的 typedef。您需要允许 typedef 的类型或函数签名。然后，在这一点上，可以将所生成的 typedef 用作策略的变量、字段、参数或返回值。所以请尝试一下。</p><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.tech/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>在 Flutter 中实现文字动画</title>
    <link href="https://blog.ducafecat.tech/2021/07/19/translation/exploring-text-animations-in-flutter/"/>
    <id>https://blog.ducafecat.tech/2021/07/19/translation/exploring-text-animations-in-flutter/</id>
    <published>2021-07-18T16:00:00.000Z</published>
    <updated>2021-07-19T00:08:56.057Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-19-07-42-06.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="微信群-ducafecat"><a href="#微信群-ducafecat" class="headerlink" title="微信群 ducafecat"></a>微信群 ducafecat</h2><h2 id="b-站-https-space-bilibili-com-404904528"><a href="#b-站-https-space-bilibili-com-404904528" class="headerlink" title="b 站 https://space.bilibili.com/404904528"></a>b 站 <a href="https://space.bilibili.com/404904528" target="_blank" rel="noopener">https://space.bilibili.com/404904528</a></h2><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://medium.com/flutterdevs/exploring-text-animations-in-flutter-9b74103940d2" target="_blank" rel="noopener">https://medium.com/flutterdevs/exploring-text-animations-in-flutter-9b74103940d2</a></p></blockquote><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://pub.dev/packages/animated_text_kit" target="_blank" rel="noopener">https://pub.dev/packages/animated_text_kit</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-19-07-12-36.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>动画期望在更新您的应用程序的整体客户机体验从视觉分析，运动，和自定义动画的巨大的一部分，你真的可以想象！.就像协调到应用程序中的一些不同的东西一样，动画应该是有帮助的，而不是基本上是一个正常的复杂格式。</p><p>在 Flutter，动画是直接做到的，而且很多古怪的东西可以用比原生 Android 更少的努力来完善。</p><p>在本帖中，我们将探索 Flutter 文本动画。我们还将实现一个演示程序的文本动画，并显示一个冷静和美丽的文本动画收集使用的动画工具包在您的 Flutter 应用程序。</p><p><a href="https://pub.dev/packages/animated_text_kit" target="_blank" rel="noopener">https://pub.dev/packages/animated_text_kit</a></p><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>一个 Flutter 小工具包，包含一些很酷的和伟大的内容动画分类。我们将制作非凡的和优秀的内容动画利用动画 <code>animated_text_kit</code> 工具包包。</p><h3 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h3><p>以下是 AnimatedTextKit 的一些属性:</p><ul><li>animatedTexts: 动画文本: 此属性用于列出[ AnimatedText ] ，以便随后在动画中显示</li><li>isRepeatingAnimation: 重复动画: 此属性用于设置动画是否应该通过将其值更改为 false 来重复。默认情况下，它被设置为 true</li><li>totalRepeatCount: 累计重复计数: 此属性用于设置动画应重复的次数。默认情况下，设置为 3</li><li>repeatForever: 此属性用于设置动画是否会永远重复。如果你想永远重复，还需要将动画设置为 true</li><li>onFinished: 此属性用于将 onFinished [ VoidCallback ]添加到动画小部件。只有当[ isrepetinganimation ]设置为 false 时，此方法才会运行</li><li>onTap: 此属性用于将 onTap [ VoidCallback ]添加到动画小部件</li><li>stopPauseOnTap: 此属性用于暂停，是否需要点击删除剩余的暂停时间？.默认情况下，它被设置为 false</li></ul><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><ul><li>第一步: 添加依赖项</li></ul><blockquote><p>将依赖项添加到 pubspec.yaml 文件。</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">animated_text_kit:</span> <span class="string">^4.2.1</span></span><br></pre></td></tr></table></figure><ul><li>第二步: 导入</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:animated_text_kit/animated_text_kit.dart'</span>;</span><br></pre></td></tr></table></figure><ul><li>第三步: 在应用程序的根目录中运行 flutter 软件包。</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter packages get</span><br></pre></td></tr></table></figure><h3 id="如何实现-dart-文件中的代码"><a href="#如何实现-dart-文件中的代码" class="headerlink" title="如何实现 dart 文件中的代码"></a>如何实现 dart 文件中的代码</h3><p>你需要分别在你的代码中实现它:</p><blockquote><p>在 lib 文件夹中创建一个名为 home_page_screen.dart 的新 dart 文件。</p></blockquote><p>我们将在主页屏幕上创建九个不同的按钮，当用户点击按钮时，动画将工作。所有按钮都有不同的动画效果。我们将在下面深入讨论这个问题。当我们运行应用程序时，我们应该得到屏幕的输出，就像下面的屏幕截图一样。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-19-07-19-27.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h4 id="旋转动画文字"><a href="#旋转动画文字" class="headerlink" title="旋转动画文字"></a>旋转动画文字</h4><p>在正文中，我们将添加一个列小部件。在这个小部件中，添加一个具有高度和宽度的 Container。其子属性，添加一个 <code>_rotate()</code> 小部件。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Center(</span><br><span class="line">  child: Column(</span><br><span class="line">    crossAxisAlignment: CrossAxisAlignment.center,</span><br><span class="line">    mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">    children: [</span><br><span class="line">      Container(</span><br><span class="line">        decoration: BoxDecoration(color: Colors.red),</span><br><span class="line">        height: <span class="number">300.0</span>,</span><br><span class="line">        width: <span class="number">350.0</span>,</span><br><span class="line">        child: Center(</span><br><span class="line">          child: _rotate(),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    ],</span><br><span class="line">  ),</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>在 <code>_rotate()</code> 小部件中。我们将返回 Row 小部件。在内部，添加文本和 defaultextstyle()。它是子属性，我们将添加 AnimatedTextKit()小部件。在里面，我们将添加 repeatForever 是真实的，isRepeatingAnimation 也是真实的，并添加 animatedtext。在 animatedtext 中，我们将添加三个 RotateAnimatedText()。用户还可以添加持续时间，旋转。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">Widget _rotate()&#123;</span><br><span class="line">  <span class="keyword">return</span> Row(</span><br><span class="line">    mainAxisSize: MainAxisSize.min,</span><br><span class="line">    children: &lt;Widget&gt;[</span><br><span class="line">      <span class="keyword">const</span> SizedBox(width: <span class="number">10.0</span>, height: <span class="number">100.0</span>),</span><br><span class="line">      <span class="keyword">const</span> Text(</span><br><span class="line">        <span class="string">'Flutter'</span>,</span><br><span class="line">        style: TextStyle(fontSize: <span class="number">40.0</span>),</span><br><span class="line">      ),</span><br><span class="line">      <span class="keyword">const</span> SizedBox(width: <span class="number">15.0</span>, height: <span class="number">100.0</span>),</span><br><span class="line">      DefaultTextStyle(</span><br><span class="line">        style: <span class="keyword">const</span> TextStyle(</span><br><span class="line">          fontSize: <span class="number">35.0</span>,</span><br><span class="line">        ),</span><br><span class="line">        child: AnimatedTextKit(</span><br><span class="line">            repeatForever: <span class="keyword">true</span>,</span><br><span class="line">            isRepeatingAnimation: <span class="keyword">true</span>,</span><br><span class="line">            animatedTexts: [</span><br><span class="line">          RotateAnimatedText(<span class="string">'AWESOME'</span>),</span><br><span class="line">          RotateAnimatedText(<span class="string">'Text'</span>),</span><br><span class="line">          RotateAnimatedText(<span class="string">'Animation'</span>),</span><br><span class="line">        ]),</span><br><span class="line">      ),</span><br><span class="line">    ],</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当我们运行应用程序，我们应该得到屏幕的输出像下面的屏幕视频。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="rotate.gif" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h4 id="打字机动画文字"><a href="#打字机动画文字" class="headerlink" title="打字机动画文字"></a>打字机动画文字</h4><p>在正文中，我们将添加与上面相同的方法。但是在子属性中的更改，添加一个 <code>_typer</code> 小部件。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">Widget _typer()&#123;</span><br><span class="line">  <span class="keyword">return</span> SizedBox(</span><br><span class="line">    width: <span class="number">250.0</span>,</span><br><span class="line">    child: DefaultTextStyle(</span><br><span class="line">      style: <span class="keyword">const</span> TextStyle(</span><br><span class="line">        fontSize: <span class="number">30.0</span>,</span><br><span class="line">        fontFamily: <span class="string">'popin'</span>,</span><br><span class="line">      ),</span><br><span class="line">      child: AnimatedTextKit(</span><br><span class="line">        isRepeatingAnimation: <span class="keyword">true</span>,</span><br><span class="line">          animatedTexts: [</span><br><span class="line">            TyperAnimatedText(<span class="string">'When you talk, you are only repeating'</span></span><br><span class="line">                ,speed: <span class="built_in">Duration</span>(milliseconds: <span class="number">100</span>)),</span><br><span class="line">            TyperAnimatedText(<span class="string">'something you know.But if you listen,'</span></span><br><span class="line">                ,speed: <span class="built_in">Duration</span>(milliseconds: <span class="number">100</span>)),</span><br><span class="line">            TyperAnimatedText(<span class="string">' you may learn something new.'</span></span><br><span class="line">                ,speed: <span class="built_in">Duration</span>(milliseconds: <span class="number">100</span>)),</span><br><span class="line">            TyperAnimatedText(<span class="string">'– Dalai Lama'</span></span><br><span class="line">                ,speed: <span class="built_in">Duration</span>(milliseconds: <span class="number">100</span>)),</span><br><span class="line">          ]</span><br><span class="line">    ),</span><br><span class="line">  ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在这个小部件中，我们将返回 SizedBox()。在内部，我们将添加 DefaultTextStyle()并添加 AnimatedTextKit()小部件。在这个小部件中，我们将添加 animatedtext。在内部，我们将添加四个带有速度持续时间的 TyperAnimatedText()。当我们运行应用程序，我们应该得到屏幕的输出像下面的屏幕视频。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="type.gif" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h4 id="淡出动画文本"><a href="#淡出动画文本" class="headerlink" title="淡出动画文本"></a>淡出动画文本</h4><p>在正文中，我们将添加与上面相同的方法。但是如果改变子属性，添加一个 <code>_fade</code> 小部件。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">Widget _fade()&#123;</span><br><span class="line">  <span class="keyword">return</span> SizedBox(</span><br><span class="line">    child: DefaultTextStyle(</span><br><span class="line">      style: <span class="keyword">const</span> TextStyle(</span><br><span class="line">        fontSize: <span class="number">32.0</span>,</span><br><span class="line">        fontWeight: FontWeight.bold,</span><br><span class="line">      ),</span><br><span class="line">      child: Center(</span><br><span class="line">        child: AnimatedTextKit(</span><br><span class="line">          repeatForever: <span class="keyword">true</span>,</span><br><span class="line">          animatedTexts: [</span><br><span class="line">            FadeAnimatedText(<span class="string">'THE HARDER!!'</span>,</span><br><span class="line">                duration: <span class="built_in">Duration</span>(seconds: <span class="number">3</span>),fadeOutBegin: <span class="number">0.9</span>,fadeInEnd: <span class="number">0.7</span>),</span><br><span class="line">            FadeAnimatedText(<span class="string">'YOU WORK!!'</span>,</span><br><span class="line">                duration: <span class="built_in">Duration</span>(seconds: <span class="number">3</span>),fadeOutBegin: <span class="number">0.9</span>,fadeInEnd: <span class="number">0.7</span>),</span><br><span class="line">            FadeAnimatedText(<span class="string">'THE LUCKIER!!!'</span>,</span><br><span class="line">                duration: <span class="built_in">Duration</span>(seconds: <span class="number">3</span>),fadeOutBegin: <span class="number">0.9</span>,fadeInEnd: <span class="number">0.7</span>),</span><br><span class="line">            FadeAnimatedText(<span class="string">'YOU GET!!!!'</span>,</span><br><span class="line">                duration: <span class="built_in">Duration</span>(seconds: <span class="number">3</span>),fadeOutBegin: <span class="number">0.9</span>,fadeInEnd: <span class="number">0.7</span>),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在这个小部件中，我们将返回 SizedBox()。在内部，我们将添加 DefaultTextStyle()并添加 AnimatedTextKit()小部件。在这个小部件中，我们将添加 animatedtext。在内部，我们将添加 4 个 FadeAnimatedText() ，其中包括速度持续时间、 fadeOutBegin 和 fadeInEnd。比 fadeInEnd 要好。当我们运行应用程序，我们应该得到屏幕的输出像下面的屏幕视频。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="fade.gif" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h4 id="缩放动画文字"><a href="#缩放动画文字" class="headerlink" title="缩放动画文字"></a>缩放动画文字</h4><p>在正文中，我们将添加与上面相同的方法。但是在子属性中的更改，添加一个 <code>_scale</code> 小部件。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">Widget _scale()&#123;</span><br><span class="line">  <span class="keyword">return</span> SizedBox(</span><br><span class="line">    child: DefaultTextStyle(</span><br><span class="line">      style: <span class="keyword">const</span> TextStyle(</span><br><span class="line">        fontSize: <span class="number">50.0</span>,</span><br><span class="line">        fontFamily: <span class="string">'SF'</span>,</span><br><span class="line">      ),</span><br><span class="line">      child: Center(</span><br><span class="line">        child: AnimatedTextKit(</span><br><span class="line">          repeatForever: <span class="keyword">true</span>,</span><br><span class="line">          animatedTexts: [</span><br><span class="line">            ScaleAnimatedText(<span class="string">'Eat'</span>,scalingFactor: <span class="number">0.2</span>),</span><br><span class="line">            ScaleAnimatedText(<span class="string">'Code'</span>,scalingFactor: <span class="number">0.2</span>),</span><br><span class="line">            ScaleAnimatedText(<span class="string">'Sleep'</span>,scalingFactor: <span class="number">0.2</span>),</span><br><span class="line">            ScaleAnimatedText(<span class="string">'Repeat'</span>,scalingFactor: <span class="number">0.2</span>),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在这个小部件中，我们将返回 SizedBox()。在内部，我们将添加 DefaultTextStyle()并添加 AnimatedTextKit()小部件。在这个小部件中，我们将添加 animatedtext。在内部，我们将添加四个带有 scalingFactor 的 ScaleAnimatedText()。scalingFactor 设置了动画文本的缩放因子。当我们运行应用程序，我们应该得到屏幕的输出像下面的屏幕视频。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="scale.gif" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h4 id="TextLiquidFill-动画"><a href="#TextLiquidFill-动画" class="headerlink" title="TextLiquidFill 动画"></a>TextLiquidFill 动画</h4><p>在正文中，我们将添加与上面相同的方法。但是如果更改子属性，则添加一个 <code>_textLiquidFillAnimation</code> 小部件。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Widget _textLiquidFillAnimation()&#123;</span><br><span class="line">  <span class="keyword">return</span> SizedBox(</span><br><span class="line">    child: Center(</span><br><span class="line">      child: TextLiquidFill(</span><br><span class="line">        text: <span class="string">'Flutter Devs'</span>,</span><br><span class="line">        waveDuration: <span class="built_in">Duration</span>(seconds: <span class="number">5</span>),</span><br><span class="line">        waveColor: Colors.blue,</span><br><span class="line">        boxBackgroundColor: Colors.green,</span><br><span class="line">        textStyle: TextStyle(</span><br><span class="line">          fontSize: <span class="number">50.0</span>,</span><br><span class="line">          fontWeight: FontWeight.bold,</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在这个小部件中，我们将返回 SizedBox()。在内部，我们将添加 TextLiquidFill()小部件。在这个小部件中，我们将添加文本、 waveDuration、 waveColor 和 boxBackgroundColor。当我们运行应用程序，我们应该得到屏幕的输出像下面的屏幕视频。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="textLiquidFill.gif" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h4 id="动画文字"><a href="#动画文字" class="headerlink" title="动画文字"></a>动画文字</h4><p>在正文中，我们将添加与上面相同的方法。但是如果改变子属性，添加一个 <code>_wave</code> 小部件。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Widget _wavy()&#123;</span><br><span class="line">  <span class="keyword">return</span> DefaultTextStyle(</span><br><span class="line">    style: <span class="keyword">const</span> TextStyle(</span><br><span class="line">      fontSize: <span class="number">25.0</span>,</span><br><span class="line">    ),</span><br><span class="line">    child: AnimatedTextKit(</span><br><span class="line">      animatedTexts: [</span><br><span class="line">        WavyAnimatedText(<span class="string">"Flutter is Google's UI toolkit,"</span>,</span><br><span class="line">            speed: <span class="built_in">Duration</span>(milliseconds: <span class="number">200</span>)),</span><br><span class="line">        WavyAnimatedText(<span class="string">'for building beautiful Apps'</span>,</span><br><span class="line">            speed: <span class="built_in">Duration</span>(milliseconds: <span class="number">200</span>)),</span><br><span class="line">      ],</span><br><span class="line">      isRepeatingAnimation: <span class="keyword">true</span>,</span><br><span class="line">      repeatForever: <span class="keyword">true</span>,</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在这个小部件中，我们将返回 DefaultTextStyle()。在内部，我们将添加 AnimatedTextKit()小部件。在这个小部件中，我们将添加 animatedtext。在内部，我们将添加两个 WavyAnimatedText()和文本的速度持续时间。当我们运行应用程序，我们应该得到屏幕的输出像下面的屏幕视频。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="wavy.gif" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h4 id="闪烁动画文字"><a href="#闪烁动画文字" class="headerlink" title="闪烁动画文字"></a>闪烁动画文字</h4><p>在正文中，我们将添加与上面相同的方法。但是在子属性中的更改，添加一个 <code>_flicker</code> 小部件。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">Widget _flicker()&#123;</span><br><span class="line">  <span class="keyword">return</span> SizedBox(</span><br><span class="line">    width: <span class="number">250.0</span>,</span><br><span class="line">    child: DefaultTextStyle(</span><br><span class="line">      style: <span class="keyword">const</span> TextStyle(</span><br><span class="line">        fontSize: <span class="number">30</span>,</span><br><span class="line">      ),</span><br><span class="line">      child: AnimatedTextKit(</span><br><span class="line">        repeatForever: <span class="keyword">true</span>,</span><br><span class="line">        animatedTexts: [</span><br><span class="line">          FlickerAnimatedText(<span class="string">'FlutterDevs specializes in creating,'</span>,</span><br><span class="line">              speed: <span class="built_in">Duration</span>(milliseconds: <span class="number">1000</span>),entryEnd: <span class="number">0.7</span>),</span><br><span class="line">          FlickerAnimatedText(<span class="string">'cost-effective and'</span>,</span><br><span class="line">              speed: <span class="built_in">Duration</span>(milliseconds: <span class="number">1000</span>),entryEnd: <span class="number">0.7</span>),</span><br><span class="line">          FlickerAnimatedText(<span class="string">"efficient applications!"</span>,</span><br><span class="line">              speed: <span class="built_in">Duration</span>(milliseconds: <span class="number">1000</span>),entryEnd: <span class="number">0.7</span>),</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在这个小部件中，我们将返回 SizedBox()。在内部，我们将添加 DefaultTextStyle()并添加 AnimatedTextKit()小部件。在这个小部件中，我们将添加 animatedtext。在内部，我们将添加四个具有 entryEnd 和速度的 FlickerAnimatedText()。entryEnd 被标记为文本闪烁输入间隔的结束。当我们运行应用程序，我们应该得到屏幕的输出像下面的屏幕视频。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="flicker.gif" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h4 id="彩色动画文本"><a href="#彩色动画文本" class="headerlink" title="彩色动画文本"></a>彩色动画文本</h4><p>在正文中，我们将添加与上面相同的方法。但是在子属性中的更改，添加一个 <code>_colorize</code> 的小部件。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">Widget _colorize()&#123;</span><br><span class="line">  <span class="keyword">return</span> SizedBox(</span><br><span class="line">    child: Center(</span><br><span class="line">      child: AnimatedTextKit(</span><br><span class="line">        animatedTexts: [</span><br><span class="line">          ColorizeAnimatedText(</span><br><span class="line">            <span class="string">'Mobile Developer'</span>,</span><br><span class="line">            textStyle: colorizeTextStyle,</span><br><span class="line">            colors: colorizeColors,</span><br><span class="line">          ),</span><br><span class="line">          ColorizeAnimatedText(</span><br><span class="line">            <span class="string">'Software Testing'</span>,</span><br><span class="line">            textStyle: colorizeTextStyle,</span><br><span class="line">            colors: colorizeColors,</span><br><span class="line">          ),</span><br><span class="line">          ColorizeAnimatedText(</span><br><span class="line">            <span class="string">'Software Engineer'</span>,</span><br><span class="line">            textStyle: colorizeTextStyle,</span><br><span class="line">            colors: colorizeColors,</span><br><span class="line">          ),</span><br><span class="line">        ],</span><br><span class="line">        isRepeatingAnimation: <span class="keyword">true</span>,</span><br><span class="line">        repeatForever: <span class="keyword">true</span>,</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在这个小部件中，我们将返回 SizedBox()。在内部，我们将添加 AnimatedTextKit()小部件。在这个小部件中，我们将添加 animatedtext。在内部，我们将添加三个带有 textStyle 和颜色的 colorizeanmatedtext()。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">List</span>&lt;MaterialColor&gt; colorizeColors = [</span><br><span class="line">  Colors.red,</span><br><span class="line">  Colors.yellow,</span><br><span class="line">  Colors.purple,</span><br><span class="line">  Colors.blue,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> colorizeTextStyle = TextStyle(</span><br><span class="line">  fontSize: <span class="number">40.0</span>,</span><br><span class="line">  fontFamily: <span class="string">'SF'</span>,</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>用户可以根据文本改变颜色。当我们运行应用程序，我们应该得到屏幕的输出像下面的屏幕视频</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="colorize.gif" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h4 id="打字机动画文字-1"><a href="#打字机动画文字-1" class="headerlink" title="打字机动画文字"></a>打字机动画文字</h4><p>在正文中，我们将添加与上面相同的方法。但是如果更改子属性，则添加 <code>_typeWriter</code> 小部件。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">Widget _typeWriter()&#123;</span><br><span class="line">  <span class="keyword">return</span> SizedBox(</span><br><span class="line">    child: DefaultTextStyle(</span><br><span class="line">      style: <span class="keyword">const</span> TextStyle(</span><br><span class="line">        fontSize: <span class="number">30.0</span>,</span><br><span class="line">      ),</span><br><span class="line">      child: Padding(</span><br><span class="line">        padding: <span class="keyword">const</span> EdgeInsets.all(<span class="number">8.0</span>),</span><br><span class="line">        child: Center(</span><br><span class="line">          child: AnimatedTextKit(</span><br><span class="line">            repeatForever: <span class="keyword">true</span>,</span><br><span class="line">            animatedTexts: [</span><br><span class="line">              TypewriterAnimatedText(<span class="string">'FlutterDevs specializes in creating cost-effective'</span>,</span><br><span class="line">                  curve: Curves.easeIn,speed: <span class="built_in">Duration</span>(milliseconds: <span class="number">80</span>)),</span><br><span class="line">              TypewriterAnimatedText(<span class="string">'and efficient applications with our perfectly crafted,'</span>,</span><br><span class="line">                  curve: Curves.easeIn,speed: <span class="built_in">Duration</span>(milliseconds: <span class="number">80</span>)),</span><br><span class="line">              TypewriterAnimatedText(<span class="string">'creative and leading-edge flutter app development solutions'</span>,</span><br><span class="line">                  curve: Curves.easeIn,speed: <span class="built_in">Duration</span>(milliseconds: <span class="number">80</span>)),</span><br><span class="line">              TypewriterAnimatedText(<span class="string">'for customers all around the globe.'</span>,</span><br><span class="line">                  curve: Curves.easeIn,speed: <span class="built_in">Duration</span>(milliseconds: <span class="number">80</span>)),</span><br><span class="line">            ],</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在这个小部件中，我们将返回 SizedBox()。在内部，我们将添加 DefaultTextStyle()并添加 AnimatedTextKit()小部件。在这个小部件中，我们将添加 animatedtext。内部，我们将添加四个打字机动画文本()与曲线和速度。当我们运行应用程序，我们应该得到屏幕的输出像下面的屏幕视频。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="typeWriter.gif" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h4 id="所有代码"><a href="#所有代码" class="headerlink" title="所有代码"></a>所有代码</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_animation_text/colorize_animation_text.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_animation_text/fade_animation_text.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_animation_text/flicker_animation_text.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_animation_text/rotate_animation_text.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_animation_text/scale_animation_text.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_animation_text/text_liquid_fill_animation.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_animation_text/typer_animation_text.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_animation_text/typewriter_animated_text.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_animation_text/wavy_animation_text.dart'</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HomePageScreen</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _HomePageScreenState createState() =&gt; _HomePageScreenState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_HomePageScreenState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">HomePageScreen</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      backgroundColor: Color(<span class="number">0xffFFFFFF</span>),</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        backgroundColor: Colors.black,</span><br><span class="line">        title: Text(<span class="string">'Flutter Animations Text Demo'</span>),</span><br><span class="line">        automaticallyImplyLeading: <span class="keyword">false</span>,</span><br><span class="line">        centerTitle: <span class="keyword">true</span>,</span><br><span class="line">      ),</span><br><span class="line">      body: Center(</span><br><span class="line">          child: Padding(</span><br><span class="line">            padding: <span class="keyword">const</span> EdgeInsets.all(<span class="number">16.0</span>),</span><br><span class="line">            child: Column(</span><br><span class="line">              mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">              crossAxisAlignment: CrossAxisAlignment.stretch,</span><br><span class="line">              children: &lt;Widget&gt;[</span><br><span class="line"></span><br><span class="line">                <span class="comment">// ignore: deprecated_member_use</span></span><br><span class="line">                RaisedButton(</span><br><span class="line">                  child: Text(<span class="string">'Rotate Animation Text'</span>,style: TextStyle(color: Colors.black),),</span><br><span class="line">                  color: Colors.tealAccent,</span><br><span class="line">                  onPressed:() &#123;</span><br><span class="line">                    Navigator.of(context).push(</span><br><span class="line">                        MaterialPageRoute(builder:(context) =&gt; RotateAnimationText()));</span><br><span class="line">                  &#125;,</span><br><span class="line">                  shape: RoundedRectangleBorder(borderRadius: BorderRadius.all(Radius.circular(<span class="number">20</span>))),</span><br><span class="line">                  padding: EdgeInsets.all(<span class="number">13</span>),</span><br><span class="line">                ),</span><br><span class="line">                SizedBox(height: <span class="number">8</span>,),</span><br><span class="line">                <span class="comment">// ignore: deprecated_member_use</span></span><br><span class="line">                RaisedButton(</span><br><span class="line">                  child: Text(<span class="string">'Typer Animation Text'</span>,style: TextStyle(color: Colors.black),),</span><br><span class="line">                  color: Colors.tealAccent,</span><br><span class="line">                  onPressed:() &#123;</span><br><span class="line">                    Navigator.of(context).push(</span><br><span class="line">                        MaterialPageRoute(builder:(context) =&gt; TyperAnimationText()));</span><br><span class="line">                  &#125;,</span><br><span class="line">                  shape: RoundedRectangleBorder(borderRadius: BorderRadius.all(Radius.circular(<span class="number">20</span>))),</span><br><span class="line">                  padding: EdgeInsets.all(<span class="number">13</span>),</span><br><span class="line"></span><br><span class="line">                ),</span><br><span class="line">                SizedBox(height: <span class="number">8</span>,),</span><br><span class="line">                <span class="comment">// ignore: deprecated_member_use</span></span><br><span class="line">                RaisedButton(</span><br><span class="line">                  child: Text(<span class="string">'Fade Animation Text'</span>,style: TextStyle(color: Colors.black),),</span><br><span class="line">                  color: Colors.tealAccent,</span><br><span class="line">                  onPressed:() &#123;</span><br><span class="line">                    Navigator.of(context).push(</span><br><span class="line">                        MaterialPageRoute(builder:(context) =&gt; FadeAnimationText()));</span><br><span class="line">                  &#125;,</span><br><span class="line">                  shape: RoundedRectangleBorder(borderRadius: BorderRadius.all(Radius.circular(<span class="number">20</span>))),</span><br><span class="line">                  padding: EdgeInsets.all(<span class="number">13</span>),</span><br><span class="line"></span><br><span class="line">                ),</span><br><span class="line">                SizedBox(height: <span class="number">8</span>,),</span><br><span class="line">                <span class="comment">// ignore: deprecated_member_use</span></span><br><span class="line">                RaisedButton(</span><br><span class="line">                  child: Text(<span class="string">'Scale Animation Text'</span>,style: TextStyle(color: Colors.black),),</span><br><span class="line">                  color: Colors.tealAccent,</span><br><span class="line">                  onPressed:() &#123;</span><br><span class="line">                    Navigator.of(context).push(</span><br><span class="line">                        MaterialPageRoute(builder:(context) =&gt; ScaleAnimationText()));</span><br><span class="line">                  &#125;,</span><br><span class="line">                  shape: RoundedRectangleBorder(borderRadius: BorderRadius.all(Radius.circular(<span class="number">20</span>))),</span><br><span class="line">                  padding: EdgeInsets.all(<span class="number">13</span>),</span><br><span class="line"></span><br><span class="line">                ),</span><br><span class="line">                SizedBox(height: <span class="number">8</span>,),</span><br><span class="line">                <span class="comment">// ignore: deprecated_member_use</span></span><br><span class="line">                RaisedButton(</span><br><span class="line">                  child: Text(<span class="string">'TextLiquidFill Animation'</span>,style: TextStyle(color: Colors.black),),</span><br><span class="line">                  color: Colors.tealAccent,</span><br><span class="line">                  onPressed:() &#123;</span><br><span class="line">                    Navigator.of(context).push(</span><br><span class="line">                        MaterialPageRoute(builder:(context) =&gt; TextLiquidFillAnimation()));</span><br><span class="line">                  &#125;,</span><br><span class="line">                  shape: RoundedRectangleBorder(borderRadius: BorderRadius.all(Radius.circular(<span class="number">20</span>))),</span><br><span class="line">                  padding: EdgeInsets.all(<span class="number">13</span>),</span><br><span class="line"></span><br><span class="line">                ),</span><br><span class="line">                SizedBox(height: <span class="number">8</span>,),</span><br><span class="line">                <span class="comment">// ignore: deprecated_member_use</span></span><br><span class="line">                RaisedButton(</span><br><span class="line">                  child: Text(<span class="string">'Wavy Animation Text'</span>,style: TextStyle(color: Colors.black),),</span><br><span class="line">                  color: Colors.tealAccent,</span><br><span class="line">                  onPressed:() &#123;</span><br><span class="line">                    Navigator.of(context).push(</span><br><span class="line">                        MaterialPageRoute(builder:(context) =&gt; WavyAnimationText()));</span><br><span class="line">                  &#125;,</span><br><span class="line">                  shape: RoundedRectangleBorder(borderRadius: BorderRadius.all(Radius.circular(<span class="number">20</span>))),</span><br><span class="line">                  padding: EdgeInsets.all(<span class="number">13</span>),</span><br><span class="line"></span><br><span class="line">                ),</span><br><span class="line">                SizedBox(height: <span class="number">8</span>,),</span><br><span class="line">                <span class="comment">// ignore: deprecated_member_use</span></span><br><span class="line">                RaisedButton(</span><br><span class="line">                  child: Text(<span class="string">'Flicker Animation Text'</span>,style: TextStyle(color: Colors.black),),</span><br><span class="line">                  color: Colors.tealAccent,</span><br><span class="line">                  onPressed:() &#123;</span><br><span class="line">                    Navigator.of(context).push(</span><br><span class="line">                        MaterialPageRoute(builder:(context) =&gt; FlickerAnimationText()));</span><br><span class="line">                  &#125;,</span><br><span class="line">                  shape: RoundedRectangleBorder(borderRadius: BorderRadius.all(Radius.circular(<span class="number">20</span>))),</span><br><span class="line">                  padding: EdgeInsets.all(<span class="number">13</span>),</span><br><span class="line"></span><br><span class="line">                ),</span><br><span class="line">                SizedBox(height: <span class="number">8</span>,),</span><br><span class="line">                <span class="comment">// ignore: deprecated_member_use</span></span><br><span class="line">                RaisedButton(</span><br><span class="line">                  child: Text(<span class="string">'Colorize Animation Text'</span>,style: TextStyle(color: Colors.black),),</span><br><span class="line">                  color: Colors.tealAccent,</span><br><span class="line">                  onPressed:() &#123;</span><br><span class="line">                    Navigator.of(context).push(</span><br><span class="line">                        MaterialPageRoute(builder:(context) =&gt; ColorizeAnimationText()));</span><br><span class="line">                  &#125;,</span><br><span class="line">                  shape: RoundedRectangleBorder(borderRadius: BorderRadius.all(Radius.circular(<span class="number">20</span>))),</span><br><span class="line">                  padding: EdgeInsets.all(<span class="number">13</span>),</span><br><span class="line"></span><br><span class="line">                ),</span><br><span class="line">                SizedBox(height: <span class="number">8</span>,),</span><br><span class="line"></span><br><span class="line">                <span class="comment">// ignore: deprecated_member_use</span></span><br><span class="line">                RaisedButton(</span><br><span class="line">                  child: Text(<span class="string">'Typewriter Animation Text'</span>,style: TextStyle(color: Colors.black),),</span><br><span class="line">                  color: Colors.tealAccent,</span><br><span class="line">                  onPressed:() &#123;</span><br><span class="line">                    Navigator.of(context).push(</span><br><span class="line">                        MaterialPageRoute(builder:(context) =&gt; TypewriterAnimationText()));</span><br><span class="line">                  &#125;,</span><br><span class="line">                  shape: RoundedRectangleBorder(borderRadius: BorderRadius.all(Radius.circular(<span class="number">20</span>))),</span><br><span class="line">                  padding: EdgeInsets.all(<span class="number">13</span>),</span><br><span class="line"></span><br><span class="line">                ),</span><br><span class="line"></span><br><span class="line">              ],</span><br><span class="line">            ),</span><br><span class="line">          )</span><br><span class="line">      ), <span class="comment">//center</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>在这篇文章中，我已经简单地解释了文本动画的基本结构，您可以根据自己的选择修改这个代码。这是一个小的介绍文本动画用户交互从我这边，它的工作使用扑动。</p><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.tech/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 自动生成json实体类</title>
    <link href="https://blog.ducafecat.tech/2021/07/14/translation/automatic-generate-json-serializable-in-flutter/"/>
    <id>https://blog.ducafecat.tech/2021/07/14/translation/automatic-generate-json-serializable-in-flutter/</id>
    <published>2021-07-13T16:00:00.000Z</published>
    <updated>2021-07-14T00:07:08.157Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-14-08-07-05.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="老铁记得-转发-，猫哥会呈现更多-Flutter-好文"><a href="#老铁记得-转发-，猫哥会呈现更多-Flutter-好文" class="headerlink" title="老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~"></a>老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~</h2><h2 id="微信群-ducafecat"><a href="#微信群-ducafecat" class="headerlink" title="微信群 ducafecat"></a>微信群 ducafecat</h2><h2 id="b-站-https-space-bilibili-com-404904528"><a href="#b-站-https-space-bilibili-com-404904528" class="headerlink" title="b 站 https://space.bilibili.com/404904528"></a>b 站 <a href="https://space.bilibili.com/404904528" target="_blank" rel="noopener">https://space.bilibili.com/404904528</a></h2><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://medium.com/flutterdevs/automatic-generate-json-serializable-in-flutter-4c9d2d23ed88" target="_blank" rel="noopener">https://medium.com/flutterdevs/automatic-generate-json-serializable-in-flutter-4c9d2d23ed88</a></p></blockquote><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://pub.dev/packages/json_serializable" target="_blank" rel="noopener">https://pub.dev/packages/json_serializable</a></li><li><a href="https://pub.dev/packages/json_annotation" target="_blank" rel="noopener">https://pub.dev/packages/json_annotation</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><p>Flutter 是一个可移植的 UI 工具包。换句话说，它是一个全面的应用软件开发工具包(SDK) ，包括小部件和工具。Flutter 是一个免费的开源工具，用于开发移动、桌面和 web 应用程序。Flutter 是一种跨平台的开发工具。这意味着用同样的代码，我们可以同时创建 ios 和 android 应用程序。这是在整个过程中节省时间和资源的最佳方式。</p><p>在本文中，我们将探索使用 json_serializable 包和 json_annotation，并了解如何使用它将我们的模型解析到 JSON 并通过序列化生成我们自己的代码。我们开始吧。</p><h3 id="JSON-Serializable"><a href="#JSON-Serializable" class="headerlink" title="JSON Serializable"></a>JSON Serializable</h3><p>JSON (JSON)是一种数据格式，它将对象编码成字符串。这种数据可以很容易地在服务器和浏览器之间转换，也可以在服务器和服务器之间转换。序列化是将对象转换为相同字符串的过程。为此，我们使用 json 序列化包，但是它可以根据 json 注释库提供的注释为您生成一个模型类。</p><h3 id="Implementation"><a href="#Implementation" class="headerlink" title="Implementation"></a>Implementation</h3><p>每当我们需要建立模型和工厂的时候。因为模型不会总是改变，所以你不需要总是改变模型。因此，为了使用 JSON，我们必须添加下面解释的一些包。</p><ul><li>这是提供给 Dart 构建系统的。当它在用 json_annotation 定义的类中找到带注释的成员时，就会生成代码</li><li>它定义了 JSON_serializable 用于创建 JSON 序列化、反序列化类型的代码的注释</li><li>我们使用 build_runner 包来生成使用 dart 代码的文件</li></ul><p>现在让我们看看如何将所有这些包添加到 pubspec 中。</p><ul><li>第一步: 添加依赖项</li></ul><blockquote><p>将依赖项添加到 pubspec ー yaml 文件。</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">dependencies:</span></span><br><span class="line"><span class="attr">  flutter:</span></span><br><span class="line"><span class="attr">    sdk:</span> <span class="string">flutter</span></span><br><span class="line">  <span class="comment"># The following adds the Cupertino Icons font to your application.</span></span><br><span class="line">  <span class="comment"># Use with the CupertinoIcons class for iOS style icons.</span></span><br><span class="line"><span class="attr">  cupertino_icons:</span> <span class="string">^0.1.2</span></span><br><span class="line"><span class="attr">  json_annotation:</span> <span class="string">^4.0.1</span></span><br><span class="line"></span><br><span class="line"><span class="attr">dev_dependencies:</span></span><br><span class="line"><span class="attr">  flutter_test:</span></span><br><span class="line"><span class="attr">    sdk:</span> <span class="string">flutter</span></span><br><span class="line"></span><br><span class="line"><span class="attr">  build_runner:</span> <span class="string">^2.0.5</span></span><br><span class="line"><span class="attr">  json_serializable:</span> <span class="string">^4.1.3</span></span><br></pre></td></tr></table></figure><ul><li>第二步: Importing</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:json_annotation/json_annotation.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:build_runner/build_runner.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:json_serializable/json_serializable.dart'</span>;</span><br></pre></td></tr></table></figure><ul><li>第三步: 启用 AndriodX</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">org.gradle.jvmargs=-Xmx1536M</span><br><span class="line">android.enableR8=true</span><br><span class="line">android.useAndroidX=true</span><br><span class="line">android.enableJetifier=true</span><br></pre></td></tr></table></figure><h3 id="如何实现-dart-文件中的代码"><a href="#如何实现-dart-文件中的代码" class="headerlink" title="如何实现 dart 文件中的代码"></a>如何实现 dart 文件中的代码</h3><blockquote><p>你需要分别在你的代码中实现它</p></blockquote><p>首先，我们将创建一个我们命名为 user.dart 的模型类。</p><p>现在我们将看到 Dart 如何使用 Dart: convert 库本机支持手动序列化。用户 dart 文件准备好了，我们将有一个数据 JSON 对象的列表，其中每个对象将有一个用户名，姓氏，和它的地址，我们已经在字符串类型的变量中定义了，你将看到在数据类中我们有两个我们需要创建函数，分别称为 fromJson 和 toJson，它们将 JSON 转换为我们的用户类。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:json_annotation/json_annotation.dart'</span>;</span><br><span class="line"><span class="keyword">part</span> <span class="string">'user.g.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@JsonSerializable</span>()</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">  <span class="built_in">String</span> name, lastName, add;</span><br><span class="line">  <span class="built_in">bool</span> subscription;</span><br><span class="line"></span><br><span class="line">  User(&#123;<span class="keyword">this</span>.name,<span class="keyword">this</span>.lastName,<span class="keyword">this</span>.add,<span class="keyword">this</span>.subscription,&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">factory</span> User.fromJson(<span class="built_in">Map</span>&lt;<span class="built_in">String</span>,<span class="keyword">dynamic</span>&gt; data) =&gt; _$UserFromJson(data);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">Map</span>&lt;<span class="built_in">String</span>,<span class="keyword">dynamic</span>&gt; toJson() =&gt; _$UserToJson(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>现在，当我们运行 <code>build_runner</code> 命令时，json<em>serializer 将生成这个 `</em>$UserFromJson(json)<code>。我们将从中获得</code>user.g.dart` 文件。</p><p>要运行 <code>build_runner</code> 命令，我们将在 Android Studio 中打开一个终端，并输入以下行。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter pub run build_runner build</span><br></pre></td></tr></table></figure><p>当我们在构建运行程序中运行这个命令时，会出现一些行，过一段时间后它就成功生成了。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">INFO] Generating build script...</span><br><span class="line">[INFO] Generating build script completed, took 301ms[INFO] Initializing inputs</span><br><span class="line">[INFO] Reading cached asset graph...[INFO] Reading cached asset graph completed, took 305ms[INFO] Checking <span class="keyword">for</span> updates since last build...[INFO] Checking <span class="keyword">for</span> updates since last build completed, took 1.5s[INFO] Running build...[INFO] Running build completed, took 4.7s[INFO] Caching finalized</span><br><span class="line">dependency graph...[INFO] Caching finalized dependency graph completed, took 44ms[INFO] Succeeded after 4.8s with 0 outputs (1 actions)</span><br></pre></td></tr></table></figure><p>在 <code>build_runner</code> 进程完成之后，我们在一个包含序列化代码的用户文件下面添加一个名为 user.g.dart 的新文件。当我们制作一个新的模型，然后我们流过这个过程。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// GENERATED CODE - DO NOT MODIFY BY HAND</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">part</span> of <span class="string">'user.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// **************************************************************************</span></span><br><span class="line"><span class="comment">// JsonSerializableGenerator</span></span><br><span class="line"><span class="comment">// **************************************************************************</span></span><br><span class="line"></span><br><span class="line">User _$UserFromJson(<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; json) &#123;</span><br><span class="line">  <span class="keyword">return</span> User(</span><br><span class="line">    name: json[<span class="string">'name'</span>] <span class="keyword">as</span> <span class="built_in">String</span>,</span><br><span class="line">    lastName: json[<span class="string">'lastName'</span>] <span class="keyword">as</span> <span class="built_in">String</span>,</span><br><span class="line">    add: json[<span class="string">'add'</span>] <span class="keyword">as</span> <span class="built_in">String</span>,</span><br><span class="line">    subscription: json[<span class="string">'subscription'</span>] <span class="keyword">as</span> <span class="built_in">bool</span>,</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; _$UserToJson(User instance) =&gt; &lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt;&#123;</span><br><span class="line">      <span class="string">'name'</span>: instance.name,</span><br><span class="line">      <span class="string">'lastName'</span>: instance.lastName,</span><br><span class="line">      <span class="string">'add'</span>: instance.add,</span><br><span class="line">      <span class="string">'subscription'</span>: instance.subscription,</span><br><span class="line">    &#125;;</span><br></pre></td></tr></table></figure><p>在此之后，我们创建了一个类，其中显示了一个列表项，我们已经为该列表项定义了一个未来的生成器列表视图生成器，其中我们已经在文本小部件中定义了用户列表的项。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">FutureBuilder&lt;<span class="built_in">List</span>&lt;User&gt;&gt;(</span><br><span class="line">    future: getData(),</span><br><span class="line">    builder: (context, data) &#123;</span><br><span class="line">      <span class="keyword">if</span> (data.connectionState != ConnectionState.waiting &amp;&amp;</span><br><span class="line">          data.hasData) &#123;</span><br><span class="line">        <span class="keyword">var</span> userList = data.data;</span><br><span class="line">        <span class="keyword">return</span> ListView.builder(</span><br><span class="line">            itemCount: userList.length,</span><br><span class="line">            itemBuilder: (context, index) &#123;</span><br><span class="line">              <span class="keyword">var</span> userData = userList[index];</span><br><span class="line">              <span class="keyword">return</span> Container(</span><br><span class="line">                height: <span class="number">100</span>,</span><br><span class="line">                margin: EdgeInsets.only(top: <span class="number">30</span>, left: <span class="number">20</span>, right: <span class="number">20</span>),</span><br><span class="line">                decoration: BoxDecoration(</span><br><span class="line">                  color: Colors.grey.shade200,</span><br><span class="line">                  borderRadius: BorderRadius.all(Radius.circular(<span class="number">10</span>)),</span><br><span class="line">                ),</span><br><span class="line">                padding: EdgeInsets.all(<span class="number">15</span>),</span><br><span class="line">                child: Column(</span><br><span class="line">                  crossAxisAlignment: CrossAxisAlignment.start,</span><br><span class="line">                  mainAxisAlignment: MainAxisAlignment.spaceAround,</span><br><span class="line">                  children: [</span><br><span class="line">                    Text(</span><br><span class="line">                      <span class="string">'First Name: '</span> + userData.name,</span><br><span class="line">                      style: TextStyle(</span><br><span class="line">                          fontWeight: FontWeight.w600,),</span><br><span class="line">                    ),</span><br><span class="line">                  ],</span><br><span class="line">                ),</span><br><span class="line">              );</span><br><span class="line">            &#125;);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Center(</span><br><span class="line">          child: CircularProgressIndicator(),</span><br><span class="line">        );</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure><p>当我们运行应用程序时，我们应该得到屏幕的输出，就像下面的屏幕截图一样。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-14-07-56-13.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="Code-File"><a href="#Code-File" class="headerlink" title="Code File"></a>Code File</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'dart:convert'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_json_serilization_exm/main.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_json_serilization_exm/model/user.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">JsonSerilization</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _JsonSerilizationState createState() =&gt; _JsonSerilizationState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_JsonSerilizationState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">JsonSerilization</span>&gt; </span>&#123;</span><br><span class="line">  Future&lt;<span class="built_in">List</span>&lt;User&gt;&gt; getData() <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">await</span> Future.delayed(<span class="built_in">Duration</span>(seconds: <span class="number">2</span>), () &#123;</span><br><span class="line">      <span class="built_in">List</span>&lt;<span class="keyword">dynamic</span>&gt; data = jsonDecode(JSON);</span><br><span class="line">      <span class="built_in">List</span>&lt;User&gt; users = data.map((data) =&gt; User.fromJson(data)).toList();</span><br><span class="line">      <span class="keyword">return</span> users;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">"Json Serialization Demo"</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Container(</span><br><span class="line">        child: FutureBuilder&lt;<span class="built_in">List</span>&lt;User&gt;&gt;(</span><br><span class="line">            future: getData(),</span><br><span class="line">            builder: (context, data) &#123;</span><br><span class="line">              <span class="keyword">if</span> (data.connectionState != ConnectionState.waiting &amp;&amp;</span><br><span class="line">                  data.hasData) &#123;</span><br><span class="line">                <span class="keyword">var</span> userList = data.data;</span><br><span class="line">                <span class="keyword">return</span> ListView.builder(</span><br><span class="line">                    itemCount: userList.length,</span><br><span class="line">                    itemBuilder: (context, index) &#123;</span><br><span class="line">                      <span class="keyword">var</span> userData = userList[index];</span><br><span class="line">                      <span class="keyword">return</span> Container(</span><br><span class="line">                        height: <span class="number">100</span>,</span><br><span class="line">                        margin: EdgeInsets.only(top: <span class="number">30</span>, left: <span class="number">20</span>, right: <span class="number">20</span>),</span><br><span class="line">                        decoration: BoxDecoration(</span><br><span class="line">                          color: Colors.grey.shade200,</span><br><span class="line">                          borderRadius: BorderRadius.all(Radius.circular(<span class="number">10</span>)),</span><br><span class="line">                        ),</span><br><span class="line">                        padding: EdgeInsets.all(<span class="number">15</span>),</span><br><span class="line">                        child: Column(</span><br><span class="line">                          crossAxisAlignment: CrossAxisAlignment.start,</span><br><span class="line">                          mainAxisAlignment: MainAxisAlignment.spaceAround,</span><br><span class="line">                          children: [</span><br><span class="line">                            Text(</span><br><span class="line">                              <span class="string">'First Name: '</span> + userData.name,</span><br><span class="line">                              style: TextStyle(</span><br><span class="line">                                  fontWeight: FontWeight.w600, fontSize: <span class="number">15</span>),</span><br><span class="line">                            ),</span><br><span class="line">                            Text(</span><br><span class="line">                              <span class="string">'Last Name: '</span> + userData.lastName,</span><br><span class="line">                              style: TextStyle(</span><br><span class="line">                                  fontWeight: FontWeight.w600, fontSize: <span class="number">15</span>),</span><br><span class="line">                            ),</span><br><span class="line">                            Text(</span><br><span class="line">                              <span class="string">'Add: '</span> + userData.add,</span><br><span class="line">                              style: TextStyle(</span><br><span class="line">                                  fontWeight: FontWeight.w600, fontSize: <span class="number">15</span>),</span><br><span class="line">                            ),</span><br><span class="line">                          ],</span><br><span class="line">                        ),</span><br><span class="line">                      );</span><br><span class="line">                    &#125;);</span><br><span class="line">              &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> Center(</span><br><span class="line">                  child: CircularProgressIndicator(),</span><br><span class="line">                );</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h3><p>在这篇文章中，我解释了自动生成 JSON 系列化 Flutter，你可以根据自己的修改和实验，这个小介绍是从自动生成 JSON 系列化 Flutter 演示从我们这边。</p><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.tech/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 自定义聊天气泡</title>
    <link href="https://blog.ducafecat.tech/2021/07/13/translation/custom-chat-bubble-in-flutter/"/>
    <id>https://blog.ducafecat.tech/2021/07/13/translation/custom-chat-bubble-in-flutter/</id>
    <published>2021-07-12T16:00:00.000Z</published>
    <updated>2021-07-12T23:26:08.508Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-13-07-26-06.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="老铁记得-转发-，猫哥会呈现更多-Flutter-好文"><a href="#老铁记得-转发-，猫哥会呈现更多-Flutter-好文" class="headerlink" title="老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~"></a>老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~</h2><h2 id="微信群-ducafecat"><a href="#微信群-ducafecat" class="headerlink" title="微信群 ducafecat"></a>微信群 ducafecat</h2><h2 id="b-站-https-space-bilibili-com-404904528"><a href="#b-站-https-space-bilibili-com-404904528" class="headerlink" title="b 站 https://space.bilibili.com/404904528"></a>b 站 <a href="https://space.bilibili.com/404904528" target="_blank" rel="noopener">https://space.bilibili.com/404904528</a></h2><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://medium.com/flutterdevs/custom-chat-bubble-in-flutter-6aa7d24fc683" target="_blank" rel="noopener">https://medium.com/flutterdevs/custom-chat-bubble-in-flutter-6aa7d24fc683</a></p></blockquote><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/flutter-devs/flutter_custom_chat_bubble" target="_blank" rel="noopener">https://github.com/flutter-devs/flutter_custom_chat_bubble</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://pub.flutter-io.cn/packages/get#reactive-state-manager" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/get#reactive-state-manager</a></li><li><a href="https://dart.dev/guides/language/extension-methods" target="_blank" rel="noopener">https://dart.dev/guides/language/extension-methods</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-13-07-13-02.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>对话聊天应用程序显示聊天中的消息会在强烈的阴影背景下上升。现代聊天应用程序显示的聊天气泡的斜率取决于气泡在屏幕上的位置。在 flutter 应用中，有时需要使用聊天气泡。然而，将一个库用于一个特别无关紧要的任务并不好。</p><p>在这个博客，我们将探索自定义聊天气泡 flutter。我们将看到如何实现一个自定义聊天泡泡的演示程序，以及如何使一个自定义聊天泡泡最简单的不使用任何第三方库在您的 flutter 应用程序。</p><h3 id="配置-assets"><a href="#配置-assets" class="headerlink" title="配置 assets"></a>配置 assets</h3><ul><li>第一步: 添加 assets</li></ul><p>将 assets 添加到 <code>pubspec.yaml</code> 文件。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">assets:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">assets/images/</span></span><br></pre></td></tr></table></figure><ul><li>第二步: 在应用程序的根目录中运行 <code>flutter packages get</code> 。</li></ul><h3 id="如何实现-dart-文件中的代码"><a href="#如何实现-dart-文件中的代码" class="headerlink" title="如何实现 dart 文件中的代码:"></a>如何实现 dart 文件中的代码:</h3><p>你需要分别在你的代码中实现它:</p><p>在 lib 文件夹中创建一个名为 <code>custom_shape.dart</code> 的新 dart 文件。</p><p>首先，创建自定义形状自定义 <code>CustomPainter</code> 类。这将用于在聊天气泡结束时绘制自定义形状。用户可以在自定义形状中添加任何颜色。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CustomShape</span> <span class="keyword">extends</span> <span class="title">CustomPainter</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> Color bgColor;</span><br><span class="line"></span><br><span class="line">  CustomShape(<span class="keyword">this</span>.bgColor);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> paint(Canvas canvas, Size size) &#123;</span><br><span class="line">    <span class="keyword">var</span> paint = Paint()..color = bgColor;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> path = Path();</span><br><span class="line">    path.lineTo(<span class="number">-5</span>, <span class="number">0</span>);</span><br><span class="line">    path.lineTo(<span class="number">0</span>, <span class="number">10</span>);</span><br><span class="line">    path.lineTo(<span class="number">5</span>, <span class="number">0</span>);</span><br><span class="line">    canvas.drawPath(path, paint);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">bool</span> shouldRepaint(CustomPainter oldDelegate) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在 lib 文件夹中创建一个名为 <code>send_message_screen.dart</code> 的新 dart 文件。</p><p>首先，我们将创建一个构造器的最终字符串消息。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="built_in">String</span> message;</span><br><span class="line"><span class="keyword">const</span> SentMessageScreen(&#123;</span><br><span class="line">  Key key,</span><br><span class="line">  <span class="meta">@required</span> <span class="keyword">this</span>.message,</span><br><span class="line">&#125;) : <span class="keyword">super</span>(key: key);</span><br></pre></td></tr></table></figure><p>在构建方法中，我们将返回 Padding()。在内部，我们将添加 Row() 小部件。在这个小部件中，我们将添加 mainAxisAlignment 并添加 messageTextGroup。我们将定义下面的代码。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> Padding(</span><br><span class="line">  padding: EdgeInsets.only(right: <span class="number">18.0</span>, left: <span class="number">50</span>, top: <span class="number">15</span>, bottom: <span class="number">5</span>),</span><br><span class="line">  child: Row(</span><br><span class="line">    mainAxisAlignment: MainAxisAlignment.end,</span><br><span class="line">    children: &lt;Widget&gt;[</span><br><span class="line">      SizedBox(height: <span class="number">30</span>),</span><br><span class="line">      messageTextGroup,</span><br><span class="line">    ],</span><br><span class="line">  ),</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>我们将深入定义 messageTextGroup:</p><p>我们将创建一个最终的 messageTextGroup 等于 Flexible ()小部件。在这个小部件中，我们将添加 Row ()小部件。在内部，添加主轴对齐是结束，并启动了跨轴对齐。在儿童内部，我们将添加装饰框的 Conatiner 和添加颜色，边框半径。它的子属性，我们将添加一个可变消息文本。我们将添加 CustomPaint () ，我们将使用上面的画家类是带颜色的 CustomShape。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> messageTextGroup = Flexible(</span><br><span class="line">    child: Row(</span><br><span class="line">      mainAxisAlignment: MainAxisAlignment.end,</span><br><span class="line">      crossAxisAlignment: CrossAxisAlignment.start,</span><br><span class="line">      children: [</span><br><span class="line">        Flexible(</span><br><span class="line">          child: Container(</span><br><span class="line">            padding: EdgeInsets.all(<span class="number">14</span>),</span><br><span class="line">            decoration: BoxDecoration(</span><br><span class="line">              color: Colors.cyan[<span class="number">900</span>],</span><br><span class="line">              borderRadius: BorderRadius.only(</span><br><span class="line">                topLeft: Radius.circular(<span class="number">18</span>),</span><br><span class="line">                bottomLeft: Radius.circular(<span class="number">18</span>),</span><br><span class="line">                bottomRight: Radius.circular(<span class="number">18</span>),</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">            child: Text(</span><br><span class="line">              message,</span><br><span class="line">              style: TextStyle(color: Colors.white, fontSize: <span class="number">14</span>),</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">        CustomPaint(painter: CustomShape(Colors.cyan[<span class="number">900</span>])),</span><br><span class="line">      ],</span><br><span class="line">    ));</span><br></pre></td></tr></table></figure><p>在 lib 文件夹中创建一个名为 <code>received_message_screen.dart</code> 的新 dart 文件。</p><p>类似地，我们现在可以创建一个接收到的消息屏幕。我们只需要翻转定制的形状，并把它放在开始，而不是结束。我们将使用转换小部件翻转自定义形状小部件。在转换小部件中，我们将添加对齐为中心，转换为 <code>Matrix4.rotationY(math. pi)</code>。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> messageTextGroup = Flexible(</span><br><span class="line">    child: Row(</span><br><span class="line">      mainAxisAlignment: MainAxisAlignment.start,</span><br><span class="line">      crossAxisAlignment: CrossAxisAlignment.start,</span><br><span class="line">      children: [</span><br><span class="line">        Transform(</span><br><span class="line">          alignment: Alignment.center,</span><br><span class="line">          transform: Matrix4.rotationY(math.pi),</span><br><span class="line">          child: CustomPaint(</span><br><span class="line">            painter: CustomShape(Colors.grey[<span class="number">300</span>]),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">        Flexible(</span><br><span class="line">          child: Container(</span><br><span class="line">            padding: EdgeInsets.all(<span class="number">14</span>),</span><br><span class="line">            decoration: BoxDecoration(</span><br><span class="line">              color: Colors.grey[<span class="number">300</span>],</span><br><span class="line">              borderRadius: BorderRadius.only(</span><br><span class="line">                topRight: Radius.circular(<span class="number">18</span>),</span><br><span class="line">                bottomLeft: Radius.circular(<span class="number">18</span>),</span><br><span class="line">                bottomRight: Radius.circular(<span class="number">18</span>),</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">            child: Text(</span><br><span class="line">              message,</span><br><span class="line">              style: TextStyle(color: Colors.black, fontSize: <span class="number">14</span>),</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ],</span><br><span class="line">    ));</span><br></pre></td></tr></table></figure><p>在 lib 文件夹中创建一个名为 <code>home_page.dart</code> 的新 dart 文件。</p><p>在正文中，我们将添加一个 Container ()小部件。在里面，添加装饰框和添加图像。它是子属性，我们可以在 ListView ()中同时添加发送和接收消息屏幕。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Container(</span><br><span class="line">  decoration: BoxDecoration(</span><br><span class="line">      image: DecorationImage(</span><br><span class="line">          image: AssetImage(<span class="string">"assets/bg_chat.jpg"</span>),</span><br><span class="line">          fit: BoxFit.cover)),</span><br><span class="line">  child: ListView(</span><br><span class="line">    children: [</span><br><span class="line">      SentMessageScreen(message: <span class="string">"Hello"</span>),</span><br><span class="line">      ReceivedMessageScreen(message: <span class="string">"Hi, how are you"</span>),</span><br><span class="line">      SentMessageScreen(message: <span class="string">"I am great how are you doing"</span>),</span><br><span class="line">      ReceivedMessageScreen(message: <span class="string">"I am also fine"</span>),</span><br><span class="line">      SentMessageScreen(message: <span class="string">"Can we meet tomorrow?"</span>),</span><br><span class="line">      ReceivedMessageScreen(message: <span class="string">"Yes, of course we will meet tomorrow"</span>),</span><br><span class="line">    ],</span><br><span class="line">  ),</span><br><span class="line">),</span><br></pre></td></tr></table></figure><p>当我们运行应用程序时，我们应该得到屏幕的输出，就像下面的屏幕截图一样。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-13-07-19-48.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="完整代码"><a href="#完整代码" class="headerlink" title="完整代码"></a>完整代码</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_custom_chat_bubble/received_message_screen.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_custom_chat_bubble/send_messsage_screen.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HomePage</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  HomePage(&#123;Key key, <span class="keyword">this</span>.title&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> title;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _HomePageState createState() =&gt; _HomePageState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_HomePageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">HomePage</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        backgroundColor: Colors.cyan[<span class="number">900</span>],</span><br><span class="line">        automaticallyImplyLeading: <span class="keyword">false</span>,</span><br><span class="line">        title: Text(widget.title),</span><br><span class="line">      ),</span><br><span class="line">      body: Container(</span><br><span class="line">        decoration: BoxDecoration(</span><br><span class="line">            image: DecorationImage(</span><br><span class="line">                image: AssetImage(<span class="string">"assets/bg_chat.jpg"</span>),</span><br><span class="line">                fit: BoxFit.cover)),</span><br><span class="line">        child: ListView(</span><br><span class="line">          children: [</span><br><span class="line">            SentMessageScreen(message: <span class="string">"Hello"</span>),</span><br><span class="line">            ReceivedMessageScreen(message: <span class="string">"Hi, how are you"</span>),</span><br><span class="line">            SentMessageScreen(message: <span class="string">"I am great how are you doing"</span>),</span><br><span class="line">            ReceivedMessageScreen(message: <span class="string">"I am also fine"</span>),</span><br><span class="line">            SentMessageScreen(message: <span class="string">"Can we meet tomorrow?"</span>),</span><br><span class="line">            ReceivedMessageScreen(message: <span class="string">"Yes, of course we will meet tomorrow"</span>),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion:"></a>Conclusion:</h3><p>在文章中，我已经解释了自定义聊天气泡的基本结构，您可以根据自己的选择修改这个代码。这是一个小的介绍自定义聊天泡泡用户交互从我这边，它的工作使用 flutter。</p><p>我希望这个博客将提供您尝试在您的 flutter 项目自定义聊天气泡充分的信息。我们将为工作的演示程序自定义聊天气泡使用任何第三方库在您的 flutter 应用程序。所以请尝试一下。</p><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.tech/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 如何处理401 未授权的 Dio 拦截器</title>
    <link href="https://blog.ducafecat.tech/2021/07/09/translation/how-to-handle-401-unauthorised-with-dio-interceptor-flutter/"/>
    <id>https://blog.ducafecat.tech/2021/07/09/translation/how-to-handle-401-unauthorised-with-dio-interceptor-flutter/</id>
    <published>2021-07-08T16:00:00.000Z</published>
    <updated>2021-07-08T14:00:29.351Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-08-22-00-27.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="老铁记得-转发-，猫哥会呈现更多-Flutter-好文"><a href="#老铁记得-转发-，猫哥会呈现更多-Flutter-好文" class="headerlink" title="老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~"></a>老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~</h2><h2 id="微信群-ducafecat"><a href="#微信群-ducafecat" class="headerlink" title="微信群 ducafecat"></a>微信群 ducafecat</h2><h2 id="b-站-https-space-bilibili-com-404904528"><a href="#b-站-https-space-bilibili-com-404904528" class="headerlink" title="b 站 https://space.bilibili.com/404904528"></a>b 站 <a href="https://space.bilibili.com/404904528" target="_blank" rel="noopener">https://space.bilibili.com/404904528</a></h2><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://medium.com/@wmnkrishanmadushanka/how-to-handle-401-unauthorised-with-dio-interceptor-flutter-60398a914406" target="_blank" rel="noopener">https://medium.com/@wmnkrishanmadushanka/how-to-handle-401-unauthorised-with-dio-interceptor-flutter-60398a914406</a></p></blockquote><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://pub.dev/packages/dio/versions/4.0.0" target="_blank" rel="noopener">https://pub.dev/packages/dio/versions/4.0.0</a></li><li><a href="https://pub.dev/packages/flutter_secure_storage" target="_blank" rel="noopener">https://pub.dev/packages/flutter_secure_storage</a></li><li><a href="https://pub.dev/packages/shared_preferences" target="_blank" rel="noopener">https://pub.dev/packages/shared_preferences</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><p>在本文中，我将解释如何使用 flutter dio (4.0.0)进行网络调用，以及如何在您的 flutter 应用程序中使用刷新令牌和访问令牌来处理授权时处理 401。</p><p>在阅读这篇文章之前，我希望你们对颤抖移动应用程序开发有一个基本的了解。</p><h3 id="Basic-Authentication-flow-with-refresh-and-access-tokens"><a href="#Basic-Authentication-flow-with-refresh-and-access-tokens" class="headerlink" title="Basic Authentication flow with refresh and access tokens"></a>Basic Authentication flow with refresh and access tokens</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-08-21-53-21.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>正如您在上面的图中所看到的，很明显，在身份验证流中使用刷新和访问令牌时的流程是什么。登录后，您将获得两个称为刷新和访问的标记。此访问令牌快速过期(刷新令牌也过期，但是它将比访问令牌花费更多的时间)。当您使用过期的访问令牌发出请求时，响应中会出现状态码 401(未经授权)。在这种情况下，您必须从服务器请求一个新的令牌，并使用有效的访问令牌再次发出上一个请求。如果刷新令牌也已过期，您必须指示用户登录页面并强制再次登录。</p><h3 id="Dio-class"><a href="#Dio-class" class="headerlink" title="Dio class"></a>Dio class</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DioUtil</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> Dio _instance;<span class="comment">//method for getting dio instance  Dio getInstance() &#123;</span></span><br><span class="line">    <span class="keyword">if</span> (_instance == <span class="keyword">null</span>) &#123;</span><br><span class="line">      _instance = createDioInstance();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> _instance;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   Dio createDioInstance() &#123;</span><br><span class="line">    <span class="keyword">var</span> dio = Dio();<span class="comment">// adding interceptor    dio.interceptors.clear();</span></span><br><span class="line">    dio.interceptors.add(InterceptorsWrapper(onRequest: (options, handler) &#123;</span><br><span class="line">      <span class="keyword">return</span> handler.next(options);</span><br><span class="line">    &#125;, onResponse: (response, handler) &#123;</span><br><span class="line">      <span class="keyword">if</span> (response != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> handler.next(response);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, onError: (DioError e, handler) <span class="keyword">async</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (e.response != <span class="keyword">null</span>) &#123;</span><br><span class="line">          <span class="keyword">if</span> (e.response.statusCode == <span class="number">401</span>) &#123;<span class="comment">//catch the 401 here</span></span><br><span class="line">            dio.interceptors.requestLock.lock();</span><br><span class="line">            dio.interceptors.responseLock.lock();</span><br><span class="line">            RequestOptions requestOptions = e.requestOptions;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">await</span> refreshToken();</span><br><span class="line">            Repository repository = Repository();</span><br><span class="line">            <span class="keyword">var</span> accessToken = <span class="keyword">await</span> repository.readData(<span class="string">"accessToken"</span>);</span><br><span class="line">            <span class="keyword">final</span> opts = <span class="keyword">new</span> Options(method: requestOptions.method);</span><br><span class="line">            dio.options.headers[<span class="string">"Authorization"</span>] = <span class="string">"Bearer "</span> + accessToken;</span><br><span class="line">            dio.options.headers[<span class="string">"Accept"</span>] = <span class="string">"*/*"</span>;</span><br><span class="line">            dio.interceptors.requestLock.unlock();</span><br><span class="line">            dio.interceptors.responseLock.unlock();</span><br><span class="line">            <span class="keyword">final</span> response = <span class="keyword">await</span> dio.request(requestOptions.path,</span><br><span class="line">                options: opts,</span><br><span class="line">                cancelToken: requestOptions.cancelToken,</span><br><span class="line">                onReceiveProgress: requestOptions.onReceiveProgress,</span><br><span class="line">                data: requestOptions.data,</span><br><span class="line">                queryParameters: requestOptions.queryParameters);</span><br><span class="line">            <span class="keyword">if</span> (response != <span class="keyword">null</span>) &#123;</span><br><span class="line">              handler.resolve(response);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">              <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            handler.next(e);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;));</span><br><span class="line">    <span class="keyword">return</span> dio;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> refreshToken() <span class="keyword">async</span> &#123;</span><br><span class="line">    Response response;</span><br><span class="line">    Repository repository = Repository();</span><br><span class="line">    <span class="keyword">var</span> dio = Dio();</span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">Uri</span> apiUrl = <span class="built_in">Uri</span>.parse(BASE_PATH + <span class="string">"auth/reIssueAccessToken"</span>);</span><br><span class="line">    <span class="keyword">var</span> refreshToken = <span class="keyword">await</span> repository.readData(<span class="string">"refreshToken"</span>);</span><br><span class="line">    dio.options.headers[<span class="string">"Authorization"</span>] = <span class="string">"Bearer "</span> + refreshToken;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      response = <span class="keyword">await</span> dio.postUri(apiUrl);</span><br><span class="line">      <span class="keyword">if</span> (response.statusCode == <span class="number">200</span>) &#123;</span><br><span class="line">        LoginResponse loginResponse =</span><br><span class="line">            LoginResponse.fromJson(jsonDecode(response.toString()));</span><br><span class="line">        repository.addValue(<span class="string">'accessToken'</span>, loginResponse.data.accessToken);</span><br><span class="line">        repository.addValue(<span class="string">'refreshToken'</span>, loginResponse.data.refreshToken);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(response.toString()); <span class="comment">//<span class="doctag">TODO:</span> logout</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      <span class="built_in">print</span>(e.toString()); <span class="comment">//<span class="doctag">TODO:</span> logout</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>以上是完整的课程，我将解释其中最重要的部分。</p><p>主要是，正如您在 createDioInstance 方法中看到的，您必须添加一个拦截器来捕获 401。当 401 发生在 error: (DioError e，handler) async {}被调用时。所以你的内心</p><ol><li>Check the error code(401), 检查错误代码(401) ,</li><li>Get new access token 获取新的访问令牌</li></ol><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">await</span> refreshToken();</span><br></pre></td></tr></table></figure><p>上面的代码将调用 refreshToken 方法并在存储库中存储新的刷新和访问令牌。(对于存储库，您可以使用 secure storage or shared preferences)</p><ol start="3"><li>复制前一个请求并设置新的访问令牌</li></ol><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">RequestOptions requestOptions = e.requestOptions;</span><br><span class="line">Repository repository = Repository();</span><br><span class="line"><span class="keyword">var</span> accessToken = <span class="keyword">await</span> repository.readData(<span class="string">"accessToken"</span>);</span><br><span class="line"><span class="keyword">final</span> opts = <span class="keyword">new</span> Options(method: requestOptions.method);</span><br><span class="line">dio.options.headers[<span class="string">"Authorization"</span>] = <span class="string">"Bearer "</span> + accessToken;</span><br><span class="line">dio.options.headers[<span class="string">"Accept"</span>] = <span class="string">"*/*"</span>;</span><br></pre></td></tr></table></figure><ol start="4"><li>Make the previous call again</li></ol><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> response = <span class="keyword">await</span> dio.request(requestOptions.path,</span><br><span class="line">    options: opts,</span><br><span class="line">    cancelToken: requestOptions.cancelToken,</span><br><span class="line">    onReceiveProgress: requestOptions.onReceiveProgress,</span><br><span class="line">    data: requestOptions.data,</span><br><span class="line">    queryParameters: requestOptions.queryParameters);</span><br></pre></td></tr></table></figure><p>一旦收到回复，就 call</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">handler.resolve(response);</span><br></pre></td></tr></table></figure><p>然后响应将被发送到您调用 api 的位置，如下所示。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> dio = DioUtil().getInstance();</span><br><span class="line"><span class="keyword">final</span> <span class="built_in">String</span> apiUrl = (BASE_PATH + <span class="string">"payments/addNewPayment/"</span>);</span><br><span class="line"><span class="keyword">var</span> accessToken = <span class="keyword">await</span> repository.readData(<span class="string">"accessToken"</span>);</span><br><span class="line">dio.options.headers[<span class="string">"Authorization"</span>] = <span class="string">"Bearer "</span> + accessToken;</span><br><span class="line">dio.options.headers[<span class="string">"Accept"</span>] = <span class="string">"*/*"</span>;<span class="comment">//response will be assigned to response variable</span></span><br><span class="line">response = <span class="keyword">await</span> dio.post(apiUrl, data: event.paymentRequest.toJson());</span><br></pre></td></tr></table></figure><p>Thats all. happy coding :)</p><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.tech/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>转换 JSON API 用 Chopper 和 JsonSerializable</title>
    <link href="https://blog.ducafecat.tech/2021/07/08/translation/converting-json-api-response-to-dart-objects-with-chopper-and-jsonserializable/"/>
    <id>https://blog.ducafecat.tech/2021/07/08/translation/converting-json-api-response-to-dart-objects-with-chopper-and-jsonserializable/</id>
    <published>2021-07-07T16:00:00.000Z</published>
    <updated>2021-07-08T01:30:52.840Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-08-09-30-02.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="老铁记得-转发-，猫哥会呈现更多-Flutter-好文"><a href="#老铁记得-转发-，猫哥会呈现更多-Flutter-好文" class="headerlink" title="老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~"></a>老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~</h2><h2 id="微信群-ducafecat"><a href="#微信群-ducafecat" class="headerlink" title="微信群 ducafecat"></a>微信群 ducafecat</h2><h2 id="b-站-https-space-bilibili-com-404904528"><a href="#b-站-https-space-bilibili-com-404904528" class="headerlink" title="b 站 https://space.bilibili.com/404904528"></a>b 站 <a href="https://space.bilibili.com/404904528" target="_blank" rel="noopener">https://space.bilibili.com/404904528</a></h2><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://medium.com/teamkraken/converting-json-api-response-to-dart-objects-with-chopper-and-jsonserializable-8ec98b762ac1" target="_blank" rel="noopener">https://medium.com/teamkraken/converting-json-api-response-to-dart-objects-with-chopper-and-jsonserializable-8ec98b762ac1</a></p></blockquote><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/ErkinKurt/chopper_json_serializable" target="_blank" rel="noopener">https://github.com/ErkinKurt/chopper_json_serializable</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://hadrien-lejard.gitbook.io/chopper/" target="_blank" rel="noopener">https://hadrien-lejard.gitbook.io/chopper/</a></li><li><a href="https://github.com/infinum/Japx" target="_blank" rel="noopener">https://github.com/infinum/Japx</a></li><li><a href="https://jsonapi.org/" target="_blank" rel="noopener">https://jsonapi.org/</a></li><li><a href="https://github.com/dart-lang/build" target="_blank" rel="noopener">https://github.com/dart-lang/build</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><p>不过，JSON 响应格式因服务而异; 有一些共享的约定，比如 JSON: API，HAL… 今天，我将尝试展示如何从头开始，将 JSON: API 响应转换为 Flutter 项目中的 Dart 对象。</p><p>如果你想跟随源代码，这里是: Chopper _ json _ serializable</p><p><a href="https://github.com/ErkinKurt/chopper_json_serializable" target="_blank" rel="noopener">https://github.com/ErkinKurt/chopper_json_serializable</a></p><h3 id="1-创建项目并添加依赖项"><a href="#1-创建项目并添加依赖项" class="headerlink" title="1. 创建项目并添加依赖项"></a>1. 创建项目并添加依赖项</h3><p>将要使用的软件包:</p><ul><li><p>Chopper:<br>使用 source gen 和 Retrofit 的 Dart 和 Flutter 的 Http 客户端生成器</p></li><li><p>Json Serializable:<br>通过使用它，将自动生成实体的 JSON 转换</p></li><li><p>Japx:<br>解析器，它将复杂的[ JSON: API ][1]结构变为简单的 JSON，反之亦然</p></li></ul><p>非常感谢这些令人敬畏的包裹！</p><p>由于 JsonSerializable 和 Chopper 使用 meta 编程，他们需要 BuildRunner 来处理代码生成。下面是要使用的 pubspec.yaml 文件:</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-08-06-16-57.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="2-实现-Mock-Http-Client-以获得-JSON-API-格式的响应"><a href="#2-实现-Mock-Http-Client-以获得-JSON-API-格式的响应" class="headerlink" title="2. 实现 Mock Http Client 以获得 JSON: API 格式的响应"></a>2. 实现 Mock Http Client 以获得 JSON: API 格式的响应</h3><p>响应模型在 assets 文件夹中提供，因为我们希望使用 mock http 客户机，并且不依赖于任何远程源。响应模型取自 JAPX 资产。</p><p>如果你想使用 chopper 与常规的 http 客户端只是忽略这一部分，并沿着以下部分..。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-08-06-17-53.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="3-创建模型并使用-JsonSerializable"><a href="#3-创建模型并使用-JsonSerializable" class="headerlink" title="3. 创建模型并使用 JsonSerializable"></a>3. 创建模型并使用 JsonSerializable</h3><p>尽管为了简单起见，我们有两个实体 Article 和 People，但是它们将从 Entity 类继承，以演示如何将 JsonSerializable 与继承一起使用。因为每个实体在 JSON: API 中都有一个 type 和 id 值，所以我们创建了一个具有 type 和 id 的基类。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Entity</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> type;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> id;</span><br><span class="line"></span><br><span class="line">  Entity(<span class="keyword">this</span>.type, <span class="keyword">this</span>.id);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>让我们用 JsonSerializable 实现两个模型。我们需要编写 part’&lt; model-name &gt; 。在一天结束的时候，json 和 FromJson 构造函数将由这个目录中构建的 runner 生成。</p><p>我们正在将 fromJsonFactory 定义为在 JsonTypeConvertor 中使用，稍后我们将看到它的使用。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-08-06-18-57.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>在完成我们的实现之后，我们需要在项目的根目录中运行 flutter pub run build runner build，这样 build runner 就可以执行它的魔术了。在成功的执行之后，我们看到。G 文件生成，没有错误。</p><h3 id="4-创建-Chopper-服务"><a href="#4-创建-Chopper-服务" class="headerlink" title="4. 创建 Chopper 服务"></a>4. 创建 Chopper 服务</h3><p>让我们创建网络层与 Chopper 服务。Chopper Services 使用自动生成来创建底层的 http 客户端实现，因此我们不需要担心 http 客户端请求。</p><p>我们提供了一个静态创建方法，将服务注入到 ChopperClients 中。除此之外，我们还有通过 http 客户端获取单个实体的 getArticle 和 getPerson 方法。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-08-06-19-34.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>正如你所看到的，我们有一些红灯亮着。这是因为 chopper 在 build _ runner 的帮助下使用代码生成。(build _ runner the underlying hero).</p><p>让我们像之前一样运行 flutter pub run build _ runner build 命令，如果执行成功，我们不会看到任何错误。请看一下生成的代码，看看 chopper 是如何处理基础 http 客户端请求的。</p><h3 id="5-实现-Chopper-Client"><a href="#5-实现-Chopper-Client" class="headerlink" title="5. 实现 Chopper Client"></a>5. 实现 Chopper Client</h3><p>现在我们需要实现 Chopper 客户端使用我们创建的 Chopper 服务。Chopper Client 提供服务属性，设置多种服务。对于客户端使用，有两个选项，要么创建客户端为单例，并传递所有服务，要么在任何需要的时候创建客户端。</p><p>对于这个示例，让我们创建一个 chopper 客户机实例，并将其传递给 widget 树。然而，我们可以使用 getIt 或者 provider 作为依赖注入，为了简单起见，我们将其作为支柱。</p><p>下面是一个 ChopperClientBuilder，它为我们的 ChopperClientBuilder 客户端提供了构建方法。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-08-06-20-20.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-08-06-20-29.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="6-使用用户界面中的-JAPX-解码器使用-Chopper-服务"><a href="#6-使用用户界面中的-JAPX-解码器使用-Chopper-服务" class="headerlink" title="6. 使用用户界面中的 JAPX 解码器使用 Chopper 服务"></a>6. 使用用户界面中的 JAPX 解码器使用 Chopper 服务</h3><p>我们有一个带 chopper client 作为 prop 的有状态小部件，我们将实现两个方法 getArticle 和 getPeople。在这一部分中，JAPX 扮演了重要的角色。因为我们的 JSON 响应具有 JSON: API 响应格式，所以我们需要平滑复杂的响应。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-08-06-20-57.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>然而，上面的例子可以很好地工作; 我们需要进行显式转换:</p><ul><li><code>json.decode</code> to get mapped json object</li><li><code>Japx.decode</code> to flatten the map.</li><li>Instantiate dart object with our model’s <code>fromJsonFactory</code> methods.</li></ul><p>这种方法有两个问题:</p><ul><li>显式转换将导致代码重复</li><li>服务方法 Response<dynamic> return type.</dynamic></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-08-06-23-42.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>让我们看看如何处理这些问题..。</p><h3 id="7-为响应类型规范实现-JsonConvertor"><a href="#7-为响应类型规范实现-JsonConvertor" class="headerlink" title="7. 为响应类型规范实现 JsonConvertor"></a>7. 为响应类型规范实现 JsonConvertor</h3><p>以某种方式，我们需要操作 Chopper Responses 来返回我们之前定义的模型类型。由于称为转换器的特殊拦截器，我们可以处理响应、请求和错误的转换。所有我们需要做的是创建转换器，并注入到 Chopper 客户端，我们使用。</p><p>让我们为 Chopper Client 创建 jsonserializableeconverter 类。为了做到这一点，我们需要从 Chopper 的 JsonConverter 类扩展我们的类，并重写 convertResponse、 convertRequest 和 convertError 方法。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-08-06-24-23.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>现在我们在 convertResponse 方法中进行转换，这也解决了代码重复问题，因为每次成功响应都会调用这个方法。但是，仍然有一个类型转换问题需要解决。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jsonRes.copyWith&lt;ResultType&gt;(body: JsonTypeParser.decode&lt;Item&gt;(flatJson[<span class="string">"data"</span>]))</span><br></pre></td></tr></table></figure><p>这是解析 Dart 模型响应的关键语句:</p><ul><li>实际上是我们希望服务方法使用的返回类型 ResultType 是 List or 或 BuiltList 会是我们的回归类型。为了在服务方法中定义返回类型，我们需要添加我们期望的模型类型</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-08-06-26-24.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>在此更改之后，无论何时触发 convertResponse，ResultType 都将是 People 或 Article。</p><ul><li>然而，我们仍然需要调用我们的模型的 fromJsonFactory 方法将响应对象转换为 Dart 对象。为了做到这一点，我们创建 JsonTypeParser 类，它将保存 Dart 对象的转换逻辑</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-08-06-27-15.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>JsonTypeParser 有 Map &lt; Type，JsonFactory &gt; 类型的 factories 属性，其中包含来自 JsonFactory 方法的模型和模型。每当我们有一个新的模型，我们需要添加它的类型和工厂到工厂，以便它可以通过 _ decodeMap 方法解析。JsonSerializableConverter 执行 decode &lt; t &gt; 方法，t 为 ResultType 或 Item，并调用匹配类型的 factory get 来实例化我们的模型。</p><p>让我们跟随这个变化和修改用户界面部分，我们消费斩波服务..。</p><p>让我们把 jsonserializableeconverter 插入到我们的 chopper 客户端:</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-08-06-27-46.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>根据这些变化，现在我们可以直接使用响应体，具有类型安全性。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-08-06-28-02.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>我知道这有很多东西需要消化，但是，还有很多东西需要讨论，比如 JsonSerializable 和 Chopper 的响应错误的自定义类型转换器。如果我写一篇中等程度的文章，我会把这个话题连接起来。</p><p>总而言之，我想要展示的是各种响应模型可以通过斩波和 json 序列化解决，而不会失去类型安全的清洁方式。</p><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.tech/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>用抽象工厂方法构建 Flutter 主题</title>
    <link href="https://blog.ducafecat.tech/2021/07/07/translation/flutter-build-theme-with-abstract-factory-method/"/>
    <id>https://blog.ducafecat.tech/2021/07/07/translation/flutter-build-theme-with-abstract-factory-method/</id>
    <published>2021-07-06T16:00:00.000Z</published>
    <updated>2021-07-07T00:32:23.417Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-07-08-32-18.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="老铁记得-转发-，猫哥会呈现更多-Flutter-好文"><a href="#老铁记得-转发-，猫哥会呈现更多-Flutter-好文" class="headerlink" title="老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~"></a>老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~</h2><h2 id="微信群-ducafecat"><a href="#微信群-ducafecat" class="headerlink" title="微信群 ducafecat"></a>微信群 ducafecat</h2><h2 id="b-站-https-space-bilibili-com-404904528"><a href="#b-站-https-space-bilibili-com-404904528" class="headerlink" title="b 站 https://space.bilibili.com/404904528"></a>b 站 <a href="https://space.bilibili.com/404904528" target="_blank" rel="noopener">https://space.bilibili.com/404904528</a></h2><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://vbacik-10.medium.com/flutter-build-theme-with-abstract-factory-method-e07df8f730e2" target="_blank" rel="noopener">https://vbacik-10.medium.com/flutter-build-theme-with-abstract-factory-method-e07df8f730e2</a></p></blockquote><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/VB10/flutter-abstract-theme-manager" target="_blank" rel="noopener">https://github.com/VB10/flutter-abstract-theme-manager</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://zeplin.io" target="_blank" rel="noopener">https://zeplin.io</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><p>最多的应用程序至少创建了一个主题。也许这对于第一个版本来说已经足够了，但是如果这个项目继续增长呢？让我们来看看怎么做。</p><p>我们知道项目设计的主题有多重要，所以我们将为项目创建一个主题管理器。让我们创建一个主题管理器以及这个购物页面。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-07-07-51-38.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>设计稿<br><a href="https://adobe.ly/xdfreshfooduikit" target="_blank" rel="noopener">https://adobe.ly/xdfreshfooduikit</a></li></ul><p>首先，它需要一个页面设计，如也这个页面可以连接到服务。(我为这个示例页面创建了这个端点)</p><ul><li>Background 背景</li><li>App bar - 应用程式栏</li><li>Search Bar - 搜寻栏<br>— Search Icon ー搜寻图示<br>— Search Text ー搜寻文字<br>— Microphone Icon ー麦克风图标</li><li>ListView<br>— Product Card ー产品卡</li><li>TabBar<br>— TabBar Icons ー TabBar 图标集</li></ul><p>因此，我们需要一个调色板使用这个项目。如果你的设计工具包有一个调色板，你可以在设计工具包中得到所有的颜色。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-07-07-52-54.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>项目必须在需要新小部件时使用这个调色板。实际上，由于有了主题经理，项目会更容易成长。最后，我们准备好了 Hacking 时间，因此我们将同时使用工厂方法模式和页面原子设计。</p><h3 id="Hacking-Time"><a href="#Hacking-Time" class="headerlink" title="Hacking Time"></a>Hacking Time</h3><p>首先，我更喜欢先写核心特性，这就是为什么我们不会在代码完成时加倍工作的原因:</p><ul><li>使用不同颜色和样式的 ITheme 抽象类</li><li>用于从一个点管理不同主题的 ThemeFactory 类</li></ul><p>工厂设计是创新模式之一。这个模式提供了高级对象，因为客户机什么都不知道。现在，该模式创建了一个自定义对象，以便项目可以使用这个方案。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-07-07-54-41.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>现在我们知道了这个结构需要什么，因为我们可以编写一个同时包含文本和颜色的界面。这个接口提供了一个中心视点，因此项目需要。让我们写下这些要点。</p><h3 id="文本主题界面"><a href="#文本主题界面" class="headerlink" title="文本主题界面"></a>文本主题界面</h3><p>每个项目都需要这一点，因为大多数用法都指向项目的文本指南。所以我们创建基本样式指南后，非常容易从视图使用。有时我们需要自定义文本样式并不意味着你不使用当前的样式。我们可以使用 copyWith 函数，这样就可以像 headline5 一样使用视图，也可以添加自定义属性，如文本颜色。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">ITextTheme</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> Color? primaryColor;</span><br><span class="line">  late <span class="keyword">final</span> TextTheme data;</span><br><span class="line">  TextStyle? headline1;</span><br><span class="line">  TextStyle? headline3;</span><br><span class="line">  TextStyle? headline4;</span><br><span class="line">  TextStyle? headline5;</span><br><span class="line">  TextStyle? headline6;</span><br><span class="line">  TextStyle? subtitle1;</span><br><span class="line">  TextStyle? subtitle2;</span><br><span class="line">  TextStyle? bodyText1;</span><br><span class="line">  TextStyle? bodyText2;</span><br><span class="line">  <span class="built_in">String</span>? fontFamily;</span><br><span class="line"></span><br><span class="line">  ITextTheme(<span class="keyword">this</span>.primaryColor);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果您的项目设计有一个工具包，您可以使用 <code>zeplin</code> 工具。这个工具在样式指南选项卡中获取所有的文本样式。</p><p><a href="https://zeplin.io/" target="_blank" rel="noopener">https://zeplin.io/</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-07-07-56-06.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="颜色主题界面"><a href="#颜色主题界面" class="headerlink" title="颜色主题界面"></a>颜色主题界面</h3><p>指向项目是非常重要的，因为你知道颜色无处不在。所以我们如何管理更多的项目很容易控制。每个项目都有一个特定的颜色模式，您必须在代码中使用这个模式。如果你不使用模式和项目有一个静态的颜色代码，你不会添加多主题选项，另外你不能管理颜色问题。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">IColors</span> </span>&#123;</span><br><span class="line">  _AppColors <span class="keyword">get</span> colors;</span><br><span class="line">  Color? scaffoldBackgroundColor;</span><br><span class="line">  Color? appBarColor;</span><br><span class="line">  Color? tabBarColor;</span><br><span class="line">  Color? tabbarSelectedColor;</span><br><span class="line">  Color? tabbarNormalColor;</span><br><span class="line">  Brightness? brightness;</span><br><span class="line"></span><br><span class="line">  ColorScheme? colorScheme;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我说像 paragraph 关于 zeplin。再次你可以使用这个和你能够所有的颜色属性。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-07-07-56-45.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="Abstract-Factory-Manager"><a href="#Abstract-Factory-Manager" class="headerlink" title="Abstract Factory Manager"></a>Abstract Factory Manager</h3><p>为多界面创建的管理器。此管理器将为项目创建 ThemeData 实例。由于这个接口，您可以创建一个新的主题实例。这个新的主题只需要一个配色方案等。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">ITheme</span> </span>&#123;</span><br><span class="line">  ITextTheme <span class="keyword">get</span> textTheme;</span><br><span class="line">  IColors <span class="keyword">get</span> colors;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>是的，它看起来很简单，对任何项目都很有用。最后，我们准备使用核心主题绘制操作，因此项目可以声明这个结构的自定义主题。也许，这些主题接口可以改进得更高级。现在对于这个项目来说已经足够了。</p><p>最后需要工厂创建者和我们使用这个项目的主题管理器</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">ThemeManager</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> ThemeData craeteTheme(ITheme theme) =&gt; ThemeData(</span><br><span class="line">      fontFamily: theme.textTheme.fontFamily,</span><br><span class="line">      textTheme: theme.textTheme.data,</span><br><span class="line">      cardColor: theme.colors.colorScheme?.onSecondary,</span><br><span class="line">      floatingActionButtonTheme: FloatingActionButtonThemeData(</span><br><span class="line">          foregroundColor: theme.colors.colors.white,</span><br><span class="line">          backgroundColor: theme.colors.colors.green),</span><br><span class="line">      appBarTheme: AppBarTheme(backgroundColor: theme.colors.appBarColor),</span><br><span class="line">      scaffoldBackgroundColor: theme.colors.scaffoldBackgroundColor,</span><br><span class="line">      colorScheme: theme.colors.colorScheme);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我计划只有具体的领域，因为它的项目只有两个页面，因为你知道这个样本。你必须创建文本样式和配色方案区域的其他区域。让我们用这个结构创建自定义主题，我们将展示这种使用优势。</p><h3 id="Ligh-Theme-on-Project"><a href="#Ligh-Theme-on-Project" class="headerlink" title="Ligh Theme on Project"></a>Ligh Theme on Project</h3><p>实际上，我们有一个结构和项目，如何创建一个轻的主题。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AppThemeLight</span> <span class="keyword">extends</span> <span class="title">ITheme</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  late <span class="keyword">final</span> ITextTheme textTheme;</span><br><span class="line"></span><br><span class="line">  AppThemeLight() &#123;</span><br><span class="line">    textTheme = TextThemeLight(colors.colors.mediumGrey);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  IColors <span class="keyword">get</span> colors =&gt; LightColors();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>当然，暗主题创建这样，因此只是改变风格的指导方针和项目可以直接使用。您可以在这里访问黑暗主题代码。</p></blockquote><p>TextTheme Light 需要绘制文本默认颜色的基本颜色，而浅色已经从 zeplin 样式创建。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TextThemeLight</span> <span class="keyword">implements</span> <span class="title">ITextTheme</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  late <span class="keyword">final</span> TextTheme data;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  TextStyle? bodyText1;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  TextStyle? bodyText2;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  TextStyle? headline1;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  TextStyle? headline3;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  TextStyle? headline4;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  TextStyle? headline5;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  TextStyle? headline6;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  TextStyle? subtitle1;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  TextStyle? subtitle2;</span><br><span class="line">  <span class="keyword">final</span> Color? primaryColor;</span><br><span class="line"></span><br><span class="line">  TextThemeLight(<span class="keyword">this</span>.primaryColor) &#123;</span><br><span class="line">    data = TextTheme(</span><br><span class="line">      headline6: TextStyle(fontSize: <span class="number">20</span>, fontWeight: FontWeight.normal),</span><br><span class="line">      subtitle1: TextStyle(fontSize: <span class="number">16.0</span>),</span><br><span class="line">    ).apply(bodyColor: primaryColor);</span><br><span class="line">    fontFamily = GoogleFonts.arvo().fontFamily;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">String</span>? fontFamily;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>好的，如果我们想看浅色的主题实例，它显示了这一点。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LightColors</span> <span class="keyword">implements</span> <span class="title">IColors</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">final</span> _AppColors colors = _AppColors();</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  ColorScheme? colorScheme;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Color? appBarColor;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Color? scaffoldBackgroundColor;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Color? tabBarColor;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Color? tabbarNormalColor;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Color? tabbarSelectedColor;</span><br><span class="line"></span><br><span class="line">  LightColors() &#123;</span><br><span class="line">    appBarColor = colors.white;</span><br><span class="line">    scaffoldBackgroundColor = colors.white;</span><br><span class="line">    tabBarColor = colors.green;</span><br><span class="line">    tabbarNormalColor = colors.lighterGrey;</span><br><span class="line">    tabbarSelectedColor = colors.darkerGrey;</span><br><span class="line">    colorScheme = ColorScheme.light()</span><br><span class="line">        .copyWith(onPrimary: colors.green, onSecondary: colors.white);</span><br><span class="line">    brightness = Brightness.light;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Brightness? brightness;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>有时需要准备风格，因为没有足够的风格知识。这时你可以为你的项目使用一个配色方案实例，这样你就可以得到材质配色方案，因此可以添加你自定义的业务层。</p><p>而 Light 主题就是准备使用的。该项目只需要主题工厂方法，您可以编写这个类实例。对于项目颜色的所有内容，这都是可以接受的。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      title: <span class="string">'@VB10'</span>,</span><br><span class="line">      theme: ThemeManager.craeteTheme(AppThemeLight()),</span><br><span class="line">      home: SampleView(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>是的，我们可以开始在搜索结果屏幕上绘图。特别是不要忘记这个方法，让我们看看如何为这个项目创建一个主题实例。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">ThemeManager</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> ThemeData craeteTheme(ITheme theme) =&gt; ThemeData(</span><br><span class="line">      fontFamily: theme.textTheme.fontFamily,</span><br><span class="line">      textTheme: theme.textTheme.data,</span><br><span class="line">      cardColor: theme.colors.colorScheme?.onSecondary,</span><br><span class="line">      tabBarTheme: TabBarTheme(</span><br><span class="line">        indicator: BoxDecoration(),</span><br><span class="line">        labelColor: theme.colors.tabbarSelectedColor,</span><br><span class="line">        unselectedLabelColor: theme.colors.tabbarNormalColor,</span><br><span class="line">      ),</span><br><span class="line">      floatingActionButtonTheme: FloatingActionButtonThemeData(</span><br><span class="line">          foregroundColor: theme.colors.colors.white,</span><br><span class="line">          backgroundColor: theme.colors.colors.green),</span><br><span class="line">      appBarTheme: AppBarTheme(backgroundColor: theme.colors.appBarColor),</span><br><span class="line">      scaffoldBackgroundColor: theme.colors.scaffoldBackgroundColor,</span><br><span class="line">      colorScheme: theme.colors.colorScheme);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>现在项目直接依赖于所有的主题实例，因为我们只是改变主题值后，这个项目去一个新的配色方案，另外项目从来不需要任何代码的设计时间。这一点意味着你的项目设计已经完成了所有的工作</p><h3 id="Feature-Page"><a href="#Feature-Page" class="headerlink" title="Feature Page"></a>Feature Page</h3><p>我们有一个主题实例，所以只需调用这个实例，一切就绪。首先，绘制页面树非常重要，更好地理解。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-07-08-00-47.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>现在编码非常简单，因为我们知道如何绘制这个。特别是您对编码时间非常注意，因此可以在页面设计中始终使用主题实例。该项目有一个主题设计，因为可以直接调用这个变量。例如，任何页面可以需要背景色，所以我们不需要一遍又一遍地写，因为我们有使用这种情况的主题实例。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-07-08-01-02.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>是的，我们准备开发另外的主题管理器和小部件树结构。首先，让我们在编码中创建一个 tab 视图结构。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="built_in">List</span>&lt;MapEntry&lt;Widget, IconData&gt;&gt; _pages = [</span><br><span class="line">  MapEntry(SampleView(), Icons.search),</span><br><span class="line">  MapEntry(Container(), Icons.search),</span><br><span class="line">  MapEntry(Container(), Icons.search),</span><br><span class="line">  MapEntry(Container(), Icons.search),</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="meta">@override</span></span><br><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">  <span class="keyword">return</span> DefaultTabController(</span><br><span class="line">      length: _pages.length,</span><br><span class="line">      child: Scaffold(</span><br><span class="line">        floatingActionButtonLocation:</span><br><span class="line">            FloatingActionButtonLocation.centerDocked,</span><br><span class="line">        floatingActionButton: floatingActionButton(context),</span><br><span class="line">        bottomNavigationBar: _bottomAppBar(),</span><br><span class="line">        body: TabBarView(children: _pages.map((e) =&gt; e.key).toList()),</span><br><span class="line">      ));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>实际上，我们看到了 fab 按钮，我们需要一个自定义颜色，因为这个颜色是为蓝色创建的，但是我们在主题中添加了这个自定义代码，只写了一个浮动的操作按钮。此按钮从上下文中读取主题实例中的 own 属性。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-07-08-01-36.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>我说你不需要额外的代码，直接调用这个小部件。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">FloatingActionButton floatingActionButton(BuildContext context) &#123;</span><br><span class="line">  <span class="keyword">return</span> FloatingActionButton(</span><br><span class="line">    child: Icon(Icons.add),</span><br><span class="line">    onPressed: () &#123;&#125;,</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>之后，让我们显示搜索结果页面设计。我们谈到了这篇页面设计对文章的打击。这对颤振计划非常重要。你需要一直考虑这个树型结构。你可以用这个小部件树的思想做一个很棒的页面。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@override</span></span><br><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">  <span class="keyword">return</span> Scaffold(</span><br><span class="line">    appBar: buildAppBar(context),</span><br><span class="line">    body: Padding(</span><br><span class="line">      padding: EdgeInsets.only(top: MediaQuery.of(context).size.width * <span class="number">0.08</span>),</span><br><span class="line">      child: Column(</span><br><span class="line">        children: [</span><br><span class="line">          textFieldSearchCard(context),</span><br><span class="line">          Expanded(child: buildGridViewBody()),</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这说明了很多问题。让我们来看一些小部件，以了解如何使用主题。我们的设计有一个自定义搜索栏，带有搜索图标和麦克风按钮。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Widget textFieldSearch(BuildContext context) &#123;</span><br><span class="line"> <span class="keyword">return</span> TextField(</span><br><span class="line"> decoration: InputDecoration(</span><br><span class="line"> border: InputBorder.none,</span><br><span class="line"> prefixIcon: Icon(Icons.search_sharp,</span><br><span class="line"> color: Theme.of(context).colorScheme.onPrimary.withOpacity(<span class="number">0.5</span>)),</span><br><span class="line"> suffixIconConstraints: BoxConstraints(maxHeight: <span class="number">30</span>),</span><br><span class="line"> suffixIcon: FloatingActionButton(</span><br><span class="line"> onPressed: () &#123;&#125;,</span><br><span class="line"> mini: <span class="keyword">true</span>,</span><br><span class="line"> child: Icon(Icons.mic_sharp),</span><br><span class="line">)),</span><br><span class="line">);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这种代码设计不需要额外的代码。您可以从主题上下文中使用这里需要的内容。让我们来看看文本样式示例:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Text buildTextSub(BuildContext context) &#123;</span><br><span class="line">  <span class="keyword">return</span> Text(</span><br><span class="line">    items.searchResults,</span><br><span class="line">    style:Theme.of(context).textTheme.headline6?.copyWith(</span><br><span class="line">      letterSpacing: <span class="number">-0.2</span>,</span><br><span class="line">      fontWeight: FontWeight.w400,</span><br><span class="line">      ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>你可以看到这是一个非常简单和易于管理的代码，我只是添加了一些自定义代码并完成了所有的工作。</p><p>你可以看到条目属性，也许这和注释有重要的关系。如果您拥有所有的常量值类，并且只想创建常量值，那么您可以在类获得安全能力之后添加@immutable 注释。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@immutable</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AppTextItems</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> searchResults = <span class="string">'Search Results'</span>;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> brocoliText = <span class="string">'Broccoli'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>是的，这个项目可能是理解这个体系结构的一个样本，但是总是应该编写强大的代码。</p><p>Yees 项目已经完成。如果你想改变一个主题，比如黑暗，我们只需要把这个实例改成黑暗，然后就可以了。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-07-08-04-45.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>因此，我们采用了抽象的工厂设计能力和可管理的代码设计。它听起来很适合开发力量，因为颤振可以改善模式和特殊的角度。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="manage-theme-with-factory-design.gif" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>完成了。现在我们可以直接实施我们自己的项目并管理一切。另一方面，这个项目不需要如何创建新的主题知识，因为你知道我们创建接口。不同的主题刚好适合这些界面，然后一切都完成了。</p><p>实际上，本文的主要目标是如何在主题实例中使用这种模式，因此这方面的知识对您的开发生活非常重要。</p><p>感谢你阅读《感谢你阅读《为你的生命健康》》</p><p><a href="https://github.com/VB10/flutter-abstract-theme-manager" target="_blank" rel="noopener">https://github.com/VB10/flutter-abstract-theme-manager</a></p><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.tech/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>搭建一个摄像头应用程序 应用程序内部摄像头</title>
    <link href="https://blog.ducafecat.tech/2021/07/06/translation/build-a-camera-app-flutter-in-app-camera/"/>
    <id>https://blog.ducafecat.tech/2021/07/06/translation/build-a-camera-app-flutter-in-app-camera/</id>
    <published>2021-07-05T16:00:00.000Z</published>
    <updated>2021-07-06T00:26:05.367Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-06-08-18-54.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="老铁记得-转发-，猫哥会呈现更多-Flutter-好文"><a href="#老铁记得-转发-，猫哥会呈现更多-Flutter-好文" class="headerlink" title="老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~"></a>老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~</h2><h2 id="微信群-ducafecat"><a href="#微信群-ducafecat" class="headerlink" title="微信群 ducafecat"></a>微信群 ducafecat</h2><h2 id="b-站-https-space-bilibili-com-404904528"><a href="#b-站-https-space-bilibili-com-404904528" class="headerlink" title="b 站 https://space.bilibili.com/404904528"></a>b 站 <a href="https://space.bilibili.com/404904528" target="_blank" rel="noopener">https://space.bilibili.com/404904528</a></h2><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://medium.com/geekculture/build-a-camera-app-flutter-in-app-camera-825b829fe138" target="_blank" rel="noopener">https://medium.com/geekculture/build-a-camera-app-flutter-in-app-camera-825b829fe138</a></p></blockquote><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/jagrut-18/flutter_camera_app.git" target="_blank" rel="noopener">https://github.com/jagrut-18/flutter_camera_app.git</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://pub.dev/packages/camera" target="_blank" rel="noopener">https://pub.dev/packages/camera</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-06-08-03-41.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>在许多应用程序中，我们需要用户通过点击图片上传图片。为此，我们可以使用设备的默认摄像头应用程序，但如果我们需要集成一个应用程序内的摄像头呢？那么，这也是可能的 Flutter 。小组已经开发了一个叫做摄像头的 <a href="https://pub.dev/packages/camera" target="_blank" rel="noopener">https://pub.dev/packages/camera</a> ，它可以让我们做到这一点。</p><h3 id="建立项目"><a href="#建立项目" class="headerlink" title="建立项目"></a>建立项目</h3><p>首先，通过在 pubspec.yaml 文件中添加以下行，将 camera 包安装到项目中。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">camera: ^0.8.1+3</span><br></pre></td></tr></table></figure><ul><li>IOS 设置</li></ul><p>这个插件需要 IOS 10.0 或更高版本。在 Info.plist 文件中添加以下行来设置内容。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;key&gt;NSCameraUsageDescription&lt;/key&gt;</span><br><span class="line">&lt;string&gt;Can I use the camera please?&lt;/string&gt;</span><br><span class="line">&lt;key&gt;NSMicrophoneUsageDescription&lt;/key&gt;</span><br><span class="line">&lt;string&gt;Can I use the mic please?&lt;/string&gt;</span><br></pre></td></tr></table></figure><ul><li>Android Setup</li></ul><p>在 Android/app/build.gradle 文件中将 Android sdk 最小版本更改为 21(或更高版本)。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">minSdkVersion 21</span><br></pre></td></tr></table></figure><p>现在我们的项目设置完成了，我们可以开始编写应用程序了。</p><p>我们将在应用程序中创建两个屏幕。</p><p>1.CameraScreen ー此屏幕将显示相机输出并拍摄图片</p><p>2.GalleryScreen ー这个屏幕将在网格视图中显示捕获的图片。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-06-08-05-53.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="装载摄像头"><a href="#装载摄像头" class="headerlink" title="装载摄像头"></a>装载摄像头</h3><p>为了显示相机预览，我们需要首先加载相机。为此，转到 main.dart 文件中的 main 函数和 runApp 上面的这些行。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WidgetsFlutterBinding.ensureInitialized(); //Ensure plugin services are initializedfinal cameras = await availableCameras(); //Get list of available cameras</span><br></pre></td></tr></table></figure><p>现在我们有了相机列表，我们需要把它们传递给我们的相机/屏幕。</p><p>所以，摄像机会像这样通过</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-06-08-06-33.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>经过这一切之后，这就是 main.dart 的样子。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:camera/camera.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'camera_screen.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() <span class="keyword">async</span> &#123;</span><br><span class="line">  WidgetsFlutterBinding.ensureInitialized();</span><br><span class="line">  <span class="comment">// Obtain a list of the available cameras on the device.</span></span><br><span class="line">  <span class="keyword">final</span> cameras = <span class="keyword">await</span> availableCameras();</span><br><span class="line">  runApp(MyApp(cameras: cameras));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">List</span>&lt;CameraDescription&gt; cameras;</span><br><span class="line">  <span class="keyword">const</span> MyApp(&#123;Key? key, required <span class="keyword">this</span>.cameras&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      title: <span class="string">'Camera App'</span>,</span><br><span class="line">      home: CameraScreen(cameras: cameras),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="CameraScreen"><a href="#CameraScreen" class="headerlink" title="CameraScreen"></a>CameraScreen</h3><p>这个屏幕的布局很简单。在顶部我们将显示实时相机预览和在底部将有三个按钮(交换相机，捕获和显示画廊)。</p><p>创建一个有状态小部件 CameraScreen。</p><p>我们将创建四个变量,</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-06-08-07-16.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>我们必须设置 selectedCamera = 0，从后置摄像头开始。如果设备有多于 1 个摄像头，我们可以通过更改这个索引切换到它。</p><p>现在让我们创建一个方法来初始化选定的相机。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-06-08-07-43.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>在此方法中，我们将传递要初始化的摄像机索引。使用通过的摄像机列表，我们将加载具体的相机与分辨率的选择。</p><p>使用这个方法，我们将初始化 initState 中的后置摄像头。</p><p>别忘了丢掉相机控制器。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-06-08-08-11.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>现在让我们构建 UI。</li></ul><p>为了显示 CameraPreview，我们将使用以下代码。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">FutureBuilder&lt;<span class="keyword">void</span>&gt;(</span><br><span class="line">  future: _initializeControllerFuture,</span><br><span class="line">  builder: (context, snapshot) &#123;</span><br><span class="line">    <span class="keyword">if</span> (snapshot.connectionState == ConnectionState.done) &#123;</span><br><span class="line">      <span class="comment">// If the Future is complete, display the preview.</span></span><br><span class="line">      <span class="keyword">return</span> CameraPreview(_controller);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// Otherwise, display a loading indicator.</span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">const</span> Center(child: CircularProgressIndicator());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">),</span><br></pre></td></tr></table></figure><p>好了，现在我们要连续显示三个按钮。</p><h3 id="开关-摄像头按钮"><a href="#开关-摄像头按钮" class="headerlink" title="开关/摄像头按钮"></a>开关/摄像头按钮</h3><p>首先是开关摄像头图标按钮。点击这个按钮，摄像头应该在前后之间切换。</p><p>为此，我们将使用相同的 initializeCamera 方法，但这一次 cameraIndex 将是动态的。cameraIndex 后置摄像头为 0，前置摄像头为 1(如果有前置摄像头的话)。</p><p>在点击，我们将检查设备是否有多个摄像头，如果没有，我们将显示一个带有消息的 snackbar。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">IconButton(</span><br><span class="line">  onPressed: () &#123;</span><br><span class="line">    <span class="keyword">if</span> (widget.cameras.length &gt; <span class="number">1</span>) &#123;</span><br><span class="line">      setState(() &#123;</span><br><span class="line">        selectedCamera = selectedCamera == <span class="number">0</span> ? <span class="number">1</span> : <span class="number">0</span>;<span class="comment">//Switch camera</span></span><br><span class="line">        initializeCamera(selectedCamera);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      ScaffoldMessenger.of(context).showSnackBar(SnackBar(</span><br><span class="line">        content: Text(<span class="string">'No secondary camera found'</span>),</span><br><span class="line">        duration: <span class="keyword">const</span> <span class="built_in">Duration</span>(seconds: <span class="number">2</span>),</span><br><span class="line">      ));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  icon: Icon(Icons.switch_camera_rounded, color: Colors.white),</span><br><span class="line">),</span><br></pre></td></tr></table></figure><h3 id="捕捉按钮"><a href="#捕捉按钮" class="headerlink" title="捕捉按钮"></a>捕捉按钮</h3><p>为了显示捕获按钮，我使用了一个半径为 60 的简单白色圆圈。点击后，我们将使用相机控制器拍摄一张照片并将其添加到 captureImages 数组中。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">GestureDetector(</span><br><span class="line">  onTap: () <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">await</span> _initializeControllerFuture; <span class="comment">//To make sure camera is initialized</span></span><br><span class="line">    <span class="keyword">var</span> xFile = <span class="keyword">await</span> _controller.takePicture();</span><br><span class="line">    setState(() &#123;</span><br><span class="line">      capturedImages.add(File(xFile.path));</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  child: Container(</span><br><span class="line">    height: <span class="number">60</span>,</span><br><span class="line">    width: <span class="number">60</span>,</span><br><span class="line">    decoration: BoxDecoration(</span><br><span class="line">      shape: BoxShape.circle,</span><br><span class="line">      color: Colors.white,</span><br><span class="line">    ),</span><br><span class="line">  ),</span><br><span class="line">),</span><br></pre></td></tr></table></figure><h3 id="显示画廊按钮"><a href="#显示画廊按钮" class="headerlink" title="显示画廊按钮"></a>显示画廊按钮</h3><p>这个按钮非常简单，我们将显示从 capturedmages 数组拍摄的最后一张图片，当单击时，它将导航到 GalleryScreen。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">GestureDetector(</span><br><span class="line">  onTap: () &#123;</span><br><span class="line">    <span class="keyword">if</span> (capturedImages.isEmpty) <span class="keyword">return</span>; <span class="comment">//Return if no image</span></span><br><span class="line">      Navigator.push(context,</span><br><span class="line">        MaterialPageRoute(</span><br><span class="line">          builder: (context) =&gt; GalleryScreen(</span><br><span class="line">            images: capturedImages.reversed.toList())));</span><br><span class="line">  &#125;,</span><br><span class="line">  child: Container(</span><br><span class="line">    height: <span class="number">60</span>,</span><br><span class="line">    width: <span class="number">60</span>,</span><br><span class="line">    decoration: BoxDecoration(</span><br><span class="line">      border: Border.all(color: Colors.white),</span><br><span class="line">      image: capturedImages.isNotEmpty</span><br><span class="line">      ? DecorationImage(image: FileImage(capturedImages.last), fit: BoxFit.cover)</span><br><span class="line">      : <span class="keyword">null</span>,</span><br><span class="line">    ),</span><br><span class="line">  ),</span><br><span class="line">),</span><br></pre></td></tr></table></figure><p>如您所见，GalleryScreen 接受捕获的图像列表，因此我们可以在 gridview 中显示它们。让我们完成这一部分来看看应用程序的运行情况。</p><h3 id="GalleryScreen"><a href="#GalleryScreen" class="headerlink" title="GalleryScreen"></a>GalleryScreen</h3><p>这是非常直接的屏幕。获取图像列表并在 GridView 中显示它们。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'dart:io'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GalleryScreen</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">List</span>&lt;File&gt; images;</span><br><span class="line">  <span class="keyword">const</span> GalleryScreen(&#123;Key? key, required <span class="keyword">this</span>.images&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">'Gallery'</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: GridView.count(</span><br><span class="line">        crossAxisCount: <span class="number">3</span>,</span><br><span class="line">        mainAxisSpacing: <span class="number">2</span>,</span><br><span class="line">        crossAxisSpacing: <span class="number">2</span>,</span><br><span class="line">        children: images</span><br><span class="line">            .map((image) =&gt; Image.file(image, fit: BoxFit.cover))</span><br><span class="line">            .toList(),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Final-Product"><a href="#Final-Product" class="headerlink" title="Final Product"></a>Final Product</h3><p>在构建应用程序之后，这是最终的结果。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-06-08-10-39.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>摄像头包也可以捕捉视频，你可以使用 startVideoRecording，pauseVideoRecording 和 stopVideoRecording 方法来捕捉 <a href="https://pub.dev/packages/Camera。" target="_blank" rel="noopener">https://pub.dev/packages/Camera。</a></p><p>这是这个项目的 Github 链接，希望对你有所帮助。</p><p><a href="https://github.com/jagrut-18/flutter_camera_app.git" target="_blank" rel="noopener">https://github.com/jagrut-18/flutter_camera_app.git</a></p><p>这个就到此为止，希望你喜欢。</p><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.tech/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>在 Flutter 使用 Sentry 收集错误</title>
    <link href="https://blog.ducafecat.tech/2021/07/05/translation/error-reporting-using-sentry-in-flutter/"/>
    <id>https://blog.ducafecat.tech/2021/07/05/translation/error-reporting-using-sentry-in-flutter/</id>
    <published>2021-07-04T21:36:05.000Z</published>
    <updated>2021-07-04T22:05:30.641Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-05-06-05-28.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="猫哥说"><a href="#猫哥说" class="headerlink" title="猫哥说"></a>猫哥说</h2><p>这个 Sentry 是一个错误收集平台方案，个人项目是免费的。</p><p>现在针对 Flutter 已经很成熟，可以同时收集 Dart、Flutter、原生端的错误。</p><p>猫哥在企业中是自己搭建了 Sentry 服务，这个是可以私有化的。</p><h2 id="老铁记得-转发-，猫哥会呈现更多-Flutter-好文"><a href="#老铁记得-转发-，猫哥会呈现更多-Flutter-好文" class="headerlink" title="老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~"></a>老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~</h2><h2 id="微信群-ducafecat"><a href="#微信群-ducafecat" class="headerlink" title="微信群 ducafecat"></a>微信群 ducafecat</h2><h2 id="b-站-https-space-bilibili-com-404904528"><a href="#b-站-https-space-bilibili-com-404904528" class="headerlink" title="b 站 https://space.bilibili.com/404904528"></a>b 站 <a href="https://space.bilibili.com/404904528" target="_blank" rel="noopener">https://space.bilibili.com/404904528</a></h2><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://medium.com/podiihq/error-reporting-using-sentry-in-flutter-c4e7c8030b88" target="_blank" rel="noopener">https://medium.com/podiihq/error-reporting-using-sentry-in-flutter-c4e7c8030b88</a></p></blockquote><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p>通过这种方式，您将能够监视和获得错误通知，并在客户开始抱怨之前提前解决它们。因为工作代码 = = 快乐的客户。</p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://sentry.io" target="_blank" rel="noopener">https://sentry.io</a></li><li><a href="https://pub.flutter-io.cn/packages/sentry_flutter" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/sentry_flutter</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><p>想象一下你是一个独立的开发者，你在度假之前开发了一个新功能，在周末前几天将它部署到生产环境中，当客户开始积极使用它时，用户的问题和抱怨开始出现，你已经开启了你的度假情绪。正如通常的口号所说，“顾客永远是对的”，你决定优先考虑顾客的满意度而不是假期，并恢复工作情绪。可能会令人沮丧，对吧？</p><p>以下是如何向服务报告错误，从而避免在客户之前出现未知的潜在错误或问题，因为工作代码等同于满意的客户。</p><p>您可以向许多服务报告代码错误。但是，在本文中，您将了解如何监视应用程序和潜在错误或 bug，并使用 Sentry 报告它们。</p><h3 id="什么是-Sentry？"><a href="#什么是-Sentry？" class="headerlink" title="什么是 Sentry？"></a>什么是 Sentry？</h3><p>Sentry 是一个应用程序监视平台，它使开发人员能够监视、诊断、修复和优化其代码的性能。</p><h3 id="让我们开始吧"><a href="#让我们开始吧" class="headerlink" title="让我们开始吧"></a>让我们开始吧</h3><h4 id="使用-Sentry-创建一个帐户"><a href="#使用-Sentry-创建一个帐户" class="headerlink" title="使用 Sentry 创建一个帐户"></a>使用 Sentry 创建一个帐户</h4><p>如果你在 Sentry 上还没有帐号，在这里创建一个:</p><p><a href="https://sentry.io/signup" target="_blank" rel="noopener">https://sentry.io/signup</a></p><h4 id="创建一个新的-Sentry-Flutter-应用"><a href="#创建一个新的-Sentry-Flutter-应用" class="headerlink" title="创建一个新的 Sentry Flutter 应用"></a>创建一个新的 Sentry Flutter 应用</h4><p>接下来，登录到刚刚创建的 Sentry 帐户，创建 Flutter 应用程序。</p><p>按照下面的步骤成功地创建新项目。</p><ul><li>创建新项目</li></ul><p>登录之后，选择 create project 图标来创建一个新项目。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-05-05-42-13.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>选择开发平台</li></ul><p>有各种各样的开发平台支持 Sentry，包括 Python，Express，Spring Boot，Android 等等，但是本文只关注 Flutter。因此，从列表中选择 Flutter。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-05-05-42-34.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>设置默认警报设置</li></ul><p>接下来，将默认警报设置设置为在发生任何错误时何时以及如何获取警报的频率。在本文中，我将选择获取任何新问题的警报选项，但您始终可以选择任何您想要的选项。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-05-05-42-54.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>最后，给你的项目起个名字</li></ul><p>在本文中，我将给它命名为扑哨测试，然后，创建项目。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-05-05-43-16.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>从 Sentry 获取 DSN</li></ul><p>为了向 Sentry 报告错误，您需要一个 DSN (数据源名称) ，它将用 Sentry 服务唯一地标识您的应用程序。因此，在 Sentry 上创建项目之后，我们将从上面步骤中创建的应用程序中复制 DSN。</p><p>要获得 DSN，在您刚刚从上面创建的项目中，导航到项目设置并向下滚动到客户机密钥(DSN) ，如下所示:</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-05-05-43-44.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>接下来，在选择客户端密钥之后，客户端密钥选项卡将显示出来，从那里您将复制 DSN，如下所示:</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-05-05-43-57.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h4 id="创建一个-Flutter-应用程序，用于向-Sentry-报告错误"><a href="#创建一个-Flutter-应用程序，用于向-Sentry-报告错误" class="headerlink" title="创建一个 Flutter 应用程序，用于向 Sentry 报告错误"></a>创建一个 Flutter 应用程序，用于向 Sentry 报告错误</h4><p>这一步假设，您已经有了一些关于如何创建一个新的 Flutter 项目的实践经验。如果你是新的 Flutter 检验官方 Flutter 文件。你也可以看看我的文章《如何用 Flutter 开始》</p><p>现在让我们创建一个示例 Flutter 应用程序，用于向 Sentry 服务报告错误。</p><p>在终端上，输入 $flutter create Command，后跟应用程序的名称。在这种情况下，我们将使用名称 flutter _ sentry _ test。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ flutter create flutter_sentry_test</span><br></pre></td></tr></table></figure><p>注意: 您也可以根据自己的喜好在各自的 IDE 上创建应用程序。</p><h4 id="导入-Flutter-Sentry-包"><a href="#导入-Flutter-Sentry-包" class="headerlink" title="导入 Flutter Sentry 包"></a>导入 Flutter Sentry 包</h4><p>在应用程序中安装 Sentry，将其添加到 pubspec.yaml 文件中</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-05-05-45-05.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h4 id="配置和初始化-Sentry-SDK"><a href="#配置和初始化-Sentry-SDK" class="headerlink" title="配置和初始化 Sentry SDK"></a>配置和初始化 Sentry SDK</h4><p>在 main.dart 文件中，导入 sentry 包。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-05-05-45-28.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>接下来，添加将捕获应用程序中未处理的异常的配置。在此步骤中，用您在步骤 2 中创建的应用程序中的 Sentry DSN 替换 DSN url。从上面的 Sentry 那里得到一个 DSN。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-05-05-45-44.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>您还可以通过 Dart 环境变量配置 SENTRY _ dsn，方法是将 – Dart-define 标志传递给编译器，如下例所示:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">--dart-define SENTRY_DSN = &apos;https://your-sentry.io DSN&apos;</span><br></pre></td></tr></table></figure><h4 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h4><p>最后，在这个步骤中，为了测试目的，通过在代码中添加一个有意识的错误来验证是否发送了错误。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-05-05-46-23.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>这将抛出一个 State Error，它将被发送到 Sentry.io 服务</p><p>你可以通过导航到你的 Sentry 应用程序来确认这一点</p><p>在我的例子中，这里是发送到我的 Flutter Sentry 应用程序的 State Error</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-05-05-46-54.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>下面是示例应用程序如何向 Sentry 发送错误的演示:</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="sentry.gif" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>点击这里查看完整的代码片段:</p><p><a href="https://github.com/JosephineAkello/flutter_sentry_test" target="_blank" rel="noopener">https://github.com/JosephineAkello/flutter_sentry_test</a></p><p>通过这种方式，您将能够监视和获得错误通知，并在客户开始抱怨之前提前解决它们。因为工作代码 = = 快乐的客户。</p><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.tech/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>在你的 Flutter 项目中隐藏敏感信息</title>
    <link href="https://blog.ducafecat.tech/2021/07/02/translation/learn-the-best-way-to-hide-sensitive-keys-in-your-flutter-app/"/>
    <id>https://blog.ducafecat.tech/2021/07/02/translation/learn-the-best-way-to-hide-sensitive-keys-in-your-flutter-app/</id>
    <published>2021-07-01T16:00:00.000Z</published>
    <updated>2021-07-01T22:19:19.061Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-02-06-19-17.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="猫哥说"><a href="#猫哥说" class="headerlink" title="猫哥说"></a>猫哥说</h2><p>有的时候我们需要在项目中隐藏敏感信息，比如你的阿里 OSS 账号 AccessKey ，写入代码中上传 git 仓库，是一件很危险的事情，所以我们需要用环境变量的方案来隐藏，记得你的 .env 文件要加入 .gitignore 文件中进行过滤呀。</p><h2 id="老铁记得-转发-，猫哥会呈现更多-Flutter-好文"><a href="#老铁记得-转发-，猫哥会呈现更多-Flutter-好文" class="headerlink" title="老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~"></a>老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~</h2><h2 id="微信群-ducafecat"><a href="#微信群-ducafecat" class="headerlink" title="微信群 ducafecat"></a>微信群 ducafecat</h2><h2 id="b-站-https-space-bilibili-com-404904528"><a href="#b-站-https-space-bilibili-com-404904528" class="headerlink" title="b 站 https://space.bilibili.com/404904528"></a>b 站 <a href="https://space.bilibili.com/404904528" target="_blank" rel="noopener">https://space.bilibili.com/404904528</a></h2><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://medium.com/flutter-community/learn-the-best-way-to-hide-sensitive-keys-in-your-flutter-app-ac7638435401" target="_blank" rel="noopener">https://medium.com/flutter-community/learn-the-best-way-to-hide-sensitive-keys-in-your-flutter-app-ac7638435401</a></p></blockquote><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/Wizpna/flutter_dotenv_tutorial.git" target="_blank" rel="noopener">https://github.com/Wizpna/flutter_dotenv_tutorial.git</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://pub.dev/packages/flutter_dotenv" target="_blank" rel="noopener">https://pub.dev/packages/flutter_dotenv</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-02-06-02-01.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>我很高兴能写这个话题，因为这是一个移动应用程序开发者必须很少或已知的知识领域。</p><p>作为一个应用程序开发者，在谷歌游戏商店或苹果商店上开发和部署应用程序并不意味着你已经耗尽了移动应用程序开发周期。</p><p>移动应用程序开发周期还包括提高应用程序安全性。</p><p>这就是为什么我分享这篇文章，以便您将学习如何隐藏敏感的安全密钥在您的 Flutter 应用程序。</p><p>在本文的最后，您将学习如何使用一个名为 <code>Flutter_dotenv</code> 的 Flutter 插件来隐藏您的 Flutter 应用程序中的敏感键。</p><p><a href="https://pub.dev/packages/flutter_dotenv" target="_blank" rel="noopener">https://pub.dev/packages/flutter_dotenv</a></p><h3 id="那么让我们开始吧"><a href="#那么让我们开始吧" class="headerlink" title="那么让我们开始吧"></a>那么让我们开始吧</h3><p>使用 Visual Studio、 IntelliJ 或 Android Studio 创建您的 flutter 应用程序，然后打开“ pubspec.yaml”文件，并安装以下包。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dependencies:</span></span><br><span class="line"><span class="attr">  flutter_dotenv:</span> <span class="string">^5.0.0</span></span><br></pre></td></tr></table></figure><p>在您的 flutter 项目的根目录下创建一个.env 文件</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-02-06-05-06.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>将新创建的. env 文件添加到 pubspec.yaml 文件中的资产包中。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">assets:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">.env</span></span><br></pre></td></tr></table></figure><p>请注意: 添加新创建的。在 pubspec.yaml 文件中，请运行 flutter Pub get in the terminal，或者单击 Pub get in IntelliJ 或 Android Studio 将该文件添加到当前的工作目录文件夹中。</p><p>在成功添加了。在 pubspec.yaml 文件中添加您的敏感键。你创建的 env 文件。(例如，见下图)</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-02-06-05-56.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>下一步是在 main.dart 文件中初始化/加载. env 文件内容，如下图所示:</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-02-06-06-12.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>下一步将访问。环形文件。你可以访问。使用下面的代码。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dotenv.env[<span class="string">'VAR_NAME'</span>];</span><br></pre></td></tr></table></figure><p>请参阅下面的图片以获得正确的理解</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-02-06-06-59.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>使用物理设备或模拟器测试运行项目</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-02-06-07-18.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><blockquote><p>请注意: 为了这个教程的缘故，我必须显示我添加在我的灵敏度键。因为我希望你们都能看到它，了解如何将敏感的密钥存储在 env 文件中，并在 flutter 应用程序中的任何地方访问它。</p></blockquote><p>这种将敏感密钥存储在 env 文件中的模式有助于在黑客对应用进行反编译时，安全引导敏感密钥不被暴露。</p><p>永远记住添加。文件作为一个条目在您的 <code>.gitignore</code> 文件。(一) <code>.gitignore</code> 文件是一个纯文本文件，其中每一行包含 git working copy 中不包含的文件/目录。)</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-02-06-08-14.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>如果你读到这里，恭喜你！</p><p>这是你刚刚参与的项目的源代码。</p><p><a href="https://github.com/Wizpna/flutter_dotenv_tutorial.git" target="_blank" rel="noopener">https://github.com/Wizpna/flutter_dotenv_tutorial.git</a></p><p>如果你发现这篇文章有帮助和教育，请击击击掌按钮尽可能多的次数，以显示您的支持</p><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.tech/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 设计 使您的主题同质化</title>
    <link href="https://blog.ducafecat.tech/2021/07/01/translation/flutter-design-make-your-theme-homogeneous/"/>
    <id>https://blog.ducafecat.tech/2021/07/01/translation/flutter-design-make-your-theme-homogeneous/</id>
    <published>2021-06-30T16:00:00.000Z</published>
    <updated>2021-06-30T21:56:09.406Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-01-05-45-34.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="猫哥说"><a href="#猫哥说" class="headerlink" title="猫哥说"></a>猫哥说</h2><p>如果你和我一样长期面对电脑，分享几个对眼睛有好处的经验</p><ul><li>竟可能的室内用自然光，关掉多余的光源</li><li>显示器分辨率比例调小，字体大些</li><li>如果你需要更多屏幕空间，可以加一个辅助屏幕</li><li>可能的话去慢慢适应暗色主题</li><li>颜色调的对比度低些</li><li>连续工作 2 小时，起来走走 让眼睛眺望下远方</li></ul><blockquote><p>当然并不是所有人都适合，让自己的眼睛舒服就行</p></blockquote><p>这篇文章是告诉你如何通过 ThemeData 来全局管理 Flutter 的界面样式。</p><p>有一次我项目做完，已经通过了评审，然后产品和我说要调下样式，刷的一下，给我了一个新的 sketch 设计稿，我的内心是抗拒的，但是只能耐心的去分析这个新版的样式标准，幸好设计师是一个设计学科的硕士做事还算规范。</p><p>然后我通过 ThemeData 解决了 90% 的问题，因为我在代码中尽可能的用官方组件，这样在 ThemeData 中还能找到这个对象。</p><p>剩下的自定义组件，应为我有抽取公共组件，所以改改就完成了。</p><p>阅读建议，你可以通过我的译文大致的了解内容，如果感兴趣可以通过原文细细品味，下方有原文链接。</p><h2 id="老铁记得-转发-，猫哥会呈现更多-Flutter-好文"><a href="#老铁记得-转发-，猫哥会呈现更多-Flutter-好文" class="headerlink" title="老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~"></a>老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~</h2><h2 id="微信群-ducafecat"><a href="#微信群-ducafecat" class="headerlink" title="微信群 ducafecat"></a>微信群 ducafecat</h2><h2 id="b-站-https-space-bilibili-com-404904528"><a href="#b-站-https-space-bilibili-com-404904528" class="headerlink" title="b 站 https://space.bilibili.com/404904528"></a>b 站 <a href="https://space.bilibili.com/404904528" target="_blank" rel="noopener">https://space.bilibili.com/404904528</a></h2><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://medium.com/flutter-community/flutter-design-make-your-theme-homogeneous-13ddeffb186f" target="_blank" rel="noopener">https://medium.com/flutter-community/flutter-design-make-your-theme-homogeneous-13ddeffb186f</a></p></blockquote><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/GONZALEZD/flutter_demos/tree/main/app_theming" target="_blank" rel="noopener">https://github.com/GONZALEZD/flutter_demos/tree/main/app_theming</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-01-05-33-41.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>在很多 Flutter 源代码和应用程序中，我观察到一个反复出现的实践，即通过小部件参数直接添加自定义样式，导致不一致的设计和额外的维护。作为一个个人的例子，我必须维护一个 Flutter 应用程序，其中所有标题有不同的字体大小(有时字体重量)。</p><p>在这篇文章中，我将解释你的重要性的方式，你应该设计您的 Flutter 应用程序，尤其是关注的主题。</p><p>在您看来，这些“设置”页面在代码方面的区别是什么？</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-01-05-34-14.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>Settings page 设置页面</p><h3 id="应用程序主题的正确方法是什么？"><a href="#应用程序主题的正确方法是什么？" class="headerlink" title="应用程序主题的正确方法是什么？"></a>应用程序主题的正确方法是什么？</h3><blockquote><p>在上图中，“设置”页面共享完全相同的代码。在这个层次上，这四种设计之间没有严格的区别。</p></blockquote><p>这里面没有什么神奇的东西: 所有的主题相关的东西都集中在更高的层次，在 MaterialApp widget 中。这个小工具允许你定义两个主题，一个用于 light brightness，另一个用于 dark theme 模式。</p><p>此外，如果没有给出任何价值，大多数小部件都会从中检索它们的设计。</p><p>小部件正在从 ThemeData (大多数情况下)设置默认值</p><p>让我们来看一个如何正确做到这一点的例子: Card widget。你可以观察到在设置页面的第三个例子中，形状是直线而不是角。</p><p>而只有‘ child’属性在代码中使用: Card (child: …)</p><p>当你深入研究 Card 小部件是如何设计的时候，你会看到它的形状是如何定义的。下面是有关 Card.shape 属性的代码文档:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="markdown">/// The shape of </span>the<span class="markdown"> card's [Material].</span></span></span><br><span class="line"><span class="comment"><span class="markdown">///</span></span></span><br><span class="line"><span class="comment"><span class="markdown">/// Defines </span>the<span class="markdown"> card's [Material.shape].</span></span></span><br><span class="line"><span class="comment"><span class="markdown">///</span></span></span><br><span class="line"><span class="comment"><span class="markdown">/// If this property is null then [CardTheme.shape] of [ThemeData.cardTheme]</span></span></span><br><span class="line"><span class="comment"><span class="markdown">/// is used. If that's null then </span>the<span class="markdown"> shape </span>will<span class="markdown"> be </span>a<span class="markdown"> [RoundedRectangleBorder]</span></span></span><br><span class="line"><span class="comment"><span class="markdown">/// with </span>a<span class="markdown"> circular corner radius of 4.0.</span></span></span><br><span class="line"><span class="keyword">final</span> ShapeBorder? shape;</span><br></pre></td></tr></table></figure><p>因此，为了确保“普通”卡片共享相同的设计，您必须定义自己的 ThemeData，并在 MaterialApp 小部件中使用它作为主题(或 darkTheme)。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">ThemeData example() &#123;</span><br><span class="line">  <span class="keyword">final</span> base  = ThemeData.dark();</span><br><span class="line">  <span class="keyword">final</span> mainColor = Colors.lightBlue;</span><br><span class="line">  <span class="keyword">return</span> base.copyWith(</span><br><span class="line">    cardColor: Color.lerp(mainColor, Colors.white, <span class="number">0.2</span>),</span><br><span class="line">    cardTheme: base.cardTheme?.copyWith(</span><br><span class="line">      color: Color.lerp(mainColor, Colors.black, <span class="number">0.1</span>),</span><br><span class="line">      margin: EdgeInsets.all(<span class="number">20.0</span>),</span><br><span class="line">      elevation: <span class="number">0.0</span>,</span><br><span class="line">      shape: BeveledRectangleBorder(</span><br><span class="line">          borderRadius: BorderRadius.circular(<span class="number">14.0</span>),</span><br><span class="line">          side: BorderSide(color: Colors.white24, width: <span class="number">1</span>)),</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上面的代码演示了如何更改卡片设计，但是您可以为来自 Flutter SDK 的几乎所有小部件进行更改。此外，您应该将主题相关的内容集中到单个文件中，因为 ThemeData 是一个巨大的数据结构。</p><h3 id="主题数据涵盖了所有的窗口小部件，对吧？"><a href="#主题数据涵盖了所有的窗口小部件，对吧？" class="headerlink" title="主题数据涵盖了所有的窗口小部件，对吧？"></a>主题数据涵盖了所有的窗口小部件，对吧？</h3><p>不幸的是，ThemeData 并不能覆盖所有窗口小部件。例如，您不能在其中定义列表贴片设计。幸运的是，您可以通过 ListTileTheme 小部件实现这一点。</p><p>说明如何更改列表平铺选定的颜色和填充，而无需在源代码中显式设置页面。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-07-01-05-36-52.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>通过 ListTileTheme，我们可以在不更改页面代码一行的情况下重新定义选择的标题/背景和前景色</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">ListView.builder(</span><br><span class="line">  itemBuilder: (context, index) &#123;</span><br><span class="line">    <span class="keyword">final</span> value = elements[index];</span><br><span class="line">    <span class="keyword">return</span> ListTile(</span><br><span class="line">      selected: value == selected,</span><br><span class="line">      title: Text(value.title),</span><br><span class="line">      subtitle: Text(value.message),</span><br><span class="line">      leading: Icon(value.icon),</span><br><span class="line">      onTap: () =&gt; setState(() =&gt; selected = value),</span><br><span class="line">    );</span><br><span class="line">  &#125;,</span><br><span class="line">  itemCount: elements.length,</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>正如您在代码中看到的，与设计没有任何关系。它的优点是避免代码噪声，使其简洁易懂。另外，我喜欢的一点是我所有的方法都很小(少于 30 行)。</p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>在本文中，我们了解了如何将应用程序设计集中到 ThemeData 对象中。正如你所理解的，你可能需要阅读很多 Flutter SDK 代码文档，但是当你或者其他同事需要维护它的时候，好处就来了:</p><ul><li>避免代码重复</li><li>减少页面中的代码，使代码更易于阅读和理解</li><li>确保设计的一致性</li></ul><p>但是正如你可能已经看到的，ThemeData 对象是一个非常大的结构，在不断的演变中。所以，请密切关注它！</p><p>我在开始一个新项目时查看 ThemeData</p><h3 id="为了更进一步"><a href="#为了更进一步" class="headerlink" title="为了更进一步.."></a>为了更进一步..</h3><p>再给你两个小建议！首先，如果您希望为您的组件之一进行特定的设计，而不是在构建方法中定制它，您可以将小部件包装到 Theme 小部件中。</p><p>当您设计一个新的小部件时，您可能希望通过从 ThemeData 检索主题信息来模仿 SDK 小部件。您可能已经看到，从 ThemeData 继承是不正确的方式。相反，您可以通过 InheritedTheme 小部件“扩展”它，并模仿它在 ListTileTheme 小部件中的实现方式。</p><p>像往常一样，你可以在这里找到本文使用的源代码和 adobe 设计:</p><p><a href="https://github.com/GONZALEZD/flutter_demos/tree/main/app_theming" target="_blank" rel="noopener">https://github.com/GONZALEZD/flutter_demos/tree/main/app_theming</a></p><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.tech/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 强随机密码生成器</title>
    <link href="https://blog.ducafecat.tech/2021/06/29/translation/generate-strong-random-password-in-flutter/"/>
    <id>https://blog.ducafecat.tech/2021/06/29/translation/generate-strong-random-password-in-flutter/</id>
    <published>2021-06-28T16:00:00.000Z</published>
    <updated>2021-06-28T21:57:18.686Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-29-05-57-15.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="猫哥说"><a href="#猫哥说" class="headerlink" title="猫哥说"></a>猫哥说</h2><p>有的时候手机上也需要强密码生成器，这样就不用再 PC 上生成后复制过去了，用 Flutter 自己来打造一个吧。</p><h2 id="老铁记得-转发-，猫哥会呈现更多-Flutter-好文"><a href="#老铁记得-转发-，猫哥会呈现更多-Flutter-好文" class="headerlink" title="老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~"></a>老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~</h2><h2 id="微信群-ducafecat"><a href="#微信群-ducafecat" class="headerlink" title="微信群 ducafecat"></a>微信群 ducafecat</h2><h2 id="b-站-https-space-bilibili-com-404904528"><a href="#b-站-https-space-bilibili-com-404904528" class="headerlink" title="b 站 https://space.bilibili.com/404904528"></a>b 站 <a href="https://space.bilibili.com/404904528" target="_blank" rel="noopener">https://space.bilibili.com/404904528</a></h2><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://medium.com/flutterdevs/generate-strong-random-password-in-flutter-723e631727cc" target="_blank" rel="noopener">https://medium.com/flutterdevs/generate-strong-random-password-in-flutter-723e631727cc</a></p></blockquote><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/flutter-devs/flutter_generate_strong_random_password_demo" target="_blank" rel="noopener">https://github.com/flutter-devs/flutter_generate_strong_random_password_demo</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-29-05-41-13.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>只是让我对你能够有效地做到的令人愉快的用户界面感兴趣，而且显然，它允许你同时为两个平台创建。存在的重要原因是用小部件构造应用程序。它描述了您的应用程序视图应该如何看待它们的当前设置和状态。当您修改代码时，小部件通过计算过去和当前小部件之间的对比来重新构建它的描述，以确定在应用程序的 UI 中呈现的可忽略的更改。</p><p>在这个博客中，我们将探索在 Flutter 中生成强随机密码。我们将实现一个生成随机密码演示程序，并了解如何创建一个强大的随机密码产生您的 Flutter 应用程序。</p><h3 id="生成随机密码"><a href="#生成随机密码" class="headerlink" title="生成随机密码"></a>生成随机密码</h3><p>毫无疑问，我们可以创建复杂的密码，并用于您的客户端帐户。选择长度和字符，以利用和生成您的密码安全。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="generate-password.gif" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>这个演示视频展示了如何在一次 Flutter 中创建一个强大的随机密码。它显示了如何生成强随机密码将工作在您的 Flutter 应用程序。当用户点击按钮，然后，密码将产生的组合长度，字符，数字，特殊，低字母，和上游字母表。它将在文本表单字段上生成，用户还将复制生成的密码。它会显示在你的设备上。</p><h3 id="如何实现-dart-文件中的代码"><a href="#如何实现-dart-文件中的代码" class="headerlink" title="如何实现 dart 文件中的代码"></a>如何实现 dart 文件中的代码</h3><p>你需要分别在你的代码中实现它:</p><blockquote><p>在 lib 文件夹中创建一个名为 generate _ password. dart 的新 dart 文件。</p></blockquote><p>在主体部分，我们将添加 Container。在内部，我们将添加一个 Column 小部件。在这个小部件中，我们将添加 mainAxisAlignmnet 和 crossAxisAlignmnet。我们将添加文本并将其包装到行中。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Container(</span><br><span class="line">  padding: EdgeInsets.all(<span class="number">32</span>),</span><br><span class="line">  child: Column(</span><br><span class="line">    mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">    crossAxisAlignment: CrossAxisAlignment.center,</span><br><span class="line">    children: [</span><br><span class="line">      Row(</span><br><span class="line">        children: [</span><br><span class="line">          Text(<span class="string">"Generate Strong Random Password"</span>,style: TextStyle(</span><br><span class="line">              fontSize: <span class="number">18</span>, fontWeight: FontWeight.bold</span><br><span class="line">          ),),</span><br><span class="line">        ],</span><br><span class="line">       SizedBox(height: <span class="number">15</span>,),</span><br><span class="line">       TextFormField(),</span><br><span class="line">       SizedBox(height: <span class="number">15</span>,),</span><br><span class="line">       buildButtonWidget()</span><br><span class="line">      ),</span><br><span class="line">    ],</span><br><span class="line">  ),),</span><br></pre></td></tr></table></figure><p>现在我们将添加 TextFormFeld，我们将使 _ contoller 的变量等于 TextEditingController ()。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> _controller = TextEditingController();</span><br></pre></td></tr></table></figure><p>我们将真正的只读，因为密码生成时没有编辑。我们将假设 enableInteractiveSelection 并添加 InputDecoration 作为边框。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">TextFormField(</span><br><span class="line">  controller: _controller,</span><br><span class="line">  readOnly: <span class="keyword">true</span>,</span><br><span class="line">  enableInteractiveSelection: <span class="keyword">false</span>,</span><br><span class="line">  decoration: InputDecoration(</span><br><span class="line">      focusedBorder: OutlineInputBorder(</span><br><span class="line">        borderSide: BorderSide(color: Colors.cyan,),</span><br><span class="line">      ),</span><br><span class="line">      enabledBorder: OutlineInputBorder(</span><br><span class="line">        borderSide: BorderSide(color: Colors.cyan),</span><br><span class="line">      ),</span><br><span class="line">  ),</span><br><span class="line">),</span><br></pre></td></tr></table></figure><blockquote><p>我们还将创建一个 dispose ()方法来释放控制器</p></blockquote><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@override</span></span><br><span class="line"><span class="keyword">void</span> dispose() &#123;</span><br><span class="line">  _controller.dispose();</span><br><span class="line">  <span class="keyword">super</span>.dispose();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在 TextFormField 中，我们还将创建一个后缀图标。在内部，我们将添加 IconButton ()。我们将添加一个复制图标和 onPressed 方法。在 onPressed 方法中，我们将添加最终数据等于 clipboard data，在括号中，我们将添加 _ controller。文本和设置剪贴板上的数据。我们将显示一个 snackbar 时，复制图标按下，然后显示一个消息是“密码复制”。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">suffixIcon: IconButton(</span><br><span class="line">    onPressed: ()&#123;</span><br><span class="line">      <span class="keyword">final</span> data = ClipboardData(text: _controller.text);</span><br><span class="line">      Clipboard.setData(data);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">final</span> snackbar = SnackBar(</span><br><span class="line">          content: Text(<span class="string">"Password Copy"</span>));</span><br><span class="line"></span><br><span class="line">      ScaffoldMessenger.of(context)</span><br><span class="line">        ..removeCurrentSnackBar()</span><br><span class="line">        ..showSnackBar(snackbar);</span><br><span class="line">    &#125;,</span><br><span class="line">    icon: Icon(Icons.copy))</span><br></pre></td></tr></table></figure><blockquote><p>现在我们将创建一个 buildButtonWidget ()</p></blockquote><p>我们将创建 buildButtonWidget () ，内部将返回一个标高按钮()。在这个按钮中，我们将添加标题按钮的样式并添加子属性。我们将添加文本“ Password Generate”，并在 child 属性中添加 onPressed 函数。在这个函数中，我们将添加一个等于 generatePassword ()的最终密码。我们将在下面的 generatePassword ()中进行深入的描述。添加 _ controller。文本等于密码。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Widget buildButtonWidget() &#123;</span><br><span class="line">  <span class="keyword">return</span> ElevatedButton(</span><br><span class="line">      style: ElevatedButton.styleFrom(</span><br><span class="line">          primary: Colors.black</span><br><span class="line">      ),</span><br><span class="line">      onPressed: ()&#123;</span><br><span class="line">        <span class="keyword">final</span> password = We will deeply describe;</span><br><span class="line">        _controller.text = password;</span><br><span class="line">      &#125;,</span><br><span class="line">      child: Text(<span class="string">"Password Generate"</span>,style: TextStyle(color: Colors.white),)</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>我们将深入描述 generatePassword () :</p></blockquote><p>在 lib 文件夹中创建一个名为 custom.dart 的新 dart 文件。</p><p>我们将创建一个 String generatePassword ()方法。在内部，我们将添加最终长度等于 20，letterLowerCase，letterUpperCase，number，special 字符。当我们使用一个强密码，然后真正的所有 bool 字母，isNumber，和 isSpecial。添加字符串字符并返回 List。生成()。添加 final indexRandom 等于 Random.secure ()。nextInt (chars.length)和 return chars [ indexRandom ]。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'dart:math'</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">String</span> generatePassword(&#123;</span><br><span class="line">  <span class="built_in">bool</span> letter = <span class="keyword">true</span>,</span><br><span class="line">  <span class="built_in">bool</span> isNumber = <span class="keyword">true</span>,</span><br><span class="line">  <span class="built_in">bool</span> isSpecial = <span class="keyword">true</span>,</span><br><span class="line">&#125;) &#123;</span><br><span class="line">  <span class="keyword">final</span> length = <span class="number">20</span>;</span><br><span class="line">  <span class="keyword">final</span> letterLowerCase = <span class="string">"abcdefghijklmnopqrstuvwxyz"</span>;</span><br><span class="line">  <span class="keyword">final</span> letterUpperCase = <span class="string">"ABCDEFGHIJKLMNOPQRSTUVWXYZ"</span>;</span><br><span class="line">  <span class="keyword">final</span> number = <span class="string">'0123456789'</span>;</span><br><span class="line">  <span class="keyword">final</span> special = <span class="string">'@#%^*&gt;\$@?/[]=+'</span>;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">String</span> chars = <span class="string">""</span>;</span><br><span class="line">  <span class="keyword">if</span> (letter) chars += <span class="string">'$letterLowerCase$letterUpperCase'</span>;</span><br><span class="line">  <span class="keyword">if</span> (isNumber) chars += <span class="string">'$number'</span>;</span><br><span class="line">  <span class="keyword">if</span> (isSpecial) chars += <span class="string">'$special'</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">List</span>.generate(length, (index) &#123;</span><br><span class="line">    <span class="keyword">final</span> indexRandom = Random.secure().nextInt(chars.length);</span><br><span class="line">    <span class="keyword">return</span> chars [indexRandom];</span><br><span class="line">  &#125;).join(<span class="string">''</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当我们运行应用程序时，我们应该得到屏幕的输出，就像下面的屏幕截图一样。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-29-05-46-34.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/cupertino.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/services.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_generate_strong_random/custom.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GeneratePassword</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _GeneratePasswordState createState() =&gt; _GeneratePasswordState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_GeneratePasswordState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">GeneratePassword</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> _controller = TextEditingController();</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> dispose() &#123;</span><br><span class="line">    _controller.dispose();</span><br><span class="line">    <span class="keyword">super</span>.dispose();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) =&gt;</span><br><span class="line">      Scaffold(</span><br><span class="line">        appBar: AppBar(</span><br><span class="line">          automaticallyImplyLeading: <span class="keyword">false</span>,</span><br><span class="line">          backgroundColor: Colors.cyan,</span><br><span class="line">          title: Text(<span class="string">'Flutter Generate Random Password'</span>),</span><br><span class="line">        ),</span><br><span class="line">        body: Container(</span><br><span class="line">          padding: EdgeInsets.all(<span class="number">32</span>),</span><br><span class="line">          child: Column(</span><br><span class="line">            mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">            crossAxisAlignment: CrossAxisAlignment.center,</span><br><span class="line">            children: [</span><br><span class="line">              Row(</span><br><span class="line">                children: [</span><br><span class="line">                  Text(<span class="string">"Generate Strong Random Password"</span>,style: TextStyle(</span><br><span class="line">                      fontSize: <span class="number">18</span>, fontWeight: FontWeight.bold</span><br><span class="line">                  ),),</span><br><span class="line">                ],</span><br><span class="line">              ),</span><br><span class="line">              SizedBox(height: <span class="number">15</span>,),</span><br><span class="line">              TextFormField(</span><br><span class="line">                controller: _controller,</span><br><span class="line">                readOnly: <span class="keyword">true</span>,</span><br><span class="line">                enableInteractiveSelection: <span class="keyword">false</span>,</span><br><span class="line">                decoration: InputDecoration(</span><br><span class="line">                    focusedBorder: OutlineInputBorder(</span><br><span class="line">                      borderSide: BorderSide(color: Colors.cyan,),</span><br><span class="line">                    ),</span><br><span class="line">                    enabledBorder: OutlineInputBorder(</span><br><span class="line">                      borderSide: BorderSide(color: Colors.cyan),</span><br><span class="line">                    ),</span><br><span class="line">                    suffixIcon: IconButton(</span><br><span class="line">                        onPressed: ()&#123;</span><br><span class="line">                          <span class="keyword">final</span> data = ClipboardData(text: _controller.text);</span><br><span class="line">                          Clipboard.setData(data);</span><br><span class="line"></span><br><span class="line">                          <span class="keyword">final</span> snackbar = SnackBar(</span><br><span class="line">                              content: Text(<span class="string">"Password Copy"</span>));</span><br><span class="line"></span><br><span class="line">                          ScaffoldMessenger.of(context)</span><br><span class="line">                            ..removeCurrentSnackBar()</span><br><span class="line">                            ..showSnackBar(snackbar);</span><br><span class="line">                        &#125;,</span><br><span class="line">                        icon: Icon(Icons.copy))</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">              SizedBox(height: <span class="number">15</span>,),</span><br><span class="line">              buildButtonWidget()</span><br><span class="line">            ],</span><br><span class="line">          ),</span><br><span class="line"></span><br><span class="line">        ),</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">  Widget buildButtonWidget() &#123;</span><br><span class="line">    <span class="keyword">return</span> ElevatedButton(</span><br><span class="line">        style: ElevatedButton.styleFrom(</span><br><span class="line">            primary: Colors.black</span><br><span class="line">        ),</span><br><span class="line">        onPressed: ()&#123;</span><br><span class="line">          <span class="keyword">final</span> password = generatePassword();</span><br><span class="line">          _controller.text = password;</span><br><span class="line">        &#125;,</span><br><span class="line">        child: Text(<span class="string">"Password Generate"</span>,style: TextStyle(color: Colors.white),)</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h3><p>在本文中，我解释了生成强随机密码的基本结构，您可以根据自己的选择修改这个代码。这是一个小的介绍生成强随机密码用户交互从我这边，它的工作使用 Flutter。</p><p>我希望这个博客将提供您尝试在您的 Flutter 项目生成强随机密码充足的信息。我们将向您展示生成随机密码是什么？.制作一个工作生成强随机密码的演示程序，它会显示当用户点击按钮，然后，密码将生成的长度，字符，数字，特殊，低字母和上游字母组合。它将生成的文本表单字段和用户也复制生成的密码在您的 Flutter 应用程序。所以请尝试一下。</p><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.tech/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 编写自定义组件 Part2.a ChildSize(with helpers)</title>
    <link href="https://blog.ducafecat.tech/2021/06/21/translation/writing-custom-widgets-in-flutter-part-2-singlechildrenderobjectwidget/"/>
    <id>https://blog.ducafecat.tech/2021/06/21/translation/writing-custom-widgets-in-flutter-part-2-singlechildrenderobjectwidget/</id>
    <published>2021-06-20T21:55:22.000Z</published>
    <updated>2021-06-20T23:36:09.173Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-21-06-23-23.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="猫哥说"><a href="#猫哥说" class="headerlink" title="猫哥说"></a>猫哥说</h2><p>这是自定义组件的第二篇, <a href="https://ducafecat.tech/2021/05/31/translation/writing-custom-widgets-in-flutter-part-1-ellipsizedtext/" target="_blank" rel="noopener">第一篇点这里</a></p><p>有的时候我们需要做些很基础的组件或者工具，我们需要控制渲染、尺寸变化、预处理、销毁</p><p>这篇文章是写关于如何封装一个响应式的 ChangeSize 组件，组件继承了 SingleChildRenderObjectWidget，如果你也在写类似的功能，用这个父类可以快速的上手。</p><h2 id="老铁记得-转发-，猫哥会呈现更多-Flutter-好文"><a href="#老铁记得-转发-，猫哥会呈现更多-Flutter-好文" class="headerlink" title="老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~"></a>老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~</h2><h2 id="微信群-ducafecat"><a href="#微信群-ducafecat" class="headerlink" title="微信群 ducafecat"></a>微信群 ducafecat</h2><h2 id="b-站-https-space-bilibili-com-404904528"><a href="#b-站-https-space-bilibili-com-404904528" class="headerlink" title="b 站 https://space.bilibili.com/404904528"></a>b 站 <a href="https://space.bilibili.com/404904528" target="_blank" rel="noopener">https://space.bilibili.com/404904528</a></h2><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://rlesovyi.medium.com/writing-custom-widgets-in-flutter-part-2-singlechildrenderobjectwidget-5637fecdf9bb" target="_blank" rel="noopener">https://rlesovyi.medium.com/writing-custom-widgets-in-flutter-part-2-singlechildrenderobjectwidget-5637fecdf9bb</a></p></blockquote><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/MatrixDev/Flutter-CustomWidgets" target="_blank" rel="noopener">https://github.com/MatrixDev/Flutter-CustomWidgets</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://pub.flutter-io.cn/packages/get#reactive-state-manager" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/get#reactive-state-manager</a></li><li><a href="https://dart.dev/guides/language/extension-methods" target="_blank" rel="noopener">https://dart.dev/guides/language/extension-methods</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-21-05-58-59.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><p>我写第二篇文章的时候到了。这次它将是一个非常简单的小部件，当它的子大小发生变化时，它会通知我们。这个任务非常简单，但是它的主要目的是向您展示如何在 RenderObject 中管理子对象。</p><p>当我刚开始学习 Flutter 的时候，它是我的问题之一，甚至是完成 Udemy 的课程，很遗憾，我没有得到我的答案。在 StackOverflow 上，人们建议在 Widget 上使用 GlobalKey，找到它的 RenderObject 并获取它的大小。</p><p>虽然上述解决方案没有任何问题，但我仍然不喜欢它的一些地方:</p><ul><li>它改变了 Widget 元素的销毁方式</li><li>您需要在声明性小部件结构中添加命令式代码</li><li>没有能力实际跟踪小部件的大小，它需要根据需要拉</li></ul><p>一般来说，我想要达到的目标是:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> ChildSize(</span><br><span class="line">  child: buildChildWidget(),</span><br><span class="line">  onChildSizeChanged: (size) =&gt; handleNewChildSize(size),</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="简单的理论"><a href="#简单的理论" class="headerlink" title="简单的理论"></a>简单的理论</h3><p>当编写一个包含子窗口的自定义窗口小部件时，我们需要知道一些重要的事情:</p><ul><li>对于每个自定义小部件，我们需要编写它的 Element 和(有时) RenderObject 实现</li><li>元素将扩展其子元素 Widgets 为单独的元素，并在需要时更新/重新创建它们</li><li>几乎没有什么重要的角色ーー子代管理、布局、绘制和命中测试(鼠标指针、触摸事件等)</li></ul><h3 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h3><p>首先，我们需要声明一个实际的 Widget:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ChildSize</span> <span class="keyword">extends</span> <span class="title">SingleChildRenderObjectWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> <span class="keyword">void</span> <span class="built_in">Function</span>(Size)? onChildSizeChanged;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> ChildSize(&#123;</span><br><span class="line">    Key? key,</span><br><span class="line">    Widget? child,</span><br><span class="line">    <span class="keyword">this</span>.onChildSizeChanged,</span><br><span class="line">  &#125;) : <span class="keyword">super</span>(key: key, child: child);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里没有什么新东西，除了 SingleChildRenderObjectWidget。这是 Flutter 框架中的一个帮手，它允许我们编写不超过一个子窗口的自定义窗口小部件。这大大简化了我们的代码，因为我们根本不需要编写定制的 Element。</p><p>我们唯一需要添加到 Widget 中的是创建 RenderObject，并在 Widget 更改时更新它:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ChildSize</span> <span class="keyword">extends</span> <span class="title">SingleChildRenderObjectWidget</span> </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  RenderObject createRenderObject(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> RenderChildSize().._widget = <span class="keyword">this</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> updateRenderObject(BuildContext context, RenderChildSize renderObject) &#123;</span><br><span class="line">    renderObject.._widget = <span class="keyword">this</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>现在我们需要创建渲染对象:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RenderChildSize</span> <span class="keyword">extends</span> <span class="title">RenderBox</span></span></span><br><span class="line"><span class="class">    <span class="title">with</span> <span class="title">RenderObjectWithChildMixin</span>&lt;<span class="title">RenderBox</span>&gt; </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> _widget = <span class="keyword">const</span> ChildSize();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>是一个特殊的 mixin，我们在使用 SingleChildRenderObjectWidget 时必须添加它。这个 mixin 将处理所有无聊的东西(请参阅下一篇文章)。几乎这种类型的每个帮助器都需要添加一些 mixin。您可以在每个帮助器的文档中找到这些要求。</p><p>下一步要做的是布局我们的 child:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RenderChildSize</span> ... </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="keyword">var</span> _lastSize = Size.zero;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> performLayout() &#123;</span><br><span class="line">    <span class="keyword">final</span> child = <span class="keyword">this</span>.child;</span><br><span class="line">    <span class="keyword">if</span> (child != <span class="keyword">null</span>) &#123;</span><br><span class="line">      child.layout(constraints, parentUsesSize: <span class="keyword">true</span>);</span><br><span class="line">      size = child.size;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      size = constraints.smallest;</span><br><span class="line">    &#125;    <span class="keyword">if</span> (_lastSize != size) &#123;</span><br><span class="line">      _lastSize = size;</span><br><span class="line">      _widget.onChildSizeChanged?.call(_lastSize);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在布局过程中我们必须决定渲染对象的大小。要做到这一点，我们需要布置我们的孩子。渲染对象的大小将与子对象的大小相同(我们没有任何填充、边距等)。</p><p>这里有一些重要的注意事项:</p><ul><li>我们必须通过 parentUsesSize = true 子布局函数，以便事后得到它的大小。否则将抛出异常。感谢这个 flag Flutter 可以添加额外的优化</li><li>可能有这样一种情况，即使我们有一个子 Widget，也不会有它的子 RenderObject。并不是所有的小工具都有渲染对象。在这种情况下，如果存在任何最近的嵌套渲染对象，Flutter 将尝试提供给我们</li></ul><p>在这个方法中，我们还检查大小是否发生了变化，并在发生变化时调用回调。</p><p>我们需要做的最后一件事就是描绘我们的 child 和路由命中测试事件:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RenderChildSize</span> ... </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> paint(PaintingContext context, Offset offset) &#123;</span><br><span class="line">    <span class="keyword">final</span> child = <span class="keyword">this</span>.child;</span><br><span class="line">    <span class="keyword">if</span> (child != <span class="keyword">null</span>) &#123;</span><br><span class="line">      context.paintChild(child, offset);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">bool</span> hitTestChildren(BoxHitTestResult result, &#123;required Offset position&#125;) &#123;</span><br><span class="line">    <span class="keyword">return</span> child?.hitTest(result, position: position) == <span class="keyword">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>结果如下:</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-21-06-10-50.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>###</p><p>###</p><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 创建多图像的 PDF 文件</title>
    <link href="https://blog.ducafecat.tech/2021/06/18/translation/flutter-create-pdf-files-with-multiple-images/"/>
    <id>https://blog.ducafecat.tech/2021/06/18/translation/flutter-create-pdf-files-with-multiple-images/</id>
    <published>2021-06-17T16:00:00.000Z</published>
    <updated>2021-06-18T01:57:37.937Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-18-09-17-32.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="猫哥说"><a href="#猫哥说" class="headerlink" title="猫哥说"></a>猫哥说</h2><p>保持热情去改变!</p><p>今天这篇文章是让你在客户端完成 PDF 的创建，这样能减轻服务器的压力。</p><p>这是很有必要的，服务器的 CPU 资源很宝贵。</p><p>Flutter 插件 <a href="https://pub.dev/packages/pdf" target="_blank" rel="noopener">https://pub.dev/packages/pdf</a></p><ul><li>功能有：<ul><li>载入图片</li><li>写上文字</li><li>加密、签名文件</li><li>也可以载入 pdf</li></ul></li></ul><h2 id="老铁记得-转发-，猫哥会呈现更多-Flutter-好文"><a href="#老铁记得-转发-，猫哥会呈现更多-Flutter-好文" class="headerlink" title="老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~"></a>老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~</h2><h2 id="微信群-ducafecat"><a href="#微信群-ducafecat" class="headerlink" title="微信群 ducafecat"></a>微信群 ducafecat</h2><h2 id="b-站-https-space-bilibili-com-404904528"><a href="#b-站-https-space-bilibili-com-404904528" class="headerlink" title="b 站 https://space.bilibili.com/404904528"></a>b 站 <a href="https://space.bilibili.com/404904528" target="_blank" rel="noopener">https://space.bilibili.com/404904528</a></h2><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://medium.com/flutterdevs/flutter-create-pdf-files-with-multiple-images-4458e813fe37" target="_blank" rel="noopener">https://medium.com/flutterdevs/flutter-create-pdf-files-with-multiple-images-4458e813fe37</a></p></blockquote><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/flutter-devs/flutter_pdf_create_view_demo" target="_blank" rel="noopener">https://github.com/flutter-devs/flutter_pdf_create_view_demo</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://pub.dev/packages/pdf" target="_blank" rel="noopener">https://pub.dev/packages/pdf</a></li><li><a href="https://pub.dev/packages/path_provider/versions/2.0.1" target="_blank" rel="noopener">https://pub.dev/packages/path_provider/versions/2.0.1</a></li><li><a href="https://pub.dev/packages/syncfusion_flutter_pdfviewer/versions/19.1.64-beta" target="_blank" rel="noopener">https://pub.dev/packages/syncfusion_flutter_pdfviewer/versions/19.1.64-beta</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-18-08-51-35.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>在 Flutter 不同的功能使您的应用程序丰富的有用性，并给简单的客户端做东西内的应用程序和改善客户端的经验，是一个专家合作是另外必不可少的开发人员。</p><p>有很多软件包可以用来在应用程序中打开 pdf，有些比较复杂，有些并不难执行，在这里我将阐明可能最容易使用的方法。</p><p>在这个博客中，我们将探索 Flutter ー创建多张图片的 PDF 文件。我们将实施一个演示程序，以显示如何 Flutter 创建一个 pdf 文件与多个图像使用的三个要素包在您的 Flutter 应用程序。</p><h3 id="状态管理"><a href="#状态管理" class="headerlink" title="状态管理"></a>状态管理</h3><h4 id="简介"><a href="#简介" class="headerlink" title="简介:"></a>简介:</h4><p>PDF 很可能是用于交换业务信息的最著名的文档格式，因为内容不能像不同配置那样有效地更改。这样可以保护我们的信息不受未经批准的更改的影响。一旦你知道了策略，这通常是一个简单的互动，我会告诉你在你的任务中制作 pdf 文档的最好方法。</p><blockquote><p>对于这个演示，需要三个基本的软件包。</p></blockquote><ul><li><a href="https://pub.dev/packages/pdf" target="_blank" rel="noopener">https://pub.dev/packages/pdf</a></li><li><a href="https://pub.dev/packages/path_provider/versions/2.0.1" target="_blank" rel="noopener">https://pub.dev/packages/path_provider/versions/2.0.1</a></li><li><a href="https://pub.dev/packages/syncfusion_flutter_pdfviewer/versions/19.1.64-beta" target="_blank" rel="noopener">https://pub.dev/packages/syncfusion_flutter_pdfviewer/versions/19.1.64-beta</a></li></ul><h4 id="演示模块"><a href="#演示模块" class="headerlink" title="演示模块:"></a>演示模块:</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-18-08-56-12.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>这个演示视频显示了如何在一个 Flutter 与多个图像创建 pdf 文件。它显示了 pdf 文件将如何使用这三个软件包在您的 Flutter 应用程序。它显示当用户点击一个创建按钮，然后出现 pdf，根据页面有多个图像。它会显示在你的设备上。</p><h4 id="实施方案"><a href="#实施方案" class="headerlink" title="实施方案:"></a>实施方案:</h4><ul><li>第一步: 添加依赖项</li></ul><p>将依赖项添加到 pubspec ー yaml 文件。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dependencies:</span></span><br><span class="line"><span class="attr">  flutter:</span></span><br><span class="line"><span class="attr">    sdk:</span> <span class="string">flutter</span></span><br><span class="line"><span class="attr">  cupertino_icons:</span> <span class="string">^1.0.2</span></span><br><span class="line"><span class="attr">  path_provider:</span> <span class="string">^2.0.1</span></span><br><span class="line"><span class="attr">  pdf:</span> <span class="string">^3.3.0</span></span><br><span class="line"><span class="attr">  syncfusion_flutter_pdfviewer:</span> <span class="string">^19.1.64-beta</span></span><br></pre></td></tr></table></figure><ul><li>第二步: 添加 assets</li></ul><p>将 assets 添加到 pubspec ー yaml 文件。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">assets:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">assets/images/</span></span><br></pre></td></tr></table></figure><ul><li>第三步: 导入</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">import</span> <span class="string">'package:pdf/pdf.dart'</span><span class="string">;</span></span><br><span class="line"><span class="string">import</span> <span class="string">'package:path_provider/path_provider.dart'</span><span class="string">;</span></span><br><span class="line"><span class="string">import</span> <span class="string">'package:syncfusion_flutter_pdfviewer/pdfviewer.dart'</span><span class="string">;</span></span><br></pre></td></tr></table></figure><ul><li>第四步: 在应用程序的根目录中运行 flutter 软件包</li></ul><h4 id="如何实现-dart-文件中的代码"><a href="#如何实现-dart-文件中的代码" class="headerlink" title="如何实现 dart 文件中的代码:"></a>如何实现 dart 文件中的代码:</h4><p>你需要分别在你的代码中实现它:</p><blockquote><p>在 lib 文件夹中创建一个名为 pdf _ screen _ demo. dart 的新 dart 文件。</p></blockquote><ul><li>首先，让我们创建一个基本的 PDF 文件:</li></ul><p>在文件中创建一个 StatefulWidget，名为 PdfScreenDemo。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span> pdfFile = <span class="string">''</span>;</span><br></pre></td></tr></table></figure><p>一个基本的用户界面，我们有一个凸起的按钮，使我们的 PDF 文件和一个可见性小部件揭示 PDF 浏览器一旦 PDF 记录。要查看 PDF 记录，我们将使用 syncfusion/flutter/pdfviewer 包的 SfPdfViewer.file 小部件，在这个小部件中，我们将制作一个文档，其方式与我们制作的 PDF 类似。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Column(</span><br><span class="line">  mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">  children: [</span><br><span class="line">      Visibility(</span><br><span class="line">          visible: pdfFile.isNotEmpty,</span><br><span class="line">          child: SfPdfViewer.file(File(pdfFile),</span><br><span class="line">              canShowScrollHead: <span class="keyword">false</span>, canShowScrollStatus:</span><br><span class="line">           <span class="keyword">false</span>),</span><br><span class="line">        ),</span><br><span class="line">    RaisedButton(</span><br><span class="line">        color: Colors.tealAccent,</span><br><span class="line">        onPressed: () &#123;</span><br><span class="line">        &#125;,</span><br><span class="line">        child: Text(<span class="string">'Create a Pdf File'</span>)),</span><br><span class="line">  ],</span><br><span class="line">),</span><br></pre></td></tr></table></figure><p>PDF 包有它自己的小部件库存，为了调用这些库存，我们需要导入 PDF 小部件作为一个变量名为 pw。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:pdf/widgets.dart'</span> <span class="keyword">as</span> pw;</span><br></pre></td></tr></table></figure><blockquote><p>为了构造一个 PDF 格式，我们将通过调用 pw &lt; widgetnme &gt; 来调用小部件。</p></blockquote><p>为了保存一个 pdf 文件，我们应该做一个。文件()。这个不常见的小部件将保存已生成 PDF 的数据，因此我们在 _ PdfScreenDemoState 中生成一个变量如何。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> pdf = pw.Document();</span><br></pre></td></tr></table></figure><blockquote><p>Lest’s create createPdfFile() method:</p></blockquote><p>在这个模型中，我们的想法是制作一个多页的带有 a4 设计的 PDF。因为我们要添加的图片的数量，页面的数量可能是多个的，按照这些顺序，现在制作一个多页面小部件是个好兆头。</p><p>在 MultiPage 小部件的构建方法内部，将有一个带有 Header 的 Column 和 Divider，用于将实质内容与 Header 分离。在接下来的几个阶段中，我们将在本栏内的分隔符下添加实质内容。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">createPdfFile() &#123;</span><br><span class="line">  pdf.addPage(pw.MultiPage(</span><br><span class="line">      margin: pw.EdgeInsets.all(<span class="number">10</span>),</span><br><span class="line">      pageFormat: PdfPageFormat.a4,</span><br><span class="line">      build: (pw.Context context) &#123;</span><br><span class="line">        <span class="keyword">return</span> &lt;pw.Widget&gt;[</span><br><span class="line">          pw.Column(</span><br><span class="line">              crossAxisAlignment: pw.CrossAxisAlignment.center,</span><br><span class="line">              mainAxisSize: pw.MainAxisSize.min,</span><br><span class="line">              children: [</span><br><span class="line">                pw.Text(<span class="string">'Create a basic PDF'</span>,</span><br><span class="line">                    textAlign: pw.TextAlign.center,</span><br><span class="line">                    style: pw.TextStyle(fontSize: <span class="number">26</span>)),</span><br><span class="line">                pw.Divider(),</span><br><span class="line">              ]),</span><br><span class="line">        ];</span><br><span class="line">      &#125;));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>此后，我们应该创建一个 savePdfFile ()方法。</p></blockquote><p>它是一种异步方法，等待 IOS 或 Android 平台的目录。然后，该技术使用 ID 的名称和目录的 documentPath 创建一个记录。你可以用任何你喜欢的方式来命名你的记录，但是对于不同的 PDF 创建来说，更聪明的做法是为每个 PDF 文档都起一个特殊的名字。</p><p>最后，该方法将 PDF 保存为文件。Path 和 value 被赋给 setState 策略中的 pdfFile 变量，以便稍后刷新 UI。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">savePdfFile() <span class="keyword">async</span> &#123;</span><br><span class="line">Directory documentDirectory = <span class="keyword">await</span> getApplicationDocumentsDirectory();</span><br><span class="line"></span><br><span class="line"><span class="built_in">String</span> documentPath = documentDirectory.path;</span><br><span class="line"></span><br><span class="line"><span class="built_in">String</span> id = <span class="built_in">DateTime</span>.now().toString();</span><br><span class="line"></span><br><span class="line">File file = File(<span class="string">"$documentPath/$id.pdf"</span>);</span><br><span class="line"></span><br><span class="line">file.writeAsBytesSync(<span class="keyword">await</span> pdf.save());</span><br><span class="line">setState(() &#123;</span><br><span class="line">pdfFile = file.path;</span><br><span class="line">pdf = pw.Document();</span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>重要提示: 任命民主党人是根本。在保存 pdf 文件之后，将 Document ()转换为 pdf 变量。如果不这样做，该 pdf 将尝试使另一个最近制作的 pdf 文件，这将导致一个有缺陷的 pdf 文件被制作。</p></blockquote><p>如果您需要保存您的 PDF 文件的字节，您可以利用下方的方法。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">List</span>&lt;<span class="built_in">int</span>&gt; pdfBytes;</span><br><span class="line">pdfBytes = <span class="keyword">await</span> file.readAsBytes();</span><br><span class="line">pdfFile base64Encode(pdfBytes);</span><br></pre></td></tr></table></figure><blockquote><p>除此之外，使用异步 onPressed 方法:</p></blockquote><p>为了保存记录，我们需要首先等待 createPdfFile ()策略。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">onPressed: () <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="keyword">await</span> createPdfFile();</span><br><span class="line">  savePdfFile();</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>好了，现在一切都安排好了。你可以点击“创建一个 PDF 文件”按钮来查看你的第一个基本 PDF 文档。当我们运行应用程序时，我们应该得到屏幕的输出，就像下面的屏幕截图一样。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-18-09-02-23.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>让我们用一个图片创建一个 pdf 文件:</li></ul><p>在 pdf 包中，你可以添加一个图片。MemoryImage.因此，我们需要将图片更改为内存字节。</p><blockquote><p>首先导入下面的软件包。</p></blockquote><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'dart:typed_data'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/services.dart'</span>;</span><br></pre></td></tr></table></figure><p>从那时起，将 createdffile 转换为一个 async 方法，并添加这两个变量。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> ByteData bytes = <span class="keyword">await</span> rootBundle.load(<span class="string">'assets/images/null_safety.png'</span>);</span><br><span class="line"><span class="keyword">final</span> Uint8List byteList = bytes.buffer.asUint8List();</span><br></pre></td></tr></table></figure><p>第一个变量在资源图片上更改为字节，第二个变量在字节上更改为 Uint8List 字节列表。</p><p>然后，在这一点上添加一个 pw 图像小部件在分隔符下面。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">createPdfFile() <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="keyword">final</span> ByteData bytes =</span><br><span class="line">      <span class="keyword">await</span> rootBundle.load(<span class="string">'assets/images/null_safety.png'</span>);</span><br><span class="line">  <span class="keyword">final</span> Uint8List byteList = bytes.buffer.asUint8List();</span><br><span class="line">  pdf.addPage(pw.MultiPage(</span><br><span class="line">      margin: pw.EdgeInsets.all(<span class="number">10</span>),</span><br><span class="line">      pageFormat: PdfPageFormat.a4,</span><br><span class="line">      build: (pw.Context context) &#123;</span><br><span class="line">        <span class="keyword">return</span> &lt;pw.Widget&gt;[</span><br><span class="line">          pw.Column(</span><br><span class="line">              crossAxisAlignment: pw.CrossAxisAlignment.center,</span><br><span class="line">              mainAxisSize: pw.MainAxisSize.min,</span><br><span class="line">              children: [</span><br><span class="line">                pw.Text(<span class="string">'Flutter Pdf File with Image'</span>,</span><br><span class="line">                    textAlign: pw.TextAlign.center,</span><br><span class="line">                    style: pw.TextStyle(fontSize: <span class="number">26</span>)),</span><br><span class="line"></span><br><span class="line">                pw.Divider(),</span><br><span class="line">              ]),</span><br><span class="line">          pw.SizedBox(height: <span class="number">70</span>),</span><br><span class="line">          pw.Image(</span><br><span class="line">              pw.MemoryImage(</span><br><span class="line">                byteList,</span><br><span class="line">              ),</span><br><span class="line">              height: <span class="number">300</span>,</span><br><span class="line">              fit: pw.BoxFit.fitHeight),</span><br><span class="line">        ];</span><br><span class="line">      &#125;));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>MemoryImage 接受 byteList 作为位置竞争，将图片传送到 pdf 记录中。现在重新启动应用程序，并尝试制作另一个 PDF 文档，以查看其中包含图片的文件。当我们运行应用程序时，我们应该获得屏幕输出，就像下面的屏幕截图一样。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-18-09-03-57.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>让我们创建一个有多个图片的 pdf 文件:</li></ul><p>在演示的最后一步，我们将制作一个 pdf 构建技术，它可以用给定的各种图像生成一条记录。首先，我们需要制定一个策略，将图片转换为 Uint8List 设计。</p><blockquote><p>在状态小部件中，创建一个空白列表，用于将图片放入 Uint8list。</p></blockquote><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">List</span>&lt;Uint8List&gt; imagesUint8list = [];</span><br></pre></td></tr></table></figure><blockquote><p>然后，我们应该重构 createdffile 方法，并集中于另一种获取图片字节的技术。</p></blockquote><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">getImageBytes(<span class="built_in">String</span> assetImage) <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> ByteData bytes = <span class="keyword">await</span> rootBundle.load(assetImage);</span><br><span class="line">    <span class="keyword">final</span> Uint8List byteList = bytes.buffer.asUint8List();</span><br><span class="line">    imagesUint8list.add(byteList);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>现在我们将制作一个类型为 pw 的列表。createPdfFile ()技术中的小部件，它生成具有图像标题和图像本身的 Column。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="built_in">List</span>&lt;pw.Widget&gt; pdfImages = imagesUint8list.map((image) &#123;</span><br><span class="line">      <span class="keyword">return</span> pw.Padding(</span><br><span class="line">          padding: pw.EdgeInsets.symmetric(vertical: <span class="number">20</span>, horizontal:    <span class="number">10</span>),</span><br><span class="line">          child: pw.Column(</span><br><span class="line">              crossAxisAlignment: pw.CrossAxisAlignment.center,</span><br><span class="line">              mainAxisSize: pw.MainAxisSize.max,</span><br><span class="line">              children: [</span><br><span class="line">                pw.Text(</span><br><span class="line">                    <span class="string">'Image'</span></span><br><span class="line">                            <span class="string">' '</span> +</span><br><span class="line">                        (imagesUint8list</span><br><span class="line">                                    .indexWhere((element) =&gt; element</span><br><span class="line">                                   == image) +</span><br><span class="line">                                <span class="number">1</span>)</span><br><span class="line">                            .toString(),</span><br><span class="line">                    style: pw.TextStyle(fontSize: <span class="number">22</span>)),</span><br><span class="line">                pw.SizedBox(height: <span class="number">10</span>),</span><br><span class="line">                pw.Image(</span><br><span class="line">                    pw.MemoryImage(</span><br><span class="line">                      image,</span><br><span class="line">                    ),</span><br><span class="line">                    height: <span class="number">400</span>,</span><br><span class="line">                    fit: pw.BoxFit.fitHeight)</span><br><span class="line">              ]));</span><br><span class="line">    &#125;).toList();</span><br></pre></td></tr></table></figure><blockquote><p>注意: 这是紧急给一个特定的最大大小的图片小部件，否则一个图片可能会溢出页面设计促使一个失败的 pdf 创建。</p></blockquote><p>Createdffile 最初会创建一个 for 循环，将多个图片更改为 Uint8List。稍后，它将制作一个带有头部的图片列表。最后，pdfImages 将作为子文件显示在 pdf 的基本列中。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">createPdfFile() <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">String</span> image <span class="keyword">in</span> assetImages) <span class="keyword">await</span> getImageBytes(image);</span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">List</span>&lt;pw.Widget&gt; images = imagesUint8list.map((image) &#123;</span><br><span class="line">      <span class="keyword">return</span> pw.Padding(</span><br><span class="line">          padding: pw.EdgeInsets.symmetric(vertical: <span class="number">20</span>, horizontal:  <span class="number">10</span>),</span><br><span class="line">          child: pw.Column(</span><br><span class="line">              crossAxisAlignment: pw.CrossAxisAlignment.center,</span><br><span class="line">              mainAxisSize: pw.MainAxisSize.max,</span><br><span class="line">              children: [</span><br><span class="line">                pw.Text(</span><br><span class="line">                    <span class="string">'Image'</span></span><br><span class="line">                            <span class="string">' '</span> +</span><br><span class="line">                        (imagesUint8list</span><br><span class="line">                                   .indexWhere((element) =&gt; element</span><br><span class="line">                             == image) +</span><br><span class="line">                                <span class="number">1</span>)</span><br><span class="line">                            .toString(),</span><br><span class="line">                    style: pw.TextStyle(fontSize: <span class="number">22</span>)),</span><br><span class="line">                pw.SizedBox(height: <span class="number">10</span>),</span><br><span class="line">                pw.Image(</span><br><span class="line">                    pw.MemoryImage(</span><br><span class="line">                      image,</span><br><span class="line">                    ),</span><br><span class="line">                    height: <span class="number">400</span>,</span><br><span class="line">                    fit: pw.BoxFit.fitHeight)</span><br><span class="line">              ]));</span><br><span class="line">    &#125;).toList();</span><br><span class="line">    pdf.addPage(pw.MultiPage(</span><br><span class="line">        margin: pw.EdgeInsets.all(<span class="number">10</span>),</span><br><span class="line">        pageFormat: PdfPageFormat.a4,</span><br><span class="line">        build: (pw.Context context) &#123;</span><br><span class="line">          <span class="keyword">return</span> &lt;pw.Widget&gt;[</span><br><span class="line">            pw.Column(</span><br><span class="line">                crossAxisAlignment: pw.CrossAxisAlignment.center,</span><br><span class="line">                mainAxisSize: pw.MainAxisSize.min,</span><br><span class="line">                children: [</span><br><span class="line">                  pw.Text(<span class="string">'Create a Simple PDF'</span>,</span><br><span class="line">                      textAlign: pw.TextAlign.center,</span><br><span class="line">                      style: pw.TextStyle(fontSize: <span class="number">26</span>)),</span><br><span class="line">                  pw.Divider(),</span><br><span class="line">                ]),</span><br><span class="line">            pw.Column(</span><br><span class="line">                crossAxisAlignment: pw.CrossAxisAlignment.center,</span><br><span class="line">                mainAxisSize: pw.MainAxisSize.max,</span><br><span class="line">                children: pdfImages),</span><br><span class="line">          ];</span><br><span class="line">        &#125;));</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><blockquote><p>另一个步骤是用 SingleChildScrollView 和 Expanded 小部件包装可见性小部件。</p></blockquote><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Expanded(</span><br><span class="line">              child: SingleChildScrollView(</span><br><span class="line">                child: Visibility(</span><br><span class="line">                  visible: pdfFile.isNotEmpty,</span><br><span class="line">                  child: SfPdfViewer.file(File(pdfFile),</span><br><span class="line">                      canShowScrollHead: <span class="keyword">false</span>, canShowScrollStatus: <span class="keyword">false</span>),</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br></pre></td></tr></table></figure><p>现在如何我们按下按钮最后一次机会，使 PDF 文件与多个图片。当我们运行应用程序时，我们应该得到屏幕的输出，就像下面的屏幕截图一样。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-18-09-06-05.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h4 id="代码-1"><a href="#代码-1" class="headerlink" title="代码:"></a>代码:</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'dart:io'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'dart:typed_data'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/services.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:path_provider/path_provider.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:pdf/pdf.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:pdf/widgets.dart'</span> <span class="keyword">as</span> pw;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:syncfusion_flutter_pdfviewer/pdfviewer.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PdfScreenDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _PdfScreenDemoState createState() =&gt; _PdfScreenDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_PdfScreenDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">PdfScreenDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">String</span> pdfFile = <span class="string">''</span>;</span><br><span class="line">  <span class="keyword">var</span> pdf = pw.Document();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; assetImages = [</span><br><span class="line">    <span class="string">'assets/images/null_safety.png'</span>,</span><br><span class="line">    <span class="string">'assets/images/stream.png'</span>,</span><br><span class="line">    <span class="string">'assets/images/error_handling.jpg'</span></span><br><span class="line">  ];</span><br><span class="line">  <span class="built_in">List</span>&lt;Uint8List&gt; imagesUint8list = [];</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> SafeArea(</span><br><span class="line">      child: Scaffold(</span><br><span class="line">        body: Center(</span><br><span class="line">          child: Column(</span><br><span class="line">            mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">            children: [</span><br><span class="line">              Expanded(</span><br><span class="line">                child: SingleChildScrollView(</span><br><span class="line">                  child: Visibility(</span><br><span class="line">                    visible: pdfFile.isNotEmpty,</span><br><span class="line">                    child: SfPdfViewer.file(File(pdfFile),</span><br><span class="line">                        canShowScrollHead: <span class="keyword">false</span>, canShowScrollStatus: <span class="keyword">false</span>),</span><br><span class="line">                  ),</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">              RaisedButton(</span><br><span class="line">                  color: Colors.tealAccent,</span><br><span class="line">                  onPressed: () <span class="keyword">async</span> &#123;</span><br><span class="line">                    <span class="keyword">await</span> createPdfFile();</span><br><span class="line">                    savePdfFile();</span><br><span class="line">                  &#125;,</span><br><span class="line">                  child: Text(<span class="string">'Create a Pdf File'</span>)),</span><br><span class="line">            ],</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  getImageBytes(<span class="built_in">String</span> assetImage) <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> ByteData bytes = <span class="keyword">await</span> rootBundle.load(assetImage);</span><br><span class="line">    <span class="keyword">final</span> Uint8List byteList = bytes.buffer.asUint8List();</span><br><span class="line">    imagesUint8list.add(byteList);</span><br><span class="line">    <span class="built_in">print</span>(imagesUint8list.length);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  createPdfFile() <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">String</span> image <span class="keyword">in</span> assetImages) <span class="keyword">await</span> getImageBytes(image);</span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">List</span>&lt;pw.Widget&gt; pdfImages = imagesUint8list.map((image) &#123;</span><br><span class="line">      <span class="keyword">return</span> pw.Padding(</span><br><span class="line">          padding: pw.EdgeInsets.symmetric(vertical: <span class="number">50</span>, horizontal: <span class="number">10</span>),</span><br><span class="line">          child: pw.Column(</span><br><span class="line">              crossAxisAlignment: pw.CrossAxisAlignment.center,</span><br><span class="line">              mainAxisSize: pw.MainAxisSize.max,</span><br><span class="line">              children: [</span><br><span class="line">                pw.Text(</span><br><span class="line">                    <span class="string">'Image'</span></span><br><span class="line">                            <span class="string">' '</span> +</span><br><span class="line">                        (imagesUint8list</span><br><span class="line">                                    .indexWhere((element) =&gt; element == image) +</span><br><span class="line">                                <span class="number">1</span>)</span><br><span class="line">                            .toString(),</span><br><span class="line">                    style: pw.TextStyle(fontSize: <span class="number">22</span>)),</span><br><span class="line">                pw.SizedBox(height: <span class="number">30</span>),</span><br><span class="line">                pw.Image(</span><br><span class="line">                    pw.MemoryImage(</span><br><span class="line">                      image,</span><br><span class="line">                    ),</span><br><span class="line">                    height: <span class="number">300</span>,</span><br><span class="line">                    fit: pw.BoxFit.fitHeight)</span><br><span class="line">              ]));</span><br><span class="line">    &#125;).toList();</span><br><span class="line"></span><br><span class="line">    pdf.addPage(pw.MultiPage(</span><br><span class="line">        margin: pw.EdgeInsets.all(<span class="number">10</span>),</span><br><span class="line">        pageFormat: PdfPageFormat.a4,</span><br><span class="line">        build: (pw.Context context) &#123;</span><br><span class="line">          <span class="keyword">return</span> &lt;pw.Widget&gt;[</span><br><span class="line">            pw.Column(</span><br><span class="line">                crossAxisAlignment: pw.CrossAxisAlignment.center,</span><br><span class="line">                mainAxisSize: pw.MainAxisSize.min,</span><br><span class="line">                children: [</span><br><span class="line">                  pw.Text(<span class="string">'Flutter Pdf File with Multiple Image'</span>,</span><br><span class="line">                      textAlign: pw.TextAlign.center,</span><br><span class="line">                      style: pw.TextStyle(fontSize: <span class="number">26</span>)),</span><br><span class="line">                  pw.Divider(),</span><br><span class="line">                ]),</span><br><span class="line">            pw.Column(</span><br><span class="line">                crossAxisAlignment: pw.CrossAxisAlignment.center,</span><br><span class="line">                mainAxisSize: pw.MainAxisSize.max,</span><br><span class="line">                children: pdfImages),</span><br><span class="line">          ];</span><br><span class="line">        &#125;));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  savePdfFile() <span class="keyword">async</span> &#123;</span><br><span class="line">    Directory documentDirectory = <span class="keyword">await</span> getApplicationDocumentsDirectory();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">String</span> documentPath = documentDirectory.path;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">String</span> id = <span class="built_in">DateTime</span>.now().toString();</span><br><span class="line"></span><br><span class="line">    File file = File(<span class="string">"$documentPath/$id.pdf"</span>);</span><br><span class="line"></span><br><span class="line">    file.writeAsBytesSync(<span class="keyword">await</span> pdf.save());</span><br><span class="line">    setState(() &#123;</span><br><span class="line">      pdfFile = file.path;</span><br><span class="line">      pdf = pw.Document();</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h4><p>在这篇文章中，我解释了创建 PDF 文件的基本结构与多重图像 Flutter; 您可以修改这个代码根据您的选择。这是一个小的介绍创建 PDF 文件与多图像用户交互从我这边，它的工作使用 Flutter。</p><p>我希望这个博客将提供您在尝试创建 PDF 文件与多个图像在您的扑项目充分的信息。我们将向您展示介绍是什么？.制作一个演示程序为工作创建 PDF 文件与多个图像和显示当用户点击一个创建按钮，然后 PDF 发生，与多个图像根据页面使用所有三个软件包在您的 Flutter 应用程序。所以请尝试一下。</p><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.tech/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>用 Flutter 实现动画 Motion Design</title>
    <link href="https://blog.ducafecat.tech/2021/06/17/translation/implementing-motion-design-with-flutter/"/>
    <id>https://blog.ducafecat.tech/2021/06/17/translation/implementing-motion-design-with-flutter/</id>
    <published>2021-06-16T16:00:00.000Z</published>
    <updated>2021-06-17T00:53:02.481Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-17-08-24-47.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="猫哥说"><a href="#猫哥说" class="headerlink" title="猫哥说"></a>猫哥说</h2><p>这篇文章讲的是如何在你的动画中加入运动特性、运动球、重力、贝塞尔曲线、多边形、不规则曲线，如果你正在找这方面资料，这个源码你可要好好消化了。这都是动画中的基础，前端就是要酷炫，开始吧。</p><p>最佳体验还是阅读原文（链接在下面）。</p><h2 id="老铁记得-转发-，猫哥会呈现更多-Flutter-好文"><a href="#老铁记得-转发-，猫哥会呈现更多-Flutter-好文" class="headerlink" title="老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~"></a>老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~</h2><h2 id="微信-Flutter-技术群-ducafecat"><a href="#微信-Flutter-技术群-ducafecat" class="headerlink" title="微信 Flutter 技术群 ducafecat"></a>微信 Flutter 技术群 ducafecat</h2><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><p><a href="https://preyea-regmi.medium.com/implementing-motion-design-with-flutter-126d06b080ab" target="_blank" rel="noopener">https://preyea-regmi.medium.com/implementing-motion-design-with-flutter-126d06b080ab</a></p><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/PreyeaRegmi/FlutterMotionDesignSamples" target="_blank" rel="noopener">https://github.com/PreyeaRegmi/FlutterMotionDesignSamples</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://pub.flutter-io.cn/packages/get#reactive-state-manager" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/get#reactive-state-manager</a></li><li><a href="https://dart.dev/guides/language/extension-methods" target="_blank" rel="noopener">https://dart.dev/guides/language/extension-methods</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><p>大部分时间实现运动设计是一个有点累赘的移动应用程序。本文从更加实用的角度阐述了如何通过 Flutter 实现运动设计。我们将采取一个简单的运动设计从运球作为一个参考，并开始建设它一步一步。所有版权保留给各自的作者，实现的完整源代码可以在 github 上找到。</p><p><a href="https://github.com/PreyeaRegmi/FlutterMotionDesignSamples" target="_blank" rel="noopener">https://github.com/PreyeaRegmi/FlutterMotionDesignSamples</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="login-interaction.gif" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>现在我们将重点放在登录/注册交互上。所以，就像其他的交互设计一样，我们将尝试把它分解成多个场景，这样我们就可以有一个清晰的整体概念，并将这些场景链接在一起。</p><h3 id="场景-1-初始状态屏幕"><a href="#场景-1-初始状态屏幕" class="headerlink" title="场景 1: 初始状态屏幕"></a>场景 1: 初始状态屏幕</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-17-08-03-58.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>在这个场景中，我们在底部有一个弹跳的图像和文字，一个弯曲的白色背景，一个品牌标题包围着图像的中心和变形虫形状的背景。拖动底部的内容，直到一定的距离被覆盖，揭示动画播放和场景转换到下一个场景。</p><h3 id="展示动画-中间场景"><a href="#展示动画-中间场景" class="headerlink" title="展示动画(中间场景)"></a>展示动画(中间场景)</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-17-08-04-33.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>在这个中间场景中，曲线背景高度是动画的。此外，在这个动画，控制点的三次贝塞尔曲线也被平移和还原，以提供加速效果。侧面的图标和变形虫背景也在垂直方向上 translated 以响应动画的显示。</p><h3 id="场景-2-后期显示动画状态屏幕"><a href="#场景-2-后期显示动画状态屏幕" class="headerlink" title="场景 2: 后期显示动画状态屏幕"></a>场景 2: 后期显示动画状态屏幕</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-17-08-05-27.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>当显示动画完成后，品牌标题被一个圆形图标取代，一个标签指示器从屏幕左侧飞过来，相应的标签被加载。</p><p>现在我们有了设计中涉及的相关场景的概述。下一步，我们尝试将这些想法映射到实现细节中。那么让我们开始吧。</p><p>我们将使用 stack 作为顶级容器来托管我们所有的场景，并根据当前场景状态，我们将向 stack 添加各自的小部件，并动画他们的几何图形。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="built_in">List</span>&lt;Widget&gt; stackChildren = [];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span> (currentScreenState) &#123;</span><br><span class="line">      <span class="keyword">case</span> CURRENT_SCREEN_STATE.INIT_STATE:</span><br><span class="line">        stackChildren.addAll(_getBgWidgets());</span><br><span class="line">        stackChildren.addAll(_getDefaultWidgets());</span><br><span class="line">        stackChildren.addAll(_getInitScreenWidgets());</span><br><span class="line">        stackChildren.add(_getBrandTitle());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> CURRENT_SCREEN_STATE.REVEALING_ANIMATING_STATE:</span><br><span class="line">        stackChildren.addAll(_getBgWidgets());</span><br><span class="line">        stackChildren.addAll(_getDefaultWidgets());</span><br><span class="line">        stackChildren.add(_getBrandTitle());</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> CURRENT_SCREEN_STATE.POST_REVEAL_STATE:</span><br><span class="line">        stackChildren.addAll(_getBgWidgets());</span><br><span class="line">        stackChildren.addAll(_getDefaultWidgets());</span><br><span class="line">        stackChildren.insert(stackChildren.length - <span class="number">1</span>, _getCurvedPageSwitcher());</span><br><span class="line">        stackChildren.addAll(_getPostRevealAnimationStateWidgets());</span><br><span class="line">        stackChildren.add(buildPages());</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> Stack(children: stackChildren);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>对于场景 1，所有相应的小部件都被定位并添加到 stack 中。底部“向上滑动开始”小部件的弹跳效果也立即开始。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Animation Controller for setting bounce animation for "Swipe up" text widget</span></span><br><span class="line">    _swipeUpBounceAnimationController =</span><br><span class="line">        AnimationController(duration: <span class="built_in">Duration</span>(milliseconds: <span class="number">800</span>), vsync: <span class="keyword">this</span>)</span><br><span class="line">          ..repeat(reverse: <span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Animation for actual bounce effect</span></span><br><span class="line">    _swipeUpBounceAnimation = Tween&lt;<span class="built_in">double</span>&gt;(begin: <span class="number">0</span>, end: <span class="number">-20</span>).animate(</span><br><span class="line">        CurvedAnimation(</span><br><span class="line">            parent: _swipeUpBounceAnimationController,</span><br><span class="line">            curve: Curves.easeOutBack))</span><br><span class="line">      ..addListener(() &#123;</span><br><span class="line">        setState(() &#123;</span><br><span class="line">          _swipeUpDy = _swipeUpBounceAnimation.value;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//We want to loop bounce effect until user intercepts with drag touch event.</span></span><br><span class="line">    _swipeUpBounceAnimationController.repeat(reverse: <span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//Animated value used by corresponding "Swipe up to Start" Widget in _getInitScreenWidgets() method</span></span><br><span class="line"> Positioned(</span><br><span class="line">          right: <span class="number">0</span>,</span><br><span class="line">          left: <span class="number">0</span>,</span><br><span class="line">          bottom: widget.height * <span class="number">.05</span>,</span><br><span class="line">          child: Transform.translate(</span><br><span class="line">              offset: Offset(<span class="number">0</span>, _swipeUpDy),</span><br><span class="line">              child: IgnorePointer(</span><br><span class="line">                child: Column(</span><br><span class="line">                    mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">                    crossAxisAlignment: CrossAxisAlignment.center,</span><br><span class="line">                    children: [</span><br><span class="line">                      Icon(</span><br><span class="line">                        Icons.upload_rounded,</span><br><span class="line">                        color: Colors.deepPurple,</span><br><span class="line">                        size: <span class="number">52</span>,</span><br><span class="line">                      ),</span><br><span class="line">                      Text(</span><br><span class="line">                        <span class="string">"Swipe up to start"</span>,</span><br><span class="line">                        style: TextStyle(color: Colors.grey.shade800),</span><br><span class="line">                      )</span><br><span class="line">                    ]),</span><br><span class="line">              ))),</span><br></pre></td></tr></table></figure><p>为了实现这个小部件的拖动行为，一个可滚动的小部件也被放置在顶部，覆盖屏幕的下半部分。“向上滑动开始”也会根据拖动距离进行 translated，一旦跨过阈值(可滚动部件高度的 70%) ，就会播放显示动画。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//A simple container with a SingleChildScrollView. The trick is to set the child of SingleChildScrollView height</span></span><br><span class="line"><span class="comment">//exceed the height of parent scroll widget so it can be scrolled. The BouncingScrollPhysics helps the scroll retain its</span></span><br><span class="line"><span class="comment">//original position if it doesn't cross the threshold to play reveal animation.</span></span><br><span class="line"><span class="comment">//This widget is added by _getInitScreenWidgets() method</span></span><br><span class="line">Positioned(</span><br><span class="line">        right: <span class="number">0</span>,</span><br><span class="line">        left: <span class="number">0</span>,</span><br><span class="line">        bottom: <span class="number">0</span>,</span><br><span class="line">        child: Container(</span><br><span class="line">          height: widget.height * <span class="number">.5</span>,</span><br><span class="line">          child: SingleChildScrollView(</span><br><span class="line">            controller: _scrollController,</span><br><span class="line">            physics: BouncingScrollPhysics(),</span><br><span class="line">            child: Container(</span><br><span class="line">              height: widget.height * <span class="number">.5</span> + <span class="number">.1</span>,</span><br><span class="line">              <span class="comment">// color:Colors.yellow,</span></span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line"></span><br><span class="line"> <span class="comment">//Intercepts the bounce animation and start dragg animation</span></span><br><span class="line">  <span class="keyword">void</span> _handleSwipe() &#123;</span><br><span class="line">    _swipeUpBounceAnimationController.stop(canceled: <span class="keyword">true</span>);</span><br><span class="line">    <span class="built_in">double</span> dy = _scrollController.position.pixels;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">double</span> scrollRatio =</span><br><span class="line">        math.min(<span class="number">1.0</span>, _scrollController.position.pixels / _swipeDistance);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//If user scroll 70% of the scrolling region we proceed towards reveal animation</span></span><br><span class="line">    <span class="keyword">if</span> (scrollRatio &gt; <span class="number">.7</span>)</span><br><span class="line">      _playRevealAnimation();</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      setState(() &#123;</span><br><span class="line">        _swipeUpDy = dy * <span class="number">-1</span>;</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>在显示动画中，使用 CustomPainter 绘制曲线背景和变形虫背景。在动画制作过程中，曲线背景的高度以及中间控制点都被内插到了屏幕高度的 75% 。类似地，用贝塞尔曲线绘制的变形虫也是垂直平移的。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Update scene state to "reveal" and start corresponding animation</span></span><br><span class="line"><span class="comment">//This method is called when drag excced our defined threshold</span></span><br><span class="line">  <span class="keyword">void</span> _playRevealAnimation() &#123;</span><br><span class="line">    setState(() &#123;</span><br><span class="line">      currentScreenState = CURRENT_SCREEN_STATE.REVEALING_ANIMATING_STATE;</span><br><span class="line">      _revealAnimationController.forward();</span><br><span class="line">      _amoebaAnimationController.forward();</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Animation controller for expanding the curve animation</span></span><br><span class="line">    _revealAnimationController =</span><br><span class="line">        AnimationController(duration: <span class="built_in">Duration</span>(milliseconds: <span class="number">500</span>), vsync: <span class="keyword">this</span>)</span><br><span class="line">          ..addStatusListener((status) &#123;</span><br><span class="line">            <span class="keyword">if</span> (status == AnimationStatus.completed)</span><br><span class="line">              setState(() &#123;</span><br><span class="line">                currentScreenState = CURRENT_SCREEN_STATE.POST_REVEAL_STATE;</span><br><span class="line">                _postRevealAnimationController.forward();</span><br><span class="line">              &#125;);</span><br><span class="line">          &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//Animation to translate the brand label</span></span><br><span class="line">    _titleBaseLinePosTranslateAnim = RelativeRectTween(</span><br><span class="line">            begin: RelativeRect.fromLTRB(</span><br><span class="line">                <span class="number">0</span>,</span><br><span class="line">                widget.height -</span><br><span class="line">                    _initialCurveHeight -</span><br><span class="line">                    widget.height * <span class="number">.2</span> -</span><br><span class="line">                    arcHeight,</span><br><span class="line">                <span class="number">0</span>,</span><br><span class="line">                _initialCurveHeight),</span><br><span class="line">            end: RelativeRect.fromLTRB(</span><br><span class="line">                <span class="number">0</span>,</span><br><span class="line">                widget.height - _finalCurveHeight - <span class="number">20</span> - arcHeight,</span><br><span class="line">                <span class="number">0</span>,</span><br><span class="line">                _finalCurveHeight))</span><br><span class="line">        .animate(CurvedAnimation(</span><br><span class="line">            parent: _revealAnimationController, curve: Curves.easeOutBack));</span><br><span class="line"></span><br><span class="line"><span class="comment">//Animation to translate side icons</span></span><br><span class="line">    _sideIconsTranslateAnim = RelativeRectTween(</span><br><span class="line">            begin: RelativeRect.fromLTRB(</span><br><span class="line">                <span class="number">0</span>,</span><br><span class="line">                widget.height -</span><br><span class="line">                    _initialCurveHeight -</span><br><span class="line">                    widget.height * <span class="number">.25</span> -</span><br><span class="line">                    arcHeight,</span><br><span class="line">                <span class="number">0</span>,</span><br><span class="line">                _initialCurveHeight),</span><br><span class="line">            end: RelativeRect.fromLTRB(</span><br><span class="line">                <span class="number">0</span>,</span><br><span class="line">                widget.height -</span><br><span class="line">                    _finalCurveHeight -</span><br><span class="line">                    widget.height * <span class="number">.25</span> -</span><br><span class="line">                    arcHeight,</span><br><span class="line">                <span class="number">0</span>,</span><br><span class="line">                _finalCurveHeight))</span><br><span class="line">        .animate(CurvedAnimation(</span><br><span class="line">            parent: _revealAnimationController, curve: Curves.easeInOutBack));</span><br><span class="line"></span><br><span class="line"><span class="comment">//Tween for animating height of the curve during reveal process</span></span><br><span class="line">_swipeArcAnimation =</span><br><span class="line">        Tween&lt;<span class="built_in">double</span>&gt;(begin: _initialCurveHeight, end: _finalCurveHeight)</span><br><span class="line">            .animate(CurvedAnimation(</span><br><span class="line">                parent: _revealAnimationController, curve: Curves.easeInCubic));</span><br><span class="line"></span><br><span class="line"><span class="comment">//Animation for the mid control point of cubic bezier curve to show acceleration effect in response to user drag.</span></span><br><span class="line">    _swipeArchHeightAnimation = TweenSequence&lt;<span class="built_in">double</span>&gt;(</span><br><span class="line">      &lt;TweenSequenceItem&lt;<span class="built_in">double</span>&gt;&gt;[</span><br><span class="line">        TweenSequenceItem&lt;<span class="built_in">double</span>&gt;(</span><br><span class="line">          tween: Tween&lt;<span class="built_in">double</span>&gt;(begin: <span class="number">0</span>, end: <span class="number">200</span>),</span><br><span class="line">          weight: <span class="number">50.0</span>,</span><br><span class="line">        ),</span><br><span class="line">        TweenSequenceItem&lt;<span class="built_in">double</span>&gt;(</span><br><span class="line">          tween: Tween&lt;<span class="built_in">double</span>&gt;(begin: <span class="number">200</span>, end: <span class="number">0</span>),</span><br><span class="line">          weight: <span class="number">50.0</span>,</span><br><span class="line">        ),</span><br><span class="line">      ],</span><br><span class="line">    ).animate(CurvedAnimation(</span><br><span class="line">        parent: _revealAnimationController, curve: Curves.easeInCubic));</span><br><span class="line"></span><br><span class="line"><span class="comment">//Animation Controller for amoeba background</span></span><br><span class="line">    _amoebaAnimationController =</span><br><span class="line">        AnimationController(duration: <span class="built_in">Duration</span>(milliseconds: <span class="number">350</span>), vsync: <span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    _amoebaOffsetAnimation =</span><br><span class="line">        Tween&lt;Offset&gt;(begin: Offset(<span class="number">0</span>, <span class="number">0</span>), end: Offset(<span class="number">-20</span>, <span class="number">-70</span>)).animate(</span><br><span class="line">            CurvedAnimation(</span><br><span class="line">                parent: _amoebaAnimationController,</span><br><span class="line">                curve: Curves.easeInOutBack));</span><br></pre></td></tr></table></figure><p>完成动画后，场景 2 就设置好了。在这个场景中，品牌标题被图标所取代，标签指示器从屏幕左侧显示。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Animation controller for showing animation after reveal</span></span><br><span class="line">    _postRevealAnimationController =</span><br><span class="line">        AnimationController(duration: <span class="built_in">Duration</span>(milliseconds: <span class="number">600</span>), vsync: <span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line"> <span class="comment">//Scale animation for showing center logo after reveal is completed</span></span><br><span class="line">    _centerIconScale = Tween&lt;<span class="built_in">double</span>&gt;(begin: <span class="number">0</span>, end: <span class="number">.5</span>).animate(CurvedAnimation(</span><br><span class="line">      parent: _postRevealAnimationController,</span><br><span class="line">      curve: Curves.fastOutSlowIn,</span><br><span class="line">    ));</span><br><span class="line"></span><br><span class="line"><span class="comment">//_centerIconScale animation used by FAB in the middle</span></span><br><span class="line"> Positioned.fromRelativeRect(</span><br><span class="line">        rect: _titleBaseLinePosTranslateAnim.value.shift(Offset(<span class="number">0</span>, <span class="number">18</span>)),</span><br><span class="line">        child: ScaleTransition(</span><br><span class="line">            scale: _centerIconScale,</span><br><span class="line">            child: FloatingActionButton(</span><br><span class="line">                backgroundColor: Colors.white,</span><br><span class="line">                elevation: <span class="number">5</span>,</span><br><span class="line">                onPressed: <span class="keyword">null</span>,</span><br><span class="line">                child: Icon(Icons.monetization_on_outlined,</span><br><span class="line">                    size: <span class="number">100</span>,</span><br><span class="line">                    color: isLeftTabSelected</span><br><span class="line">                        ? Colors.deepPurple</span><br><span class="line">                        : Colors.pinkAccent))),</span><br><span class="line">      ),</span><br><span class="line"></span><br><span class="line"><span class="comment">//Tab selection is done by "CurvePageSwitchIndicator" widget</span></span><br><span class="line">Positioned(</span><br><span class="line">      top: <span class="number">0</span>,</span><br><span class="line">      bottom: _titleBaseLinePosTranslateAnim.value.bottom,</span><br><span class="line">      left: <span class="number">0</span>,</span><br><span class="line">      right: <span class="number">0</span>,</span><br><span class="line">      child: CurvePageSwitchIndicator(widget.height, widget.width, arcHeight, <span class="number">3</span>,</span><br><span class="line">          <span class="keyword">true</span>, _onLeftTabSelectd, _onRightTabSelectd),</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//The build method of CurvePageSwitchIndicator consisting of "CurvePageSwitcher" CustomPainter to paint tab selection arc</span></span><br><span class="line"><span class="comment">//and Gesture detectors stacked on top to intercept left and right tap event.</span></span><br><span class="line"><span class="comment"><span class="markdown">///When </span>the<span class="markdown"> reveal scene is completed, left tab is selected and </span>the<span class="markdown"> tab selection fly</span></span></span><br><span class="line"><span class="comment">//towards from the left side of the screen</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Stack(children: [</span><br><span class="line">      Transform(</span><br><span class="line">          transform: Matrix4.identity()</span><br><span class="line">            ..setEntry(<span class="number">0</span>, <span class="number">3</span>, translationDxAnim.value)</span><br><span class="line">            ..setEntry(<span class="number">1</span>, <span class="number">3</span>, translationDyAnim.value)</span><br><span class="line">            ..rotateZ(rotationAnim.value * <span class="number">3.14</span> / <span class="number">180</span>),</span><br><span class="line">          alignment: Alignment.bottomLeft,</span><br><span class="line">          child: Container(</span><br><span class="line">            height: <span class="built_in">double</span>.infinity,</span><br><span class="line">            width: <span class="built_in">double</span>.infinity,</span><br><span class="line">            child: CustomPaint(</span><br><span class="line">              painter: CurvePageSwitcher(</span><br><span class="line">                  widget.arcHeight,</span><br><span class="line">                  widget.arcBottomOffset,</span><br><span class="line">                  showLeftAsFirstPage,</span><br><span class="line">                  pageTabAnimationController!),</span><br><span class="line">            ),</span><br><span class="line">          )),</span><br><span class="line">      Row(</span><br><span class="line">        crossAxisAlignment: CrossAxisAlignment.center,</span><br><span class="line">        mainAxisAlignment: MainAxisAlignment.spaceEvenly,</span><br><span class="line">        children: [</span><br><span class="line">          Expanded(</span><br><span class="line">              child: Stack(children: [</span><br><span class="line">            Positioned(</span><br><span class="line">                left: <span class="number">0</span>,</span><br><span class="line">                right: <span class="number">20</span>,</span><br><span class="line">                bottom: <span class="number">0</span>,</span><br><span class="line">                top: <span class="number">90</span>,</span><br><span class="line">                child: Transform.rotate(</span><br><span class="line">                    angle: <span class="number">-13</span> * <span class="number">3.14</span> / <span class="number">180</span>,</span><br><span class="line">                    child: Align(</span><br><span class="line">                        alignment: Alignment.center,</span><br><span class="line">                        child: Text(</span><br><span class="line">                          <span class="string">"Login"</span>,</span><br><span class="line">                          style: TextStyle(</span><br><span class="line">                              color: showLeftAsFirstPage</span><br><span class="line">                                  ? Colors.white</span><br><span class="line">                                  : Colors.white60,</span><br><span class="line">                              fontSize: <span class="number">22</span>,</span><br><span class="line">                              fontWeight: FontWeight.w800),</span><br><span class="line">                        )))),</span><br><span class="line">            GestureDetector(onTap: _handleLeftTab,</span><br><span class="line">              )</span><br><span class="line">          ])),</span><br><span class="line">          Expanded(</span><br><span class="line">              child: Stack(children: [</span><br><span class="line">            Positioned(</span><br><span class="line">                left: <span class="number">20</span>,</span><br><span class="line">                right: <span class="number">0</span>,</span><br><span class="line">                bottom: <span class="number">0</span>,</span><br><span class="line">                top: <span class="number">90</span>,</span><br><span class="line">                child: Transform.rotate(</span><br><span class="line">                    angle: <span class="number">13</span> * <span class="number">3.14</span> / <span class="number">180</span>,</span><br><span class="line">                    child: Align(</span><br><span class="line">                        alignment: Alignment.center,</span><br><span class="line">                        child: Text(<span class="string">"Signup"</span>,</span><br><span class="line">                            style: TextStyle(</span><br><span class="line">                                color: !showLeftAsFirstPage</span><br><span class="line">                                    ? Colors.white</span><br><span class="line">                                    : Colors.white60,</span><br><span class="line">                                fontSize: <span class="number">22</span>,</span><br><span class="line">                                fontWeight: FontWeight.w800))))),</span><br><span class="line">                GestureDetector(onTap: _handleRightTab,</span><br><span class="line">            )</span><br><span class="line">          ])),</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    ]);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>制表符指示器也使用贝塞尔曲线绘制，并定位在场景 1 的曲面背景之上，但在单独的 CustomPainter 中。为了实现制表位选择效果，在绘制制表位选择曲线时使用剪辑路径。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//The paint method of "CurvePageSwitcher" to draw tab selection arc</span></span><br><span class="line"><span class="keyword">void</span> _drawSwipeAbleArc(Canvas canvas, Size size) &#123;</span><br><span class="line">    Path path = Path();</span><br><span class="line"></span><br><span class="line">    path.moveTo(<span class="number">-2</span>, size.height - archBottomOffset);</span><br><span class="line">    path.cubicTo(</span><br><span class="line">        <span class="number">-2</span>,</span><br><span class="line">        size.height - archBottomOffset,</span><br><span class="line">        size.width / <span class="number">2</span>,</span><br><span class="line">        size.height - arcHeight - archBottomOffset,</span><br><span class="line">        size.width + <span class="number">2</span>,</span><br><span class="line">        size.height - archBottomOffset);</span><br><span class="line">    path.moveTo(size.width + <span class="number">2</span>, size.height - archBottomOffset);</span><br><span class="line">    path.close();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">double</span> left, right;</span><br><span class="line">    <span class="keyword">if</span> (showLeftAsFirstPage) &#123;</span><br><span class="line">      left = size.width / <span class="number">2</span> - size.width / <span class="number">2</span> * animation.value;</span><br><span class="line">      right = size.width / <span class="number">2</span>;</span><br><span class="line">      swipeArcPaint.color = Colors.green;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      left = size.width / <span class="number">2</span>;</span><br><span class="line">      right = size.width * animation.value;</span><br><span class="line">      swipeArcPaint.color = Colors.deepPurple;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    canvas.clipRect(Rect.fromLTRB(left, <span class="number">0</span>, right, size.height));</span><br><span class="line"></span><br><span class="line">    canvas.drawPath(path, swipeArcPaint);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>除此之外，两个容器以各自的标签颜色相互顶部放置。根据选定的选项卡，保留相应的容器，将另一个容器 translated 到 x 轴的相反端，从而丢弃另一个容器。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="markdown">///The background for selected tab. On </span>the<span class="markdown"> basis of tab selected, </span>the<span class="markdown"> foreground container is translated away,</span></span></span><br><span class="line"><span class="comment"><span class="markdown">///revealing </span>the<span class="markdown"> underlying background container. If </span>the<span class="markdown"> screen state is </span>just<span class="markdown"> set to reveal, then in </span>the<span class="markdown"></span></span></span><br><span class="line"><span class="comment"><span class="markdown">///initial state no foreground container is added which is signified by _tabSelectionAnimation set to null.</span></span></span><br><span class="line"><span class="comment"><span class="markdown">///_tabSelectionAnimation is only set when either of </span>the<span class="markdown"> tab is pressed.</span></span></span><br><span class="line">  <span class="built_in">List</span>&lt;Widget&gt; _getBgWidgets() &#123;</span><br><span class="line">    <span class="built_in">List</span>&lt;Widget&gt; widgets = [];</span><br><span class="line">    Color foreGroundColor;</span><br><span class="line">    Color backgroundColor;</span><br><span class="line">    <span class="keyword">if</span> (isLeftTabSelected) &#123;</span><br><span class="line">      foreGroundColor = Colors.deepPurple;</span><br><span class="line">      backgroundColor = Colors.pink;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      foreGroundColor = Colors.pink;</span><br><span class="line">      backgroundColor = Colors.deepPurple;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    widgets.add(Positioned.fill(child: Container(color: foreGroundColor)));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (_tabSelectionAnimation != <span class="keyword">null</span>)</span><br><span class="line">      widgets.add(PositionedTransition(</span><br><span class="line">          rect: _tabSelectionAnimation!,</span><br><span class="line">          child: Container(</span><br><span class="line">            decoration: BoxDecoration(</span><br><span class="line">              color: backgroundColor</span><br><span class="line">            ),</span><br><span class="line">          )));</span><br><span class="line"></span><br><span class="line">    widgets.add(Container(</span><br><span class="line">      height: <span class="built_in">double</span>.infinity,</span><br><span class="line">      width: <span class="built_in">double</span>.infinity,</span><br><span class="line">      child: CustomPaint(</span><br><span class="line">        painter: AmoebaBg(_amoebaOffsetAnimation),</span><br><span class="line">      ),</span><br><span class="line">    ));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> widgets;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>因为我不能得到确切的图片和资源，我使用了我能在网上找到的最接近的一个。</p><p>所以总的来说，我们得到的结果如下。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="login-ok.gif" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.tech/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Dart 的编程语言之美 4 个超级特性</title>
    <link href="https://blog.ducafecat.tech/2021/06/15/translation/the-beauty-of-the-flutters-programming-language-4-superb-features-of-dart/"/>
    <id>https://blog.ducafecat.tech/2021/06/15/translation/the-beauty-of-the-flutters-programming-language-4-superb-features-of-dart/</id>
    <published>2021-06-14T23:46:06.000Z</published>
    <updated>2021-06-14T23:58:46.303Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-15-07-58-44.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="老铁记得-转发-，猫哥会呈现更多-Flutter-好文"><a href="#老铁记得-转发-，猫哥会呈现更多-Flutter-好文" class="headerlink" title="老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~"></a>老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~</h2><h2 id="微信-Flutter-技术群-ducafecat"><a href="#微信-Flutter-技术群-ducafecat" class="headerlink" title="微信 Flutter 技术群 ducafecat"></a>微信 Flutter 技术群 ducafecat</h2><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://reprom.io/the-beauty-of-the-flutters-programming-language-4-superb-features-of-dart" target="_blank" rel="noopener">https://reprom.io/the-beauty-of-the-flutters-programming-language-4-superb-features-of-dart</a></p></blockquote><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://dart.dev/codelabs/async-await" target="_blank" rel="noopener">https://dart.dev/codelabs/async-await</a></li><li><a href="https://medium.com/flutter-community/dart-what-are-mixins-3a72344011f3" target="_blank" rel="noopener">https://medium.com/flutter-community/dart-what-are-mixins-3a72344011f3</a></li><li><a href="https://dart.dev/guides/language/language-tour" target="_blank" rel="noopener">https://dart.dev/guides/language/language-tour</a></li><li><a href="https://api.dart.dev/stable/2.13.1/dart-isolate/dart-isolate-library.html" target="_blank" rel="noopener">https://api.dart.dev/stable/2.13.1/dart-isolate/dart-isolate-library.html</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><p>在阅读 Flutter 时，我读到最多的缺点之一就是使用 Dart 编程语言。它还没有 Kotlin 那么成熟，这是我读到的最常被提及的论点之一。在我看来(我承认这可能会引起争议) ，Dart 是一种伟大的语言，我不会在 Flutter 创建应用程序时为其他任何语言改变它，我是在 Kotlin 专业地创建 android 应用程序之后说的，顺便说一句，这也是一种优雅而美丽的语言。</p><p>在这篇文章中，我打算展示我最喜欢的 Dart 编程语言的 4 个特性，没有特定的顺序; 让我们看看我们如何利用这个现代工具:</p><h3 id="Null-safety"><a href="#Null-safety" class="headerlink" title="Null safety"></a>Null safety</h3><p>最近在 2.12 版本中添加(包括在 Flutter 2.0 中)。在任何假装坚实和高效的现代语言中，空安全都是必须的。这就是为什么 Dart 团队一直致力于实现声音 null 安全，这意味着我们可以有可以为空的类型和不能为空的类型，如果我们尝试在后面执行一个不安全的操作，我们会在应用程序构建之前得到一个编译错误:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// This is a String that can be null</span></span><br><span class="line"><span class="built_in">String</span>? nullVar;</span><br><span class="line"></span><br><span class="line"><span class="comment">// This String cannot be null, the compiler forces me</span></span><br><span class="line"><span class="comment">// to set it a value because of its non-nullable nature.</span></span><br><span class="line"><span class="built_in">String</span> nonNullVar = <span class="string">'I am not null'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Alternatively, I can specify that the value will be</span></span><br><span class="line"><span class="comment">// set later, but the property continues to be non-nullable.</span></span><br><span class="line">late <span class="built_in">String</span> lateNonNullVar;</span><br><span class="line"></span><br><span class="line"><span class="comment">// If I want to call a method on an instance of a type</span></span><br><span class="line"><span class="comment">// that can be null, I need first to do a runtime check that</span></span><br><span class="line"><span class="comment">// its value is not null.</span></span><br><span class="line"><span class="keyword">if</span> (nullVar != <span class="keyword">null</span>) &#123;</span><br><span class="line">  nonNullVar.toLowerCase();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Or call it using the '?' operator, which means that the</span></span><br><span class="line"><span class="comment">// method will only be called if the instance is not null:</span></span><br><span class="line">nullVar?.toLowerCase();</span><br><span class="line"></span><br><span class="line"><span class="comment">// If the type is not nullable I can safely call any</span></span><br><span class="line"><span class="comment">// method on it directly.</span></span><br><span class="line">nonNullVar.toLowerCase();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Always remember to initialize late vars, or you</span></span><br><span class="line"><span class="comment">// will get an exception when trying to access its members.</span></span><br><span class="line">lateNonNullVar = <span class="string">'some value'</span>;</span><br><span class="line">lateNonNullVar.toLowerCase();</span><br></pre></td></tr></table></figure><h3 id="Async-await"><a href="#Async-await" class="headerlink" title="Async / await"></a>Async / await</h3><p>就像在 Javascript 中我们有 Promises，在 Dart 中我们有 Futures，其中 async/await 是主要的关键词，这给了我们开发者一个简单而强大的方法来处理异步操作:</p><p>使用 Futures，我们可以轻松地停止当前操作流，等待某个异步操作完成，然后继续工作。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// To specify that a function will perform an asynchronous</span></span><br><span class="line"><span class="comment">// operation (like doing a network request or reading from</span></span><br><span class="line"><span class="comment">// a database) we mark it with the 'async' keyword:</span></span><br><span class="line">asyncFunction() <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Use the 'await' keyword to stop the flow until the function</span></span><br><span class="line"><span class="comment">// has completed its task:</span></span><br><span class="line"><span class="keyword">await</span> asyncFunction();</span><br><span class="line"></span><br><span class="line"><span class="comment">// You must declare a function as 'async' if it contains</span></span><br><span class="line"><span class="comment">// calls to other async functions:</span></span><br><span class="line">main() <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="keyword">await</span> asyncFunction();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// If the async function returns a value, wrap it within</span></span><br><span class="line"><span class="comment">// a Future. For instance, the following function</span></span><br><span class="line"><span class="comment">// would do a network call and return its result:</span></span><br><span class="line">Future&lt;NetworkResult&gt; doNetworkCall() <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> result = <span class="keyword">await</span> doNetworkCall();</span><br><span class="line"></span><br><span class="line"><span class="comment">// But what if the network request fails and an exception</span></span><br><span class="line"><span class="comment">// is thrown? Just wrap the call in a try/catch block:</span></span><br><span class="line">late NetworkResult result;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  result = <span class="keyword">await</span> doNetworkCall();</span><br><span class="line">&#125; on NetworkException <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">  <span class="comment">// Handle error</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>需要指出的是，即使使用 async/await 关键字，所有的操作都是在同一个线程中执行的，如果我们需要具体的性能要求，我们可以使用 isolates 产生替代线程。</p><h3 id="定义函数参数的多种方法"><a href="#定义函数参数的多种方法" class="headerlink" title="定义函数参数的多种方法"></a>定义函数参数的多种方法</h3><p>在 Dart 中，我们在定义函数参数时有多个选项:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// You can define mandatory parameters as you do in</span></span><br><span class="line"><span class="comment">// many other languages, specifying their type and setting a label:</span></span><br><span class="line">functionWithMandatoryParameters(<span class="built_in">String</span> someString, <span class="built_in">int</span> someNumber) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// You are forced to send the defined parameters</span></span><br><span class="line"><span class="comment">// when using the function:</span></span><br><span class="line">functionWithMandatoryParameters(<span class="string">'some_string'</span>, <span class="number">46</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// You can however specify that the parameters are optional:</span></span><br><span class="line"><span class="comment">// (note that the type must be defined as nullable, precisely because</span></span><br><span class="line"><span class="comment">// there's no guarantee that the caller will send a value)</span></span><br><span class="line">functionWithOptionalParams(</span><br><span class="line">  &#123;<span class="built_in">String</span>? optionalString, <span class="built_in">int</span>? optionalNumber&#125;) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// You can call this function without sending any values,</span></span><br><span class="line"><span class="comment">// or specifying a value for an optional parameter with its label:</span></span><br><span class="line">functionWithOptionalParams();</span><br><span class="line">functionWithOptionalParams(optionalString: <span class="string">'some_string'</span>);</span><br><span class="line">functionWithOptionalParams(</span><br><span class="line">  optionalString: <span class="string">'some_string'</span>, optionalNumber: <span class="number">46</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// When defining optional parameters, you can set a default value</span></span><br><span class="line"><span class="comment">// that will be used in case that there is no value sent by the caller:</span></span><br><span class="line">functionWithDefaultValue(&#123;<span class="built_in">String</span> someString = <span class="string">'default'</span>&#125;) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// The value of someString is 'default'</span></span><br><span class="line">functionWithDefaultValue();</span><br><span class="line"><span class="comment">// The value of someString is 'some_string'</span></span><br><span class="line">functionWithDefaultValue(someString: <span class="string">'some_string'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Lastly, you can even define mandatory named parameters with the</span></span><br><span class="line"><span class="comment">// 'required' keyword, this is useful to enhance code readability.</span></span><br><span class="line">createUser(</span><br><span class="line">  &#123;required <span class="built_in">String</span> username,</span><br><span class="line">  required <span class="built_in">String</span> name,</span><br><span class="line">  required <span class="built_in">String</span> surname,</span><br><span class="line">  required <span class="built_in">String</span> address,</span><br><span class="line">  required <span class="built_in">String</span> city,</span><br><span class="line">  required <span class="built_in">String</span> country&#125;) &#123;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">createUser(</span><br><span class="line">  username: <span class="string">'Ghost'</span>,</span><br><span class="line">  name: <span class="string">'John'</span>,</span><br><span class="line">  surname: <span class="string">'Doe'</span>,</span><br><span class="line">  address: <span class="string">'3590  Mill Street'</span>,</span><br><span class="line">  city: <span class="string">'Beaver'</span>,</span><br><span class="line">  country: <span class="string">'US'</span>);</span><br></pre></td></tr></table></figure><h3 id="Composition-with-mixins"><a href="#Composition-with-mixins" class="headerlink" title="Composition with mixins"></a>Composition with mixins</h3><p>软件开发中最不流行的趋势之一是重组而不是继承，这意味着使用类似组件的元素向类添加功能，而不是从父类继承。这种方法允许我们轻松地添加封装的功能，而无需处理复杂的继承层次结构。</p><p>例如，假设您有一个登录逻辑，您可能希望在应用程序中的不同位置使用它。您可以使用这个逻辑创建一个组件(mixin) ，然后在需要时重用它:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AuthUtils</span> </span>&#123;</span><br><span class="line">  Future&lt;User&gt; login() <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="comment">// Here we can add the login logic that will later be reused</span></span><br><span class="line">    <span class="comment">// in any class that ads this mixin.</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LoginPage</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  LoginPage(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _LoginPageState createState() =&gt; _LoginPageState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_LoginPageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">LoginPage</span>&gt; <span class="title">with</span> <span class="title">AuthUtils</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> FutureBuilder&lt;User&gt;(</span><br><span class="line">      future: login(), <span class="comment">// Calling the mixin function</span></span><br><span class="line">      builder: (BuildContext context, AsyncSnapshot&lt;User&gt; snapshot) &#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里的优点是，我们可以随心所欲地添加任意多的 mixin，而不是仅通过使用继承从一个父类继承。</p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>这些只是 Dart 提供给开发者的多个有用特性中的 4 个。如果你想了解更多，我建议你去参观 Dart 语言之旅，它以一种非常友好的方式解释了这门语言的每一个细节。</p><p><a href="https://dart.dev/guides/language/language-tour" target="_blank" rel="noopener">https://dart.dev/guides/language/language-tour</a></p><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.tech/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 自动提示文本框</title>
    <link href="https://blog.ducafecat.tech/2021/06/10/translation/autocomplete-fields-in-flutter/"/>
    <id>https://blog.ducafecat.tech/2021/06/10/translation/autocomplete-fields-in-flutter/</id>
    <published>2021-06-09T16:00:00.000Z</published>
    <updated>2021-06-09T21:49:11.826Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-10-05-45-47.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="猫哥说"><a href="#猫哥说" class="headerlink" title="猫哥说"></a>猫哥说</h2><p>当你开始用多屏，你就会需要屏幕越来越大、越来越多，不信你试试，会找各种理由来说服自己。</p><p>确实一块辅助屏对效率有很大的提升，我是建议辅助屏幕小些，或者说你自己舒服就行。</p><p>今天推荐的文章是提示输入框，虽然简单，但是很实用。</p><p>这种搜索提示框，可以放在登录账号输入框，搜索输入框提示，基础数据输入框。。。</p><h2 id="老铁记得-转发-，猫哥会呈现更多-Flutter-好文"><a href="#老铁记得-转发-，猫哥会呈现更多-Flutter-好文" class="headerlink" title="老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~"></a>老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~</h2><h2 id="微信群-ducafecat"><a href="#微信群-ducafecat" class="headerlink" title="微信群 ducafecat"></a>微信群 ducafecat</h2><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://theiskaa.medium.com/autocomplete-fields-in-flutter-ec4eb6ec5ad7" target="_blank" rel="noopener">https://theiskaa.medium.com/autocomplete-fields-in-flutter-ec4eb6ec5ad7</a></p></blockquote><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><ul><li><a href="https://github.com/theiskaa/anon" target="_blank" rel="noopener">https://github.com/theiskaa/anon</a></li></ul><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://flutter.dev/docs/development/packages-and-plugins/using-packages" target="_blank" rel="noopener">https://flutter.dev/docs/development/packages-and-plugins/using-packages</a></li><li><a href="https://pub.dev/packages/field_suggestion" target="_blank" rel="noopener">https://pub.dev/packages/field_suggestion</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-10-05-37-25.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>注意: 如果你是新手，想要创建非常基本的高级自动完成字段，那么这篇文章是为你准备的，继续！</p><p>每个人都知道自动补全领域，有我们左右。我们可以在移动应用程序、网站、桌面应用程序等中看到它们。你有没有试过在 Flutter 中创建自动补全字段？啊，这对新手来说有点难。当你是一个新的学习者，这似乎是不可能的。</p><p>好吧那包裹可以帮我们。(我想我们大多数人都知道软件包/插件，如果你不知道，不要担心，只要按照这个官方文档的软件包和完整的阅读然后回来!).</p><p><a href="https://flutter.dev/docs/development/packages-and-plugins/using-packages" target="_blank" rel="noopener">https://flutter.dev/docs/development/packages-and-plugins/using-packages</a></p><p>我写的其中一个是 <code>field_suggestion</code> 包，它可以帮助我们创建 Basic 或高级的自动完成字段。</p><p><a href="https://pub.dev/packages/field_suggestion" target="_blank" rel="noopener">https://pub.dev/packages/field_suggestion</a></p><p>在开始解释如何使用这个软件包之前，我想向您展示一个我使用这个软件包的应用程序的概览。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-10-05-37-13.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>这是一个名为 Anon 的开源应用程序的截图。在那里我们使用字段建议作为我们的搜索栏。</p><p>查看详细信息: <a href="https://github.com/theiskaa/anon" target="_blank" rel="noopener">https://github.com/theiskaa/anon</a></p><p>好了，够了，让我们开始使用现场建议。</p><h3 id="Requirements"><a href="#Requirements" class="headerlink" title="Requirements"></a>Requirements</h3><p>一个 textedingcontroller 和建议列表。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> textEditingController = TextEditingController();</span><br><span class="line"></span><br><span class="line"><span class="comment">// And</span></span><br><span class="line"><span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; suggestionList = [</span><br><span class="line"> <span class="string">'test@gmail.com'</span>,</span><br><span class="line"> <span class="string">'test1@gmail.com'</span>,</span><br><span class="line"> <span class="string">'test2@gmail.com'</span>,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// Or</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">List</span>&lt;<span class="built_in">int</span>&gt; numSuggestions = [</span><br><span class="line">  <span class="number">13187829696</span>,</span><br><span class="line">  <span class="number">13102743803</span>,</span><br><span class="line">  <span class="number">15412917703</span>,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// Or</span></span><br><span class="line"><span class="comment">// Note: Take look at [Class suggestions] part.</span></span><br><span class="line"><span class="built_in">List</span>&lt;UserModel&gt; userSuggestions = [</span><br><span class="line">  UserModel(email: <span class="string">'test@gmail.com'</span>, password: <span class="string">'test123'</span>),</span><br><span class="line">  UserModel(email: <span class="string">'test1@gmail.com'</span>, password: <span class="string">'test123'</span>),</span><br><span class="line">  UserModel(email: <span class="string">'test2@gmail.com'</span>, password: <span class="string">'test123'</span>)</span><br><span class="line">];</span><br></pre></td></tr></table></figure><h3 id="非常基本的用法"><a href="#非常基本的用法" class="headerlink" title="非常基本的用法"></a>非常基本的用法</h3><p>这里我们有，只是文本编辑控制器和建议列表(作为字符串)</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-10-05-39-16.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">FieldSuggestion(</span><br><span class="line">  textController: textEditingController,</span><br><span class="line">  suggestionList: suggestionList,</span><br><span class="line">  hint: <span class="string">'Email'</span>,</span><br><span class="line">),</span><br></pre></td></tr></table></figure><h3 id="外部控制"><a href="#外部控制" class="headerlink" title="外部控制"></a>外部控制</h3><p>在这里，我们刚刚用 <code>GestureDetector</code> 包装了脚手架来处理屏幕上的手势。现在我们可以在点击屏幕的时候关闭盒子。(您可以在任何地方使用 <code>BoxController</code> 进行此操作，其中使用了 <code>FieldSuggestion</code>)。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Example</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">   <span class="keyword">final</span> _textController = TextEditingController();</span><br><span class="line">   <span class="keyword">final</span> _boxController = BoxController();</span><br><span class="line"></span><br><span class="line">   <span class="meta">@override</span></span><br><span class="line">   Widget build(BuildContext context) &#123;</span><br><span class="line">     <span class="keyword">return</span> GestureDetector(</span><br><span class="line">       onTap: () =&gt; _boxController.close(),</span><br><span class="line">       child: Scaffold(</span><br><span class="line">         body: Center(</span><br><span class="line">           child: FieldSuggestion(</span><br><span class="line">             hint: <span class="string">'test'</span>,</span><br><span class="line">             suggestionList: [], <span class="comment">// Your suggestions list here...</span></span><br><span class="line">             boxController: _boxController,</span><br><span class="line">             textController: _textController,</span><br><span class="line">           ),</span><br><span class="line">         ),</span><br><span class="line">       ),</span><br><span class="line">     );</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h3 id="Class-suggestions"><a href="#Class-suggestions" class="headerlink" title="Class suggestions"></a>Class suggestions</h3><blockquote><p>注意: 你必须在你的模型类中使用 <code>toJson</code> 方法。如果你想在建议列表中使用它。</p></blockquote><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserModel</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span>? email;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span>? password;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> UserModel(&#123;<span class="keyword">this</span>.email, <span class="keyword">this</span>.password&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// If we wanna use this model class into FieldSuggestion.</span></span><br><span class="line">  <span class="comment">// Then we must have toJson method, like this:</span></span><br><span class="line">  <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; toJson() =&gt; &#123;</span><br><span class="line">        <span class="string">'email'</span>: <span class="keyword">this</span>.email,</span><br><span class="line">        <span class="string">'password'</span>: <span class="keyword">this</span>.password,</span><br><span class="line">      &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果我们给出一个 <code>userSuggestions</code>，它是 <code>List&lt;usermodel&gt;</code> 。然后我们必须添加 searchBy 属性。我们的模型只有电子邮件和密码，对吗？所以我们可以这样实现: searchBy: <code>email</code> 或者 searchBy: <code>password</code>。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">FieldSuggestion(</span><br><span class="line">  hint: <span class="string">'Email'</span>,</span><br><span class="line">  textController: textEditingController,</span><br><span class="line">  suggestionList: userSuggestions,</span><br><span class="line">  searchBy: <span class="string">'email'</span> <span class="comment">// Or 'password'</span></span><br><span class="line">),</span><br></pre></td></tr></table></figure><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.tech/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>介绍 Flutter 桌面应用 NativeShell</title>
    <link href="https://blog.ducafecat.tech/2021/06/09/translation/introducing-nativeshell/"/>
    <id>https://blog.ducafecat.tech/2021/06/09/translation/introducing-nativeshell/</id>
    <published>2021-06-08T16:00:00.000Z</published>
    <updated>2021-06-09T01:11:22.164Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-09-08-59-44.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="猫哥说"><a href="#猫哥说" class="headerlink" title="猫哥说"></a>猫哥说</h2><p>看到这张图片，我就感觉脖子酸。。。我这样摆过，虽然看起来很 cool，然后你的脖子要上下调整，这比左右调整费事。</p><p>今天推荐阅读的是关于 Flutter 桌面开发，下面有原文、代码 Git 链接。</p><p>开始前我想起 React Native 说过的一句话 《用同样的方法在多端开发》，这句话很玄妙又很正确，就是说不是让你同一套代码同时能编译成 ios android web windows linux …，只是代码的高度复用，所以有的同学在做多端架构时就要注意拆包了。</p><p>比如 你的业务代码、API、Entity、功能函数 很多情况下是复用的。但是各个平台的底层、交互体验是个性化。</p><p>不要被在 ios android 两端平滑兼容所欺骗。</p><p>今天介绍 NativeShell 这个桌面程序，这个程序演示了 多窗口、模式对话框、拖拽、菜单、工具栏、文件操作、系统 API 调用的例子，如果你正在做研究，这是一个很好参考。</p><h2 id="老铁记得-转发-，猫哥会呈现更多-Flutter-好文"><a href="#老铁记得-转发-，猫哥会呈现更多-Flutter-好文" class="headerlink" title="老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~"></a>老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~</h2><h2 id="微信群-ducafecat"><a href="#微信群-ducafecat" class="headerlink" title="微信群 ducafecat"></a>微信群 ducafecat</h2><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://matejknopp.com/post/introducing-nativeshell/" target="_blank" rel="noopener">https://matejknopp.com/post/introducing-nativeshell/</a></p></blockquote><h2 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h2><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/nativeshell/app_template" target="_blank" rel="noopener">https://github.com/nativeshell/app_template</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="http://airflow.app/" target="_blank" rel="noopener">http://airflow.app/</a></li><li><a href="https://airflow.app/remote-app/" target="_blank" rel="noopener">https://airflow.app/remote-app/</a></li><li><a href="https://github.com/nativeshell/examples/blob/main/src/file_open_dialog.rs#L18" target="_blank" rel="noopener">https://github.com/nativeshell/examples/blob/main/src/file_open_dialog.rs#L18</a></li><li><a href="https://github.com/nativeshell/examples/blob/main/lib/pages/drag_drop.dart" target="_blank" rel="noopener">https://github.com/nativeshell/examples/blob/main/lib/pages/drag_drop.dart</a></li><li><a href="https://github.com/nativeshell/nativeshell/blob/main/nativeshell/src/shell/platform/win32/drag_com.rs" target="_blank" rel="noopener">https://github.com/nativeshell/nativeshell/blob/main/nativeshell/src/shell/platform/win32/drag_com.rs</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><p>自从我第一次看到 Turbo Vision，我就对桌面应用程序感兴趣。DOS 中那些文本模式可调整大小的窗口对我来说就像魔术一样。它激发了人们对用户界面框架的兴趣，这种框架在 20 多年后依然很强大。</p><p>在过去十年左右的时间里，人们的注意力主要转移到了网络和移动设备上，这并没有让我感到特别高兴。所以我觉得是时候从阴影中爬出来，离开我的舒适区，试着把一些聚光灯带回它应该在的地方。到桌面上去！:)</p><h3 id="Flutter-之路"><a href="#Flutter-之路" class="headerlink" title="Flutter 之路"></a>Flutter 之路</h3><p>我最后一个处理的桌面应用程序是(现在仍然是) Airflow。它是 Qt 和大量平台特定代码的混合体。如果我自己这么说的话，我对最终的结果非常满意，但是开发人员的经验和整体生产力还有很多需要改进的地方。</p><p><a href="http://airflow.app/" target="_blank" rel="noopener">http://airflow.app/</a></p><p>大约两年前，我需要一个适用于 iOS 和安卓系统的气流应用程序。经过几个原型后，决定做出，我去 Flutter。我确实喜欢认为我有自己的 UI 开发经验，毕竟，我在不同的平台上使用过十几个 GUI 框架，所以现在没有什么能让我感到惊讶的了，对吧？错了。他们所有人中最大的惊喜就是和 Flutter 一起工作的感觉是多么的好。在我的一生中，从来没有，一次也没有，建立用户界面这么有意义。</p><p><a href="https://airflow.app/remote-app/" target="_blank" rel="noopener">https://airflow.app/remote-app/</a></p><p>如果我能用这种方式构建桌面应用程序，岂不是很神奇？当然，这是可能的，但现实是一个严酷的情妇，在那个时候桌面嵌入仍然处于婴儿期。那就回到 Qt 吧。但这个念头一直在我脑海中挥之不去。</p><p>一两年过去了，很多事情发生了变化。还有很多工作要做，但是桌面嵌入已经成熟了很多，而且 Flutter on desktop 已经开始成为一个可行的选择。</p><h3 id="Flutter-desktop-嵌入"><a href="#Flutter-desktop-嵌入" class="headerlink" title="Flutter desktop 嵌入"></a>Flutter desktop 嵌入</h3><p>现在你可能会问: Matt，Flutter 不是已经嵌入了桌面吗? 那么这一切都是为了什么呢？</p><p>是的，的确如此。NativeShell 就建立在他们之上。您可以将 Flutter 桌面嵌入程序想象为一个平台视图组件(想想 GtkWidget、 NSView 或者，恕我直言，HWND)。它处理鼠标和键盘输入，绘画，但它不尝试管理窗口，或 Flutter 引擎/隔离。或者做一些像平台菜单和拖放的事情。为了使事情更加复杂，Flutter 嵌入在每个平台上都有完全不同的 API。因此，如果您希望为一些低级代码创建引擎或注册平台通道处理程序，则需要为每个平台分别执行此操作。</p><p><a href="https://nativeshell.dev/" target="_blank" rel="noopener">https://nativeshell.dev/</a></p><h3 id="这就是-NativeShell-介入的地方"><a href="#这就是-NativeShell-介入的地方" class="headerlink" title="这就是 NativeShell 介入的地方"></a>这就是 NativeShell 介入的地方</h3><p>从 Flutter 桌面嵌入结束的地方开始。它为现有的 Flutter 嵌入提供了一个一致的、与平台无关的 API。它管理引擎和窗户。它提供了拖放支持，对平台菜单的访问，以及其他超出 Flutter 嵌入范围的功能。并且它通过简单易用的 Dart API 公开了所有这些。</p><p>NativeShell 是用铁锈写的。锈是伟大的，因为它可以让你编写高效的低级平台特定的代码，如果你需要，但它也让你使用 NativeShell，而不必知道任何锈。简单地执行货物运输是所有需要让事情进行。Cargo 是 Rust 软件包管理器(就像 pub 是用于 Dart 的) ，它负责下载和构建所有依赖项。</p><h3 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h3><ul><li><p>Install Rust<br><a href="https://www.rust-lang.org/tools/install" target="_blank" rel="noopener">https://www.rust-lang.org/tools/install</a></p></li><li><p>Install Flutter<br><a href="https://flutter.dev/docs/get-started/install" target="_blank" rel="noopener">https://flutter.dev/docs/get-started/install</a></p></li><li><p>在 Flutter 中启用桌面支持(为您的平台选择一个)</p></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ flutter config --<span class="built_in">enable</span>-windows-desktop</span><br><span class="line">$ flutter config --<span class="built_in">enable</span>-macos-desktop</span><br><span class="line">$ flutter config --<span class="built_in">enable</span>-linux-desktop</span><br></pre></td></tr></table></figure><ul><li>Switch to Flutter Master</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ flutter channel master</span><br><span class="line">$ flutter upgrade</span><br></pre></td></tr></table></figure><p>在这之后，你应该可以开始了:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> https://github.com/nativeshell/examples.git</span><br><span class="line">$ <span class="built_in">cd</span> examples</span><br><span class="line">$ cargo run</span><br></pre></td></tr></table></figure><p>NativeShell 透明地集成了 Flutter 建立过程和货物。如果铁锈和飞镖之神在对你微笑，这就是你现在应该看到的:</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-09-08-38-25.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="Platform-Channels"><a href="#Platform-Channels" class="headerlink" title="Platform Channels"></a>Platform Channels</h3><p>如果您需要从 Flutter 应用程序调用本机代码，这两个选项是平台通道或 FFI。对于一般使用的平台通道是预先设计好的，因为它们更容易使用，并且能够在平台和 UI 线程之间适当地传递消息。</p><p>这就是使用 NativeShell 注册平台通道处理程序的效果(我保证，这里也是惟一的 Rust 代码)</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">register_example_channel</span></span>(context: Rc&lt;Context&gt;) &#123;</span><br><span class="line">    context</span><br><span class="line">        .message_manager</span><br><span class="line">        .borrow_mut()</span><br><span class="line">        .register_method_handler(<span class="string">"example_channel"</span>, |call, reply, engine| &#123;</span><br><span class="line">            <span class="keyword">match</span> call.method.as_str() &#123;</span><br><span class="line">                <span class="string">"echo"</span> =&gt; &#123;</span><br><span class="line">                    reply.send_ok(call.args);</span><br><span class="line">                &#125;</span><br><span class="line">                _ =&gt; &#123;&#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>为了直接使用现有的平台嵌入 API 来完成这项工作，您需要使用平台特定的 API 为每个平台分别编写这些代码。然后确保每次创建新引擎时都注册处理程序(关闭引擎时可能注销)。</p><p>使用 NativeShell，您只需注册处理程序一次，它可以从任何引擎调用。消息可以通过 Serde 被透明地序列化和反序列化为 Rust 结构(使用 Flutter 的标准方法编解码格式)。</p><p><a href="https://github.com/nativeshell/examples/blob/main/src/file_open_dialog.rs#L18" target="_blank" rel="noopener">https://github.com/nativeshell/examples/blob/main/src/file_open_dialog.rs#L18</a></p><h3 id="Window-Management"><a href="#Window-Management" class="headerlink" title="Window Management"></a>Window Management</h3><p>想必你希望你的桌面应用程序有多个窗口？NativeShell 已经掩护你了。调整窗口大小到内容或设置最小的窗口大小，使 Flutter 布局不底流？它也能做到这一点。它还确保只在内容准备好后才显示窗口，从而消除了丑陋的闪烁。</p><p>目前，每个窗口作为单独的独立窗体运行。NativeShell 为创建窗口、设置和调整几何形状、更新样式和窗口标题提供了 API。它还提供了便于在窗口之间进行通信的 API。</p><p>视频可以根据内容调整大小，也可以根据内容大小调整大小。</p><ul><li>多窗口</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-09-08-40-27.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>模式对话框</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-09-08-40-59.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>这将是 Dart 中如何创建和管理多个窗口的最小演示:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main() <span class="keyword">async</span> &#123;</span><br><span class="line">  runApp(MinimalApp());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MinimalApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="comment">// Widgets above WindowWidget will be same in all windows. The actual</span></span><br><span class="line">    <span class="comment">// window content will be determined by WindowState</span></span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      home: WindowWidget(</span><br><span class="line">        onCreateState: (initData) &#123;</span><br><span class="line">          WindowState? context;</span><br><span class="line">          context ??= OtherWindowState.fromInitData(initData);</span><br><span class="line">          <span class="comment">// possibly no init data, this is main window</span></span><br><span class="line">          context ??= MainWindowState();</span><br><span class="line">          <span class="keyword">return</span> context;</span><br><span class="line">        &#125;,</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MainWindowState</span> <span class="keyword">extends</span> <span class="title">WindowState</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> TextButton(</span><br><span class="line">      onPressed: () <span class="keyword">async</span> &#123;</span><br><span class="line">        <span class="comment">// This will create new isolate for a window. Whatever is given to</span></span><br><span class="line">        <span class="comment">// Window.create will be provided by WindowWidget in new isolate</span></span><br><span class="line">        <span class="keyword">final</span> <span class="built_in">window</span> = <span class="keyword">await</span> Window.create(OtherWindowState.toInitData());</span><br><span class="line">        <span class="comment">// you can use the window object to communicate with newly created</span></span><br><span class="line">        <span class="comment">// window or register handlers for window events</span></span><br><span class="line">        <span class="built_in">window</span>.closeEvent.addListener(() &#123;</span><br><span class="line">          <span class="built_in">print</span>(<span class="string">'Window closed'</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;,</span><br><span class="line">      child: Text(<span class="string">'Open Another Window'</span>),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">OtherWindowState</span> <span class="keyword">extends</span> <span class="title">WindowState</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Text(<span class="string">'This is Another Window!'</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// This can be anything that fromInitData recognizes</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">dynamic</span> toInitData() =&gt; &#123;</span><br><span class="line">        <span class="string">'class'</span>: <span class="string">'OtherWindow'</span>,</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> OtherWindowState? fromInitData(<span class="keyword">dynamic</span> initData) &#123;</span><br><span class="line">    <span class="keyword">if</span> (initData <span class="keyword">is</span> <span class="built_in">Map</span> &amp;&amp; initData[<span class="string">'class'</span>] == <span class="string">'OtherWindow'</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> OtherWindowState();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Drag-amp-Drop"><a href="#Drag-amp-Drop" class="headerlink" title="Drag &amp; Drop"></a>Drag &amp; Drop</h3><p>很难想象还有哪个桌面用户界面框架不支持拖放操作。NativeShell 支持拖放文件路径、 url、自定义 Dart 数据(由 StandardMethodCodec 实现序列化) ，甚至可以扩展以处理自定义平台特定格式。</p><p>它应该很容易使用，而且我对它的结果很满意，尽管它确实涉及到编写一些看起来非常吓人的代码。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-09-08-43-26.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p><a href="https://github.com/nativeshell/examples/blob/main/lib/pages/drag_drop.dart" target="_blank" rel="noopener">https://github.com/nativeshell/examples/blob/main/lib/pages/drag_drop.dart</a></p><p><a href="https://github.com/nativeshell/nativeshell/blob/main/nativeshell/src/shell/platform/win32/drag_com.rs" target="_blank" rel="noopener">https://github.com/nativeshell/nativeshell/blob/main/nativeshell/src/shell/platform/win32/drag_com.rs</a></p><h3 id="Popup-Menu"><a href="#Popup-Menu" class="headerlink" title="Popup Menu"></a>Popup Menu</h3><p>很多框架和应用程序都犯了这样的错误，这常常让我感到惊讶。直到最近 Firefox 才开始在 macOS 上使用本地弹出菜单。无论你的应用程序多么精致，如果你的菜单出错了，你就会感觉不对劲。</p><p>允许你轻松地创建和显示上下文菜单。考虑到菜单系统的强大功能，这个菜单 API 看似简单。菜单是反应性的。你可以要求重建菜单，而可见和 NativeShell 将计算三角洲和只更新菜单项实际上已经改变。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-09-08-44-37.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> _counter = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> _showContextMenu(TapDownDetails e) <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="keyword">final</span> menu = Menu(_buildContextMenu);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Menu can be updated while visible</span></span><br><span class="line">  <span class="keyword">final</span> timer = Timer.periodic(<span class="built_in">Duration</span>(milliseconds: <span class="number">500</span>), (timer) &#123;</span><br><span class="line">    ++_counter;</span><br><span class="line">    <span class="comment">// This will call the _buildContextMenu() function, diff the old</span></span><br><span class="line">    <span class="comment">// and new menu items and only update those platform menu items that</span></span><br><span class="line">    <span class="comment">// actually changed</span></span><br><span class="line">    menu.update();</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">await</span> Window.of(context).showPopupMenu(menu, e.globalPosition);</span><br><span class="line"></span><br><span class="line">  timer.cancel();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">List</span>&lt;MenuItem&gt; _buildContextMenu() =&gt; [</span><br><span class="line">      MenuItem(title: <span class="string">'Context menu Item'</span>, action: () &#123;&#125;),</span><br><span class="line">      MenuItem(title: <span class="string">'Menu Update Counter $_counter'</span>, action: <span class="keyword">null</span>),</span><br><span class="line">      MenuItem.separator(),</span><br><span class="line">      MenuItem.children(title: <span class="string">'Submenu'</span>, children: [</span><br><span class="line">        MenuItem(title: <span class="string">'Submenu Item 1'</span>, action: () &#123;&#125;),</span><br><span class="line">        MenuItem(title: <span class="string">'Submenu Item 2'</span>, action: () &#123;&#125;),</span><br><span class="line">      ]),</span><br><span class="line">    ];</span><br></pre></td></tr></table></figure><h3 id="MenuBar"><a href="#MenuBar" class="headerlink" title="MenuBar"></a>MenuBar</h3><p>可能是 NativeShell 中我最喜欢的功能。在 macOS 上，它呈现为空窗口小部件，而是将菜单放在系统菜单栏(在屏幕顶部)。在 Windows 和 Linux 上，它使用 Flutter 小部件呈现顶级菜单项，然后使用本机菜单处理其余部分。这意味着菜单栏可以位于小部件层次结构中的任何位置，它不局限于窗口的顶部，也不依赖于 GDI 或 Gtk 来绘制 iself。</p><p>它支持鼠标跟踪和键盘导航，就像普通系统菜单栏一样，但没有任何限制。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-09-08-45-43.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="现在情况如何"><a href="#现在情况如何" class="headerlink" title="现在情况如何"></a>现在情况如何</h3><p>NativeShell 正在被沉重的开发。事情很可能会破裂。迫切需要更多的文档和示例。但我认为它的形状可能对某些人有用。</p><p>所有三个支持的平台(macOS，Windows，Linux)都具有完全的同等功能。</p><p><a href="https://github.com/nativeshell/nativeshell/tree/main/nativeshell/src/shell/platform/macos" target="_blank" rel="noopener">https://github.com/nativeshell/nativeshell/tree/main/nativeshell/src/shell/platform/macos</a></p><p><a href="https://github.com/nativeshell/nativeshell/tree/main/nativeshell/src/shell/platform/win32" target="_blank" rel="noopener">https://github.com/nativeshell/nativeshell/tree/main/nativeshell/src/shell/platform/win32</a></p><p><a href="https://github.com/nativeshell/nativeshell/tree/main/nativeshell/src/shell/platform/linux" target="_blank" rel="noopener">https://github.com/nativeshell/nativeshell/tree/main/nativeshell/src/shell/platform/linux</a></p><p>如果你一路走到了这里，你可以继续 nativeshell.dev。</p><p><a href="https://nativeshell.dev/" target="_blank" rel="noopener">https://nativeshell.dev/</a></p><p>感谢您的反馈！</p><p><a href="https://github.com/nativeshell/nativeshell/issues" target="_blank" rel="noopener">https://github.com/nativeshell/nativeshell/issues</a></p><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.tech/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>用 Melos 管理多包 Flutter 项目</title>
    <link href="https://blog.ducafecat.tech/2021/06/08/translation/managing-multi-package-flutter-projects-with-melos/"/>
    <id>https://blog.ducafecat.tech/2021/06/08/translation/managing-multi-package-flutter-projects-with-melos/</id>
    <published>2021-06-07T16:00:00.000Z</published>
    <updated>2021-06-07T22:24:17.218Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-08-06-23-31.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="猫哥说"><a href="#猫哥说" class="headerlink" title="猫哥说"></a>猫哥说</h2><p>我正在的写的新闻客户端代码模板，只是适合最多 100 pages 的轻巧型单包项目。</p><p>但是页面再多的话，说明你的项目业务、功能、组件足够复杂，项目也庞大，参与的人也多，这样的话项目就需要多包架构了，做过 android 的朋友最能体会了。</p><p>这篇文章就是介绍如何用 melos 来管理多包项目，看看对你是否有帮助吧。</p><h2 id="老铁记得-转发-，猫哥会呈现更多-Flutter-好文"><a href="#老铁记得-转发-，猫哥会呈现更多-Flutter-好文" class="headerlink" title="老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~"></a>老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~</h2><h2 id="微信-flutter-研修群-ducafecat"><a href="#微信-flutter-研修群-ducafecat" class="headerlink" title="微信 flutter 研修群 ducafecat"></a>微信 flutter 研修群 ducafecat</h2><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/SAGARSURI/melos_demo" target="_blank" rel="noopener">https://github.com/SAGARSURI/melos_demo</a></p><blockquote><p>integrate_melos 分支是完成的代码</p></blockquote><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://docs.page/invertase/melos" target="_blank" rel="noopener">https://docs.page/invertase/melos</a></li><li><a href="https://invertase.io/" target="_blank" rel="noopener">https://invertase.io/</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><p>大多数情况下，当你创建一个 flutter 项目。你使用一个包。这个项目由一个 pubspec.yaml，lib 文件夹组成。您将所有的特性和实用程序放在同一个包中。但也有一些项目将它们的特性和实用程序分解成多个包。这有助于提高关注点分离，并允许团队开源他们的一些软件包。下面是一个多包项目的示意图:</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-08-05-53-01.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>在这里，我们将项目分为三个层次。第一层是根项目，它包含适用于项目中所有不同包的通用配置。第二层拥有独立的功能包，它们不相互依赖。第三层由多个功能包中使用的实用工具包组成。我不会深入探讨如何创建或结构一个多包 flutter 项目。本文将着重于解决一个典型的多包 flutter 项目所面临的特殊挑战。</p><h3 id="挑战"><a href="#挑战" class="headerlink" title="挑战"></a>挑战</h3><p>在一个简单的程序包中，运行下面的任务是非常简单的:</p><ul><li>flutter pub get</li><li>flutter test</li><li>flutter analyze</li><li>Generating code coverage i.e flutter test –coverage</li></ul><p>但是在一个多包的 flutter 项目中运行相同的任务是具有挑战性的，因为你需要在项目中的每个包中运行这些任务，并在任务完成后给出总结结果。现在我们知道挑战是什么了。让我们来讨论一下解决这个问题的可能方法。</p><h3 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h3><p>有两种可能的解决方案来解决这个问题。让我们看看第一个:</p><ol><li>为各种任务编写 bash 脚本</li></ol><p>这绝对是一个解决方案，但不是一个明智的解决方案。您需要首先编写一个脚本，找出项目中的所有包，并在其中运行上述任务之一。您还需要确保以漂亮的格式显示输出，以使内容具有可读性。如果您更喜欢 GUI，那么您需要在 IDE 中创建某种配置，以便通过 GUI 运行脚本</p><ol start="2"><li>将 Melos 整合到你的项目中</li></ol><p>这是一个比我强烈推荐的第一个方案更聪明的解决方案。因此，让我们详细讨论什么是 Melos，以及如何将其集成到您的多包项目中</p><h3 id="介绍-Melos"><a href="#介绍-Melos" class="headerlink" title="介绍 Melos"></a>介绍 Melos</h3><blockquote><p>Melos 是一个 CLI 工具，用于管理多个包的 flutter/飞镖项目。</p></blockquote><p>Melos 是由一个著名的小组在 flutter 社区即 invertase。你可以在他们的网站上阅读关于 Melos 的详细信息，但是这里有一个 Melos 提供的特性的快速列表:</p><ul><li>Automatic versioning &amp; changelog generation. 自动版本控制和更新日志生成</li><li>Automated publishing of packages to 将包自动发布到 pub.dev.</li><li>Local package linking and installation. 本地包的链接和安装</li><li>Executing simultaneous commands across packages. 跨包执行同步命令</li><li>Listing of local packages &amp; their dependencies. 本地包及其依赖项的列表</li></ul><p>现在让我们看看如何使用 Melos 执行上述所有任务。</p><ul><li>注意: 如果你想在实践中学习，请下载入门课程。还有另一个分支，您可以在其中找到项目的最终版本。</li></ul><p><a href="https://github.com/SAGARSURI/melos_demo" target="_blank" rel="noopener">https://github.com/SAGARSURI/melos_demo</a></p><h3 id="安装-Melos"><a href="#安装-Melos" class="headerlink" title="安装 Melos"></a>安装 Melos</h3><p>让我们先安装 Melos。我假设您已经安装了 Flutter SDK，并将 Flutter 和 Dart 路径设置为 <code>bash_profile</code>。在终端中运行以下命令:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dart pub global activate melos</span><br></pre></td></tr></table></figure><p>下一步是在 IDE 中打开初学者项目。我更喜欢使用 Intellij，并且会向你展示一些由 Melos 提供的非常棒的 GUI 特性。项目结构应如下:</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-08-05-58-51.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>现在创建一个名为 melos.yaml 的文件，并将以下内容复制到其中:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">melos_demo</span></span><br><span class="line"></span><br><span class="line"><span class="attr">packages:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">utility/**</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">features/**</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">"*"</span></span><br></pre></td></tr></table></figure><p>让我们理解一下上面的脚本:<br>a) name : 你必须给出项目的名称。您可以在 root 项目的 pubspec.yaml 中找到它.<br>b) packages : 这个列表应该包含到项目中单个软件包的路径. 可以使用 glob 模式展开格式定义每个路径.</p><h3 id="Melos-Bootstrap"><a href="#Melos-Bootstrap" class="headerlink" title="Melos Bootstrap"></a>Melos Bootstrap</h3><p>现在，从根项目中在终端中运行以下命令，将所有本地包链接在一起，并更新依赖关系，即 flutter pub get。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">melos bootstrap</span><br></pre></td></tr></table></figure><p>在运行上面的命令之后，你应该会看到如下的输出:</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-08-06-02-12.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>你可以在这里阅读为什么你需要引导 Melos。准确地说，这是在项目中设置 Melos 或执行项目清理时应该执行的重要命令之一。</p><p><a href="https://docs.page/invertase/melos/getting-started#why-do-i-need-to-bootstrap" target="_blank" rel="noopener">https://docs.page/invertase/melos/getting-started#why-do-i-need-to-bootstrap</a></p><h3 id="Melos-Clean"><a href="#Melos-Clean" class="headerlink" title="Melos Clean"></a>Melos Clean</h3><p>当您希望从项目中删除临时文件(构建工件、pub 文件等)时，可以执行此命令。下面是这个命令的样子:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">melos clean</span><br></pre></td></tr></table></figure><h3 id="Commands"><a href="#Commands" class="headerlink" title="Commands"></a>Commands</h3><p>现在，您将着手创建不同的命令，以实现我们在本文开头提到的任务。</p><p>在特定的包中运行测试用例在你的 melos.yaml 文件中写入以下命令:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">melos_demo</span></span><br><span class="line"></span><br><span class="line"><span class="attr">packages:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">utility/**</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">features/**</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">"*"</span></span><br><span class="line"></span><br><span class="line"><span class="attr">scripts:</span></span><br><span class="line"><span class="attr">  test:</span><span class="attr">selective_unit_test:</span></span><br><span class="line"><span class="attr">    run:</span> <span class="string">melos</span> <span class="string">exec</span> <span class="bullet">--dir-exists="test"</span> <span class="bullet">--fail-fast</span> <span class="bullet">--</span> <span class="string">flutter</span> <span class="string">test</span> <span class="bullet">--no-pub</span> <span class="bullet">--coverage</span></span><br><span class="line"><span class="attr">    description:</span> <span class="string">Run</span> <span class="string">Flutter</span> <span class="string">tests</span> <span class="string">for</span> <span class="string">a</span> <span class="string">specific</span> <span class="string">package</span> <span class="string">in</span> <span class="string">this</span> <span class="string">project.</span></span><br><span class="line"><span class="attr">    select-package:</span></span><br><span class="line"><span class="attr">      flutter:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">      dir-exists:</span> <span class="string">test</span></span><br></pre></td></tr></table></figure><p>让我们理解一下上面的脚本中发生了什么:</p><p>1)你已经创建了一个自定义脚本，即 test: selective_unit_test，一旦执行，它会显示一个选项来选择一个你想要运行的单元测试包。</p><ol start="2"><li>Melos 提供了强大的过滤选项来选择符合过滤条件的包。在上面的脚本中，您使用 – dir-exists = “ test”作为筛选选项。这将过滤由 testfolder 组成的所有包。你可以在他们的网站上找到更多的过滤选项。</li></ol><p>3)——如果遇到失败的测试用例，fail-fast 将立即终止脚本执行。</p><p>4)您可以使用描述部分为每个脚本提供一个可读的描述。</p><p>5)你一定想知道为什么你把这个命令命名为 test: selective_unit_test。下一个命令将回答您的问题。</p><p>6)你可以详细阅读 melos exec 做了什么。基本上，它将在项目中的每个包中执行命令或脚本。</p><p><a href="https://docs.page/invertase/melos/commands#exec" target="_blank" rel="noopener">https://docs.page/invertase/melos/commands#exec</a></p><p>现在运行以下命令:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">melos run <span class="built_in">test</span>:selective_unit_test</span><br></pre></td></tr></table></figure><p>您将看到以下输出:</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-08-06-09-26.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>上面的命令能够找出包含文件夹测试的这些包。输入 2 作为选项，你会看到如下输出:</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-08-06-09-41.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>在所有包中运行测试用例现在编写以下命令，它将运行项目中的所有单元测试用例。这不会提示任何选项的选择:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">scripts:</span></span><br><span class="line"><span class="attr">  test:</span></span><br><span class="line"><span class="attr">    run:</span> <span class="string">melos</span> <span class="string">run</span> <span class="attr">test:selective_unit_test</span> <span class="bullet">--no-select</span></span><br><span class="line"><span class="attr">    description:</span> <span class="string">Run</span> <span class="string">all</span> <span class="string">Flutter</span> <span class="string">tests</span> <span class="string">in</span> <span class="string">this</span> <span class="string">project.</span></span><br></pre></td></tr></table></figure><p>让我们讨论一下上面的命令是做什么的:</p><ol><li>这个命令将基本上运行上一个命令–no-select as an argument. 这意味着运行所有的单元测试</li><li>你可以使用 melos 来运行这个命令 因为可能有多个变种的测试命令，就像您在前一步骤 i.e 中创建的那样 test:selective_unit_test . 您还可以创建更多的变种，例如 test:e2e_test , test:bdd_test etc. 你可以将所有的变量组合在一起，并在一个命令 i.e 中运行 test .</li></ol><p>运行所有包中的 analyzein: 在 script 部分创建以下命令:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">analyze:</span></span><br><span class="line"><span class="attr">  run:</span> <span class="string">melos</span> <span class="string">exec</span> <span class="bullet">--</span> <span class="string">flutter</span> <span class="string">analyze</span> <span class="string">.</span></span><br><span class="line"><span class="attr">  description:</span> <span class="string">Run</span> <span class="string">`dart</span> <span class="string">analyze`</span> <span class="string">in</span> <span class="string">all</span> <span class="string">packages.</span></span><br></pre></td></tr></table></figure><p>这里没有什么特别的，您可以执行 melos 运行分析来运行所有包中的分析。</p><p>生成整个项目的代码 coverage: 为整个项目生成代码 coverage。项目中包含一个自定义脚本，即组合覆盖。嘘。这将基本上合并来自不同包的所有 lcov.info 文件到一个 lcov.info 文件中。然后，您可以使用此方法将 lcov.info 文件转换为 HTML。</p><p><a href="https://stackoverflow.com/a/53663093/4161284" target="_blank" rel="noopener">https://stackoverflow.com/a/53663093/4161284</a></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/env bash</span></span><br><span class="line"></span><br><span class="line">escapedPath=<span class="string">"<span class="variable">$(echo `pwd` | sed 's/\//\\\//g')</span>"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> grep flutter pubspec.yaml &gt; /dev/null; <span class="keyword">then</span></span><br><span class="line">  <span class="keyword">if</span> [ -d <span class="string">"coverage"</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="comment"># combine line coverage info from package tests to a common file</span></span><br><span class="line">    <span class="keyword">if</span> [ ! -d <span class="string">"<span class="variable">$MELOS_ROOT_PATH</span>/coverage_report"</span> ]; <span class="keyword">then</span></span><br><span class="line">      mkdir <span class="string">"<span class="variable">$MELOS_ROOT_PATH</span>/coverage_report"</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    sed <span class="string">"s/^SF:lib/SF:<span class="variable">$escapedPath</span>\/lib/g"</span> coverage/lcov.info &gt;&gt; <span class="string">"<span class="variable">$MELOS_ROOT_PATH</span>/coverage_report/lcov.info"</span></span><br><span class="line">    rm -rf <span class="string">"coverage"</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><p>在脚本部分下面写下以下命令:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">gen_coverage:</span> <span class="string">melos</span> <span class="string">exec</span> <span class="bullet">--</span> <span class="string">"\$MELOS_ROOT_PATH/combine_coverage.sh"</span></span><br></pre></td></tr></table></figure><p>Path 会给出存储 MELOS.yaml 的路径即 root 项目。脚本执行完毕后。您可以在项目中看到 coverage_report 文件夹。现在你有一个 lcov.info 文件，它会给你一个整个项目的报告。</p><p>最后，你的 melos.yaml 文件看起来像这样:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">melos_demo</span></span><br><span class="line"></span><br><span class="line"><span class="attr">packages:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">utility/**</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">features/**</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">"*"</span></span><br><span class="line"><span class="attr">scripts:</span></span><br><span class="line"><span class="attr">  test:</span><span class="attr">selective_unit_test:</span></span><br><span class="line"><span class="attr">    run:</span> <span class="string">melos</span> <span class="string">exec</span> <span class="bullet">--dir-exists="test"</span> <span class="bullet">--fail-fast</span> <span class="bullet">--</span> <span class="string">flutter</span> <span class="string">test</span> <span class="bullet">--no-pub</span> <span class="bullet">--coverage</span></span><br><span class="line"><span class="attr">    description:</span> <span class="string">Run</span> <span class="string">Flutter</span> <span class="string">tests</span> <span class="string">for</span> <span class="string">a</span> <span class="string">specific</span> <span class="string">package</span> <span class="string">in</span> <span class="string">this</span> <span class="string">project.</span></span><br><span class="line"><span class="attr">    select-package:</span></span><br><span class="line"><span class="attr">      flutter:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">      dir-exists:</span> <span class="string">test</span></span><br><span class="line"></span><br><span class="line"><span class="attr">  test:</span></span><br><span class="line"><span class="attr">    run:</span> <span class="string">melos</span> <span class="string">run</span> <span class="attr">test:selective_unit_test</span> <span class="bullet">--no-select</span></span><br><span class="line"><span class="attr">    description:</span> <span class="string">Run</span> <span class="string">all</span> <span class="string">Flutter</span> <span class="string">tests</span> <span class="string">in</span> <span class="string">this</span> <span class="string">project.</span></span><br><span class="line"></span><br><span class="line"><span class="attr">  analyze:</span></span><br><span class="line"><span class="attr">    run:</span> <span class="string">melos</span> <span class="string">exec</span> <span class="bullet">--</span> <span class="string">flutter</span> <span class="string">analyze</span> <span class="string">.</span></span><br><span class="line"><span class="attr">    description:</span> <span class="string">Run</span> <span class="string">`dart</span> <span class="string">analyze`</span> <span class="string">in</span> <span class="string">all</span> <span class="string">packages.</span></span><br><span class="line"></span><br><span class="line"><span class="attr">  gen_coverage:</span> <span class="string">melos</span> <span class="string">exec</span> <span class="bullet">--</span> <span class="string">"\$MELOS_ROOT_PATH/combine_coverage.sh"</span></span><br></pre></td></tr></table></figure><h3 id="图形用户界面选项"><a href="#图形用户界面选项" class="headerlink" title="图形用户界面选项"></a>图形用户界面选项</h3><p>如果您不希望通过终端执行这些命令，并希望使用 GUI 运行它们，那么 Melos 可以满足您的要求。添加所有命令后，可以再次运行引导程序命令。这将生成一些配置，你可以看到一些图形用户界面选项如下:</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-08-06-13-17.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>现在您可以执行所有这些命令，而无需在终端中键入任何内容。</p><h3 id="Next-Steps"><a href="#Next-Steps" class="headerlink" title="Next Steps"></a>Next Steps</h3><p>这只是冰山一角。你可以在 Melos 网站上学到更多的过滤选项和命令。希望你喜欢这篇文章。</p><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.tech/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 5个必备的桌面插件包将包含在你的下一个版本中</title>
    <link href="https://blog.ducafecat.tech/2021/06/04/translation/5-must-have-flutter-desktop-packages-to-include-in-your-next-build/"/>
    <id>https://blog.ducafecat.tech/2021/06/04/translation/5-must-have-flutter-desktop-packages-to-include-in-your-next-build/</id>
    <published>2021-06-03T16:00:00.000Z</published>
    <updated>2021-06-03T23:49:36.666Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-04-07-47-05.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="猫哥说"><a href="#猫哥说" class="headerlink" title="猫哥说"></a>猫哥说</h2><p>看到这张图，也许你和我一样向往着宁静的生活。</p><p>今天推荐文章中，感觉 字体、动画、下拉 插件还是很有用的，估计你都用上了。</p><h2 id="老铁记得-转发-，猫哥会呈现更多-Flutter-好文"><a href="#老铁记得-转发-，猫哥会呈现更多-Flutter-好文" class="headerlink" title="老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~"></a>老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~</h2><h2 id="微信-flutter-研修群-ducafecat"><a href="#微信-flutter-研修群-ducafecat" class="headerlink" title="微信 flutter 研修群 ducafecat"></a>微信 flutter 研修群 ducafecat</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-04-07-25-03.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://medium.com/fddevops/5-must-have-flutter-desktop-packages-to-include-in-your-next-build-e45d6dfd3995" target="_blank" rel="noopener">https://medium.com/fddevops/5-must-have-flutter-desktop-packages-to-include-in-your-next-build-e45d6dfd3995</a></p></blockquote><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://pub.dev/packages/provider" target="_blank" rel="noopener">https://pub.dev/packages/provider</a></li><li><a href="https://pub.dev/packages/google_fonts" target="_blank" rel="noopener">https://pub.dev/packages/google_fonts</a></li><li><a href="https://pub.dev/packages/photo_view" target="_blank" rel="noopener">https://pub.dev/packages/photo_view</a></li><li><a href="https://pub.dev/packages/animations" target="_blank" rel="noopener">https://pub.dev/packages/animations</a></li><li><a href="https://pub.dev/packages/flutter_pull_to_refresh" target="_blank" rel="noopener">https://pub.dev/packages/flutter_pull_to_refresh</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><p>是 Google 在 2018 年开发的一个软件开发工具包。自成立以来，它获得了业界的广泛赞誉。使它脱颖而出的是其简单易学的编码语言省道，简单醒目的小部件设计，以及跨平台的开发能力。</p><p>Flutter 继续作出巨大的改进，现在是一个稳定的产品都 Flutter 网络和移动。虽然 Flutter Desktop Desktop 仍处于 alpha 阶段，但随着开发人员继续将其用于桌面应用程序开发，您可以期待在未来几个月内得到大量增强。在本文中，我们将向您介绍在下一个版本中必须包含的 5 个桌面软件包。</p><h3 id="为什么桌面仍然有意义？"><a href="#为什么桌面仍然有意义？" class="headerlink" title="为什么桌面仍然有意义？"></a>为什么桌面仍然有意义？</h3><p>如果你相信桌面应用程序的时代已经结束，那么你将是一个很好的公司。毕竟，移动应用程序的开发和使用仍在继续飞速增长，人们的注意力主要集中在移动应用的未来。</p><p>尽管如此，许多用户还是喜欢在更大的屏幕上查看应用程序，即使它不是桌面应用程序。桌面用户可以查看更多的信息，方便地导航，并且可以花更多的时间在应用程序上。</p><h3 id="跨平台开发的兴起"><a href="#跨平台开发的兴起" class="headerlink" title="跨平台开发的兴起"></a>跨平台开发的兴起</h3><p>在过去的几年里，对本地开发人员的需求已经有了显著的下降。DRY (不要重复自己)长期以来一直是开发人员的圣杯。JsNode 有“承诺”(没有双关语的意思) ，然后 Xamarin 作为一个跨开发工具可以在多种平台上使用。本地开发中缺少这个特性。</p><p>Flego 是第一个跨平台开发工具，现在称为 React Native。Flutter 是一个跨平台的开发工具，它配备了 UI 呈现组件、导航、测试和大量的库。Flutter 引擎包含了开发人员构建和部署他们的应用程序所需的所有特性。</p><p>由于这些新的发展，许多人都认为 Flutter 有可能为桌面开发取代 electron。</p><h3 id="Flutter-引擎"><a href="#Flutter-引擎" class="headerlink" title="Flutter 引擎"></a>Flutter 引擎</h3><p>Flutter 团队的目标是构建一个跨平台的 UI 工具包，以实现代码的可重用性。这就导致了 Flutter 发动机的发展。从技术的角度来看，Flutter 引擎把像素的屏幕上，当他们是必要的。Flutter 发动机是 Flutter 快速、高质量输出的基石。</p><p>Flutter 新的面向桌面的 alpha 版本允许更多的键盘输入、鼠标控制和大屏幕显示。</p><h3 id="用于-Flutter-的桌面插件"><a href="#用于-Flutter-的桌面插件" class="headerlink" title="用于 Flutter 的桌面插件"></a>用于 Flutter 的桌面插件</h3><p>在 Windows、 Mac 和 Linux 操作系统上，有大量的桌面软件包可以使用。下面是这些软件包的一个快速概述。</p><h4 id="Provider-5-0-0-Null-Safety"><a href="#Provider-5-0-0-Null-Safety" class="headerlink" title="Provider 5.0.0 (Null Safety)"></a>Provider 5.0.0 (Null Safety)</h4><p><a href="https://pub.dev/packages/provider" target="_blank" rel="noopener">https://pub.dev/packages/provider</a></p><p>它是一个包装器，围绕着一个可继承的 widget，使它可重用且易于使用。你可以在代码中使用 Provider 而不是手动编写 Inheritedwidget，你会得到以下好处:</p><ul><li>简化资源分配</li><li>延迟加载</li><li>一个显着减少样板和使一个新的类每次</li><li>用户友好的开发工具</li><li>在代码中使用 IngeritedWidget 的最可靠的方法</li><li>为类提供更多的可伸缩性</li></ul><h4 id="Google-fonts"><a href="#Google-fonts" class="headerlink" title="Google_fonts"></a>Google_fonts</h4><p><a href="https://pub.dev/packages/google_fonts" target="_blank" rel="noopener">https://pub.dev/packages/google_fonts</a></p><p>这并不奇怪。这个 Flutter 软件包可以让你在 Flutter 应用程序中使用 977 字体中的任何一种以及它们的变体，这些字体都来自 fonts.google.com。</p><p>开始使用 google 字体</p><p>使用 google 字体包,。或者。Otf 文件不需要存储在 assets 文件夹中，可以在 pubspec 中映射。它们可以在运行时通过 HTTP 命令检索一次，并且可以缓存在应用程序的系统中。这个包是专门为减少应用程序包的大小而设计的。使用 google_fonts 包，开发人员可以选择预绑定字体，然后使用相同的 API 在 HTTP 上选择字体。</p><h4 id="Flutter-Photo-View"><a href="#Flutter-Photo-View" class="headerlink" title="Flutter Photo View"></a>Flutter Photo View</h4><p><a href="https://pub.dev/packages/photo_view" target="_blank" rel="noopener">https://pub.dev/packages/photo_view</a></p><p>一个简单的可缩放的用于 flutter 的图像/内容小部件。PhotoView 允许用户缩放图片，迎合用户的捏、旋转和拖动手势。</p><p>它还可以用于显示图像中的任何小部件，如 Container、 Text 或 SVG。虽然 PhotoView Flutter 软件包很容易使用，但是通过它的选项和控制器它是非常可定制的。</p><ul><li>如何安装？</li></ul><p>在 pubspec.yaml 文件中添加 photo_view 作为依赖项</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dependencies:</span></span><br><span class="line"><span class="attr">  photo_view:</span> <span class="string">^0.11.1</span></span><br></pre></td></tr></table></figure><ul><li>导入照片查看:</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:photo_view/photo_view.dart'</span>;</span><br></pre></td></tr></table></figure><ul><li>非常基本的用法</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@override</span></span><br><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">  <span class="keyword">return</span> Container(</span><br><span class="line">    child: PhotoView(</span><br><span class="line">      imageProvider: AssetImage(<span class="string">"assets/large-image.jpg"</span>),</span><br><span class="line">    )</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="animations"><a href="#animations" class="headerlink" title="animations"></a>animations</h4><p>高质量的 Flutter 动画预制。该软件包配备了预先录制的动画，以达到预期的效果。动画可以根据你的内容进行定制，也可以集成到应用程序中以取悦用户:</p><h5 id="Material-Motion-for-Flutter"><a href="#Material-Motion-for-Flutter" class="headerlink" title="Material Motion for Flutter"></a>Material Motion for Flutter</h5><p>Material Motion 是一组过渡模式，帮助用户理解和导航应用程序。目前，这个库提供了以下转换模式:</p><ul><li>Container transform</li></ul><p>Container transform 模式旨在促进包含容器的 UI 元素之间的转换。下面显示的图片告诉我们，这个包在两个 UI 元素之间创建了一个可见的连接。</p><ul><li>Shared axis</li></ul><p>共享轴模式有助于在具有空间或导航关系的 UI 元素之间进行转换。该模式在 x、 y 和 z 轴上使用共享转换来加强元素之间的关系。</p><ul><li>Fade through</li></ul><p>淡入模式用于在互不紧密相关的 UI 元素之间进行过渡。</p><ul><li>Fade</li></ul><p>淡入模式用于那些存在于屏幕边界内的 UI 元素，例如在屏幕中心淡出的对话框。</p><h4 id="Flutter-pulltorefresh"><a href="#Flutter-pulltorefresh" class="headerlink" title="Flutter pulltorefresh"></a>Flutter pulltorefresh</h4><p>该 Flutter 软件包集成了 Flutter 滚动部件和下拉刷新功能。</p><p>功能:</p><ul><li>当你在窗口中向上滚动时，它会加载，当你向下滚动时，它会刷新</li><li>它最适合所有的滚动小部件，如 GridView 和 ListView</li><li>配备了一些常见的指示器</li><li>附带默认指示符和属性的全局设置</li><li>除了水平和垂直刷新，它还支持反向 ScrollView</li><li>包含更多的更新风格，比如 Behind，Follow，Unfollow 和 Front</li><li>支持两级刷新</li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.tech/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 构建漂亮的 Windows 应用程序ーー流畅的设计结构和导航</title>
    <link href="https://blog.ducafecat.tech/2021/06/03/translation/flutter-building-beautiful-windows-apps-fluent-design-structure-and-navigation/"/>
    <id>https://blog.ducafecat.tech/2021/06/03/translation/flutter-building-beautiful-windows-apps-fluent-design-structure-and-navigation/</id>
    <published>2021-06-02T16:00:00.000Z</published>
    <updated>2021-06-02T22:19:29.788Z</updated>
    
    <content type="html"><![CDATA[<h2 id="老铁记得-转发-，猫哥会呈现更多-Flutter-好文"><a href="#老铁记得-转发-，猫哥会呈现更多-Flutter-好文" class="headerlink" title="老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~"></a>老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~</h2><h2 id="微信-flutter-研修群-ducafecat"><a href="#微信-flutter-研修群-ducafecat" class="headerlink" title="微信 flutter 研修群 ducafecat"></a>微信 flutter 研修群 ducafecat</h2><h2 id="猫哥说"><a href="#猫哥说" class="headerlink" title="猫哥说"></a>猫哥说</h2><p>这是一套用来做 Windows UWP APP 的界面解决方案库</p><p>界面的搭建，菜单 导航 Tab 表单 常用控件 样式抽取 转场动画 图标 主题 自适应切换 都有了</p><p>如果你用的话可以 clone 一套，自己维护或者研究</p><p><a href="https://github.com/bdlukaa/fluent_ui" target="_blank" rel="noopener">https://github.com/bdlukaa/fluent_ui</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-03-06-00-53.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://itnext.io/flutter-building-beautiful-windows-apps-fluent-design-structure-and-navigation-e53a394988d2" target="_blank" rel="noopener">https://itnext.io/flutter-building-beautiful-windows-apps-fluent-design-structure-and-navigation-e53a394988d2</a></p></blockquote><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/bdlukaa/fluent_ui" target="_blank" rel="noopener">https://github.com/bdlukaa/fluent_ui</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://pub.dev/packages/fluent_ui" target="_blank" rel="noopener">https://pub.dev/packages/fluent_ui</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><p>流畅的设计是微软为设计漂亮的 Windows 程序提供的解决方案。Flutter 最终在 Google i/o 2021 中扩展了对 Windows UWP 的支持，这需要精心设计的 Windows 应用程序。在本文中，我将向您展示如何使用 Flutter 创建一个基本的 Fluent 设计应用程序。</p><p>本指南最适用于 Win32 和 UWP Flutter 应用程序。如果你还没有设置你的 UWP 扑动应用程序尚未，按照我的其他指南这样做。</p><h3 id="添加所需的包"><a href="#添加所需的包" class="headerlink" title="添加所需的包"></a>添加所需的包</h3><p>第一步是由 bdlukaa 安装 fluent_ui 包。</p><p><a href="https://pub.dev/packages/fluent_ui" target="_blank" rel="noopener">https://pub.dev/packages/fluent_ui</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter pub add fluent_ui</span><br></pre></td></tr></table></figure><p>现在，是时候开始创建我们的 Fluent Design 应用程序了！</p><h3 id="FluentApp"><a href="#FluentApp" class="headerlink" title="FluentApp"></a>FluentApp</h3><p>在 main.dart 中，导入 fluent_ui 包:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:fluent_ui/fluent_ui.dart'</span>;</span><br></pre></td></tr></table></figure><p>然后，在 build 函数中创建 FluentApp 小部件，这是 Fluent 应用的基础。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> FluentApp();</span><br></pre></td></tr></table></figure><p>你的代码现在应该是这样的:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:fluent_ui/fluent_ui.dart'</span>;<span class="keyword">void</span> main() &#123;</span><br><span class="line">  runApp(MyApp());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;StatefulWidget&gt; createState() &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> implement createState</span></span><br><span class="line">    <span class="keyword">return</span> MyAppState();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyAppState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">MyApp</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> implement build</span></span><br><span class="line">    <span class="keyword">return</span> FluentApp();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>与 MaterialApp 类似，FluentApp 也有一个主题属性，该属性接受 ThemeData() ，并允许您自定义应用程序的外观。还可以使用 darkTheme 属性设置单独的暗主题。</p><p>ThemeData ()的一些关键属性是 ecastcolor (高亮元素的颜色)和 scaffoldBackgroundColor (应用程序的背景颜色)。当然，还有很多其他属性，比如 iconTheme，buttonTheme 和 contentDialogTheme，它们可以让你分别自定义图标、按钮和对话框的外观。</p><p>下面是 FluentApp 中使用主题的一个例子:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> FluentApp(</span><br><span class="line">      theme: ThemeData(</span><br><span class="line">          scaffoldBackgroundColor: Colors.white,</span><br><span class="line">          accentColor: Colors.blue,</span><br><span class="line">          iconTheme: <span class="keyword">const</span> IconThemeData(size: <span class="number">24</span>)),</span><br><span class="line">      darkTheme: ThemeData(</span><br><span class="line">          scaffoldBackgroundColor: Colors.black,</span><br><span class="line">          accentColor: Colors.blue,</span><br><span class="line">          iconTheme: <span class="keyword">const</span> IconThemeData(size: <span class="number">24</span>)),</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="导航视图"><a href="#导航视图" class="headerlink" title="导航视图"></a>导航视图</h3><p>NavigationView 控制 Fluent Design 页面之间的移动。在 Fluent App 的 home 属性中添加一个 NavigationView，如下所示:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> FluentApp(</span><br><span class="line">        theme: ThemeData(</span><br><span class="line">            scaffoldBackgroundColor: Colors.white,</span><br><span class="line">            accentColor: Colors.blue,</span><br><span class="line">            iconTheme: <span class="keyword">const</span> IconThemeData(size: <span class="number">24</span>)),</span><br><span class="line">        darkTheme: ThemeData(</span><br><span class="line">            scaffoldBackgroundColor: Colors.black,</span><br><span class="line">            accentColor: Colors.blue,</span><br><span class="line">            iconTheme: <span class="keyword">const</span> IconThemeData(size: <span class="number">24</span>)),</span><br><span class="line">        home: NavigationView()</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>应用程序栏在很多 Windows 应用程序中都很常见，可以通过 appBar 属性中的 NavigationAppBar 实现到 NavigationView 中。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">home: NavigationView(</span><br><span class="line">          appBar: NavigationAppBar(</span><br><span class="line">                 title: Text(<span class="string">"Fluent Design App Bar"</span>)</span><br><span class="line">          ),</span><br><span class="line">      )</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-03-06-10-23.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="导航窗格"><a href="#导航窗格" class="headerlink" title="导航窗格"></a>导航窗格</h3><p>打开: 窗格被展开并放置在内容的左侧。每个类别或页面必须有一个图标</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-03-06-10-45.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>压缩: 窗格放置在内容的左侧，只显示图标，直到它被展开。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-03-06-11-01.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>最小化: 在窗格展开之前，只显示菜单按钮。当展开时，它被放置在内容的左侧。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-03-06-11-20.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>这个模式根据窗口的宽度动态地在 Minimal，Compact 和 Open 之间进行选择。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-03-06-11-39.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>顶部: 窗格位于内容的上方。它对于不能用图标表示的类别或页面很有用。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-03-06-11-54.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>要创建 NavigationPane，可以使用 NavigationView 的 pane 属性。然后，我们可以将 displayMode 设置为 PaneDisplayMode.auto，PaneDisplayMode.open，panedisplaymode.com pact，PaneDisplayMode.minimal 或 PaneDisplayMode.top。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">home: NavigationView(</span><br><span class="line">          appBar: NavigationAppBar(</span><br><span class="line">            title: Text(<span class="string">"Fluent Design App Bar"</span>)),</span><br><span class="line">          pane: NavigationPane(</span><br><span class="line">            displayMode: PaneDisplayMode.auto,</span><br><span class="line">          ),</span><br><span class="line">      )</span><br></pre></td></tr></table></figure><p>接下来，我们需要在 NavigationPane 中指定项目。我们可以将 items 属性设置为 PaneItems 列表。每个 PaneItem 接受一个图标和一个标题。以下是我的例子:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">pane: NavigationPane(</span><br><span class="line">            displayMode: PaneDisplayMode.auto,</span><br><span class="line">            items: [</span><br><span class="line">              PaneItem(</span><br><span class="line">                icon: Icon(Icons.code),</span><br><span class="line">                title: Text(<span class="string">"Sample Page 1"</span>)</span><br><span class="line">              ),</span><br><span class="line">              PaneItem(</span><br><span class="line">                icon: Icon(Icons.desktop_windows_outlined),</span><br><span class="line">                title: Text(<span class="string">"Sample Page 2"</span>)</span><br><span class="line">              )</span><br><span class="line">            ]</span><br><span class="line">          ),</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-03-06-12-45.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>现在，在 MyAppState 类中创建一个 int 类型的变量 index。这将负责管理 NavigationPane 中选定的页面。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyAppState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">MyApp</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">int</span> index = <span class="number">0</span>;</span><br></pre></td></tr></table></figure><p>现在，我们将索引链接为 NavigationPane 的选定索引。将 NavigationPane 的选定属性设置为索引。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pane: NavigationPane(</span><br><span class="line">            selected: index,</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>要在选定的 PaneItem 更改时更新索引变量，我们需要指定 onChanged 属性。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">pane: NavigationPane(</span><br><span class="line">            selected: index,</span><br><span class="line">            onChanged: (newIndex)&#123;</span><br><span class="line">              setState(() &#123;</span><br><span class="line">                index = newIndex;</span><br><span class="line">              &#125;);</span><br><span class="line">            &#125;,</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>可选: 要在 NavigationPane 中添加 Acrylic 透明效果，可以在 NavigationView 中将 usecrylic 属性设置为 true。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">home: NavigationView(</span><br><span class="line">          appBar: NavigationAppBar(</span><br><span class="line">            title: Text(<span class="string">"Fluent Design App Bar"</span>)),</span><br><span class="line">          useAcrylic: <span class="keyword">true</span>,</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h3 id="NavigationBody"><a href="#NavigationBody" class="headerlink" title="NavigationBody"></a>NavigationBody</h3><p>NavigationBody 用于将页面转换实现为导航视图，并在页面之间切换时执行相关转换。</p><p>我们可以将 NavigationBody 设置为 NavigationView 的内容属性。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">home: NavigationView(</span><br><span class="line">          content: NavigationBody(),</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>接下来，我们需要指定 index 属性作为 NavigationPane 的选定索引。我们可以将它设置为我们的索引变量。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">home: NavigationView(</span><br><span class="line">          content: NavigationBody(</span><br><span class="line">            index: index</span><br><span class="line">          ),</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>然后，我们需要将 children 属性指定为一个 List，其中包含要为每个 PaneItem 显示的小部件。注意: children 属性中小部件的顺序必须与 PaneItem 小部件的顺序相同。</p><p>通常，这些窗口小部件是脚手架页面小部件:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">content: NavigationBody(</span><br><span class="line">            index: index,</span><br><span class="line">            children: [</span><br><span class="line">              ScaffoldPage(),</span><br><span class="line">              ScaffoldPage(),</span><br><span class="line">            ],</span><br><span class="line">          ),</span><br></pre></td></tr></table></figure><h3 id="脚手架页面"><a href="#脚手架页面" class="headerlink" title="脚手架页面"></a>脚手架页面</h3><p>脚手架 page 是 Fluent Design 中的 Material Scaffold。</p><p>Header 属性指定顶部栏。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ScaffoldPage(</span><br><span class="line">      header: Text(</span><br><span class="line">        <span class="string">"Sample Page 1"</span>,</span><br><span class="line">        style: TextStyle(fontSize: <span class="number">60</span>),</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-03-06-15-47.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>Content 属性指定 ScaffoldPage 中的其他小部件，类似于 Material Scaffold 中的 body 属性。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ScaffoldPage(</span><br><span class="line">      header: Text(</span><br><span class="line">        <span class="string">"Sample Page 1"</span>,</span><br><span class="line">        style: TextStyle(fontSize: <span class="number">60</span>),</span><br><span class="line">      ),</span><br><span class="line">      content: Center(</span><br><span class="line">        child: Text(<span class="string">"Welcome to Page 1!"</span>),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br></pre></td></tr></table></figure><p>下面是我的应用程序到目前为止的样子:</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-03-06-16-25.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="Navigator-push-amp-Navigator-pop"><a href="#Navigator-push-amp-Navigator-pop" class="headerlink" title="Navigator.push &amp; Navigator.pop"></a>Navigator.push &amp; Navigator.pop</h3><p>FluentApp 支持和 MaterialApp 相同的导航功能，因为我们都喜欢它。然而，当在 FluentApp 中浏览页面时，我们使用 FluentPageRoute 来代替 MaterialPageRoute。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Navigator.push(context, FluentPageRoute(builder: (context) =&gt; Page2()));</span><br></pre></td></tr></table></figure><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.tech/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;老铁记得-转发-，猫哥会呈现更多-Flutter-好文&quot;&gt;&lt;a href=&quot;#老铁记得-转发-，猫哥会呈现更多-Flutter-好文&quot; class=&quot;headerlink&quot; title=&quot;老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~&quot;&gt;&lt;/a&gt;老
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>为什么 Flutter 已经为企业应用程序开发做好了准备</title>
    <link href="https://blog.ducafecat.tech/2021/06/02/translation/heres-why-flutter-is-now-ready-for-enterprise-app-development/"/>
    <id>https://blog.ducafecat.tech/2021/06/02/translation/heres-why-flutter-is-now-ready-for-enterprise-app-development/</id>
    <published>2021-06-01T16:00:00.000Z</published>
    <updated>2021-06-01T14:24:32.152Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-01-22-24-30.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="老铁记得-转发-，猫哥会呈现更多-Flutter-好文"><a href="#老铁记得-转发-，猫哥会呈现更多-Flutter-好文" class="headerlink" title="老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~"></a>老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~</h2><h2 id="微信-flutter-研修群-ducafecat"><a href="#微信-flutter-研修群-ducafecat" class="headerlink" title="微信 flutter 研修群 ducafecat"></a>微信 flutter 研修群 ducafecat</h2><h2 id="猫哥说"><a href="#猫哥说" class="headerlink" title="猫哥说"></a>猫哥说</h2><p>这篇文章很硬，如果你正在架构一个 APP，或者你正在写 flutter 技术论文，可以参考下。</p><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://betterprogramming.pub/heres-why-flutter-is-now-ready-for-enterprise-app-development-1986ef2cd3e3" target="_blank" rel="noopener">https://betterprogramming.pub/heres-why-flutter-is-now-ready-for-enterprise-app-development-1986ef2cd3e3</a></p></blockquote><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><p>为企业应用程序开发做好准备了吗？长期以来，这一直是开发者提出的最多的问题之一。但是在 Beta 发布之后，这个平台展示了很多前景，并且提供了大量的本地化特性，使得本地化应用程序的开发变得更加容易。</p><p>虽然移动应用开发市场的确正在向强大的应用开发过程体验转变，但主要障碍之一是 iOS 和安卓应用开发之间的分工。由于这两种操作系统的用户遍布全球，企业在锁定受众时必须注意这一点，以确保自己的品牌不会遗漏任何市场。</p><p>本文将帮助您了解为什么颤振是准备授权企业。</p><p>当谷歌在 2018 年宣布 Flutter 的第一个稳定版本(1.0)时，人们很想知道它是否是一个很好的企业级移动应用程序开发工具。</p><p>快进到今天，我很自豪我决定尝试 Flutter 为企业应用程序开发。</p><p>我知道你们很多人都想知道为什么 Flutter 在应用程序开发方面获得了广泛的关注，因为它的定位与其他跨平台开发工具没有什么不同，这些跨平台开发工具提供了原生的 iOS 和 Android 应用程序。建立一次，部署到每个地方！</p><p>不像其他人，我避免陷入这些陈述！</p><p>在一年的时间里，现在有超过 4000 个插件支持 Flutter 应用程序。媒体，YouTube，Stack Overflow，以及更多的网站都充斥着建议 Flutter 可以帮助你为不同的商业领域创建各种各样的应用程序的内容。</p><p>Flutter 是王道ーー至少在企业应用程序开发解决方案方面是如此。这不仅仅是我的观点，也是来自移动应用开发行业的压倒性的声音。</p><p><a href="https://www.xicom.ae/services/mobile-app-development/" target="_blank" rel="noopener">https://www.xicom.ae/services/mobile-app-development/</a></p><p>根据谷歌的统计，每月有 50 万开发者使用谷歌软件开发工具包。</p><p><a href="https://venturebeat.com/2020/04/22/google-500000-developers-flutter-release-process-versioning-changes/" target="_blank" rel="noopener">https://venturebeat.com/2020/04/22/google-500000-developers-flutter-release-process-versioning-changes/</a></p><p>另外，Flutter 的 SDK 是 GitHub 上增长第二快的项目，它使得它在业界的竞争对手中脱颖而出。所有这一切都指向一个欣欣向荣的社区，渴望分享，成长，并提高 Flutter！</p><p><a href="https://techmonitor.ai/technology/software/top-10-programming-languages" target="_blank" rel="noopener">https://techmonitor.ai/technology/software/top-10-programming-languages</a></p><p>所有这些事实，现在是时候来决定 Flutter 和它的库是否准备好在 2021 年开发企业移动应用程序了。</p><p>在我们直接进入你可能需要开发特定的企业安卓应用程序的需求之前，我的简单目标是为每个需求找到至少一个 Flutter 解决方案，让你相信 Flutter 现在已经准备好开发几乎没有混合代码需求的企业应用程序。</p><p>当然，业务应用程序的需求因项目而异，因此最终的结果可能会有所不同。</p><p>让我们先简单介绍一下 Flutter。</p><h3 id="框架概述"><a href="#框架概述" class="headerlink" title="框架概述"></a>框架概述</h3><p>Flutter 是一个开源的 UI 软件开发工具包，广泛用于跨平台应用程序开发。通过使用单一的代码库，移动应用程序开发公司可以创建各种类型的应用程序，从简单的聊天应用程序到按需购物应用程序。它与其他框架的不同之处在于 Flutter 应用程序是用 Google 的面向对象程序设计语言 Dart 编写的。</p><p>谷歌选择了 Dart，同时考虑了以下四点:</p><ul><li>Productivity 生产力</li><li>Faster allocation 更快的分配</li><li>Object orientation 面向对象</li><li>High performance 高性能</li></ul><p>有了这些事实，Flutter 可以帮助开发者为 iOS、 Android 和网络平台开发本地应用程序，这些应用程序可以在多个平台上无缝运行。</p><p>UI 性能、源代码成熟度、安全测试和功能是开发人员在为不同平台设计应用程序时遇到的主要挑战。颤振应用程序开发可以帮助您解决这样的问题，以极其轻松。</p><p>现在，企业应用程序到底是什么，构建它的主要需求是什么，Flutter 是如何对过程做出贡献的？</p><h3 id="企业级移动应用"><a href="#企业级移动应用" class="headerlink" title="企业级移动应用"></a>企业级移动应用</h3><p>首先，企业应用程序是否仅仅意味着领先品牌的发展。</p><p>无论你是一个进步的创业公司还是一个领先的组织，企业应用程序都是为所有人服务的。这些应用程序是专门为企业劳动力的有限和受保护的使用而设计和开发的。对于企业应用程序，管理员可以集中处理数据，实现大规模的自动化，并维护流畅的工作流。但是为了使其功能化，企业应用程序需要许多特性、高安全性和具有健壮框架的无缝 UI 设计，以确保高性能。</p><p>让我们了解一下构建企业应用程序的具体要求，看看 Flutter 和它的库包生态系统是否已经为这项任务做好了准备。</p><p>以下是我选择的基本要求。在每一个需求类别中都有很多需要覆盖的内容，尽管我已经试图简要地假设读者已经熟悉 Flutter 的基本特性。</p><ul><li>Layered architecture 分层结构</li><li>Development environment 发展环境</li><li>User interface 用户界面</li><li>Hardware features 硬件特性</li><li>App security 应用程序安全性</li><li>Miscellaneous requirements 杂项需求</li></ul><h3 id="分层架构，确保更好的功能性"><a href="#分层架构，确保更好的功能性" class="headerlink" title="分层架构，确保更好的功能性"></a>分层架构，确保更好的功能性</h3><p>在开发企业应用程序时，确保它具有分层架构，以确保无缝功能，并通过不同开发团队的各种技能提高生产率。</p><p>当 layers 被插入时，开发者必须想办法提供以下功能:</p><ul><li>更好地访问文档完整的设计模式</li><li>大量的开发人员同时处理代码库</li><li>很容易理解各种各样的应用程序功能</li></ul><p>通过为网络资源、本地存储、 SQLite 数据库以及通过插件插件访问硬件提供简单而安全的网络，Flutter 在这里大放异彩。</p><p>让我们来看看如何:</p><ul><li>State management : 当前位置 Flutter 的应用程序架构的核心，而 Google 最近的建议是使用 Provider 框架，这个框架更容易理解和构建。同时其他状态管理如 Redux、 BLoC、,InheritedWidget 继承的 widget, setState, etc., they coexist within reason. 、 setState 等，它们在合理范围内共存</li><li>RxDart : 如果 Dart 的流和异步包不能满足您的异步编程需求，那么考虑 RxDart 是一个明智的决定。它与 Flutter 和状态管理框架无缝集成</li><li>Background processing 后台处理: 它允许计算密集的工作，以执行在应用程序，同时保持用户界面的响应在同一时间。根据后台处理需求的复杂程度，您可能需要采用纯 Dart 实现之外的本地平台特性</li><li>Dependency injection: 依赖注入: 为了使你的应用程序代码单元独立和可重用，移动应用程序开发人员可以使用 依赖注入.这是一种使代码更容易测试的设计模式。GetIT 定位器是一个简单易用的 DI 库，它与状态管理框架无缝地协同工作，以确保应用程序层的分离</li><li>JSON serialization/deserialization JSON 序列化/反序列化: 对于任何 RESTful 客户机都很重要，在大多数企业应用程序中也很常见</li><li>Deep linking 深度连接: 它提供正确的导航从一个网站或推送通知启动应用程序内的特定领域</li><li>Local storage 本地存储: 提供本地存储的少量键/值数据，然后帮助您的应用程序工作，即使应用程序是背景或停止</li><li>SQLite: 可用于处理大量的结构化数据</li><li>Push notifications 推送式通知 : 对于企业级应用程序，通常需要后端集成，以帮助您向用户通知到期日期、关于服务的提醒等。对于此，firebasmessaging 是一站式解决方案</li></ul><h3 id="本地安卓和-iOS-应用的开发环境"><a href="#本地安卓和-iOS-应用的开发环境" class="headerlink" title="本地安卓和 iOS 应用的开发环境"></a>本地安卓和 iOS 应用的开发环境</h3><p>对于开发环境，开发人员可以在 Android Studio/IntelliJ 和 Visual Studio Code 之间选择他们的 Flutter IDE。所有这些都在 Mac，PC，Linux 和 Chromebook 上得到了很好的支持。所有你需要的是采用 Flutter 应用程序开发与正确的经验。</p><p>在这些 ide 中，开发人员可以实现构建、设备部署、调试和性能分析。但是要为本地 iOS 创建一个开发环境/部署，需要在 Mac 上使用 Xcode。</p><ul><li>Scalability 可伸缩性: 颤振应用程序很容易扩展，因为它基于 Dart 生态系统，引入 Dart 包来提供外部库的功能。颤振项目可以重构成颤振飞镖软件包，提供了另一种方式来分割大型团队的工作，使其更容易扩大应用程序</li><li>Testability 可测试性: 是否正在使用 unit tests 单元测试, widget tests 小部件测试, or ，或 integration tests 集成测试, 每一个 Flutter 小工具可以很容易地测试。所有这些测试工具都允许最大的测试覆盖率，并且仅受可用时间和资源的限制</li><li>Continuous integration/continuous delivery 持续集成/持续交付: 使用卓越的安卓和 iOS 工具集将应用程序部署到 Google Play 商店或苹果商店，使它们可以在任何现有的企业移动 CI/CD 设置中使用</li></ul><p>与 Flutter 合作的移动应用程序开发公司可以将大部分时间花在 Flutter/Dart 环境中，同时将 Flutter 应用程序部署到安卓和 iOS 设备上。知识如何建立和签署应用程序和供应配置文件，等是必不可少的实施一个成功的扑动应用程序。</p><h3 id="用户界面"><a href="#用户界面" class="headerlink" title="用户界面"></a>用户界面</h3><p>应用程序界面在用户体验中扮演着重要角色。企业移动应用程序努力专注于提供优秀的用户界面。为了满足这个需求，Flutter 提供了一套全面的 Android 和 iOS 的高精度演示。</p><blockquote><p>为了让你的用户界面更有吸引力，你可以整合:</p></blockquote><ul><li>Animations 动画: 很容易开始学习动画，他们可以扩展到任何复杂性。对于广泛使用的 Flutter，你可以包括耀斑，这是一个完整的 2D 矢量动画库。应用程序开发公司正在广泛使用这个工具来定制具有无缝接口的企业应用程序</li><li>Page transitions 页面转换: 他们可以是一个完美的例子，学习如何导航之间的应用程序页面与动画可以实现</li><li>Paging 分页或无限滚动列表视图: 当需要在不占用大量设备内存的情况下向用户显示大量数据时，这是一个常见的需求。这是年的最新趋势移动应用开发服务，因为 Flutter 提供了丰富的内容存储库的无限滚动</li><li>Image loading/caching library 图像加载/缓存库: 它提供了一种快速、简单的方法来处理许多图像，包括在基本图像或 SVG 图像不够好的情况下进行缓存。因此，Flutter 应用程序开发人员可以很容易地通过加载和缓存库管理图像</li></ul><p>最后，你可以在 Flutter 移动应用程序上提供谷歌和苹果地图。</p><h3 id="硬件特性需求"><a href="#硬件特性需求" class="headerlink" title="硬件特性需求"></a>硬件特性需求</h3><p>无论你是如何出色地定制了你的应用程序，并提供了一系列广泛的功能，没有一个应用程序是完全可以在没有硬件功能支持的情况下工作的。</p><p>因此，当你雇佣应用程序开发人员为企业员工/用户/员工开发企业应用程序时，你需要硬件和软件支持:</p><p><a href="https://www.xicom.ae/solutions/hire-developers/" target="_blank" rel="noopener">https://www.xicom.ae/solutions/hire-developers/</a></p><ul><li>Camera 相机</li><li>Accelerometer 加速度计</li><li>GPS 全球定位系统</li><li>Biometric authentication, including fingerprint and face ID 生物计量学，包括指纹和脸部识别码</li><li>Microphone 麦克风</li></ul><h3 id="移动应用安全"><a href="#移动应用安全" class="headerlink" title="移动应用安全"></a>移动应用安全</h3><p>安全是一个企业无法破坏的领域ーー无论是基本的企业应用程序还是高级应用程序。保护应用程序数据安全是企业最关心的问题之一。因此，在创建企业应用程序时需要注意各种各样的事情。毫无疑问，这是一个非常广泛的话题，但我将把它缩小到几个具体点，使之易于理解。</p><p>假设 Flutter 应用程序是建立在安卓和 iOS 沙箱环境之上的，所以每个 Flutter 应用程序对于本地 iOS 和安卓应用程序都有固有的安全方面。</p><p>最基本的要求，如身份验证(生物统计学，拇指指纹，两级密码)很好地迎合了 Flutter 的简单认证。</p><blockquote><p>以下是你可以考虑的其他认证提供商:</p></blockquote><ul><li>Amazon 亚马逊</li><li>Facebook</li><li>GitHub</li><li>Google</li><li>Dropbox</li><li>Azure Active Directory Azure 活动目录</li><li>LinkedIn</li><li>Instagram 图片分享</li><li>Microsoft Live Connect 微软 Live Connect</li></ul><p>SSL 证书固定也很重要，因为它减少了由于共享服务器而发生攻击的可能性。它确保 web (HTTPS)请求的安全，并且受到支持。</p><p>安全存储提供了一种在设备上安全地存储少量密钥或有价值信息的方法，即使在没有互联网连接的情况下也能让你的应用程序工作。</p><h3 id="杂项要求"><a href="#杂项要求" class="headerlink" title="杂项要求"></a>杂项要求</h3><p>除了以上所有的要求，这里还有一些在开发企业应用程序时需要考虑的多重要求:</p><ul><li>Analytics 分析: 分析库可在 Flutter 上满足这一要求</li><li>Error reporting 错误报告: 开发人员可以使用 Flutter’s Sentry library 插件.</li><li>Third-party 第三方或开放源码库: 这份第三方插件的清单 在你开始在你的应用里随机挑选和使用一个之前</li><li>Generating QR codes: 生成二维码: 无论是为了应用程序的高级功能还是为了安全目的,二维码扫描很重要</li></ul><p>考虑一下这个:</p><ul><li>分享应用程序细节 社交媒体账号</li><li>访问个人接触名单</li><li>允许相机或位置，而使用的应用程序</li><li>发送短信或多媒体信息或接收短信 一次性密码</li><li>在应用程式内使用应用内支付 SDK.</li></ul><h3 id="Flutter-的跨平台支持超越-iOS-和-Android"><a href="#Flutter-的跨平台支持超越-iOS-和-Android" class="headerlink" title="Flutter 的跨平台支持超越 iOS 和 Android"></a>Flutter 的跨平台支持超越 iOS 和 Android</h3><p>我们只讨论了 Flutter 对本地 iOS 和 Android 应用程序的支持，但是 Flutter 正在极大地扩展对 web、 macOS、 Windows 和 Linux 的支持。开发一个可以在所有这些平台上无缝部署和执行的应用程序，只需要使用一段代码，这是您一直以来努力的目标。</p><p>与此同时，您必须接受这样一个事实，即并非所有平台都支持所有相同的特性。例如，谷歌地图现在只支持安卓、 iOS 和网络。另一方面，这些都是目前用户操作的主要平台。</p><p>通过利用 Flutter 的潜力和它广泛的小部件选择，你可以针对移动设备和网络。此外，它是更好的有响应屏幕与 Flutter 内置的应用程序，看起来不同的设备和适合用户的屏幕。所有这些都可以很容易地通过一个代码库实现。</p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>在应用程序开发中，Flutter 已经越来越受欢迎，但随着图书馆的广泛支持，它已经迅速成为企业在短时间内创建企业应用程序的可行选择。</p><p>最好的部分是任何行业利基中的企业、科技公司、创业公司和个人开发者都可以通过雇佣合适的移动应用开发公司来发挥其潜力并创建一个应用程序。随着一个健康和成长的颤振库包装生态系统的正确使用，也许是时候让企业闪耀在竞争的市场，并建立自己的立足点在行业的未来十年。</p><p><a href="https://www.xicom.ae/services/mobile-app-development/" target="_blank" rel="noopener">https://www.xicom.ae/services/mobile-app-development/</a></p><p>感谢 Anupam Chugh。</p><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.tech/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter开源项目 - 加密币客户端 flutter-crypto-app</title>
    <link href="https://blog.ducafecat.tech/2021/06/01/flutter-opensource/flutter-crypto-app/"/>
    <id>https://blog.ducafecat.tech/2021/06/01/flutter-opensource/flutter-crypto-app/</id>
    <published>2021-05-31T16:00:00.000Z</published>
    <updated>2021-05-31T22:06:52.160Z</updated>
    
    <content type="html"><![CDATA[<h2 id="老铁记得-转发-，猫哥会呈现更多-Flutter-好文"><a href="#老铁记得-转发-，猫哥会呈现更多-Flutter-好文" class="headerlink" title="老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~"></a>老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~</h2><h2 id="微信-flutter-研修群-ducafecat"><a href="#微信-flutter-研修群-ducafecat" class="headerlink" title="微信 flutter 研修群 ducafecat"></a>微信 flutter 研修群 ducafecat</h2><h2 id="猫哥说"><a href="#猫哥说" class="headerlink" title="猫哥说"></a>猫哥说</h2><p>节日好伙伴们，今天这个项目推荐给大家，主要是用了 Riverpod 状态管理，Freezed 代码生成器, Flutter 2.2 空安全</p><p>还有就是 写了 单元测试 集成测试 Github Action，大家可以学习下。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-01-05-50-29.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/salvadordeveloper/flutter-crypto-app" target="_blank" rel="noopener">https://github.com/salvadordeveloper/flutter-crypto-app</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://flutter.dev/docs" target="_blank" rel="noopener">https://flutter.dev/docs</a></li><li><a href="https://riverpod.dev/docs/getting_started/" target="_blank" rel="noopener">https://riverpod.dev/docs/getting_started/</a></li><li><a href="https://docs.cryptowat.ch/rest-api/" target="_blank" rel="noopener">https://docs.cryptowat.ch/rest-api/</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><h3 id="特性功能"><a href="#特性功能" class="headerlink" title="特性功能"></a>特性功能</h3><ul><li>API REST (CryptoWatch) restful 拉取数据</li><li>Linear Graph View (Hour, Day, Week, etc) 图</li><li>OHLC Graph 图</li><li>Search 搜索</li><li>Light / Dark Theme 样式主题</li><li>Multi Lenguage 多语言</li><li>Exchange Selection 交易</li><li>Favorite Pair 收藏</li></ul><h3 id="技术栈"><a href="#技术栈" class="headerlink" title="技术栈"></a>技术栈</h3><ul><li>Flutter 2.2.0</li><li>Riverpod + Hooks 状态管理</li><li>Freezed 代码生成器</li><li>Dio http 通讯</li></ul><h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><ul><li>Unit Testing (flutter_test)</li><li>Integration Testing (integration_test)</li><li>Mock Data (http_mock_adapter)</li><li>Github Actions (iOS &amp; Android Integration Test)</li></ul><h3 id="屏幕截图"><a href="#屏幕截图" class="headerlink" title="屏幕截图"></a>屏幕截图</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-01-05-54-39.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-01-05-54-48.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-01-05-55-05.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-01-05-55-14.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-01-05-55-22.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-06-01-05-55-29.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="项目安装"><a href="#项目安装" class="headerlink" title="项目安装"></a>项目安装</h3><p>下载代码</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/salvadordeveloper/flutter-crypto-app</span><br></pre></td></tr></table></figure><p>安装包</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter pub get</span><br></pre></td></tr></table></figure><p>去申请 <a href="https://cryptowat.ch/zh-cn/" target="_blank" rel="noopener">https://cryptowat.ch/zh-cn/</a> 账号 api</p><p>替换 API_KEY</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">API_KEY=&#123;CryptoWatch_KEY&#125;</span><br></pre></td></tr></table></figure><p>生成代码</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter pub run build_runner build --delete-conflicting-outputs</span><br></pre></td></tr></table></figure><p>运行 app</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter run</span><br></pre></td></tr></table></figure><p>单元测试</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter test</span><br></pre></td></tr></table></figure><p>集成测试</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter drive --driver=test_driver/integration_test.dart --target=integration_test/main_test.dart</span><br></pre></td></tr></table></figure><h2 id="参考-1"><a href="#参考-1" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://flutter.dev/docs" target="_blank" rel="noopener">https://flutter.dev/docs</a></li><li><a href="https://riverpod.dev/docs/getting_started/" target="_blank" rel="noopener">https://riverpod.dev/docs/getting_started/</a></li><li><a href="https://docs.cryptowat.ch/rest-api/" target="_blank" rel="noopener">https://docs.cryptowat.ch/rest-api/</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.tech/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;老铁记得-转发-，猫哥会呈现更多-Flutter-好文&quot;&gt;&lt;a href=&quot;#老铁记得-转发-，猫哥会呈现更多-Flutter-好文&quot; class=&quot;headerlink&quot; title=&quot;老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~&quot;&gt;&lt;/a&gt;老
      
    
    </summary>
    
      <category term="开源" scheme="https://blog.ducafecat.tech/categories/%E5%BC%80%E6%BA%90/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>在 Flutter 中编写自定义小部件(第1部分)ー EllipsizedText</title>
    <link href="https://blog.ducafecat.tech/2021/05/31/translation/writing-custom-widgets-in-flutter-part-1-ellipsizedtext/"/>
    <id>https://blog.ducafecat.tech/2021/05/31/translation/writing-custom-widgets-in-flutter-part-1-ellipsizedtext/</id>
    <published>2021-05-30T16:00:00.000Z</published>
    <updated>2021-05-31T00:56:06.894Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-31-08-55-16.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="老铁记得-转发-，猫哥会呈现更多-Flutter-好文"><a href="#老铁记得-转发-，猫哥会呈现更多-Flutter-好文" class="headerlink" title="老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~"></a>老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~</h2><h2 id="微信-flutter-研修群-ducafecat"><a href="#微信-flutter-研修群-ducafecat" class="headerlink" title="微信 flutter 研修群 ducafecat"></a>微信 flutter 研修群 ducafecat</h2><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://rlesovyi.medium.com/writing-custom-widgets-in-flutter-part-1-ellipsizedtext-a0efdc1368a8" target="_blank" rel="noopener">https://rlesovyi.medium.com/writing-custom-widgets-in-flutter-part-1-ellipsizedtext-a0efdc1368a8</a></p></blockquote><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/MatrixDev/Flutter-CustomWidgets" target="_blank" rel="noopener">https://github.com/MatrixDev/Flutter-CustomWidgets</a></p><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-31-08-35-42.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>声明式用户界面在 Flutter 是相当不错，易于使用，它是非常诱人的使用尽可能。但是很多时候，开发人员只是做得太过火了ーー用声明的方式编写所有东西，即使有时候任务可以以更强制性的方式更有效、更容易理解。</p><p>每个人都应该明白的—- 在陈述和命令式编程之间必须有一个平衡。每种方法都有自己的用途，每种方法在某些任务上都比其他方法更加出色。</p><p>在本系列文章中，我将描述如何通过从头创建自定义小部件来解决不同的问题。每一个都比前一个稍微复杂一点。</p><h3 id="思考"><a href="#思考" class="headerlink" title="思考"></a>思考</h3><p>在查看代码之前，我们需要知道一些基本的事情。</p><p>Widget ー只是一个不可变的(最好是 const)类，它包含 Elements 和 RenderObjects 的配置属性。它还负责创建上述元素和渲染对象。需要理解的重要事情ー小部件从不包含状态或任何业务逻辑，只是传递它们。</p><p>元素ー是负责实际 UI 树的实体。它包含对所有子元素的引用，以及(不像 Widget)对其父元素的引用。元素在大多数情况下都会被重用，除非键或小部件被更改。因此，如果 onlyWidget 属性被更改，即使分配了新的 Widget，Element 也将保持不变。</p><p>State ー只不过是 Element 内部的一个用户定义类，它还公开了一些来自它的回调。</p><p>RenderObject ーー负责实际尺寸的计算、子元素的放置、绘制、触摸事件的处理等。这些对象与 Android 或其他框架的经典视图非常相似。</p><p>为什么我们同时拥有元素和渲染对象？因为效率高。每个小部件都有各自的元素，但只有一些有渲染对象。由于这一点，很多布局，触摸和其他层次遍历调用可以省略。</p><h3 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h3><p>第一个例子是一个非常简单的小部件，它在文本不适合时用省略号缩放文本。为什么我们需要这样一个小部件时，内置的文本已经省略号支持你可能会问？答案很简单—- 到目前为止，它只是通过文字而不是字符来表达 <a href="https://github.com/flutter/flutter/issues/18761。所以如果你有一个非常长的单词在结尾ー大多数时候你只能看到这个单词的前几个字母，即使有足够的空间去填充。" target="_blank" rel="noopener">https://github.com/flutter/flutter/issues/18761。所以如果你有一个非常长的单词在结尾ー大多数时候你只能看到这个单词的前几个字母，即使有足够的空间去填充。</a></p><p>那么，我们开始吧。Flutter 有许多内置的基类和 mixin，它们将帮助构建完全自定义的小部件。以下是其中的一些:</p><ul><li>LeafRenderObjectWidget 没有 child</li><li>SingleChildRenderObjectWidget 一个 child</li><li>MultiChildRenderObjectWidget 多个 child</li></ul><p>在我们的例子中，我们将使用 LeafRenderObjectWidget，因为我们只需要渲染文本，并且不会有子节点:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> Ellipsis &#123; start, middle, end &#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EllipsizedText</span> <span class="keyword">extends</span> <span class="title">LeafRenderObjectWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> text;</span><br><span class="line">  <span class="keyword">final</span> TextStyle? style;</span><br><span class="line">  <span class="keyword">final</span> Ellipsis ellipsis;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> EllipsizedText(</span><br><span class="line">    <span class="keyword">this</span>.text, &#123;</span><br><span class="line">    Key? key,</span><br><span class="line">    <span class="keyword">this</span>.style,</span><br><span class="line">    <span class="keyword">this</span>.ellipsis = Ellipsis.end,</span><br><span class="line">  &#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  RenderObject createRenderObject(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> RenderEllipsizedText()..widget = <span class="keyword">this</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> updateRenderObject(BuildContext context, RenderEllipsizedText renderObject) &#123;</span><br><span class="line">    renderObject.widget = <span class="keyword">this</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们创建了我们的 Widget，唯一不同寻常的是有两种方法:</p><ul><li>createRenderObject — 负责实际创建我们的 RenderObject</li><li>updateRenderObject — 当 Widget 的数据发生变化但 RenderObject 保持不变时，将调用 updateRenderObject ー。在这种情况下，我们需要更新 RenderObject 中的数据，否则它将呈现旧文本</li></ul><p>我还需要注意，将每个值从小部件复制到 RenderObject 是首选的。但是我会通过整个 Widget，因为不管怎样它们都是不可变的(而且我懒得编写所有的样板代码)。</p><p>现在让我们从实际的渲染对象开始:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RenderEllipsizedText</span> <span class="keyword">extends</span> <span class="title">RenderBox</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> _widgetChanged = <span class="keyword">false</span>;</span><br><span class="line">  <span class="keyword">var</span> _widget = <span class="keyword">const</span> EllipsizedText(<span class="string">''</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">set</span> widget(EllipsizedText widget) &#123;</span><br><span class="line">    <span class="keyword">if</span> (_widget.text == widget.text &amp;&amp;</span><br><span class="line">        _widget.style == widget.style &amp;&amp;</span><br><span class="line">        _widget.ellipsis == widget.ellipsis) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    _widgetChanged = <span class="keyword">true</span>;</span><br><span class="line">    _widget = widget;</span><br><span class="line">    markNeedsLayout();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在这里，我们定义了所有的变量，并编写了一个 setter 来实际更新它们。还有一个检查值是否实际发生了更改的防护措施ー如果没有更改，则没有必要重新计算省略号和重绘文本。</p><p>现在我们需要布局渲染对象。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RenderEllipsizedText</span> <span class="keyword">extends</span> <span class="title">RenderBox</span> </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="keyword">var</span> _constraints = <span class="keyword">const</span> BoxConstraints();</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> performLayout() &#123;</span><br><span class="line">    <span class="keyword">if</span> (!_widgetChanged &amp;&amp; _constraints == constraints &amp;&amp; hasSize) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    _widgetChanged = <span class="keyword">false</span>;</span><br><span class="line">    _constraints = constraints;</span><br><span class="line"></span><br><span class="line">    size =_ellipsize(</span><br><span class="line">      minWidth: constraints.minWidth,</span><br><span class="line">      maxWidth: constraints.maxWidth,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>布局的过程相当简单。所有我们需要做的ー根据提供给我们的约束计算渲染对象的大小。约束只描述我们必须遵守的最小和最大规模。另外，如果没有任何变化，并且在以前的布局传递过程中已经计算了大小，则添加额外的检查。</p><p>实际创建省略号文本的过程相当繁琐，而且肯定有更好的解决方案，但我选择使用二进制搜索来寻找最佳匹配。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RenderEllipsizedText</span> <span class="keyword">extends</span> <span class="title">RenderBox</span> </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="keyword">final</span> _textPainter = TextPainter(textDirection: TextDirection.ltr);</span><br><span class="line"></span><br><span class="line">  Size _ellipsize(&#123;required <span class="built_in">double</span> minWidth, required <span class="built_in">double</span> maxWidth&#125;) &#123;</span><br><span class="line">    <span class="keyword">final</span> text = _widget.text;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (_layoutText(length: text.length, minWidth: minWidth) &gt; maxWidth) &#123;</span><br><span class="line">      <span class="keyword">var</span> left = <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">var</span> right = text.length - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">        <span class="keyword">final</span> index = (left + right) ~/ <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (_layoutText(length: index, minWidth: minWidth) &gt; maxWidth) &#123;</span><br><span class="line">          right = index;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          left = index + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      _layoutText(length: right - <span class="number">1</span>, minWidth: minWidth);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> constraints.constrain(Size(_textPainter.width, _textPainter.height));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我不会讲完所有这些逻辑(如果你愿意，你可以通过它来阅读)。但是重要的是 TextPainter 是用来计算文本大小的。如果文本大小长于我们的约束，我会尽量使它越来越短，直到它符合我们的约束。</p><p><code>_layoutText</code> 用来计算我们裁剪后的文本大小:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">double</span> _layoutText(&#123;required <span class="built_in">int</span> length, required <span class="built_in">double</span> minWidth&#125;) &#123;</span><br><span class="line">  <span class="keyword">final</span> text = _widget.text;</span><br><span class="line">  <span class="keyword">final</span> style = _widget.style;</span><br><span class="line">  <span class="keyword">final</span> ellipsis = _widget.ellipsis;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">String</span> ellipsizedText = <span class="string">''</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">switch</span> (ellipsis) &#123;</span><br><span class="line">    <span class="keyword">case</span> Ellipsis.start:</span><br><span class="line">      <span class="keyword">if</span> (length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        ellipsizedText = text.substring(text.length - length, text.length);</span><br><span class="line">        <span class="keyword">if</span> (length != text.length) &#123;</span><br><span class="line">          ellipsizedText = <span class="string">'...'</span> + ellipsizedText;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> Ellipsis.middle:</span><br><span class="line">      <span class="keyword">if</span> (length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        ellipsizedText = text;</span><br><span class="line">        <span class="keyword">if</span> (length != text.length) &#123;</span><br><span class="line">          <span class="keyword">var</span> start = text.substring(<span class="number">0</span>, (length / <span class="number">2</span>).round());</span><br><span class="line">          <span class="keyword">var</span> end = text.substring(text.length - start.length, text.length);</span><br><span class="line">          ellipsizedText = start + <span class="string">'...'</span> + end;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> Ellipsis.end:</span><br><span class="line">      <span class="keyword">if</span> (length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        ellipsizedText = text.substring(<span class="number">0</span>, length);</span><br><span class="line">        <span class="keyword">if</span> (length != text.length) &#123;</span><br><span class="line">          ellipsizedText = ellipsizedText + <span class="string">'...'</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  _textPainter.text = TextSpan(text: ellipsizedText, style: style);</span><br><span class="line">  _textPainter.layout(minWidth: minWidth, maxWidth: <span class="built_in">double</span>.infinity);</span><br><span class="line">  <span class="keyword">return</span> _textPainter.width;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>差不多就是这样了，我们剩下要做的就是——实际上画出我们的文本。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@override</span></span><br><span class="line"><span class="keyword">void</span> paint(PaintingContext context, Offset offset) &#123;</span><br><span class="line">  _textPainter.paint(context.canvas, offset);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.tech/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>flutter 启动屏幕使用 Lottie 动画</title>
    <link href="https://blog.ducafecat.tech/2021/05/27/translation/how-to-use-lottie-animation-in-your-flutter-splash-screen/"/>
    <id>https://blog.ducafecat.tech/2021/05/27/translation/how-to-use-lottie-animation-in-your-flutter-splash-screen/</id>
    <published>2021-05-26T16:00:00.000Z</published>
    <updated>2021-05-28T08:31:10.346Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-27-09-14-32.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="猫哥说"><a href="#猫哥说" class="headerlink" title="猫哥说"></a>猫哥说</h2><p>因为出差关系来了重庆，很美的一个城市，走在街道上感觉就是在爬山，生活节奏相对比较慢，希望疫情远离我们。</p><p>感谢群里重庆好友能抽时间出来聚会。</p><p>正题开始</p><p>lottie 是一个夸平台的动画库，用这个可以做出酷炫动画。</p><p>其实作为一个前端还是要稍微会一点点美术、动画、几何数学。</p><p><a href="https://lottiefiles.com/" target="_blank" rel="noopener">https://lottiefiles.com/</a></p><p><a href="https://github.com/airbnb/lottie-web" target="_blank" rel="noopener">https://github.com/airbnb/lottie-web</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-28-16-29-00.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-28-16-30-44.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-28-16-31-07.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="老铁记得-转发-，猫哥会呈现更多-Flutter-好文"><a href="#老铁记得-转发-，猫哥会呈现更多-Flutter-好文" class="headerlink" title="老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~"></a>老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~</h2><h2 id="微信-flutter-研修群-ducafecat"><a href="#微信-flutter-研修群-ducafecat" class="headerlink" title="微信 flutter 研修群 ducafecat"></a>微信 flutter 研修群 ducafecat</h2><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://mamuseferha.medium.com/how-to-use-lottie-animation-in-your-flutter-splash-screen-788f1380641d" target="_blank" rel="noopener">https://mamuseferha.medium.com/how-to-use-lottie-animation-in-your-flutter-splash-screen-788f1380641d</a></p></blockquote><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/debbsefe/Lottie-Animation-Splash-Screen" target="_blank" rel="noopener">https://github.com/debbsefe/Lottie-Animation-Splash-Screen</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://lottiefiles.com/" target="_blank" rel="noopener">https://lottiefiles.com/</a></li><li><a href="https://github.com/airbnb/lottie-web" target="_blank" rel="noopener">https://github.com/airbnb/lottie-web</a></li><li><a href="https://github.com/debbsefe/Lottie-Animation-Splash-Screen" target="_blank" rel="noopener">https://github.com/debbsefe/Lottie-Animation-Splash-Screen</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><p>在构建移动应用程序时，启动画面非常常见。它们通常是在应用程序开始时显示的静态屏幕。这个屏幕可以帮助你告诉你的用户应用程序是关于什么的，通过显示你的应用程序标志或应用程序名称。</p><p>如果你想更进一步，真正吸引用户的注意力，可以考虑在启动画面上使用动画图片。使用 Lottie 显示一个动画图像就像在你的应用程序中使用 Image 小部件一样简单。</p><h3 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h3><p>首先，创建一个新的 flutter 项目。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter pub add lottie</span><br></pre></td></tr></table></figure><p>通过粘贴以下代码创建启动画面小部件。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SplashScreen</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> SplashScreen(&#123;Key key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _SplashScreenState createState() =&gt; _SplashScreenState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_SplashScreenState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">SplashScreen</span>&gt;</span></span><br><span class="line"><span class="class">    <span class="title">with</span> <span class="title">TickerProviderStateMixin</span> </span>&#123;</span><br><span class="line">  AnimationController _controller;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    _controller = AnimationController(</span><br><span class="line">      duration: <span class="built_in">Duration</span>(seconds: (<span class="number">5</span>)),</span><br><span class="line">      vsync: <span class="keyword">this</span>,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      body: Lottie.asset(</span><br><span class="line">        <span class="string">'assets/splash_lottie.json'</span>,</span><br><span class="line">        controller: _controller,</span><br><span class="line">        height: MediaQuery.of(context).size.height * <span class="number">1</span>,</span><br><span class="line">        animate: <span class="keyword">true</span>,</span><br><span class="line">        onLoaded: (composition) &#123;</span><br><span class="line">          _controller</span><br><span class="line">            ..duration = composition.duration</span><br><span class="line">            ..forward().whenComplete(() =&gt; Navigator.pushReplacement(</span><br><span class="line">                  context,</span><br><span class="line">                  MaterialPageRoute(builder: (context) =&gt; HomePage()),</span><br><span class="line">                ));</span><br><span class="line">        &#125;,</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Splash screen 小部件是一个有状态小部件，它在其 build 方法中保存 Lottie 文件。动画控制器在 initState 中创建，并在控制器属性中使用。</p><p>若要在动画完成后导航到下一个页面，请使用带有 LottieComposition 的 onLoaded 回调。这允许您有更多的信息和控制的 Lottie 文件。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">onLoaded: (composition) &#123;</span><br><span class="line">  _controller</span><br><span class="line">  ..duration = composition.duration</span><br><span class="line">  ..forward().whenComplete(() =&gt; Navigator.pushReplacement(</span><br><span class="line">    context,</span><br><span class="line">    MaterialPageRoute(builder: (context) =&gt; HomePage()),));</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure><p>动画完成后，导航到下一页。</p><p>我在代码中添加了一个启动画面导航到的主页小部件。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HomePage</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      body: Center(child: Text(<span class="string">'Homepage'</span>)),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>以 scaffold 为中心的简单文本小部件。</p><p>现在你可以继续为你的用户创建更具视觉吸引力的应用了。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-27-09-02-46.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>不要忘记将 Lottie 文件作为资产添加到 pubspec.yaml 中，否则，动画将不会显示。你也可以在 GitHub 上找到完整的项目。</p><p><a href="https://github.com/debbsefe/Lottie-Animation-Splash-Screen" target="_blank" rel="noopener">https://github.com/debbsefe/Lottie-Animation-Splash-Screen</a></p><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.tech/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Dart 集合操作插件 DartX</title>
    <link href="https://blog.ducafecat.tech/2021/05/25/translation/dart-collections-with-dartx-extensions/"/>
    <id>https://blog.ducafecat.tech/2021/05/25/translation/dart-collections-with-dartx-extensions/</id>
    <published>2021-05-24T22:13:25.000Z</published>
    <updated>2021-05-25T00:33:14.767Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-25-08-07-06.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><blockquote><p>本次图片是向 kallehallden 致敬，热爱编程，保持一颗好奇的心</p></blockquote><h2 id="老铁记得-转发-，猫哥会呈现更多-Flutter-好文"><a href="#老铁记得-转发-，猫哥会呈现更多-Flutter-好文" class="headerlink" title="老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~"></a>老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~</h2><h2 id="微信-flutter-研修群-ducafecat"><a href="#微信-flutter-研修群-ducafecat" class="headerlink" title="微信 flutter 研修群 ducafecat"></a>微信 flutter 研修群 ducafecat</h2><h2 id="猫哥说"><a href="#猫哥说" class="headerlink" title="猫哥说"></a>猫哥说</h2><p>最近没时间录视频，一直在做项目和技术研究，就翻译和写写文章和大家分享。</p><p>关于这篇文章，我只想说一切让我们少写代码，让代码简洁的方式都是好东西！</p><p>也许这个组件 dartx 在某些人眼里不够成熟，但是这代表了一种思路，你应该去借鉴。</p><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://medium.com/flutter-community/dart-collections-with-dartx-extensions-959a0b42849e" target="_blank" rel="noopener">https://medium.com/flutter-community/dart-collections-with-dartx-extensions-959a0b42849e</a></p></blockquote><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/concepts/linq/linq-to-objects" target="_blank" rel="noopener">https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/concepts/linq/linq-to-objects</a></li><li><a href="https://pub.dev/packages/dartx" target="_blank" rel="noopener">https://pub.dev/packages/dartx</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><p>Darts Iterable 和 List 提供了一组基本的方法来修改和查询集合。然而，来自 c # 背景，它有一个非凡的 LINQ-to-Objects 库，我觉得我日常使用的一部分功能缺失了。当然，任何任务都可以只使用 dart.core 方法来解决，但有时需要多行解决方案，而且代码不是那么明显，需要花费精力去理解。我们都知道，开发人员花费大量时间阅读代码，使代码简洁明了是至关重要的。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-25-06-15-25.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>Dartx 包允许开发人员在集合(和其他 Dart 类型)上使用优雅且可读的单行操作。</p><p><a href="https://pub.dev/packages/dartx" target="_blank" rel="noopener">https://pub.dev/packages/dartx</a></p><p>下面我们将比较这些任务是如何解决的:</p><ul><li>first / last collection item or null / default value / by condition;</li><li>map / filter / iterate collection items depending on their index;</li><li>converting a collection to a map;</li><li>sorting collections;</li><li>collecting unique items;</li><li>min / max / average by items property;</li><li>filtering out null items;</li></ul><h3 id="安装-dartx-pubspec-yaml"><a href="#安装-dartx-pubspec-yaml" class="headerlink" title="安装 dartx pubspec.yaml"></a>安装 dartx <code>pubspec.yaml</code></h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dependencies:</span></span><br><span class="line"><span class="attr">  dartx:</span> <span class="string">^0.7.1</span></span><br></pre></td></tr></table></figure><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:dartx/dartx.dart'</span>;</span><br></pre></td></tr></table></figure><h3 id="First-last-collection-item…"><a href="#First-last-collection-item…" class="headerlink" title="First / last collection item…"></a>First / last collection item…</h3><h4 id="…-or-null"><a href="#…-or-null" class="headerlink" title="… or null"></a>… or null</h4><p>为了得到第一个和最后一个收集项目的简单省道，你可以这样写:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> first = list.first;</span><br><span class="line"><span class="keyword">final</span> last = list.last;</span><br></pre></td></tr></table></figure><p>如果 list 为空，则抛出 statereerror，或者显式返回 null:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> firstOrNull = list.isNotEmpty ? list.first : <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">final</span> lastOrNull = list.isNotEmpty ? list.last : <span class="keyword">null</span>;</span><br></pre></td></tr></table></figure><p>使用 dartx 可以:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> firstOrNull = list.firstOrNull;</span><br><span class="line"><span class="keyword">final</span> lastOrNull = list.lastOrNull;</span><br></pre></td></tr></table></figure><p>类似地:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> elementAtOrNull = list.elementAtOrNull(index);</span><br></pre></td></tr></table></figure><blockquote><p>如果索引超出列表的界限，则返回 null。</p></blockquote><h4 id="…-or-default-value"><a href="#…-or-default-value" class="headerlink" title="… or default value"></a>… or default value</h4><p>鉴于你现在记住这一点。第一和。当 list 为空时，last getter 会抛出错误，以获取第一个和最后一个集合项或默认值，在简单的 Dart 中，你会写:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> firstOrDefault = (list.isNotEmpty ? list.first : <span class="keyword">null</span>) ?? defaultValue;</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> lastOrDefault = (list.isNotEmpty ? list.last : <span class="keyword">null</span>) ?? defaultValue;</span><br></pre></td></tr></table></figure><p>使用 dartx 可以:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> firstOrDefault = list.firstOrDefault(defaultValue);</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> lastOrDefault = list.lastOrElse(defaultValue);</span><br></pre></td></tr></table></figure><p>类似于 elementAtOrNull:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> elementAtOrDefault = list.elementAtOrDefault(index, defaultValue);</span><br></pre></td></tr></table></figure><blockquote><p>如果索引超出列表的边界，则返回 defaultValue。</p></blockquote><h4 id="…-by-condition"><a href="#…-by-condition" class="headerlink" title="… by condition"></a>… by condition</h4><p>要获取第一个和最后一个符合某些条件或 null 的集合项，一个普通的 Dart 实现应该是:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> firstWhere = list.firstWhere((x) =&gt; x.matches(condition));</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> lastWhere = list.lastWhere((x) =&gt; x.matches(condition));</span><br></pre></td></tr></table></figure><p>除非提供 orElse，否则它将为空列表抛出 StateError:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> firstWhereOrNull = list.firstWhere((x) =&gt; x.matches(condition), orElse: () =&gt; <span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> lastWhereOrNull = list.lastWhere((x) =&gt; x.matches(condition), orElse: () =&gt; <span class="keyword">null</span>);</span><br></pre></td></tr></table></figure><p>使用 dartx 可以:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> firstWhereOrNull = list.firstOrNullWhere((x) =&gt; x.matches(condition));</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> lastWhereOrNull = list.lastOrNullWhere((x) =&gt; x.matches(condition));</span><br></pre></td></tr></table></figure><h3 id="…-collection-items-depending-on-their-index"><a href="#…-collection-items-depending-on-their-index" class="headerlink" title="… collection items depending on their index"></a>… collection items depending on their index</h3><h4 id="Map…"><a href="#Map…" class="headerlink" title="Map…"></a>Map…</h4><p>当您需要获得一个新的集合，其中每个项目以某种方式依赖于其索引时，这种情况并不罕见。例如，每个新项都是来自原始集合的项及其索引的字符串表示形式。</p><p>如果你喜欢我的一句俏皮话，简单地说就是:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> newList = list.asMap()</span><br><span class="line">  .map((index, x) =&gt; MapEntry(index, <span class="string">'$index $x'</span>))</span><br><span class="line">  .values</span><br><span class="line">  .toList();</span><br></pre></td></tr></table></figure><p>使用 dartx 可以:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> newList = list.mapIndexed((index, x) =&gt; <span class="string">'$index $x'</span>).toList();</span><br></pre></td></tr></table></figure><blockquote><p>我应用.toList ()是因为这个和大多数其他扩展方法返回 lazy Iterable。</p></blockquote><h4 id="Filter…"><a href="#Filter…" class="headerlink" title="Filter…"></a>Filter…</h4><p>对于另一个示例，假设只需要收集奇数索引项。使用简单省道，可以这样实现:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> oddItems = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; list.length; i++) &#123;</span><br><span class="line">  <span class="keyword">if</span> (i.isOdd) &#123;</span><br><span class="line">    oddItems.add(list[i]);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>或者用一行代码:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> oddItems = list.asMap()</span><br><span class="line">  .entries</span><br><span class="line">  .where((entry) =&gt; entry.key.isOdd)</span><br><span class="line">  .map((entry) =&gt; entry.value)</span><br><span class="line">  .toList();</span><br></pre></td></tr></table></figure><p>使用 dartx 可以:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> oddItems = list.whereIndexed((x, index) =&gt; index.isOdd).toList();</span><br><span class="line"></span><br><span class="line"><span class="comment">// or</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> oddItems = list.whereNotIndexed((x, index) =&gt; index.isEven).toList();</span><br></pre></td></tr></table></figure><h3 id="Iterate…"><a href="#Iterate…" class="headerlink" title="Iterate…"></a>Iterate…</h3><p>如何记录集合内容并指定项目索引？</p><p>In plain Dart:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; list.length; i++) &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'$i: <span class="subst">$&#123;list[i]&#125;</span>'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用 dartx 可以:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">list.forEachIndexed((element, index) =&gt; <span class="built_in">print</span>(<span class="string">'$index: $element'</span>));</span><br></pre></td></tr></table></figure><h3 id="Converting-a-collection-to-a-map"><a href="#Converting-a-collection-to-a-map" class="headerlink" title="Converting a collection to a map"></a>Converting a collection to a map</h3><p>例如，需要将不同 Person 对象的列表转换为 Map &lt; String，Person &gt; ，其中键是 Person.id，值是完整 Person 实例。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> peopleMap = people.asMap().map((index, person) =&gt; MapEntry(person.id, person));</span><br></pre></td></tr></table></figure><p>使用 dartx 可以:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> peopleMap = people.associate((person) =&gt; MapEntry(person.id, person));</span><br><span class="line"></span><br><span class="line"><span class="comment">// or</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> peopleMap = people.associateBy((person) =&gt; person.id);</span><br></pre></td></tr></table></figure><p>要得到一个 Map，其中键是 DateTime，值是列出那天出生的人的名单 &lt; person &gt; ，在简单的 Dart 中，你可以写:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> peopleMapByBirthDate = people.fold&lt;<span class="built_in">Map</span>&lt;<span class="built_in">DateTime</span>, <span class="built_in">List</span>&lt;Person&gt;&gt;&gt;(</span><br><span class="line">  &lt;<span class="built_in">DateTime</span>, <span class="built_in">List</span>&lt;Person&gt;&gt;&#123;&#125;,</span><br><span class="line">  (map, person) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!map.containsKey(person.birthDate)) &#123;</span><br><span class="line">      map[person.birthDate] = &lt;Person&gt;[];</span><br><span class="line">    &#125;</span><br><span class="line">    map[person.birthDate].add(person);</span><br><span class="line">    <span class="keyword">return</span> map;</span><br><span class="line">  &#125;,</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>使用 dartx 可以:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> peopleMapByBirthDate = people.groupBy((person) =&gt; person.birthDate);</span><br></pre></td></tr></table></figure><h3 id="Sorting-collections"><a href="#Sorting-collections" class="headerlink" title="Sorting collections"></a>Sorting collections</h3><p>你会怎样用普通的 dart 来分类一个收集? 你必须记住这一点</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">list.sort();</span><br></pre></td></tr></table></figure><p>修改源集合，要得到一个新实例，你必须写:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> orderedList = [...list].sort();</span><br></pre></td></tr></table></figure><p>Dartx 提供了一个扩展来获得一个新的 List 实例:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> orderedList = list.sorted();</span><br><span class="line"></span><br><span class="line"><span class="comment">// and</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> orderedDescendingList = list.sortedDescending();</span><br></pre></td></tr></table></figure><p>如何基于某些属性对收集项进行排序？</p><p>Plain Dart:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> orderedPeople = [...people]</span><br><span class="line">  ..sort((person1, person2) =&gt; person1.birthDate.compareTo(person2.birthDate));</span><br></pre></td></tr></table></figure><p>使用 dartx 可以:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> orderedPeople = people.sortedBy((person) =&gt; person.birthDate);</span><br><span class="line"></span><br><span class="line"><span class="comment">// and</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> orderedDescendingPeople = people.sortedByDescending((person) =&gt; person.birthDate);</span><br></pre></td></tr></table></figure><p>更进一步，你可以通过多个属性对集合项进行排序:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> orderedPeopleByAgeAndName = people</span><br><span class="line">  .sortedBy((person) =&gt; person.birthDate)</span><br><span class="line">  .thenBy((person) =&gt; person.name);</span><br><span class="line"></span><br><span class="line"><span class="comment">// and</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> orderedDescendingPeopleByAgeAndName = people</span><br><span class="line">  .sortedByDescending((person) =&gt; person.birthDate)</span><br><span class="line">  .thenByDescending((person) =&gt; person.name);</span><br></pre></td></tr></table></figure><h3 id="Collecting-unique-items"><a href="#Collecting-unique-items" class="headerlink" title="Collecting unique items"></a>Collecting unique items</h3><p>要获得不同的集合项，可以使用以下简单的 Dart 实现:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> unique = list.toSet().toList();</span><br></pre></td></tr></table></figure><p>这并不保证保持项目顺序或提出一个多行的解决方案</p><p>使用 dartx 可以:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> unique = list.distinct().toList();</span><br><span class="line"></span><br><span class="line"><span class="comment">// and</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> uniqueFirstNames = people.distinctBy((person) =&gt; person.firstName).toList();</span><br></pre></td></tr></table></figure><h3 id="Min-max-average-by-item-property"><a href="#Min-max-average-by-item-property" class="headerlink" title="Min / max / average by item property"></a>Min / max / average by item property</h3><p>例如，要查找一个 min/max 集合项，我们可以对其进行排序，并获取 first/last 项:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> min = ([...list]..sort()).first;</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> max = ([...list]..sort()).last;</span><br></pre></td></tr></table></figure><p>同样的方法也适用于按项属性进行排序:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> minAge = (people.map((person) =&gt; person.age).toList()..sort()).first;</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> maxAge = (people.map((person) =&gt; person.age).toList()..sort()).last;</span><br></pre></td></tr></table></figure><p>或:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> youngestPerson =</span><br><span class="line">  ([...people]..sort((person1, person2) =&gt; person1.age.compareTo(person2.age))).first;</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> oldestPerson =</span><br><span class="line">  ([...people]..sort((person1, person2) =&gt; person1.age.compareTo(person2.age))).last;</span><br></pre></td></tr></table></figure><p>使用 dartx 可以:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> youngestPerson = people.minBy((person) =&gt; person.age);</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> oldestPerson = people.maxBy((person) =&gt; person.age);</span><br></pre></td></tr></table></figure><p>对于空集合，它将返回 null。</p><p>如果收集项目实现了 Comparable，则可以应用不带选择器的方法:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> min = list.min();</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> max = list.max();</span><br></pre></td></tr></table></figure><p>你也可以很容易地得到平均值:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> average = list.average();</span><br><span class="line"></span><br><span class="line"><span class="comment">// and</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> averageAge = people.averageBy((person) =&gt; person.age);</span><br></pre></td></tr></table></figure><p>以及 num 集合或 num 项属性的总和:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> sum = list.sum();</span><br><span class="line"></span><br><span class="line"><span class="comment">// and</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> totalChildrenCount = people.sumBy((person) =&gt; person.childrenCount);</span><br></pre></td></tr></table></figure><h3 id="Filtering-out-null-items"><a href="#Filtering-out-null-items" class="headerlink" title="Filtering out null items"></a>Filtering out null items</h3><p>With plain Dart:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> nonNullItems = list.where((x) =&gt; x != <span class="keyword">null</span>).toList();</span><br></pre></td></tr></table></figure><p>使用 dartx 可以:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> nonNullItems = list.whereNotNull().toList();</span><br></pre></td></tr></table></figure><h3 id="More-useful-extensions"><a href="#More-useful-extensions" class="headerlink" title="More useful extensions"></a>More useful extensions</h3><p>在 dartx 中还有其他有用的扩展。这里我们不会深入讨论更多细节，但是我希望命名和代码是不言自明的。</p><h4 id="joinToString"><a href="#joinToString" class="headerlink" title="joinToString"></a>joinToString</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> report = people.joinToString(</span><br><span class="line">  separator: <span class="string">'\n'</span>,</span><br><span class="line">  transform: (person) =&gt; <span class="string">'<span class="subst">$&#123;person.firstName&#125;</span>_<span class="subst">$&#123;person.lastName&#125;</span>'</span>,</span><br><span class="line">  prefix: <span class="string">'&lt;&lt;️'</span>,</span><br><span class="line">  postfix: <span class="string">'&gt;&gt;'</span>,</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h4 id="all-every-none"><a href="#all-every-none" class="headerlink" title="all (every) / none"></a>all (every) / none</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> allAreAdults = people.all((person) =&gt; person.age &gt;= <span class="number">18</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> allAreAdults = people.none((person) =&gt; person.age &lt; <span class="number">18</span>);</span><br></pre></td></tr></table></figure><h4 id="first-second-third-fourth-collection-items"><a href="#first-second-third-fourth-collection-items" class="headerlink" title="first / second / third / fourth collection items"></a>first / second / third / fourth collection items</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> first = list.first;</span><br><span class="line"><span class="keyword">final</span> second = list.second;</span><br><span class="line"><span class="keyword">final</span> third = list.third;</span><br><span class="line"><span class="keyword">final</span> fourth = list.fourth;</span><br></pre></td></tr></table></figure><h4 id="takeFirst-takeLast"><a href="#takeFirst-takeLast" class="headerlink" title="takeFirst / takeLast"></a>takeFirst / takeLast</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> youngestPeople = people.sortedBy((person) =&gt; person.age).takeFirst(<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> oldestPeople = people.sortedBy((person) =&gt; person.age).takeLast(<span class="number">5</span>);</span><br></pre></td></tr></table></figure><h4 id="firstWhile-lastWhile"><a href="#firstWhile-lastWhile" class="headerlink" title="firstWhile / lastWhile"></a>firstWhile / lastWhile</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> orderedPeopleUnder50 = people</span><br><span class="line">  .sortedBy((person) =&gt; person.age)</span><br><span class="line">  .firstWhile((person) =&gt; person.age &lt; <span class="number">50</span>)</span><br><span class="line">  .toList();</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> orderedPeopleOver50 = people</span><br><span class="line">  .sortedBy((person) =&gt; person.age)</span><br><span class="line">  .lastWhile((person) =&gt; person.age &gt;= <span class="number">50</span>)</span><br><span class="line">  .toList();</span><br></pre></td></tr></table></figure><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>Dartx 包包含了许多针对 Iterable、 List 和其他 Dart 类型的扩展。探索其功能的最佳方式是浏览源代码。</p><p><a href="https://github.com/leisim/dartx" target="_blank" rel="noopener">https://github.com/leisim/dartx</a></p><p>感谢软件包作者 Simon Leier 和 Pascal Welsch。</p><p><a href="https://www.linkedin.com/in/simon-leier/" target="_blank" rel="noopener">https://www.linkedin.com/in/simon-leier/</a></p><p><a href="https://twitter.com/passsy" target="_blank" rel="noopener">https://twitter.com/passsy</a></p><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ducafecat.tech/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>使用 Flutter WEB 实现桌面 GUI 第1部分 介绍</title>
    <link href="https://blog.ducafecat.tech/2021/05/24/translation/desktop-gui-implementation-using-flutter-web-part-1-introduction/"/>
    <id>https://blog.ducafecat.tech/2021/05/24/translation/desktop-gui-implementation-using-flutter-web-part-1-introduction/</id>
    <published>2021-05-23T16:00:00.000Z</published>
    <updated>2021-05-24T02:17:32.272Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-24-10-17-04.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="老铁记得-转发-，猫哥会呈现更多-Flutter-好文"><a href="#老铁记得-转发-，猫哥会呈现更多-Flutter-好文" class="headerlink" title="老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~"></a>老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~</h2><h2 id="微信-flutter-研修群-ducafecat"><a href="#微信-flutter-研修群-ducafecat" class="headerlink" title="微信 flutter 研修群 ducafecat"></a>微信 flutter 研修群 ducafecat</h2><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://achraf-feydi.medium.com/desktop-gui-implementation-using-flutter-web-part-1-introduction-42d21a6e7937" target="_blank" rel="noopener">https://achraf-feydi.medium.com/desktop-gui-implementation-using-flutter-web-part-1-introduction-42d21a6e7937</a></p></blockquote><h2 id="演示"><a href="#演示" class="headerlink" title="演示"></a>演示</h2><p><a href="https://www.fluttergui.com/" target="_blank" rel="noopener">https://www.fluttergui.com/</a></p><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/achreffaidi/FlutterGUI" target="_blank" rel="noopener">https://github.com/achreffaidi/FlutterGUI</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://pub.dev/packages/flutter_treeview" target="_blank" rel="noopener">https://pub.dev/packages/flutter_treeview</a></li><li><a href="https://pub.dev/packages/reorderables" target="_blank" rel="noopener">https://pub.dev/packages/reorderables</a></li><li><a href="https://pub.dev/packages/video_player" target="_blank" rel="noopener">https://pub.dev/packages/video_player</a></li><li><a href="https://pub.dev/packages/flutter_simple_calculator" target="_blank" rel="noopener">https://pub.dev/packages/flutter_simple_calculator</a></li><li><a href="https://pub.dev/packages/photo_view" target="_blank" rel="noopener">https://pub.dev/packages/photo_view</a></li><li><a href="https://pub.dev/packages/maze" target="_blank" rel="noopener">https://pub.dev/packages/maze</a></li><li><a href="https://pub.dev/packages/flutter_widget_from_html_core" target="_blank" rel="noopener">https://pub.dev/packages/flutter_widget_from_html_core</a></li><li><a href="https://pub.dev/packages/native_pdf_view" target="_blank" rel="noopener">https://pub.dev/packages/native_pdf_view</a></li><li><a href="https://pub.dev/packages/painter" target="_blank" rel="noopener">https://pub.dev/packages/painter</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><h3 id="Why-FlutterGUI"><a href="#Why-FlutterGUI" class="headerlink" title="Why FlutterGUI?"></a>Why FlutterGUI?</h3><p>作为 flutter2 的一部分，flutter 已经宣布，flutter 的网络支持已达到稳定的里程碑。</p><p>这不仅意味着我终于可以停止编写 HTML 和 CSS 代码，而且我现在可以拥有一个可以在几乎所有流行平台上运行的应用程序。</p><p>我对 Flutter Web 的稳定版本并没有太多期待，因为我已经尝试了 Beta 版，而且大多数插件都没有足够的支持。但是回到两周前，我对目前支持 WEB 的插件的数量感到惊讶。</p><p>这促使我去尝试一些有挑战性的东西，创建一个桌面图形用户界面使用颤振网络作为我的新的投资组合网站。</p><p>坦率地说，这个项目本身并不是什么有用的东西，它不是在解决问题，而且很可能也不是我下一个十亿美元的想法。但是，这是最好的方式来发现的优势和局限性颤振网络使用在一个网络项目。说实话，我想我至少要花两个月的时间来发布第一个版本。</p><p>在这个项目上花了两个星期的时间，每晚工作两个小时左右，我最终得到了一些真正值得出版的东西。</p><p>尽管我没有阅读任何文档，也没有像平时那样频繁地用谷歌搜索东西，但我还是对这种简单流畅的体验感到惊讶。从使用 Flutter 手机开发到网络的转变真的很简单，而且我在这个项目中学到的关于网络开发的知识并不需要使用任何东西。</p><h3 id="Technical-overview"><a href="#Technical-overview" class="headerlink" title="Technical overview"></a>Technical overview</h3><ul><li><p>Project 现在有 8 个应用程序运行在它里面，正如你已经猜到的: 它是所有的小部件。</p></li><li><p>大多数应用程序是现有的颤振插件，包装在我创建的通用应用部件内部。</p></li><li><p>这个码头是从零开始建造的，因为我找不到一个能满足我需要的现有码头。</p></li><li><p>项目没有后端，Flutter Web 应用程序托管在 Github 页面上。</p></li><li><p>我正在使用 Firebase 分析跟踪用户的互动与应用程序。</p></li></ul><h3 id="Apps"><a href="#Apps" class="headerlink" title="Apps"></a>Apps</h3><ul><li>文件管理器: 用 flutter_treeview 颤振树景 and 及 reorderables 可调整的 plugins. 插件</li></ul><p><a href="https://pub.dev/packages/flutter_treeview" target="_blank" rel="noopener">https://pub.dev/packages/flutter_treeview</a></p><p><a href="https://pub.dev/packages/reorderables" target="_blank" rel="noopener">https://pub.dev/packages/reorderables</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-24-10-08-28.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>视频播放器: 使用 video_player 视频播放器 plugin. 插件</li></ul><p><a href="https://pub.dev/packages/video_player" target="_blank" rel="noopener">https://pub.dev/packages/video_player</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-24-10-08-55.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>计算器: 使用 flutter_simple_calculator 简单计算器 plugin. 插件</li></ul><p><a href="https://pub.dev/packages/flutter_simple_calculator" target="_blank" rel="noopener">https://pub.dev/packages/flutter_simple_calculator</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-24-10-09-18.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>照片: 使用 photo_view 照片查看 plugin. 插件</li></ul><p><a href="https://pub.dev/packages/photo_view" target="_blank" rel="noopener">https://pub.dev/packages/photo_view</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-24-10-09-43.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>游戏: 使用 Maze 梅兹 plugin. 插件</li></ul><p><a href="https://pub.dev/packages/maze" target="_blank" rel="noopener">https://pub.dev/packages/maze</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-24-10-10-03.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>阅读器: 使用 flutter_widget_from_html_core 从 html 核心 plugin. 插件</li></ul><p><a href="https://pub.dev/packages/flutter_widget_from_html_core" target="_blank" rel="noopener">https://pub.dev/packages/flutter_widget_from_html_core</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-24-10-10-36.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>PDF 阅读器: 使用 native_pdf_view 本地 pdf 查看 plugin. 插件</li></ul><p><a href="https://pub.dev/packages/native_pdf_view" target="_blank" rel="noopener">https://pub.dev/packages/native_pdf_view</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-24-10-11-00.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>画家: 使用 painter 画家 plugin. 插件</li></ul><p><a href="https://pub.dev/packages/painter" target="_blank" rel="noopener">https://pub.dev/packages/painter</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-24-10-11-31.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>在 Dart 和 Flutter 中探索异步编程</title>
    <link href="https://blog.ducafecat.tech/2021/05/21/translation/exploring-asynchronous-programming-in-dart-flutter/"/>
    <id>https://blog.ducafecat.tech/2021/05/21/translation/exploring-asynchronous-programming-in-dart-flutter/</id>
    <published>2021-05-20T16:00:00.000Z</published>
    <updated>2021-05-21T01:00:02.219Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-21-09-00-00.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="老铁记得-转发-，猫哥会呈现更多-Flutter-好文"><a href="#老铁记得-转发-，猫哥会呈现更多-Flutter-好文" class="headerlink" title="老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~"></a>老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~</h2><h2 id="微信-flutter-研修群-ducafecat"><a href="#微信-flutter-研修群-ducafecat" class="headerlink" title="微信 flutter 研修群 ducafecat"></a>微信 flutter 研修群 ducafecat</h2><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://medium.com/flutterdevs/exploring-asynchronous-programming-in-dart-flutter-25f341af32f" target="_blank" rel="noopener">https://medium.com/flutterdevs/exploring-asynchronous-programming-in-dart-flutter-25f341af32f</a></p></blockquote><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-21-08-37-45.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>异步编程是一种相等的编程类型，它允许一个工作单元独立于基本的应用程序线程运行。当工作完成时，它告诉主线程。在 Flutter 结构中可访问的 UI 小部件利用 Dart 的异步编程亮点来达到非同寻常的效果，帮助保持代码的协调性，并防止 UI 在客户端上的安全性。</p><p>在这个博客中，我们将探索在 Dart &amp; Flutter 中的异步编程。我们将看看异步代码模式如何帮助准备用户交互和从网络恢复数据，并在您的 Flutter 应用程序中看到几个异步 Flutter 小部件的行动。</p><h3 id="异步编程"><a href="#异步编程" class="headerlink" title="异步编程"></a>异步编程</h3><p>它是一种在编程周期中附加在事件链上的相等执行类型。对于那些刚刚接触异步编程的人来说，这是另一种加速改进周期的技术。尽管如此，我们不能在所有实例上使用异步编程。当你在寻找直率而不是生产力的时候，它是有效的。为了处理基本的、自治的信息，异步编程是一个非同寻常的决定。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-21-08-41-53.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>various perspectives 是理想的对应物 Flutter 从各种角度，在任何事件，为异步编程。即使 Dart 是单线程的，它也可以与不同的代码相关联，这些代码运行在不连续的线程中。使用 Dart 中的同步代码会造成延迟并阻碍整个程序的执行。尽管如此，异步编程解决了这个问题。此外，这提示改进了应用程序的执行和应用程序的响应性。</p><h3 id="为什么我们应该使用异步编程"><a href="#为什么我们应该使用异步编程" class="headerlink" title="为什么我们应该使用异步编程"></a>为什么我们应该使用异步编程</h3><p>面是异步编程的一些应用:</p><ul><li><p>改善工作表现及提高工作效率 反应性. 你的应用程序，特别是当你有长期运行的活动，不需要阻止执行。对于这种情况，您可以在等待长期任务的结果的同时执行其他工作</p></li><li><p>以一种完美的、易于理解的方式组装代码，从根本上比传统线程创建的标准代码更好，并且更好地处理代码，你编写更少的代码，你的代码将比利用过去的异步编程策略，如利用纯赋值更可行</p></li><li><p>您可以使用语言高亮部分的最新升级，如 async / await was presented in a flutter. 在一阵颤动中显现出来</p></li><li><p>对元素进行了一些改进，比如对每个 async 进行了改进，对 async 类型进行了总结，比如 Value.</p></li></ul><h3 id="Future"><a href="#Future" class="headerlink" title="Future"></a>Future</h3><p>未来的工作方式基本上与 Javascript 中的 Promise 相同。它有两个表达是未完成和已完成。完成的未来要么有价值，要么有错误。未完成的未来是等待函数的异步活动完成或抛出错误。</p><p>这个类有几个构造函数:</p><ul><li><p>Future. 意味着将 Duration 对象作为展示延迟后执行的时间跨度和函数的竞争对象</p></li><li><p>编码内存缓存意味着在内存中以原始状态存储压缩图片</p></li><li><p>Future. 意味着使未来以错误结束</p></li></ul><h3 id="使用-Await-Async"><a href="#使用-Await-Async" class="headerlink" title="使用 Await/Async"></a>使用 Await/Async</h3><p>Dart 中的异步和等待方法基本上与不同的方言相同，但是，不管您是否对异步编程利用异步/等待有所了解，您都应该认为在这里很容易理解。</p><p>=&gt; Async 函数: 函数构成了异步编程的基础。这些异步函数的主体中有异步修饰符。下面是一个关于综合异步工作的例子:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> flutter() <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'Flutter Devs'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>=&gt; Await 表达式: 它使您编写异步代码就像它是同步的一样。总而言之，等待发音具有下面给出的结构:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main() <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="keyword">await</span> flutter();</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'flutter Devs done'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="用户交互事件"><a href="#用户交互事件" class="headerlink" title="用户交互事件"></a>用户交互事件</h3><p>也许异步处理用户输入的最简单模型是用回调来响应按钮小部件上的连接事件:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">FlatButton(</span><br><span class="line">  child: Text(<span class="string">"Data"</span>),</span><br><span class="line">  onPressed: () &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"pressed button"</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>和大多数 Flutter 组件一样，FlatButton 组件提供了一个舒适的界面，称为 onPressed，用于响应速度快的按钮。在这里，我们已经将一个神秘的回调容量传递给了边界，它除了向控制台打印消息之外什么也不做。当客户端按下 catch 时，onPressed 事件被关闭，当偶然循环可以到达时，将执行未知函数。</p><p>在后台，有一个事件流，每次向其添加另一个事件时，都会使用任何相关信息调用回调工作。对于这种情况，基本的 catch 按钮没有相关信息，因此回调没有边界。</p><h3 id="使用回调的异步网络调用"><a href="#使用回调的异步网络调用" class="headerlink" title="使用回调的异步网络调用"></a>使用回调的异步网络调用</h3><p>也许异步编程最著名的例子包括通过网络获取信息，例如，通过 HTTP 上的 REST 服务:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:http/http.dart'</span> <span class="keyword">as</span> http;<span class="keyword">final</span> future = http.<span class="keyword">get</span>(<span class="string">"https://flutterdevs.com"</span>);future.then((response) &#123;</span><br><span class="line">  <span class="keyword">if</span> (response.statusCode == <span class="number">200</span>) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Response received."</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>Http 包是 Dart 的包回购中最著名的一个，Pub。我在这里合并了一个导入断言，以引起对使用作为关键字的 http 名称命名导入的平均例子的注意。这些助手保持包的许多高级函数、常量和因子不与您的代码发生冲突，就像澄清像 get ()这样的函数从何而来一样。</p><p>代码模型展示了吞噬未来的经典例子。当调用 http.get ()时，对它的调用立即返回一个不适当的 Future 示例。回想一下，通过 HTTP 获得结果需要很大的能量，我们不需要在旁观时让应用程序保持惰性。这就是我们立即将未来移回来并继续执行以下代码行的原因。这些下一行使用了 Future 示例的 at that then ()策略来获得一个回调函数，这个回调函数迟早会在 REST 反应出现时执行。万一不可避免的响应 HTTP 状态码为 200(成功) ，我们可以向调试控制台打印一条直截了当的消息。</p><p>我们把这个例子改进一下怎么样。这个模型将未来存储在最后一个变量中，然后得到 then () ，但是除非你有一个有效的理由来保留这个未来案例，否则跳过这个部分是平均的，就像在相应的模型中一样:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">http.<span class="keyword">get</span>(<span class="string">"https://flutterdevs.com"</span>).then((response) &#123;</span><br><span class="line">  <span class="keyword">if</span> (response.statusCode == <span class="number">200</span>) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Response received."</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Response not received"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>由于对 get ()的调用会对 Future 采取步骤，因此您可以直接调用它的 then ()策略，而不需要在变量中保存将来的引用。这些代码在这些行上稍微简化了一点，但同时又可以破译。将一些有价值的回收注册链接到我们的未来是可行的，例如:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">http.<span class="keyword">get</span>(<span class="string">"https://flutterdevs.com"</span>).then((response) &#123;</span><br><span class="line">  <span class="keyword">if</span> (response.statusCode == <span class="number">200</span>) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Response received."</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Response not received"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;).catchError(() &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">"Error!"</span>);</span><br><span class="line">&#125;).whenComplete(() &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">"Future complete."</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>目前我们已经设置了一个回调函数，当 HTTP 调用关闭时将执行一个错误，而不是使用 catchError 的响应，另一个回调函数将运行时不会考虑未来如何利用 whenComplete ()完成。这种搭售的技巧是可以想象的，因为每一种策略都会给我们的未来带来参考。</p><h3 id="没有回调的异步网络调用"><a href="#没有回调的异步网络调用" class="headerlink" title="没有回调的异步网络调用"></a>没有回调的异步网络调用</h3><p>Dart 提供了一个解决异步调用的替代例子，这个例子看起来更像习惯的同步代码，它可以使仔细阅读和推理变得更加简单。异步/等待标点符号为你处理了大量的未来物流:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Future&lt;<span class="built_in">String</span>&gt; getData() <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="keyword">final</span> response = <span class="keyword">await</span> http.<span class="keyword">get</span>(<span class="string">"https://flutterdevs.com"</span>);</span><br><span class="line">  <span class="keyword">return</span> response.body;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当您意识到将在函数内部执行异步调用时，例如 http.get () ，您可以使用 async 关键字对函数进行戳记。异步工作一致地返回未来，您可以利用其主体中的 await 关键字。对于这种情况，我们认识到 REST 调用将返回字符串信息，因此我们在返回类型上使用泛型来表示: Future &lt; string &gt; 。</p><p>你可以等待任何返回未来的函数。getData ()函数将在等待清晰运行之后挂起执行，并将未来返回给调用者。代码紧密地等待反应; 它等待网络调用的未来完成。然后，当反应出现荒谬时，执行继续，并将 Response 对象指定为最后一个因子，然后 getData ()返回 Response.body，这是一个字符串。您不必从 getData ()中明确返回 future，因为这样做的结果是返回了 await 的主要用途。当你有了字符串信息，你返回它，然后达特用价值结束未来。</p><blockquote><p>为了在使用 await 时捕捉错误，你可以使用 Dart 的标准 try/catch 包括:</p></blockquote><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Future&lt;<span class="built_in">String</span>&gt; getData() <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> response = <span class="keyword">await</span> http.<span class="keyword">get</span>(<span class="string">"https://flutterdevs.com"</span>);</span><br><span class="line">    <span class="keyword">return</span> response.body;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (excute) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Error: $excute"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在这个版本中，我们放置的代码，可以抛出豁免到 try 块。在一切都很容易的情况下，我们将得到一个响应并返回字符串信息，类似于在早期模型中。如果出现错误，catch 块将执行所有考虑过的内容，并向我们传递一个对豁免的引用。由于我们没有向 getData ()的最大限度添加明确的返回公告，Dart 将在那里添加一个特定的返回 null 语句，这将以 null 值结束未来。</p><blockquote><p>请注意，如果网络调用成功，则在 try 块中会发生返回，因此不会调用隐含的返回。</p></blockquote><p>回调函数有它们的用途，并且它们可以成为处理简单情况下的异步通信的一种特殊方法，例如，响应一个客户机挤压捕获。对于更多混乱的情况，例如，当你需要安排一些异步调用，每个异步调用都依赖于先前调用的结果，Dart 的异步/等待语法结构可以帮助你尽量不去安排回调，这里或那里暗指回调地狱之火。</p><h3 id="FutureBuilder"><a href="#FutureBuilder" class="headerlink" title="FutureBuilder"></a>FutureBuilder</h3><p>一个 FutureBuilder 根据给定的未来条件来组装自己。对于这个模型，我们应该期望您有一个名为 getData ()的函数，它返回 Future &lt; string &gt; 。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyStatelessWidget</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> FutureBuilder(</span><br><span class="line">      future: getData(),</span><br><span class="line">      builder: (BuildContext context, AsyncSnapshot snapshot) &#123;</span><br><span class="line">        <span class="keyword">if</span> (snapshot.connectionState == ConnectionState.waiting) &#123;</span><br><span class="line">          <span class="keyword">return</span> CircularProgressIndicator();</span><br><span class="line">        &#125;        <span class="keyword">if</span> (snapshot.hasData) &#123;</span><br><span class="line">          <span class="keyword">return</span> Text(snapshot.data);</span><br><span class="line">        &#125;        <span class="keyword">return</span> Container();</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这个定制的无状态小部件返回一个 FutureBuilder，如果 getData ()返回的 future 还没有结束，它将显示一个 advancement 指针，如果 future 已经结束，它将显示这个信息。万一这两样东西都不正确，一个空的容器就会被全面考虑。你建议 FutureBuilder 关注未来的边界，这时给它一个每次修改都需要的构建工作。构建回调获得典型的 BuildContext 争用，这是所有 Flutter 构建活动的正常情况，它同样获得 AsyncSnapshot 的出现，您可以使用 AsyncSnapshot 检查未来的状态并恢复任何信息。</p><p>这种方法有一个问题。根据 FutureBuilder 的官方文档，在构建步骤之前已经准备好了未来的必需品。</p><blockquote><p>为了解决这个问题，我们需要使用一个有状态小部件来代替:</p></blockquote><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyStatefulWidget</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _MyStatefulWidgetState createState() =&gt; _MyStatefulWidgetState();</span><br><span class="line">&#125;<span class="class"><span class="keyword">class</span> <span class="title">_MyStatefulWidgetState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">MyStatefulWidget</span>&gt; </span>&#123;</span><br><span class="line">  Future&lt;<span class="built_in">String</span>&gt; _dataFuture;  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="keyword">super</span>.initState();    _dataFuture = getData();</span><br><span class="line">  &#125;  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> FutureBuilder(</span><br><span class="line">      future: _dataFuture,</span><br><span class="line">      builder: (BuildContext context, AsyncSnapshot snapshot) &#123;</span><br><span class="line">        <span class="keyword">if</span> (snapshot.connectionState == ConnectionState.waiting) &#123;</span><br><span class="line">          <span class="keyword">return</span> CircularProgressIndicator();</span><br><span class="line">        &#125;        <span class="keyword">if</span> (snapshot.hasData) &#123;</span><br><span class="line">          <span class="keyword">return</span> Text(snapshot.data);</span><br><span class="line">        &#125;        <span class="keyword">return</span> Container();</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这个小部件的改编在 initState ()期间获得了未来的信息。创建小部件的状态对象时，将精确地调用 initState ()技术一次。</p><h3 id="StreamBuilder"><a href="#StreamBuilder" class="headerlink" title="StreamBuilder"></a>StreamBuilder</h3><p>流类似于事件管道。信息或错误事件朝向一边，它们被传递给另一边的侦听器。当您为 StreamBuilder 提供对当前流的引用时，它会因此订阅和提取，以刷新至关重要的内容，并且它依赖于需要成为管道的任何信息来组装自己。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyStatelessWidget</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> Stream&lt;<span class="built_in">String</span>&gt; dataStream;  <span class="keyword">const</span> MyStatelessWidget(&#123;Key key, <span class="keyword">this</span>.dataStream&#125;) : <span class="keyword">super</span>(key: key);  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> StreamBuilder&lt;ConnectionState&gt;(</span><br><span class="line">      stream: dataStream,</span><br><span class="line">      builder: (BuildContext context, AsyncSnapshot&lt;ConnectionState&gt; snapshot) &#123;</span><br><span class="line">        <span class="keyword">if</span> (snapshot.connectionState == ConnectionState.waiting) &#123;</span><br><span class="line">          <span class="keyword">return</span> CircularProgressIndicator();</span><br><span class="line">        &#125;        <span class="keyword">if</span> (snapshot.hasData) &#123;</span><br><span class="line">          <span class="keyword">return</span> Text(snapshot.data);</span><br><span class="line">        &#125;        <span class="keyword">return</span> Container();</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>本文介绍了 Flutter 基本结构的“dart 与 Flutter 中的异步编程”，您可以根据自己的选择修改该代码。这是一个小的介绍在 dart 和 flutter 异步编程用户交互从我这边，它的工作使用 flutter。</p><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 2.2 升级了哪些东西？</title>
    <link href="https://blog.ducafecat.tech/2021/05/20/translation/whats-new-in-flutter-2-2/"/>
    <id>https://blog.ducafecat.tech/2021/05/20/translation/whats-new-in-flutter-2-2/</id>
    <published>2021-05-19T16:00:00.000Z</published>
    <updated>2021-05-20T00:59:42.740Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-20-08-59-40.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="老铁记得-转发-，猫哥会呈现更多-Flutter-好文"><a href="#老铁记得-转发-，猫哥会呈现更多-Flutter-好文" class="headerlink" title="老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~"></a>老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~</h2><h2 id="微信-flutter-研修群-ducafecat"><a href="#微信-flutter-研修群-ducafecat" class="headerlink" title="微信 flutter 研修群 ducafecat"></a>微信 flutter 研修群 ducafecat</h2><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://medium.com/flutter/whats-new-in-flutter-2-2-fd00c65e2039" target="_blank" rel="noopener">https://medium.com/flutter/whats-new-in-flutter-2-2-fd00c65e2039</a></p></blockquote><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><p>2.2 的发布侧重于改进和优化，包括 iOS 性能的提升，Android 延迟组件，为 Flutter web 更新服务工作者等等！</p><p>今天是我们让 Flutter 2.2 可用的日子。您可以通过切换到 stable 通道并升级当前的 Flutter 安装，或者转到 Flutter.dev/docs/get-started 来启动新的安装。</p><p>尽管距离 Flutter 2 发布只有几个月的时间，我们在 2.2 中还是有很多改进可以分享。这个版本合并了 2,456 个 PRs，关闭了框架、引擎和插件库中的 3,105 个问题。特别大声呼吁 Flutter 社区在广大提供了大量的公关和公关审查，包括 Abhishek01039 谁贡献了最多的 PRs (17)和 xu-baolin，谁审查了最多的 PRs (9) Flutter 2.2。感谢所有贡献者的帮助，使 Flutter 2.2 的稳定通道。没有你我们做不到。</p><p>每一个 Flutter 发布到 stable 的新版本都会带来一组新的更新，无论是性能增强、新特性还是 bug 修复。此外，一个版本还包括一些尚未准备好投入生产使用的特性，但我们希望您能够验证它们是否按照您希望的方式工作。最后，每个新版本都附带了一组来自更大的 Flutter 社区的相关工具更新和更新。老实说，最近 Flutter 的每一个新版本都发生了很多事情，我们无法在一篇博客文章中合理地捕捉到所有的内容，但是我们会尽量突出重点。</p><h3 id="在-stable-下-Flutter-2-2-更新"><a href="#在-stable-下-Flutter-2-2-更新" class="headerlink" title="在 stable 下 Flutter 2.2 更新"></a>在 stable 下 Flutter 2.2 更新</h3><p>这个版本涵盖了 Flutter 2 之上的一系列改进，包括跨 Android，iOS 和 web 的更新，新材质图标，文本处理更新，滚动条行为，以及对 TextSpan 小部件的鼠标光标支持，以及如何从单一源代码库中最好地支持多种平台的新指南。所有这些特性现在都可以稳定地使用，并且可以在生产应用程序中使用。它们都是建立在一个新的 Dart 释放上的。</p><h4 id="Dart-2-13"><a href="#Dart-2-13" class="headerlink" title="Dart 2.13"></a>Dart 2.13</h4><p>Flutter 2.2 带有 Dart 2.13 版本。除此之外，这次 Dart 更新包含了一个新的类型别名功能，它可以让你为类型和函数创建别名:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Type alias for functions (existing)</span></span><br><span class="line"><span class="keyword">typedef</span> ValueChanged&lt;T&gt; = <span class="keyword">void</span> <span class="built_in">Function</span>(T value);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Type alias for classes (new!)</span></span><br><span class="line"><span class="keyword">typedef</span> StringList = <span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Rename classes in a non-breaking way (new!)</span></span><br><span class="line"><span class="meta">@Deprecated</span>(<span class="string">"Use NewClassName instead"</span>)</span><br><span class="line"><span class="keyword">typedef</span> OldClassName&lt;T&gt; = NewClassName&lt;T&gt;;</span><br></pre></td></tr></table></figure><p>类型别名可以为长而复杂的类型提供很好的短名称，它还允许您以非破坏性的方式重命名类。在 Dart 2.13 中还有更多的新功能，请查看 Dart 2.13 发布公告中的详细信息。</p><p><a href="https://medium.com/dartlang/announcing-dart-2-13-c6d547b57067" target="_blank" rel="noopener">https://medium.com/dartlang/announcing-dart-2-13-c6d547b57067</a></p><h4 id="Flutter-web-更新"><a href="#Flutter-web-更新" class="headerlink" title="Flutter web 更新"></a>Flutter web 更新</h4><p>Flutter 最新的稳定平台 web 已经在这个版本中得到了改进。</p><p>首先，我们使用新的服务工作者加载机制优化了缓存行为，并修复了 main.dart.js 的双重下载。在 Flutter web 的早期版本中，服务工作者在后台下载更新到您的应用程序，同时让您的用户访问您的应用程序的陈旧版本。一旦更新被下载，用户将不会看到这些更改，直到他们刷新浏览器页面几次。在 Flutter 2.2 中，当新的服务工作者检测到一个变化时，用户会等到更新被下载后才能使用这个应用程序，但是之后他们会看到更新，而不需要第二次手动刷新页面。</p><p>启用此更改需要您重新生成您的 Flutter 应用程序的 index.html。要做到这一点，保存修改，删除 index.html，然后运行 flutter create。在你的项目目录中重新创建它。</p><p>我们还对这两个网页渲染器进行了改进。对于 HTML，我们添加了对字体特性的支持，以支持设置 FontFeature，并使用 canvas api 呈现文本，以便文本在鼠标悬停时出现在正确的位置。对于 HTML 和 CanvasKit，我们增加了对着色遮罩和 computelinetrics 的支持，解决了 Flutter web 和移动应用之间的平价差距。例如，开发人员现在可以使用不透明遮罩来使用着色遮罩执行淡出过渡，并且可以像使用移动应用程序一样使用 computelinetrics。</p><p>对于 Flutter 网页，以及 Flutter general，可访问性是我们的最高优先事项之一。根据设计，Flutter 通过构建 SemanticsNode 树来实现可访问性。一旦 Flutter web 应用用户启用了可访问性，框架就会生成一个与 RenderObject DOM 树并行的 DOM 树，并将语义属性转换为 Aira。在这个版本中，我们改进了语义节点的位置，以便在使用转换时缩小移动和桌面 web 应用程序之间的差距，这意味着当小部件使用转换设计时，焦点框应该正确地出现在元素上。要看到这个效果，请看 Victor Tsaran 的视频，他领导了材料设计的可访问性项目，使用 VoiceOver with Flutter Gallery App:</p><p>我们还公开了语义节点调试树，在概要文件和释放模式中有一个命令行标志，通过可视化为 web 应用程序创建的语义节点来帮助开发人员调试可访问性。</p><p>为了使你自己的 Flutter web 应用程序能够使用这个功能，运行以下命令:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ flutter run -d chrome --profile \</span><br><span class="line"> --dart-define=FLUTTER_WEB_DEBUG_SHOW_SEMANTICS=<span class="literal">true</span></span><br></pre></td></tr></table></figure><p>激活该标志后，您将能够看到小部件顶部的语义节点，这样您就可以调试并查看语义元素是否放置在不应该放置的位置。如果你找到这样的例子，请不要犹豫，提交一份错误报告。</p><p><a href="https://goo.gle/flutter_web_issue" target="_blank" rel="noopener">https://goo.gle/flutter_web_issue</a></p><p>虽然我们在支持一组核心可访问性特性方面取得了重大进展，但我们将继续改进可访问性支持。在 2.2 稳定版之外的主版和开发版渠道中，我们增加了一个 API，让开发者可以通过编程方式自动启用应用程序的可访问性，并通过使用带有屏幕阅读器的 Tab 解决问题。</p><p>最后，但肯定不是最不重要的，最新版本的 Flutter DevTools 现在支持您的 Flutter 网络应用程序的布局浏览器。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-20-06-08-40.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>这个更新给你提供了和你的移动和桌面应用程序一样的网页布局调试工具。</p><h4 id="iOS-页面转换和增量安装"><a href="#iOS-页面转换和增量安装" class="headerlink" title="iOS 页面转换和增量安装"></a>iOS 页面转换和增量安装</h4><p>对于 iOS，在这个版本中，我们通过减少 75% 渲染动画画面所需的时间，使 Cupertino 的页面转换更加流畅，而且可能在低端手机上更多。我们不只是寻找最终用户性能的改进，我们也一直在寻找提高开发性能的方法。</p><p>在这个版本中，我们在开发过程中实现了增量的 iOS 安装。在我们的基准测试中，我们发现安装升级版 iOS 应用程序的时间减少了 40% ，这样在测试应用程序更改时就会减少周转时间。</p><h4 id="使用-Flutter-构建平台自适应应用程序"><a href="#使用-Flutter-构建平台自适应应用程序" class="headerlink" title="使用 Flutter 构建平台自适应应用程序"></a>使用 Flutter 构建平台自适应应用程序</h4><p>随着 Flutter 扩展到支持更多稳定的平台，考虑不仅支持不同形式因素的应用程序变得很有用，比如移动设备、平板电脑和桌面，还有不同的输入类型(触摸和鼠标 + 键盘)和带有不同习惯用法的平台，比如导航抽屉和导航系统菜单。我们把能够根据不同目标平台的细节进行调整的应用称为“平台自适应”应用。</p><p>为了介绍在构建平台自适应应用程序时需要注意的事项，我们将向您介绍 Kevin Moore 的构建平台自适应应用程序会议。要了解更多详细信息，请查看 flutter.dev 上的平台自适应应用程序指南。</p><ul><li><p>构建平台自适应应用<br><a href="https://events.google.com/io/session/868dfd56-7f8c-49ee-84ad-ac69a23ba19d?lng=en" target="_blank" rel="noopener">https://events.google.com/io/session/868dfd56-7f8c-49ee-84ad-ac69a23ba19d?lng=en</a></p></li><li><p>指南<br><a href="https://flutter.dev/docs/development/ui/layout/building-adaptive-apps" target="_blank" rel="noopener">https://flutter.dev/docs/development/ui/layout/building-adaptive-apps</a></p></li></ul><p>最后，对于根据这些原则为多个平台编写的示例应用程序，我们推荐来自 gSkinner 的 Flokk 和 Flutter Folio 应用程序。你可以下载 Flokk 和 Folio 的代码，也可以从各种应用程序商店下载 Flokk 和 Folio，或者直接从浏览器上运行它们。另一个很好的例子是用于创建指南本身的应用程序:</p><p><a href="https://flutter.gskinner.com/flokk" target="_blank" rel="noopener">https://flutter.gskinner.com/flokk</a></p><p><a href="https://flutter.gskinner.com/folio" target="_blank" rel="noopener">https://flutter.gskinner.com/folio</a></p><p><a href="https://flutter.gskinner.com/flokk/#g-download" target="_blank" rel="noopener">https://flutter.gskinner.com/flokk/#g-download</a></p><p><a href="https://github.com/gskinnerTeam/flutter-folio" target="_blank" rel="noopener">https://github.com/gskinnerTeam/flutter-folio</a></p><p>Flutter 平台自适应应用指南的 UX 部分是基于新的大屏幕材料指南。这个来自 Material 团队的新指导包括几个主要布局文章的返工，以及对几个组件的更新和更新的设计工具包，所有这些都考虑到了大屏幕。</p><p><a href="https://material.io/blog/material-design-for-large-screens" target="_blank" rel="noopener">https://material.io/blog/material-design-for-large-screens</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-20-06-15-18.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>Flutter 的目标一直是让应用程序不仅仅在多个平台上运行; 我们还要等到你的应用程序在所有你的目标平台上运行良好之后才能完成。的支持不仅可以针对多个平台的应用程序，还可以根据屏幕大小、输入模式和每个平台的习惯调整应用程序。</p><h4 id="更多-Material-图标"><a href="#更多-Material-图标" class="headerlink" title="更多 Material 图标"></a>更多 Material 图标</h4><p>关于 Material guidance 的主题，在这个版本中，我们已经为 Flutter 添加了不止一个而是两个新的 Material 图标，包括一个 Dash 自己的图标！</p><p><a href="https://github.com/flutter/flutter/pull/78311" target="_blank" rel="noopener">https://github.com/flutter/flutter/pull/78311</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-20-06-16-14.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-20-06-16-24.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>这些更新使你的应用程序的材质图标总数超过 7000 个。如果你很难找到你想要的图标，那么在那些令人尴尬的财富中(谁不会呢?)你可在此 fonts.google.com/icons 按类别及姓名搜寻。</p><p><a href="http://fonts.google.com/icons" target="_blank" rel="noopener">http://fonts.google.com/icons</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-20-06-17-40.png" alt="按名称搜索 Flutter 材质图标" title="">                </div>                <div class="image-caption">按名称搜索 Flutter 材质图标</div>            </figure><p>一旦你找到了完美的图标，新的“ Flutter”标签会告诉你如何使用它，或者你可以下载这个图标作为应用程序中的独立资产。添加 Dash 到您的 Flutter 应用程序从来没有这么容易。</p><h4 id="改进的文本处理"><a href="#改进的文本处理" class="headerlink" title="改进的文本处理"></a>改进的文本处理</h4><p>随着我们继续改进 Flutter 以支持每个平台的细节，我们继续推进新的领域，这些领域在移动表单因素上不像在桌面表单因素上那么重要。其中一个领域是文本处理。在这个版本中，我们已经开始重构我们如何处理文本输入，以实现诸如取消在小部件层次结构中冒泡的击键等功能，并通过引入完全自定义与文本动作相关的击键功能。</p><p>能够取消击键使得 Flutter 能够在不触发滚动事件的情况下实现诸如使用空格键和箭头键之类的东西，给你的最终用户一个更直观的体验。您可以使用同样的功能来处理击键，然后再将其发送到您自己的应用程序中的父窗口部件。另一个例子是，在这个版本中，你可以在 TextField 和 Flutter 应用程序中的一个按钮之间选择 Tab，而且它正常工作:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() =&gt; runApp(App());</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line"> <span class="meta">@override</span></span><br><span class="line"> Widget build(BuildContext context) =&gt; MaterialApp(</span><br><span class="line">       title: <span class="string">'Flutter Text Editing Fun'</span>,</span><br><span class="line">       home: HomePage(),</span><br><span class="line">     );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HomePage</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line"> <span class="meta">@override</span></span><br><span class="line"> Widget build(BuildContext context) =&gt; Scaffold(</span><br><span class="line">       body: Column(</span><br><span class="line">         children: [</span><br><span class="line">           TextField(),</span><br><span class="line">           OutlinedButton(onPressed: () &#123;&#125;, child: <span class="keyword">const</span> Text(<span class="string">'Press Me'</span>)),</span><br><span class="line">         ],</span><br><span class="line">       ),</span><br><span class="line">     );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-20-06-19-31.png" alt="Flutter 2.2 可以取消冒出窗口部件层次结构的击键，例如允许 TAB 从 TextField 更改焦点" title="">                </div>                <div class="image-caption">Flutter 2.2 可以取消冒出窗口部件层次结构的击键，例如允许 TAB 从 TextField 更改焦点</div>            </figure><p>自定义文本操作允许你做一些事情，比如在 TextField 中特殊处理 Enter 键; 例如，你可以触发在聊天客户端发送消息，同时仍然允许通过 Ctrl + Enter 插入一个新行。这些相同的文本操作允许 Flutter 本身提供不同的按键来匹配主机 OS 本身的文本编辑行为，例如，在 Windows 和 Linux 上使用 Ctrl + c，而在 macOS 上使用 Cmd + c。</p><p><a href="https://github.com/flutter/flutter/pull/75032" target="_blank" rel="noopener">https://github.com/flutter/flutter/pull/75032</a></p><p>作为一个例子，下面的示例重写了默认的左箭头操作，并为退格键和删除键提供了一个新的操作:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/services.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() =&gt; runApp(MyApp());</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line"> <span class="meta">@override</span></span><br><span class="line"> Widget build(BuildContext context) =&gt; MaterialApp(</span><br><span class="line">       title: <span class="string">'Flutter TextField Key Binding Demo'</span>,</span><br><span class="line">       home: Scaffold(body: UnforgivingTextField()),</span><br><span class="line">     );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="markdown">/// A text field that clears itself if </span>the<span class="markdown"> user tries to back up or correct</span></span></span><br><span class="line"><span class="comment"><span class="markdown">/// something.</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UnforgivingTextField</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line"> <span class="meta">@override</span></span><br><span class="line"> State&lt;UnforgivingTextField&gt; createState() =&gt; _UnforgivingTextFieldState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_UnforgivingTextFieldState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">UnforgivingTextField</span>&gt; </span>&#123;</span><br><span class="line"> <span class="comment">// The text editing controller used to clear the text field.</span></span><br><span class="line"> late TextEditingController controller;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@override</span></span><br><span class="line"> <span class="keyword">void</span> initState() &#123;</span><br><span class="line">   <span class="keyword">super</span>.initState();</span><br><span class="line">   controller = TextEditingController();</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@override</span></span><br><span class="line"> Widget build(BuildContext context) =&gt; Shortcuts(</span><br><span class="line">       shortcuts: &lt;LogicalKeySet, Intent&gt;&#123;</span><br><span class="line">         <span class="comment">// This overrides the left arrow key binding that the text field normally</span></span><br><span class="line">         <span class="comment">// has in order to move the cursor back by a character. The default is</span></span><br><span class="line">         <span class="comment">// created by the MaterialApp, which has a DefaultTextEditingShortcuts</span></span><br><span class="line">         <span class="comment">// widget in it.</span></span><br><span class="line">         LogicalKeySet(LogicalKeyboardKey.arrowLeft): <span class="keyword">const</span> ClearIntent(),</span><br><span class="line"></span><br><span class="line">         <span class="comment">// This binds the delete and backspace keys to also clear the text field.</span></span><br><span class="line">         <span class="comment">// You can bind any key, not just those already bound in</span></span><br><span class="line">         <span class="comment">// DefaultTextEditingShortcuts.</span></span><br><span class="line">         LogicalKeySet(LogicalKeyboardKey.delete): <span class="keyword">const</span> ClearIntent(),</span><br><span class="line">         LogicalKeySet(LogicalKeyboardKey.backspace): <span class="keyword">const</span> ClearIntent(),</span><br><span class="line">       &#125;,</span><br><span class="line">       child: Actions(</span><br><span class="line">         actions: &lt;<span class="built_in">Type</span>, Action&lt;Intent&gt;&gt;&#123;</span><br><span class="line">           <span class="comment">// This binds the intent that indicates clearing a text field to the</span></span><br><span class="line">           <span class="comment">// action that does the clearing.</span></span><br><span class="line">           ClearIntent: ClearAction(controller: controller),</span><br><span class="line">         &#125;,</span><br><span class="line">         child: Center(child: TextField(controller: controller)),</span><br><span class="line">       ),</span><br><span class="line">     );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="markdown">/// An intent that is bound to ClearAction.</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ClearIntent</span> <span class="keyword">extends</span> <span class="title">Intent</span> </span>&#123;</span><br><span class="line"> <span class="keyword">const</span> ClearIntent();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="markdown">/// An action that is bound to ClearIntent that clears </span>the<span class="markdown"> TextEditingController</span></span></span><br><span class="line"><span class="comment"><span class="markdown">/// passed to it.</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ClearAction</span> <span class="keyword">extends</span> <span class="title">Action</span>&lt;<span class="title">ClearIntent</span>&gt; </span>&#123;</span><br><span class="line"> ClearAction(&#123;required <span class="keyword">this</span>.controller&#125;);</span><br><span class="line"></span><br><span class="line"> <span class="keyword">final</span> TextEditingController controller;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@override</span></span><br><span class="line"> <span class="built_in">Object</span>? invoke(covariant ClearIntent intent) &#123;</span><br><span class="line">   controller.clear();</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-20-06-20-56.png" alt="按左箭头或 ESC 可以清除文本" title="">                </div>                <div class="image-caption">按左箭头或 ESC 可以清除文本</div>            </figure><p>我们仍然有更多的工作要做，但我们正在努力给你提供完整的文本编辑操作。我们的目标是，当 Flutter 桌面变得稳定时，你的用户将无法分辨出 Flutter 应用程序中编辑文本与主机操作系统中其他应用程序之间的区别。</p><h4 id="自动滚动行为"><a href="#自动滚动行为" class="headerlink" title="自动滚动行为"></a>自动滚动行为</h4><p>作为我们持续追求的一部分，让 Flutter 应用在每个平台上都表现得像最好的应用一样，我们在这个版本中重新审视了滚动条。当实际显示滚动条时，安卓和 iOS 是相同的; 默认情况下它们不显示滚动条。另一方面，对于桌面应用程序，当内容大于容器时，通常会自动显示滚动条，这需要您添加一个滚动条父窗口小部件。为了在移动或桌面上获得正确的行为，此版本在必要时自动添加滚动条。</p><p>考虑下面的无滚动条代码:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() =&gt; runApp(App());</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line"> <span class="meta">@override</span></span><br><span class="line"> Widget build(BuildContext context) =&gt; MaterialApp(</span><br><span class="line">       title: <span class="string">'Automatic Scrollbars'</span>,</span><br><span class="line">       home: HomePage(),</span><br><span class="line">     );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HomePage</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line"> <span class="meta">@override</span></span><br><span class="line"> Widget build(BuildContext context) =&gt; Scaffold(</span><br><span class="line">       body: ListView.builder(</span><br><span class="line">         itemCount: <span class="number">100</span>,</span><br><span class="line">         itemBuilder: (context, index) =&gt; Text(<span class="string">'Item $index'</span>),</span><br><span class="line">       ),</span><br><span class="line">     );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在桌面上运行时，会出现一个滚动条:</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-20-06-22-26.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>如果您不喜欢滚动条的外观，或者总是显示滚动条，那么可以设置 ScrollBarTheme。如果您不喜欢这种默认行为，可以通过设置 ScrollBehavior 在应用程序范围内或在特定实例上更改它。有关新的默认滚动条行为以及如何将代码迁移到新的最佳实践集的更多细节，请查看 flutter.dev 上的文档。</p><p><a href="https://flutter.dev/docs/release/breaking-changes/default-desktop-scrollbars" target="_blank" rel="noopener">https://flutter.dev/docs/release/breaking-changes/default-desktop-scrollbars</a></p><h4 id="鼠标-cursors-over-text-spans"><a href="#鼠标-cursors-over-text-spans" class="headerlink" title="鼠标 cursors over text spans"></a>鼠标 cursors over text spans</h4><p>在以前的 Flutter 版本中，您可以在任何小部件上添加一个鼠标光标(就像一只手指示可点击的东西)。实际上，Flutter 本身在大多数情况下为您添加那些鼠标光标，比如在所有按钮上添加一个手动鼠标光标。然而，如果你想要一系列富文本，它们具有不同的文本跨度和各自的样式，并且可能有足够长的时间来包装，那么你就不太走运了ーー TextSpan 不是一个小部件，因此不能用作鼠标光标的视觉范围… … 直到现在！在这个版本中，当你有一个带有手势识别器的 TextSpan 时，你将自动获得相应的鼠标光标:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/gestures.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:url_launcher/url_launcher.dart'</span> <span class="keyword">as</span> urlLauncher;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() =&gt; runApp(App());</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line"> <span class="keyword">static</span> <span class="keyword">const</span> title = <span class="string">'Flutter App'</span>;</span><br><span class="line"> <span class="meta">@override</span></span><br><span class="line"> Widget build(BuildContext context) =&gt; MaterialApp(</span><br><span class="line">       title: title,</span><br><span class="line">       home: HomePage(),</span><br><span class="line">     );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HomePage</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line"> <span class="meta">@override</span></span><br><span class="line"> Widget build(BuildContext context) =&gt; Scaffold(</span><br><span class="line">       appBar: AppBar(title: Text(App.title)),</span><br><span class="line">       body: Center(</span><br><span class="line">         child: RichText(</span><br><span class="line">           text: TextSpan(</span><br><span class="line">             style: TextStyle(fontSize: <span class="number">48</span>),</span><br><span class="line">             children: [</span><br><span class="line">               TextSpan(</span><br><span class="line">                 text: <span class="string">'This is not a link, '</span>,</span><br><span class="line">                 style: TextStyle(color: Colors.black),</span><br><span class="line">               ),</span><br><span class="line">               TextSpan(</span><br><span class="line">                 text: <span class="string">'but this is'</span>,</span><br><span class="line">                 style: TextStyle(color: Colors.blue),</span><br><span class="line">                 recognizer: TapGestureRecognizer()</span><br><span class="line">                   ..onTap = () &#123;</span><br><span class="line">                     urlLauncher.launch(<span class="string">'https://flutter.dev'</span>);</span><br><span class="line">                   &#125;,</span><br><span class="line">               ),</span><br><span class="line">             ],</span><br><span class="line">           ),</span><br><span class="line">         ),</span><br><span class="line">       ),</span><br><span class="line">     );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>现在您可以拥有所需的所有包装文本跨度，并且其中任何带有识别器的文本都将获得适当的鼠标游标。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-20-06-24-38.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>在这个版本中，TextSpan 还支持 onEnter 和 onExit 以及 mouseCursor。像这样的东西可能看起来很小，但他们有很长的路要走，使 Flutter 应用程序感觉就像用户期望它的感觉。</p><h3 id="Flutter-2-2-updates-in-preview"><a href="#Flutter-2-2-updates-in-preview" class="headerlink" title="Flutter 2.2 updates in preview"></a>Flutter 2.2 updates in preview</h3><p>除了可用于产品的新功能外，Flutter 2.2 在预览版中提供了一些功能，包括 iOS 着色器编译器性能的改进，Android 延迟组件支持，Flutter 桌面更新，以及索尼的 ARM64 Linux 主机支持。请尝试一下，如果有任何问题请告诉我们。</p><p><a href="http://github.com/flutter/flutter/issues" target="_blank" rel="noopener">http://github.com/flutter/flutter/issues</a></p><h4 id="Preview-iOS-着色器编译改进"><a href="#Preview-iOS-着色器编译改进" class="headerlink" title="Preview: iOS 着色器编译改进"></a>Preview: iOS 着色器编译改进</h4><p>在图形渲染术语中，“着色器”是一个在终端用户设备上可用的 GPU 上编译和运行的程序。自 Skia 图形库诞生以来，Flutter 就一直使用着色器来提供高质量的图形效果，包括颜色、阴影、动画等等。由于 Flutter 的 api 的灵活性，着色器生成和编译实时，与帧工作负载需要他们同步。当编译着色器的时间超过帧预算时，结果对用户来说是显而易见的“ jank”</p><p>为了避免混乱，Flutter 提供了在训练过程中缓存着色器的能力，然后打包并捆绑一个应用程序，在第一帧之前编译，同时 Flutter 引擎启动。这意味着预编译的着色器不必在框架工作负载期间进行编译，也不会造成混乱。然而，Skia 最初只在 OpenGL 中实现了这个特性。</p><p>因此，当我们在 iOS 上默认启用 Metal 后端以回应苹果不推荐使用 OpenGL 时，根据我们的基准测量，最糟糕的帧时间有所增加，而且用户报告的 jank 也有所增加。我们自己的测量表明，这些报告通常是由于增加了着色器编译时间，增加了 Skia 为 Metal 后端生成的着色器数量，以及编译的着色器无法在运行过程中缓存，以至于 jank 在第一次运行应用程序之后仍然存在。</p><p>因此，到目前为止，避免 iOS 上这种混乱的唯一方法是简化场景和动画，这并不理想。</p><p><a href="https://github.com/flutter/flutter/issues/79298" target="_blank" rel="noopener">https://github.com/flutter/flutter/issues/79298</a></p><p>然而，现在在开发通道是一个预览的新支持在 Skia 的着色器热身的金属。通过 Skia，Flutter 现在编译绑定着色器之前的第一帧工作量开始。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-20-06-27-32.png" alt="跟踪显示在应用程序启动期间发生的预编译" title="">                </div>                <div class="image-caption">跟踪显示在应用程序启动期间发生的预编译</div>            </figure><p>然而，这个解决方案也有一些警告:</p><ul><li>Skia 仍然为 Metal 后端生成比 OpenGL 后端更多的着色器</li><li>最终的着色器编译到机器代码仍然与框架工作负载同步进行，但这比作为框架渲染时间的一部分进行整个着色器生成和编译要快</li><li>生成的机器代码在应用程序第一次运行后被缓存，直到设备重新启动</li></ul><p>如果您希望利用应用程序中的这种新支持，可以按照 flutter.dev 上的说明进行操作。</p><p><a href="https://flutter.dev/docs/perf/rendering/shader#how-to-use-sksl-warmup" target="_blank" rel="noopener">https://flutter.dev/docs/perf/rendering/shader#how-to-use-sksl-warmup</a></p><p>We’re not done with this work, however. On both Android and iOS, this implementation has a few drawbacks:</p><p>然而，我们还没有完成这项工作，无论是在安卓还是 iOS 上，这个实现都有一些缺点:</p><ul><li>部署应用程序的大小更大，因为它包含捆绑着色器</li><li>应用程序启动延迟更长，因为捆绑着色器需要预编译</li><li>我们对这种实现所暗示的开发人员的体验并不满意</li></ul><p>我们认为最后一个问题是需要解决的最重要问题。特别是，我们查看了执行训练运行的过程，并推理由应用程序大小和应用程序启动延迟造成的权衡过于繁重。因此，我们继续研究如何消除不依赖于此实现的着色器编译 jank 和一般的所有 jank。特别是，我们正在与 Skia 团队合作，以减少它响应 Flutter 的要求所产生的着色器的数量，同时也在调查使用与 Flutter 引擎捆绑在一起的一小套静态定义着色器可以实现多少 Flutter。</p><p>你可以跟随这个项目在 Flutter 回购看到我们的进展。</p><h4 id="Android-延迟组件"><a href="#Android-延迟组件" class="headerlink" title="Android 延迟组件"></a>Android 延迟组件</h4><p>对于 Android，这个版本使用了 Dart 的分离 AOT 编译特性，允许 Flutter 应用程序在运行时下载包含提前编译代码和资源的模块。我们将这些可安装的组件中的每一个称为延迟组件。通过将代码和资产的下载推迟到仅在需要时进行，初始安装大小可以显著减少。例如，我们实现了 Flutter Gallery 的一个版本，所有的研究和演示都被推迟了，发现初始安装规模减少了 46% 。</p><p><a href="https://github.com/flutter/flutter/pull/76192" target="_blank" rel="noopener">https://github.com/flutter/flutter/pull/76192</a></p><p>在启用延迟组件的情况下进行构建时，Dart 会将只使用 deferred 关键字导入的代码编译成单独的共享库，这些库与资产一起打包到延迟组件中。</p><p>延迟组件目前只能在 Android 上使用，这个特性是作为早期预览提供的。了解如何在 flutter.dev 上的新 Deferred 组件页面中实现 Deferred 组件。这个页面还链接到 Flutter 维基上的一个页面，该页面包含了关于这个功能如何工作的深入介绍。请在 Flutter 问题跟踪日志问题。</p><h4 id="Flutter-Windows-UWP-alpha"><a href="#Flutter-Windows-UWP-alpha" class="headerlink" title="Flutter Windows UWP alpha"></a>Flutter Windows UWP alpha</h4><p>在这个版本中，Flutter 的另一个更新是针对桌面爱好者的; 对 Windows UWP 的支持在 dev 通道中已经转移到 alpha 版本(稳定的 2.2 版本之外)。允许你把 Flutter 应用程序带到标准 Windows 应用程序不能运行的设备上，包括 Xbox。要进行尝试，首先需要设置 UWP 先决条件。然后，切换到开发通道，启用 UWP 支持:</p><p><a href="https://flutter.dev/desktop#windows-uwp" target="_blank" rel="noopener">https://flutter.dev/desktop#windows-uwp</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ flutter channel dev</span><br><span class="line">$ flutter upgrade</span><br><span class="line">$ flutter config — enable-windows-uwp-desktop</span><br></pre></td></tr></table></figure><p>一旦启用，创建一个 Flutter 应用程序包括一个新的 winuwp 文件夹，它允许你在 UWP 容器中构建和运行你的应用程序:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ flutter create uwp_fun</span><br><span class="line">$ cd uwp_fun</span><br><span class="line">$ flutter pub get</span><br><span class="line">$ flutter run -d winuwp</span><br></pre></td></tr></table></figure><p>因为你正在构建一个 Windows UWP 应用程序，它在 Windows 的沙箱环境中运行，所以在开发过程中，你需要在本地主机上的应用程序防火墙上打一个洞，以启用热重载和调试器断点等功能。你可以通过 checkknesolation 命令按照扑桌面文档页面上的说明做到这一点。一旦你这样做了，你可以看到你最喜欢的 Flutter 应用程序运行作为一个 UWP 应用程序在 Windows 上。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-20-08-29-49.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>你最喜欢的 Flutter 应用程序在 Windows UWP 容器中运行</p><p>当然，你可以运行更多有趣的 UWP 应用程序，比如这些 Flutter 应用程序运行在 Xbox 上。</p><p>我要特别感谢克拉克松，自从我加入 Flutter 队以来，他就一直致力于这项支持。有关 Windows UWP alpha 的更多细节，请查看 flutter.dev/desktop/# Windows-UWP。</p><p><a href="http://flutter.dev/desktop/#windows-uwp" target="_blank" rel="noopener">http://flutter.dev/desktop/#windows-uwp</a></p><h4 id="ARM64-Linux-host-support-from-Sony"><a href="#ARM64-Linux-host-support-from-Sony" class="headerlink" title="ARM64 Linux host support from Sony"></a>ARM64 Linux host support from Sony</h4><p>另一个来自社区成员 HidenoriMatsubayashi 的杰出努力，他是索尼的软件工程师，为目标 ARM64 Linux 提供了支持。这个 PR 可以让你在 ARM64 Linux 机器上建立和运行 Flutter 应用程序。</p><p>您最喜欢的 Flutter 应用程序运行在 ARM64 Linux 机器上</p><p><a href="https://github.com/HidenoriMatsubayashi" target="_blank" rel="noopener">https://github.com/HidenoriMatsubayashi</a></p><p><a href="https://github.com/flutter/flutter/pull/61221" target="_blank" rel="noopener">https://github.com/flutter/flutter/pull/61221</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-20-08-35-23.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>很高兴看到 Flutter 社区将 Flutter 带到了 Google 团队无法想象的地方。继续好好干吧！</p><h3 id="Flutter-生态系统和工具更新"><a href="#Flutter-生态系统和工具更新" class="headerlink" title="Flutter 生态系统和工具更新"></a>Flutter 生态系统和工具更新</h3><p>Flutter 引擎和框架只是整体经验的一部分。对软件包生态系统和工具的更新对 Flutter 开发人员的体验同样重要。我们在这些领域有一些很棒的更新可以分享。</p><p>在生态系统方面，我们有一些新的 Flutter 最喜欢的软件包，以及 FlutterFire 的几个更新，Flutter 对 Firebase 的支持。更好的是，FlutterFire 支持新的 Firebase App Check 预览，所以 Flutter 开发者可以在第一天就利用它。</p><p>在工具方面，Flutter DevTools 提供了新的更新，用于优化应用程序的内存占用和提供程序包的新标签。对于 VS Code 和 Android Studio/IntelliJ 的 IDE 插件都有一些值得注意的更新，如果你是一个以 Flutter 为目标的内容作者，那么有一种全新的方式将 DartPad 整合到你的写作中。</p><p>最后但并非最不重要的是，有一个新的低代码的应用程序设计和建设工具称为 FlutterFlow，目标 Flutter 和运行在网络上，因为它本身是建立了 Flutter。</p><h4 id="Flutter-Favorite-updates"><a href="#Flutter-Favorite-updates" class="headerlink" title="Flutter Favorite updates"></a>Flutter Favorite updates</h4><p>作为这次发布的一部分，Flutter 生态系统委员会一直在努力认证 24 个新的 Flutter 最喜欢的软件包，我们最大的扩展。最新标记的 Flutter 收藏包括:</p><ul><li>正在生产中:cloud_firestore, cloud_functions, firebase_auth, firebase_core, firebase_crashlytics, firebase_messaging, and 及 firebase_storage</li><li>Flutter Community packages: android_alarm_manager_plus, android_intent_plus, battery_plus, connectivity_plus, device_info_plus, network_info_plus, package_info_plus, sensors_plus, and 及 share_plus</li><li>googleapis package</li><li>win32 package</li><li>intl and 及 characters packages</li><li>Sentry and sentry_flutter</li><li>infinite_scroll_pagination and flutter_native_splash packages</li></ul><p>所有这些软件包都已经迁移到 null 安全性，并且在适当的情况下支持 Android、 iOS 和 web。例如，firebase crashlytics 在 web 上没有底层的 SDK，Android alarm manager plus 是专门为 Android 设计的。</p><p>Flutter 社区“加上”包提供了一个超集相应的包从 Flutter 小组。例如，电池组在 Flutter 发布之前就已经由 Google 的 Flutter 团队提供，并且已经迁移到了 null 安全性，但是只支持安卓和 iOS。另一方面，Flutter 社区电池 + 软件包支持所有六个 Flutter 平台，包括 web、 Windows、 macOS 和 Linux。颁奖的 Flutter 最喜欢的奖项所有 9 个“加”包代表了一个成熟的 Flutter 社区作为一个整体向前迈出了一大步。比 Google 的工程师团队要大得多。您应该尽快将代码迁移到“附加”包，在未来几周内，Google 的相应包将进行更新，以推荐您这样做。</p><p>Googleapi 插件提供了大约 185 个自动生成的 Dart 包装器，用于客户端或服务器端的 Dart 应用程序(包括 Flutter 应用程序)。如果你想了解更多关于这个软件包，作者有一个关于使用 Google api 启动 Flutter 应用程序的 i/o 演讲。</p><p>Win32 包是一个工程奇迹，它使用 Dart FFI 包装了大多数常用的 Win32 API 调用，使它们可以被 Dart 代码访问，而不需要 c 编译器或 Windows SDK。随着 Flutter 在 Windows 平台上的流行，win32 包已经成为许多流行插件的关键依赖，包括最流行的路径提供者。作为一个完整性的测试，作者 timsneath 做了一些疯狂的事情，比如在原始的 Win32 中使用原始的 Dart 来实现记事本、 snake 和俄罗斯方块。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-20-08-41-41.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>俄罗斯方块运行在 Windows 上，只使用 Dart FFI 和 Win32 调用</p><p>Win32 包是绝对值得检查，如果你做任何与 Dart 或扑在 Windows。</p><h4 id="更新和-Firebase-应用程序检查"><a href="#更新和-Firebase-应用程序检查" class="headerlink" title="更新和 Firebase 应用程序检查"></a>更新和 Firebase 应用程序检查</h4><p>FlutterFire，Flutter 对 Firebase 的支持，是 Flutter 使用的最流行的插件集合之一。转化酶已经做了一个巨大的工作，让它生产的 Flutter 2 释放，并继续改善它，从那时起。事实上，自从 FlutterFire 的初始生产版本发布以来，转化酶已经减少了 79% 的未解决问题，并且减少了 88% 的未解决问题。此外，他们不仅在产品质量插件方面做得非常出色，他们还将 beta 质量插件迁移到了空安全性，并且让它们在同一核心上构建和运行，这样你就可以混合和匹配了。</p><p>此外，Invertase 还继续为 FlutterFire 插件增加新的功能，包括一些 Flutter 与 Cloud Firebase 整合的更新:</p><ul><li>Typesafe API 空气污染指数 用于读写数据</li><li>支持 Firebase 本地模拟器套件</li><li>优化您的数据查询 data bundles 数据包</li></ul><p>最后，但并非最不重要的是，FlutterFire 提供了对新 Firebase 产品 beta 版本的支持: Firebase App Check。防火基地应用程序检查保护你的后端资源，如云存储，免受滥用，如帐单欺诈或网络钓鱼。使用 App Check，运行你 Flutter 应用的设备使用一个应用程序身份认证提供商来确认它确实是你的应用程序，并且可能检查它是否运行在一个真实的、未被篡改的设备上。一旦你激活应用程序检查，这个认证就会附加到你的应用程序对 Firebase 后端资源提出的每个请求上。要了解更多信息，请参阅 FlutterFire App Check 文档。</p><h4 id="Flutter-DevTools-updates"><a href="#Flutter-DevTools-updates" class="headerlink" title="Flutter DevTools updates"></a>Flutter DevTools updates</h4><p>随着这个版本的发布，Flutter DevTools 有了一些值得注意的更新，包括两个内存跟踪改进和一个全新的选项卡专门为提供者插件。</p><p>DevTools 版本中的第一个内存跟踪改进提供了跟踪对象分配位置的能力。这对于在代码中找到内存泄漏的位置非常方便。<br>Flutter DevTools memory tab allocation stack trace Flutter DevTools 内存选项卡分配堆栈跟踪</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-20-08-43-46.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>第二个是将自定义消息注入内存时间轴的能力。这样你就可以为你的应用程序提供特定的标记，比如在你完成一些内存密集型的工作之前和之后，这样你就可以检查你是否正确地清理了东西。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-20-08-43-56.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>自定义内存事件</p><p>随着 Flutter 应用程序越来越大，我们将继续确保 Flutter 开发者拥有他们需要的工具来跟踪和修复内存泄漏和各种运行时问题。</p><p>在使用 Flutter 框架时，你不仅要追踪运行时问题，有时你还要追踪与软件包相关的问题。在 pub.dev 上有超过 15,000 个 flutter 兼容的软件包和插件，随着应用程序使用更多的软件包，这种情况越来越有可能发生。因此，考虑到这一点，我们一直在尝试为 Flutter DevTools 添加一个新的 Provider 标签。实际上，这个选项卡是由提供程序包本身的作者 Remi Roussel 创建的(还有许多其他好东西)。如果你正在运行最新版本的 Flutter DevTools，并且正在调试一个使用提供者插件的 Flutter 应用程序，你将自动获得新的 Provider 标签。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-20-08-44-26.png" alt="激活 DevTools Provider 选项卡" title="">                </div>                <div class="image-caption">激活 DevTools Provider 选项卡</div>            </figure><p>“提供者”选项卡显示与每个提供者关联的数据，包括运行应用程序时的实时更改。如果这还不够惊人的话，它可以让你直接改变数据，作为一种测试你的应用程序的角落情况的方法！</p><p>通过使用 Remi 的这个标签，我们学到了一些关于如何更好地支持其他想要做同样事情的软件包作者的知识; 你可以阅读 Remi 如何构建 Provider 标签，以及我们目前关于如何在 Flutter DevTools Plugins 提案中启用更多标签的想法。请给我们您的反馈，并随时联系告诉我们您的计划，一个新的标签在 Flutter 开发工具。</p><p>This is only a few of the cool new things in Flutter DevTools in this release. For the complete list, check out the individual announcements here:</p><p>这只是 Flutter DevTools 在这个版本中的一些很酷的新东西。完整的列表请点击这里查看个人声明:</p><ul><li><p>Flutter DevTools 2.1 Release Notes 2.1 发行说明<br><a href="https://groups.google.com/g/flutter-announce/c/tCreMfJaJFU/m/38p1BBeiCAAJ" target="_blank" rel="noopener">https://groups.google.com/g/flutter-announce/c/tCreMfJaJFU/m/38p1BBeiCAAJ</a></p></li><li><p>Flutter DevTools 2.2.1 Release Notes 2.2.1 发行说明<br><a href="https://groups.google.com/g/flutter-announce/c/t8opLnUyiFQ/m/dJth-jKxAAAJ" target="_blank" rel="noopener">https://groups.google.com/g/flutter-announce/c/t8opLnUyiFQ/m/dJth-jKxAAAJ</a></p></li><li><p>Flutter DevTools 2.2.3 Release Notes 2.2.3 发行说明<br><a href="https://groups.google.com/g/flutter-announce/c/t8opLnUyiFQ/m/YX5Ds_q0AgAJ" target="_blank" rel="noopener">https://groups.google.com/g/flutter-announce/c/t8opLnUyiFQ/m/YX5Ds_q0AgAJ</a></p></li></ul><h4 id="IDE-插件更新"><a href="#IDE-插件更新" class="headerlink" title="IDE 插件更新"></a>IDE 插件更新</h4><p>Visual Studio Code 和 IntelliJ/Android Studio IDE 扩展 for Flutter 在这个版本中也进行了更新。例如，visualstudio 代码扩展现在支持两个附加的 Dart 代码重构: 内联方法和内联局部变量。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-20-08-46-00.png" alt="新的 Dart 重构行动内嵌方法" title="">                </div>                <div class="image-caption">新的 Dart 重构行动内嵌方法</div>            </figure><p>在 Android Studio/IntelliJ 扩展中，我们添加了将所有堆栈跟踪打印到控制台的功能。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-20-08-47-02.png" alt="现在您可以获得所有的堆栈跟踪，而不仅仅是第一个" title="">                </div>                <div class="image-caption">现在您可以获得所有的堆栈跟踪，而不仅仅是第一个</div>            </figure><p>这对于那些根本原因可能在不同包中的项目很有帮助，因为以前没有打印这些包。我们已经有了一些想法，可以让这篇文章不那么冗长，所以在未来寻找更多的改变。</p><p>有关此版本的 IDE 扩展更改的完整列表，请查看以下公告:</p><ul><li><p>VS Code extension v3.21 VS Code 扩展 v3.21<br><a href="https://groups.google.com/g/flutter-announce/c/gNtKp9c1glU/m/SZYTuwcQBwAJ" target="_blank" rel="noopener">https://groups.google.com/g/flutter-announce/c/gNtKp9c1glU/m/SZYTuwcQBwAJ</a></p></li><li><p>VS Code extension v3.22 VS Code 扩展 v3.22<br><a href="https://groups.google.com/g/flutter-announce/c/1XR7baYZOVI/m/y6MGYrGhAAAJ" target="_blank" rel="noopener">https://groups.google.com/g/flutter-announce/c/1XR7baYZOVI/m/y6MGYrGhAAAJ</a></p></li><li><p>Flutter IntelliJ Plugin M55 Release 55 Release<br><a href="https://groups.google.com/g/flutter-announce/c/tYwFDPAtLu0/m/FrsntcNNBwAJ" target="_blank" rel="noopener">https://groups.google.com/g/flutter-announce/c/tYwFDPAtLu0/m/FrsntcNNBwAJ</a></p></li><li><p>Flutter IntelliJ Plugin M56 Release 56 发布<br><a href="https://groups.google.com/g/flutter-announce/c/EkgiAO4p3UM/m/P32ZXXKfAAAJ" target="_blank" rel="noopener">https://groups.google.com/g/flutter-announce/c/EkgiAO4p3UM/m/P32ZXXKfAAAJ</a></p></li></ul><h4 id="DartPad-workshops"><a href="#DartPad-workshops" class="headerlink" title="DartPad workshops"></a>DartPad workshops</h4><p>为了确保我们在快速发展的 Flutter 开发者社区中准备好文档，Dart 和 Flutter 团队总是在寻找改进和扩展创建教育内容的方法。随着这个版本的发布，我们为 DartPad 添加了一个新的、逐步的 UI，开发人员可以使用它来跟随讲师指导的工作坊。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-20-08-48-36.png" alt="实践中的 DartPad 工作坊" title="">                </div>                <div class="image-caption">实践中的 DartPad 工作坊</div>            </figure><p>通过直接在 DartPad 中添加说明，我们为 i/o 提供了一种有指导的工作坊体验。然而，我们不仅仅是为我们自己的工作坊创建它; 如果您想在您的 Dart 或 Flutter 工作坊中使用它，您可以通过遵循 DartPad 工作坊创作指南来实现。除此之外，你还可以在 Gist 中使用 DartPad 来共享代码，并在你自己的站点中嵌入 DartPad，这已经有一段时间了。</p><p>我们希望每个制作 Dart 和 Flutter 内容的人都能够为他们的用户提供丰富的交互式体验。请尝试一下这个新功能，让我们知道你的想法！</p><h4 id="社区聚光灯-FlutterFlow"><a href="#社区聚光灯-FlutterFlow" class="headerlink" title="社区聚光灯: FlutterFlow"></a>社区聚光灯: FlutterFlow</h4><p>FlutterFlow 是一个“低代码”应用程序设计和开发工具，用于在浏览器中构建应用程序。它提供了一个所见即所得的环境，可以使用 Firebase 的实际数据在多个页面上展示你的应用程序。低代码工具的目标是轻松地完成大多数常见事情，允许您编写尽可能少的行自定义代码。事实上，作为一个演示，他们在不到一个小时的时间里创建了一个整体的多页面移动应用程序，可以用零代码浏览大都会艺术博物馆。</p><p>FlutterFlow 输出 Flutter 代码，所以如果你需要添加代码来进一步定制你的应用程序，你可以。你可以在 FlutterFlow.io 上阅读 FlutterFlow 产品的发布。</p><p><a href="https://flutterflow.io/blog/launch" target="_blank" rel="noopener">https://flutterflow.io/blog/launch</a></p><h3 id="Breaking-Changes"><a href="#Breaking-Changes" class="headerlink" title="Breaking Changes"></a>Breaking Changes</h3><p>一如既往，我们努力减少破坏性更改的数量，在这个版本中，我们已经能够限制它去除这些反对意见:</p><ul><li>73750 删除已弃用的 BinaryMessages</li><li>73751 删除已弃用的 TypeMatcher 类</li></ul><p>您可以在 flutter.dev 上找到针对这些突发变化的缓解方法。</p><h3 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h3><p>像往常一样，来自谷歌 Flutter 团队的所有人，我们想说ーー谢谢。感谢你成为社区的一部分，让这一切成为可能。随着超过八分之一的新应用程序在播放商店正在建立 Flutter 和超过 200,000 个 Flutter 应用程序在播放商店，我们的持续增长是令人兴奋的。世界各地的各种规模的应用程序都委托他们的用户界面，飞翼工艺美丽的多平台体验，以满足用户可能在任何地方。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-20-08-51-04.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Google I/O 2021 发布 Flutter 2.2</title>
    <link href="https://blog.ducafecat.tech/2021/05/19/translation/announcing-flutter-2-2-at-google-i-o-2021/"/>
    <id>https://blog.ducafecat.tech/2021/05/19/translation/announcing-flutter-2-2-at-google-i-o-2021/</id>
    <published>2021-05-19T00:42:13.000Z</published>
    <updated>2021-05-19T01:44:13.763Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-19-08-43-51.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="老铁记得-转发-，猫哥会呈现更多-Flutter-好文"><a href="#老铁记得-转发-，猫哥会呈现更多-Flutter-好文" class="headerlink" title="老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~"></a>老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~</h2><h2 id="微信-flutter-研修群-ducafecat"><a href="#微信-flutter-研修群-ducafecat" class="headerlink" title="微信 flutter 研修群 ducafecat"></a>微信 flutter 研修群 ducafecat</h2><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://medium.com/flutter/announcing-flutter-2-2-at-google-i-o-2021-92f0fcbd7ef9" target="_blank" rel="noopener">https://medium.com/flutter/announcing-flutter-2-2-at-google-i-o-2021-92f0fcbd7ef9</a></p></blockquote><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://flutter.dev/docs/whats-new" target="_blank" rel="noopener">https://flutter.dev/docs/whats-new</a></li><li><a href="https://www.slashdata.co/reports/?category=mobile-desktop" target="_blank" rel="noopener">https://www.slashdata.co/reports/?category=mobile-desktop</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><p>在今天的 Google i/o 大会上，我们发布了 Flutter 2.2，这是我们最新发布的开源工具包，可以为单一平台上的任何设备构建漂亮的应用程序。Flutter 2.2 是 Flutter 目前为止最好的版本，它的更新让开发者比以往任何时候都更容易通过应用程序内购买、支付和广告赚钱; 连接到云服务和 api，扩展应用程序以支持新功能; 以及工具和语言功能，允许开发者消除一整类错误，提高应用程序性能和减少包大小。</p><h3 id="建立在-Flutter-2-的基础上"><a href="#建立在-Flutter-2-的基础上" class="headerlink" title="建立在 Flutter 2 的基础上"></a>建立在 Flutter 2 的基础上</h3><p>Flutter 2.2 是建立在 Flutter 2 的基础上的，它将 Flutter 从它的移动根源扩展到整合了 web、桌面和嵌入式使用。它是专门为环境计算世界设计的，用户有各种各样不同的设备和形式因素，并寻找跨越他们的日常生活的一致体验。使用 Flutter 2.2，企业、初创公司和企业家都可以构建高质量的解决方案，这些解决方案可以充分发挥其潜在市场的潜力，让创造性灵感(而不是目标平台)成为唯一的限制因素。</p><p>Flutter 是目前最流行的跨平台开发框架。</p><p>最近的一项移动开发者研究强调了 Flutter 的增长。分析公司 SlashData 的移动开发人员 2021 年人口预测显示，Flutter 现在是最流行的跨平台开发框架，有 45% 的开发人员选择了它，在 2020 年第一季度到 2021 年第一季度之间增长了 47% 。我们自己的数据证实了 Flutter 的这种转变; 在过去的 30 天里，Play Store 中超过八分之一的新应用程序都是使用 Flutter 构建的。</p><p>在 i/o，我们分享到仅仅在 Play Store 中就有超过 20 万个应用程序使用了 Flutter。这些应用程序来自腾讯，其微信即时通讯应用程序在 iOS 和安卓系统上被超过 12 亿用户使用; ByteDance，TikTok 的发起者，现在已经使用 Flutter 开发了 70 个不同的应用程序; 以及其他来自宝马、 SHEIN、 Grab 和滴滴等公司的应用程序。当然，Flutter 不仅仅被大公司使用。一些最具创新性的应用程序来自于你可能从未听说过的名字: Wombo，沃姆博，自拍应用程序; Fastly,间歇性禁食应用程序; Kite，一个漂亮的投资交易应用程序。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-19-08-50-47.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-19-08-51-18.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-19-08-51-43.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="介绍-Flutter-2-2"><a href="#介绍-Flutter-2-2" class="headerlink" title="介绍 Flutter 2.2"></a>介绍 Flutter 2.2</h3><p>Flutter 2.2 发布的重点是改进开发体验，以帮助您向客户提供更可靠、性能更好的应用程序。</p><p>Sound null safety 现在是默认的新项目。空安全增加了对空引用异常的保护，使开发人员能够在代码中表达不可空类型。由于 Dart 的实现是合理的，编译器可以在运行时消除空检查，从而提高应用程序的性能。这个生态系统反应迅速，大约有 5000 个软件包已经升级到支持空安全。</p><p>这个版本还有很多性能改进: 对于 web 应用，我们使用服务工作者提供后台缓存; 对于 Android 应用，Flutter 支持延迟组件; 对于 iOS，我们一直在开发工具来预编译着色器，以消除或减少首次运行的 jank。我们还为 DevTools 套件添加了一些新特性，帮助您理解如何在应用程序中分配内存，以及对第三方工具扩展的支持。</p><p>此外，我们一直致力于一些重要的改进领域，如改善网页目标的可访问性。</p><p>我们的工作超越了 Flutter 的核心。我们还与其他谷歌团队合作，帮助将 Flutter 整合到我们更广泛的开发者堆栈中。特别是，我们继续建立可信赖的服务，帮助开发者负责任地将他们的应用货币化。我们的新广告 SDK 是更新在这个版本的零安全和自适应横幅格式的支持。我们还引入了一个新的支付插件，与谷歌支付团队建立了合作关系，让你可以在 iOS 和安卓系统上支付实体商品。我们更新了我们的应用内购买插件，以及一个匹配的代码。</p><ul><li><p>ads<br><a href="https://developers.google.com/admob/flutter/quick-start" target="_blank" rel="noopener">https://developers.google.com/admob/flutter/quick-start</a></p></li><li><p>pay<br><a href="http://pub.dev/packages/pay" target="_blank" rel="noopener">http://pub.dev/packages/pay</a></p></li><li><p>in_app_purchase<br><a href="https://pub.dev/packages/in_app_purchase" target="_blank" rel="noopener">https://pub.dev/packages/in_app_purchase</a></p></li><li><p>codelabs flutter-in-app-purchases<br><a href="https://codelabs.developers.google.com/codelabs/flutter-in-app-purchases" target="_blank" rel="noopener">https://codelabs.developers.google.com/codelabs/flutter-in-app-purchases</a></p></li></ul><p>作为“秘密武器”的 Flutter，Dart 也得到一个更新，在这个版本。Dart 2.13 扩展了对本地互操作性的支持，在 FFI 中支持数组和打包结构。它还包括对类型别名的支持，这提高了可读性，并为某些重构场景提供了一种温和的方式。我们继续为更广泛的生态系统添加集成，使用 Dart GitHub Action 和针对基于云的业务逻辑部署进行优化的策划的 Docker Official Image。</p><ul><li><p>github action<br><a href="https://github.com/marketplace/actions/setup-dart-sdk" target="_blank" rel="noopener">https://github.com/marketplace/actions/setup-dart-sdk</a></p></li><li><p>ocker Official Image<br><a href="https://hub.docker.com/_/dart" target="_blank" rel="noopener">https://hub.docker.com/_/dart</a></p></li></ul><h3 id="不仅仅是一个谷歌项目"><a href="#不仅仅是一个谷歌项目" class="headerlink" title="不仅仅是一个谷歌项目"></a>不仅仅是一个谷歌项目</h3><p>虽然谷歌仍然是 Flutter 项目的主要贡献者，但我们很高兴看到 Flutter 周围更广泛的生态系统的发展。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-19-08-56-12.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>最近几个月来，Flutter 增长的一个特别领域是不断扩展到越来越多的平台和操作系统。在 Flutter 参与，我们宣布，丰田是带来扑动到他们的下一代汽车信息娱乐系统。上个月，Canonical 发布了他们的第一个 Ubuntu 版本，带有 Flutter 的集成支持，Snap 的集成和韦兰的支持。</p><p><a href="https://medium.com/googleplaydev/seamless-multi-platform-app-development-with-flutter-ea0e8003b0f9#f53d" target="_blank" rel="noopener">https://medium.com/googleplaydev/seamless-multi-platform-app-development-with-flutter-ea0e8003b0f9#f53d</a></p><p><a href="https://ubuntu.com/blog/ubuntu-21-04-is-here" target="_blank" rel="noopener">https://ubuntu.com/blog/ubuntu-21-04-is-here</a></p><p>两个新的合作伙伴展示了这个不断增长的生态系统。三星正在将 Flutter 移植到 Tizen，并提供了一个其他人也可以贡献的开放源代码库。索尼正在努力为嵌入式 Linux 提供解决方案。</p><p><a href="https://github.com/flutter-tizen/flutter-tizen" target="_blank" rel="noopener">https://github.com/flutter-tizen/flutter-tizen</a></p><p><a href="https://github.com/sony/flutter-embedded-linux" target="_blank" rel="noopener">https://github.com/sony/flutter-embedded-linux</a></p><p>设计师也从这个项目的开源性质中受益，Adobe 公布了更新后的 XD to Flutter 插件。Adobe XD 为设计师提供了一个很好的实验和迭代的方式，现在有了增强的 Flutter 支持，设计师和开发人员可以在同一资产上协作，比以往更快地将伟大的想法投入到生产中。</p><p><a href="https://medium.com/adobetech/announcing-xd-to-flutter-v2-0-82d09f3909a7" target="_blank" rel="noopener">https://medium.com/adobetech/announcing-xd-to-flutter-v2-0-82d09f3909a7</a></p><p>最后，微软将继续与我们合作; 除了 Surface 团队一直在使用 Flutter 构建可折叠体验的工作外，本周还将看到为 Windows 10 构建的 UWP 应用程序 Flutter 的 alpha 支持。我们很高兴看到更多的应用程序能够利用 Flutter 内置的平台适应性，在移动、桌面、网络和其他领域提供更好的体验。</p><p><a href="https://flutter.dev/desktop#windows-uwp" target="_blank" rel="noopener">https://flutter.dev/desktop#windows-uwp</a></p><h3 id="建立伟大的-Experiences"><a href="#建立伟大的-Experiences" class="headerlink" title="建立伟大的 Experiences"></a>建立伟大的 Experiences</h3><p>最重要的是，我们建立 Flutter 来帮助开发者建立伟大的体验。我们被应用程序开发可以做得更好这个想法激励着: 我们可以通过消除传统的阻碍接触到你的受众的障碍来增强你的能力。</p><p>我们喜欢看你如何让 Flutter 工作。一个例子是美国退伍军人管理局的一个项目。下面的视频展示了他们的 Flutter 应用程序是如何帮助他们提供创伤后应激障碍士兵康复。</p><p>通过在 Google i/o 上举办各种各样的关于 Flutter 的研讨会、演示会和点播会议，我们很高兴与大家分享我们的工作。别忘了看看我们有趣的照相亭网络应用，它是用 Flutter 开发的，它可以让你和我们的 Dash 吉祥物和她的朋友们创建一张自拍！</p><p><a href="https://events.google.com/io/program/content?4=topic_flutter" target="_blank" rel="noopener">https://events.google.com/io/program/content?4=topic_flutter</a></p><p><a href="https://photobooth.flutter.dev/" target="_blank" rel="noopener">https://photobooth.flutter.dev/</a></p><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/public-qrcode.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter ModalBottomSheet 指导</title>
    <link href="https://blog.ducafecat.tech/2021/05/18/translation/flutter-modalbottomsheet-for-beginners/"/>
    <id>https://blog.ducafecat.tech/2021/05/18/translation/flutter-modalbottomsheet-for-beginners/</id>
    <published>2021-05-17T16:00:00.000Z</published>
    <updated>2021-05-18T01:22:29.868Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-18-09-22-09.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="老铁记得-转发-，猫哥会呈现更多-Flutter-好文"><a href="#老铁记得-转发-，猫哥会呈现更多-Flutter-好文" class="headerlink" title="老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~"></a>老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~</h2><h2 id="微信-flutter-研修群-ducafecat"><a href="#微信-flutter-研修群-ducafecat" class="headerlink" title="微信 flutter 研修群 ducafecat"></a>微信 flutter 研修群 ducafecat</h2><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://evandrmb.medium.com/flutter-modalbottomsheet-for-beginners-e5f3af271076" target="_blank" rel="noopener">https://evandrmb.medium.com/flutter-modalbottomsheet-for-beginners-e5f3af271076</a></p></blockquote><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/evandrmb/bottom_sheet" target="_blank" rel="noopener">https://github.com/evandrmb/bottom_sheet</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://material.io/components/sheets-bottom" target="_blank" rel="noopener">https://material.io/components/sheets-bottom</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><p>根据材质设计指南，底部表是一个小工具，用于显示锚定在屏幕底部的附加内容。虽然了解使用这个的设计规则很好，但这不是本文的目标。要了解更多关于底板设计原则的详细信息，请参阅“<a href="https://material.io/components/sheets-bottom" target="_blank" rel="noopener">Sheets: bottom — Material Design</a>”。</p><p>现在你知道了 BottomSheet，你可能会问自己: 什么是 ModalBottomSheet？我们如何使用他们在 Flutter？</p><p>好的，第一个问题，有两种底层表: 模态的和持久的。当用户与屏幕交互时，持久化保持可见。谷歌地图应用就是一个例子。</p><p>另一方面，模式化的操作会阻止用户在应用程序中做其他动作。您可以使用它们来确认某些操作，或者请求额外的数据，比如询问用户在电子商务应用程序中订购时需要多少交换，等等。</p><p>在本文中，我们将通过创建一个简单的体重跟踪应用程序来展示如何使用它，在这个应用程序中我们可以提交我们的体重并查看我们之前的体重。我们不会输入应用程序的详细信息，而是直接进入 ModalBottomSheet 实现。</p><p>要显示它，您需要从具有 Scaffold 的上下文调用 showModalBottomSheet，否则，您将得到一个错误。也就是说，让我们开始构建我们的表格。</p><p>首先要知道的是 ModalBottomSheets 的高度默认为屏幕的一半，为了改变它，必须传递 true 给 isScrollControlled 参数，并返回一个与我们期望的大小相匹配的小部件，所以让我们这样做。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> addWeight() &#123;</span><br><span class="line">    showModalBottomSheet(</span><br><span class="line">      isScrollControlled: <span class="keyword">true</span>,</span><br><span class="line">      context: context,</span><br><span class="line">      builder: (context) &#123;</span><br><span class="line">        <span class="keyword">var</span> date = <span class="built_in">DateTime</span>.now();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> Container(</span><br><span class="line">          height: <span class="number">302</span>,</span><br><span class="line">          padding: <span class="keyword">const</span> EdgeInsets.all(<span class="number">16.0</span>),</span><br><span class="line">          child: Column(</span><br><span class="line">            crossAxisAlignment: CrossAxisAlignment.start,</span><br><span class="line">            children: [</span><br><span class="line"></span><br><span class="line">            ],</span><br><span class="line">          ),</span><br><span class="line">        );</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>现在，我们需要添加一些东西，以便我们的用户可以输入他们的权重让我们添加一个 TextInput 并给它一个 TextEditingController (这种方式即使我们的工作表意外关闭时，用户再次打开它，它的值仍然存在)。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> addWeight() &#123;</span><br><span class="line">    showModalBottomSheet(</span><br><span class="line">      isScrollControlled: <span class="keyword">true</span>,</span><br><span class="line">      context: context,</span><br><span class="line">      builder: (context) &#123;</span><br><span class="line">        <span class="keyword">var</span> date = <span class="built_in">DateTime</span>.now();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> Container(</span><br><span class="line">          height: <span class="number">302</span>,</span><br><span class="line">          padding: <span class="keyword">const</span> EdgeInsets.all(<span class="number">16.0</span>),</span><br><span class="line">          child: Column(</span><br><span class="line">            crossAxisAlignment: CrossAxisAlignment.start,</span><br><span class="line">            children: [</span><br><span class="line">      padding: EdgeInsets.only(bottom: <span class="number">24.0</span>),</span><br><span class="line">                child: Text(</span><br><span class="line">                  <span class="string">'Register Weight'</span>,</span><br><span class="line">                  style: Styles.titleStyle,</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">              TextField(</span><br><span class="line">                controller: weightInputController,</span><br><span class="line">                keyboardType: TextInputType.number,</span><br><span class="line">                decoration: InputDecoration(</span><br><span class="line">                  labelText: <span class="string">'Weight (KG)'</span>,</span><br><span class="line">                  border: OutlineInputBorder(</span><br><span class="line">                    borderRadius: Styles.borderRadius,</span><br><span class="line">                  ),</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">            ],</span><br><span class="line">          ),</span><br><span class="line">        );</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>看起来不错，但现在我们有麻烦了。当用户点击我们的 TextField 键盘在它上面，为什么？当键盘打开时，我们的工作表不会调整位置，我们可以把工作表做得更大，但这不能解决我们的问题，因为我们仍然需要添加一个字段，用户可以在其中输入他们记录重量的日期。那么解决方案是什么呢？这很简单，如果打开键盘，我们让我们的工作表在它上面，我们可以实现这一点，给我们的容器一个边距的边缘。在 viewinset.bottom 中，我们将得到以下结果:</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-18-08-58-03.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>它开始看起来很漂亮，但是你不认为如果我们在纸上加一些半径会更平滑吗？让我们通过添加如下所示的 shapeproperty 来实现。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">showModalBottomSheet(</span><br><span class="line">      isScrollControlled: <span class="keyword">true</span>,</span><br><span class="line">      context: context,</span><br><span class="line">      shape: <span class="keyword">const</span> RoundedRectangleBorder(</span><br><span class="line">          borderRadius: BorderRadius.only(</span><br><span class="line">            topLeft: Radius.circular(<span class="number">8</span>),</span><br><span class="line">            topRight: Radius.circular(<span class="number">8</span>),</span><br><span class="line">          )),</span><br></pre></td></tr></table></figure><p>酷，现在让我们做我们的小工具来选择一个日期。通常，您会创建一个小部件来处理这个逻辑，并使用 ValueChanged 函数公开选定的值，但是为了说明您将来可能面临的问题，让我们在工作表本身内部创建所有逻辑。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> addWeight() &#123;</span><br><span class="line">    showModalBottomSheet(</span><br><span class="line">      isScrollControlled: <span class="keyword">true</span>,</span><br><span class="line">      context: context,</span><br><span class="line">      shape: <span class="keyword">const</span> RoundedRectangleBorder(</span><br><span class="line">          borderRadius: BorderRadius.only(</span><br><span class="line">        topLeft: Radius.circular(<span class="number">8</span>),</span><br><span class="line">        topRight: Radius.circular(<span class="number">8</span>),</span><br><span class="line">      )),</span><br><span class="line">      builder: (context) &#123;</span><br><span class="line">        <span class="keyword">return</span> Container(</span><br><span class="line">          height: <span class="number">360</span>,</span><br><span class="line">          width: MediaQuery.of(context).size.width,</span><br><span class="line">          margin:</span><br><span class="line">              EdgeInsets.only(bottom: MediaQuery.of(context).viewInsets.bottom),</span><br><span class="line">          padding: <span class="keyword">const</span> EdgeInsets.all(<span class="number">16.0</span>),</span><br><span class="line">          decoration: BoxDecoration(</span><br><span class="line">            borderRadius: BorderRadius.circular(<span class="number">20</span>),</span><br><span class="line">          ),</span><br><span class="line">          child: Column(</span><br><span class="line">            crossAxisAlignment: CrossAxisAlignment.start,</span><br><span class="line">            children: [</span><br><span class="line">              <span class="keyword">const</span> Padding(</span><br><span class="line">                padding: EdgeInsets.only(bottom: <span class="number">24.0</span>),</span><br><span class="line">                child: Text(</span><br><span class="line">                  <span class="string">'Register Weight'</span>,</span><br><span class="line">                  style: Styles.titleStyle,</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">              TextField(</span><br><span class="line">                controller: weightInputController,</span><br><span class="line">                keyboardType: TextInputType.number,</span><br><span class="line">                decoration: InputDecoration(</span><br><span class="line">                  labelText: <span class="string">'Weight (KG)'</span>,</span><br><span class="line">                  border: OutlineInputBorder(</span><br><span class="line">                    borderRadius: Styles.borderRadius,</span><br><span class="line">                  ),</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">              Padding(</span><br><span class="line">                padding: <span class="keyword">const</span> EdgeInsets.symmetric(vertical: <span class="number">8.0</span>),</span><br><span class="line">                child: Row(</span><br><span class="line">                  children: [</span><br><span class="line">                    Expanded(</span><br><span class="line">                      child: Text(</span><br><span class="line">                        <span class="string">'Select a date'</span>,</span><br><span class="line">                        style: TextStyle(</span><br><span class="line">                          fontSize: <span class="number">14</span>,</span><br><span class="line">                          fontWeight: FontWeight.w500,</span><br><span class="line">                        ),</span><br><span class="line">                      ),</span><br><span class="line">                    ),</span><br><span class="line">                    Container(</span><br><span class="line">                      padding: <span class="keyword">const</span> EdgeInsets.symmetric(horizontal: <span class="number">4</span>),</span><br><span class="line">                      margin: <span class="keyword">const</span> EdgeInsets.symmetric(vertical: <span class="number">8.0</span>),</span><br><span class="line">                      height: <span class="number">36</span>,</span><br><span class="line">                      decoration: BoxDecoration(</span><br><span class="line">                        borderRadius: Styles.borderRadius,</span><br><span class="line">                      ),</span><br><span class="line">                      child: OutlinedButton(</span><br><span class="line">                        onPressed: () <span class="keyword">async</span> &#123;</span><br><span class="line">                          <span class="keyword">final</span> now = <span class="built_in">DateTime</span>.now();</span><br><span class="line"></span><br><span class="line">                          <span class="keyword">final</span> result = <span class="keyword">await</span> showDatePicker(</span><br><span class="line">                              context: context,</span><br><span class="line">                              initialDate: now,</span><br><span class="line">                              firstDate: now.subtract(</span><br><span class="line">                                <span class="keyword">const</span> <span class="built_in">Duration</span>(</span><br><span class="line">                                  days: <span class="number">90</span>,</span><br><span class="line">                                ),</span><br><span class="line">                              ),</span><br><span class="line">                              lastDate: now);</span><br><span class="line"></span><br><span class="line">                          <span class="keyword">if</span> (result != <span class="keyword">null</span>) &#123;</span><br><span class="line">                            setState(() &#123;</span><br><span class="line">                              selectedDate = result;</span><br><span class="line">                            &#125;);</span><br><span class="line">                          &#125;</span><br><span class="line">                        &#125;,</span><br><span class="line">                        child: Row(</span><br><span class="line">                          mainAxisAlignment: MainAxisAlignment.spaceBetween,</span><br><span class="line">                          children: [</span><br><span class="line">                            Padding(</span><br><span class="line">                              padding: <span class="keyword">const</span> EdgeInsets.only(right: <span class="number">16.0</span>),</span><br><span class="line">                              child:</span><br><span class="line">                                  Text(<span class="string">'<span class="subst">$&#123;formatDateToString(selectedDate)&#125;</span>'</span>),</span><br><span class="line">                            ),</span><br><span class="line">                            Icon(Icons.calendar_today_outlined),</span><br><span class="line">                          ],</span><br><span class="line">                        ),</span><br><span class="line">                      ),</span><br><span class="line">                    ),</span><br><span class="line">                  ],</span><br><span class="line">                ),</span><br><span class="line">              )</span><br><span class="line"></span><br><span class="line">            ],</span><br><span class="line">          ),</span><br><span class="line">        );</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>需要注意的是，我已经在我们的主页中添加了 selectedDatevariable，你可以在我最后提供的存储库链接中看到这一点。但是现在我们遇到了一个问题，尽管我们正在使用 setstateoutlinebutton 更新 selectedDate 的值，但是在重新打开工作表之前，仍然会显示旧的值，如下所示。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-18-08-59-31.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>为了解决这个问题，我们需要将 OutlinedButton 传递给 StatefulBuilder (或者您可以创建一个新的小部件并使用回调公开更改，正如我前面所说的，顺便说一下，这是更正确的方法)。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> addWeight() &#123;</span><br><span class="line">    showModalBottomSheet(</span><br><span class="line">      isScrollControlled: <span class="keyword">true</span>,</span><br><span class="line">      context: context,</span><br><span class="line">      shape: <span class="keyword">const</span> RoundedRectangleBorder(</span><br><span class="line">          borderRadius: BorderRadius.only(</span><br><span class="line">        topLeft: Radius.circular(<span class="number">8</span>),</span><br><span class="line">        topRight: Radius.circular(<span class="number">8</span>),</span><br><span class="line">      )),</span><br><span class="line">      builder: (context) &#123;</span><br><span class="line">        <span class="keyword">return</span> Container(</span><br><span class="line">          height: <span class="number">360</span>,</span><br><span class="line">          width: MediaQuery.of(context).size.width,</span><br><span class="line">          margin:</span><br><span class="line">              EdgeInsets.only(bottom: MediaQuery.of(context).viewInsets.bottom),</span><br><span class="line">          padding: <span class="keyword">const</span> EdgeInsets.all(<span class="number">16.0</span>),</span><br><span class="line">          decoration: BoxDecoration(</span><br><span class="line">            borderRadius: BorderRadius.circular(<span class="number">20</span>),</span><br><span class="line">          ),</span><br><span class="line">          child: Column(</span><br><span class="line">            crossAxisAlignment: CrossAxisAlignment.start,</span><br><span class="line">            children: [</span><br><span class="line">              <span class="keyword">const</span> Padding(</span><br><span class="line">                padding: EdgeInsets.only(bottom: <span class="number">24.0</span>),</span><br><span class="line">                child: Text(</span><br><span class="line">                  <span class="string">'Register Weight'</span>,</span><br><span class="line">                  style: Styles.titleStyle,</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">              TextField(</span><br><span class="line">                controller: weightInputController,</span><br><span class="line">                keyboardType: TextInputType.number,</span><br><span class="line">                decoration: InputDecoration(</span><br><span class="line">                  labelText: <span class="string">'Weight (KG)'</span>,</span><br><span class="line">                  border: OutlineInputBorder(</span><br><span class="line">                    borderRadius: Styles.borderRadius,</span><br><span class="line">                  ),</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">              Padding(</span><br><span class="line">                padding: <span class="keyword">const</span> EdgeInsets.symmetric(vertical: <span class="number">8.0</span>),</span><br><span class="line">                child: Row(</span><br><span class="line">                  children: [</span><br><span class="line">                    Expanded(</span><br><span class="line">                      child: Text(</span><br><span class="line">                        <span class="string">'Select a date'</span>,</span><br><span class="line">                        style: TextStyle(</span><br><span class="line">                          fontSize: <span class="number">14</span>,</span><br><span class="line">                          fontWeight: FontWeight.w500,</span><br><span class="line">                        ),</span><br><span class="line">                      ),</span><br><span class="line">                    ),</span><br><span class="line">                    Container(</span><br><span class="line">                        padding: <span class="keyword">const</span> EdgeInsets.symmetric(horizontal: <span class="number">4</span>),</span><br><span class="line">                        margin: <span class="keyword">const</span> EdgeInsets.symmetric(vertical: <span class="number">8.0</span>),</span><br><span class="line">                        height: <span class="number">36</span>,</span><br><span class="line">                        decoration: BoxDecoration(</span><br><span class="line">                          borderRadius: Styles.borderRadius,</span><br><span class="line">                        ),</span><br><span class="line">                        child: StatefulBuilder(</span><br><span class="line">                          builder: (context, setState) &#123;</span><br><span class="line">                            <span class="keyword">return</span> OutlinedButton(</span><br><span class="line">                              onPressed: () <span class="keyword">async</span> &#123;</span><br><span class="line">                                <span class="keyword">final</span> now = <span class="built_in">DateTime</span>.now();</span><br><span class="line"></span><br><span class="line">                                <span class="keyword">final</span> result = <span class="keyword">await</span> showDatePicker(</span><br><span class="line">                                    context: context,</span><br><span class="line">                                    initialDate: now,</span><br><span class="line">                                    firstDate: now.subtract(</span><br><span class="line">                                      <span class="keyword">const</span> <span class="built_in">Duration</span>(</span><br><span class="line">                                        days: <span class="number">90</span>,</span><br><span class="line">                                      ),</span><br><span class="line">                                    ),</span><br><span class="line">                                    lastDate: now);</span><br><span class="line"></span><br><span class="line">                                <span class="keyword">if</span> (result != <span class="keyword">null</span>) &#123;</span><br><span class="line">                                  setState(() &#123;</span><br><span class="line">                                    selectedDate = result;</span><br><span class="line">                                  &#125;);</span><br><span class="line">                                &#125;</span><br><span class="line">                              &#125;,</span><br><span class="line">                              child: Row(</span><br><span class="line">                                mainAxisAlignment:</span><br><span class="line">                                    MainAxisAlignment.spaceBetween,</span><br><span class="line">                                children: [</span><br><span class="line">                                  Padding(</span><br><span class="line">                                    padding: <span class="keyword">const</span> EdgeInsets.only(right: <span class="number">16.0</span>),</span><br><span class="line">                                    child: Text(</span><br><span class="line">                                        <span class="string">'<span class="subst">$&#123;formatDateToString(selectedDate)&#125;</span>'</span>),</span><br><span class="line">                                  ),</span><br><span class="line">                                  Icon(Icons.calendar_today_outlined),</span><br><span class="line">                                ],</span><br><span class="line">                              ),</span><br><span class="line">                            );</span><br><span class="line">                          &#125;,</span><br><span class="line">                        )),</span><br><span class="line">                  ],</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">              Expanded(child: Container()),</span><br><span class="line">              ButtonBar(</span><br><span class="line">                children: [</span><br><span class="line">                  ElevatedButton(</span><br><span class="line">                    onPressed: () =&gt; Navigator.pop(context),</span><br><span class="line">                    child: Text(<span class="string">'Cancel'</span>,</span><br><span class="line">                        style: TextStyle(</span><br><span class="line">                          color: Theme.of(context).primaryColor,</span><br><span class="line">                        )),</span><br><span class="line">                    style: ElevatedButton.styleFrom(</span><br><span class="line">                      primary: Colors.white,</span><br><span class="line">                      <span class="comment">// minimumSize: Size(96, 48),</span></span><br><span class="line">                    ),</span><br><span class="line">                  ),</span><br><span class="line">                  ElevatedButton(</span><br><span class="line">                      onPressed: () &#123;</span><br><span class="line">                        setState(() &#123;</span><br><span class="line">                          weights.insert(</span><br><span class="line">                              <span class="number">0</span>,</span><br><span class="line">                              WeightModel(</span><br><span class="line">                                value: <span class="built_in">double</span>.parse(weightInputController.text),</span><br><span class="line">                                date: selectedDate,</span><br><span class="line">                              ));</span><br><span class="line">                        &#125;);</span><br><span class="line">                        Navigator.pop(context);</span><br><span class="line">                      &#125;,</span><br><span class="line">                      child: <span class="keyword">const</span> Text(<span class="string">'Register'</span>)),</span><br><span class="line">                ],</span><br><span class="line">              ),</span><br><span class="line">            ],</span><br><span class="line">          ),</span><br><span class="line">        );</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>这是我们的 ModalBottomSheet 的最终版本！</p><p><a href="https://github.com/evandrmb/bottom_sheet" target="_blank" rel="noopener">https://github.com/evandrmb/bottom_sheet</a></p><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter开源项目 - 音乐播放器 BlackHole</title>
    <link href="https://blog.ducafecat.tech/2021/05/17/flutter-opensource/flutter-music-player-blackhole/"/>
    <id>https://blog.ducafecat.tech/2021/05/17/flutter-opensource/flutter-music-player-blackhole/</id>
    <published>2021-05-16T16:00:00.000Z</published>
    <updated>2021-05-17T01:06:16.551Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-17-08-58-08.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="老铁记得-转发-，猫哥会呈现更多-Flutter-好文"><a href="#老铁记得-转发-，猫哥会呈现更多-Flutter-好文" class="headerlink" title="老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~"></a>老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~</h2><h2 id="微信-flutter-研修群-ducafecat"><a href="#微信-flutter-研修群-ducafecat" class="headerlink" title="微信 flutter 研修群 ducafecat"></a>微信 flutter 研修群 ducafecat</h2><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><blockquote><p><a href="https://github.com/Sangwan5688/BlackHole" target="_blank" rel="noopener">https://github.com/Sangwan5688/BlackHole</a></p></blockquote><h2 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h2><p>Music Search<br>Top Playlists<br>Local and Global Top 200 songs<br>Streaming (320kbps)<br>Add Songs to Favorite<br>Download Support (320kbps with ID3 tags)<br>Play Online as well as Offline Songs</p><h2 id="截图"><a href="#截图" class="headerlink" title="截图"></a>截图</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-17-08-58-19.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-17-08-58-25.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-17-08-58-33.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-17-08-58-42.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-17-08-58-48.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="开源" scheme="https://blog.ducafecat.tech/categories/%E5%BC%80%E6%BA%90/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>企业级Flutter项目-走出第一步</title>
    <link href="https://blog.ducafecat.tech/2021/05/14/translation/flutter-in-business-first-steps/"/>
    <id>https://blog.ducafecat.tech/2021/05/14/translation/flutter-in-business-first-steps/</id>
    <published>2021-05-13T16:00:00.000Z</published>
    <updated>2021-05-14T03:08:02.511Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-14-11-08-00.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="老铁记得-转发-，猫哥会呈现更多-Flutter-好文"><a href="#老铁记得-转发-，猫哥会呈现更多-Flutter-好文" class="headerlink" title="老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~"></a>老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~</h2><h2 id="微信-flutter-研修群-ducafecat"><a href="#微信-flutter-研修群-ducafecat" class="headerlink" title="微信 flutter 研修群 ducafecat"></a>微信 flutter 研修群 ducafecat</h2><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://matteozajac.medium.com/flutter-in-business-first-steps-d8d0648c913b" target="_blank" rel="noopener">https://matteozajac.medium.com/flutter-in-business-first-steps-d8d0648c913b</a></p></blockquote><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://pub.dev/packages/flutter_bloc" target="_blank" rel="noopener">https://pub.dev/packages/flutter_bloc</a></li><li><a href="https://pub.dev/packages/chopper" target="_blank" rel="noopener">https://pub.dev/packages/chopper</a></li><li><a href="https://pub.dev/packages/json_serializable" target="_blank" rel="noopener">https://pub.dev/packages/json_serializable</a></li><li><a href="https://dart.dev/guides/language/effective-dart" target="_blank" rel="noopener">https://dart.dev/guides/language/effective-dart</a></li><li><a href="https://plugins.jetbrains.com/plugin/12400-flutter-pub-version-checker" target="_blank" rel="noopener">https://plugins.jetbrains.com/plugin/12400-flutter-pub-version-checker</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><p>大多数时候你必须为你的应用程序的技术债务付款。如果你在 MVP 之后没有良好的体系结构，那么现在是时候停下来，重构一下，让你的未来变得更加容易。事实上，在没有架构的情况下编写较小的应用程序更容易—- 很难不同意这一点—- 但是作为一个成熟的技术专家来考虑。</p><p>测试覆盖率，设计模式，代码分析，这些都是我正在考虑的。本文将介绍我们如何在提高代码质量和团队愉悦感的同时，交付出色的应用程序。</p><h3 id="从架构开始"><a href="#从架构开始" class="headerlink" title="从架构开始"></a>从架构开始</h3><p>Provider, BLoC, Redux ーー如果这些词听起来不熟悉，请在继续前进之前对它们有基本的了解。</p><p>它们都有优点和缺点，你可以自己选择。</p><p>拥有 Flutter 的知识和如何人们已经适应项目结构 BLoC 似乎是最简单的方式开始。</p><p>恕我直言，展示和理解 BLoC 如何工作的最好方式是看下面的图表。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-14-10-48-30.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>表示层将事件发送到 BLoC</li><li>数据层异步执行较长的操作，例如从 API 或数据库获取数据</li><li>对用户界面产生返回值</li></ul><p>就这么简单。</p><p>自己实现 BLoC 模式这真的是很好的锻炼，你应该一次性完全理解它背后的流程。如果你已经这样做了</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-14-10-50-01.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>然后使用..。</p><h3 id="BLoC-库"><a href="#BLoC-库" class="headerlink" title="BLoC 库"></a>BLoC 库</h3><p>幸运的是，社区没有让人失望。你不必每次都写 BLoC，只需使用这个方便的 library ー FlutterBloc。</p><p>我想指出几个关键特征:</p><ul><li>Event — 没有样板的事件-状态通信,</li><li>Dependency 依赖注入通过 BlocProvider,</li><li>BlocBuilder 根据接收的状态构建小部件,</li><li>BlocDelegate 使全局处理错误更加容易,</li><li>BLoC 可以(也应该)进行测试</li></ul><p><a href="https://pub.dev/packages/flutter_bloc" target="_blank" rel="noopener">https://pub.dev/packages/flutter_bloc</a></p><h3 id="采用-REST-API"><a href="#采用-REST-API" class="headerlink" title="采用 REST API"></a>采用 REST API</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-14-10-52-06.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>如果你创建了一个移动应用程序，你将连接到一个远程数据源。最常用的方法是 REST api 和 JSON。当然，你已经这样做了很多次，所以没有更多的解释。</p><p>来自 Android world 的消息表明你已经使用过 Retrofit、 GSON 或莫希 JSON 转换器。这些真的是非常棒的工具。</p><p>Flutter 中使用 chopper 库</p><p><a href="https://pub.dev/packages/chopper" target="_blank" rel="noopener">https://pub.dev/packages/chopper</a></p><p>在这两种情况下，您都需要为您的 API 定义抽象类，并使用 <code>flutter pub run build_runner build</code> 生成它。</p><p>接下来，没有类似 GSON 的库可以将 JSON 转换为 POJO。您需要编写自己的映射器函数，或者使用 <code>json_serializable</code>，它通过注释 Dart 类自动生成转换到 JSON 和从 JSON 转换的代码。这个过程本身非常简单，你肯定会习惯的。</p><p><a href="https://pub.dev/packages/json_serializable" target="_blank" rel="noopener">https://pub.dev/packages/json_serializable</a></p><h3 id="本地持久化"><a href="#本地持久化" class="headerlink" title="本地持久化"></a>本地持久化</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-14-10-55-34.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>在大多数情况下，当需要缓存我们的数据时，Sqflite 是我们的首选。它只是一个 SQLite Dart 实现，支持:</p><ul><li>原始 SQL 查询,</li><li>插入/查询/更新/删除的方便助手,</li><li>批次ー避免性能问题。</li></ul><h3 id="分析代码"><a href="#分析代码" class="headerlink" title="分析代码"></a>分析代码</h3><p>在项目中拥有并保持代码样式对于团队来说可能是至关重要的。与体系结构一样，它也是维护项目和团队成员之间的质量、一致性的关键因素。</p><p>默认情况下，ide 集成了默认的静态分析，您可以根据需要扩展和调整这些分析。在他们的文档中很好地描述了 Effective 有自己的线头规则ーー Effective Dart。如果您喜欢这种风格(我确实喜欢) ，来自 Google 的开发团队就创建了一个带有这种规则集的包(pedantic | Dart 包)</p><ul><li><p>Effective Dart<br><a href="https://dart.dev/guides/language/effective-dart" target="_blank" rel="noopener">https://dart.dev/guides/language/effective-dart</a></p></li><li><p>pedantic<br><a href="https://pub.dev/packages/pedantic" target="_blank" rel="noopener">https://pub.dev/packages/pedantic</a></p></li></ul><h3 id="值得一提"><a href="#值得一提" class="headerlink" title="值得一提"></a>值得一提</h3><p>手动检查每个包的版本可能有点烦人。对于 Android Studio 用户，你可以查看这个插件 Flutter Pub Version Checker ー For IntelliJ IDEA，Android Studio 为你提供。突出显示带有新版本的软件包非常方便。</p><p><a href="https://plugins.jetbrains.com/plugin/12400-flutter-pub-version-checker" target="_blank" rel="noopener">https://plugins.jetbrains.com/plugin/12400-flutter-pub-version-checker</a></p><h3 id="待续"><a href="#待续" class="headerlink" title="待续"></a>待续</h3><p>这是一个关于我们公司内部使用的库和方法的快速总结。如果你正在寻找一些开始点，它也应该有助于你的项目，但作为 Flutter 已经演变，我们有许多可行的解决方案，共同的问题，这只是其中之一。在下一篇文章中，我将展示体系结构图，解释特定的层，并实现一个列表屏幕(从远程、本地持久化获取)。</p><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="开源-1"><a href="#开源-1" class="headerlink" title="开源"></a>开源</h4><p><a href="https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E5%BC%80%E6%BA%90/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter开源项目 - 响应式后台管理面板界面</title>
    <link href="https://blog.ducafecat.tech/2021/05/12/flutter-opensource/flutter-responsive-admin-panel-or-dashboard/"/>
    <id>https://blog.ducafecat.tech/2021/05/12/flutter-opensource/flutter-responsive-admin-panel-or-dashboard/</id>
    <published>2021-05-11T16:00:00.000Z</published>
    <updated>2021-05-11T23:57:16.200Z</updated>
    
    <content type="html"><![CDATA[<h2 id="老铁记得-转发-，猫哥会呈现更多-Flutter-好文"><a href="#老铁记得-转发-，猫哥会呈现更多-Flutter-好文" class="headerlink" title="老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~"></a>老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~</h2><h2 id="微信-flutter-研修群-ducafecat"><a href="#微信-flutter-研修群-ducafecat" class="headerlink" title="微信 flutter 研修群 ducafecat"></a>微信 flutter 研修群 ducafecat</h2><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>关于 Flutter V2 网络正式支持稳定的分支。今天我分享一个管理面板，或者你可以称它为仪表板 UI 。现在你可以使用 flutter 构建你的应用程序仪表板。这个仪表板包含几乎所有你需要的东西，如图表，表，显示信息的小卡片。它在网络、 macOS 应用程序、平板电脑以及安卓和 iOS 手机上都运行良好。是时候编写一次运行所有地方的代码了。是的，flutter 网络不是搜索引擎优化友好，但我们不需要搜索引擎优化的管理面板。</p><h2 id="项目地址"><a href="#项目地址" class="headerlink" title="项目地址"></a>项目地址</h2><p><a href="https://github.com/ducafecat/Flutter-Responsive-Admin-Panel-or-Dashboard" target="_blank" rel="noopener">https://github.com/ducafecat/Flutter-Responsive-Admin-Panel-or-Dashboard</a></p><h2 id="界面"><a href="#界面" class="headerlink" title="界面"></a>界面</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-12-07-33-10.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-12-07-33-28.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-12-07-33-50.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-12-07-34-24.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-12-07-38-08.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="代码分析"><a href="#代码分析" class="headerlink" title="代码分析"></a>代码分析</h2><h3 id="核心代码-lib-responsive-dart"><a href="#核心代码-lib-responsive-dart" class="headerlink" title="核心代码 lib/responsive.dart"></a>核心代码 lib/responsive.dart</h3><p>通过 <code>MediaQuery</code> 查询界面宽高尺寸，来决定你是那个布局方案。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Responsive</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> Widget mobile;</span><br><span class="line">  <span class="keyword">final</span> Widget tablet;</span><br><span class="line">  <span class="keyword">final</span> Widget desktop;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> Responsive(&#123;</span><br><span class="line">    Key key,</span><br><span class="line">    <span class="meta">@required</span> <span class="keyword">this</span>.mobile,</span><br><span class="line">    <span class="keyword">this</span>.tablet,</span><br><span class="line">    <span class="meta">@required</span> <span class="keyword">this</span>.desktop,</span><br><span class="line">  &#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line"><span class="comment">// This size work fine on my design, maybe you need some customization depends on your design</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// This isMobile, isTablet, isDesktop helep us later</span></span><br><span class="line">  <span class="keyword">static</span> <span class="built_in">bool</span> isMobile(BuildContext context) =&gt;</span><br><span class="line">      MediaQuery.of(context).size.width &lt; <span class="number">850</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> <span class="built_in">bool</span> isTablet(BuildContext context) =&gt;</span><br><span class="line">      MediaQuery.of(context).size.width &lt; <span class="number">1100</span> &amp;&amp;</span><br><span class="line">      MediaQuery.of(context).size.width &gt;= <span class="number">850</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> <span class="built_in">bool</span> isDesktop(BuildContext context) =&gt;</span><br><span class="line">      MediaQuery.of(context).size.width &gt;= <span class="number">1100</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">final</span> Size _size = MediaQuery.of(context).size;</span><br><span class="line">    <span class="comment">// If our width is more than 1100 then we consider it a desktop</span></span><br><span class="line">    <span class="keyword">if</span> (_size.width &gt;= <span class="number">1100</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> desktop;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// If width it less then 1100 and more then 850 we consider it as tablet</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (_size.width &gt;= <span class="number">850</span> &amp;&amp; tablet != <span class="keyword">null</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> tablet;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Or less then that we called it mobile</span></span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> mobile;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="业务界面处理细节"><a href="#业务界面处理细节" class="headerlink" title="业务界面处理细节"></a>业务界面处理细节</h3><p>通过 <code>if (!Responsive.isMobile(context))</code> 这样的方式去判断执行</p><p>lib/screens/main/main_screen.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MainScreen</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      key: context.read&lt;MenuController&gt;().scaffoldKey,</span><br><span class="line">      drawer: SideMenu(),</span><br><span class="line">      body: SafeArea(</span><br><span class="line">        child: Row(</span><br><span class="line">          crossAxisAlignment: CrossAxisAlignment.start,</span><br><span class="line">          children: [</span><br><span class="line">            <span class="comment">// We want this side menu only for large screen</span></span><br><span class="line">            <span class="keyword">if</span> (Responsive.isDesktop(context))</span><br><span class="line">              Expanded(</span><br><span class="line">                <span class="comment">// default flex = 1</span></span><br><span class="line">                <span class="comment">// and it takes 1/6 part of the screen</span></span><br><span class="line">                child: SideMenu(),</span><br><span class="line">              ),</span><br><span class="line">            Expanded(</span><br><span class="line">              <span class="comment">// It takes 5/6 part of the screen</span></span><br><span class="line">              flex: <span class="number">5</span>,</span><br><span class="line">              child: DashboardScreen(),</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>lib/screens/dashboard/dashboard_screen.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DashboardScreen</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> SafeArea(</span><br><span class="line">      child: SingleChildScrollView(</span><br><span class="line">        padding: EdgeInsets.all(defaultPadding),</span><br><span class="line">        child: Column(</span><br><span class="line">          children: [</span><br><span class="line">            Header(),</span><br><span class="line">            SizedBox(height: defaultPadding),</span><br><span class="line">            Row(</span><br><span class="line">              crossAxisAlignment: CrossAxisAlignment.start,</span><br><span class="line">              children: [</span><br><span class="line">                Expanded(</span><br><span class="line">                  flex: <span class="number">5</span>,</span><br><span class="line">                  child: Column(</span><br><span class="line">                    children: [</span><br><span class="line">                      MyFiels(),</span><br><span class="line">                      SizedBox(height: defaultPadding),</span><br><span class="line">                      RecentFiles(),</span><br><span class="line">                      <span class="keyword">if</span> (Responsive.isMobile(context))</span><br><span class="line">                        SizedBox(height: defaultPadding),</span><br><span class="line">                      <span class="keyword">if</span> (Responsive.isMobile(context)) StarageDetails(),</span><br><span class="line">                    ],</span><br><span class="line">                  ),</span><br><span class="line">                ),</span><br><span class="line">                <span class="keyword">if</span> (!Responsive.isMobile(context))</span><br><span class="line">                  SizedBox(width: defaultPadding),</span><br><span class="line">                <span class="comment">// On Mobile means if the screen is less than 850 we dont want to show it</span></span><br><span class="line">                <span class="keyword">if</span> (!Responsive.isMobile(context))</span><br><span class="line">                  Expanded(</span><br><span class="line">                    flex: <span class="number">2</span>,</span><br><span class="line">                    child: StarageDetails(),</span><br><span class="line">                  ),</span><br><span class="line">              ],</span><br><span class="line">            )</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;老铁记得-转发-，猫哥会呈现更多-Flutter-好文&quot;&gt;&lt;a href=&quot;#老铁记得-转发-，猫哥会呈现更多-Flutter-好文&quot; class=&quot;headerlink&quot; title=&quot;老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~&quot;&gt;&lt;/a&gt;老
      
    
    </summary>
    
      <category term="开源" scheme="https://blog.ducafecat.tech/categories/%E5%BC%80%E6%BA%90/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 如何获取设备的唯一码</title>
    <link href="https://blog.ducafecat.tech/2021/05/11/translation/how-to-get-unique-device-details-in-flutter/"/>
    <id>https://blog.ducafecat.tech/2021/05/11/translation/how-to-get-unique-device-details-in-flutter/</id>
    <published>2021-05-10T16:00:00.000Z</published>
    <updated>2021-05-10T22:33:53.718Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-11-06-16-24.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="老铁记得-转发-，猫哥会呈现更多-Flutter-好文"><a href="#老铁记得-转发-，猫哥会呈现更多-Flutter-好文" class="headerlink" title="老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~"></a>老铁记得 转发 ，猫哥会呈现更多 Flutter 好文~~~~</h2><h2 id="微信-flutter-研修群-ducafecat"><a href="#微信-flutter-研修群-ducafecat" class="headerlink" title="微信 flutter 研修群 ducafecat"></a>微信 flutter 研修群 ducafecat</h2><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://medium.com/flutterdevs/how-to-get-unique-device-details-in-flutter-ced2dbe5f8e5" target="_blank" rel="noopener">https://medium.com/flutterdevs/how-to-get-unique-device-details-in-flutter-ced2dbe5f8e5</a></p></blockquote><h2 id="猫哥说"><a href="#猫哥说" class="headerlink" title="猫哥说"></a>猫哥说</h2><p>获取设备 id 是每一个 APP 都应该去做的，比如你访问唯一用户统计就需要。</p><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-11-06-16-41.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/flutter-devs/flutter_device_details_demo" target="_blank" rel="noopener">https://github.com/flutter-devs/flutter_device_details_demo</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://pub.dev/packages/device_info" target="_blank" rel="noopener">https://pub.dev/packages/device_info</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><p>一般来说，制作一个移动应用程序是一个极其令人难以置信和测试的任务。有许多可用的框架，这些框架为创建移动应用程序提供了极好的亮点。为了创建移动应用，Android 提供了一个基于 Java 和 Kotlin 语言的本地结构框架，而 iOS 提供了一个依赖于 Objective-C/Swift 语言的系统。</p><p>随后，我们需要两种独特的语言和结构来为这两种操作系统创建应用程序。今天，为了打破这种错综复杂的结构，已经提出了几个框架来帮助桌面应用程序同时使用这两种操作系统。这类框架被称为 <code>cross-platform</code> 跨平台开发工具。</p><p>在这个博客，我们将探索如何获得独特的设备细节.我们将实现一个演示程序，并获得独特的设备细节，为安卓和 IOS 使用设备信息包在您的 Flutter 应用程序。</p><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>Flutter 中得到当前设备数据的应用。如何利用 <a href="https://pub.dev/packages/device_info" target="_blank" rel="noopener">device_info</a> plugin 为 Android 和 IOS 提供独特的设备细节。在这一点上，当我们谈论一个独特的设备细节在本地，我们有 <code>Settings.Secure.ANDROID_ID</code> 获得一个独一无二的设备细节。</p><p><a href="https://pub.dev/packages/device_info" target="_blank" rel="noopener">https://pub.dev/packages/device_info</a></p><h3 id="演示"><a href="#演示" class="headerlink" title="演示"></a>演示</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-11-06-23-41.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>这个演示视频显示了如何获得一个独特的设备细节的 Flutter 。它显示了如何设备细节将工作使用设备信息包在您的 Flutter 应用程序。它会显示用户何时点击触发按钮，屏幕上显示的唯一设备 Andriod/Ios 信息，如设备名称、版本、标识符等。它会显示在你的设备上。</p><h3 id="实施"><a href="#实施" class="headerlink" title="实施"></a>实施</h3><ul><li>第一步: 添加依赖项</li></ul><p>将依赖项添加到 pubspec ー yaml 文件。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dependencies:</span><br><span class="line">  flutter:</span><br><span class="line">    sdk: flutter</span><br><span class="line">  device_info: ^0.4.0+4</span><br></pre></td></tr></table></figure><ul><li>第二步: 导入</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:device_info/device_info.dart'</span>;</span><br></pre></td></tr></table></figure><ul><li>第三步: 在应用程序的根目录中运行 flutter 软件包。</li></ul><h3 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h3><p>如何实现 dart 文件中的代码:</p><p>在 lib 文件夹中创建一个新的 dart 文件，名为 <code>device_detail_demo.dart</code>。</p><p>首先，我们将创建一个用户界面。在主体部分，我们将添加一个中心小部件。在内部，我们将添加一个列小部件。在这个小部件中，我们将添加一个 mainAxisAlignmnet 为中心。它是 children’s property ，添加 RaisedButton()。在这个按钮中，我们将添加填充、颜色和 OnPressed 功能。它的子属性，我们将文本“Device Details”。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Center(</span><br><span class="line">  child: Column(</span><br><span class="line">    mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">    children: [</span><br><span class="line">      RaisedButton(</span><br><span class="line">        padding: EdgeInsets.all(<span class="number">14</span>),</span><br><span class="line">        color: Colors.cyan[<span class="number">50</span>],</span><br><span class="line">        onPressed: ()&#123;&#125;,</span><br><span class="line">        child: Text(<span class="string">"Device Details"</span>,</span><br><span class="line">          style: TextStyle(color: Colors.black),),</span><br><span class="line">      ),</span><br><span class="line">    ],</span><br><span class="line">  ),</span><br><span class="line">),</span><br></pre></td></tr></table></figure><p>当我们运行应用程序时，我们应该得到屏幕的输出，就像下面的屏幕截图一样。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-11-06-28-26.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>我们将创建三个字符串 deviceName、 deviceVersion 和 identifier。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span> deviceName =<span class="string">''</span>;</span><br><span class="line"><span class="built_in">String</span> deviceVersion =<span class="string">''</span>;</span><br><span class="line"><span class="built_in">String</span> identifier= <span class="string">''</span>;</span><br></pre></td></tr></table></figure><p>现在，我们将添加程序的主函数。我们将添加 future <code>_deviceDetails()</code> 在内部，我们将添加一个最终的 deviceinfoplgin 等于新的 deviceinfoplgin()。我们将添加 try {} 方法，并为平台导入 dart:io。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'dart:io'</span>;</span><br></pre></td></tr></table></figure><p>如果平台是 Andriod，那么构建就等于 deviceInfoPlugin 对于 Andriod 信息。添加 setState ()方法。在这个方法中，我们将所有的字符串加起来等于构建。如果平台是 Ios，那么构建版本就等于 Ios 信息的 deviceInfoPlugin。添加 setState ()方法。在这个方法中，我们将所有的字符串加起来等于构建。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">Future&lt;<span class="keyword">void</span>&gt;_deviceDetails() <span class="keyword">async</span>&#123;</span><br><span class="line">  <span class="keyword">final</span> DeviceInfoPlugin deviceInfoPlugin = <span class="keyword">new</span> DeviceInfoPlugin();</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (Platform.isAndroid) &#123;</span><br><span class="line">      <span class="keyword">var</span> build = <span class="keyword">await</span> deviceInfoPlugin.androidInfo;</span><br><span class="line">      setState(() &#123;</span><br><span class="line">        deviceName = build.model;</span><br><span class="line">        deviceVersion = build.version.toString();</span><br><span class="line">        identifier = build.androidId;</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="comment">//UUID for Android</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (Platform.isIOS) &#123;</span><br><span class="line">      <span class="keyword">var</span> data = <span class="keyword">await</span> deviceInfoPlugin.iosInfo;</span><br><span class="line">      setState(() &#123;</span><br><span class="line">        deviceName = data.name;</span><br><span class="line">        deviceVersion = data.systemVersion;</span><br><span class="line">        identifier = data.identifierForVendor;</span><br><span class="line">      &#125;);<span class="comment">//UUID for iOS</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125; on PlatformException &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'Failed to get platform version'</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们将为 PlatformException 导入服务</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/services.dart'</span>;</span><br></pre></td></tr></table></figure><p>现在，我们将在引发的按钮上添加按下的函子上的 <code>_deviceDetails()</code></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">onPressed: ()&#123;</span><br><span class="line">  _deviceDetails();</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>我们将添加设备版本、名称和标识符不是空的，然后显示 Column 小部件。在这个小部件中，我们将添加所有三个文本，如设备名称、设备版本和设备标识符将显示在您的设备上。否则，显示一个空容器。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">deviceVersion.isNotEmpty &amp;&amp; deviceName.isNotEmpty</span><br><span class="line">    &amp;&amp; identifier.isNotEmpty?</span><br><span class="line">Column(</span><br><span class="line">  children: [</span><br><span class="line">    SizedBox(height: <span class="number">30</span>,),</span><br><span class="line">    Text(<span class="string">"Device Name:- "</span>+deviceName,style: TextStyle</span><br><span class="line">      (color: Colors.red,</span><br><span class="line">        fontWeight: FontWeight.bold)),</span><br><span class="line">    SizedBox(height: <span class="number">30</span>,),</span><br><span class="line">    Text(<span class="string">"Device Version:- "</span>+deviceVersion,style: TextStyle</span><br><span class="line">      (color: Colors.red,</span><br><span class="line">        fontWeight: FontWeight.bold)),</span><br><span class="line">    SizedBox(height: <span class="number">30</span>,),</span><br><span class="line">    Text(<span class="string">"Device Identifier:- "</span>+identifier,style: TextStyle</span><br><span class="line">      (color: Colors.red,</span><br><span class="line">        fontWeight: FontWeight.bold)),</span><br><span class="line">    SizedBox(height: <span class="number">30</span>,),</span><br><span class="line">  ],</span><br><span class="line">): Container(),</span><br></pre></td></tr></table></figure><p>当用户点击按钮，然后，所有三个数据将显示在您的设备上。当我们运行应用程序时，我们应该得到屏幕的输出，就像下面的屏幕截图一样。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-11-06-32-01.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="代码文件"><a href="#代码文件" class="headerlink" title="代码文件"></a>代码文件</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'dart:io'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:device_info/device_info.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/cupertino.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/services.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DeviceDetailDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _DeviceDetailDemoState createState() =&gt; _DeviceDetailDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_DeviceDetailDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">DeviceDetailDemo</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">String</span> deviceName =<span class="string">''</span>;</span><br><span class="line">  <span class="built_in">String</span> deviceVersion =<span class="string">''</span>;</span><br><span class="line">  <span class="built_in">String</span> identifier= <span class="string">''</span>;</span><br><span class="line"></span><br><span class="line">  Future&lt;<span class="keyword">void</span>&gt;_deviceDetails() <span class="keyword">async</span>&#123;</span><br><span class="line">    <span class="keyword">final</span> DeviceInfoPlugin deviceInfoPlugin = <span class="keyword">new</span> DeviceInfoPlugin();</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (Platform.isAndroid) &#123;</span><br><span class="line">        <span class="keyword">var</span> build = <span class="keyword">await</span> deviceInfoPlugin.androidInfo;</span><br><span class="line">        setState(() &#123;</span><br><span class="line">          deviceName = build.model;</span><br><span class="line">          deviceVersion = build.version.toString();</span><br><span class="line">          identifier = build.androidId;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">//UUID for Android</span></span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (Platform.isIOS) &#123;</span><br><span class="line">        <span class="keyword">var</span> data = <span class="keyword">await</span> deviceInfoPlugin.iosInfo;</span><br><span class="line">        setState(() &#123;</span><br><span class="line">          deviceName = data.name;</span><br><span class="line">          deviceVersion = data.systemVersion;</span><br><span class="line">          identifier = data.identifierForVendor;</span><br><span class="line">        &#125;);<span class="comment">//UUID for iOS</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125; on PlatformException &#123;</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">'Failed to get platform version'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        backgroundColor: Colors.redAccent[<span class="number">100</span>],</span><br><span class="line">        title: Text(<span class="string">"Flutter Device Details Demo"</span>),</span><br><span class="line">        automaticallyImplyLeading: <span class="keyword">false</span>,</span><br><span class="line">      ),</span><br><span class="line">      body: Center(</span><br><span class="line">        child: Column(</span><br><span class="line">          mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">          children: [</span><br><span class="line">            RaisedButton(</span><br><span class="line">              padding: EdgeInsets.all(<span class="number">14</span>),</span><br><span class="line">              color: Colors.cyan[<span class="number">50</span>],</span><br><span class="line">              onPressed: ()&#123;</span><br><span class="line">                _deviceDetails();</span><br><span class="line">              &#125;,</span><br><span class="line">              child: Text(<span class="string">"Device Details"</span>,</span><br><span class="line">                style: TextStyle(color: Colors.black),),</span><br><span class="line">            ),</span><br><span class="line">            deviceVersion.isNotEmpty &amp;&amp; deviceName.isNotEmpty</span><br><span class="line">                &amp;&amp; identifier.isNotEmpty?</span><br><span class="line">            Column(</span><br><span class="line">              children: [</span><br><span class="line">                SizedBox(height: <span class="number">30</span>,),</span><br><span class="line">                Text(<span class="string">"Device Name:- "</span>+deviceName,style: TextStyle</span><br><span class="line">                  (color: Colors.red,</span><br><span class="line">                    fontWeight: FontWeight.bold)),</span><br><span class="line">                SizedBox(height: <span class="number">30</span>,),</span><br><span class="line">                Text(<span class="string">"Device Version:- "</span>+deviceVersion,style:    TextStyle</span><br><span class="line">                  (color: Colors.red,</span><br><span class="line">                    fontWeight: FontWeight.bold)),</span><br><span class="line">                SizedBox(height: <span class="number">30</span>,),</span><br><span class="line">                Text(<span class="string">"Device Identifier:- "</span>+identifier,style: TextStyle</span><br><span class="line">                  (color: Colors.red,</span><br><span class="line">                    fontWeight: FontWeight.bold)),</span><br><span class="line">                SizedBox(height: <span class="number">30</span>,),</span><br><span class="line">              ],</span><br><span class="line">            ): Container(),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>在本文中，我解释了如何获得独特的设备细节 Flutter 的基本结构，您可以根据自己的选择修改这个代码。这是一个小的介绍，以获得独特的设备细节的用户交互从我这边，它的工作使用 Flutter。</p><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter Getx 05 - 嵌套导航、多语言、主题、Snackbar、Dialog、BottomSheet</title>
    <link href="https://blog.ducafecat.tech/2021/05/09/flutter-getx/flutter-getx-05-nested-snack-dialog-bottom-lang-theme/"/>
    <id>https://blog.ducafecat.tech/2021/05/09/flutter-getx/flutter-getx-05-nested-snack-dialog-bottom-lang-theme/</id>
    <published>2021-05-08T16:00:00.000Z</published>
    <updated>2021-05-13T01:20:13.298Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-11-05-58-12.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h2><ul><li>嵌套导航</li><li>多语言</li><li>主题</li><li>3 UI 组件<ul><li>Snackbar</li><li>Dialog</li><li>BottomSheet</li></ul></li></ul><h2 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h2><p><a href="https://www.bilibili.com/video/BV1RU4y1t7DD/" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1RU4y1t7DD/</a></p><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://pub.flutter-io.cn/packages/get" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/get</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><h3 id="嵌套导航"><a href="#嵌套导航" class="headerlink" title="嵌套导航"></a>嵌套导航</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-11-05-24-21.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>几个 <code>Navigator</code> widget ，并排或者嵌套，他们是通过属性 <code>key</code> 来区分的，具体去哪里是通过 <code>onGenerateRoute</code> 实现的，在 getx 中 我们要把业务写到 <code>controller</code>中，状态切换用 <code>Obx</code> 控制 <code>BottomNavigationBar</code>，代码如下。</p><ul><li>lib/pages/nested_navigation/controller.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NestedController</span> <span class="keyword">extends</span> <span class="title">GetxController</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> NestedController <span class="keyword">get</span> to =&gt; Get.find();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> currentIndex = <span class="number">0.</span>obs;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> pages = &lt;<span class="built_in">String</span>&gt;[<span class="string">'/list'</span>, <span class="string">'/detail'</span>, <span class="string">'/login'</span>];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> changePage(<span class="built_in">int</span> index) &#123;</span><br><span class="line">    currentIndex.value = index;</span><br><span class="line">    Get.toNamed(pages[index], id: <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Route? onGenerateRoute(RouteSettings settings) &#123;</span><br><span class="line">    <span class="keyword">if</span> (settings.name == <span class="string">'/login'</span>)</span><br><span class="line">      <span class="keyword">return</span> GetPageRoute(</span><br><span class="line">        settings: settings,</span><br><span class="line">        page: () =&gt; LoginView(),</span><br><span class="line">        transition: Transition.topLevel,</span><br><span class="line">      );</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (settings.name == <span class="string">'/list'</span>)</span><br><span class="line">      <span class="keyword">return</span> GetPageRoute(</span><br><span class="line">        settings: settings,</span><br><span class="line">        page: () =&gt; ListIndexView(),</span><br><span class="line">        transition: Transition.rightToLeftWithFade,</span><br><span class="line">      );</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (settings.name == <span class="string">'/detail'</span>)</span><br><span class="line">      <span class="keyword">return</span> GetPageRoute(</span><br><span class="line">        settings: settings,</span><br><span class="line">        page: () =&gt; DetailView(),</span><br><span class="line">        transition: Transition.fadeIn,</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>lib/pages/nested_navigation/binding.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NestedBinding</span> <span class="keyword">extends</span> <span class="title">Bindings</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> dependencies() &#123;</span><br><span class="line">    Get.lazyPut(() =&gt; NestedController());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>lib/pages/nested_navigation/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NestedNavView</span> <span class="keyword">extends</span> <span class="title">GetView</span>&lt;<span class="title">NestedController</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">"嵌套路由"</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Container(</span><br><span class="line">        color: Colors.amber,</span><br><span class="line">        child: Column(</span><br><span class="line">          children: [</span><br><span class="line">            Container(</span><br><span class="line">              child: Text(<span class="string">"占位条"</span>),</span><br><span class="line">              height: <span class="number">100</span>,</span><br><span class="line">            ),</span><br><span class="line">            SizedBox(</span><br><span class="line">              height: <span class="number">300</span>,</span><br><span class="line">              child: Navigator(</span><br><span class="line">                key: Get.nestedKey(<span class="number">1</span>),</span><br><span class="line">                initialRoute: <span class="string">'/list'</span>,</span><br><span class="line">                onGenerateRoute: controller.onGenerateRoute,</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">      bottomNavigationBar: Obx(</span><br><span class="line">        () =&gt; BottomNavigationBar(</span><br><span class="line">          items: <span class="keyword">const</span> &lt;BottomNavigationBarItem&gt;[</span><br><span class="line">            BottomNavigationBarItem(</span><br><span class="line">              icon: Icon(Icons.list),</span><br><span class="line">              label: <span class="string">'列表'</span>,</span><br><span class="line">            ),</span><br><span class="line">            BottomNavigationBarItem(</span><br><span class="line">              icon: Icon(Icons.details),</span><br><span class="line">              label: <span class="string">'详情'</span>,</span><br><span class="line">            ),</span><br><span class="line">            BottomNavigationBarItem(</span><br><span class="line">              icon: Icon(Icons.login),</span><br><span class="line">              label: <span class="string">'登录'</span>,</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">          currentIndex: controller.currentIndex.value,</span><br><span class="line">          selectedItemColor: Colors.pink,</span><br><span class="line">          onTap: controller.changePage,</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>lib/common/routes/app_pages.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">GetPage(</span><br><span class="line">  name: AppRoutes.NestedNavigator,</span><br><span class="line">  page: () =&gt; NestedNavView(),</span><br><span class="line">  binding: NestedBinding(),</span><br><span class="line">),</span><br></pre></td></tr></table></figure><h3 id="多语言"><a href="#多语言" class="headerlink" title="多语言"></a>多语言</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-11-05-30-52.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>编写多语言字典</li></ul><p>文件名格式 <code>[国家]_[语言].dart</code></p><p>lib/common/lang/en_US.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">String</span>&gt; en_US = &#123;</span><br><span class="line">  <span class="string">'title'</span>: <span class="string">'This is Title!'</span>,</span><br><span class="line">  <span class="string">'login'</span>: <span class="string">'logged in as @name with email @email'</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>lib/common/lang/zh_Hans.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">String</span>&gt; zh_Hans = &#123;</span><br><span class="line">  <span class="string">'title'</span>: <span class="string">'这是标题'</span>,</span><br><span class="line">  <span class="string">'login'</span>: <span class="string">'登录用户 @name，邮箱账号 @email'</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>lib/common/lang/zh_HK.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">String</span>&gt; zh_HK = &#123;</span><br><span class="line">  <span class="string">'title'</span>: <span class="string">'這是標題'</span>,</span><br><span class="line">  <span class="string">'login'</span>: <span class="string">'登錄用戶 @name，郵箱賬號 @email'</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>继承 Translations</li></ul><p>lib/common/lang/translation_service.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TranslationService</span> <span class="keyword">extends</span> <span class="title">Translations</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> Locale? <span class="keyword">get</span> locale =&gt; Get.deviceLocale;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">final</span> fallbackLocale = Locale(<span class="string">'en'</span>, <span class="string">'US'</span>);</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">String</span>&gt;&gt; <span class="keyword">get</span> keys =&gt; &#123;</span><br><span class="line">        <span class="string">'en_US'</span>: en_US,</span><br><span class="line">        <span class="string">'zh_Hans'</span>: zh_Hans,</span><br><span class="line">        <span class="string">'zh_HK'</span>: zh_HK,</span><br><span class="line">      &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>初始 GetMaterialApp</li></ul><p>lib/main.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> MyApp(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> GetMaterialApp(</span><br><span class="line">      ...</span><br><span class="line"></span><br><span class="line">      locale: TranslationService.locale,</span><br><span class="line">      fallbackLocale: TranslationService.fallbackLocale,</span><br><span class="line">      translations: TranslationService(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>locale</code> 当前系统语言</p><p><code>fallbackLocale</code> 如果找不到对应字典，默认值</p><p><code>translations</code> 字典列表</p><ul><li>切换 updateLocale</li></ul><p>采用扩展操作符方式调用显示，点赞 <code>xxx.tr,</code></p><p>切换语言 <code>Get.updateLocale</code></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"title -&gt; "</span> + <span class="string">'title'</span>.tr,</span><br><span class="line"></span><br><span class="line">......</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> locale = Locale(<span class="string">'zh'</span>, <span class="string">'HK'</span>);</span><br><span class="line">Get.updateLocale(locale);</span><br></pre></td></tr></table></figure><p>lib/pages/lang/index.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LangView</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> LangView(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">"多语言"</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Center(</span><br><span class="line">        child: Column(</span><br><span class="line">          children: [</span><br><span class="line">            Text(</span><br><span class="line">              <span class="string">"title -&gt; "</span> + <span class="string">'title'</span>.tr,</span><br><span class="line">              style: TextStyle(fontSize: <span class="number">24</span>),</span><br><span class="line">            ),</span><br><span class="line">            Divider(),</span><br><span class="line">            Text(</span><br><span class="line">              <span class="string">"login -&gt; "</span> +</span><br><span class="line">                  <span class="string">'login'</span>.trParams(</span><br><span class="line">                      &#123;<span class="string">'name'</span>: <span class="string">'ducafecat'</span>, <span class="string">'email'</span>: <span class="string">'ducafecat@gmail.com'</span>&#125;)!,</span><br><span class="line">              style: TextStyle(fontSize: <span class="number">24</span>),</span><br><span class="line">            ),</span><br><span class="line">            Divider(),</span><br><span class="line">            ListTile(</span><br><span class="line">              title: Text(<span class="string">"切换语言"</span>),</span><br><span class="line">              subtitle: Text(<span class="string">'zh-HK'</span>),</span><br><span class="line">              onTap: () &#123;</span><br><span class="line">                <span class="keyword">var</span> locale = Locale(<span class="string">'zh'</span>, <span class="string">'HK'</span>);</span><br><span class="line">                Get.updateLocale(locale);</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">            ListTile(</span><br><span class="line">              title: Text(<span class="string">"切换语言"</span>),</span><br><span class="line">              subtitle: Text(<span class="string">'zh-Hans'</span>),</span><br><span class="line">              onTap: () &#123;</span><br><span class="line">                <span class="keyword">var</span> locale = Locale(<span class="string">'zh'</span>, <span class="string">'Hans'</span>);</span><br><span class="line">                Get.updateLocale(locale);</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">            ListTile(</span><br><span class="line">              title: Text(<span class="string">"切换语言"</span>),</span><br><span class="line">              subtitle: Text(<span class="string">'en-US'</span>),</span><br><span class="line">              onTap: () &#123;</span><br><span class="line">                <span class="keyword">var</span> locale = Locale(<span class="string">'en'</span>, <span class="string">'US'</span>);</span><br><span class="line">                Get.updateLocale(locale);</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="主题"><a href="#主题" class="headerlink" title="主题"></a>主题</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-11-05-45-18.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>直接 <code>Get.changeTheme</code> 切换 <code>ThemeData</code> 数据。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">onTap: () &#123;</span><br><span class="line">  Get.changeTheme(</span><br><span class="line">      Get.isDarkMode ? ThemeData.light() : ThemeData.dark());</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><ul><li>lib/pages/theme/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ThemeView</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> ThemeView(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">"主题"</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Center(</span><br><span class="line">        child: Column(</span><br><span class="line">          children: [</span><br><span class="line">            Container(</span><br><span class="line">              height: <span class="number">100</span>,</span><br><span class="line">              child: Align(</span><br><span class="line">                  alignment: Alignment.center,</span><br><span class="line">                  child: Text(</span><br><span class="line">                    <span class="string">"是否黑色主题 -&gt; "</span> + Get.isDarkMode.toString(),</span><br><span class="line">                    style: TextStyle(fontSize: <span class="number">24</span>),</span><br><span class="line">                  )),</span><br><span class="line">            ),</span><br><span class="line">            Divider(),</span><br><span class="line">            ListTile(</span><br><span class="line">              title: Text(<span class="string">"切换主题"</span>),</span><br><span class="line">              subtitle: Text(<span class="string">'Get.changeTheme'</span>),</span><br><span class="line">              onTap: () &#123;</span><br><span class="line">                Get.changeTheme(</span><br><span class="line">                    Get.isDarkMode ? ThemeData.light() : ThemeData.dark());</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Snackbar"><a href="#Snackbar" class="headerlink" title="Snackbar"></a>Snackbar</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-11-05-46-22.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>调用</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">onTap: () =&gt; Get.snackbar(</span><br><span class="line">  <span class="string">"标题"</span>,</span><br><span class="line">  <span class="string">"消息"</span>,</span><br><span class="line">),</span><br></pre></td></tr></table></figure><ul><li>参数</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> snackbar&lt;T&gt;(</span><br><span class="line">  <span class="built_in">String</span> title,</span><br><span class="line">  <span class="built_in">String</span> message, &#123;</span><br><span class="line">  Color? colorText,</span><br><span class="line">  <span class="built_in">Duration</span>? duration,</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// with instantInit = false </span>you<span class="markdown"> can put snackbar on initState</span></span></span><br><span class="line">  <span class="built_in">bool</span> instantInit = <span class="keyword">true</span>,</span><br><span class="line">  SnackPosition? snackPosition,</span><br><span class="line">  Widget? titleText,</span><br><span class="line">  Widget? messageText,</span><br><span class="line">  Widget? icon,</span><br><span class="line">  <span class="built_in">bool</span>? shouldIconPulse,</span><br><span class="line">  <span class="built_in">double</span>? maxWidth,</span><br><span class="line">  EdgeInsets? margin,</span><br><span class="line">  EdgeInsets? padding,</span><br><span class="line">  <span class="built_in">double</span>? borderRadius,</span><br><span class="line">  Color? borderColor,</span><br><span class="line">  <span class="built_in">double</span>? borderWidth,</span><br><span class="line">  Color? backgroundColor,</span><br><span class="line">  Color? leftBarIndicatorColor,</span><br><span class="line">  <span class="built_in">List</span>&lt;BoxShadow&gt;? boxShadows,</span><br><span class="line">  Gradient? backgroundGradient,</span><br><span class="line">  TextButton? mainButton,</span><br><span class="line">  OnTap? onTap,</span><br><span class="line">  <span class="built_in">bool</span>? isDismissible,</span><br><span class="line">  <span class="built_in">bool</span>? showProgressIndicator,</span><br><span class="line">  SnackDismissDirection? dismissDirection,</span><br><span class="line">  AnimationController? progressIndicatorController,</span><br><span class="line">  Color? progressIndicatorBackgroundColor,</span><br><span class="line">  Animation&lt;Color&gt;? progressIndicatorValueColor,</span><br><span class="line">  SnackStyle? snackStyle,</span><br><span class="line">  Curve? forwardAnimationCurve,</span><br><span class="line">  Curve? reverseAnimationCurve,</span><br><span class="line">  <span class="built_in">Duration</span>? animationDuration,</span><br><span class="line">  <span class="built_in">double</span>? barBlur,</span><br><span class="line">  <span class="built_in">double</span>? overlayBlur,</span><br><span class="line">  SnackbarStatusCallback? snackbarStatus,</span><br><span class="line">  Color? overlayColor,</span><br><span class="line">  Form? userInputForm,</span><br><span class="line">&#125;) <span class="keyword">async</span> &#123;</span><br></pre></td></tr></table></figure><h3 id="Dialog"><a href="#Dialog" class="headerlink" title="Dialog"></a>Dialog</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-11-05-48-41.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>调用</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">onTap: () =&gt; Get.defaultDialog(</span><br><span class="line">  title: <span class="string">"标题"</span>,</span><br><span class="line">  content: Column(</span><br><span class="line">    children: [</span><br><span class="line">      Text(<span class="string">"第1行"</span>),</span><br><span class="line">      Text(<span class="string">"第2行"</span>),</span><br><span class="line">      Text(<span class="string">"第3行"</span>),</span><br><span class="line">    ],</span><br><span class="line">  ),</span><br><span class="line">  textConfirm: <span class="string">"确认"</span>,</span><br><span class="line">  textCancel: <span class="string">"取消"</span>,</span><br><span class="line">  onConfirm: () =&gt; Get.back(),</span><br><span class="line">),</span><br></pre></td></tr></table></figure><ul><li>参数</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">Future&lt;T?&gt; defaultDialog&lt;T&gt;(&#123;</span><br><span class="line">  <span class="built_in">String</span> title = <span class="string">"Alert"</span>,</span><br><span class="line">  TextStyle? titleStyle,</span><br><span class="line">  Widget? content,</span><br><span class="line">  VoidCallback? onConfirm,</span><br><span class="line">  VoidCallback? onCancel,</span><br><span class="line">  VoidCallback? onCustom,</span><br><span class="line">  Color? cancelTextColor,</span><br><span class="line">  Color? confirmTextColor,</span><br><span class="line">  <span class="built_in">String</span>? textConfirm,</span><br><span class="line">  <span class="built_in">String</span>? textCancel,</span><br><span class="line">  <span class="built_in">String</span>? textCustom,</span><br><span class="line">  Widget? confirm,</span><br><span class="line">  Widget? cancel,</span><br><span class="line">  Widget? custom,</span><br><span class="line">  Color? backgroundColor,</span><br><span class="line">  <span class="built_in">bool</span> barrierDismissible = <span class="keyword">true</span>,</span><br><span class="line">  Color? buttonColor,</span><br><span class="line">  <span class="built_in">String</span> middleText = <span class="string">"Dialog made in 3 lines of code"</span>,</span><br><span class="line">  TextStyle? middleTextStyle,</span><br><span class="line">  <span class="built_in">double</span> radius = <span class="number">20.0</span>,</span><br><span class="line">  <span class="comment">//   ThemeData themeData,</span></span><br><span class="line">  <span class="built_in">List</span>&lt;Widget&gt;? actions,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// onWillPop Scope</span></span><br><span class="line">  WillPopCallback? onWillPop,</span><br><span class="line">&#125;) &#123;</span><br></pre></td></tr></table></figure><h3 id="BottomSheet"><a href="#BottomSheet" class="headerlink" title="BottomSheet"></a>BottomSheet</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-11-05-49-55.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>调用</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">  onTap: () =&gt; Get.bottomSheet(</span><br><span class="line">    Container(</span><br><span class="line">      height: <span class="number">200</span>,</span><br><span class="line">      color: Colors.white,</span><br><span class="line">      child: Column(</span><br><span class="line">        children: [</span><br><span class="line">          Text(<span class="string">"第1行"</span>),</span><br><span class="line">          Text(<span class="string">"第2行"</span>),</span><br><span class="line">          Text(<span class="string">"第3行"</span>),</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">  ),</span><br><span class="line">),</span><br></pre></td></tr></table></figure><ul><li>参数</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">extension ExtensionBottomSheet on GetInterface &#123;</span><br><span class="line">  Future&lt;T?&gt; bottomSheet&lt;T&gt;(</span><br><span class="line">    Widget bottomsheet, &#123;</span><br><span class="line">    Color? backgroundColor,</span><br><span class="line">    <span class="built_in">double</span>? elevation,</span><br><span class="line">    <span class="built_in">bool</span> persistent = <span class="keyword">true</span>,</span><br><span class="line">    ShapeBorder? shape,</span><br><span class="line">    Clip? clipBehavior,</span><br><span class="line">    Color? barrierColor,</span><br><span class="line">    <span class="built_in">bool</span>? ignoreSafeArea,</span><br><span class="line">    <span class="built_in">bool</span> isScrollControlled = <span class="keyword">false</span>,</span><br><span class="line">    <span class="built_in">bool</span> useRootNavigator = <span class="keyword">false</span>,</span><br><span class="line">    <span class="built_in">bool</span> isDismissible = <span class="keyword">true</span>,</span><br><span class="line">    <span class="built_in">bool</span> enableDrag = <span class="keyword">true</span>,</span><br><span class="line">    RouteSettings? settings,</span><br><span class="line">    <span class="built_in">Duration</span>? enterBottomSheetDuration,</span><br><span class="line">    <span class="built_in">Duration</span>? exitBottomSheetDuration,</span><br><span class="line">  &#125;) &#123;</span><br></pre></td></tr></table></figure><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="Flutter Getx" scheme="https://blog.ducafecat.tech/categories/Flutter-Getx/"/>
    
    
      <category term="flutter getx" scheme="https://blog.ducafecat.tech/tags/flutter-getx/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 多个版本切换控制</title>
    <link href="https://blog.ducafecat.tech/2021/05/07/translation/flutter-how-to-fluttering-from-one-version-to-other-versions/"/>
    <id>https://blog.ducafecat.tech/2021/05/07/translation/flutter-how-to-fluttering-from-one-version-to-other-versions/</id>
    <published>2021-05-06T23:43:37.000Z</published>
    <updated>2021-05-07T00:03:14.726Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-07-08-03-12.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><p><a href="https://medium.com/litslink/flutter-how-to-fluttering-from-one-version-to-other-versions-cf242ffb15f7" target="_blank" rel="noopener">https://medium.com/litslink/flutter-how-to-fluttering-from-one-version-to-other-versions-cf242ffb15f7</a></p><h2 id="猫哥说"><a href="#猫哥说" class="headerlink" title="猫哥说"></a>猫哥说</h2><p>如果你和猫哥我一样，手上有几个 1 年前的项目，那么经常切换 sdk 版本，就成了必须做的事情，我可不会把老项目去升级新版本。</p><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>每次当技术改变为一个新的主版本时，将一个项目从较低的版本迁移到较高的版本是痛苦的。幸运的是，Dart 有一个迁移工具，可以帮助您将项目中的定义迁移到新的语法中。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-07-07-46-52.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>但是即使你已经准备好切换到一个更新的版本，你也必须等待在你的项目中使用的一系列插件，即使在我的情况下，我确实帮助一些开源库迁移到 Null-Safety，这不足以将我的项目迁移到下一个版本。</p><p>社区每天都在成长，在大多数情况下，你会找到一些替代插件，这些插件还没有被迁移。如果您停留在以前的 Flutter 版本，本文将帮助您简化在项目之间的切换。</p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://flutter.dev/docs/development/tools/sdk/releases" target="_blank" rel="noopener">https://flutter.dev/docs/development/tools/sdk/releases</a></li><li><a href="https://fvm.app/" target="_blank" rel="noopener">https://fvm.app/</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><h3 id="版本管理"><a href="#版本管理" class="headerlink" title="版本管理"></a>版本管理</h3><p>Flutter 版本有一个相关的 Dart SDK 版本，可以在本地缓存到 Flutter 缓存文件夹中，因此您应该记住一些约束。</p><p>作为一个开发者，你有几个选项可以在不同版本之间切换:</p><ul><li>使用命令行脚本(CLI)进行手动编写</li><li>Flutter 版本管理器 CLI</li><li>Sidekick GUI 图形用户界面</li></ul><h3 id="手动"><a href="#手动" class="headerlink" title="手动"></a>手动</h3><p>当你有两个或三个项目并在它们之间切换时，这个选项对你来说并不常见。</p><p>Flutter CLI 具有 git 控制的版本管理，因此即使使用 <code>git checkout &lt;tag&gt;</code> 命令也很容易切换。要查看可以签出的版本列表，只需运行 <code>git tag-l</code>，然后在找到所需版本时按 <code>q</code> 退出。</p><blockquote><p>就是用 git 命令啦，没啥特别的，但是国内 github 很慢。。。</p></blockquote><h3 id="下载所需版本"><a href="#下载所需版本" class="headerlink" title="下载所需版本"></a>下载所需版本</h3><p>你可以访问 Flutter 发行版页面下载所需版本的快照，并替换环境变量版本以使用下载的版本</p><p><a href="https://flutter.dev/docs/development/tools/sdk/releases" target="_blank" rel="noopener">https://flutter.dev/docs/development/tools/sdk/releases</a></p><blockquote><p>这是我之前常用的方法，免去了下载，每个版本包可是要 1G 了</p></blockquote><h3 id="Flutter-CLI"><a href="#Flutter-CLI" class="headerlink" title="Flutter CLI"></a>Flutter CLI</h3><p>您可以尝试使用 <code>flutter dider &lt;version&gt;</code> 命令来降低它的等级，但是您将面临一个无法从 <code>2.x</code> 切换到 <code>1.x</code> 的问题。</p><h3 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h3><p>幸运的是，Flutter SDK 使用 GIT 来管理版本，因此您可以有一个单一的目录来切换，而不像下载每个版本，并减少硬件上的空间。</p><p>假设你的 SDK 副本位于 ~/flutter 然后:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/flutter</span><br><span class="line"></span><br><span class="line"><span class="comment"># Checkout needed version</span></span><br><span class="line">git checkout 1.22.6</span><br><span class="line"></span><br><span class="line"><span class="comment"># Download Dart SDK, tools, etc.</span></span><br><span class="line">flutter doctor</span><br><span class="line"></span><br><span class="line"><span class="comment"># Check Flutter and Dart version</span></span><br><span class="line">flutter --version</span><br></pre></td></tr></table></figure><p>最后，您将看到 <code>flutter --version</code> 命令的输出:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Flutter 1.22.6 • channel unknown • unknown <span class="built_in">source</span></span><br><span class="line">Framework • revision 9b2d32b605 (3 months ago) • 2021-01-22 14:36:39 -0800</span><br><span class="line">Engine • revision 2f0af37152</span><br><span class="line">Tools • Dart 2.10.5</span><br></pre></td></tr></table></figure><p>当你需要切换回最新版本时，反之亦然:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/flutter</span><br><span class="line"></span><br><span class="line"><span class="comment"># Switch back to the stable channel</span></span><br><span class="line">flutter channel stable</span><br><span class="line"></span><br><span class="line"><span class="comment"># Switch to latest version</span></span><br><span class="line"><span class="comment"># flutter doctor will be invoked at this step</span></span><br><span class="line">flutter upgrade</span><br><span class="line"></span><br><span class="line"><span class="comment"># Check Dart and Flutter  version</span></span><br><span class="line">flutter --version</span><br></pre></td></tr></table></figure><p>如果您对此步骤没有意见，可以通过调用 <code>*.sh</code> 来存储这些脚本并自动执行降级/升级过程。命令行中的 sh 文件。</p><h3 id="FVM-Flutter-Version-Manager"><a href="#FVM-Flutter-Version-Manager" class="headerlink" title="FVM (Flutter Version Manager)"></a>FVM (Flutter Version Manager)</h3><blockquote><p>这也是猫哥我现在用的方式</p></blockquote><p>以前，当我基于 React 和 ReactNative 开发应用程序时，我使用 NPM (节点包管理器)来管理项目中的依赖关系，Flutter 中的一个类似工具是 pub。有时候我需要更改 NPM 版本，但是它对 Node 版本有限制，所以我需要做同样的步骤，下载几个版本，替换目录等等。为了避免这个例程，我使用了 NVM (节点版本管理器) ，我的日子就要好起来了。</p><p>幸运的是，Flutter 有一个名为 FVM 的非官方工具，可以做同样的事情，它管理 Flutter 版本并将它们存储在您的硬件上。</p><p><a href="https://fvm.app/" target="_blank" rel="noopener">https://fvm.app/</a></p><p>FVM 有两种使用方式:</p><ul><li>全局指定 flutter 版本</li><li>指定你当前项目使用的版本</li></ul><p>只需按照安装 <a href="https://fvm.app/docs/getting_started/installation" target="_blank" rel="noopener">https://fvm.app/docs/getting_started/installation</a> 和配置说明的 <a href="https://fvm.app/docs/getting_started/configuration" target="_blank" rel="noopener">https://fvm.app/docs/getting_started/configuration</a> 来正确设置你的环境。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-07-07-59-28.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>另一个令人惊奇的选择是 FVM 的 GUI，称为 Sidekick，它使得全局或本地(项目) Flutter SDK 版本管理更加舒适，如果你不是 CLI 的大粉丝。</p><h2 id="老铁记得-点赞、转发-，我将更有动力呈现-Flutter-好文"><a href="#老铁记得-点赞、转发-，我将更有动力呈现-Flutter-好文" class="headerlink" title="老铁记得 点赞、转发 ，我将更有动力呈现 Flutter 好文~~~~"></a>老铁记得 点赞、转发 ，我将更有动力呈现 Flutter 好文~~~~</h2><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter BLoC 用户登录 1</title>
    <link href="https://blog.ducafecat.tech/2021/05/06/translation/mastering-flutter-bloc-pattern-for-login-part-1/"/>
    <id>https://blog.ducafecat.tech/2021/05/06/translation/mastering-flutter-bloc-pattern-for-login-part-1/</id>
    <published>2021-05-05T16:00:00.000Z</published>
    <updated>2021-05-06T00:05:40.980Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-06-08-01-18.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://medium.com/theotherdev-s/mastering-flutter-bloc-pattern-for-login-part-1-94082e139725" target="_blank" rel="noopener">https://medium.com/theotherdev-s/mastering-flutter-bloc-pattern-for-login-part-1-94082e139725</a></p></blockquote><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-06-07-51-51.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>首先，由于这不是一个基本的教程，我们理所当然地认为这是一个路线的知识，我们也包含了一点点的 <code>validation</code> 与 <code>formoz</code> 包来创建可重用的模型; 这不是本教程的目的，以显示这将如何工作，您将看到这在下一个教程。对于登录部分，出于教程的目的，我们还使用了 <code>BLoC (Cubit)</code> 的子集，因此您将看到这两者之间的区别。</p><h2 id="代码，可以先阅读代码，再看文档"><a href="#代码，可以先阅读代码，再看文档" class="headerlink" title="代码，可以先阅读代码，再看文档"></a>代码，可以先阅读代码，再看文档</h2><p><a href="https://github.com/Alessandro-v/bloc_login" target="_blank" rel="noopener">https://github.com/Alessandro-v/bloc_login</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://pub.flutter-io.cn/packages/equatable" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/equatable</a></li><li><a href="https://pub.flutter-io.cn/packages/validation" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/validation</a></li><li><a href="https://pub.flutter-io.cn/packages/flutter_bloc" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/flutter_bloc</a></li><li><a href="https://pub.flutter-io.cn/packages/formoz" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/formoz</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-06-07-54-44.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h3><p>在我们开始之前，让我们在 pubspec.yaml 中添加一些必要的包:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">equatable: ^2.0.0</span><br><span class="line">flutter_bloc: ^7.0.0</span><br><span class="line">formz: ^0.3.2</span><br></pre></td></tr></table></figure><p>添加 <code>equatable</code> 包只会使您的工作更加容易，但是如果您想手动比较类的实例，只需要重写 “==” 和 hashCode。</p><h3 id="登录状态"><a href="#登录状态" class="headerlink" title="登录状态"></a>登录状态</h3><p>让我们从一个包含表单状态和所有字段状态的类开始:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LoginState</span> <span class="keyword">extends</span> <span class="title">Equatable</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> LoginState(&#123;</span><br><span class="line">    <span class="keyword">this</span>.email = <span class="keyword">const</span> Email.pure(),</span><br><span class="line">    <span class="keyword">this</span>.password = <span class="keyword">const</span> Password.pure(),</span><br><span class="line">    <span class="keyword">this</span>.status = FormzStatus.pure,</span><br><span class="line">    <span class="keyword">this</span>.exceptionError,</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">final</span> Email email;</span><br><span class="line">  <span class="keyword">final</span> Password password;</span><br><span class="line">  <span class="keyword">final</span> FormzStatus status;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> exceptionError;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">List</span>&lt;<span class="built_in">Object</span>&gt; <span class="keyword">get</span> props =&gt; [email, password, status, exceptionError];</span><br><span class="line">  LoginState copyWith(&#123;</span><br><span class="line">    Email email,</span><br><span class="line">    Password password,</span><br><span class="line">    FormzStatus status,</span><br><span class="line">    <span class="built_in">String</span> error,</span><br><span class="line">  &#125;) &#123;</span><br><span class="line">    <span class="keyword">return</span> LoginState(</span><br><span class="line">      email: email ?? <span class="keyword">this</span>.email,</span><br><span class="line">      password: password ?? <span class="keyword">this</span>.password,</span><br><span class="line">      status: status ?? <span class="keyword">this</span>.status,</span><br><span class="line">      exceptionError: error ?? <span class="keyword">this</span>.exceptionError,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>现在让我们创建我们的 LoginCubit，它将负责执行逻辑，例如通过 emit 获取电子邮件和输出新状态:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LoginCubit</span> <span class="keyword">extends</span> <span class="title">Cubit</span>&lt;<span class="title">LoginState</span>&gt; </span>&#123;</span><br><span class="line">  LoginCubit() : <span class="keyword">super</span>(<span class="keyword">const</span> LoginState());</span><br><span class="line">  <span class="keyword">void</span> emailChanged(<span class="built_in">String</span> value) &#123;</span><br><span class="line">    <span class="keyword">final</span> email = Email.dirty(value);</span><br><span class="line">    emit(state.copyWith(</span><br><span class="line">      email: email,</span><br><span class="line">      status: Formz.validate([</span><br><span class="line">        email,</span><br><span class="line">        state.password</span><br><span class="line">      ]),</span><br><span class="line">    ));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">void</span> passwordChanged(<span class="built_in">String</span> value) &#123;</span><br><span class="line">    <span class="keyword">final</span> password = Password.dirty(value);</span><br><span class="line">    emit(state.copyWith(</span><br><span class="line">      password: password,</span><br><span class="line">      status: Formz.validate([</span><br><span class="line">        state.email,</span><br><span class="line">        password</span><br><span class="line">      ]),</span><br><span class="line">    ));</span><br><span class="line">  &#125;</span><br><span class="line">  Future&lt;<span class="keyword">void</span>&gt; logInWithCredentials() <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!state.status.isValidated) <span class="keyword">return</span>;</span><br><span class="line">    emit(state.copyWith(status: FormzStatus.submissionInProgress));</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">await</span> Future.delayed(<span class="built_in">Duration</span>(milliseconds: <span class="number">500</span>));</span><br><span class="line">      emit(state.copyWith(status: FormzStatus.submissionSuccess));</span><br><span class="line">    &#125; on Exception <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      emit(state.copyWith(status: FormzStatus.submissionFailure, error: e.toString()));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>但是我们如何将腕尺与我们的用户界面连接起来呢？下面是对 <code>BlocProvider</code> 的解救，这是一个小部件，它使用: <code>BlocProvider.of&lt;logincubit&gt;(context)</code> 为其子部件提供一个区块</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">BlocProvider(</span><br><span class="line">  create: (_) =&gt; LoginCubit(),</span><br><span class="line">  child: LoginForm(),</span><br><span class="line">),</span><br></pre></td></tr></table></figure><h3 id="登入表格"><a href="#登入表格" class="headerlink" title="登入表格"></a>登入表格</h3><p>既然现在似乎都在他自己的地方，是时候解决我们的最后一块 puzzle，整个用户界面</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LoginForm</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> LoginForm(&#123;Key key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> BlocConsumer&lt;LoginCubit, LoginState&gt;(</span><br><span class="line">        listener: (context, state) &#123;</span><br><span class="line">          <span class="keyword">if</span> (state.status.isSubmissionFailure) &#123;</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">'submission failure'</span>);</span><br><span class="line">          &#125; <span class="keyword">else</span> <span class="keyword">if</span> (state.status.isSubmissionSuccess) &#123;</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">'success'</span>);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        builder: (context, state) =&gt; Stack(</span><br><span class="line">          children: [</span><br><span class="line">            Positioned.fill(</span><br><span class="line">              child: SingleChildScrollView(</span><br><span class="line">                padding: <span class="keyword">const</span> EdgeInsets.fromLTRB(<span class="number">38.0</span>, <span class="number">0</span>, <span class="number">38.0</span>, <span class="number">8.0</span>),</span><br><span class="line">                child: Container(</span><br><span class="line">                  child: Column(</span><br><span class="line">                    crossAxisAlignment: CrossAxisAlignment.stretch,</span><br><span class="line">                    mainAxisAlignment: MainAxisAlignment.start,</span><br><span class="line">                    children: [</span><br><span class="line">                      _WelcomeText(),</span><br><span class="line">                      _EmailInputField(),</span><br><span class="line">                      _PasswordInputField(),</span><br><span class="line">                      _LoginButton(),</span><br><span class="line">                      _SignUpButton(),</span><br><span class="line">                    ],</span><br><span class="line">                  ),</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">            state.status.isSubmissionInProgress</span><br><span class="line">                ? Positioned(</span><br><span class="line">              child: Align(</span><br><span class="line">                alignment: Alignment.center,</span><br><span class="line">                child: CircularProgressIndicator(),</span><br><span class="line">              ),</span><br><span class="line">            ) : Container(),</span><br><span class="line">          ],</span><br><span class="line">        )</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>为了对 Cubit 发出的新状态做出反应，我们需要将我们的表单包裹在一个 BlocConsumer 中，现在我们将暴露一个监听者和一个建造者。</p><ul><li>Listener</li></ul><p>这里我们将监听状态更改，例如，在响应 API 调用时显示错误或执行导航。</p><ul><li>Builder</li></ul><p>在这里，我们将显示 ui 反应状态的变化，我们的 <code>Cubit</code>。</p><h3 id="用户界面"><a href="#用户界面" class="headerlink" title="用户界面"></a>用户界面</h3><p>我们的用户界面由一个列和 5 个子元素组成，但是我们只展示 2 个简短的小部件:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_EmailInputField</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> BlocBuilder&lt;LoginCubit, LoginState&gt;(</span><br><span class="line">      buildWhen: (previous, current) =&gt; previous.email != current.email,</span><br><span class="line">      builder: (context, state) &#123;</span><br><span class="line">        <span class="keyword">return</span> AuthTextField(</span><br><span class="line">          hint: <span class="string">'Email'</span>,</span><br><span class="line">          key: <span class="keyword">const</span> Key(<span class="string">'loginForm_emailInput_textField'</span>),</span><br><span class="line">          keyboardType: TextInputType.emailAddress,</span><br><span class="line">          error: state.email.error.name,</span><br><span class="line">          onChanged: (email) =&gt; context</span><br><span class="line">              .read&lt;LoginCubit&gt;()</span><br><span class="line">              .emailChanged(email),</span><br><span class="line">        );</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_LoginButton</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> _LoginButton(&#123;Key key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> BlocBuilder&lt;LoginCubit, LoginState&gt;(</span><br><span class="line">      buildWhen: (previous, current) =&gt; previous.status != current.status,</span><br><span class="line">      builder: (context, state) &#123;</span><br><span class="line">        <span class="keyword">return</span> CupertinoButton(</span><br><span class="line">            child: Text(<span class="string">'Login'</span>),</span><br><span class="line">            onPressed: state.status.isValidated</span><br><span class="line">                ? () =&gt; context.read&lt;LoginCubit&gt;().logInWithCredentials()</span><br><span class="line">                : <span class="keyword">null</span></span><br><span class="line">        );</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这两个小部件都包装在一个 <code>BlocBuilder</code> 中，只有当肘位为它们各自的评估属性发出新的状态时，<code>BlocBuilder</code> 才负责重新构建这些小部件，因此，例如，如果用户没有在 email 字段中键入任何内容，<code>EmailInputField</code> 将永远不会被重新构建。</p><p>相反，如果所有字段都经过验证，按钮将调用 <code>logInWithCredentials()</code> 函数，该函数将根据 API 响应发出一个新状态(失败或成功)。</p><h2 id="老铁记得-点赞、转发-，我将更有动力呈现-Flutter-好文"><a href="#老铁记得-点赞、转发-，我将更有动力呈现-Flutter-好文" class="headerlink" title="老铁记得 点赞、转发 ，我将更有动力呈现 Flutter 好文~~~~"></a>老铁记得 点赞、转发 ，我将更有动力呈现 Flutter 好文~~~~</h2><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 添加APP启动 Story View</title>
    <link href="https://blog.ducafecat.tech/2021/05/05/translation/story-view-in-flutter/"/>
    <id>https://blog.ducafecat.tech/2021/05/05/translation/story-view-in-flutter/</id>
    <published>2021-05-04T16:00:00.000Z</published>
    <updated>2021-05-05T00:52:30.037Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-05-08-51-54.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://medium.com/flutterdevs/story-view-in-flutter-7bb4ae98b119" target="_blank" rel="noopener">https://medium.com/flutterdevs/story-view-in-flutter-7bb4ae98b119</a></p></blockquote><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-05-08-29-22.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>在当前的快速市场中，一些社交渠道已经全面爆发，成为各个年龄段聚会的热门话题。漫步在数字环境中，你会注意到新的网络媒体应用程序，比如 Instagram，在过去的一年里热得像火一样。</p><p>当你听到“基于网络的媒体应用”这个词时，可能会出现 Facebook、 Instagram、 Twitter 或 Linkedin 等应用程序。然而，你有没有考虑过如何在 Instagram 这样的在线媒体应用程序上显示一个故事？在线媒体应用程序是一个开放的集会，您可以通过一个简单的用户界面与来自世界各地的个人进行联系。</p><p>在这个博客中，我们将探 Story View In Flutter 。我们将实现一个故事视图演示程序，以及如何在您的颤动应用程序中使用故事视图包创建类似 WhatsApp 的故事。</p><h2 id="类库"><a href="#类库" class="headerlink" title="类库"></a>类库</h2><ul><li><a href="https://pub.dev/packages/story_view/install" target="_blank" rel="noopener">https://pub.dev/packages/story_view/install</a></li></ul><h2 id="本文源码"><a href="#本文源码" class="headerlink" title="本文源码"></a>本文源码</h2><p><a href="https://github.com/flutter-devs/flutter_story_view_demo" target="_blank" rel="noopener">https://github.com/flutter-devs/flutter_story_view_demo</a></p><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><h3 id="Flutter-Story-View"><a href="#Flutter-Story-View" class="headerlink" title="Flutter Story View"></a>Flutter Story View</h3><p>Story View Flutter 组件工具对 Flutter 开发者很有帮助，通过使用这个类库，你可以显示社交媒体故事页面非常像 WhatsApp 状态故事或 Instagram 状态故事视图。同样可以像 Google 新闻应用程序一样使用内联/内部 ListView 或者 Column。伴随着手势暂停，向前，并进入后面的页面。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-05-08-34-07.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>这个演示视频显示了如何创建一个 Flutter 的故事视图。它展示了如何在您的 Flutter 应用程序中使用故事视图包来工作。它可以像文本、图片、视频等一样显示你的故事。此外，用户将转发，先前，和手势暂停的情景。它会显示在你的设备上。</p><h3 id="Features-功能"><a href="#Features-功能" class="headerlink" title="Features 功能"></a>Features 功能</h3><p>Story View 的一些特性如下:</p><ul><li>简单的文本状态故事</li><li>图像、 GIF 图像故事和视频故事(启用缓存)</li><li>为上一个、下一个和暂停故事做手势</li><li>每个故事项的标题</li><li>在每个故事视图的顶部有一个动画的进度指示器</li></ul><h3 id="Properties-属性"><a href="#Properties-属性" class="headerlink" title="Properties 属性"></a>Properties 属性</h3><p>Story View 的一些属性是:</p><ul><li>controller: 此属性用于控制 Story 的回放</li><li>onComplete: 此属性用于在显示 Story 的整个周期时进行回调。每当故事完成时，当 repeat 设置为 true 时，就会调用这个函数</li><li>storyItems: 此属性不为空，不显示页</li><li>onVerticalSwipeComplete: 此属性用于检测到垂直滑动手势时的回调。如果您不想收听这样的事件，请不要提供它</li><li>onStoryShow: 此属性用于当前显示故事时的回调</li><li>progressPosition: 此属性用于应放置进度指示符的位置</li></ul><h3 id="集成步骤"><a href="#集成步骤" class="headerlink" title="集成步骤"></a>集成步骤</h3><ul><li>第一步: 添加依赖项</li></ul><p>将依赖项添加到 pubspec ー yaml 文件。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dependencies:</span></span><br><span class="line"><span class="attr">  flutter:</span></span><br><span class="line"><span class="attr">    sdk:</span> <span class="string">flutter</span></span><br><span class="line"><span class="attr">  story_view:</span> <span class="string">^0.12.3</span></span><br></pre></td></tr></table></figure><ul><li>第二步: 导入</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:story_view/story_view.dart'</span>;</span><br></pre></td></tr></table></figure><ul><li>第三步: 拉取包</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> flutter packages get</span></span><br></pre></td></tr></table></figure><h3 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h3><p>你需要分别在你的代码中实现它:</p><blockquote><p>在 lib 文件夹中创建一个名为 <code>status_screen.dart</code> 的新 dart 文件。</p></blockquote><p>在这个屏幕上，我们将创建一个类似 WhatsApp 的用户界面。我们将添加一个容器小部件。在内部，我们将向 ListTile 添加网络图像、文本和 onTap 函数自动换行。在这个函数中，我们将导航到 <code>StoryPageView()</code> 类。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Container(</span><br><span class="line">  height: <span class="number">80</span>,</span><br><span class="line">  padding: <span class="keyword">const</span> EdgeInsets.all(<span class="number">8.0</span>),</span><br><span class="line">  color: textfieldColor,</span><br><span class="line">  child: ListView(</span><br><span class="line">    children: &lt;Widget&gt;[</span><br><span class="line">      ListTile(</span><br><span class="line">        leading: CircleAvatar(</span><br><span class="line">          radius: <span class="number">30</span>,</span><br><span class="line">          backgroundImage: NetworkImage(</span><br><span class="line">              <span class="string">"https://images.unsplash.com/photo-1581803118522-7b72a50f7e9f?ixid=MnwxMjA3fDB8MHxzZWFyY2h8MXx8bWFufGVufDB8fDB8fA%3D%3D&amp;ixlib=rb-1.2.1&amp;auto=format&amp;fit=crop&amp;w=500&amp;q=60"</span>),</span><br><span class="line">        ),</span><br><span class="line">        title: Text(</span><br><span class="line">          <span class="string">"Logan Veawer"</span>,</span><br><span class="line">          style: TextStyle(fontWeight: FontWeight.bold,color: white ),</span><br><span class="line">        ),</span><br><span class="line">        subtitle: Text(<span class="string">"Today, 20:16 PM"</span>,style: TextStyle(color:white.withOpacity(<span class="number">0.5</span>)),),</span><br><span class="line">        onTap: () =&gt; Navigator.push(</span><br><span class="line">            context,</span><br><span class="line">            MaterialPageRoute(</span><br><span class="line">                builder: (context) =&gt; StoryPageView())),</span><br><span class="line">      ),</span><br><span class="line">    ],</span><br><span class="line">  ),</span><br><span class="line">),</span><br></pre></td></tr></table></figure><p>当用户按下容器时，就会显示一个故事页面。我们将深入讨论下面的代码。当我们运行应用程序时，我们应该得到屏幕的输出，就像下面的屏幕截图一样。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-05-08-43-31.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><blockquote><p>在 lib 文件夹中创建一个名为 <code>story_page_view.dart</code> 的新 dart 文件。</p></blockquote><p>首先，我们将创建一个与 StoryController() 相等的 final_controller。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> _controller = StoryController();</span><br></pre></td></tr></table></figure><p>我们将创建一个 storyItems 列表。首先，我们将添加 StoryItem.text 意味着只添加不同背景颜色的简单文本状态。其次，我们将添加 StoryItem.pageImage 的意思是用控制器添加图像的 URL 来控制故事。最后，我们将使用控制器和图像匹配添加 gif 视频的 URL。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="built_in">List</span>&lt;StoryItem&gt; storyItems = [</span><br><span class="line">  StoryItem.text(title: <span class="string">'''“When you talk, you are only repeating something you know.</span></span><br><span class="line"><span class="string">   But if you listen, you may learn something new.”</span></span><br><span class="line"><span class="string">   – Dalai Lama'''</span>,</span><br><span class="line">      backgroundColor: Colors.blueGrey),</span><br><span class="line">  StoryItem.pageImage(</span><br><span class="line">      url:</span><br><span class="line">          <span class="string">"https://images.unsplash.com/photo-1553531384-cc64ac80f931?ixid=MnwxMjA3fDF8MHxzZWFyY2h8MXx8bW91bnRhaW58ZW58MHx8MHx8&amp;ixlib=rb-1.2.1&amp;auto=format&amp;fit=crop&amp;w=500&amp;q=60"</span>,</span><br><span class="line">      controller: controller),</span><br><span class="line">  StoryItem.pageImage(</span><br><span class="line">      url:</span><br><span class="line">          <span class="string">"https://wp-modula.com/wp-content/uploads/2018/12/gifgif.gif"</span>,</span><br><span class="line">      controller: controller,</span><br><span class="line">      imageFit: BoxFit.contain),</span><br><span class="line">];</span><br></pre></td></tr></table></figure><p>我们将返回一个 Material() 方法。在这个方法中，我们将添加 StoryView()。在内部，我们将添加一个 storyItems、 controller、 inline means 列表，如果您希望将故事显示为整个页面，则将其设置为 false 。但是，如果您要将它作为页面的一部分(如 ListView 或 Column)显示，那么将其设置为 true。我们会添加重复意味着用户应该故事永远重复然后真实，否则，假。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> Material(</span><br><span class="line">  child: StoryView(</span><br><span class="line">    storyItems: storyItems,</span><br><span class="line">    controller: controller,</span><br><span class="line">    inline: <span class="keyword">false</span>,</span><br><span class="line">    repeat: <span class="keyword">true</span>,</span><br><span class="line">  ),</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>当我们运行应用程序时，我们应该得到屏幕的输出，就像下面的屏幕截图一样。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-05-08-46-23.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="代码文件"><a href="#代码文件" class="headerlink" title="代码文件"></a>代码文件</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:story_view/story_view.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StoryPageView</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _StoryPageViewState createState() =&gt; _StoryPageViewState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_StoryPageViewState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">StoryPageView</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> controller = StoryController();</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">List</span>&lt;StoryItem&gt; storyItems = [</span><br><span class="line">      StoryItem.text(title: <span class="string">'''“When you talk, you are only repeating something you know.</span></span><br><span class="line"><span class="string">       But if you listen, you may learn something new.”</span></span><br><span class="line"><span class="string">       – Dalai Lama'''</span>,</span><br><span class="line">          backgroundColor: Colors.blueGrey),</span><br><span class="line">      StoryItem.pageImage(</span><br><span class="line">          url:</span><br><span class="line">              <span class="string">"https://images.unsplash.com/photo-1553531384-cc64ac80f931?ixid=MnwxMjA3fDF8MHxzZWFyY2h8MXx8bW91bnRhaW58ZW58MHx8MHx8&amp;ixlib=rb-1.2.1&amp;auto=format&amp;fit=crop&amp;w=500&amp;q=60"</span>,</span><br><span class="line">          controller: controller),</span><br><span class="line">      StoryItem.pageImage(</span><br><span class="line">          url:</span><br><span class="line">              <span class="string">"https://wp-modula.com/wp-content/uploads/2018/12/gifgif.gif"</span>,</span><br><span class="line">          controller: controller,</span><br><span class="line">          imageFit: BoxFit.contain),</span><br><span class="line">    ];</span><br><span class="line">    <span class="keyword">return</span> Material(</span><br><span class="line">      child: StoryView(</span><br><span class="line">        storyItems: storyItems,</span><br><span class="line">        controller: controller,</span><br><span class="line">        inline: <span class="keyword">false</span>,</span><br><span class="line">        repeat: <span class="keyword">true</span>,</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>在本文中，我已经解释了 Flutter 的基本结构的 Story View ; 您可以根据自己的选择修改这个代码。这是一个小的介绍 Story View 的用户交互从我这边，它的工作使用 Flutter。</p><h2 id="老铁记得-点赞、转发-，我将更有动力呈现-Flutter-好文"><a href="#老铁记得-点赞、转发-，我将更有动力呈现-Flutter-好文" class="headerlink" title="老铁记得 点赞、转发 ，我将更有动力呈现 Flutter 好文~~~~"></a>老铁记得 点赞、转发 ，我将更有动力呈现 Flutter 好文~~~~</h2><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>这10个每个开发者都必须知道的Widgets</title>
    <link href="https://blog.ducafecat.tech/2021/05/03/translation/these-10-flutter-widgets-every-developer-must-know/"/>
    <id>https://blog.ducafecat.tech/2021/05/03/translation/these-10-flutter-widgets-every-developer-must-know/</id>
    <published>2021-05-02T16:00:00.000Z</published>
    <updated>2021-05-03T09:09:39.712Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-03-17-09-37.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://genotechies.medium.com/these-10-flutter-widgets-every-developer-must-know-d0b61529796b" target="_blank" rel="noopener">https://genotechies.medium.com/these-10-flutter-widgets-every-developer-must-know-d0b61529796b</a></p></blockquote><h2 id="这些是我们将要讨论的-widgets"><a href="#这些是我们将要讨论的-widgets" class="headerlink" title="这些是我们将要讨论的 widgets:"></a>这些是我们将要讨论的 widgets:</h2><ul><li>Dismissible</li><li>SizedBox</li><li>Draggable</li><li>Flexible</li><li>MediaQuery</li><li>Spacer</li><li>AnimatedIcon</li><li>Placeholder</li><li>RichText</li><li>ReorderableListView</li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><h3 id="Dismissible"><a href="#Dismissible" class="headerlink" title="Dismissible"></a>Dismissible</h3><p>滑动和隐藏是移动应用程序中常见的 UI 模式。要在 Flutter 做到这一点，可以使用 Dismissible widget。它有一个 child，background 和 key 。它将检测滑动手势和动画的 child 小部件。你也可以双向和垂直的交换。你可以用自己的方式使用更多的属性。您可以通过复制并粘贴下面的代码来尝试。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_MyHomePageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">MyHomePage</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; _values = [<span class="string">'Item 1'</span>, <span class="string">'Item 2'</span>, <span class="string">'Item 3'</span>, <span class="string">'Item 4'</span>, <span class="string">'Item 5'</span>];</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> ListView.separated(</span><br><span class="line">        itemCount: _values.length,</span><br><span class="line">        padding: <span class="keyword">const</span> EdgeInsets.all(<span class="number">5.0</span>),</span><br><span class="line">        separatorBuilder: (context, index) =&gt; Divider(</span><br><span class="line">          color: Colors.black,</span><br><span class="line">        ),</span><br><span class="line">        itemBuilder: (context, index) &#123;</span><br><span class="line">          <span class="keyword">return</span> Dismissible(</span><br><span class="line">            key: Key(<span class="string">'item <span class="subst">$&#123;_values[index]&#125;</span>'</span>),</span><br><span class="line">            onDismissed: (DismissDirection direction) &#123;</span><br><span class="line">              <span class="keyword">if</span> (direction == DismissDirection.startToEnd) &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">"Selected Item"</span>);</span><br><span class="line">              &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">'Delete item'</span>);</span><br><span class="line">              &#125;</span><br><span class="line"></span><br><span class="line">              setState(() &#123;</span><br><span class="line">                _values.removeAt(index);</span><br><span class="line">              &#125;);</span><br><span class="line">            &#125;,</span><br><span class="line">            child: ListTile(</span><br><span class="line">              leading: Icon(Icons.email, size: <span class="number">50</span>),</span><br><span class="line">              title: Text(_values[index]),</span><br><span class="line">            ),</span><br><span class="line">          );</span><br><span class="line">        &#125;</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="SizedBox"><a href="#SizedBox" class="headerlink" title="SizedBox"></a>SizedBox</h3><p>这是一个小部件示例。当你有一个小部件，应该是固定的大小。例如，一个按钮的大小应该为 width = 100px 和 height = 50px。您需要将按钮包装在 SizedBox 中。下面是类的构造函数。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> SizedBox(</span><br><span class="line">&#123;Key key,</span><br><span class="line"><span class="built_in">double</span> width,</span><br><span class="line"><span class="built_in">double</span> height,</span><br><span class="line">Widget child&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h3 id="Draggable"><a href="#Draggable" class="headerlink" title="Draggable"></a>Draggable</h3><p>在许多应用程序中，我们可以看到拖动选项，如在电子邮件，文档拖动。有了这个 Flutter 小部件，很容易实现这个功能。在这里，我们拖动数据。这里我传递一个从 Draggable 到 DragTarget 的字符串。然后你需要说明你传递的数据是什么，子属性显示你的数据。DragTarget 目标是拖曳 Draggable 的着陆区。主要有三种调用方法。</p><ul><li>onwillAccept: 以测试移动目标是否可以接受数据</li><li>onAccept: 调用有效的可拖动区域</li><li>onLeave: 当区域不成功时调用</li></ul><h3 id="Flexible"><a href="#Flexible" class="headerlink" title="Flexible"></a>Flexible</h3><p>大多数时候，我们使用行和列来显示一组子窗口小部件。但他们需要灵活的大小来显示与父母的相关性。您只需要将所有子窗口小部件包装在一个灵活的窗口小部件中。Flex 值决定每个子元素获得多少空间。当改变屏幕大小时，它不会改变儿童之间的比例。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">child:  Column(</span><br><span class="line">  children: &lt;Widget&gt;[</span><br><span class="line">    Flexible(</span><br><span class="line">        flex: <span class="number">3</span>,</span><br><span class="line">        child: Container(</span><br><span class="line">          color: Colors.red,</span><br><span class="line">        )</span><br><span class="line">    ),</span><br><span class="line">    Flexible(</span><br><span class="line">        flex: <span class="number">1</span>,</span><br><span class="line">        child: Container(</span><br><span class="line">          color: Colors.green,</span><br><span class="line">        )</span><br><span class="line">    ),</span><br><span class="line">    Flexible(</span><br><span class="line">        flex: <span class="number">2</span>,</span><br><span class="line">        child: Container(</span><br><span class="line">          color: Colors.blue,</span><br><span class="line">        )</span><br><span class="line">    ),</span><br><span class="line">  ],</span><br><span class="line">)</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-03-16-58-40.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="MediaQuery"><a href="#MediaQuery" class="headerlink" title="MediaQuery"></a>MediaQuery</h3><p>如果你的目标是在手机和选项卡上运行你的应用程序，你的应用程序需要支持不同的用户界面大小。此外，有时用户有自己的 UI 期望，如字体大小或小，方向，填充等。使用这个 MediaQuery，您可以获得屏幕大小信息和用户首选项，并根据这些细节构建布局。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> MediaQueryData(&#123;</span><br><span class="line">  <span class="keyword">this</span>.size = Size.zero,</span><br><span class="line">  <span class="keyword">this</span>.devicePixelRatio = <span class="number">1.0</span>,</span><br><span class="line">  <span class="keyword">this</span>.textScaleFactor = <span class="number">1.0</span>,</span><br><span class="line">  <span class="keyword">this</span>.platformBrightness = Brightness.light,</span><br><span class="line">  <span class="keyword">this</span>.padding = EdgeInsets.zero,</span><br><span class="line">  <span class="keyword">this</span>.viewInsets = EdgeInsets.zero,</span><br><span class="line">  <span class="keyword">this</span>.systemGestureInsets = EdgeInsets.zero,</span><br><span class="line">  <span class="keyword">this</span>.viewPadding = EdgeInsets.zero,</span><br><span class="line">  <span class="keyword">this</span>.alwaysUse24HourFormat = <span class="keyword">false</span>,</span><br><span class="line">  <span class="keyword">this</span>.accessibleNavigation = <span class="keyword">false</span>,</span><br><span class="line">  <span class="keyword">this</span>.invertColors = <span class="keyword">false</span>,</span><br><span class="line">  <span class="keyword">this</span>.highContrast = <span class="keyword">false</span>,</span><br><span class="line">  <span class="keyword">this</span>.disableAnimations = <span class="keyword">false</span>,</span><br><span class="line">  <span class="keyword">this</span>.boldText = <span class="keyword">false</span>,</span><br><span class="line">  <span class="keyword">this</span>.navigationMode = NavigationMode.traditional,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>这是一个提取屏幕尺寸的示例。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MediaQueryData deviceInfo = MediaQuery.of(context);</span><br></pre></td></tr></table></figure><p>输出</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">I/flutter ( 6508): size: Size(360.0, 592.0)</span><br><span class="line">I/flutter ( 6508): padding: EdgeInsets(0.0, 24.0, 0.0, 0.0)</span><br><span class="line">I/flutter (6508) : Size: Size (360.0,592.0) i/flutter (6508) : padding: EdgeInsets (0.0,24.0,0.0,0.0)</span><br></pre></td></tr></table></figure><h3 id="Spacer"><a href="#Spacer" class="headerlink" title="Spacer"></a>Spacer</h3><p>这是另一个小部件，您最好在事先自定义中使用它。在一行中，我们可以使用 MainAxisAlignment 定义子级之间的空间。但是使用 Spacer 小部件，你可以做得更多。只需在其他小部件之间添加间隔符即可。然后 children 扩展开来制造额外的空间。有一个 flex 属性来确定相对大小。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">SizedBox(</span><br><span class="line">  height: <span class="number">50</span>,</span><br><span class="line">  child: Row(</span><br><span class="line">    children: &lt;Widget&gt;[</span><br><span class="line">      Container(</span><br><span class="line">        width: <span class="number">50</span>,</span><br><span class="line">        color: Colors.red,</span><br><span class="line">      ),</span><br><span class="line">      Spacer(flex: <span class="number">2</span>,),</span><br><span class="line">      Container(</span><br><span class="line">        width: <span class="number">50</span>,</span><br><span class="line">        color: Colors.green,</span><br><span class="line">      ),</span><br><span class="line">      Spacer(flex: <span class="number">1</span>,),</span><br><span class="line">      Container(</span><br><span class="line">        width: <span class="number">50</span>,</span><br><span class="line">        color: Colors.blue,</span><br><span class="line">      ),</span><br><span class="line">      Container(</span><br><span class="line">        width: <span class="number">50</span>,</span><br><span class="line">        color: Colors.yellow,</span><br><span class="line">      ),</span><br><span class="line">    ],</span><br><span class="line">  ),</span><br><span class="line">);</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-03-17-02-13.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="AnimatedIcon"><a href="#AnimatedIcon" class="headerlink" title="AnimatedIcon"></a>AnimatedIcon</h3><p>已经有一个巨大的图标集已经在框架。也有动画图标，你可以在你的应用程序中使用。要使用这些，我们需要一个 AnimatedIcon 小部件。你需要提供图标和主要的进度属性。Flutter 提供了许多不同的动画图标供您使用。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/animation.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() =&gt; runApp(LogoApp());</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LogoApp</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  _LogoAppState createState() =&gt; _LogoAppState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_LogoAppState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">LogoApp</span>&gt; <span class="title">with</span> <span class="title">SingleTickerProviderStateMixin</span> </span>&#123;</span><br><span class="line">  <span class="built_in">bool</span> isPlaying = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">  Animation animation;</span><br><span class="line"></span><br><span class="line">  AnimationController controller;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line"></span><br><span class="line">    controller = AnimationController(</span><br><span class="line">        duration: <span class="keyword">const</span> <span class="built_in">Duration</span>(milliseconds: <span class="number">500</span>), vsync: <span class="keyword">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      home: Scaffold(</span><br><span class="line">        body: Center(</span><br><span class="line">            child: IconButton(</span><br><span class="line">              iconSize: <span class="number">70</span>,</span><br><span class="line">              icon: AnimatedIcon(</span><br><span class="line">                icon: AnimatedIcons.play_pause,</span><br><span class="line">                progress: controller,</span><br><span class="line">              ),</span><br><span class="line">              onPressed: () =&gt; _onpressed(),</span><br><span class="line">            )),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> dispose() &#123;</span><br><span class="line">    controller.dispose();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">super</span>.dispose();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  _onpressed() &#123;</span><br><span class="line">    setState(() &#123;</span><br><span class="line">      isPlaying = !isPlaying;</span><br><span class="line"></span><br><span class="line">      isPlaying ? controller.forward() : controller.reverse();</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-03-17-03-11.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="Placeholder"><a href="#Placeholder" class="headerlink" title="Placeholder"></a>Placeholder</h3><p>有时您需要为 UI 的特定组件保留空间，直到最后确定该组件的视图。因此，与其保留一个空间，我们可以在那里放置 Plaholder 以便进一步实现。在你可以开始实施它之后。这将填补所有提到的空间。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">Center(</span><br><span class="line">  child: Column(</span><br><span class="line">    children: &lt;Widget&gt;[</span><br><span class="line">      Container(</span><br><span class="line">          child: Placeholder()</span><br><span class="line">      ),</span><br><span class="line">      Expanded(</span><br><span class="line">        child: Row(</span><br><span class="line">          children: &lt;Widget&gt;[</span><br><span class="line">            Flexible(</span><br><span class="line">              flex: <span class="number">1</span>,</span><br><span class="line">              child: Placeholder(color: Colors.red,),</span><br><span class="line">            ),</span><br><span class="line">            Flexible(</span><br><span class="line">              flex: <span class="number">4</span>,</span><br><span class="line">              child: Placeholder(color: Colors.green,),</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      )</span><br><span class="line">    ],</span><br><span class="line">  )</span><br><span class="line">),</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-03-17-03-39.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="RichText"><a href="#RichText" class="headerlink" title="RichText"></a>RichText</h3><p>文本是每个应用程序的主要 UI 组件之一。因此字体设计非常重要。你必须注意文字的样式和外观，如文字大小、字体、样式等。有时候你需要显示一个结合了不同风格的段落。用粗体表示强调，或用斜体表示，或用下划线表示，或用不同的颜色，不同的字体大小，或同时显示所有内容。你最好使用 RichText。下面是一个例子:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">RichText(</span><br><span class="line">  text: TextSpan(</span><br><span class="line">    style: TextStyle(color: Colors.black, fontSize: <span class="number">24</span>),</span><br><span class="line">    children: &lt;TextSpan&gt;[</span><br><span class="line">      TextSpan(text: <span class="string">'Flutter '</span>, style: TextStyle(color: Colors.red)),</span><br><span class="line">      TextSpan(text: <span class="string">'Placeholder '</span>),</span><br><span class="line">      TextSpan(text: <span class="string">'Widget'</span>, style: TextStyle(decoration: TextDecoration.underline, fontStyle: FontStyle.italic))</span><br><span class="line">    ],</span><br><span class="line">  ),</span><br><span class="line">)</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-05-03-17-04-16.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="ReorderableListView"><a href="#ReorderableListView" class="headerlink" title="ReorderableListView"></a>ReorderableListView</h3><p>在我们的应用程序中，我们使用列表视图来显示一组数据并滚动它们。通常，您不能移动和更改列表中的位置。ReorderbaleListView 是解决方案。有了它，用户可以长时间按下该项目，并将其放入一个新的他或她喜欢的地方。列表视图的每个项都有一个用于标识该项的键，在移动该项时，调用 onReorder 方法并跟踪移动和更改。下面是一个例子。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_TopListState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">TopList</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; topMovies = [</span><br><span class="line">    <span class="string">"It Happened One Night(1934)"</span>,</span><br><span class="line">    <span class="string">"Black Panther(2018)"</span>,</span><br><span class="line">    <span class="string">"Citizen Kane(1941)"</span>,</span><br><span class="line">    <span class="string">"Parasite (Gisaengchung)(2019)"</span>,</span><br><span class="line">    <span class="string">"Avengers: Endgame(2019)"</span>,</span><br><span class="line">    <span class="string">"The Wizard of Oz(1939)"</span>,</span><br><span class="line">    <span class="string">"Casablanca(1942)"</span>,</span><br><span class="line">    <span class="string">"Knives Out(2019)"</span></span><br><span class="line">  ];</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">"ReorderableListView Example"</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: ReorderableListView(</span><br><span class="line">        onReorder: (<span class="built_in">int</span> oldIndex, <span class="built_in">int</span> newIndex) &#123;&#125;,</span><br><span class="line">        children: getListItems(),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">List</span>&lt;ListTile&gt; getListItems() =&gt;</span><br><span class="line">      topMovies</span><br><span class="line">          .asMap()</span><br><span class="line">          .map((i, item) =&gt; MapEntry(i, buildTenableListTile(item, i)))</span><br><span class="line">          .values</span><br><span class="line">          .toList();</span><br><span class="line"></span><br><span class="line">  ListTile buildTenableListTile(<span class="built_in">String</span> item, <span class="built_in">int</span> index) &#123;</span><br><span class="line">    <span class="keyword">return</span> ListTile(</span><br><span class="line">      key: ValueKey(item),</span><br><span class="line">      title: Text(item),</span><br><span class="line">      leading: Text(<span class="string">"<span class="subst">$&#123;index + <span class="number">1</span>&#125;</span>"</span>),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 移动安全 ー Ep.2 Strong Device/ Strong Pin</title>
    <link href="https://blog.ducafecat.tech/2021/04/30/translation/mobile-security-via-flutter-ep-2-strong-device-strong-pin/"/>
    <id>https://blog.ducafecat.tech/2021/04/30/translation/mobile-security-via-flutter-ep-2-strong-device-strong-pin/</id>
    <published>2021-04-29T16:00:00.000Z</published>
    <updated>2021-04-30T01:24:46.997Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-04-30-09-24-45.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://medium.com/kbtg-life/mobile-security-via-flutter-ep-2-strong-device-strong-pin-70b4322bffc2" target="_blank" rel="noopener">https://medium.com/kbtg-life/mobile-security-via-flutter-ep-2-strong-device-strong-pin-70b4322bffc2</a></p></blockquote><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-04-30-08-29-29.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>在本期节目中，我们将进一步强化您的移动应用程序。“但是怎么做呢?”你可能会好奇。让我们把它比作建造一座房子。为了确保它配备了最高级别的安保系统，你可能需要在房子周围安装所有的警报器和摄像头。但是如果你碰巧把钥匙留在门口，这些都不重要了！对于安全性，我们需要考虑一个坏黑客可能选择攻击的每一种可能性，所以这不仅仅是一个解决方案，然后，一切都完成了。我们必须确保外部和内部的应用程序都是安全的。</p><p>上一集，我们讨论了 SSL。你可以把它想象成房子周围高高的篱笆。虽然爬过去比较困难，但还是可以管理的。因此，在本期节目中，我们将确保没有人意外地把钥匙落在门口。</p><p><a href="https://medium.com/kbtg-life/mobile-security-via-flutter-ep-1-ssl-pinning-c57f18b711f6" target="_blank" rel="noopener">https://medium.com/kbtg-life/mobile-security-via-flutter-ep-1-ssl-pinning-c57f18b711f6</a></p><p>在 iOS/Android 中，已经有一个本地安全 API 来保护他们的应用程序不受外界的攻击，所以我们将使用这个 API 来实现 Flutter。让我们来看看什么是必要的，什么是美好的。</p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://pub.dev/packages/flutter_secure_storage" target="_blank" rel="noopener">https://pub.dev/packages/flutter_secure_storage</a></li><li><a href="https://www.macrumors.com/2020/12/16/ios-14-installed-81-percent-iphones/" target="_blank" rel="noopener">https://www.macrumors.com/2020/12/16/ios-14-installed-81-percent-iphones/</a></li><li><a href="https://pub.dev/packages/flutter_jailbreak_detection" target="_blank" rel="noopener">https://pub.dev/packages/flutter_jailbreak_detection</a></li><li><a href="https://developer.apple.com/documentation/localauthentication/logging_a_user_into_your_app_with_face_id_or_touch_id" target="_blank" rel="noopener">https://developer.apple.com/documentation/localauthentication/logging_a_user_into_your_app_with_face_id_or_touch_id</a></li><li><a href="https://frida.re/" target="_blank" rel="noopener">https://frida.re/</a></li><li><a href="https://developer.android.com/training/sign-in/biometric-auth#crypto" target="_blank" rel="noopener">https://developer.android.com/training/sign-in/biometric-auth#crypto</a></li><li><a href="https://medium.com/androiddevelopers/using-biometricprompt-with-cryptoobject-how-and-why-aace500ccdb7" target="_blank" rel="noopener">https://medium.com/androiddevelopers/using-biometricprompt-with-cryptoobject-how-and-why-aace500ccdb7</a></li><li><a href="https://github.com/zionspike/android-FingerAuthenSample-Asym" target="_blank" rel="noopener">https://github.com/zionspike/android-FingerAuthenSample-Asym</a></li><li><a href="https://www.researchgate.net/publication/313823128_Understanding_Human-Chosen_PINs_Characteristics_Distribution_and_Security" target="_blank" rel="noopener">https://www.researchgate.net/publication/313823128_Understanding_Human-Chosen_PINs_Characteristics_Distribution_and_Security</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><h3 id="强制性"><a href="#强制性" class="headerlink" title="强制性"></a>强制性</h3><h4 id="安全的数据存储"><a href="#安全的数据存储" class="headerlink" title="安全的数据存储"></a>安全的数据存储</h4><p>基本上有两件事你需要记住:</p><ul><li>不要在应用程序中保存任何安全信息，比如名字、姓氏、电子邮件、用户名、密码、公民身份，或任何能让黑客追踪并查出用户身份的信息。如果你真的需要保存它，比如一个令牌或者任何你想用来改善用户体验的东西，确保你把它保存在两个操作系统平台都提供的安全的数据存储中。为此，我使用了这个库。</li></ul><p><a href="https://pub.dev/packages/flutter_secure_storage" target="_blank" rel="noopener">https://pub.dev/packages/flutter_secure_storage</a></p><p>对于 iOS，他们使用 Keychain，即使你删除了应用程序也不会被删除，而对于安卓，他们使用 KeyStore 来存储解密保存的数据的密钥。</p><ul><li>额外的安全层总是加密的安全信息，即使 iOS/Android 已经有了安全存储。这是因为在未来，可能会有一种工具，可以让黑客破解设备上的加密。既然我们在讨论加密的话题，我们也需要讨论一下密钥。它应该是动态的和唯一的每个用户，所以我们决定使用用户自己的密码，因为我们可以肯定，只有应用程序所有者知道如何解密它与正确的密码和访问所有保存的数据。</li></ul><p>然而，这意味着密码被秘密保存在设备上。如果一个黑客暴力破解了一个密码，他们就会知道这是正确的密码，这可能会更加危险。他们将有足够的时间解密，因为它是在设备上，所以我们的解决方案是使用另一层保护。我们允许黑客使用任何密钥解密，这样他们就不知道哪个是正确的密钥来调用我们的服务器。如果他们输入错误的密码 3 次，后端会自动锁定他们。这将解决这个问题。这里不提供使用任何密钥进行解密的解决方案。</p><h4 id="关闭生产中的日志"><a href="#关闭生产中的日志" class="headerlink" title="关闭生产中的日志"></a>关闭生产中的日志</h4><p>开发人员需要一个日志来查看他们的代码是否正常工作。这对于非生产环境来说没有问题，但是对于生产环境来说，您需要关闭它以防止任何人看到它。为此，我通过在 main.dart 中调用以下代码来覆盖 debugPrint 函数</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">debugPrint = (String message, &#123;int wrapWidth&#125;) &#123;&#125;;</span><br></pre></td></tr></table></figure><p>这意味着如果我们使用 debugPrint，它将不会打印任何东西。我把它划分为 main_dev。飞镖和主电极。然后把这个函数放在 main_prod 中。这样我们就看不到任何生产日志了。至于非刺激性构建，您可以就这样保留它。没有必要添加任何东西。我们为什么一定要关掉这根木头？这是因为我们不想让任何人看到幕后的应用程序。不要给黑客任何他们下一步行动应该是什么的线索。</p><p>从现在开始只使用 debugPrint 而不是 print</p><h4 id="不支持旧版本操作系统"><a href="#不支持旧版本操作系统" class="headerlink" title="不支持旧版本操作系统"></a>不支持旧版本操作系统</h4><p>我们必须把这个设置成本地，而不是 Flutter。我并不是真的担心 iOS，因为 iOS 用户倾向于根据本文的采用率频繁更新操作系统。</p><p><a href="https://www.macrumors.com/2020/12/16/ios-14-installed-81-percent-iphones/" target="_blank" rel="noopener">https://www.macrumors.com/2020/12/16/ios-14-installed-81-percent-iphones/</a></p><p>在 iOS 14 发布后仅仅 3 个月，81% 的设备都更新了他们的操作系统。请记住，安全就像猫和老鼠，您需要一直远离潜在的威胁。我们不应该因为操作系统的安全漏洞而尝试支持过时的操作系统版本。在我看来，只支持最新版本或者更早的版本是可以的。例如，现在我们有 iOS 14，所以我们应该只支持 iOS 12,13 和 14。这将允许 98% 的用户使用你的应用程序。我们可以在 Xcode 设定一个最低目标来控制它。</p><p>与此同时，Android 是开源的，这意味着谷歌无法控制它。因此，收养率非常低。看看 Android 的公告，看看哪些 Android 操作系统正在变得过时，没有更多的安全补丁。现在他们仍然支持 Android 8.0，所以我们可能不得不将 minSdkVersion 的目标定为 build.gradle 为 26。</p><p>简而言之，iOS = 12 及以上/Android = 26 及以上</p><h4 id="只在你需要的时候请求许可"><a href="#只在你需要的时候请求许可" class="headerlink" title="只在你需要的时候请求许可"></a>只在你需要的时候请求许可</h4><p>所有开发人员都应该知道的一件基本事情是，总是在需要时请求权限。不要从一开始就要求许可，只要求你需要的东西。例如，一些应用程序可能会要求访问您的 GPS 位置，即使没有任何功能需要它。你永远不应该这样做，因为两件事。首先，你在收集不必要的数据，这些数据是用户的私人数据。其次，如果这些数据没有被正确实现，黑客也可以访问这些数据。因此，为了安全起见，只问你需要什么和什么时候需要它。当用户第一次打开应用程序时，你不希望用户体验是 10 个弹出窗口。用户将离开，再也不会回来。</p><h4 id="越狱检测"><a href="#越狱检测" class="headerlink" title="越狱检测"></a>越狱检测</h4><p>对于 Flutter，我们使用了原生的越狱检测填充，比如用于安卓系统的 Rootbeer 和用于 iOS 系统的 DTTJailbreakDetection。这两个都是著名的。对于 Flutter，我使用这个库。</p><p><a href="https://pub.dev/packages/flutter_jailbreak_detection" target="_blank" rel="noopener">https://pub.dev/packages/flutter_jailbreak_detection</a></p><p>尽管对于有经验的黑客来说，它可能还不够强大，但至少我们有东西可以保护我们的应用免受没有经验的黑客的攻击。他们在商业 SDK 中有几个解决方案来保护这一个，但是他们不是强制性的。除非你的应用需要高安全级别，否则 Flutter 越狱检测应该足够了。</p><h4 id="利用密码技术进行生物测定"><a href="#利用密码技术进行生物测定" class="headerlink" title="利用密码技术进行生物测定"></a>利用密码技术进行生物测定</h4><p>目前，许多应用程序为了更好的用户体验而实现了生物特征识别认证。然而，他们中的大多数人只是相信 iOS/Android，我并不真的推荐这样做。首先，我们可能会在 Swift 中看到这样的代码，甚至苹果也推荐这样的代码。</p><p><a href="https://developer.apple.com/documentation/localauthentication/logging_a_user_into_your_app_with_face_id_or_touch_id" target="_blank" rel="noopener">https://developer.apple.com/documentation/localauthentication/logging_a_user_into_your_app_with_face_id_or_touch_id</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">let reason = “Log in to your account”</span><br><span class="line">context.evaluatePolicy(.deviceOwnerAuthentication, localizedReason: reason ) &#123; success, error in</span><br><span class="line">   if success &#123;</span><br><span class="line">       // Login Succeed, do something next</span><br><span class="line">   &#125; else &#123;</span><br><span class="line">       // Failed, somebody else!!</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>每个人都会相信他们的设备。为什么不呢? 嗯，实际上有一个工具叫做 Frida 脚本。</p><p><a href="https://frida.re/" target="_blank" rel="noopener">https://frida.re/</a></p><p>浏览之后，你会发现使用这个工具绕过生物计量学工具是多么容易。</p><p>这里的教训是 DO n’t just trust boolean from devices。这里有一个来自谷歌的教程，其他人已经在 Android 版本中实现了它。</p><p><a href="https://developer.android.com/training/sign-in/biometric-auth#crypto" target="_blank" rel="noopener">https://developer.android.com/training/sign-in/biometric-auth#crypto</a></p><p><a href="https://medium.com/androiddevelopers/using-biometricprompt-with-cryptoobject-how-and-why-aace500ccdb7" target="_blank" rel="noopener">https://medium.com/androiddevelopers/using-biometricprompt-with-cryptoobject-how-and-why-aace500ccdb7</a></p><p><a href="https://github.com/zionspike/android-FingerAuthenSample-Asym" target="_blank" rel="noopener">https://github.com/zionspike/android-FingerAuthenSample-Asym</a></p><p>这是生物识别和密码复查的结合。您可以使用同样的概念扑动。也就是说，如果你的应用程序没有任何金融或在线支付功能，你可以跳过这一部分。</p><h4 id="不要用纯文本发送密码"><a href="#不要用纯文本发送密码" class="headerlink" title="不要用纯文本发送密码"></a>不要用纯文本发送密码</h4><p>有些人可能会说 HTTPS 是足够安全的，为什么我们必须关心以纯文本发送密码？事实上，黑客可以使用 MITM (中间人攻击文档)以纯文本形式轻松检索你的信息。这就是为什么我们应该在离开移动应用程序之前对密码进行修改，以防黑客窃听，最好的方法就是用盐来修改密码。</p><ul><li>hash(password + dynamic salt)</li></ul><p>盐应该在短时间内频繁更换，我们可以做一些基本的事情。</p><ul><li>hash(password + userID)</li></ul><p>尽管用户 ID 是唯一的和动态的，但它并不总是变化的。尽管如此，对于基本安全来说，这是可以接受的。然而，如果你想要实现完全的安全性，你必须找到其他一直在改变的东西，并且使用缓慢的散列算法，比如 Bcrypt 而不是 SHA256，因为它们需要特殊的硬件来破解。</p><h3 id="可选，最好去做"><a href="#可选，最好去做" class="headerlink" title="可选，最好去做"></a>可选，最好去做</h3><p>这部分是针对需要额外安全性的金融或银行应用程序。</p><h4 id="反调试"><a href="#反调试" class="headerlink" title="反调试"></a>反调试</h4><p>对于安卓系统，我们将其分为多个功能</p><ul><li>关闭 Debuggable 在 buildTypes 部分中添加此标志以 build.gradle。将 release 设置为 false，debug 设置为 true，或者如果需要，可以将两者都设置为 false。</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">buildTypes &#123;</span><br><span class="line">    release &#123;</span><br><span class="line">        debuggable false</span><br><span class="line">        signingConfig signingConfigs.release</span><br><span class="line">        minifyEnabled true</span><br><span class="line">        proguardFiles getDefaultProguardFile(&apos;proguard-android.txt&apos;), &apos;proguard-rules.pro&apos;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    debug &#123;</span><br><span class="line">        debuggable true</span><br><span class="line">        signingConfig signingConfigs.release</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>阻止调试器</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">// Open ADB Debugging</span><br><span class="line">if (Settings.Secure.getInt(this.applicationContext.contentResolver, Settings.Global.ADB_ENABLED, 0) == 1) &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// Check by using `adb shell getprop ro.crypto.type`</span><br><span class="line">if ((applicationContext.getSystemService(Context.DEVICE_POLICY_SERVICE) as DevicePolicyManager).storageEncryptionStatus == DevicePolicyManager.ENCRYPTION_STATUS_UNSUPPORTED) &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// flag debuggable in gradle is true</span><br><span class="line">if ((0 != applicationInfo.flags and ApplicationInfo.FLAG_DEBUGGABLE || BuildConfig.DEBUG))  &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// Use Debugger in Android Studio to connect for getting log</span><br><span class="line">if (Debug.isDebuggerConnected() || Debug.waitingForDebugger()) &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>您可以复制上面的代码并将其粘贴到 MainActivity.kt。如果是真的，你可以把用户踢出去或者做任何你想做的事情。请允许我解释一下。</p><ul><li><p>打开 ADB 调试防止用户打开 ADB 模式。虽然这没有必要，因为大多数 Android 开发人员总是在需要测试应用程序的时候打开它。这取决于你是否祝酒消息警告用户或评论它出来。</p></li><li><p>不支持 ENCRYPTION _ status _ unsupported 以检查设备是否支持存储加密。在安卓系统中，默认情况下它应该是开启的。如果它被关闭了，那么他们的设备就出了问题，因为用户通常不能自己做到这一点。为了防止上述风险，我们只是不允许任何人使用它。</p></li><li><p>ApplicationInfo.FLAG_DEBUGGABLE 检查我们在 Gradle 添加的标志调试是否为 true。如果没有，不要让用户使用它。和上一个一样，这是用户无法改变的东西，除非有人反向工程你的应用程序，并打包为 APK 再次。</p></li><li><p>来检查你的应用程序是否连接到了 Android Studio 调试器。如果是，不要让用户使用它。</p></li><li><p>至于 iOS，现在还没有简单的方法来实现它，但是你可以找到一些商业 SDK 来帮助你实现它。</p></li></ul><h4 id="检查设备是否有安全访问"><a href="#检查设备是否有安全访问" class="headerlink" title="检查设备是否有安全访问"></a>检查设备是否有安全访问</h4><p>有些用户可能决定不在他们的设备上安装针、手指扫描或面部扫描。如果有人偷了他们的设备，他们只需要解锁就可以了。拥有这种类型的安全措施就像是安全的第一道门。</p><p>在 Android 中，我使用 Flutter 通道调用 Flutter 来配置 FlutterEngine 功能，让 Flutter 来决定如何处理这个用户。下面是 Android 的代码，用来检查设备是否有密码。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">private val CHANNEL = &quot;com.kbtg.flutter&quot;</span><br><span class="line">MethodChannel(flutterEngine.dartExecutor.binaryMessenger, CHANNEL).setMethodCallHandler &#123; call, result -&gt;</span><br><span class="line">  if (call.method == &quot;getDeviceHasPasscode&quot;) &#123;</span><br><span class="line">    result.success((getSystemService(Context.KEYGUARD_SERVICE) as KeyguardManager).isDeviceSecure)</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    result.notImplemented()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>请拨打以下电话到 Flutter。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">try &#123;</span><br><span class="line">    final hasPasscode =</span><br><span class="line">await Storage.platform.invokeMethod(&apos;getDeviceHasPasscode&apos;);</span><br><span class="line">    if (!hasPasscode) &#123;</span><br><span class="line">        Toast.show(</span><br><span class="line">        &quot;No pin, DANGER DANGER&quot;,</span><br><span class="line">        context,</span><br><span class="line">        duration: 5,</span><br><span class="line">        gravity: Toast.BOTTOM,</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125; on PlatformException catch (e) &#123;</span><br><span class="line">    debugPrint(&quot;==== Failed to scan security &apos;$&#123;e.message&#125;&apos; ====&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果 hasPasscode 是错误的，我们只是烤的消息，以警告用户，你没有一个针激活在您的设备。</p><h4 id="如果需要，关闭第三方键盘"><a href="#如果需要，关闭第三方键盘" class="headerlink" title="如果需要，关闭第三方键盘"></a>如果需要，关闭第三方键盘</h4><p>有些第三方键盘可能是恶意的。你永远不会知道他们是否已经实现了秘密地将你输入的密码发送到他们的服务器上的功能。对于 Android 来说，没有简单的方法来防止这种情况，因为所有的键盘都算作第三方键盘，甚至 Android 自己的键盘。解决这个问题的办法是自己实现一个安全的键盘，方法是使用带有字母和数字的布局从头开始构建一个键盘。</p><p>但是，对于 iOS 系统，我们可以使用下面的函数来禁用它，只限制使用本地键盘</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">override func application(_ application: UIApplication, shouldAllowExtensionPointIdentifier extensionPointIdentifier: UIApplicationExtensionPointIdentifier) -&gt; Bool &#123;</span><br><span class="line">    return extensionPointIdentifier != .keyboard</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="检查代码完整性"><a href="#检查代码完整性" class="headerlink" title="检查代码完整性"></a>检查代码完整性</h4><p>可以对 IPA 和 APK 进行反编译，以更改内部的一些代码并重新构建以便再次发布。黑客修改的代码可能是你连接到同一个服务器，但是每个信息也会推送到黑客的服务器。对于 IPA 来说，我并不担心，因为从 App Store 以外安装应用程序是相当复杂的。你必须先安装证书并接受某些条件或破解你的设备才能安装它。至于安卓系统，它很容易伪造一个应用程序，因为它更开放，允许任何用户安装外部的 APK 只需要 1-2 次点击。</p><p>这就是代码完整性的用武之地。你可以计算你的应用程序的校验和，并在每次打开应用程序之前检查它是否仍然和你部署到应用程序商店的应用程序一样。这个概念听起来很简单，但是很难实现。幸运的是，有一个商业 SDK 可以解决这个问题，所以我们不需要自己动手。</p><h4 id="代码混淆"><a href="#代码混淆" class="headerlink" title="代码混淆"></a>代码混淆</h4><p>对于我们实现或保存到应用程序中的所有业务逻辑和安全逻辑，我们需要确保没有人能够反编译并查看源代码。如果黑客能看到它，他们就会知道我们用哪种逻辑来加密数据，或者我们在哪里存储安全信息。他们可以模仿这种逻辑，发送到他们的服务器，而不是使用我们的应用程序。对于代码混淆，可以使用商业 SDK 来加强应用程序。</p><p>你可能已经注意到我经常提到商业 SDK。有些人可能会想，“如果是这样的话，这篇文章的意义何在？我写这篇文章是为了寻找一种在应用程序中实现它的方法，而不是仅仅转到另一个链接。”</p><p>没有人什么都擅长。使用商业 SDK 就像拥有一个专注于安全工作的专业团队。你自己不能实现和关闭所有的安全漏洞，所以最好把它留给专家，他们知道他们在做什么，你做你最擅长的是开发应用程序。</p><p>现在你的应用外壳更加坚固，你的用户不再把钥匙留在门上，让我们确保房子的钥匙不容易被复制。我说的是密码和密码</p><h3 id="Stronger-Pin"><a href="#Stronger-Pin" class="headerlink" title="Stronger Pin"></a>Stronger Pin</h3><p>Pin 或 password 是一种确认你是账户真正所有者的方法。我们选择为应用程序设置一个密码，有两个原因。</p><h4 id="更好的用户体验"><a href="#更好的用户体验" class="headerlink" title="更好的用户体验"></a>更好的用户体验</h4><p>尽管密码更安全，但考虑到 A-Z、0-9 和特殊字符可以组成十亿种可能的组合，在设备上使用小键盘输入太难了。在进入你的应用程序之前，你可能会花费大量的时间。这就是为什么我们采用一个 6 位数的引脚来代替。虽然你只能用 4 个数字创建 10,000 个可能的引脚，但 6 个数字给你 1,000,000 个可能性，这是 100 倍的难度。</p><p>人们可以在 2-3 秒内输入一个密码，但是一个密码可能会花费他们 10-15 秒，这取决于它有多难。</p><h4 id="易于记忆"><a href="#易于记忆" class="headerlink" title="易于记忆"></a>易于记忆</h4><p>是的，我们希望让黑客难以破解密码，但我们也希望我们的用户能够不费吹灰之力地记住它。由于 pin 是 iOS/Android 的基本安全访问设备，它不应该发布任何挑战，因为用户已经习惯了</p><p>对于销子，我们不想让它变得太容易。“‘太容易’到底是什么意思?”你问。好吧，让我们说得更具体一点。</p><p>针没有标准，所以我从网上的研究中得出了一个想法。请看下面的链接。</p><p><a href="https://www.researchgate.net/publication/313823128_Understanding_Human-Chosen_PINs_Characteristics_Distribution_and_Security" target="_blank" rel="noopener">https://www.researchgate.net/publication/313823128_Understanding_Human-Chosen_PINs_Characteristics_Distribution_and_Security</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-04-30-09-15-15.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>根据上述模式，我们得出以下规则</p><ul><li>不允许有序列号，例如 123456、234567、345678 ー包括反序列号，例如 654321、543210</li><li>不要使用「同一行别针」 ，例如 123123、456456、789789</li><li>只允许 3 个或 3 个以上的唯一数字，例如 122112 个是不允许的，但 123321 个是可以的(即使这可能与上面的统计数据相矛盾)155115,133133,166661 是不允许的，因为只有两个不同的数字在密码中使用</li><li>有些人甚至建议禁用生日别针，比如如果你的生日是 1986 年 6 月 8 日，你就不能用 080686 作为别针来防止黑客利用这些信息入侵。但是，我不这样做只是因为我不在系统中保存用户的生日</li></ul><p>我们不想制定太多的规则。否则，你会删除所有的密码组合，更糟糕的是，黑客更容易暴力破解它。我们可以制定更多的规则，但是如果 100 万种可能性变成 100-200 个引脚，那又有什么意义呢？</p><p>使用上面的方法，我们仍然有大约 60,000 种可能性供用户使用。下面是实现它的示例代码。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">static bool isPinComplexity(String pin) &#123;</span><br><span class="line">   const notAllowListPin = [</span><br><span class="line">   &quot;123123&quot;,</span><br><span class="line">   &quot;456456&quot;,</span><br><span class="line">   &quot;789789&quot;,</span><br><span class="line">   &quot;012345&quot;,</span><br><span class="line">   &quot;123456&quot;,</span><br><span class="line">   &quot;234567&quot;,</span><br><span class="line">   &quot;345678&quot;,</span><br><span class="line">   &quot;456789&quot;,</span><br><span class="line">   &quot;567890&quot;,</span><br><span class="line">   &quot;098765&quot;,</span><br><span class="line">   &quot;987654&quot;,</span><br><span class="line">   &quot;876543&quot;,</span><br><span class="line">   &quot;765432&quot;,</span><br><span class="line">   &quot;654321&quot;,</span><br><span class="line">   &quot;543210&quot;</span><br><span class="line">   ];</span><br><span class="line">   final pinSet = new Set.from(pin.split(&quot;&quot;));</span><br><span class="line">   final uniqueCharacter = pinSet.length &gt; 2;</span><br><span class="line">   return uniqueCharacter &amp;&amp; !notAllowListPin.contains(pin);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>您可以使用 isPinComplexity 来检查引脚。如果返回 true，我们允许用户添加它。不要忘记将所有可能的散列也添加到后端。我们在前端实现只是为了更好的用户体验，这样用户就不必打电话给网络，从服务器和服务器上被拒绝，以确保如果黑客试图绕过别针，服务器将不允许它。</p><p>你可以根据你的需要在 notAllowListPin 中添加更多的条件，但是我现在很好。</p><p>因此，对于我们实施的所有这些解决方案，我们要确保我们的应用程序配备了另一层保护。</p><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 移动安全 ー Ep.1 SSL Pinning</title>
    <link href="https://blog.ducafecat.tech/2021/04/29/translation/mobile-security-via-flutter-ep-1-ssl-pinning/"/>
    <id>https://blog.ducafecat.tech/2021/04/29/translation/mobile-security-via-flutter-ep-1-ssl-pinning/</id>
    <published>2021-04-28T16:00:00.000Z</published>
    <updated>2021-04-28T22:24:33.351Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-04-29-06-24-31.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://medium.com/kbtg-life/mobile-security-via-flutter-ep-1-ssl-pinning-c57f18b711f6" target="_blank" rel="noopener">https://medium.com/kbtg-life/mobile-security-via-flutter-ep-1-ssl-pinning-c57f18b711f6</a></p></blockquote><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-04-29-06-21-31.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>这篇文章还是很好的，作者是一个银行从业者，简单说就是在你的程序里指定 ssl 通讯证书，提供安全性。</p><p>为啥这样做呢，比如你用公共 <code>wifi</code> ，这时候打开 <code>www.taobaomy.com</code> 竟然证书显示机构 “淘宝官方”，这显然是伪造的。</p><p>还有你确实访问了 <code>www.taobao.com</code> ，但是被公共 <code>wifi</code> 中间劫持替换证书，重定向去了他的网站，你输入的 <code>用户名、密码</code> 都被窃取了。</p><p>所以说呢，验证通讯证书很有必要。</p><p>如果觉得好，请分享到朋友圈。</p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://owasp.org/" target="_blank" rel="noopener">https://owasp.org/</a></li><li><a href="https://api.flutter.dev/flutter/dart-io/HttpClient/badCertificateCallback.html" target="_blank" rel="noopener">https://api.flutter.dev/flutter/dart-io/HttpClient/badCertificateCallback.html</a></li><li><a href="https://github.com/dart-lang/sdk/issues/39425#issuecomment-680312787" target="_blank" rel="noopener">https://github.com/dart-lang/sdk/issues/39425#issuecomment-680312787</a></li><li><a href="https://pub.dev/packages/ssl_pinning_plugin" target="_blank" rel="noopener">https://pub.dev/packages/ssl_pinning_plugin</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><p>由于 2019 冠状病毒疾病的流行，我们看到移动应用程序的使用量有了很大的增长。开发人员必须不断跟上新特性的发展，或者改善更好的用户体验。随着一切都在网上进行，越来越多的钱涌入这个行业，这些自然而然的坏家伙(也就是坏黑客)想要利用它。我敢肯定我们都知道设计思维和如何与用户产生共鸣，因为如果我们从未使用过我们的产品，或者更糟糕的是，喜欢它，你还能指望用户如何喜欢我们的产品吗？是时候设身处地为别人着想了。在 KBTG，我们有一个叫做“狗食”的程序。你们中的一些人可能听说过这个成语“吃自己的狗粮”。这意味着你必须在别人喜欢你的产品之前使用你的产品，坚持使用你的产品，并且热爱你的产品。有些人可能会认为用户喜欢的是前沿的特性或者很酷的设计，但是在 KBTG，我们不仅仅局限于其中的两个。</p><p>安全是我们同情用户的另一个重要组成部分。他们信任我们，向我们提供他们有价值的私人信息，所以我们的荣誉和责任就是为我们的系统提供完全的内部和外部保护。所谓内部人员，我们指的是像我们这样的开发人员。出于数据隐私的原因，我们根本没有能力查看我们的数据库或查看用户的信息。所有的东西都是加密的，我们的团队中没有人可以访问这个密钥。这个过程表明我们是多么关心我们的用户。对我们来说困难的部分是当我们遇到一个问题，它是很难调查，因为我们没有访问原始数据来解决它，但我们接受这个挑战，因为我们自豪地保护我们的用户隐私。</p><p>在本系列文章中，我将分享我从银行业工作中获得的知识，我坚信这些知识体现了最高安全性的领域。我的向导没那么难。我只是遵循 OWASP 的标准。</p><p><a href="https://owasp.org/" target="_blank" rel="noopener">https://owasp.org/</a></p><p>我会告诉你如何在 Flutter 中实现这个。我们还没有尝试开发一个具有超级安全性的应用程序，但这将是指导所有移动应用程序的基本的，必须具备的安全性。实现过程并不复杂。这可能需要你 10 天左右的时间来开发。是的，只有 10 天！与通常需要 80-90 天的功能相比，这听起来几乎没什么。让我们从 SSL 钉住开始本系列的第一集。</p><h3 id="SSL-Pinning"><a href="#SSL-Pinning" class="headerlink" title="SSL Pinning"></a>SSL Pinning</h3><p>SSL Pinning 可以防止 MITM (Man in the Middle Attack) ，但那到底是什么呢？</p><p>简而言之，当你连接到一个公共 WIFI 或热点时，负责网络的 IT 人员，无论好坏，都可以把流量从你的移动设备传送到你连接的服务器。想了解更多细节，你可以去专业网站上查找，比如下面的一个。底线是不要使用公共 WIFI 或任何其他人的热点！</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-04-29-06-12-51.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>Credit 信用 <a href="https://www.guardsquare.com/en/blog/iOS-SSL-certificate-pinning-bypassing" target="_blank" rel="noopener">https://www.guardsquare.com/en/blog/iOS-SSL-certificate-pinning-bypassing</a></p><h3 id="开始实现"><a href="#开始实现" class="headerlink" title="开始实现"></a>开始实现</h3><p>如果您正在调查 Stackoverflow 关于 Flutter 或 Dart 中 SSL pinting 的内容，那么您可能会找到一个关于 <code>badCertificateCallback</code> 的解决方案。</p><p><a href="https://api.flutter.dev/flutter/dart-io/HttpClient/badCertificateCallback.html" target="_blank" rel="noopener">https://api.flutter.dev/flutter/dart-io/HttpClient/badCertificateCallback.html</a></p><p>基本上，您可以通过告诉 Flutter 不要信任任何证书(除了您在移动应用程序中提供的证书)来覆盖 Flutter。下面是如何实现的方法。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">HttpClient _client = <span class="keyword">new</span> HttpClient(context: <span class="keyword">await</span> globalContext);</span><br><span class="line">_client.badCertificateCallback =</span><br><span class="line">(X509Certificate cert, <span class="built_in">String</span> host, <span class="built_in">int</span> port) =&gt; <span class="keyword">false</span>;</span><br><span class="line"><span class="keyword">var</span> _ioClient = <span class="keyword">new</span> IOClient(_client);</span><br><span class="line">_ioClient.<span class="keyword">get</span>(url)</span><br></pre></td></tr></table></figure><p>创建 HttpClient，将 <code>globalContext</code> 传递给它，并将 badcertificateecallback 分配为 false。</p><p>获得 ioClient 之后，可以使用它调用 GET、 POST、 PUT、 DELETE。上面的代码表明我只会信任其中的两个证书，因此如果其他证书在移动应用程序有请求时被发送，它将在获得 badCertificateCallback 后停止工作。</p><p>以下是获取 GlobalContext 的方法。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Future&lt;SecurityContext&gt; <span class="keyword">get</span> globalContext <span class="keyword">async</span> &#123;</span><br><span class="line">   <span class="comment">// Note: Not allowed to load the same certificate</span></span><br><span class="line">   <span class="keyword">final</span> sslCert1 = <span class="keyword">await</span></span><br><span class="line">   rootBundle.load(<span class="string">'assets/cert/certificate.pem'</span>);</span><br><span class="line">   <span class="keyword">final</span> sslCert2 = <span class="keyword">await</span></span><br><span class="line">   rootBundle.load(<span class="string">'assets/cert/certificate2.pem'</span>);</span><br><span class="line">   SecurityContext sc = <span class="keyword">new</span> SecurityContext(withTrustedRoots: <span class="keyword">false</span>);</span><br><span class="line">   sc.setTrustedCertificatesBytes(sslCert1.buffer.asInt8List());</span><br><span class="line">   sc.setTrustedCertificatesBytes(sslCert2.buffer.asInt8List());</span><br><span class="line"><span class="keyword">return</span> sc;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>为了获得 certificate.pem，我使用这个脚本从服务器获得公钥，并在 Terminal 中运行这个命令以获得 certificate.pem 文件。不要忘记在没有 HTTP 或 HTTPs 的情况下将“ your-url. com”更改为您的网站。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl s_client -showcerts -connect your-url.com:443 -servername your-url.com &lt;/dev/null | sed -ne '/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p' &gt; certificate.pem</span><br></pre></td></tr></table></figure><p>一旦你获得了 certificate.pem，把你的证书放到你的目标资产中，并将你的资产添加到 pubspec.yaml 中。我将它添加到 cert 文件夹中。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">assets:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">assets/cert/</span></span><br></pre></td></tr></table></figure><p>您可以设置任意多的信任证书，但我通常只设置四个证书。原因是你拥有的越多，你就越容易被黑客攻击。但是为什么是四个呢？对于防火墙，我使用 Akamai 在到达服务器之前阻止和过滤请求，消除系统中的坏请求、匿名请求和 DDoS 攻击。因此，两个证书是为 Akamai，而其他两个是为了更新证书在未来。我曾经试图固定相同的证书或无效的证书，结果 Dart 像预期的那样抛给我一个错误。</p><p>一旦我们完成了以上所有的工作，一切似乎都在工作。如果您更改了服务器上的证书，应用程序将停止工作。呜呼！任务完成了，对吧？一开始是我..。</p><p>直到我发现了 badCertificateCallback 的一个大问题。</p><p><a href="https://github.com/dart-lang/sdk/issues/39425#issuecomment-680312787" target="_blank" rel="noopener">https://github.com/dart-lang/sdk/issues/39425#issuecomment-680312787</a></p><p>原来 badCertificateCallback 在没有检查通用名称的情况下就固定了中间证书，这造成了一个严重的安全问题，因为坏的黑客也可以创建这些证书。例如，在我的例子中，我将 Let’s Encrypt 作为一个中间证书，因此如果一个黑客创建了假证书并将其发送到我们的应用程序，它将接受这个请求！因为我们不检查通用名称，并假设证书来自同一证书提供程序。</p><p>为了解决这个问题，我还必须使用另一种方法检查该证书的 SHA256。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Future&lt;<span class="built_in">bool</span>&gt; <span class="keyword">get</span> _isAllowList <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> myAllowList = <span class="string">"xxxxxxx"</span>;</span><br><span class="line">    <span class="keyword">final</span> x509Cert1 = <span class="keyword">await</span> _readPemCert(<span class="string">'assets/cert/certificate.pem'</span>);</span><br><span class="line">    X509CertificateData data = X509Utils.x509CertificateFromPem(x509Cert1);</span><br><span class="line">    <span class="keyword">return</span> data.sha256Thumbprint == myAllowList</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>来自下面的函数。这可能不是一个好的解决方案，因为我不知道证书是如何工作的，所以我只使用字符串操作: p</p><p>基本上，我只是削减了证书的其他部分，只得到最后一部分。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Future&lt;<span class="built_in">String</span>&gt; _readPemCert(<span class="built_in">String</span> path) <span class="keyword">async</span> &#123;</span><br><span class="line">   <span class="keyword">final</span> sslCert = <span class="keyword">await</span> rootBundle.load(path);</span><br><span class="line">   <span class="keyword">final</span> data = sslCert.buffer.asUint8List();</span><br><span class="line">   <span class="keyword">final</span> pemString = utf8.decode(data);</span><br><span class="line">   <span class="keyword">final</span> pemArray = pemString.split(<span class="string">"-----END CERTIFICATE-----"</span>);</span><br><span class="line">   <span class="keyword">final</span> cert = [pemArray[<span class="number">0</span>], <span class="string">"-----END CERTIFICATE-----"</span>].join(<span class="string">""</span>);</span><br><span class="line">   <span class="keyword">return</span> cert;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后，我使用 libs basic_utils 来解析证书。把这个加到你的 pubspec.yaml 里。我不能用 basic 语言解析整个证书，所以我必须这样做。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">basic_utils:</span> <span class="string">^2.7.0-rc.4</span></span><br></pre></td></tr></table></figure><p>使用 get X509Utils 获得 sha256 来与允许列表进行比较，这个允许列表在省道中保存为常量。现在，我们可以使用两个方法(badCertCallback 和 X509Utils)再次检查安全性，以查看添加到允许列表中的证书和来自服务器的 Sha256 是否相同。</p><p>最近，在我实现了我的方法之后，我发现了一个关于 SSL 固定的新的库。</p><p><a href="https://pub.dev/packages/ssl_pinning_plugin" target="_blank" rel="noopener">https://pub.dev/packages/ssl_pinning_plugin</a></p><p>由于我的解决方案已经被移动安全渗透测试接受，我还没有测试过这个解决方案，所以我决定坚持使用旧的解决方案。它可能看起来不那么干净，但是它正如预期的那样工作，所以我称之为成功。</p><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 中使用 HUD Progress 组件</title>
    <link href="https://blog.ducafecat.tech/2021/04/28/translation/hud-progress-in-flutter/"/>
    <id>https://blog.ducafecat.tech/2021/04/28/translation/hud-progress-in-flutter/</id>
    <published>2021-04-27T16:00:00.000Z</published>
    <updated>2021-04-27T14:36:11.349Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-04-27-22-36-09.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote><p><a href="https://medium.com/flutterdevs/hud-progress-in-flutter-281ed0f644d0" target="_blank" rel="noopener">https://medium.com/flutterdevs/hud-progress-in-flutter-281ed0f644d0</a></p></blockquote><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>在 flutter 中，我们显示任何进度指示器，因为我们的应用程序是繁忙的或在搁置，为此，我们显示一个循环的进度指示器。覆盖加载屏幕显示一个进度指示器，也称为模态进度 HUD 或平视显示，这通常意味着应用程序正在加载或执行一些工作。</p><p>在本文中，我们将利用 HUD 进程程序包来探讨平视显示器在 flutter 方面的进展。有了这个软件包，我们可以很容易地实现平视显示的颤振进度。那么让我们开始吧。</p><h2 id="pub-dev"><a href="#pub-dev" class="headerlink" title="pub.dev"></a>pub.dev</h2><p><a href="https://pub.dev/packages/flutter_progress_hud" target="_blank" rel="noopener">https://pub.dev/packages/flutter_progress_hud</a></p><p><a href="https://pub.dev/packages/flutter_progress_hud/example" target="_blank" rel="noopener">https://pub.dev/packages/flutter_progress_hud/example</a></p><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><h3 id="HUD-Progress"><a href="#HUD-Progress" class="headerlink" title="HUD Progress"></a>HUD Progress</h3><p>Flutter HUD Progress 是一种进度指示器库，就像一个循环的进度指示器。在这里，HUD 意味着一个抬头显示器/进度弹出对话框将打开以上的屏幕，将有一个循环的进度指示器。使用这个库，我们可以使用我们的 flutter 。应用程序可以显示循环进度指示器。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-04-27-22-27-36.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h3><ul><li><p>borderColor:<br>边框/颜色: 边框颜色属性用于更改指示符背景边框颜色</p></li><li><p>backgroundColor:<br>背景颜色: 背景颜色属性用于更改指示器背景的颜色</p></li><li><p>indicatorColor:<br>标志/颜色: 背景颜色属性用于更改指示器背景的颜色</p></li><li><p>textStyle:<br>文字样式: 属性用于指示符下面显示的文本，文本的颜色和样式可以在该属性中更改</p></li></ul><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><ul><li>第一步: 添加依赖项</li></ul><p>将依赖项添加到 pubspec ー yaml 文件。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dependencies:</span></span><br><span class="line"><span class="attr">  flutter_progress_hud:</span> <span class="string">^2.0.0</span></span><br></pre></td></tr></table></figure><ul><li>第二步: 导包</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_progress_hud/flutter_progress_hud.dart'</span>;</span><br></pre></td></tr></table></figure><ul><li>第三步: 启用 AndriodX</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">org.gradle.jvmargs=-Xmx1536M</span><br><span class="line">android.enableR8=true</span><br><span class="line">android.useAndroidX=true</span><br><span class="line">android.enableJetifier=true</span><br></pre></td></tr></table></figure><h3 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h3><p>在 <code>lib</code> 目录中创建一个名为 <code>progress_hud_demo.dart</code> 的新 dart 文件。</p><p>在创建 Flutter HUD Progress 之前，我们包装了一个进度遮光罩的容器，其次是建设者类。在内部，我们使用了我们的小部件，并定义了进度指示器的边框颜色和背景颜色。让我们详细地了解一下这一点。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ProgressHUD(</span><br><span class="line">  borderColor:Colors.orange,</span><br><span class="line">  backgroundColor:Colors.blue.shade300,</span><br><span class="line">  child:Builder(</span><br><span class="line">    builder:(context)=&gt;Container(</span><br><span class="line">      height:DeviceSize.height(context),</span><br><span class="line">      width:DeviceSize.width(context),</span><br><span class="line">      padding:EdgeInsets.only(left:<span class="number">20</span>,right:<span class="number">20</span>,top:<span class="number">20</span>),</span><br><span class="line">    ),</span><br><span class="line">  ),</span><br><span class="line">),</span><br></pre></td></tr></table></figure><p>现在我们已经采取了一个按钮，在其中指示器设置持续时间 5 秒的指示器时间未来。<code>delayed()</code> 并显示进度的文本。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Container(</span><br><span class="line">  margin: EdgeInsets.only(</span><br><span class="line">      left:<span class="number">20.0</span>, right:<span class="number">20.0</span>, top:<span class="number">55.0</span>),</span><br><span class="line">  child: CustomButton(</span><br><span class="line">    mainButtonText:<span class="string">'Submit'</span>,</span><br><span class="line">    callbackTertiary:()&#123;</span><br><span class="line">      <span class="keyword">final</span> progress = ProgressHUD.of(context);</span><br><span class="line">      progress.showWithText(<span class="string">'Loading...'</span>);</span><br><span class="line">      Future.delayed(<span class="built_in">Duration</span>(seconds:<span class="number">5</span>), () &#123;</span><br><span class="line">        progress.dismiss();</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    color:Colors.blue,</span><br><span class="line">  ),</span><br><span class="line">),</span><br></pre></td></tr></table></figure><p>当我们运行应用程序时，我们应该得到屏幕的输出，就像下面的屏幕截图一样。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-04-27-22-32-07.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="完整代码"><a href="#完整代码" class="headerlink" title="完整代码"></a>完整代码</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:progress_hud_demo/shared/custom_button.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:progress_hud_demo/shared/custom_text_field.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:progress_hud_demo/themes/device_size.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_progress_hud/flutter_progress_hud.dart'</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProgressHudDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _ProgressHudDemoState createState() =&gt; _ProgressHudDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_ProgressHudDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">ProgressHudDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">bool</span> _isInAsyncCall = <span class="keyword">false</span>;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      backgroundColor:Colors.white,</span><br><span class="line">      appBar:AppBar(</span><br><span class="line">        backgroundColor:Colors.blue,</span><br><span class="line">        title:Text(<span class="string">'Flutter HUD Progress Demo'</span>),</span><br><span class="line">        elevation:<span class="number">0.0</span>,</span><br><span class="line">      ),</span><br><span class="line">      body:ProgressHUD(</span><br><span class="line">        borderColor:Colors.orange,</span><br><span class="line">        backgroundColor:Colors.blue.shade300,</span><br><span class="line">        child:Builder(</span><br><span class="line">          builder:(context)=&gt;Container(</span><br><span class="line">            height:DeviceSize.height(context),</span><br><span class="line">            width:DeviceSize.width(context),</span><br><span class="line">            padding:EdgeInsets.only(left:<span class="number">20</span>,right:<span class="number">20</span>,top:<span class="number">20</span>),</span><br><span class="line">            child:Column(</span><br><span class="line">              crossAxisAlignment:CrossAxisAlignment.start,</span><br><span class="line">              children: [</span><br><span class="line"></span><br><span class="line">                Column(</span><br><span class="line">                  crossAxisAlignment:CrossAxisAlignment.start,</span><br><span class="line">                  children: [</span><br><span class="line">                    Text(<span class="string">'Sign In'</span>,style:TextStyle(fontFamily:<span class="string">'Roboto Bold'</span>,fontSize:<span class="number">27</span>,fontWeight:FontWeight.bold),),</span><br><span class="line">                  ],</span><br><span class="line">                ),</span><br><span class="line"></span><br><span class="line">                SizedBox(height:<span class="number">50</span>,),</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                Column(</span><br><span class="line">                  children: [</span><br><span class="line">                    CustomTextField(hintText: <span class="string">'Email'</span>, type:TextInputType.text, obscureText: <span class="keyword">false</span>),</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                    SizedBox(height:<span class="number">35</span>,),</span><br><span class="line"></span><br><span class="line">                    CustomTextField(hintText: <span class="string">'Password'</span>, type:TextInputType.text, obscureText: <span class="keyword">true</span>),</span><br><span class="line">                  ],</span><br><span class="line">                ),</span><br><span class="line"></span><br><span class="line">                Container(</span><br><span class="line">                  margin: EdgeInsets.only(</span><br><span class="line">                      left:<span class="number">20.0</span>, right:<span class="number">20.0</span>, top:<span class="number">55.0</span>),</span><br><span class="line">                  child: CustomButton(</span><br><span class="line">                    mainButtonText:<span class="string">'Submit'</span>,</span><br><span class="line">                    callbackTertiary:()&#123;</span><br><span class="line">                      <span class="keyword">final</span> progress = ProgressHUD.of(context);</span><br><span class="line">                      progress.showWithText(<span class="string">'Loading...'</span>);</span><br><span class="line">                      Future.delayed(<span class="built_in">Duration</span>(seconds:<span class="number">5</span>), () &#123;</span><br><span class="line">                        progress.dismiss();</span><br><span class="line">                      &#125;);</span><br><span class="line">                    &#125;,</span><br><span class="line">                    color:Colors.blue,</span><br><span class="line">                  ),</span><br><span class="line">                ),</span><br><span class="line"></span><br><span class="line">              ],</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="译文"><a href="#译文" class="headerlink" title="译文"></a>译文</h4><p><a href="https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/" target="_blank" rel="noopener">https://ducafecat.tech/categories/%E8%AF%91%E6%96%87/</a></p><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>flutter 交互式用户指导，以及如何在布局中创造一个洞</title>
    <link href="https://blog.ducafecat.tech/2021/04/27/translation/flutter-interactive-user-guidanc-e-or-how-to-make-a-hole-in-layout/"/>
    <id>https://blog.ducafecat.tech/2021/04/27/translation/flutter-interactive-user-guidanc-e-or-how-to-make-a-hole-in-layout/</id>
    <published>2021-04-26T16:00:00.000Z</published>
    <updated>2021-04-26T23:57:42.407Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-04-27-07-57-40.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><p><a href="https://medium.com/litslink/flutter-interactive-user-guidanc-e-or-how-to-make-a-hole-in-layout-d72bf6eb27f9" target="_blank" rel="noopener">https://medium.com/litslink/flutter-interactive-user-guidanc-e-or-how-to-make-a-hole-in-layout-d72bf6eb27f9</a></p><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/alex-melnyk/flutter_user_guidance" target="_blank" rel="noopener">https://github.com/alex-melnyk/flutter_user_guidance</a></p><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-04-27-07-34-29.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>大家好！我想给你看一个有趣的 Flutter 特征。我们可以建立交互式的用户指导使用 blending 混合颜色。</p><p>这个简单的技巧可以让你在应用程序中建立有趣的用户指南，而不仅仅是一张图片。它可以真正与动画等互动。</p><h3 id="布局"><a href="#布局" class="headerlink" title="布局"></a>布局</h3><p>首先，要构建覆盖，您需要将目标页面的 Scaffold 小部件包装到 Stack 小部件中，并将 Scaffold 小部件作为第一个项目保留。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@override</span></span><br><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">  <span class="keyword">final</span> theme = Theme.of(context);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> Stack(</span><br><span class="line">    children: [</span><br><span class="line">      Scaffold(</span><br><span class="line">        appBar: AppBar(</span><br><span class="line">          title: Text(<span class="string">'Flutter User Guidance Example'</span>),</span><br><span class="line">          centerTitle: <span class="keyword">false</span>,</span><br><span class="line">          actions: [</span><br><span class="line">            IconButton(</span><br><span class="line">              icon: Icon(Icons.slideshow),</span><br><span class="line">              onPressed: () =&gt; _userGuidanceController.show(),</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">        body: Center(</span><br><span class="line">          child: Column(</span><br><span class="line">            mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">            children: &lt;Widget&gt;[</span><br><span class="line">              Text(</span><br><span class="line">                <span class="string">'You have pushed the button this many times:'</span>,</span><br><span class="line">              ),</span><br><span class="line">              Text(</span><br><span class="line">                <span class="string">'$_counter'</span>,</span><br><span class="line">                style: theme.textTheme.headline4,</span><br><span class="line">              ),</span><br><span class="line">            ],</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">        floatingActionButton: FloatingActionButton(</span><br><span class="line">          onPressed: _handleFABPressed,</span><br><span class="line">          tooltip: <span class="string">'Increment'</span>,</span><br><span class="line">          child: Icon(Icons.add),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    ],</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>对于第二个地方，创建一个覆盖整个脚手架的覆盖图，使用一点透明的深/浅背景。Root ColorFiltered 具有混合模式“ source out”，内部 Container 在后台具有“ destination out”，这允许我们剪切小部件以在 root ColorFiltered 小部件中剪切它们。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">Positioned.fill(</span><br><span class="line">  child: ColorFiltered(</span><br><span class="line">    colorFilter: ColorFilter.mode(</span><br><span class="line">      Colors.black87,</span><br><span class="line">      BlendMode.srcOut,</span><br><span class="line">    ),</span><br><span class="line">    child: Stack(</span><br><span class="line">      children: [</span><br><span class="line">        Positioned.fill(</span><br><span class="line">          child: Container(</span><br><span class="line">            decoration: BoxDecoration(</span><br><span class="line">              color: Colors.black,</span><br><span class="line">              backgroundBlendMode: BlendMode.dstOut,</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">        Center(</span><br><span class="line">          child: Container(</span><br><span class="line">            width: <span class="number">150</span>,</span><br><span class="line">            height: <span class="number">150</span>,</span><br><span class="line">            color: Colors.white,</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ],</span><br><span class="line">    ),</span><br><span class="line">  ),</span><br><span class="line">),</span><br></pre></td></tr></table></figure><p>例如，在这个例子中，我们有一个容器，大小为 150x150，颜色为白色，需要混合的颜色，不应该是完全透明的，否则你不会看到它。因此，颜色是需要混合，以了解什么地区剪出来。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-04-27-07-49-15.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="使用者指引"><a href="#使用者指引" class="headerlink" title="使用者指引"></a>使用者指引</h3><p>当然，您需要添加一些单词或元素来引导用户浏览指南。在这种情况下，您可以将小部件放在同一个 Stack 中经过过滤的 root ColorFiltered 上。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">Align(</span><br><span class="line">  alignment: Alignment.bottomLeft,</span><br><span class="line">  child: Material(</span><br><span class="line">    color: Colors.transparent,</span><br><span class="line">    child: Container(</span><br><span class="line">      margin: EdgeInsets.only(</span><br><span class="line">        left: <span class="number">16</span>,</span><br><span class="line">        bottom: <span class="number">38</span>,</span><br><span class="line">      ),</span><br><span class="line">      padding: EdgeInsets.symmetric(</span><br><span class="line">        horizontal: <span class="number">16</span>,</span><br><span class="line">        vertical: <span class="number">8</span>,</span><br><span class="line">      ),</span><br><span class="line">      decoration: BoxDecoration(</span><br><span class="line">        color: Colors.white,</span><br><span class="line">        borderRadius: BorderRadius.circular(<span class="number">5</span>),</span><br><span class="line">      ),</span><br><span class="line">      child: Text(</span><br><span class="line">        <span class="string">'Hello Interactive User Guidance!\n'</span></span><br><span class="line">            <span class="string">'Tap on + button to increase the number...'</span></span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">  ),</span><br><span class="line">),</span><br></pre></td></tr></table></figure><p>请记住，Stack 小部件来自 Scaffold 并且没有任何 Material 支持，所以用一个 Material 小部件包装它就足够了。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-04-27-07-51-49.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>这里有一个完整的例子，如果你把所有这些步骤都做对了，你会看到同样的图片。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@override</span></span><br><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">  <span class="keyword">final</span> theme = Theme.of(context);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> Stack(</span><br><span class="line">    children: [</span><br><span class="line">      Scaffold(</span><br><span class="line">        appBar: AppBar(</span><br><span class="line">          title: Text(<span class="string">'Flutter User Guidance Example'</span>),</span><br><span class="line">          centerTitle: <span class="keyword">false</span>,</span><br><span class="line">          actions: [</span><br><span class="line">            IconButton(</span><br><span class="line">              icon: Icon(Icons.slideshow),</span><br><span class="line">              onPressed: () =&gt; _userGuidanceController.show(),</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">        body: Center(</span><br><span class="line">          child: Column(</span><br><span class="line">            mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">            children: &lt;Widget&gt;[</span><br><span class="line">              Text(</span><br><span class="line">                <span class="string">'You have pushed the button this many times:'</span>,</span><br><span class="line">              ),</span><br><span class="line">              Text(</span><br><span class="line">                <span class="string">'$_counter'</span>,</span><br><span class="line">                style: theme.textTheme.headline4,</span><br><span class="line">              ),</span><br><span class="line">            ],</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">        floatingActionButton: FloatingActionButton(</span><br><span class="line">          onPressed: _handleFABPressed,</span><br><span class="line">          tooltip: <span class="string">'Increment'</span>,</span><br><span class="line">          child: Icon(Icons.add),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">      Positioned.fill(</span><br><span class="line">        child: ColorFiltered(</span><br><span class="line">          colorFilter: ColorFilter.mode(</span><br><span class="line">            Colors.black87,</span><br><span class="line">            BlendMode.srcOut,</span><br><span class="line">          ),</span><br><span class="line">          child: Stack(</span><br><span class="line">            children: [</span><br><span class="line">              Positioned.fill(</span><br><span class="line">                child: Container(</span><br><span class="line">                  decoration: BoxDecoration(</span><br><span class="line">                    color: Colors.black,</span><br><span class="line">                    backgroundBlendMode: BlendMode.dstOut,</span><br><span class="line">                  ),</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">              Align(</span><br><span class="line">                alignment: Alignment.bottomRight,</span><br><span class="line">                child: Container(</span><br><span class="line">                  margin: EdgeInsets.only(</span><br><span class="line">                    right: <span class="number">9</span>,</span><br><span class="line">                    bottom: <span class="number">27</span>,</span><br><span class="line">                  ),</span><br><span class="line">                  width: <span class="number">70</span>,</span><br><span class="line">                  height: <span class="number">70</span>,</span><br><span class="line">                  decoration: BoxDecoration(</span><br><span class="line">                    color: Colors.white,</span><br><span class="line">                    shape: BoxShape.circle,</span><br><span class="line">                  ),</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">            ],</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">      Align(</span><br><span class="line">        alignment: Alignment.bottomLeft,</span><br><span class="line">        child: Material(</span><br><span class="line">          color: Colors.transparent,</span><br><span class="line">          child: Container(</span><br><span class="line">            margin: EdgeInsets.only(</span><br><span class="line">              left: <span class="number">16</span>,</span><br><span class="line">              bottom: <span class="number">38</span>,</span><br><span class="line">            ),</span><br><span class="line">            padding: EdgeInsets.symmetric(</span><br><span class="line">              horizontal: <span class="number">16</span>,</span><br><span class="line">              vertical: <span class="number">8</span>,</span><br><span class="line">            ),</span><br><span class="line">            decoration: BoxDecoration(</span><br><span class="line">              color: Colors.white,</span><br><span class="line">              borderRadius: BorderRadius.circular(<span class="number">5</span>),</span><br><span class="line">            ),</span><br><span class="line">            child: Text(</span><br><span class="line">              <span class="string">'Hello Interactive User Guidance!\n'</span></span><br><span class="line">                  <span class="string">'Tap on + button to increase the number...'</span></span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    ],</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="动画和步骤"><a href="#动画和步骤" class="headerlink" title="动画和步骤"></a>动画和步骤</h3><p>我准备了一个简单的例子，通过动画剪辑区域从矩形切换到圆形并移动，从一个指导切换到另一个。只要查看我的仓库，就能获得这种体验。</p><p>完整的项目源代码可以在 GitHub 上找到。</p><p><a href="https://github.com/alex-melnyk/flutter_user_guidance" target="_blank" rel="noopener">https://github.com/alex-melnyk/flutter_user_guidance</a></p><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-组件开发-1"><a href="#Flutter-组件开发-1" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="译文" scheme="https://blog.ducafecat.tech/categories/%E8%AF%91%E6%96%87/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter Getx 04 - GetConnect、StateMixin、SuperController、GetController + Dio</title>
    <link href="https://blog.ducafecat.tech/2021/04/23/flutter-getx/flutter-getx-04-getconnect-statemixin-dio/"/>
    <id>https://blog.ducafecat.tech/2021/04/23/flutter-getx/flutter-getx-04-getconnect-statemixin-dio/</id>
    <published>2021-04-22T16:00:00.000Z</published>
    <updated>2021-04-26T03:23:17.014Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-04-23-18-24-26.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h2><ul><li>GetConnect</li><li>StateMixin</li><li>GetController + Dio</li><li>SuperController</li></ul><h2 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h2><p><a href="https://www.bilibili.com/video/BV17B4y1c7eF" target="_blank" rel="noopener">https://www.bilibili.com/video/BV17B4y1c7eF</a></p><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://pub.flutter-io.cn/packages/get#getconnect" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/get#getconnect</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><h3 id="GetConnect"><a href="#GetConnect" class="headerlink" title="GetConnect"></a>GetConnect</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="GetContent.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>瞎聊设计模式</li></ul><p><code>Provider</code> 提供者模式 位于高层 由他来决定从哪里、提供什么</p><p>相对应的有 <code>Consumer</code> 消费者模式</p><p><code>Repository</code> 模式，这层有 <code>OO</code> 面向对象的意思，用来处理拉取数据细节，这样到 <code>Controller</code> 控制器 这一层只要处理业务就行，可方便测试</p><p><code>DAO</code> 就是纯粹的数据访问层，没有 <code>00</code> 的概念</p><p><code>Service</code> <code>Model</code> <code>Entity</code> …</p><p>前端其实对数据加工、面向服务、领域模型偏弱，更多的是组件拆分、样式、布局，这才是要关系的，就算是测试也是 <code>E2E</code> 侧重不同。</p><p><code>E2E</code>（End To End）即端对端测试，属于黑盒测试，通过编写测试用例，自动化模拟用户操作，确保组件间通信正常，程序流数据传递如预期。</p><ul><li>封装 GetConnect</li></ul><p>lib/common/utils/base_provider.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BaseProvider</span> <span class="keyword">extends</span> <span class="title">GetConnect</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> onInit() &#123;</span><br><span class="line">    httpClient.baseUrl = SERVER_API_URL;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 请求拦截</span></span><br><span class="line">    httpClient.addRequestModifier&lt;<span class="keyword">void</span>&gt;((request) &#123;</span><br><span class="line">      request.headers[<span class="string">'Authorization'</span>] = <span class="string">'12345678'</span>;</span><br><span class="line">      <span class="keyword">return</span> request;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 响应拦截</span></span><br><span class="line">    httpClient.addResponseModifier((request, response) &#123;</span><br><span class="line">      <span class="keyword">return</span> response;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>Provider</li></ul><p>lib/pages/getConnect/provider.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">INewsProvider</span> </span>&#123;</span><br><span class="line">  Future&lt;Response&lt;NewsPageListResponseEntity&gt;&gt; getNews();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NewsProvider</span> <span class="keyword">extends</span> <span class="title">BaseProvider</span> <span class="keyword">implements</span> <span class="title">INewsProvider</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 新闻分页</span></span><br><span class="line">  <span class="comment">// @override</span></span><br><span class="line">  <span class="comment">// Future&lt;Response&lt;NewsPageListResponseEntity&gt;&gt; getNews() =&gt; get("/news");</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Future&lt;Response&lt;NewsPageListResponseEntity&gt;&gt; getNews() <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> response = <span class="keyword">await</span> <span class="keyword">get</span>(<span class="string">"/news"</span>);</span><br><span class="line">    <span class="keyword">var</span> data = NewsPageListResponseEntity.fromJson(response.body);</span><br><span class="line">    <span class="keyword">return</span> Response(</span><br><span class="line">      statusCode: response.statusCode,</span><br><span class="line">      statusText: response.statusText,</span><br><span class="line">      body: data,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>Repository</li></ul><p>lib/pages/getConnect/repository.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">INewsRepository</span> </span>&#123;</span><br><span class="line">  Future&lt;NewsPageListResponseEntity&gt; getNews();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NewsRepository</span> <span class="keyword">implements</span> <span class="title">INewsRepository</span> </span>&#123;</span><br><span class="line">  NewsRepository(&#123;required <span class="keyword">this</span>.provider&#125;);</span><br><span class="line">  <span class="keyword">final</span> INewsProvider provider;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Future&lt;NewsPageListResponseEntity&gt; getNews() <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> response = <span class="keyword">await</span> provider.getNews();</span><br><span class="line">    <span class="keyword">if</span> (response.status.hasError) &#123;</span><br><span class="line">      <span class="keyword">return</span> Future.error(response.statusText!);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> response.body!;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>Controller</li></ul><p>lib/pages/getConnect/controller.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NewsController</span> <span class="keyword">extends</span> <span class="title">SuperController</span>&lt;<span class="title">NewsPageListResponseEntity</span>&gt; </span>&#123;</span><br><span class="line">  NewsController(&#123;required <span class="keyword">this</span>.repository&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> INewsRepository repository;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> onInit() &#123;</span><br><span class="line">    <span class="keyword">super</span>.onInit();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Loading, Success, Error handle with 1 line of code</span></span><br><span class="line">    <span class="comment">// append(() =&gt; repository.getNews);</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 拉取新闻列表</span></span><br><span class="line">  Future&lt;<span class="keyword">void</span>&gt; getNewsPageList() <span class="keyword">async</span> &#123;</span><br><span class="line">    append(() =&gt; repository.getNews);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> onReady() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'The build method is done. '</span></span><br><span class="line">        <span class="string">'Your controller is ready to call dialogs and snackbars'</span>);</span><br><span class="line">    <span class="keyword">super</span>.onReady();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> onClose() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'onClose called'</span>);</span><br><span class="line">    <span class="keyword">super</span>.onClose();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> didChangeMetrics() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'the window size did change'</span>);</span><br><span class="line">    <span class="keyword">super</span>.didChangeMetrics();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> didChangePlatformBrightness() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'platform change ThemeMode'</span>);</span><br><span class="line">    <span class="keyword">super</span>.didChangePlatformBrightness();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Future&lt;<span class="built_in">bool</span>&gt; didPushRoute(<span class="built_in">String</span> route) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'the route $route will be open'</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">super</span>.didPushRoute(route);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Future&lt;<span class="built_in">bool</span>&gt; didPopRoute() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'the current route will be closed'</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">super</span>.didPopRoute();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> onDetached() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'onDetached called'</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> onInactive() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'onInative called'</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> onPaused() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'onPaused called'</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> onResumed() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'onResumed called'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>GetView</li></ul><p>lib/pages/getConnect/view.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NewsView</span> <span class="keyword">extends</span> <span class="title">GetView</span>&lt;<span class="title">NewsController</span>&gt; </span>&#123;</span><br><span class="line">  NewsView(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  _buildListView(NewsPageListResponseEntity? state) &#123;</span><br><span class="line">    <span class="keyword">return</span> ListView.separated(</span><br><span class="line">      itemCount: state != <span class="keyword">null</span> ? state.items!.length : <span class="number">0</span>,</span><br><span class="line">      itemBuilder: (context, index) &#123;</span><br><span class="line">        <span class="keyword">final</span> NewsItem item = state!.items![index];</span><br><span class="line">        <span class="keyword">return</span> ListTile(</span><br><span class="line">          onTap: () =&gt; <span class="keyword">null</span>,</span><br><span class="line">          title: Text(item.title),</span><br><span class="line">          trailing: Text(<span class="string">"分类 <span class="subst">$&#123;item.category&#125;</span>"</span>),</span><br><span class="line">        );</span><br><span class="line">      &#125;,</span><br><span class="line">      separatorBuilder: (BuildContext context, <span class="built_in">int</span> index) &#123;</span><br><span class="line">        <span class="keyword">return</span> Divider();</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">"GetConnect Page"</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: controller.obx(</span><br><span class="line">        (state) =&gt; _buildListView(state),</span><br><span class="line">        onEmpty: Text(<span class="string">"onEmpty"</span>),</span><br><span class="line">        onLoading: Center(</span><br><span class="line">          child: Column(</span><br><span class="line">            children: [</span><br><span class="line">              Text(<span class="string">"没有数据"</span>),</span><br><span class="line">              ElevatedButton(</span><br><span class="line">                onPressed: () &#123;</span><br><span class="line">                  controller.getNewsPageList();</span><br><span class="line">                &#125;,</span><br><span class="line">                child: Text(<span class="string">'拉取数据'</span>),</span><br><span class="line">              ),</span><br><span class="line">            ],</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">        onError: (err) =&gt; Text(<span class="string">"onEmpty"</span> + err.toString()),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>Bindings</li></ul><p>lib/pages/getConnect/bindings.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NewsBinding</span> <span class="keyword">implements</span> <span class="title">Bindings</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> dependencies() &#123;</span><br><span class="line">    Get.lazyPut&lt;INewsProvider&gt;(() =&gt; NewsProvider());</span><br><span class="line">    Get.lazyPut&lt;INewsRepository&gt;(() =&gt; NewsRepository(provider: Get.find()));</span><br><span class="line">    Get.lazyPut(() =&gt; NewsController(repository: Get.find()));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>路由</li></ul><p>lib/common/routes/app_pages.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">GetPage(</span><br><span class="line">  name: AppRoutes.GetConnect,</span><br><span class="line">  binding: NewsBinding(),</span><br><span class="line">  page: () =&gt; NewsView(),</span><br><span class="line">),</span><br></pre></td></tr></table></figure><h3 id="StateMixin"><a href="#StateMixin" class="headerlink" title="StateMixin"></a>StateMixin</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="GetContentStateMixin.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>雷同代码不再重复</p><ul><li>控制器 Mixin 如下</li></ul><p>lib/pages/getConnect_stateMixin/controller.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NewsStateMixinController</span> <span class="keyword">extends</span> <span class="title">GetxController</span></span></span><br><span class="line"><span class="class">    <span class="title">with</span> <span class="title">StateMixin</span>&lt;<span class="title">NewsPageListResponseEntity</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> NewsStateMixinProvider provider;</span><br><span class="line">  NewsStateMixinController(&#123;required <span class="keyword">this</span>.provider&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 拉取新闻列表</span></span><br><span class="line">  Future&lt;<span class="keyword">void</span>&gt; getNewsPageList() <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="comment">// 获取数据</span></span><br><span class="line">    <span class="keyword">final</span> Response response = <span class="keyword">await</span> provider.getNews();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 判断，如果有错误</span></span><br><span class="line">    <span class="keyword">if</span> (response.hasError) &#123;</span><br><span class="line">      <span class="comment">// 改变数据，传入错误状态，在ui中会处理这些错误</span></span><br><span class="line">      change(<span class="keyword">null</span>, status: RxStatus.error(response.statusText));</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 否则，存储数据，改变状态为成功</span></span><br><span class="line">      <span class="keyword">var</span> data = NewsPageListResponseEntity.fromJson(response.body);</span><br><span class="line">      change(data, status: RxStatus.success());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>这种方式确实简化了很多代码</p></blockquote><h3 id="GetController-Dio"><a href="#GetController-Dio" class="headerlink" title="GetController + Dio"></a>GetController + Dio</h3><p>这种方式就是之前 <a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">Flutter 新闻客户端</a> 的写法，能复用原来的 dio 代码。</p><ul><li>dio 基础类</li></ul><p>lib/common/utils/http.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  * http 操作类</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * 手册</span></span><br><span class="line"><span class="comment">  * https://github.com/flutterchina/dio/blob/master/README-ZH.md</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * 从 3 升级到 4</span></span><br><span class="line"><span class="comment">  * https://github.com/flutterchina/dio/blob/master/migration_to_4.x.md</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HttpUtil</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> HttpUtil _instance = HttpUtil._internal();</span><br><span class="line">  <span class="keyword">factory</span> HttpUtil() =&gt; _instance;</span><br><span class="line"></span><br><span class="line">  late Dio dio;</span><br><span class="line"></span><br><span class="line">  HttpUtil._internal() &#123;</span><br><span class="line">    <span class="comment">// BaseOptions、Options、RequestOptions 都可以配置参数，优先级别依次递增，且可以根据优先级别覆盖参数</span></span><br><span class="line">    BaseOptions options = <span class="keyword">new</span> BaseOptions(</span><br><span class="line">      <span class="comment">// 请求基地址,可以包含子路径</span></span><br><span class="line">      baseUrl: SERVER_API_URL,</span><br><span class="line"></span><br><span class="line">      <span class="comment">// baseUrl: storage.read(key: STORAGE_KEY_APIURL) ?? SERVICE_API_BASEURL,</span></span><br><span class="line">      <span class="comment">//连接服务器超时时间，单位是毫秒.</span></span><br><span class="line">      connectTimeout: <span class="number">10000</span>,</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 响应流上前后两次接受到数据的间隔，单位为毫秒。</span></span><br><span class="line">      receiveTimeout: <span class="number">5000</span>,</span><br><span class="line"></span><br><span class="line">      <span class="comment">// Http请求头.</span></span><br><span class="line">      headers: &#123;&#125;,</span><br><span class="line"></span><br><span class="line">      <span class="comment"><span class="markdown">/// 请求的Content-Type，默认值是"application/json; charset=utf-8".</span></span></span><br><span class="line">      <span class="comment"><span class="markdown">/// 如果您想以"application/x-www-form-urlencoded"格式编码请求数据,</span></span></span><br><span class="line">      <span class="comment"><span class="markdown">/// 可以设置此选项为 <span class="code">`Headers.formUrlEncodedContentType`</span>,  这样[Dio]</span></span></span><br><span class="line">      <span class="comment"><span class="markdown">/// 就会自动编码请求体.</span></span></span><br><span class="line">      contentType: <span class="string">'application/json; charset=utf-8'</span>,</span><br><span class="line"></span><br><span class="line">      <span class="comment"><span class="markdown">/// [responseType] 表示期望以那种格式(方式)接受响应数据。</span></span></span><br><span class="line">      <span class="comment"><span class="markdown">/// 目前 [ResponseType] 接受三种类型 <span class="code">`JSON`</span>, <span class="code">`STREAM`</span>, <span class="code">`PLAIN`</span>.</span></span></span><br><span class="line">      <span class="comment"><span class="markdown">///</span></span></span><br><span class="line">      <span class="comment"><span class="markdown">/// 默认值是 <span class="code">`JSON`</span>, 当响应头中content-type为"application/json"时，dio 会自动将响应内容转化为json对象。</span></span></span><br><span class="line">      <span class="comment"><span class="markdown">/// 如果想以二进制方式接受响应数据，如下载一个二进制文件，那么可以使用 <span class="code">`STREAM`</span>.</span></span></span><br><span class="line">      <span class="comment"><span class="markdown">///</span></span></span><br><span class="line">      <span class="comment"><span class="markdown">/// 如果想以文本(字符串)格式接收响应数据，请使用 <span class="code">`PLAIN`</span>.</span></span></span><br><span class="line">      responseType: ResponseType.json,</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    dio = <span class="keyword">new</span> Dio(options);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Cookie管理</span></span><br><span class="line">    CookieJar cookieJar = CookieJar();</span><br><span class="line">    dio.interceptors.add(CookieManager(cookieJar));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// restful get 操作</span></span></span><br><span class="line">  Future <span class="keyword">get</span>(</span><br><span class="line">    <span class="built_in">String</span> path, &#123;</span><br><span class="line">    <span class="keyword">dynamic</span>? queryParameters,</span><br><span class="line">    Options? options,</span><br><span class="line">  &#125;) <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> response = <span class="keyword">await</span> dio.<span class="keyword">get</span>(</span><br><span class="line">      path,</span><br><span class="line">      queryParameters: queryParameters,</span><br><span class="line">      options: options,</span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">return</span> response.data;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>api 定义</li></ul><p>lib/common/apis/news.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="markdown">/// 新闻</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NewsAPI</span> </span>&#123;</span><br><span class="line">  <span class="comment"><span class="markdown">/// 翻页</span></span></span><br><span class="line">  <span class="keyword">static</span> Future&lt;NewsPageListResponseEntity&gt; newsPageList(</span><br><span class="line">      &#123;NewsRecommendRequestEntity? param&#125;) <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> response = <span class="keyword">await</span> HttpUtil().<span class="keyword">get</span>(</span><br><span class="line">      <span class="string">'/news'</span>,</span><br><span class="line">      queryParameters: param?.toJson(),</span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">return</span> NewsPageListResponseEntity.fromJson(response);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>控制器</li></ul><p>lib/pages/getController_dio/controller.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NewsDioController</span> <span class="keyword">extends</span> <span class="title">GetxController</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> newsPageList =</span><br><span class="line">      Rx&lt;NewsPageListResponseEntity&gt;(NewsPageListResponseEntity());</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> onInit() &#123;</span><br><span class="line">    <span class="keyword">super</span>.onInit();</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"onInit"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> onClose() &#123;</span><br><span class="line">    <span class="keyword">super</span>.onClose();</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"onClose"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  getPageList() <span class="keyword">async</span> &#123;</span><br><span class="line">    newsPageList.value = <span class="keyword">await</span> NewsAPI.newsPageList();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="Flutter Getx" scheme="https://blog.ducafecat.tech/categories/Flutter-Getx/"/>
    
    
      <category term="flutter getx" scheme="https://blog.ducafecat.tech/tags/flutter-getx/"/>
    
  </entry>
  
  <entry>
    <title>Flutter Getx 03 - 状态管理、依赖加载</title>
    <link href="https://blog.ducafecat.tech/2021/04/16/flutter-getx/flutter-getx-03-state-dependency/"/>
    <id>https://blog.ducafecat.tech/2021/04/16/flutter-getx/flutter-getx-03-state-dependency/</id>
    <published>2021-04-15T16:00:00.000Z</published>
    <updated>2021-04-19T06:10:03.261Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-04-16-18-03-08.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h2><ul><li>4 种状态管理<ul><li>Obx</li><li>GetX</li><li>GetBuilder</li><li>ValueBuilder</li></ul></li><li>防抖、限流 函数<ul><li>ever</li><li>once</li><li>debounce</li><li>interval</li></ul></li><li>依赖注入<ul><li>Get.put</li><li>Get.lazyPut</li></ul></li><li>视图组件<ul><li>GetView</li></ul></li></ul><h2 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h2><p><a href="https://www.bilibili.com/video/BV1PA411V7qc/" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1PA411V7qc/</a></p><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://pub.flutter-io.cn/packages/get#reactive-state-manager" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/get#reactive-state-manager</a></li><li><a href="https://dart.dev/guides/language/extension-methods" target="_blank" rel="noopener">https://dart.dev/guides/language/extension-methods</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><h3 id="状态管理"><a href="#状态管理" class="headerlink" title="状态管理"></a>状态管理</h3><h4 id="Obx"><a href="#Obx" class="headerlink" title="Obx"></a>Obx</h4><ul><li>lib/pages/state_obx/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StateObxView</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  StateObxView(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> count = <span class="number">0.</span>obs;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">"Obx(...)"</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Center(</span><br><span class="line">        child: Column(</span><br><span class="line">          children: [</span><br><span class="line">            Obx(() =&gt; Text(<span class="string">"count1 -&gt; "</span> + count.toString())),</span><br><span class="line">            Obx(() =&gt; Text(<span class="string">"count2 -&gt; "</span> + count.toString())),</span><br><span class="line"></span><br><span class="line">            <span class="comment">//</span></span><br><span class="line">            Divider(),</span><br><span class="line">            ElevatedButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                count.value++;</span><br><span class="line">              &#125;,</span><br><span class="line">              child: Text(<span class="string">'add'</span>),</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>obs、extension、RxInt、Rx<t></t></li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"></span><br><span class="line">extension StringExtension on <span class="built_in">String</span> &#123;</span><br><span class="line">  <span class="comment"><span class="markdown">/// Returns </span>a<span class="markdown"> <span class="code">`RxString`</span> with [this] <span class="code">`String`</span> as initial value.</span></span></span><br><span class="line">  RxString <span class="keyword">get</span> obs =&gt; RxString(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">extension IntExtension on <span class="built_in">int</span> &#123;</span><br><span class="line">  <span class="comment"><span class="markdown">/// Returns </span>a<span class="markdown"> <span class="code">`RxInt`</span> with [this] <span class="code">`int`</span> as initial value.</span></span></span><br><span class="line">  RxInt <span class="keyword">get</span> obs =&gt; RxInt(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">extension DoubleExtension on <span class="built_in">double</span> &#123;</span><br><span class="line">  <span class="comment"><span class="markdown">/// Returns </span>a<span class="markdown"> <span class="code">`RxDouble`</span> with [this] <span class="code">`double`</span> as initial value.</span></span></span><br><span class="line">  RxDouble <span class="keyword">get</span> obs =&gt; RxDouble(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">extension BoolExtension on <span class="built_in">bool</span> &#123;</span><br><span class="line">  <span class="comment"><span class="markdown">/// Returns </span>a<span class="markdown"> <span class="code">`RxBool`</span> with [this] <span class="code">`bool`</span> as initial value.</span></span></span><br><span class="line">  RxBool <span class="keyword">get</span> obs =&gt; RxBool(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">extension RxT&lt;T&gt; on T &#123;</span><br><span class="line">  <span class="comment"><span class="markdown">/// Returns </span>a<span class="markdown"> <span class="code">`Rx`</span> instace with [this] <span class="code">`T`</span> as initial value.</span></span></span><br><span class="line">  Rx&lt;T&gt; <span class="keyword">get</span> obs =&gt; Rx&lt;T&gt;(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>小结</li></ul><p>适合界面上 简单状态管理，写起来很快。</p><h4 id="GetX"><a href="#GetX" class="headerlink" title="GetX"></a>GetX</h4><ul><li>编写控制器 lib/pages/state_getx/controller.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CountController</span> <span class="keyword">extends</span> <span class="title">GetxController</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> _count = <span class="number">0.</span>obs;</span><br><span class="line">  <span class="keyword">set</span> count(value) =&gt; <span class="keyword">this</span>._count.value = value;</span><br><span class="line">  <span class="keyword">get</span> count =&gt; <span class="keyword">this</span>._count.value;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> _count2 = <span class="number">0.</span>obs;</span><br><span class="line">  <span class="keyword">set</span> count2(value) =&gt; <span class="keyword">this</span>._count2.value = value;</span><br><span class="line">  <span class="keyword">get</span> count2 =&gt; <span class="keyword">this</span>._count2.value;</span><br><span class="line"></span><br><span class="line">  add() =&gt; _count.value++;</span><br><span class="line">  add2() =&gt; _count2.value++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>编写视图 lib/pages/state_getx/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StateGetxView</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  StateGetxView(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> controller = CountController();</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">"Getx"</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Center(</span><br><span class="line">        child: Column(</span><br><span class="line">          children: [</span><br><span class="line">            GetX&lt;CountController&gt;(</span><br><span class="line">              init: controller,</span><br><span class="line">              initState: (_) &#123;&#125;,</span><br><span class="line">              builder: (_) &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">"GetX - 1"</span>);</span><br><span class="line">                <span class="keyword">return</span> Text(<span class="string">'value 1 -&gt; <span class="subst">$&#123;_.count&#125;</span>'</span>);</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">            GetX&lt;CountController&gt;(</span><br><span class="line">              init: controller,</span><br><span class="line">              initState: (_) &#123;&#125;,</span><br><span class="line">              builder: (_) &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">"GetX - 2"</span>);</span><br><span class="line">                <span class="keyword">return</span> Text(<span class="string">'value 2 -&gt; <span class="subst">$&#123;_.count&#125;</span>'</span>);</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">            Divider(),</span><br><span class="line"></span><br><span class="line">            <span class="comment">//</span></span><br><span class="line">            GetX&lt;CountController&gt;(</span><br><span class="line">              init: controller,</span><br><span class="line">              initState: (_) &#123;&#125;,</span><br><span class="line">              builder: (_) &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">"GetX - 3"</span>);</span><br><span class="line">                <span class="keyword">return</span> Column(</span><br><span class="line">                  children: [</span><br><span class="line">                    Text(<span class="string">'value 3 -&gt; <span class="subst">$&#123;_.count&#125;</span>'</span>),</span><br><span class="line">                    ElevatedButton(</span><br><span class="line">                      onPressed: () &#123;</span><br><span class="line">                        _.add();</span><br><span class="line">                      &#125;,</span><br><span class="line">                      child: Text(<span class="string">'count1'</span>),</span><br><span class="line">                    )</span><br><span class="line">                  ],</span><br><span class="line">                );</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">            Divider(),</span><br><span class="line"></span><br><span class="line">            <span class="comment">// count2</span></span><br><span class="line">            GetX&lt;CountController&gt;(</span><br><span class="line">              init: controller,</span><br><span class="line">              initState: (_) &#123;&#125;,</span><br><span class="line">              builder: (_) &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">"GetX - 4"</span>);</span><br><span class="line">                <span class="keyword">return</span> Text(<span class="string">'value 4 -&gt; <span class="subst">$&#123;_.count2&#125;</span>'</span>);</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">            Divider(),</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 按钮</span></span><br><span class="line">            ElevatedButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                controller.add();</span><br><span class="line">              &#125;,</span><br><span class="line">              child: Text(<span class="string">'count1'</span>),</span><br><span class="line">            ),</span><br><span class="line"></span><br><span class="line">            ElevatedButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                controller.add2();</span><br><span class="line">              &#125;,</span><br><span class="line">              child: Text(<span class="string">'count2'</span>),</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>小结</li></ul><p>适合控制多控制器、多状态更新，可精细控制初始、局部渲染。</p><h4 id="GetBuilder"><a href="#GetBuilder" class="headerlink" title="GetBuilder"></a>GetBuilder</h4><ul><li>控制器 lib/pages/state_getBuilder/controller.dart 同上，不再重复</li><li>视图 lib/pages/state_getBuilder/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StateGetBuilderView</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  StateGetBuilderView(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> controller = CountController();</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">"GetBuilder"</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Center(</span><br><span class="line">        child: Column(</span><br><span class="line">          children: [</span><br><span class="line">            GetBuilder&lt;CountController&gt;(</span><br><span class="line">              init: controller,</span><br><span class="line">              initState: (_) &#123;&#125;,</span><br><span class="line">              builder: (_) &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">"GetBuilder - 1"</span>);</span><br><span class="line">                <span class="keyword">return</span> Text(<span class="string">'value -&gt; <span class="subst">$&#123;_.count&#125;</span>'</span>);</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">            GetBuilder&lt;CountController&gt;(</span><br><span class="line">              init: controller,</span><br><span class="line">              initState: (_) &#123;&#125;,</span><br><span class="line">              builder: (_) &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">"GetBuilder - 2"</span>);</span><br><span class="line">                <span class="keyword">return</span> Text(<span class="string">'value -&gt; <span class="subst">$&#123;_.count&#125;</span>'</span>);</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">            Divider(),</span><br><span class="line"></span><br><span class="line">            <span class="comment">//</span></span><br><span class="line">            GetBuilder&lt;CountController&gt;(</span><br><span class="line">              init: controller,</span><br><span class="line">              initState: (_) &#123;&#125;,</span><br><span class="line">              builder: (_) &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">"GetBuilder - 3"</span>);</span><br><span class="line">                <span class="keyword">return</span> Column(</span><br><span class="line">                  children: [</span><br><span class="line">                    Text(<span class="string">'value -&gt; <span class="subst">$&#123;_.count&#125;</span>'</span>),</span><br><span class="line">                    ElevatedButton(</span><br><span class="line">                      onPressed: () &#123;</span><br><span class="line">                        _.add();</span><br><span class="line">                      &#125;,</span><br><span class="line">                      child: Text(<span class="string">'GetBuilder -&gt; add'</span>),</span><br><span class="line">                    )</span><br><span class="line">                  ],</span><br><span class="line">                );</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">            Divider(),</span><br><span class="line"></span><br><span class="line">            <span class="comment">// count2</span></span><br><span class="line">            GetBuilder&lt;CountController&gt;(</span><br><span class="line">              init: controller,</span><br><span class="line">              initState: (_) &#123;&#125;,</span><br><span class="line">              builder: (_) &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">"GetBuilder - 4"</span>);</span><br><span class="line">                <span class="keyword">return</span> Text(<span class="string">'value count2 -&gt; <span class="subst">$&#123;_.count2&#125;</span>'</span>);</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">            Divider(),</span><br><span class="line"></span><br><span class="line">            <span class="comment">// id2</span></span><br><span class="line">            GetBuilder&lt;CountController&gt;(</span><br><span class="line">              id: <span class="string">"id2"</span>,</span><br><span class="line">              init: controller,</span><br><span class="line">              initState: (_) &#123;&#125;,</span><br><span class="line">              builder: (_) &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">"GetBuilder - 4"</span>);</span><br><span class="line">                <span class="keyword">return</span> Text(<span class="string">'id2 -&gt; value count2 -&gt; <span class="subst">$&#123;_.count2&#125;</span>'</span>);</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">            Divider(),</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 按钮</span></span><br><span class="line">            ElevatedButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                controller.add();</span><br><span class="line">              &#125;,</span><br><span class="line">              child: Text(<span class="string">'add'</span>),</span><br><span class="line">            ),</span><br><span class="line"></span><br><span class="line">            ElevatedButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                controller.add2();</span><br><span class="line">              &#125;,</span><br><span class="line">              child: Text(<span class="string">'add2'</span>),</span><br><span class="line">            ),</span><br><span class="line"></span><br><span class="line">            ElevatedButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                controller.update();</span><br><span class="line">              &#125;,</span><br><span class="line">              child: Text(<span class="string">'controller.update()'</span>),</span><br><span class="line">            ),</span><br><span class="line"></span><br><span class="line">            ElevatedButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                controller.update([<span class="string">"id2"</span>]);</span><br><span class="line">              &#125;,</span><br><span class="line">              child: Text(<span class="string">'controller.update(id2)'</span>),</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>小结</p><p>和 <code>GetX</code> 比起来，多了手动控制更新，有两点需要注意。</p><ol><li><code>controller.update();</code> 触发更新</li><li><code>id: &quot;id2&quot;,</code> 标记哪个 <code>builder</code> ，触发方式 <code>controller.update([&quot;id2&quot;]);</code> ，可传多个 <code>Array</code> 类型。</li></ol></li></ul><h4 id="ValueBuilder"><a href="#ValueBuilder" class="headerlink" title="ValueBuilder"></a>ValueBuilder</h4><ul><li>lib/pages/state_valueBuilder/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StateValueBuilderView</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  StateValueBuilderView(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">"ValueBuilder"</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Column(</span><br><span class="line">        children: [</span><br><span class="line">          Center(</span><br><span class="line">            child: ValueBuilder&lt;<span class="built_in">int</span>?&gt;(</span><br><span class="line">              initialValue: <span class="number">10</span>,</span><br><span class="line">              builder: (value, updateFn) &#123;</span><br><span class="line">                <span class="keyword">return</span> Column(</span><br><span class="line">                  children: [</span><br><span class="line">                    Text(<span class="string">"count -&gt; "</span> + value.toString()),</span><br><span class="line">                    ElevatedButton(</span><br><span class="line">                      onPressed: () &#123;</span><br><span class="line">                        updateFn(value! + <span class="number">1</span>);</span><br><span class="line">                      &#125;,</span><br><span class="line">                      child: Text(<span class="string">'ValueBuilder -&gt; add'</span>),</span><br><span class="line">                    )</span><br><span class="line">                  ],</span><br><span class="line">                );</span><br><span class="line">              &#125;,</span><br><span class="line">              <span class="comment">// builder: (value, updateFn) =&gt; Switch(</span></span><br><span class="line">              <span class="comment">//   value: value,</span></span><br><span class="line">              <span class="comment">//   onChanged:</span></span><br><span class="line">              <span class="comment">//       updateFn, // same signature! you could use ( newValue ) =&gt; updateFn( newValue )</span></span><br><span class="line">              <span class="comment">// ),</span></span><br><span class="line">              <span class="comment">// if you need to call something outside the builder method.</span></span><br><span class="line">              onUpdate: (value) =&gt; <span class="built_in">print</span>(<span class="string">"Value updated: $value"</span>),</span><br><span class="line">              onDispose: () =&gt; <span class="built_in">print</span>(<span class="string">"Widget unmounted"</span>),</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>小结</li></ul><p>适合局部的状态管理，很灵活。</p><h4 id="防抖、限流"><a href="#防抖、限流" class="headerlink" title="防抖、限流"></a>防抖、限流</h4><ul><li>控制器 lib/pages/state_workers/controller.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CountController</span> <span class="keyword">extends</span> <span class="title">GetxController</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> _count = <span class="number">0.</span>obs;</span><br><span class="line">  <span class="keyword">set</span> count(value) =&gt; <span class="keyword">this</span>._count.value = value;</span><br><span class="line">  <span class="keyword">get</span> count =&gt; <span class="keyword">this</span>._count.value;</span><br><span class="line"></span><br><span class="line">  add() =&gt; _count.value++;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> onInit() &#123;</span><br><span class="line">    <span class="keyword">super</span>.onInit();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 每次</span></span><br><span class="line">    ever(_count, (value) &#123;</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">"ever -&gt; "</span> + value.toString());</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 第一次</span></span><br><span class="line">    once(_count, (value) &#123;</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">"once -&gt; "</span> + value.toString());</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 防抖 2 秒内</span></span><br><span class="line">    debounce(</span><br><span class="line">      _count,</span><br><span class="line">      (value) &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"debounce -&gt; "</span> + value.toString());</span><br><span class="line">      &#125;,</span><br><span class="line">      time: <span class="built_in">Duration</span>(seconds: <span class="number">2</span>),</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 定时器 1 秒</span></span><br><span class="line">    interval(</span><br><span class="line">      _count,</span><br><span class="line">      (value) &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"interval -&gt; "</span> + value.toString());</span><br><span class="line">      &#125;,</span><br><span class="line">      time: <span class="built_in">Duration</span>(seconds: <span class="number">1</span>),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>视图 lib/pages/state_workers/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StateWorkersView</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  StateWorkersView(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> controller = CountController();</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">"GetBuilder"</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Center(</span><br><span class="line">        child: Column(</span><br><span class="line">          children: [</span><br><span class="line">            <span class="comment">// 显示</span></span><br><span class="line">            GetX&lt;CountController&gt;(</span><br><span class="line">              init: controller,</span><br><span class="line">              initState: (_) &#123;&#125;,</span><br><span class="line">              builder: (_) &#123;</span><br><span class="line">                <span class="keyword">return</span> Text(<span class="string">'value -&gt; <span class="subst">$&#123;_.count&#125;</span>'</span>);</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 按钮</span></span><br><span class="line">            ElevatedButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                controller.add();</span><br><span class="line">              &#125;,</span><br><span class="line">              child: Text(<span class="string">'add'</span>),</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>小结</li></ul><p><code>ever</code> 适合做监听、日志收集</p><p><code>debounce</code> 适合做搜索输入框</p><h3 id="依赖注入"><a href="#依赖注入" class="headerlink" title="依赖注入"></a>依赖注入</h3><h4 id="Get-put"><a href="#Get-put" class="headerlink" title="Get.put"></a>Get.put</h4><ul><li>控制器 lib/pages/dependency_put_find/controller.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CountController</span> <span class="keyword">extends</span> <span class="title">GetxController</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> _count = <span class="number">0.</span>obs;</span><br><span class="line">  <span class="keyword">set</span> count(value) =&gt; <span class="keyword">this</span>._count.value = value;</span><br><span class="line">  <span class="keyword">get</span> count =&gt; <span class="keyword">this</span>._count.value;</span><br><span class="line"></span><br><span class="line">  add() =&gt; _count.value++;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> onInit() &#123;</span><br><span class="line">    <span class="keyword">super</span>.onInit();</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"onInit"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> onClose() &#123;</span><br><span class="line">    <span class="keyword">super</span>.onClose();</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"onClose"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>第一个视图 lib/pages/dependency_put_find/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StateDependencyPutFindView</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  StateDependencyPutFindView(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> controller = Get.put&lt;CountController&gt;(CountController());</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">"Dependency"</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Center(</span><br><span class="line">        child: Column(</span><br><span class="line">          children: [</span><br><span class="line">            GetX&lt;CountController&gt;(</span><br><span class="line">              init: controller,</span><br><span class="line">              initState: (_) &#123;&#125;,</span><br><span class="line">              builder: (_) &#123;</span><br><span class="line">                <span class="keyword">return</span> Text(<span class="string">'value -&gt; <span class="subst">$&#123;_.count&#125;</span>'</span>);</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">            Divider(),</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 按钮</span></span><br><span class="line">            ElevatedButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                controller.add();</span><br><span class="line">              &#125;,</span><br><span class="line">              child: Text(<span class="string">'add'</span>),</span><br><span class="line">            ),</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 跳转</span></span><br><span class="line">            ElevatedButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                Get.to(NextPageView());</span><br><span class="line">              &#125;,</span><br><span class="line">              child: Text(<span class="string">'next page'</span>),</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>第二个视图 lib/pages/dependency_put_find/next_page.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NextPageView</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  NextPageView(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> controller = Get.find&lt;CountController&gt;();</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">"NextPage"</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Center(</span><br><span class="line">        child: Column(</span><br><span class="line">          children: [</span><br><span class="line">            GetX&lt;CountController&gt;(</span><br><span class="line">              init: controller,</span><br><span class="line">              initState: (_) &#123;&#125;,</span><br><span class="line">              builder: (_) &#123;</span><br><span class="line">                <span class="keyword">return</span> Text(<span class="string">'value -&gt; <span class="subst">$&#123;_.count&#125;</span>'</span>);</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">            Divider(),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Get-lazyPut-GetView-懒加载"><a href="#Get-lazyPut-GetView-懒加载" class="headerlink" title="Get.lazyPut + GetView 懒加载"></a>Get.lazyPut + GetView 懒加载</h4><ul><li>控制器 lib/pages/dependency_lazyPut/controller.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CountController</span> <span class="keyword">extends</span> <span class="title">GetxController</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> _count = <span class="number">0.</span>obs;</span><br><span class="line">  <span class="keyword">set</span> count(value) =&gt; <span class="keyword">this</span>._count.value = value;</span><br><span class="line">  <span class="keyword">get</span> count =&gt; <span class="keyword">this</span>._count.value;</span><br><span class="line"></span><br><span class="line">  add() =&gt; _count.value++;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> onInit() &#123;</span><br><span class="line">    <span class="keyword">super</span>.onInit();</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"onInit"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> onClose() &#123;</span><br><span class="line">    <span class="keyword">super</span>.onClose();</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"onClose"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>第一个视图 lib/pages/dependency_lazyPut/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StateDependencyLazyPutView</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  StateDependencyLazyPutView(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">"Dependency - LazyPut"</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Center(</span><br><span class="line">        child: Column(</span><br><span class="line">          children: [</span><br><span class="line">            GetX&lt;CountController&gt;(</span><br><span class="line">              init: Get.find&lt;CountController&gt;(),</span><br><span class="line">              initState: (_) &#123;&#125;,</span><br><span class="line">              builder: (_) &#123;</span><br><span class="line">                <span class="keyword">return</span> Text(<span class="string">'value -&gt; <span class="subst">$&#123;_.count&#125;</span>'</span>);</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">            Divider(),</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 按钮</span></span><br><span class="line">            ElevatedButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                Get.find&lt;CountController&gt;().add();</span><br><span class="line">              &#125;,</span><br><span class="line">              child: Text(<span class="string">'add'</span>),</span><br><span class="line">            ),</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 跳转</span></span><br><span class="line">            ElevatedButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                Get.to(NextPageView());</span><br><span class="line">              &#125;,</span><br><span class="line">              child: Text(<span class="string">'Next GetView Page'</span>),</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>第二个视图 lib/pages/dependency_lazyPut/next_getview_page.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NextPageView</span> <span class="keyword">extends</span> <span class="title">GetView</span>&lt;<span class="title">CountController</span>&gt; </span>&#123;</span><br><span class="line">  NextPageView(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">"GetView Page"</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Center(</span><br><span class="line">        child: Column(</span><br><span class="line">          children: [</span><br><span class="line">            Obx(() =&gt; Text(<span class="string">'value -&gt; <span class="subst">$&#123;controller.count&#125;</span>'</span>)),</span><br><span class="line">            Divider(),</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 按钮</span></span><br><span class="line">            ElevatedButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                controller.add();</span><br><span class="line">              &#125;,</span><br><span class="line">              child: Text(<span class="string">'add'</span>),</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>绑定 lib/pages/dependency_lazyPut/bindings.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DependencyLazyPutBinding</span> <span class="keyword">implements</span> <span class="title">Bindings</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> dependencies() &#123;</span><br><span class="line">    Get.lazyPut&lt;CountController&gt;(() =&gt; CountController());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>路由 lib/common/routes/app_pages.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">GetPage(</span><br><span class="line">    name: AppRoutes.DependencyLazyPut,</span><br><span class="line">    binding: DependencyLazyPutBinding(),</span><br><span class="line">    page: () =&gt; StateDependencyLazyPutView()),</span><br></pre></td></tr></table></figure><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech/</a></p><p><a href="https://github.com/ducafecat" target="_blank" rel="noopener">https://github.com/ducafecat</a></p><h2 id="往期"><a href="#往期" class="headerlink" title="往期"></a>往期</h2><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><h4 id="GetX-Quick-Start"><a href="#GetX-Quick-Start" class="headerlink" title="GetX Quick Start"></a>GetX Quick Start</h4><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h4 id="新闻客户端"><a href="#新闻客户端" class="headerlink" title="新闻客户端"></a>新闻客户端</h4><p><a href="https://github.com/ducafecat/flutter_learn_news" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news</a></p><h3 id="strapi-手册译文"><a href="#strapi-手册译文" class="headerlink" title="strapi 手册译文"></a>strapi 手册译文</h3><p><a href="https://getstrapi.cn" target="_blank" rel="noopener">https://getstrapi.cn</a></p><h3 id="微信讨论群-ducafecat"><a href="#微信讨论群-ducafecat" class="headerlink" title="微信讨论群 ducafecat"></a>微信讨论群 ducafecat</h3><h3 id="系列集合"><a href="#系列集合" class="headerlink" title="系列集合"></a>系列集合</h3><h4 id="Dart-编程语言基础"><a href="#Dart-编程语言基础" class="headerlink" title="Dart 编程语言基础"></a>Dart 编程语言基础</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=111585" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=111585</a></p><h4 id="Flutter-零基础入门"><a href="#Flutter-零基础入门" class="headerlink" title="Flutter 零基础入门"></a>Flutter 零基础入门</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=123470" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=123470</a></p><h4 id="Flutter-实战从零开始-新闻客户端"><a href="#Flutter-实战从零开始-新闻客户端" class="headerlink" title="Flutter 实战从零开始 新闻客户端"></a>Flutter 实战从零开始 新闻客户端</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=106755</a></p><h4 id="Flutter-组件开发"><a href="#Flutter-组件开发" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-组件开发-1"><a href="#Flutter-组件开发-1" class="headerlink" title="Flutter 组件开发"></a>Flutter 组件开发</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=144262" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=144262</a></p><h4 id="Flutter-Bloc"><a href="#Flutter-Bloc" class="headerlink" title="Flutter Bloc"></a>Flutter Bloc</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177519" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177519</a></p><h4 id="Flutter-Getx4"><a href="#Flutter-Getx4" class="headerlink" title="Flutter Getx4"></a>Flutter Getx4</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=177514" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=177514</a></p><h4 id="Docker-Yapi"><a href="#Docker-Yapi" class="headerlink" title="Docker Yapi"></a>Docker Yapi</h4><p><a href="https://space.bilibili.com/404904528/channel/detail?cid=130578" target="_blank" rel="noopener">https://space.bilibili.com/404904528/channel/detail?cid=130578</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="Flutter Getx" scheme="https://blog.ducafecat.tech/categories/Flutter-Getx/"/>
    
    
      <category term="flutter getx" scheme="https://blog.ducafecat.tech/tags/flutter-getx/"/>
    
  </entry>
  
  <entry>
    <title>Flutter Getx 02 - 空安全、更健全的代码</title>
    <link href="https://blog.ducafecat.tech/2021/04/09/flutter-getx/flutter-getx-02-null-safety/"/>
    <id>https://blog.ducafecat.tech/2021/04/09/flutter-getx/flutter-getx-02-null-safety/</id>
    <published>2021-04-08T16:00:00.000Z</published>
    <updated>2021-04-09T14:23:43.954Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-04-09-14-52-51.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>空安全意味着什么</li><li>如何迁移代码</li><li>如何禁用空安全</li><li>代码规范示例</li></ul><h2 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h2><p><a href="https://www.bilibili.com/video/bv1g5411c7hF" target="_blank" rel="noopener">https://www.bilibili.com/video/bv1g5411c7hF</a></p><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://dart.cn/null-safety" target="_blank" rel="noopener">https://dart.cn/null-safety</a></li><li><a href="https://dart.cn/null-safety/migration-guide" target="_blank" rel="noopener">https://dart.cn/null-safety/migration-guide</a></li><li><a href="https://dart.cn/null-safety/understanding-null-safety" target="_blank" rel="noopener">https://dart.cn/null-safety/understanding-null-safety</a></li><li><a href="https://dart.cn/null-safety/unsound-null-safety" target="_blank" rel="noopener">https://dart.cn/null-safety/unsound-null-safety</a></li><li><a href="https://dart.cn/null-safety/faq" target="_blank" rel="noopener">https://dart.cn/null-safety/faq</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><h3 id="空安全意味着什么"><a href="#空安全意味着什么" class="headerlink" title="空安全意味着什么"></a>空安全意味着什么</h3><ul><li>默认不可空</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span> title = <span class="string">'ducafecat'</span>;</span><br></pre></td></tr></table></figure><ul><li><code>type?</code> 操作符</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>? title = <span class="keyword">null</span>;</span><br></pre></td></tr></table></figure><ul><li><code>value!</code> 操作符</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>? title = <span class="string">'ducafecat'</span>;</span><br><span class="line"><span class="built_in">String</span> newTitle = title!;</span><br></pre></td></tr></table></figure><ul><li><code>value?</code> 操作符</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>? title = <span class="string">'ducafecat'</span>;</span><br><span class="line"><span class="built_in">bool</span> isEmpty = title?.isEmpty();</span><br></pre></td></tr></table></figure><ul><li><code>value??</code> 操作符</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>? title = <span class="string">'ducafecat'</span>;</span><br><span class="line"><span class="built_in">String</span> newTitle = title ?? <span class="string">'cat'</span>;</span><br></pre></td></tr></table></figure><ul><li><code>late</code> 会在运行时检查。所以请您仅在确定它被使用前一定会被初始化的情况下使用</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">late <span class="built_in">String</span>? title;</span><br><span class="line">title = <span class="string">'ducafecat'</span>;</span><br></pre></td></tr></table></figure><ul><li>List、泛型</li></ul><table><thead><tr><th>类型</th><th>集合是否可空</th><th>数据项是否可空</th></tr></thead><tbody><tr><td>List<string></string></td><td>no</td><td>no</td></tr><tr><td>List<string>?</string></td><td>yes</td><td>no</td></tr><tr><td>List&lt;String?&gt;</td><td>no</td><td>yes</td></tr><tr><td>List&lt;String?&gt;?</td><td>yes</td><td>yes</td></tr></tbody></table><ul><li>Map</li></ul><table><thead><tr><th>类型</th><th>集合是否可空</th><th>数据项是否可空</th></tr></thead><tbody><tr><td>Map&lt;String, int&gt;</td><td>no</td><td>no*</td></tr><tr><td>Map&lt;String, int&gt;?</td><td>yes</td><td>no*</td></tr><tr><td>Map&lt;String, int?&gt;</td><td>no</td><td>yes</td></tr><tr><td>Map&lt;String, int?&gt;?</td><td>yes</td><td>yes</td></tr></tbody></table><blockquote><p><code>*</code> 可能返回空</p></blockquote><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 有可能返回 null</span></span><br><span class="line"><span class="built_in">int</span> value = &lt;<span class="built_in">String</span>, <span class="built_in">int</span>&gt;&#123;<span class="string">'one'</span>: <span class="number">1</span>&#125;[<span class="string">'one'</span>]; <span class="comment">// ERROR</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 需要加上 type?</span></span><br><span class="line"><span class="built_in">int</span>? value = &lt;<span class="built_in">String</span>, <span class="built_in">int</span>&gt;&#123;<span class="string">'one'</span>: <span class="number">1</span>&#125;[<span class="string">'one'</span>]; <span class="comment">// OK</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 或者 value!</span></span><br><span class="line"><span class="built_in">int</span> value = &lt;<span class="built_in">String</span>, <span class="built_in">int</span>&gt;&#123;<span class="string">'one'</span>: <span class="number">1</span>&#125;[<span class="string">'one'</span>]!; <span class="comment">// OK</span></span><br></pre></td></tr></table></figure><h3 id="带来的好处"><a href="#带来的好处" class="headerlink" title="带来的好处"></a>带来的好处</h3><ul><li>代码更健康</li><li>用户体验好</li><li>运行更快</li><li>编译文件更小</li></ul><h3 id="开启和迁移"><a href="#开启和迁移" class="headerlink" title="开启和迁移"></a>开启和迁移</h3><ul><li>pubspec.yaml</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">environment:</span><br><span class="line">  sdk: &quot;&gt;=2.12.0 &lt;3.0.0&quot;</span><br></pre></td></tr></table></figure><ul><li>迁移顺序</li></ul><p>我们强烈建议您按顺序迁移代码，先迁移依赖关系中的处于最末端的依赖。例如，如果 C 依赖了 B，B 依赖了 A，那么应该按照 A -&gt; B -&gt; C 的顺序进行迁移。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-04-09-11-16-14.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>检查依赖项目</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># Dart 版本是否为 2.12 或更高</span><br><span class="line">&gt; dart --version</span><br><span class="line"></span><br><span class="line"># 依赖包的迁移状态</span><br><span class="line">&gt; dart pub outdated --mode=null-safety</span><br></pre></td></tr></table></figure><ul><li>升级依赖</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 该命令会更改您的 pubspec.yaml 文件</span><br><span class="line">&gt; dart pub upgrade --null-safety</span><br><span class="line"></span><br><span class="line"># 升级包</span><br><span class="line">&gt; dart pub upgrade</span><br></pre></td></tr></table></figure><ul><li>迁移工具</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; dart migrate</span><br></pre></td></tr></table></figure><ul><li>分析</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; dart analyze</span><br></pre></td></tr></table></figure><h3 id="禁用空安全"><a href="#禁用空安全" class="headerlink" title="禁用空安全"></a>禁用空安全</h3><ul><li>cli 命令</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; dart --no-sound-null-safety run</span><br><span class="line">&gt; flutter run --no-sound-null-safety</span><br></pre></td></tr></table></figure><ul><li>.vscode/launch.json</li></ul><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  // 使用 IntelliSense 了解相关属性。</span><br><span class="line">  // 悬停以查看现有属性的描述。</span><br><span class="line">  // 欲了解更多信息，请访问: https://go.microsoft.com/fwlink/?linkid=830387</span><br><span class="line">  "version": "0.2.0",</span><br><span class="line">  "configurations": [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"name"</span>: <span class="string">"getx_quick_start"</span>,</span><br><span class="line">      <span class="attr">"request"</span>: <span class="string">"launch"</span>,</span><br><span class="line">      <span class="attr">"type"</span>: <span class="string">"dart"</span>,</span><br><span class="line">      <span class="attr">"program"</span>: <span class="string">"lib/main.dart"</span>,</span><br><span class="line">      <span class="attr">"args"</span>: [<span class="string">"--no-sound-null-safety"</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="范例、规范"><a href="#范例、规范" class="headerlink" title="范例、规范"></a>范例、规范</h3><p><a href="https://dart.cn/null-safety/understanding-null-safety" target="_blank" rel="noopener">https://dart.cn/null-safety/understanding-null-safety</a></p><ul><li>明确处理空状态</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">makeCoffee(<span class="built_in">String</span> coffee, [<span class="built_in">String</span>? dairy]) &#123;</span><br><span class="line">  <span class="keyword">if</span> (dairy != <span class="keyword">null</span>) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'$coffee with $dairy'</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'Black $coffee'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong>顶层变量和静态字段必须包含一个初始化方法。</strong>由于它们能在程序里的任何位置被访问到，编译器无法保证它们在被使用前已被赋值。唯一保险的选项是要求其本身包含初始化表达式，以确保产生匹配的类型的值。</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> topLevel = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomeClass</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="built_in">int</span> staticField = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong>实例的字段也必须在声明时包含初始化方法，可以为常见初始化形式，也可以在实例的构造方法中进行初始化。</strong></li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomeClass</span> </span>&#123;</span><br><span class="line">  <span class="built_in">int</span> atDeclaration = <span class="number">0</span>;</span><br><span class="line">  <span class="built_in">int</span> initializingFormal;</span><br><span class="line">  <span class="built_in">int</span> initializationList;</span><br><span class="line"></span><br><span class="line">  SomeClass(<span class="keyword">this</span>.initializingFormal)</span><br><span class="line">      : initializationList = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>局部变量的灵活度最高。一个非空的变量 <strong>不一定需要</strong> 一个初始化方法。</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> tracingFibonacci(<span class="built_in">int</span> n) &#123;</span><br><span class="line">  <span class="built_in">int</span> result;</span><br><span class="line">  <span class="keyword">if</span> (n &lt; <span class="number">2</span>) &#123;</span><br><span class="line">    result = n;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    result = tracingFibonacci(n - <span class="number">2</span>) + tracingFibonacci(n - <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">print</span>(result);</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>流程分析，在这里 Dart 将 <code>object</code> 的类型从它声明的 <code>Object</code> 提升到了 <code>List</code>。在空安全引入以前，下面的程序无法运行。</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// With (or without) null safety:</span></span><br><span class="line"><span class="built_in">bool</span> isEmptyList(<span class="built_in">Object</span> object) &#123;</span><br><span class="line">  <span class="keyword">if</span> (object <span class="keyword">is</span> <span class="built_in">List</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> object.isEmpty; <span class="comment">// &lt;-- OK!</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Without null safety:</span></span><br><span class="line"><span class="built_in">bool</span> isEmptyList(<span class="built_in">Object</span> object) &#123;</span><br><span class="line">  <span class="keyword">if</span> (object <span class="keyword">is</span>! <span class="built_in">List</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">  <span class="keyword">return</span> object.isEmpty;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>绝对的赋值分析</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> tracingFibonacci(<span class="built_in">int</span> n) &#123;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">int</span> result;</span><br><span class="line">  <span class="keyword">if</span> (n &lt; <span class="number">2</span>) &#123;</span><br><span class="line">    result = n;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    result = tracingFibonacci(n - <span class="number">2</span>) + tracingFibonacci(n - <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">print</span>(result);</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>无用代码的警告</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span> checkList(<span class="built_in">List</span> list) &#123;</span><br><span class="line">  <span class="keyword">if</span> (list?.isEmpty) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'Got nothing'</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">'Got something'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>懒加载的变量， <code>late</code> 修饰符是“在运行时而非编译时对变量进行约束”。这就让 <code>late</code> 这个词语约等于 <strong>何时</strong> 执行对变量的强制约束。</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Using null safety:</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Coffee</span> </span>&#123;</span><br><span class="line">  <span class="built_in">String</span>? _temperature;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> heat() &#123; _temperature = <span class="string">'hot'</span>; &#125;</span><br><span class="line">  <span class="keyword">void</span> chill() &#123; _temperature = <span class="string">'iced'</span>; &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">String</span> serve() =&gt; _temperature! + <span class="string">' coffee'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Using null safety:</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Coffee</span> </span>&#123;</span><br><span class="line">  late <span class="built_in">String</span> _temperature;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> heat() &#123; _temperature = <span class="string">'hot'</span>; &#125;</span><br><span class="line">  <span class="keyword">void</span> chill() &#123; _temperature = <span class="string">'iced'</span>; &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">String</span> serve() =&gt; _temperature + <span class="string">' coffee'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>late</code> 与 <code>final</code> 结合使用，与普通的 <code>final</code> 字段不同，您不需要在声明或构造时就将其初始化。您可以稍后在运行中的某个地方加载它。但是您只能对其进行 <strong>一次</strong> 赋值，并且它在运行时会进行校验。</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Using null safety:</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Coffee</span> </span>&#123;</span><br><span class="line">  late <span class="keyword">final</span> <span class="built_in">String</span> _temperature;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> heat() &#123; _temperature = <span class="string">'hot'</span>; &#125;</span><br><span class="line">  <span class="keyword">void</span> chill() &#123; _temperature = <span class="string">'iced'</span>; &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">String</span> serve() =&gt; _temperature + <span class="string">' coffee'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>毕传参数，这里的所有参数都必须通过命名来传递。参数 <code>a</code> 和 <code>c</code> 是可选的，可以省略。参数 <code>b</code> 和 <code>d</code> 是必需的，调用时必须传递。在这里请注意，是否必需和是否可空无关。</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Using null safety:</span></span><br><span class="line">function(&#123;<span class="built_in">int</span>? a, required <span class="built_in">int</span>? b, <span class="built_in">int</span>? c, required <span class="built_in">int</span>? d&#125;) &#123;&#125;</span><br></pre></td></tr></table></figure><ul><li>抽象字段</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Cup</span> </span>&#123;</span><br><span class="line">  Beverage <span class="keyword">get</span> contents;</span><br><span class="line">  <span class="keyword">set</span> contents(Beverage);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Cup</span> </span>&#123;</span><br><span class="line">  <span class="keyword">abstract</span> Beverage contents;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>一些赋值计算可以移动到静态的初始化中。</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Initalized without values</span></span><br><span class="line">ListQueue _context;</span><br><span class="line">Float32List _buffer;</span><br><span class="line"><span class="keyword">dynamic</span> _readObject;</span><br><span class="line"></span><br><span class="line">Vec2D(<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; object) &#123;</span><br><span class="line">  _buffer = Float32List.fromList([<span class="number">0.0</span>, <span class="number">0.0</span>]);</span><br><span class="line">  _readObject = object[<span class="string">'container'</span>];</span><br><span class="line">  _context = ListQueue&lt;<span class="keyword">dynamic</span>&gt;();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Initalized with values</span></span><br><span class="line"><span class="keyword">final</span> ListQueue _context = ListQueue&lt;<span class="keyword">dynamic</span>&gt;();</span><br><span class="line"><span class="keyword">final</span> Float32List _buffer = Float32List.fromList([<span class="number">0.0</span>, <span class="number">0.0</span>]);</span><br><span class="line"><span class="keyword">final</span> <span class="keyword">dynamic</span> _readObject;</span><br><span class="line"></span><br><span class="line">Vec2D(<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; object) : _readObject = object[<span class="string">'container'</span>];</span><br></pre></td></tr></table></figure><ul><li>可能返回 <code>null</code> 的工厂方法</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">factory</span> StreamReader(<span class="keyword">dynamic</span> data) &#123;</span><br><span class="line">  StreamReader reader;</span><br><span class="line">  <span class="keyword">if</span> (data <span class="keyword">is</span> ByteData) &#123;</span><br><span class="line">    reader = BlockReader(data);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (data <span class="keyword">is</span> <span class="built_in">Map</span>) &#123;</span><br><span class="line">    reader = JSONBlockReader(data);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> reader;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">factory</span> StreamReader(<span class="keyword">dynamic</span> data) &#123;</span><br><span class="line">  <span class="keyword">if</span> (data <span class="keyword">is</span> ByteData) &#123;</span><br><span class="line">    <span class="comment">// Move the readIndex forward for the binary reader.</span></span><br><span class="line">    <span class="keyword">return</span> BlockReader(data);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (data <span class="keyword">is</span> <span class="built_in">Map</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> JSONBlockReader(data);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> ArgumentError(<span class="string">'Unexpected type for data'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p><p><a href="https://ducafecat.gitee.io" target="_blank" rel="noopener">https://ducafecat.gitee.io</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="Flutter Getx" scheme="https://blog.ducafecat.tech/categories/Flutter-Getx/"/>
    
    
      <category term="flutter getx" scheme="https://blog.ducafecat.tech/tags/flutter-getx/"/>
    
  </entry>
  
  <entry>
    <title>Flutter Getx 01 - 路由、中间件、鉴权、传值、跳转</title>
    <link href="https://blog.ducafecat.tech/2021/04/05/flutter-getx/flutter-getx-01-router-middleware/"/>
    <id>https://blog.ducafecat.tech/2021/04/05/flutter-getx/flutter-getx-01-router-middleware/</id>
    <published>2021-04-04T16:00:00.000Z</published>
    <updated>2021-04-05T05:54:24.481Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-04-04-22-50-24.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h1 id="Getx"><a href="#Getx" class="headerlink" title="Getx"></a>Getx</h1><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-04-04-21-09-42.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-04-05-13-44-20.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p><a href="https://pub.flutter-io.cn/packages/get" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/get</a></p><p><a href="https://marketplace.visualstudio.com/items?itemName=get-snippets.get-snippets" target="_blank" rel="noopener">vscode 插件</a></p><p><a href="https://plugins.jetbrains.com/plugin/14975-getx-snippets" target="_blank" rel="noopener">Android Studio/Intellij 插件</a></p><h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>GetPage 对象</li><li>路由层级控制</li><li>路由中间件、鉴权</li><li>404 处理</li><li>路由跳转、替换、清除</li><li>路由传值、返回值</li><li>路由转场动画</li></ul><h2 id="开发环境"><a href="#开发环境" class="headerlink" title="开发环境"></a>开发环境</h2><ul><li>Flutter 2.1.0-12.1.pre</li><li>Dart 2.13.0</li><li>get: ^3.26.0</li></ul><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://github.com/jonataslaw/getx/tree/master/example" target="_blank" rel="noopener">getx example</a></li><li><a href="https://kauemurakami.github.io/getx_pattern/" target="_blank" rel="noopener">getx_pattern</a></li><li><a href="https://marketplace.visualstudio.com/items?itemName=get-snippets.get-snippets" target="_blank" rel="noopener">GetX Snippets</a></li></ul><h2 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h2><p><a href="https://www.bilibili.com/video/BV1yU4y1876r/" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1yU4y1876r/</a></p><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/ducafecat/getx_quick_start" target="_blank" rel="noopener">https://github.com/ducafecat/getx_quick_start</a></p><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><h3 id="初始-getx-项目"><a href="#初始-getx-项目" class="headerlink" title="初始 getx 项目"></a>初始 getx 项目</h3><ul><li>pubspec.yaml</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dependencies:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line"><span class="attr">  get:</span> <span class="string">^3.26.0</span></span><br></pre></td></tr></table></figure><ul><li>lib/pages/home/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:get/get.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HomeView</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> HomeView(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">"首页"</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: ListView(</span><br><span class="line">        children: [</span><br><span class="line">          <span class="comment">// 路由&amp;导航</span></span><br><span class="line">          Divider(),</span><br><span class="line"></span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>lib/common/routes/app_routes.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">part</span> of <span class="string">'app_pages.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AppRoutes</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> Home = <span class="string">'/home'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>lib/common/routes/app_pages.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:get/get.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">part</span> <span class="string">'app_routes.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AppPages</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> INITIAL = AppRoutes.Home;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">final</span> routes = [</span><br><span class="line">    GetPage(</span><br><span class="line">      name: AppRoutes.Home,</span><br><span class="line">      page: () =&gt; HomeView(),</span><br><span class="line">    ),</span><br><span class="line">  ];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>lib/main.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Future&lt;<span class="keyword">void</span>&gt; main() <span class="keyword">async</span> &#123;</span><br><span class="line">  runApp(MyApp());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> MyApp(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> GetMaterialApp(</span><br><span class="line">      debugShowCheckedModeBanner: <span class="keyword">false</span>,</span><br><span class="line">      initialRoute: AppPages.INITIAL,</span><br><span class="line">      getPages: AppPages.routes,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="编写-GetPage-定义"><a href="#编写-GetPage-定义" class="headerlink" title="编写 GetPage 定义"></a>编写 GetPage 定义</h3><ul><li>lib/pages/list/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ListView</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> ListView(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">"列表页"</span>),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>lib/pages/list_detail/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DetailView</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> DetailView(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">"详情页"</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: ListView(</span><br><span class="line">        children: [</span><br><span class="line">          ListTile(</span><br><span class="line">            title: Text(<span class="string">"导航-返回"</span>),</span><br><span class="line">            subtitle: Text(<span class="string">'Get.back()'</span>),</span><br><span class="line">            onTap: () =&gt; Get.back(),</span><br><span class="line">          ),</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>lib/common/routes/app_routes.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AppRoutes</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> Home = <span class="string">'/home'</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">List</span> = <span class="string">'/list'</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> Detail = <span class="string">'/detail'</span>;</span><br></pre></td></tr></table></figure><ul><li>lib/common/routes/app_pages.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">GetPage(</span><br><span class="line">  name: AppRoutes.Home,</span><br><span class="line">  page: () =&gt; HomeView(),</span><br><span class="line">  children: [</span><br><span class="line">    GetPage(</span><br><span class="line">      name: AppRoutes.<span class="built_in">List</span>,</span><br><span class="line">      page: () =&gt; ListView(),</span><br><span class="line">      children: [</span><br><span class="line">        GetPage(</span><br><span class="line">          name: AppRoutes.Detail,</span><br><span class="line">          page: () =&gt; DetailView(),</span><br><span class="line">        ),</span><br><span class="line">      ],</span><br><span class="line">    ),</span><br><span class="line">  ],</span><br><span class="line">),</span><br></pre></td></tr></table></figure><h3 id="导航操作-命名、视图对象"><a href="#导航操作-命名、视图对象" class="headerlink" title="导航操作 命名、视图对象"></a>导航操作 命名、视图对象</h3><ul><li>lib/pages/home/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">ListTile(</span><br><span class="line">  title: Text(<span class="string">"导航-命名路由 home &gt; list"</span>),</span><br><span class="line">  subtitle: Text(<span class="string">'Get.toNamed("/home/list")'</span>),</span><br><span class="line">  onTap: () =&gt; Get.toNamed(<span class="string">"/home/list"</span>),</span><br><span class="line">),</span><br><span class="line">ListTile(</span><br><span class="line">  title: Text(<span class="string">"导航-命名路由 home &gt; list &gt; detail"</span>),</span><br><span class="line">  subtitle: Text(<span class="string">'Get.toNamed("/home/list/detail")'</span>),</span><br><span class="line">  onTap: () =&gt; Get.toNamed(<span class="string">"/home/list/detail"</span>),</span><br><span class="line">),</span><br><span class="line">ListTile(</span><br><span class="line">  title: Text(<span class="string">"导航-类对象"</span>),</span><br><span class="line">  subtitle: Text(<span class="string">"Get.to(DetailView())"</span>),</span><br><span class="line">  onTap: () =&gt; Get.to(DetailView()),</span><br><span class="line">),</span><br></pre></td></tr></table></figure><h3 id="导航-清除上一个"><a href="#导航-清除上一个" class="headerlink" title="导航-清除上一个"></a>导航-清除上一个</h3><ul><li>lib/pages/home/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ListTile(</span><br><span class="line">  title: Text(<span class="string">"导航-清除上一个"</span>),</span><br><span class="line">  subtitle: Text(<span class="string">"Get.off(DetailView())"</span>),</span><br><span class="line">  onTap: () =&gt; Get.off(DetailView()),</span><br><span class="line">),</span><br></pre></td></tr></table></figure><h3 id="导航-清除所有"><a href="#导航-清除所有" class="headerlink" title="导航-清除所有"></a>导航-清除所有</h3><ul><li>lib/pages/home/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ListTile(</span><br><span class="line">  title: Text(<span class="string">"导航-清除所有"</span>),</span><br><span class="line">  subtitle: Text(<span class="string">"Get.offAll(DetailView())"</span>),</span><br><span class="line">  onTap: () =&gt; Get.offAll(DetailView()),</span><br><span class="line">),</span><br></pre></td></tr></table></figure><h3 id="导航-arguments-传值-返回值"><a href="#导航-arguments-传值-返回值" class="headerlink" title="导航-arguments 传值+返回值"></a>导航-arguments 传值+返回值</h3><ul><li>lib/pages/home/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ListTile(</span><br><span class="line">  title: Text(<span class="string">"导航-arguments传值+返回值"</span>),</span><br><span class="line">  subtitle: Text(</span><br><span class="line">      <span class="string">'Get.toNamed("/home/list/detail", arguments: &#123;"id": 999&#125;)'</span>),</span><br><span class="line">  onTap: () <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> result = <span class="keyword">await</span> Get.toNamed(<span class="string">"/home/list/detail"</span>,</span><br><span class="line">        arguments: &#123;<span class="string">"id"</span>: <span class="number">999</span>&#125;);</span><br><span class="line">    Get.snackbar(<span class="string">"返回值"</span>, <span class="string">"success -&gt; "</span> + result[<span class="string">"success"</span>].toString());</span><br><span class="line">  &#125;,</span><br><span class="line">),</span><br></pre></td></tr></table></figure><ul><li>lib/pages/list_detail/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">_buildBackListTileRow(<span class="built_in">Map</span>? val) &#123;</span><br><span class="line">  <span class="keyword">return</span> val == <span class="keyword">null</span></span><br><span class="line">      ? Container()</span><br><span class="line">      : ListTile(</span><br><span class="line">          title: Text(<span class="string">"传值 id = "</span> + val[<span class="string">"id"</span>].toString()),</span><br><span class="line">          subtitle: Text(<span class="string">'Get.back(result: &#123;"success": true&#125;'</span>),</span><br><span class="line">          onTap: () =&gt; Get.back(result: &#123;<span class="string">"success"</span>: <span class="keyword">true</span>&#125;),</span><br><span class="line">        );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@override</span></span><br><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">  <span class="keyword">final</span> details = Get.arguments <span class="keyword">as</span> <span class="built_in">Map</span>;</span><br><span class="line">  <span class="keyword">final</span> parameters = Get.parameters;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> Scaffold(</span><br><span class="line">    appBar: AppBar(</span><br><span class="line">      title: Text(<span class="string">"详情页"</span>),</span><br><span class="line">    ),</span><br><span class="line">    body: ListView(</span><br><span class="line">      children: [</span><br><span class="line">        ListTile(</span><br><span class="line">          title: Text(<span class="string">"导航-返回"</span>),</span><br><span class="line">          subtitle: Text(<span class="string">'Get.back()'</span>),</span><br><span class="line">          onTap: () =&gt; Get.back(),</span><br><span class="line">        ),</span><br><span class="line">        _buildBackListTileRow(details),</span><br><span class="line">        _buildBackListTileRow(parameters),</span><br><span class="line">      ],</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="导航-parameters-传值-返回值"><a href="#导航-parameters-传值-返回值" class="headerlink" title="导航-parameters 传值+返回值"></a>导航-parameters 传值+返回值</h3><ul><li>lib/pages/home/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ListTile(</span><br><span class="line">  title: Text(<span class="string">"导航-parameters传值+返回值"</span>),</span><br><span class="line">  subtitle: Text(<span class="string">'Get.toNamed("/home/list/detail?id=666")'</span>),</span><br><span class="line">  onTap: () <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> result = <span class="keyword">await</span> Get.toNamed(<span class="string">"/home/list/detail?id=666"</span>);</span><br><span class="line">    Get.snackbar(<span class="string">"返回值"</span>, <span class="string">"success -&gt; "</span> + result[<span class="string">"success"</span>].toString());</span><br><span class="line">  &#125;,</span><br><span class="line">),</span><br></pre></td></tr></table></figure><ul><li>lib/pages/list_detail/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@override</span></span><br><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">  <span class="keyword">final</span> parameters = Get.parameters;</span><br></pre></td></tr></table></figure><h3 id="导航-参数传值-返回值"><a href="#导航-参数传值-返回值" class="headerlink" title="导航-参数传值+返回值"></a>导航-参数传值+返回值</h3><ul><li>lib/common/routes/app_routes.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> Detail_ID = <span class="string">'/detail/:id'</span>;</span><br></pre></td></tr></table></figure><ul><li>lib/common/routes/app_pages.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">GetPage(</span><br><span class="line">  name: AppRoutes.Detail_ID,</span><br><span class="line">  page: () =&gt; DetailView(),</span><br><span class="line">),</span><br></pre></td></tr></table></figure><ul><li>lib/pages/home/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ListTile(</span><br><span class="line">  title: Text(<span class="string">"导航-参数传值+返回值"</span>),</span><br><span class="line">  subtitle: Text(<span class="string">'Get.toNamed("/home/list/detail/777")'</span>),</span><br><span class="line">  onTap: () <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> result = <span class="keyword">await</span> Get.toNamed(<span class="string">"/home/list/detail/777"</span>);</span><br><span class="line">    Get.snackbar(<span class="string">"返回值"</span>, <span class="string">"success -&gt; "</span> + result[<span class="string">"success"</span>].toString());</span><br><span class="line">  &#125;,</span><br><span class="line">),</span><br></pre></td></tr></table></figure><h3 id="导航-not-found"><a href="#导航-not-found" class="headerlink" title="导航-not found"></a>导航-not found</h3><ul><li>lib/pages/notfound/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NotfoundView</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> NotfoundView(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">"路由没有找到"</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: ListTile(</span><br><span class="line">        title: Text(<span class="string">"返回首页"</span>),</span><br><span class="line">        subtitle: Text(<span class="string">'Get.offAllNamed(AppRoutes.Home)'</span>),</span><br><span class="line">        onTap: () =&gt; Get.offAllNamed(AppRoutes.Home),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>lib/common/routes/app_routes.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> NotFound = <span class="string">'/notfound'</span>;</span><br></pre></td></tr></table></figure><ul><li>lib/common/routes/app_pages.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> unknownRoute = GetPage(</span><br><span class="line">  name: AppRoutes.NotFound,</span><br><span class="line">  page: () =&gt; NotfoundView(),</span><br><span class="line">);</span><br></pre></td></tr></table></figure><ul><li>lib/main.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@override</span></span><br><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">  <span class="keyword">return</span> GetMaterialApp(</span><br><span class="line">    ...</span><br><span class="line">    unknownRoute: AppPages.unknownRoute,</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="导航-中间件-认证-Auth"><a href="#导航-中间件-认证-Auth" class="headerlink" title="导航-中间件-认证 Auth"></a>导航-中间件-认证 Auth</h3><ul><li>lib/pages/login/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LoginView</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> LoginView(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">"登录"</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: ListTile(</span><br><span class="line">        title: Text(<span class="string">"返回首页"</span>),</span><br><span class="line">        subtitle: Text(<span class="string">'Get.offAllNamed(AppRoutes.Home)'</span>),</span><br><span class="line">        onTap: () =&gt; Get.offAllNamed(AppRoutes.Home),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>lib/pages/my/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyView</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> MyView(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">"我的"</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: ListTile(</span><br><span class="line">        title: Text(<span class="string">"返回首页"</span>),</span><br><span class="line">        subtitle: Text(<span class="string">'Get.offAllNamed(AppRoutes.Home)'</span>),</span><br><span class="line">        onTap: () =&gt; Get.offAllNamed(AppRoutes.Home),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>lib/common/routes/app_routes.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> Login = <span class="string">'/login'</span>;</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> My = <span class="string">'/my'</span>;</span><br></pre></td></tr></table></figure><ul><li>lib/common/middleware/router_auth.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RouteAuthMiddleware</span> <span class="keyword">extends</span> <span class="title">GetMiddleware</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">int</span> priority = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  RouteAuthMiddleware(&#123;required <span class="keyword">this</span>.priority&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  RouteSettings? redirect(<span class="built_in">String</span> route) &#123;</span><br><span class="line">    Future.delayed(<span class="built_in">Duration</span>(seconds: <span class="number">1</span>), () =&gt; Get.snackbar(<span class="string">"提示"</span>, <span class="string">"请先登录APP"</span>));</span><br><span class="line">    <span class="keyword">return</span> RouteSettings(name: AppRoutes.Login);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>lib/common/routes/app_pages.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 白名单</span></span><br><span class="line">GetPage(</span><br><span class="line">  name: AppRoutes.Login,</span><br><span class="line">  page: () =&gt; LoginView(),</span><br><span class="line">),</span><br><span class="line"></span><br><span class="line">GetPage(</span><br><span class="line">  name: AppRoutes.My,</span><br><span class="line">  page: () =&gt; MyView(),</span><br><span class="line">  middlewares: [</span><br><span class="line">    RouteAuthMiddleware(priority: <span class="number">1</span>),</span><br><span class="line">  ],</span><br><span class="line">),</span><br></pre></td></tr></table></figure><ul><li>lib/pages/home/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ListTile(</span><br><span class="line">  title: Text(<span class="string">"导航-中间件-认证Auth"</span>),</span><br><span class="line">  subtitle: Text(<span class="string">'Get.toNamed(AppRoutes.My)'</span>),</span><br><span class="line">  onTap: () =&gt; Get.toNamed(AppRoutes.My),</span><br><span class="line">),</span><br></pre></td></tr></table></figure><h3 id="Transition-转场动画"><a href="#Transition-转场动画" class="headerlink" title="Transition 转场动画"></a>Transition 转场动画</h3><ul><li>lib/common/routes/app_pages.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">GetPage(</span><br><span class="line">  name: AppRoutes.Detail_ID,</span><br><span class="line">  page: () =&gt; DetailView(),</span><br><span class="line">  transition: Transition.downToUp,</span><br><span class="line">),</span><br></pre></td></tr></table></figure><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p><p><a href="https://ducafecat.gitee.io" target="_blank" rel="noopener">https://ducafecat.gitee.io</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="Flutter Getx" scheme="https://blog.ducafecat.tech/categories/Flutter-Getx/"/>
    
    
      <category term="flutter getx" scheme="https://blog.ducafecat.tech/tags/flutter-getx/"/>
    
  </entry>
  
  <entry>
    <title>Flutter Bloc 03 - 基础对象 同步、异步 await yield 操作</title>
    <link href="https://blog.ducafecat.tech/2021/03/16/flutter-bloc/flutter-bloc-03-sync-async-await-yield/"/>
    <id>https://blog.ducafecat.tech/2021/03/16/flutter-bloc/flutter-bloc-03-sync-async-await-yield/</id>
    <published>2021-03-15T16:00:00.000Z</published>
    <updated>2021-03-23T00:16:25.159Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-03-16-15-41-57.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>同步、异步 <code>sync</code> <code>async</code></li><li>关键字 <code>await</code> <code>yield</code></li><li>加上 <code>*</code> 的区别</li></ul><h2 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h2><p><a href="https://www.bilibili.com/video/BV1JZ4y1w7hX/" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1JZ4y1w7hX/</a></p><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/ducafecat/flutter-bloc-learn/tree/master/sync-async" target="_blank" rel="noopener">https://github.com/ducafecat/flutter-bloc-learn/tree/master/sync-async</a></p><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><h2 id="在-BLOC-中常见-yield-yield-Stream"><a href="#在-BLOC-中常见-yield-yield-Stream" class="headerlink" title="在 BLOC 中常见 yield yield* Stream"></a>在 BLOC 中常见 yield yield* Stream<t></t></h2><p>计算器 <a href="https://github.com/ducafecat/flutter-bloc-learn/tree/master/ducafecat_bloc_start_example" target="_blank" rel="noopener">Bloc 代码</a></p><p>我们可以发现在 bloc 模块中，非常多 <code>yield*</code> <code>yield</code> <code>async*</code> ，如何正确使用还是很重要的，所以这篇文章把同步、异步的对应的操作符都整理出来。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CounterBloc</span> <span class="keyword">extends</span> <span class="title">Bloc</span>&lt;<span class="title">CounterEvent</span>, <span class="title">CounterState</span>&gt; </span>&#123;</span><br><span class="line">  CounterBloc() : <span class="keyword">super</span>(CounterInitial(<span class="number">0</span>));</span><br><span class="line"></span><br><span class="line">  <span class="built_in">int</span> counterNum = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Stream&lt;CounterState&gt; mapEventToState(</span><br><span class="line">    CounterEvent event,</span><br><span class="line">  ) <span class="keyword">async</span>* &#123;</span><br><span class="line">    <span class="keyword">if</span> (event <span class="keyword">is</span> CounterIncrementEvent) &#123;</span><br><span class="line">      <span class="keyword">yield</span>* _mapIncrementEventToState(event);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (event <span class="keyword">is</span> CounterSubductionEvent) &#123;</span><br><span class="line">      <span class="keyword">yield</span>* _mapSubductionEventToState(event);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Stream&lt;CounterState&gt; _mapIncrementEventToState(</span><br><span class="line">      CounterIncrementEvent event) <span class="keyword">async</span>* &#123;</span><br><span class="line">    <span class="keyword">this</span>.counterNum += <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">yield</span> CounterChange(<span class="keyword">this</span>.counterNum);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Stream&lt;CounterState&gt; _mapSubductionEventToState(</span><br><span class="line">      CounterSubductionEvent event) <span class="keyword">async</span>* &#123;</span><br><span class="line">    <span class="keyword">this</span>.counterNum -= <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">yield</span> CounterChange(<span class="keyword">this</span>.counterNum);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="同步-sync-yield"><a href="#同步-sync-yield" class="headerlink" title="同步 sync* + yield"></a>同步 sync* + yield</h3><p>同步 sync 后返回 Iterable<t> 可序列化对象</t></p><ul><li>代码</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">main() &#123;</span><br><span class="line">  getList(<span class="number">10</span>).forEach(<span class="built_in">print</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Iterable</span>&lt;<span class="built_in">int</span>&gt; getList(<span class="built_in">int</span> count) <span class="keyword">sync</span>* &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">    <span class="keyword">yield</span> i;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>输出</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">0</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">Exited</span><br></pre></td></tr></table></figure><ul><li>我如果把 <code>sync</code> 的 <code>*</code> 去掉,编辑器会提示这是固定格式。</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-03-23-08-05-28.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="同步-sync-yield-1"><a href="#同步-sync-yield-1" class="headerlink" title="同步 sync + yield"></a>同步 sync<em> + yield</em></h3><p>带上 * 因为 yield 返回对象是 Iterable<t></t></p><ul><li>代码</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">main() &#123;</span><br><span class="line">  getList(<span class="number">10</span>).forEach(<span class="built_in">print</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Iterable</span>&lt;<span class="built_in">int</span>&gt; getList(<span class="built_in">int</span> count) <span class="keyword">sync</span>* &#123;</span><br><span class="line">  <span class="keyword">yield</span>* generate(count);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Iterable</span>&lt;<span class="built_in">int</span>&gt; generate(<span class="built_in">int</span> count) <span class="keyword">sync</span>* &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">    <span class="keyword">yield</span> i;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>输出</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">0</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">Exited</span><br></pre></td></tr></table></figure><ul><li>我把 <code>yield</code> 的 <code>*</code> 去掉后，提示返回 <code>Iterable&lt;T&gt;</code> 必须带上 <code>*</code></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-03-23-08-09-58.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="异步-async-await"><a href="#异步-async-await" class="headerlink" title="异步 async + await"></a>异步 async + await</h3><p>Future + async + await 经典配合</p><p>常见场景，等待异步完成，比如拉取数据、 IO 操作</p><ul><li>代码</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">main() &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">"start.........."</span>);</span><br><span class="line">  getList(<span class="number">10</span>).then(<span class="built_in">print</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Future&lt;<span class="built_in">int</span>&gt; getList(<span class="built_in">int</span> count) <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="keyword">await</span> sleep();</span><br><span class="line">  <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">    <span class="keyword">return</span> i;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">99</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Future sleep() <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> Future.delayed(<span class="built_in">Duration</span>(seconds: <span class="number">3</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>输出</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">start..........</span><br><span class="line">0</span><br><span class="line">Exited</span><br></pre></td></tr></table></figure><p>这里就直接返回了, 没有后续的任何操作。</p><h3 id="异步-async-yield"><a href="#异步-async-yield" class="headerlink" title="异步 async* + yield"></a>异步 async* + yield</h3><p>带上 <code>*</code> 后，yield 返回 Stream<t> 对象</t></p><p>接收方用 listen(…)</p><ul><li>代码</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">main() &#123;</span><br><span class="line">  getList(<span class="number">10</span>).listen(<span class="built_in">print</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Stream&lt;<span class="built_in">int</span>&gt; getList(<span class="built_in">int</span> count) <span class="keyword">async</span>* &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">    <span class="keyword">await</span> Future.delayed(<span class="built_in">Duration</span>(seconds: <span class="number">1</span>));</span><br><span class="line">    <span class="keyword">yield</span> i;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>输出</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">0</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">Exited</span><br></pre></td></tr></table></figure><ul><li>yield 必须和 <code>async*</code> 或 <code>sync*</code> 配套使用</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-03-23-08-14-38.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="异步-async-yield-1"><a href="#异步-async-yield-1" class="headerlink" title="异步 async + yield"></a>异步 async<em> + yield</em></h3><p>yield* 后返回的是另一个 Stream<t> 对象</t></p><ul><li>代码</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">main() &#123;</span><br><span class="line">  getList(<span class="number">10</span>).listen(<span class="built_in">print</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Stream&lt;<span class="built_in">int</span>&gt; getList(<span class="built_in">int</span> count) <span class="keyword">async</span>* &#123;</span><br><span class="line">  <span class="keyword">yield</span>* generate(count);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Stream&lt;<span class="built_in">int</span>&gt; generate(<span class="built_in">int</span> count) <span class="keyword">async</span>* &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">    <span class="keyword">await</span> Future.delayed(<span class="built_in">Duration</span>(seconds: <span class="number">1</span>));</span><br><span class="line">    <span class="keyword">yield</span> i;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>输出</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">0</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">Exited</span><br></pre></td></tr></table></figure><ul><li>返回 <code>Stream&lt;T&gt;</code> 类型必须是用 <code>yield*</code> 的方式</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-03-23-08-16-23.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li><hr></li></ul><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p><p><a href="https://ducafecat.gitee.io" target="_blank" rel="noopener">https://ducafecat.gitee.io</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="Flutter Bloc" scheme="https://blog.ducafecat.tech/categories/Flutter-Bloc/"/>
    
    
      <category term="flutter bloc" scheme="https://blog.ducafecat.tech/tags/flutter-bloc/"/>
    
  </entry>
  
  <entry>
    <title>2021 关于 Flutter v2 我整理了16个重要特性</title>
    <link href="https://blog.ducafecat.tech/2021/03/08/flutter-daily/flutter-daily-2021-flutter2-top-engage/"/>
    <id>https://blog.ducafecat.tech/2021/03/08/flutter-daily/flutter-daily-2021-flutter2-top-engage/</id>
    <published>2021-03-07T16:00:00.000Z</published>
    <updated>2021-03-08T14:14:31.855Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-03-08-17-43-31.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="谷歌开发者官文"><a href="#谷歌开发者官文" class="headerlink" title="谷歌开发者官文"></a>谷歌开发者官文</h2><p><a href="https://mp.weixin.qq.com/s/EzS3dtpZB_i9p358qqlBpg" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/EzS3dtpZB_i9p358qqlBpg</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-03-08-17-41-36.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="7-大平台-gt-windows、macos、linux、web、embedded、ios、android"><a href="#7-大平台-gt-windows、macos、linux、web、embedded、ios、android" class="headerlink" title="7 大平台 -&gt; windows、macos、linux、web、embedded、ios、android"></a>7 大平台 -&gt; windows、macos、linux、web、embedded、ios、android</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-03-08-09-43-33.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-03-08-11-24-37.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li><a href="https://flutter.gskinner.com/" target="_blank" rel="noopener">https://flutter.gskinner.com/</a></li><li><a href="https://github.com/gskinnerTeam/flutter-folio" target="_blank" rel="noopener">https://github.com/gskinnerTeam/flutter-folio</a></li></ul><h2 id="web-平台优化、进入稳定版"><a href="#web-平台优化、进入稳定版" class="headerlink" title="web 平台优化、进入稳定版"></a>web 平台优化、进入稳定版</h2><ul><li><p>3 个方向</p><ul><li>pwa: 缓存、push 推送服务、桌面快捷、消息提示</li><li>spa: 单页程序类似 vue rect</li><li>expanding mobile: 快速迁移 app、复用代码</li></ul></li><li><p>irobot 构建基于 flutter</p></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-03-08-11-30-53.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p><a href="https://edu.irobot.com/the-latest/building-a-coding-experience-for-all" target="_blank" rel="noopener">https://edu.irobot.com/the-latest/building-a-coding-experience-for-all</a></p><ul><li>技术架构</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-03-08-11-31-16.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>2D 3D 渲染 WebGL Skia WebAssembly Canvas</p><ul><li>稳定的版本</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-03-08-11-33-05.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li><p>性能</p><ul><li><p>HTML renderer: HTML 渲染器: Uses a combination of HTML elements, CSS, Canvas elements, and SVG elements. This renderer has a smaller download size. 使用 HTML 元素、 CSS、 Canvas 元素和 SVG 元素的组合</p></li><li><p>CanvasKit renderer: CanvasKit 渲染器: This renderer is fully consistent with Flutter mobile and desktop, has faster performance with higher widget density, but adds about 2MB in download size.</p></li></ul></li><li><p>试水项目</p><ul><li><p>编辑器<br><a href="https://rive.app/" target="_blank" rel="noopener">https://rive.app/</a></p></li><li><p>动画<br><a href="https://flutterplasma.dev/" target="_blank" rel="noopener">https://flutterplasma.dev/</a></p></li><li><p>invoice<br><a href="https://www.invoiceninja.com/" target="_blank" rel="noopener">https://www.invoiceninja.com/</a></p></li></ul></li></ul><h2 id="canonical-支持"><a href="#canonical-支持" class="headerlink" title="canonical 支持"></a>canonical 支持</h2><p><a href="https://medium.com/flutter/announcing-flutter-linux-alpha-with-canonical-19eb824590a9" target="_blank" rel="noopener">https://medium.com/flutter/announcing-flutter-linux-alpha-with-canonical-19eb824590a9</a></p><p><a href="https://canonical.com/" target="_blank" rel="noopener">https://canonical.com/</a></p><blockquote><p>Canonical 公司是一个私营公司，由南非的企业家马克·沙特尔沃思创建，主要为了促进开源软件项目。 Canonical 在马恩岛登记注册，其雇员分布在世界各地，其主要办事处在伦敦，在蒙特利尔也有办事处。Canonical 公司支持并创建了几个项目，主要都是自由/开源软件（FOSS）或是一些旨在改善自由软件开发者和贡献者的工具。</p></blockquote><ul><li><p>why canonical 大力推 flutter !，主要以下几点</p><ul><li>快速增长的 flutter 应用</li><li>多平台支持</li><li>设备优化的好</li><li>丰富的组件库</li><li>IDE 环境成熟 Visual Studio Code, Android Studio, and IntelliJ</li></ul></li><li><p>简易安装</p></li></ul><p><a href="https://snapcraft.io/flutter" target="_blank" rel="noopener">https://snapcraft.io/flutter</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ snap install --classic flutter</span><br><span class="line">$ snap install --classic code</span><br><span class="line">$ code --install-extension dart-code.flutter</span><br></pre></td></tr></table></figure><ul><li>快速模板</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-03-08-13-42-11.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ flutter channel dev</span><br><span class="line">$ flutter upgrade</span><br><span class="line">$ flutter config --enable-linux-desktop</span><br><span class="line"></span><br><span class="line">$ flutter create counter</span><br><span class="line">$ cd counter</span><br><span class="line">$ flutter run -d linux</span><br></pre></td></tr></table></figure><p>现有项目升级</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cd my_flutter_app</span><br><span class="line">$ flutter create .</span><br></pre></td></tr></table></figure><ul><li><p>代码示例</p><ul><li><a href="https://github.com/flutter/samples/tree/master/experimental/desktop_photo_search" target="_blank" rel="noopener">https://github.com/flutter/samples/tree/master/experimental/desktop_photo_search</a></li></ul><p><img src="2021-03-08-13-43-29.png" alt=""></p><ul><li><a href="https://github.com/flutter/gallery" target="_blank" rel="noopener">https://github.com/flutter/gallery</a></li></ul><p><img src="2021-03-08-13-44-50.png" alt=""></p></li><li><p>教程 Write a Flutter desktop application</p></li></ul><p><a href="https://codelabs.developers.google.com/codelabs/flutter-github-graphql-client/index.html#0" target="_blank" rel="noopener">https://codelabs.developers.google.com/codelabs/flutter-github-graphql-client/index.html#0</a></p><h2 id="组件库升级、对-ios-支持加强"><a href="#组件库升级、对-ios-支持加强" class="headerlink" title="组件库升级、对 ios 支持加强"></a>组件库升级、对 ios 支持加强</h2><ul><li><p>新增 iOS 功能</p><ul><li><p>CupertinoSearchTextField<br><a href="https://api.flutter-io.cn/flutter/cupertino/CupertinoSearchTextField-class.html" target="_blank" rel="noopener">https://api.flutter-io.cn/flutter/cupertino/CupertinoSearchTextField-class.html</a><br><img src="2021-03-08-13-47-15.png" alt=""></p></li><li><p>CupertinoFormSection、CupertinoFormRow 和 CupertinoTextFormFieldRow<br><a href="https://api.flutter.cn/flutter/cupertino/CupertinoFormSection-class.html" target="_blank" rel="noopener">https://api.flutter.cn/flutter/cupertino/CupertinoFormSection-class.html</a><br><a href="https://api.flutter.cn/flutter/cupertino/CupertinoFormRow-class.html" target="_blank" rel="noopener">https://api.flutter.cn/flutter/cupertino/CupertinoFormRow-class.html</a><br><a href="https://api.flutter.cn/flutter/cupertino/CupertinoTextFormFieldRow-class.html" target="_blank" rel="noopener">https://api.flutter.cn/flutter/cupertino/CupertinoTextFormFieldRow-class.html</a><br><img src="2021-03-08-13-47-20.png" alt=""></p></li><li><p>整体性能优化<br><a href="https://github.com/flutter/flutter/issues/60267#issuecomment-762786388" target="_blank" rel="noopener">https://github.com/flutter/flutter/issues/60267#issuecomment-762786388</a></p></li></ul></li><li><p>新增 Widget: Autocomplete 和 ScaffoldMessenger</p><ul><li><p>AutocompleteCore<br><a href="https://github.com/flutter/flutter/pull/62927" target="_blank" rel="noopener">https://github.com/flutter/flutter/pull/62927</a><br><img src="2021-03-08-13-48-11.png" alt=""></p></li><li><p>ScaffoldMessenger<br><a href="https://github.com/flutter/flutter/pull/64101" target="_blank" rel="noopener">https://github.com/flutter/flutter/pull/64101</a><br><img src="2021-03-08-13-49-36.png" alt=""></p></li></ul></li></ul><h2 id="Flutter-for-Surface-Duo-amp-折叠屏"><a href="#Flutter-for-Surface-Duo-amp-折叠屏" class="headerlink" title="Flutter for Surface Duo &amp; 折叠屏"></a>Flutter for Surface Duo &amp; 折叠屏</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-03-08-17-38-42.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-03-08-17-39-36.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li><p><a href="https://docs.microsoft.com/zh-cn/dual-screen/flutter/" target="_blank" rel="noopener">https://docs.microsoft.com/zh-cn/dual-screen/flutter/</a></p></li><li><p><a href="https://docs.microsoft.com/zh-cn/dual-screen/flutter/mediaquery" target="_blank" rel="noopener">https://docs.microsoft.com/zh-cn/dual-screen/flutter/mediaquery</a></p></li></ul><h2 id="混合编程"><a href="#混合编程" class="headerlink" title="混合编程"></a>混合编程</h2><p><a href="https://flutter.cn/docs/development/add-to-app" target="_blank" rel="noopener">https://flutter.cn/docs/development/add-to-app</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-03-08-13-51-06.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>过去，额外 Flutter 实例的内存占用量与第一个 Flutter 实例相同。在 Flutter 2 中，我们将创建额外 Flutter 引擎的静态内存占用量降低了约 99%，使每个实例的占用量大约为 180kB。</p><h2 id="Dart-Null-Safety"><a href="#Dart-Null-Safety" class="headerlink" title="Dart Null Safety"></a>Dart Null Safety</h2><p>Dart 是一种类型安全的语言，这意味着当开发者获取某种类型的变量时，编译器可以保证它是该类型，但是类型安全本身不能保证变量不是 null。</p><p>Null errors 非常常见的问题，在 GitHub 上 可以搜索到成千上万由于 null 导致 Dart 代码出现异常的问题，甚至有成千上万的 commits 试图解决这些问题。</p><ul><li><a href="https://dartpad.dev/" target="_blank" rel="noopener">https://dartpad.dev/</a></li><li><a href="https://nullsafety.dartpad.dev/" target="_blank" rel="noopener">https://nullsafety.dartpad.dev/</a></li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  ps(<span class="keyword">null</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> ps(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; files) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> file <span class="keyword">in</span> files) &#123;</span><br><span class="line">    <span class="built_in">print</span>(file.isEmpty());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>最后，个人的额外提醒，目前在根目录的 analysis_options.yaml 添加如下配置就可以开启 null safety，另外 Flutter 需要 dart sdk 2.9 。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">analyzer:</span><br><span class="line"> enable-experiment:</span><br><span class="line"> - non-nullable</span><br></pre></td></tr></table></figure><h2 id="flutter-fix"><a href="#flutter-fix" class="headerlink" title="flutter fix"></a>flutter fix</h2><ul><li>统计</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dart fix --dry-run</span><br></pre></td></tr></table></figure><ul><li>应用</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dart fix --apply</span><br></pre></td></tr></table></figure><h2 id="flutter-DevTools-开发工具升级"><a href="#flutter-DevTools-开发工具升级" class="headerlink" title="flutter DevTools 开发工具升级"></a>flutter DevTools 开发工具升级</h2><ul><li>性能监控</li></ul><p><a href="https://flutter.dev/docs/perf/rendering/ui-performance" target="_blank" rel="noopener">https://flutter.dev/docs/perf/rendering/ui-performance</a></p><p>.vscode/launch.json</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  // Use IntelliSense to learn about possible attributes.</span><br><span class="line">  // Hover to view descriptions of existing attributes.</span><br><span class="line">  // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387</span><br><span class="line">  "version": "0.2.0",</span><br><span class="line">  "configurations": [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"name"</span>: <span class="string">"flutter_learn_news-1.0.15"</span>,</span><br><span class="line">      <span class="attr">"request"</span>: <span class="string">"launch"</span>,</span><br><span class="line">      <span class="attr">"type"</span>: <span class="string">"dart"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"name"</span>: <span class="string">"profile"</span>,</span><br><span class="line">      <span class="attr">"request"</span>: <span class="string">"launch"</span>,</span><br><span class="line">      <span class="attr">"type"</span>: <span class="string">"dart"</span>,</span><br><span class="line">      <span class="attr">"flutterMode"</span>: <span class="string">"profile"</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-03-08-15-22-54.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>Invert Oversized Images</li></ul><p>DevTools 的另一个新功能是能够轻松发现所显示的分辨率低于其实际分辨率的图像，这有助于追踪应用过大和内存占用过多等情况。若要启用此功能，请在 Flutter Inspector 中启用 Invert Oversized Images。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-03-08-15-26-36.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-03-08-15-26-42.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>弹性布局</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-03-08-15-27-44.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="Android-Studio-IntelliJ-扩展"><a href="#Android-Studio-IntelliJ-扩展" class="headerlink" title="Android Studio/IntelliJ 扩展"></a>Android Studio/IntelliJ 扩展</h2><p>我们也为 IntelliJ 系列 IDE 的 Flutter 插件添加了一些适用于 Flutter 2 的新功能。首先，我们在其中新增了一个项目向导，该向导与 IntelliJ 中的新向导风格一致。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-03-08-15-28-13.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-03-08-15-28-19.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="Visual-Studio-Code-扩展"><a href="#Visual-Studio-Code-扩展" class="headerlink" title="Visual Studio Code 扩展"></a>Visual Studio Code 扩展</h2><p>适用于 Visual Studio Code 的 Flutter 扩展也针对 Flutter 2 进行了优化，我们首先引入了一些测试增强功能，例如重新运行失败测试的能力。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-03-08-15-29-10.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>经过两年的逐步发展，对 Dart 的 LSP (语言服务器协议) 支持已经成为在 Flutter 扩展中将 Dart 分析器集成到 Visual Studio Code 中的默认方式。LSP 支持为 Flutter 开发带来了许多改进，包括在当前的 Dart 文件中应用特定的所有修复，以及能够补全代码以生成完整函数调用 (包括括号和所需参数) 的能力。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-03-08-15-29-44.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-03-08-15-29-49.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>LSP 支持不仅限于 Dart，它还支持 pubspec.yaml 及 analysis_options.yaml 文件中的代码补全。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-03-08-15-30-05.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="sentry-升级对-flutter-的支持"><a href="#sentry-升级对-flutter-的支持" class="headerlink" title="sentry 升级对 flutter 的支持"></a>sentry 升级对 flutter 的支持</h2><p><a href="https://docs.sentry.io/platforms/flutter/" target="_blank" rel="noopener">https://docs.sentry.io/platforms/flutter/</a></p><p>整合了对设备端错误的收集</p><h2 id="upgraded-firebase-plugins-for-flutter"><a href="#upgraded-firebase-plugins-for-flutter" class="headerlink" title="upgraded firebase plugins for flutter"></a>upgraded firebase plugins for flutter</h2><p><a href="https://firebase.flutter.dev/" target="_blank" rel="noopener">https://firebase.flutter.dev/</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-03-08-09-50-52.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="Flutter-Community-Plus-Plugins"><a href="#Flutter-Community-Plus-Plugins" class="headerlink" title="Flutter Community Plus Plugins"></a>Flutter Community Plus Plugins</h2><p><a href="https://plus.fluttercommunity.dev/" target="_blank" rel="noopener">https://plus.fluttercommunity.dev/</a></p><h2 id="google-mobile-ads-for-flutter"><a href="#google-mobile-ads-for-flutter" class="headerlink" title="google mobile ads for flutter"></a>google mobile ads for flutter</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-03-08-09-51-39.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="DartPad-升级到支持-Flutter-2"><a href="#DartPad-升级到支持-Flutter-2" class="headerlink" title="DartPad 升级到支持 Flutter 2"></a>DartPad 升级到支持 Flutter 2</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-03-08-15-30-38.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p><a href="https://dartpad.dev/" target="_blank" rel="noopener">https://dartpad.dev/</a></p><h2 id="配置-flutter-2"><a href="#配置-flutter-2" class="headerlink" title="配置 flutter 2"></a>配置 flutter 2</h2><ul><li>下载 Dev channel (macOS)</li></ul><p><a href="https://flutter.dev/docs/development/tools/sdk/releases?tab=macos" target="_blank" rel="noopener">https://flutter.dev/docs/development/tools/sdk/releases?tab=macos</a></p><ul><li>fvm 切换</li></ul><p><a href="https://github.com/leoafarias/fvm" target="_blank" rel="noopener">https://github.com/leoafarias/fvm</a></p><p>复制 sdk 到 <code>/Users/{youname}/.fvm/versions</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fvm list</span><br><span class="line">fvm use 2.1.0</span><br></pre></td></tr></table></figure><ul><li>启用特性</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">flutter config --enable-macos-desktop</span><br><span class="line">flutter config --enable-windows-desktop</span><br><span class="line">flutter config --enable-linux-desktop</span><br></pre></td></tr></table></figure><ul><li>编译</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">flutter run -d windows</span><br><span class="line">flutter run -d macos</span><br><span class="line">flutter run -d linux</span><br><span class="line">flutter run -d android</span><br><span class="line">flutter run -d ios</span><br><span class="line">flutter run -d web</span><br></pre></td></tr></table></figure><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://flutter.gskinner.com/" target="_blank" rel="noopener">https://flutter.gskinner.com/</a></li><li><a href="https://github.com/gskinnerTeam/flutter-folio" target="_blank" rel="noopener">https://github.com/gskinnerTeam/flutter-folio</a></li><li><a href="https://mp.weixin.qq.com/s/EzS3dtpZB_i9p358qqlBpg" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/EzS3dtpZB_i9p358qqlBpg</a></li><li><a href="https://docs.sentry.io/platforms/flutter/" target="_blank" rel="noopener">https://docs.sentry.io/platforms/flutter/</a></li><li><a href="https://snapcraft.io/flutter" target="_blank" rel="noopener">https://snapcraft.io/flutter</a></li><li><a href="https://plus.fluttercommunity.dev/" target="_blank" rel="noopener">https://plus.fluttercommunity.dev/</a></li><li><a href="https://medium.com/flutter/flutter-web-support-hits-the-stable-milestone-d6b84e83b425" target="_blank" rel="noopener">https://medium.com/flutter/flutter-web-support-hits-the-stable-milestone-d6b84e83b425</a></li><li><a href="https://rive.app/" target="_blank" rel="noopener">https://rive.app/</a></li><li><a href="https://medium.com/flutter/announcing-flutter-linux-alpha-with-canonical-19eb824590a9" target="_blank" rel="noopener">https://medium.com/flutter/announcing-flutter-linux-alpha-with-canonical-19eb824590a9</a></li><li><a href="https://www.windowscentral.com/surface-duo" target="_blank" rel="noopener">https://www.windowscentral.com/surface-duo</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p><p><a href="https://ducafecat.gitee.io" target="_blank" rel="noopener">https://ducafecat.gitee.io</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="Flutter见闻" scheme="https://blog.ducafecat.tech/categories/Flutter%E8%A7%81%E9%97%BB/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter Bloc 02 - 基础对象 Stream 流操作</title>
    <link href="https://blog.ducafecat.tech/2021/02/20/flutter-bloc/flutter-bloc-02-stream/"/>
    <id>https://blog.ducafecat.tech/2021/02/20/flutter-bloc/flutter-bloc-02-stream/</id>
    <published>2021-02-19T16:00:00.000Z</published>
    <updated>2021-02-23T02:13:23.300Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-02-21-09-11-23.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>Stream 创建</li><li>StreamController 控制</li><li>StreamSubscription 订阅</li><li>StreamTransformer 转换</li><li>Sink、StreamSink、EventSink 修改数据</li></ul><h2 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h2><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/ducafecat/flutter-bloc-learn/tree/master/stream" target="_blank" rel="noopener">https://github.com/ducafecat/flutter-bloc-learn/tree/master/stream</a></p><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><h3 id="核心类"><a href="#核心类" class="headerlink" title="核心类"></a>核心类</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-02-22-17-26-26.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-02-22-17-34-07.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>Stream</td><td>事件流或者管道</td></tr><tr><td>StreamController</td><td>事件管理者</td></tr><tr><td>StreamSubscription</td><td>管理事件订阅，如 cacenl、pause</td></tr><tr><td>StreamSink</td><td>流 Sink 入口，提供如 add、addStream 等</td></tr><tr><td>EventSink</td><td>事件 Sink 入口</td></tr><tr><td>StreamTransformer</td><td>流转换</td></tr></tbody></table><h3 id="准备函数"><a href="#准备函数" class="headerlink" title="准备函数"></a>准备函数</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 打印流列表</span></span><br><span class="line">printStream(Stream&lt;<span class="built_in">Object</span>&gt; stream) <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="keyword">await</span> <span class="keyword">for</span> (<span class="keyword">var</span> val <span class="keyword">in</span> stream) &#123;</span><br><span class="line">    <span class="built_in">print</span>(val);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 异步函数i</span></span><br><span class="line">Future&lt;<span class="built_in">int</span>&gt; funi = Future(() &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">100</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 异步函数ii</span></span><br><span class="line">Future&lt;<span class="built_in">int</span>&gt; funii = Future(() &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">200</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="stream-创建"><a href="#stream-创建" class="headerlink" title="stream 创建"></a>stream 创建</h3><h4 id="延迟间隔"><a href="#延迟间隔" class="headerlink" title="延迟间隔"></a>延迟间隔</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">periodic() <span class="keyword">async</span> &#123;</span><br><span class="line">  Stream&lt;<span class="built_in">int</span>&gt; stream = Stream&lt;<span class="built_in">int</span>&gt;.periodic(<span class="built_in">Duration</span>(seconds: <span class="number">1</span>), (val) =&gt; val);</span><br><span class="line">  <span class="keyword">await</span> printStream(stream);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&gt;&gt;</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="number">6</span></span><br></pre></td></tr></table></figure><h4 id="futrue-数据源"><a href="#futrue-数据源" class="headerlink" title="futrue 数据源"></a>futrue 数据源</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">fromFuture() <span class="keyword">async</span> &#123;</span><br><span class="line">  Stream&lt;<span class="built_in">int</span>&gt; stream = Stream&lt;<span class="built_in">int</span>&gt;.fromFuture(funi);</span><br><span class="line">  <span class="keyword">await</span> printStream(stream);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&gt;&gt;</span><br><span class="line"></span><br><span class="line"><span class="number">100</span></span><br></pre></td></tr></table></figure><h4 id="futrues-多数据源"><a href="#futrues-多数据源" class="headerlink" title="futrues 多数据源"></a>futrues 多数据源</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">fromFutures() <span class="keyword">async</span> &#123;</span><br><span class="line">  Stream&lt;<span class="built_in">int</span>&gt; stream = Stream&lt;<span class="built_in">int</span>&gt;.fromFutures([</span><br><span class="line">    funi,</span><br><span class="line">    funii,</span><br><span class="line">  ]);</span><br><span class="line">  <span class="keyword">await</span> printStream(stream);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&gt;&gt;</span><br><span class="line"></span><br><span class="line"><span class="number">100</span></span><br><span class="line"><span class="number">200</span></span><br></pre></td></tr></table></figure><h3 id="stream-监听"><a href="#stream-监听" class="headerlink" title="stream 监听"></a>stream 监听</h3><h4 id="单对单"><a href="#单对单" class="headerlink" title="单对单"></a>单对单</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">listen() <span class="keyword">async</span> &#123;</span><br><span class="line">  Stream&lt;<span class="built_in">int</span>&gt; stream = Stream&lt;<span class="built_in">int</span>&gt;.periodic(<span class="built_in">Duration</span>(seconds: <span class="number">1</span>), (val) =&gt; val);</span><br><span class="line">  stream.listen(</span><br><span class="line">    (event) &#123;</span><br><span class="line">      <span class="built_in">print</span>(event);</span><br><span class="line">    &#125;,</span><br><span class="line">    onError: (err) &#123;</span><br><span class="line">      <span class="built_in">print</span>(err);</span><br><span class="line">    &#125;,</span><br><span class="line">    onDone: () &#123;&#125;,</span><br><span class="line">    cancelOnError: <span class="keyword">true</span>,</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&gt;&gt;</span><br><span class="line"></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="number">6</span></span><br></pre></td></tr></table></figure><h4 id="广播"><a href="#广播" class="headerlink" title="广播"></a>广播</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">boardcast() <span class="keyword">async</span> &#123;</span><br><span class="line">  Stream&lt;<span class="built_in">int</span>&gt; stream = Stream&lt;<span class="built_in">int</span>&gt;.periodic(<span class="built_in">Duration</span>(seconds: <span class="number">1</span>), (val) =&gt; val)</span><br><span class="line">      .asBroadcastStream();</span><br><span class="line">  stream.listen((event) &#123;</span><br><span class="line">    <span class="built_in">print</span>(event);</span><br><span class="line">  &#125;);</span><br><span class="line">  stream.listen((event) &#123;</span><br><span class="line">    <span class="built_in">print</span>(event);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&gt;&gt;</span><br><span class="line"></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="number">5</span></span><br></pre></td></tr></table></figure><h4 id="操作-task-skip"><a href="#操作-task-skip" class="headerlink" title="操作 task skip"></a>操作 task skip</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">opt() <span class="keyword">async</span> &#123;</span><br><span class="line">  Stream&lt;<span class="built_in">int</span>&gt; stream = Stream&lt;<span class="built_in">int</span>&gt;.fromIterable([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]);</span><br><span class="line">  stream = stream.take(<span class="number">3</span>);</span><br><span class="line">  <span class="comment">// stream = stream.skip(2);</span></span><br><span class="line"></span><br><span class="line">  stream.listen((event) &#123;</span><br><span class="line">    <span class="built_in">print</span>(event);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&gt;&gt; take(<span class="number">3</span>)</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; skip(<span class="number">2</span>)</span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">5</span></span><br></pre></td></tr></table></figure><h3 id="StreamController-流控制类"><a href="#StreamController-流控制类" class="headerlink" title="StreamController 流控制类"></a>StreamController 流控制类</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-02-22-17-40-50.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h4 id="单点"><a href="#单点" class="headerlink" title="单点"></a>单点</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">scListen() <span class="keyword">async</span> &#123;</span><br><span class="line">  StreamController sc = StreamController(</span><br><span class="line">      onListen: () =&gt; <span class="built_in">print</span>(<span class="string">"onListen"</span>),</span><br><span class="line">      onPause: () =&gt; <span class="built_in">print</span>(<span class="string">"onPause"</span>),</span><br><span class="line">      onResume: () =&gt; <span class="built_in">print</span>(<span class="string">"onResume"</span>),</span><br><span class="line">      onCancel: () =&gt; <span class="built_in">print</span>(<span class="string">"onCancel"</span>),</span><br><span class="line">      <span class="keyword">sync</span>: <span class="keyword">false</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 订阅对象</span></span><br><span class="line">  StreamSubscription ss = sc.stream.listen(((event) &#123;</span><br><span class="line">    <span class="built_in">print</span>(event);</span><br><span class="line">  &#125;));</span><br><span class="line"></span><br><span class="line">  sc.add(<span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 暂停</span></span><br><span class="line">  ss.pause();</span><br><span class="line">  <span class="comment">// 恢复</span></span><br><span class="line">  ss.resume();</span><br><span class="line">  <span class="comment">// 取消</span></span><br><span class="line">  ss.cancel();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 关闭流</span></span><br><span class="line">  sc.close();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&gt;&gt;</span><br><span class="line"></span><br><span class="line">onListen</span><br><span class="line">onPause</span><br><span class="line">onCancel</span><br></pre></td></tr></table></figure><h4 id="广播-1"><a href="#广播-1" class="headerlink" title="广播"></a>广播</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">scBroadcast() <span class="keyword">async</span> &#123;</span><br><span class="line">  StreamController sc = StreamController.broadcast();</span><br><span class="line"></span><br><span class="line">  StreamSubscription ss1 = sc.stream.listen(<span class="built_in">print</span>);</span><br><span class="line">  StreamSubscription ss2 = sc.stream.listen(<span class="built_in">print</span>);</span><br><span class="line"></span><br><span class="line">  sc.addStream(Stream.fromIterable([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]));</span><br><span class="line"></span><br><span class="line">  <span class="keyword">await</span> Future.delayed(<span class="built_in">Duration</span>(seconds: <span class="number">2</span>));</span><br><span class="line">  sc.close();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&gt;&gt;</span><br><span class="line"></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="number">5</span></span><br></pre></td></tr></table></figure><h3 id="StreamTransformer-流转换"><a href="#StreamTransformer-流转换" class="headerlink" title="StreamTransformer 流转换"></a>StreamTransformer 流转换</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2021-02-22-17-45-33.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">scTransformer() <span class="keyword">async</span> &#123;</span><br><span class="line">  StreamController sc = StreamController&lt;<span class="built_in">int</span>&gt;.broadcast();</span><br><span class="line"></span><br><span class="line">  StreamTransformer stf = StreamTransformer&lt;<span class="built_in">int</span>, <span class="built_in">double</span>&gt;.fromHandlers(</span><br><span class="line">    handleData: (<span class="built_in">int</span> data, EventSink sink) &#123;</span><br><span class="line">      sink.add((data * <span class="number">2</span>).toDouble());</span><br><span class="line">    &#125;,</span><br><span class="line">    handleError: (error, stacktrace, sink) &#123;</span><br><span class="line">      sink.addError(<span class="string">'wrong: $error'</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    handleDone: (sink) &#123;</span><br><span class="line">      sink.close();</span><br><span class="line">    &#125;,</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  Stream stream = sc.stream.transform(stf);</span><br><span class="line">  stream.listen(<span class="built_in">print</span>);</span><br><span class="line">  stream.listen(<span class="built_in">print</span>);</span><br><span class="line"></span><br><span class="line">  sc.addStream(Stream&lt;<span class="built_in">int</span>&gt;.fromIterable([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]));</span><br><span class="line"></span><br><span class="line">  <span class="keyword">await</span> Future.delayed(<span class="built_in">Duration</span>(seconds: <span class="number">2</span>));</span><br><span class="line">  sc.close();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&gt;&gt;</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">6</span></span><br><span class="line"><span class="number">6</span></span><br><span class="line"><span class="number">8</span></span><br><span class="line"><span class="number">8</span></span><br><span class="line"><span class="number">10</span></span><br><span class="line"><span class="number">10</span></span><br></pre></td></tr></table></figure><h3 id="执行"><a href="#执行" class="headerlink" title="执行"></a>执行</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'--- start ---'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// await periodic();</span></span><br><span class="line">  <span class="comment">// await fromFuture();</span></span><br><span class="line">  <span class="comment">// await fromFutures();</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// await listen();</span></span><br><span class="line">  <span class="comment">// await boardcast();</span></span><br><span class="line">  <span class="comment">// await opt();</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// await scListen();</span></span><br><span class="line">  <span class="comment">// await scBroadcast();</span></span><br><span class="line">  <span class="comment">// await scTransformer();</span></span><br><span class="line"></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'--- end ---'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p><p><a href="https://ducafecat.gitee.io" target="_blank" rel="noopener">https://ducafecat.gitee.io</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="Flutter Bloc" scheme="https://blog.ducafecat.tech/categories/Flutter-Bloc/"/>
    
    
      <category term="flutter bloc" scheme="https://blog.ducafecat.tech/tags/flutter-bloc/"/>
    
  </entry>
  
  <entry>
    <title>Flutter Bloc 01 - 快速上手 计算器</title>
    <link href="https://blog.ducafecat.tech/2020/12/08/flutter-bloc/flutter-bloc-01-counter-quick-start/"/>
    <id>https://blog.ducafecat.tech/2020/12/08/flutter-bloc/flutter-bloc-01-counter-quick-start/</id>
    <published>2020-12-07T16:00:00.000Z</published>
    <updated>2021-02-23T02:02:49.498Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-12-08-17-54-43.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>为什么要用 bloc</li><li>bloc vs provider</li><li>学习路线推荐</li><li>安装 bloc vscode 插件</li><li>配置 bloc 依赖包</li><li>编写计算器示例</li></ul><h2 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h2><p><a href="https://www.bilibili.com/video/BV1ef4y1e79o/" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1ef4y1e79o/</a></p><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/ducafecat/flutter-bloc-learn/tree/master/ducafecat_bloc_start_example" target="_blank" rel="noopener">https://github.com/ducafecat/flutter-bloc-learn/tree/master/ducafecat_bloc_start_example</a></p><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><h3 id="为什么要用-bloc"><a href="#为什么要用-bloc" class="headerlink" title="为什么要用 bloc"></a>为什么要用 bloc</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-12-08-17-28-24.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li><p>状态管理（这是必须的）</p></li><li><p>三层分离</p><ul><li>表现层（Presentation)</li><li>业务逻辑（Business Logic)</li><li>数据层（Data)<ul><li>数据源/库（Repository)</li><li>数据提供者（Data Provider)</li></ul></li></ul></li><li><p>规范组内开发</p></li><li><p>方便的 测试、记录 用户行为</p></li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SimpleBlocDelegate</span> <span class="keyword">extends</span> <span class="title">BlocDelegate</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> onEvent(Bloc bloc, <span class="built_in">Object</span> event) &#123;</span><br><span class="line">    <span class="keyword">super</span>.onEvent(bloc, event);</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'<span class="subst">$&#123;bloc.runtimeType&#125;</span> $event'</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 所有的UI事件</span></span><br><span class="line">    <span class="comment">// 可用 umeng 这样平台 进行跟踪</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> onError(Bloc bloc, <span class="built_in">Object</span> error, StackTrace stacktrace) &#123;</span><br><span class="line">    <span class="keyword">super</span>.onError(bloc, error, stacktrace);</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'<span class="subst">$&#123;bloc.runtimeType&#125;</span> $error'</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 所有发生的错误</span></span><br><span class="line">    <span class="comment">// 用 sentry 记录错误</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> onTransition(Bloc bloc, Transition transition) &#123;</span><br><span class="line">    <span class="keyword">super</span>.onTransition(bloc, transition);</span><br><span class="line">    <span class="built_in">print</span>(transition);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 所有的 State 变化</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="bloc-vs-provider"><a href="#bloc-vs-provider" class="headerlink" title="bloc vs provider"></a>bloc vs provider</h3><ul><li><p>bloc 是一种 mvvm 基于 事件、状态 驱动的</p></li><li><p>provider 是基于方法的</p></li></ul><h3 id="bloc-学习路线"><a href="#bloc-学习路线" class="headerlink" title="bloc 学习路线"></a>bloc 学习路线</h3><ul><li><p>Flutter Bloc 快速上手 -&gt; Stream -&gt; Cubit -&gt; Bloc</p></li><li><p>理解基于 mvvm 组件化拆分</p></li></ul><h3 id="安装-bloc-vscode-插件"><a href="#安装-bloc-vscode-插件" class="headerlink" title="安装 bloc vscode 插件"></a>安装 bloc vscode 插件</h3><p>bloc</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-12-08-17-35-16.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h3><ul><li>pubspec.yaml</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">ducafecat_bloc_start_example</span></span><br><span class="line"><span class="string">...</span></span><br><span class="line"><span class="attr">dependencies:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line"></span><br><span class="line"><span class="attr">  bloc:</span> <span class="string">^6.1.0</span></span><br><span class="line"><span class="attr">  flutter_bloc:</span> <span class="string">^6.1.0</span></span><br><span class="line"><span class="attr">  equatable:</span> <span class="string">^1.2.5</span></span><br></pre></td></tr></table></figure><ul><li>目录结构</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-12-08-17-38-28.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>counter 计算器业务下创建 bloc view 目录，这样就分离了</p><h3 id="编写-bloc"><a href="#编写-bloc" class="headerlink" title="编写 bloc"></a>编写 bloc</h3><ul><li>lib/counter/bloc/counter_bloc.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'dart:async'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:bloc/bloc.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:equatable/equatable.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:meta/meta.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">part</span> <span class="string">'counter_event.dart'</span>;</span><br><span class="line"><span class="keyword">part</span> <span class="string">'counter_state.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CounterBloc</span> <span class="keyword">extends</span> <span class="title">Bloc</span>&lt;<span class="title">CounterEvent</span>, <span class="title">CounterState</span>&gt; </span>&#123;</span><br><span class="line">  CounterBloc() : <span class="keyword">super</span>(CounterInitial(<span class="number">0</span>));</span><br><span class="line"></span><br><span class="line">  <span class="built_in">int</span> counterNum = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Stream&lt;CounterState&gt; mapEventToState(</span><br><span class="line">    CounterEvent event,</span><br><span class="line">  ) <span class="keyword">async</span>* &#123;</span><br><span class="line">    <span class="keyword">if</span> (event <span class="keyword">is</span> CounterIncrement) &#123;</span><br><span class="line">      <span class="keyword">yield</span>* _mapIncrementEventToState(event);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (event <span class="keyword">is</span> CounterSubduction) &#123;</span><br><span class="line">      <span class="keyword">yield</span>* _mapSubductionEventToState(event);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Stream&lt;CounterState&gt; _mapIncrementEventToState(</span><br><span class="line">      CounterIncrement event) <span class="keyword">async</span>* &#123;</span><br><span class="line">    <span class="keyword">this</span>.counterNum += <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">yield</span> CounterChange(<span class="keyword">this</span>.counterNum);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Stream&lt;CounterState&gt; _mapSubductionEventToState(</span><br><span class="line">      CounterSubduction event) <span class="keyword">async</span>* &#123;</span><br><span class="line">    <span class="keyword">this</span>.counterNum -= <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">yield</span> CounterChange(<span class="keyword">this</span>.counterNum);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>lib/counter/bloc/counter_event.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">part</span> of <span class="string">'counter_bloc.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@immutable</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">CounterEvent</span> <span class="keyword">extends</span> <span class="title">Equatable</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">List</span>&lt;<span class="built_in">Object</span>&gt; <span class="keyword">get</span> props =&gt; [];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CounterIncrement</span> <span class="keyword">extends</span> <span class="title">CounterEvent</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CounterSubduction</span> <span class="keyword">extends</span> <span class="title">CounterEvent</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure><ul><li>lib/counter/bloc/counter_state.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">part</span> of <span class="string">'counter_bloc.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@immutable</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">CounterState</span> <span class="keyword">extends</span> <span class="title">Equatable</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">int</span> value;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> CounterState(<span class="keyword">this</span>.value);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">List</span>&lt;<span class="built_in">Object</span>&gt; <span class="keyword">get</span> props =&gt; [value];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CounterInitial</span> <span class="keyword">extends</span> <span class="title">CounterState</span> </span>&#123;</span><br><span class="line">  CounterInitial(<span class="built_in">int</span> value) : <span class="keyword">super</span>(value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CounterChange</span> <span class="keyword">extends</span> <span class="title">CounterState</span> </span>&#123;</span><br><span class="line">  CounterChange(<span class="built_in">int</span> value) : <span class="keyword">super</span>(value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="编写-view"><a href="#编写-view" class="headerlink" title="编写 view"></a>编写 view</h3><ul><li>lib/counter/view/page.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:ducafecat_bloc_start_example/counter/bloc/counter_bloc.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:ducafecat_bloc_start_example/counter/view/view.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_bloc/flutter_bloc.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CounterPage</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> CounterPage(&#123;Key key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> BlocProvider(</span><br><span class="line">      create: (context) =&gt; CounterBloc(),</span><br><span class="line">      child: CounterView(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>lib/counter/view/view.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:ducafecat_bloc_start_example/counter/bloc/counter_bloc.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_bloc/flutter_bloc.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CounterView</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> CounterView(&#123;Key key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(title: Text(<span class="string">'Counter'</span>)),</span><br><span class="line">      body: Center(</span><br><span class="line">        child: Column(</span><br><span class="line">          children: [</span><br><span class="line">            BlocBuilder&lt;CounterBloc, CounterState&gt;(</span><br><span class="line">              builder: (context, state) &#123;</span><br><span class="line">                <span class="keyword">return</span> Text(<span class="string">'<span class="subst">$&#123;state.value&#125;</span>'</span>);</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">            RaisedButton(</span><br><span class="line">              child: Text(<span class="string">'加法'</span>),</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                BlocProvider.of&lt;CounterBloc&gt;(context).add(CounterIncrement());</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">            RaisedButton(</span><br><span class="line">              child: Text(<span class="string">'加法'</span>),</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                BlocProvider.of&lt;CounterBloc&gt;(context).add(CounterSubduction());</span><br><span class="line">              &#125;,</span><br><span class="line">            )</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="替换主程序-widget"><a href="#替换主程序-widget" class="headerlink" title="替换主程序 widget"></a>替换主程序 widget</h3><ul><li>lib/main.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="comment">// This widget is the root of your application.</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      ...</span><br><span class="line">      home: CounterPage(), <span class="comment">//MyHomePage(title: 'Flutter Demo Home Page'),</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://bloclibrary.dev/" target="_blank" rel="noopener">https://bloclibrary.dev/</a></li><li><a href="https://pub.flutter-io.cn/packages/bloc" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/bloc</a></li><li><a href="https://pub.flutter-io.cn/packages/flutter_bloc" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/flutter_bloc</a></li><li><a href="https://pub.flutter-io.cn/packages/equatable" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/equatable</a></li><li><a href="https://pub.flutter-io.cn/packages/provider" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/provider</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p><p><a href="https://ducafecat.gitee.io" target="_blank" rel="noopener">https://ducafecat.gitee.io</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="Flutter Bloc" scheme="https://blog.ducafecat.tech/categories/Flutter-Bloc/"/>
    
    
      <category term="flutter bloc" scheme="https://blog.ducafecat.tech/tags/flutter-bloc/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 2020 开源项目推荐 第一弹</title>
    <link href="https://blog.ducafecat.tech/2020/11/03/flutter-daily/flutter-2020-learn-opensource/"/>
    <id>https://blog.ducafecat.tech/2020/11/03/flutter-daily/flutter-2020-learn-opensource/</id>
    <published>2020-11-02T16:00:00.000Z</published>
    <updated>2020-11-04T02:09:41.467Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-11-03-12-23-32.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h2><p><a href="https://www.bilibili.com/video/BV13D4y1R71r/" target="_blank" rel="noopener">https://www.bilibili.com/video/BV13D4y1R71r/</a></p><h2 id="关注点"><a href="#关注点" class="headerlink" title="关注点"></a>关注点</h2><ul><li>目录文件结构</li></ul><p>是否符合官方的包管理规范，</p><ul><li>组件拆分</li></ul><p>页面、组件、通用、业务</p><ul><li>工具类设计</li></ul><p>通讯、持久化、安全、字符、数字、浮点</p><ul><li>第三方组件</li></ul><p>流媒体、播放器、编辑器、图片、Web 视图、原生扩展</p><ul><li>状态管理</li></ul><p>bloc、provider</p><ul><li>云服务</li></ul><p>firebase、google cloud、AWS、serverless</p><ul><li>业务完整性</li></ul><p>可运行、业务全</p><h2 id="★-Prism-壁纸-★"><a href="#★-Prism-壁纸-★" class="headerlink" title="★ Prism 壁纸 ★"></a>★ Prism 壁纸 ★</h2><p><a href="https://github.com/Hash-Studios/Prism" target="_blank" rel="noopener">https://github.com/Hash-Studios/Prism</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-11-03-09-48-12.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="★-Flutter-Movies4U-电影资讯-★"><a href="#★-Flutter-Movies4U-电影资讯-★" class="headerlink" title="★ Flutter-Movies4U 电影资讯 ★"></a>★ Flutter-Movies4U 电影资讯 ★</h2><p><a href="https://github.com/webaddicted/Flutter-Movies4U" target="_blank" rel="noopener">https://github.com/webaddicted/Flutter-Movies4U</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-11-03-09-18-43.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="★-anytime-podcast-player-podcast-播放器-★"><a href="#★-anytime-podcast-player-podcast-播放器-★" class="headerlink" title="★ anytime_podcast_player podcast 播放器 ★"></a>★ anytime_podcast_player podcast 播放器 ★</h2><p><a href="https://github.com/amugofjava/anytime_podcast_player" target="_blank" rel="noopener">https://github.com/amugofjava/anytime_podcast_player</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-11-03-09-56-50.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="★-gcloud-dota-app-dota-游戏资讯-全栈项目-★"><a href="#★-gcloud-dota-app-dota-游戏资讯-全栈项目-★" class="headerlink" title="★ gcloud-dota-app dota 游戏资讯 全栈项目 ★"></a>★ gcloud-dota-app dota 游戏资讯 全栈项目 ★</h2><p>flutter + react + go + firebase + google cloud</p><p><a href="https://github.com/alvarowolfx/gcloud-dota-app" target="_blank" rel="noopener">https://github.com/alvarowolfx/gcloud-dota-app</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-11-03-10-02-59.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="★-LunaSea-多媒体网盘管理-★"><a href="#★-LunaSea-多媒体网盘管理-★" class="headerlink" title="★ LunaSea 多媒体网盘管理 ★"></a>★ LunaSea 多媒体网盘管理 ★</h2><p><a href="https://github.com/CometTools/LunaSea" target="_blank" rel="noopener">https://github.com/CometTools/LunaSea</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-11-03-10-24-54.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="★-passwall-mobile-密码管理-全栈项目-★"><a href="#★-passwall-mobile-密码管理-全栈项目-★" class="headerlink" title="★ passwall-mobile 密码管理 全栈项目 ★"></a>★ passwall-mobile 密码管理 全栈项目 ★</h2><p>flutter + electron + go</p><p><a href="https://github.com/aeosmanoglu/passwall-mobile" target="_blank" rel="noopener">https://github.com/aeosmanoglu/passwall-mobile</a><br><a href="https://github.com/passwall/passwall-server" target="_blank" rel="noopener">https://github.com/passwall/passwall-server</a><br><a href="https://github.com/passwall/passwall-desktop" target="_blank" rel="noopener">https://github.com/passwall/passwall-desktop</a><br><a href="https://passwall.io" target="_blank" rel="noopener">https://passwall.io</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-11-03-10-33-02.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-11-03-10-33-15.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="restofinder-美食"><a href="#restofinder-美食" class="headerlink" title="restofinder 美食"></a>restofinder 美食</h2><p><a href="https://github.com/yusriltakeuchi/restofinder" target="_blank" rel="noopener">https://github.com/yusriltakeuchi/restofinder</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-11-03-09-46-57.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="SongTube-App-音乐播放下载"><a href="#SongTube-App-音乐播放下载" class="headerlink" title="SongTube-App 音乐播放下载"></a>SongTube-App 音乐播放下载</h2><p><a href="https://github.com/SongTube/SongTube-App" target="_blank" rel="noopener">https://github.com/SongTube/SongTube-App</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-11-03-09-38-41.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p><p><a href="https://ducafecat.gitee.io" target="_blank" rel="noopener">https://ducafecat.gitee.io</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="Flutter见闻" scheme="https://blog.ducafecat.tech/categories/Flutter%E8%A7%81%E9%97%BB/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>2020 macbook pro 16寸 前端开发，看看我都装了哪些软件</title>
    <link href="https://blog.ducafecat.tech/2020/10/12/flutter-daily/macbook-pro-16-tools-2020/"/>
    <id>https://blog.ducafecat.tech/2020/10/12/flutter-daily/macbook-pro-16-tools-2020/</id>
    <published>2020-10-11T16:00:00.000Z</published>
    <updated>2020-10-13T09:02:45.978Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-10-12-14-22-43.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h2><p><a href="https://www.bilibili.com/video/BV1854y1R7LG/" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1854y1R7LG/</a></p><h2 id="系统"><a href="#系统" class="headerlink" title="系统"></a>系统</h2><h3 id="Homebrew"><a href="#Homebrew" class="headerlink" title="Homebrew"></a>Homebrew</h3><p>包管理工具，主要安装命令行工具</p><p><a href="https://brew.sh/index_zh-cn" target="_blank" rel="noopener">https://brew.sh/index_zh-cn</a></p><h3 id="homebrew-cask"><a href="#homebrew-cask" class="headerlink" title="homebrew-cask"></a>homebrew-cask</h3><p>包管理扩展工具，主要安装 gui 工具</p><p><a href="https://github.com/Homebrew/homebrew-cask" target="_blank" rel="noopener">https://github.com/Homebrew/homebrew-cask</a></p><h3 id="git"><a href="#git" class="headerlink" title="git"></a>git</h3><p>源码控制</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew install git</span><br></pre></td></tr></table></figure><h3 id="iTerm2"><a href="#iTerm2" class="headerlink" title="iTerm2"></a>iTerm2</h3><p>shell 工具</p><p><a href="https://www.iterm2.com/" target="_blank" rel="noopener">https://www.iterm2.com/</a></p><h3 id="powerline-font"><a href="#powerline-font" class="headerlink" title="powerline font"></a>powerline font</h3><p>字体</p><p><a href="https://github.com/powerline/fonts" target="_blank" rel="noopener">https://github.com/powerline/fonts</a></p><h3 id="firacode-font"><a href="#firacode-font" class="headerlink" title="firacode font"></a>firacode font</h3><p>字体</p><p><a href="https://github.com/tonsky/FiraCode" target="_blank" rel="noopener">https://github.com/tonsky/FiraCode</a></p><h3 id="zsh"><a href="#zsh" class="headerlink" title="zsh"></a>zsh</h3><p>shell 工具</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew install zsh</span><br></pre></td></tr></table></figure><h3 id="oh-my-zsh"><a href="#oh-my-zsh" class="headerlink" title="oh-my-zsh"></a>oh-my-zsh</h3><p>zsh 集成工具</p><p><a href="https://ohmyz.sh/" target="_blank" rel="noopener">https://ohmyz.sh/</a></p><p><a href="https://github.com/ohmyzsh/ohmyzsh/wiki/themes" target="_blank" rel="noopener">https://github.com/ohmyzsh/ohmyzsh/wiki/themes</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sh -c &quot;$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)&quot;</span><br></pre></td></tr></table></figure><h3 id="autojump"><a href="#autojump" class="headerlink" title="autojump"></a>autojump</h3><p>zsh 插件 快速导航目录</p><p><a href="https://github.com/wting/autojump" target="_blank" rel="noopener">https://github.com/wting/autojump</a></p><h3 id="zsh-autosuggestions"><a href="#zsh-autosuggestions" class="headerlink" title="zsh-autosuggestions"></a>zsh-autosuggestions</h3><p>zsh 插件 快速提示历史输入</p><p><a href="https://github.com/zsh-users/zsh-autosuggestions" target="_blank" rel="noopener">https://github.com/zsh-users/zsh-autosuggestions</a></p><h3 id="zsh-syntax-highlighting"><a href="#zsh-syntax-highlighting" class="headerlink" title="zsh-syntax-highlighting"></a>zsh-syntax-highlighting</h3><p>zsh 插件 美化显示</p><p><a href="https://github.com/zsh-users/zsh-syntax-highlighting" target="_blank" rel="noopener">https://github.com/zsh-users/zsh-syntax-highlighting</a></p><h3 id="node-amp-nvm"><a href="#node-amp-nvm" class="headerlink" title="node &amp; nvm"></a>node &amp; nvm</h3><p>node 版本管理</p><p><a href="https://github.com/nvm-sh/nvm" target="_blank" rel="noopener">https://github.com/nvm-sh/nvm</a></p><h3 id="whistle"><a href="#whistle" class="headerlink" title="whistle"></a>whistle</h3><p>抓包管理</p><p><a href="https://github.com/avwo/whistle" target="_blank" rel="noopener">https://github.com/avwo/whistle</a></p><h3 id="Charles"><a href="#Charles" class="headerlink" title="Charles"></a>Charles</h3><p>抓包管理 俗称水瓶</p><p><a href="https://www.charlesproxy.com/" target="_blank" rel="noopener">https://www.charlesproxy.com/</a></p><h3 id="Bartender-3"><a href="#Bartender-3" class="headerlink" title="Bartender 3"></a>Bartender 3</h3><p>顶部菜单项隐藏</p><p><a href="https://www.macbartender.com/" target="_blank" rel="noopener">https://www.macbartender.com/</a></p><h3 id="CleanMyMac-X"><a href="#CleanMyMac-X" class="headerlink" title="CleanMyMac X"></a>CleanMyMac X</h3><p>清理电脑</p><p><a href="https://macpaw.com/cleanmymac" target="_blank" rel="noopener">https://macpaw.com/cleanmymac</a></p><h3 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h3><p>容器管理</p><p><a href="https://www.docker.com/" target="_blank" rel="noopener">https://www.docker.com/</a></p><h3 id="ClashX"><a href="#ClashX" class="headerlink" title="ClashX"></a>ClashX</h3><p>科学上网</p><p><a href="https://github.com/yichengchen/clashX/" target="_blank" rel="noopener">https://github.com/yichengchen/clashX/</a></p><h3 id="V2rayU"><a href="#V2rayU" class="headerlink" title="V2rayU"></a>V2rayU</h3><p>科学上网</p><p><a href="https://github.com/yanue/V2rayU/releases" target="_blank" rel="noopener">https://github.com/yanue/V2rayU/releases</a></p><h3 id="Keka"><a href="#Keka" class="headerlink" title="Keka"></a>Keka</h3><p>压缩解压</p><p><a href="https://www.keka.io/en/" target="_blank" rel="noopener">https://www.keka.io/en/</a></p><h3 id="Mounty"><a href="#Mounty" class="headerlink" title="Mounty"></a>Mounty</h3><p>ntfs 磁盘读写</p><p><a href="https://mounty.app/" target="_blank" rel="noopener">https://mounty.app/</a></p><h2 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h2><h3 id="chrome"><a href="#chrome" class="headerlink" title="chrome"></a>chrome</h3><p>浏览器</p><p><a href="https://www.google.cn/chrome/" target="_blank" rel="noopener">https://www.google.cn/chrome/</a></p><h3 id="edge"><a href="#edge" class="headerlink" title="edge"></a>edge</h3><p>浏览器</p><p><a href="https://www.microsoft.com/en-us/edge" target="_blank" rel="noopener">https://www.microsoft.com/en-us/edge</a></p><h3 id="firefox"><a href="#firefox" class="headerlink" title="firefox"></a>firefox</h3><p>浏览器</p><p><a href="http://www.firefox.com.cn/" target="_blank" rel="noopener">http://www.firefox.com.cn/</a></p><h3 id="sourcetree"><a href="#sourcetree" class="headerlink" title="sourcetree"></a>sourcetree</h3><p>git 管理</p><p><a href="https://www.sourcetreeapp.com/" target="_blank" rel="noopener">https://www.sourcetreeapp.com/</a></p><h3 id="CheatSheet"><a href="#CheatSheet" class="headerlink" title="CheatSheet"></a>CheatSheet</h3><p>快捷键提示</p><p><a href="https://www.mediaatelier.com/CheatSheet/" target="_blank" rel="noopener">https://www.mediaatelier.com/CheatSheet/</a></p><h3 id="alfred"><a href="#alfred" class="headerlink" title="alfred"></a>alfred</h3><p>阿芙管家</p><p><a href="https://www.alfredapp.com/" target="_blank" rel="noopener">https://www.alfredapp.com/</a></p><h3 id="snipaste"><a href="#snipaste" class="headerlink" title="snipaste"></a>snipaste</h3><p>截图</p><p><a href="https://docs.snipaste.com/zh-cn/" target="_blank" rel="noopener">https://docs.snipaste.com/zh-cn/</a></p><h3 id="iShot"><a href="#iShot" class="headerlink" title="iShot"></a>iShot</h3><p>截图</p><p><a href="https://apps.apple.com/cn/app/ishot-%E6%88%AA%E5%9B%BE-%E5%BD%95%E5%B1%8F-2020%E5%85%A8%E6%96%B0%E9%AB%98%E5%BA%A6/id1485844094?mt=12" target="_blank" rel="noopener">https://apps.apple.com/cn/app/ishot-%E6%88%AA%E5%9B%BE-%E5%BD%95%E5%B1%8F-2020%E5%85%A8%E6%96%B0%E9%AB%98%E5%BA%A6/id1485844094?mt=12</a></p><h3 id="licecap"><a href="#licecap" class="headerlink" title="licecap"></a>licecap</h3><p>gif 录制</p><p><a href="https://www.cockos.com/licecap/" target="_blank" rel="noopener">https://www.cockos.com/licecap/</a></p><h3 id="有道笔记"><a href="#有道笔记" class="headerlink" title="有道笔记"></a>有道笔记</h3><p>知识管理</p><p><a href="http://note.youdao.com/" target="_blank" rel="noopener">http://note.youdao.com/</a></p><h3 id="notion"><a href="#notion" class="headerlink" title="notion"></a>notion</h3><p>知识管理</p><p><a href="https://www.notion.so/" target="_blank" rel="noopener">https://www.notion.so/</a></p><h3 id="trello"><a href="#trello" class="headerlink" title="trello"></a>trello</h3><p>知识管理</p><p><a href="https://trello.com/" target="_blank" rel="noopener">https://trello.com/</a></p><h3 id="typora"><a href="#typora" class="headerlink" title="typora"></a>typora</h3><p>markdown 写作</p><p><a href="https://typora.io/" target="_blank" rel="noopener">https://typora.io/</a></p><h3 id="语雀"><a href="#语雀" class="headerlink" title="语雀"></a>语雀</h3><p>知识管理</p><p><a href="https://www.yuque.com/" target="_blank" rel="noopener">https://www.yuque.com/</a></p><h3 id="印象笔记"><a href="#印象笔记" class="headerlink" title="印象笔记"></a>印象笔记</h3><p>知识管理</p><p><a href="https://yinxiang.com/" target="_blank" rel="noopener">https://yinxiang.com/</a></p><h3 id="securecrt"><a href="#securecrt" class="headerlink" title="securecrt"></a>securecrt</h3><p>ssh 客户端</p><p><a href="https://www.vandyke.com/products/securecrt/" target="_blank" rel="noopener">https://www.vandyke.com/products/securecrt/</a></p><h3 id="finalshell"><a href="#finalshell" class="headerlink" title="finalshell"></a>finalshell</h3><p>ssh 客户端</p><p><a href="https://www.hostbuf.com/" target="_blank" rel="noopener">https://www.hostbuf.com/</a></p><h3 id="网页-MuMu"><a href="#网页-MuMu" class="headerlink" title="网页 MuMu"></a>网页 MuMu</h3><p>android 模拟器</p><p><a href="https://mumu.163.com/mac/index.html" target="_blank" rel="noopener">https://mumu.163.com/mac/index.html</a></p><h3 id="百度网盘"><a href="#百度网盘" class="headerlink" title="百度网盘"></a>百度网盘</h3><p>网盘</p><p><a href="https://pan.baidu.com/" target="_blank" rel="noopener">https://pan.baidu.com/</a></p><h3 id="Downie-4"><a href="#Downie-4" class="headerlink" title="Downie 4"></a>Downie 4</h3><p>下载油管视频</p><p><a href="https://software.charliemonroe.net/downie/" target="_blank" rel="noopener">https://software.charliemonroe.net/downie/</a></p><h3 id="EasyRes"><a href="#EasyRes" class="headerlink" title="EasyRes"></a>EasyRes</h3><p>屏幕分辨率切换</p><p><a href="http://easyresapp.com/" target="_blank" rel="noopener">http://easyresapp.com/</a></p><h3 id="Free-Download-Manager"><a href="#Free-Download-Manager" class="headerlink" title="Free Download Manager"></a>Free Download Manager</h3><p>下载工具</p><p><a href="https://www.freedownloadmanager.org/zh/" target="_blank" rel="noopener">https://www.freedownloadmanager.org/zh/</a></p><h3 id="iStat-Menus"><a href="#iStat-Menus" class="headerlink" title="iStat Menus"></a>iStat Menus</h3><p>状态管理</p><p><a href="https://setapp.com/" target="_blank" rel="noopener">https://setapp.com/</a></p><h3 id="pap-er"><a href="#pap-er" class="headerlink" title="pap.er"></a>pap.er</h3><p>壁纸管理</p><p><a href="https://paper.meiyuan.in/" target="_blank" rel="noopener">https://paper.meiyuan.in/</a></p><h3 id="Parallels-Desktop"><a href="#Parallels-Desktop" class="headerlink" title="Parallels Desktop"></a>Parallels Desktop</h3><p>虚拟机管理 工作用</p><p><a href="https://www.parallels.com/" target="_blank" rel="noopener">https://www.parallels.com/</a></p><h3 id="virtualbox"><a href="#virtualbox" class="headerlink" title="virtualbox"></a>virtualbox</h3><p>虚拟机管理 试验用</p><p><a href="https://www.virtualbox.org/" target="_blank" rel="noopener">https://www.virtualbox.org/</a></p><h3 id="vmware"><a href="#vmware" class="headerlink" title="vmware"></a>vmware</h3><p>虚拟机管理 试验用</p><p><a href="https://www.vmware.com/hk.html" target="_blank" rel="noopener">https://www.vmware.com/hk.html</a></p><h3 id="SwitchHosts"><a href="#SwitchHosts" class="headerlink" title="SwitchHosts!"></a>SwitchHosts!</h3><p>切换 host</p><p><a href="https://github.com/oldj/SwitchHosts" target="_blank" rel="noopener">https://github.com/oldj/SwitchHosts</a></p><h3 id="Reeder-4"><a href="#Reeder-4" class="headerlink" title="Reeder 4"></a>Reeder 4</h3><p>rss 阅读器</p><p><a href="https://apps.apple.com/cn/app/reeder-4/id1449412482?mt=12" target="_blank" rel="noopener">https://apps.apple.com/cn/app/reeder-4/id1449412482?mt=12</a></p><h3 id="ScreenFlow"><a href="#ScreenFlow" class="headerlink" title="ScreenFlow"></a>ScreenFlow</h3><p>录视频</p><p><a href="https://www.telestream.net/screenflow/overview.htm" target="_blank" rel="noopener">https://www.telestream.net/screenflow/overview.htm</a></p><h3 id="TeamViewer"><a href="#TeamViewer" class="headerlink" title="TeamViewer"></a>TeamViewer</h3><p>远程写作</p><p><a href="https://www.teamviewer.cn" target="_blank" rel="noopener">https://www.teamviewer.cn</a></p><h3 id="draw-io"><a href="#draw-io" class="headerlink" title="draw.io"></a>draw.io</h3><p>画图</p><p><a href="https://www.diagrams.net/" target="_blank" rel="noopener">https://www.diagrams.net/</a></p><h3 id="Foxmail"><a href="#Foxmail" class="headerlink" title="Foxmail"></a>Foxmail</h3><p>轻巧邮件管理</p><p><a href="https://www.foxmail.com/" target="_blank" rel="noopener">https://www.foxmail.com/</a></p><h3 id="Microsoft-To-Do"><a href="#Microsoft-To-Do" class="headerlink" title="Microsoft To Do"></a>Microsoft To Do</h3><p>任务管理</p><p><a href="https://todo.microsoft.com/" target="_blank" rel="noopener">https://todo.microsoft.com/</a></p><h3 id="Microsoft-Remote-Desktop"><a href="#Microsoft-Remote-Desktop" class="headerlink" title="Microsoft Remote Desktop"></a>Microsoft Remote Desktop</h3><p>远程 windows</p><p><a href="https://www.microsoft.com/en-us/download/details.aspx?id=50042" target="_blank" rel="noopener">https://www.microsoft.com/en-us/download/details.aspx?id=50042</a></p><h3 id="WPS-Office"><a href="#WPS-Office" class="headerlink" title="WPS Office"></a>WPS Office</h3><p>word ppt excel</p><p><a href="https://www.wps.cn/" target="_blank" rel="noopener">https://www.wps.cn/</a></p><h3 id="通讯"><a href="#通讯" class="headerlink" title="通讯"></a>通讯</h3><p>QQ、微信、企业微信、Telegram</p><h3 id="央视影音"><a href="#央视影音" class="headerlink" title="央视影音"></a>央视影音</h3><p>看电视 比赛 直播</p><p><a href="https://app.cctv.com/appkhdxz/ysyymac/" target="_blank" rel="noopener">https://app.cctv.com/appkhdxz/ysyymac/</a></p><h3 id="IINA"><a href="#IINA" class="headerlink" title="IINA"></a>IINA</h3><p>播放器</p><p><a href="https://iina.io/" target="_blank" rel="noopener">https://iina.io/</a></p><h3 id="solarized-theme"><a href="#solarized-theme" class="headerlink" title="solarized theme"></a>solarized theme</h3><p>多端样式配色</p><p><a href="https://ethanschoonover.com/solarized/" target="_blank" rel="noopener">https://ethanschoonover.com/solarized/</a></p><h2 id="开发"><a href="#开发" class="headerlink" title="开发"></a>开发</h2><h3 id="sublime"><a href="#sublime" class="headerlink" title="sublime"></a>sublime</h3><p><a href="http://www.sublimetext.com/" target="_blank" rel="noopener">http://www.sublimetext.com/</a></p><h3 id="vscode"><a href="#vscode" class="headerlink" title="vscode"></a>vscode</h3><p><a href="https://code.visualstudio.com/" target="_blank" rel="noopener">https://code.visualstudio.com/</a></p><h3 id="xcode"><a href="#xcode" class="headerlink" title="xcode"></a>xcode</h3><p><a href="https://developer.apple.com/xcode/" target="_blank" rel="noopener">https://developer.apple.com/xcode/</a></p><h3 id="android-stuido"><a href="#android-stuido" class="headerlink" title="android stuido"></a>android stuido</h3><p><a href="https://developer.android.com/studio" target="_blank" rel="noopener">https://developer.android.com/studio</a></p><h3 id="HBuilderX"><a href="#HBuilderX" class="headerlink" title="HBuilderX"></a>HBuilderX</h3><p><a href="https://www.dcloud.io/hbuilderx.html" target="_blank" rel="noopener">https://www.dcloud.io/hbuilderx.html</a></p><h3 id="微信开发者工具"><a href="#微信开发者工具" class="headerlink" title="微信开发者工具"></a>微信开发者工具</h3><p><a href="https://developers.weixin.qq.com/miniprogram/dev/devtools/devtools.html" target="_blank" rel="noopener">https://developers.weixin.qq.com/miniprogram/dev/devtools/devtools.html</a></p><h3 id="TinyPNG4Mac"><a href="#TinyPNG4Mac" class="headerlink" title="TinyPNG4Mac"></a>TinyPNG4Mac</h3><p>图片压缩</p><p><a href="https://github.com/kyleduo/TinyPNG4Mac/blob/master/README_ZH.md" target="_blank" rel="noopener">https://github.com/kyleduo/TinyPNG4Mac/blob/master/README_ZH.md</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew cask install tinypng4mac</span><br></pre></td></tr></table></figure><h3 id="dash"><a href="#dash" class="headerlink" title="dash"></a>dash</h3><p>离线文档工具</p><p><a href="https://kapeli.com/dash" target="_blank" rel="noopener">https://kapeli.com/dash</a></p><h3 id="postman"><a href="#postman" class="headerlink" title="postman"></a>postman</h3><p>api 调试</p><p><a href="https://www.postman.com/" target="_blank" rel="noopener">https://www.postman.com/</a></p><h3 id="adobe-ps-xd"><a href="#adobe-ps-xd" class="headerlink" title="adobe ps xd"></a>adobe ps xd</h3><p>设计</p><p><a href="https://www.adobe.com/cn/" target="_blank" rel="noopener">https://www.adobe.com/cn/</a></p><h3 id="sketch"><a href="#sketch" class="headerlink" title="sketch"></a>sketch</h3><p>设计</p><p><a href="https://www.sketch.com/" target="_blank" rel="noopener">https://www.sketch.com/</a></p><h3 id="axure"><a href="#axure" class="headerlink" title="axure"></a>axure</h3><p>原型设计</p><p><a href="https://www.axure.com/" target="_blank" rel="noopener">https://www.axure.com/</a></p><h3 id="pxcook"><a href="#pxcook" class="headerlink" title="pxcook"></a>pxcook</h3><p>标注工具</p><p><a href="https://www.fancynode.com.cn/pxcook" target="_blank" rel="noopener">https://www.fancynode.com.cn/pxcook</a></p><h3 id="mindnode"><a href="#mindnode" class="headerlink" title="mindnode"></a>mindnode</h3><p>思维脑图</p><p><a href="https://apps.apple.com/cn/app/mindnode-mind-map/id1289197285?mt=12" target="_blank" rel="noopener">https://apps.apple.com/cn/app/mindnode-mind-map/id1289197285?mt=12</a></p><h3 id="diffmerge"><a href="#diffmerge" class="headerlink" title="diffmerge"></a>diffmerge</h3><p>文件比较</p><p><a href="http://sourcegear.com/diffmerge" target="_blank" rel="noopener">http://sourcegear.com/diffmerge</a></p><h3 id="RedisDesktopManager"><a href="#RedisDesktopManager" class="headerlink" title="RedisDesktopManager"></a>RedisDesktopManager</h3><p>redis 管理客户端</p><p><a href="https://github.com/uglide/RedisDesktopManager" target="_blank" rel="noopener">https://github.com/uglide/RedisDesktopManager</a></p><h3 id="DBeaver"><a href="#DBeaver" class="headerlink" title="DBeaver"></a>DBeaver</h3><p>多数据库 客户端</p><p><a href="https://dbeaver.io/" target="_blank" rel="noopener">https://dbeaver.io/</a></p><h3 id="Navicat-Premium"><a href="#Navicat-Premium" class="headerlink" title="Navicat Premium"></a>Navicat Premium</h3><p>mysql 客户端</p><p><a href="http://www.navicat.com.cn/store/navicat-premium" target="_blank" rel="noopener">http://www.navicat.com.cn/store/navicat-premium</a></p><h3 id="pdman"><a href="#pdman" class="headerlink" title="pdman"></a>pdman</h3><p>关系数据库设计工具</p><p><a href="https://gitee.com/robergroup/pdman" target="_blank" rel="noopener">https://gitee.com/robergroup/pdman</a></p><h3 id="GoLand"><a href="#GoLand" class="headerlink" title="GoLand"></a>GoLand</h3><p><a href="https://www.jetbrains.com/go/" target="_blank" rel="noopener">https://www.jetbrains.com/go/</a></p><h3 id="IDEA"><a href="#IDEA" class="headerlink" title="IDEA"></a>IDEA</h3><p><a href="https://www.jetbrains.com/" target="_blank" rel="noopener">https://www.jetbrains.com/</a></p><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p><p><a href="https://ducafecat.gitee.io" target="_blank" rel="noopener">https://ducafecat.gitee.io</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="其它" scheme="https://blog.ducafecat.tech/categories/%E5%85%B6%E5%AE%83/"/>
    
    
      <category term="macbook" scheme="https://blog.ducafecat.tech/tags/macbook/"/>
    
  </entry>
  
  <entry>
    <title>HarmonyOS 真的是套壳么，我也好奇的玩了下</title>
    <link href="https://blog.ducafecat.tech/2020/09/18/flutter-daily/harmonyos-2020-v2-research/"/>
    <id>https://blog.ducafecat.tech/2020/09/18/flutter-daily/harmonyos-2020-v2-research/</id>
    <published>2020-09-17T16:00:00.000Z</published>
    <updated>2020-09-21T02:08:43.866Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-09-18-14-32-16.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="上手一个-Hello-Word"><a href="#上手一个-Hello-Word" class="headerlink" title="上手一个 Hello Word!"></a>上手一个 Hello Word!</h2><p><a href="https://developer.harmonyos.com/cn/develop/deveco-studio#download" target="_blank" rel="noopener">https://developer.harmonyos.com/cn/develop/deveco-studio#download</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-09-18-14-20-01.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="了解下-HUAWEI"><a href="#了解下-HUAWEI" class="headerlink" title="了解下 HUAWEI"></a>了解下 HUAWEI</h2><p><a href="https://www.huawei.com" target="_blank" rel="noopener">https://www.huawei.com</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-09-18-14-02-49.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-09-18-14-03-15.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-09-18-14-03-45.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>总结</li></ul><ol><li>华为是做基建、通讯设备的公司</li><li>行业跨度大，企事业+个人业务</li><li>趋势 IoT 设备互联是资源整合的</li></ol><h2 id="HarmonyOS-源码"><a href="#HarmonyOS-源码" class="headerlink" title="HarmonyOS 源码"></a>HarmonyOS 源码</h2><p><a href="https://openharmony.gitee.com" target="_blank" rel="noopener">https://openharmony.gitee.com</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-09-18-14-09-07.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-09-18-14-09-23.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="核心"><a href="#核心" class="headerlink" title="核心"></a>核心</h3><ul><li>kernel_liteos_a 适用于 cpu 内存 大的</li></ul><p><a href="https://gitee.com/openharmony/kernel_liteos_a" target="_blank" rel="noopener">https://gitee.com/openharmony/kernel_liteos_a</a></p><ul><li>kernel_liteos_m 适用于建议设备</li></ul><p><a href="https://gitee.com/openharmony/kernel_liteos_m" target="_blank" rel="noopener">https://gitee.com/openharmony/kernel_liteos_m</a></p><ul><li>基于开源项目</li></ul><p><a href="http://nuttx.apache.org/" target="_blank" rel="noopener">http://nuttx.apache.org/</a></p><h2 id="开发板卡"><a href="#开发板卡" class="headerlink" title="开发板卡"></a>开发板卡</h2><p><a href="https://device.harmonyos.com/cn/docs/start/introduce/oem_start_guide-0000001054913231" target="_blank" rel="noopener">https://device.harmonyos.com/cn/docs/start/introduce/oem_start_guide-0000001054913231</a><br><a href="https://gitee.com/openharmony/docs/blob/master/quick-start/Hi3861开发板介绍.md" target="_blank" rel="noopener">https://gitee.com/openharmony/docs/blob/master/quick-start/Hi3861开发板介绍.md</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-09-18-14-09-40.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-09-18-14-16-07.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h2><ul><li><a href="https://www.huawei.com" target="_blank" rel="noopener">华为官网</a></li><li><a href="https://www.harmonyos.com/cn/develop" target="_blank" rel="noopener">开发者</a></li><li><a href="https://device.harmonyos.com/cn/docs/start/introduce/oem_start_guide-0000001054913231" target="_blank" rel="noopener">开发版卡</a></li><li><a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/harmonyos-overview-0000000000011903" target="_blank" rel="noopener">HarmonyOS 文档</a></li><li><p><a href="https://openharmony.gitee.com/" target="_blank" rel="noopener">HarmonyOS 源码</a></p></li><li><hr></li></ul><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p><p><a href="https://ducafecat.gitee.io" target="_blank" rel="noopener">https://ducafecat.gitee.io</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="其它" scheme="https://blog.ducafecat.tech/categories/%E5%85%B6%E5%AE%83/"/>
    
    
      <category term="HarmonyOS" scheme="https://blog.ducafecat.tech/tags/HarmonyOS/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 2020 学习心得、学习路线</title>
    <link href="https://blog.ducafecat.tech/2020/09/03/flutter-daily/flutter-2020-how-to-learn-flutter-develop/"/>
    <id>https://blog.ducafecat.tech/2020/09/03/flutter-daily/flutter-2020-how-to-learn-flutter-develop/</id>
    <published>2020-09-02T16:00:00.000Z</published>
    <updated>2020-11-04T02:09:22.694Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-09-03-15-13-56.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h2><p><a href="https://www.bilibili.com/video/BV1CT4y1L7At/" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1CT4y1L7At/</a></p><h2 id="新人上手情况"><a href="#新人上手情况" class="headerlink" title="新人上手情况"></a>新人上手情况</h2><ul><li>语言基础</li><li>数据结构</li><li>网络通信</li><li>前端布局</li><li>动画</li><li>优化点</li></ul><h2 id="前端遇到的最大问题"><a href="#前端遇到的最大问题" class="headerlink" title="前端遇到的最大问题"></a>前端遇到的最大问题</h2><ul><li>原生调试</li><li>原生组件开发</li></ul><h2 id="聊聊学习动机"><a href="#聊聊学习动机" class="headerlink" title="聊聊学习动机"></a>聊聊学习动机</h2><ul><li>单位工作需要</li><li>自己兴趣开发 APP</li><li>毕业设计</li><li>漫无目的、漫无目的的学习</li></ul><h2 id="学习路线"><a href="#学习路线" class="headerlink" title="学习路线"></a>学习路线</h2><p><a href="https://github.com/olexale/flutter_roadmap" target="_blank" rel="noopener">https://github.com/olexale/flutter_roadmap</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-09-03-15-09-44.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="资源"><a href="#资源" class="headerlink" title="资源"></a>资源</h2><ul><li><p>官网 dart<br><a href="https://dart.dev/guides/language/language-tour" target="_blank" rel="noopener">https://dart.dev/guides/language/language-tour</a></p></li><li><p>官网 flutter<br><a href="https://flutter.dev/" target="_blank" rel="noopener">https://flutter.dev/</a><br><a href="https://flutter.cn/" target="_blank" rel="noopener">https://flutter.cn/</a></p></li><li><p>juejin<br><a href="https://juejin.im/tag/Flutter" target="_blank" rel="noopener">https://juejin.im/tag/Flutter</a></p></li><li><p>medium<br><a href="https://medium.com/tag/flutter" target="_blank" rel="noopener">https://medium.com/tag/flutter</a></p></li><li><p>flutter awesome github<br><a href="https://github.com/Solido/awesome-flutter" target="_blank" rel="noopener">https://github.com/Solido/awesome-flutter</a><br><a href="https://github.com/crazycodeboy/awesome-flutter-cn" target="_blank" rel="noopener">https://github.com/crazycodeboy/awesome-flutter-cn</a></p></li><li><p>flutter awesome web<br><a href="https://flutterawesome.com/" target="_blank" rel="noopener">https://flutterawesome.com/</a></p></li><li><p>other<br><a href="https://twitter.com/search?q=flutterdev" target="_blank" rel="noopener">https://twitter.com/search?q=flutterdev</a><br><a href="https://www.facebook.com/search/groups/?q=flutter%20dev" target="_blank" rel="noopener">https://www.facebook.com/search/groups/?q=flutter%20dev</a></p></li></ul><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>最快的学习方式有个目标、看优秀源代码，完成你的作品、上线！</p><ul><li><hr></li></ul><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p><p><a href="https://ducafecat.gitee.io" target="_blank" rel="noopener">https://ducafecat.gitee.io</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="Flutter见闻" scheme="https://blog.ducafecat.tech/categories/Flutter%E8%A7%81%E9%97%BB/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 混合开发 - 03 百度地图定位功能 ios 篇</title>
    <link href="https://blog.ducafecat.tech/2020/08/21/flutter-daily/flutter-plugins-03-baidu-map-ios/"/>
    <id>https://blog.ducafecat.tech/2020/08/21/flutter-daily/flutter-plugins-03-baidu-map-ios/</id>
    <published>2020-08-20T16:00:00.000Z</published>
    <updated>2020-08-26T21:48:07.029Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-08-21-07-19-43.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-08-24-10-01-58.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>创建 ios flutter 插件流程</li><li>集成百度定位功能</li></ul><h2 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h2><p><a href="https://www.bilibili.com/video/BV1HT4y1L73i/" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1HT4y1L73i/</a></p><iframe src="//player.bilibili.com/player.html?bvid=BV1HT4y1L73i&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" height="400px"> </iframe><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/ducafecat/flutter_baidu_plugin_ducafecat/releases/tag/v1.0.3" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_baidu_plugin_ducafecat/releases/tag/v1.0.3</a></p><h2 id="百度平台部分"><a href="#百度平台部分" class="headerlink" title="百度平台部分"></a>百度平台部分</h2><h3 id="设置-AK"><a href="#设置-AK" class="headerlink" title="设置 AK"></a>设置 AK</h3><p><a href="https://lbsyun.baidu.com/apiconsole/key#/home" target="_blank" rel="noopener">https://lbsyun.baidu.com/apiconsole/key#/home</a></p><ul><li>添加应用</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-08-21-05-56-56.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>查看 Bundle Identifier</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-08-21-05-59-34.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="IOS-部分"><a href="#IOS-部分" class="headerlink" title="IOS 部分"></a>IOS 部分</h2><h3 id="自动部署-CocoaPods"><a href="#自动部署-CocoaPods" class="headerlink" title="自动部署 CocoaPods"></a>自动部署 CocoaPods</h3><ul><li>安装工具</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gem install cocoapods</span><br></pre></td></tr></table></figure><ul><li>ios/flutter_baidu_plugin_ducafecat.podspec</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">  ...</span><br><span class="line">  s.dependency &apos;Flutter&apos;</span><br><span class="line">  s.platform = :ios, &apos;8.0&apos;</span><br><span class="line"></span><br><span class="line">  s.dependency &apos;BMKLocationKit&apos;</span><br><span class="line"></span><br><span class="line">  # Flutter.framework does not contain a i386 slice. Only x86_64 simulators are supported.</span><br><span class="line">  s.pod_target_xcconfig = &#123; &apos;DEFINES_MODULE&apos; =&gt; &apos;YES&apos;, &apos;VALID_ARCHS[sdk=iphonesimulator*]&apos; =&gt; &apos;x86_64&apos; &#125;</span><br><span class="line">end</span><br></pre></td></tr></table></figure><ul><li>安装百度 sdk 包</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod install</span><br></pre></td></tr></table></figure><ul><li>升级</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod repo update</span><br></pre></td></tr></table></figure><ul><li>pod search 无法搜索到类库的解决办法（找不到类库）</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">（1）执行pod setup</span><br><span class="line"></span><br><span class="line">（2）删除~/Library/Caches/CocoaPods目录下的search_index.json文件</span><br><span class="line"></span><br><span class="line">    pod setup成功后会生成~/Library/Caches/CocoaPods/search_index.json文件</span><br><span class="line"></span><br><span class="line">    终端输入rm ~/Library/Caches/CocoaPods/search_index.json</span><br><span class="line"></span><br><span class="line">    删除成功后再执行pod search</span><br><span class="line"></span><br><span class="line">（3）执行pod search</span><br></pre></td></tr></table></figure><h3 id="Info-plist-定位授权"><a href="#Info-plist-定位授权" class="headerlink" title="Info.plist 定位授权"></a>Info.plist 定位授权</h3><p>example/ios/Runner/Info.plist</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;dict&gt;</span><br><span class="line">&lt;key&gt;NSLocationWhenInUseUsageDescription&lt;/key&gt;</span><br><span class="line">&lt;string&gt;需要定位&lt;/string&gt;</span><br></pre></td></tr></table></figure><h3 id="消息通知-BdmapFlutterStreamManager"><a href="#消息通知-BdmapFlutterStreamManager" class="headerlink" title="消息通知 BdmapFlutterStreamManager"></a>消息通知 BdmapFlutterStreamManager</h3><ul><li>ios/Classes/BdmapFlutterStreamManager.h</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Header.h</span></span><br><span class="line"><span class="comment">//  bdmap_location_flutter_plugin</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Created by Wang,Shengzhan on 2020/2/4.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;Flutter/Flutter.h&gt;</span></span></span><br><span class="line"></span><br><span class="line">NS_ASSUME_NONNULL_BEGIN</span><br><span class="line">@<span class="class"><span class="keyword">class</span> <span class="title">BdmapFlutterStreamHandler</span>;</span></span><br><span class="line">@interface BdmapFlutterStreamManager : NSObject</span><br><span class="line">+ (instancetype)sharedInstance ;</span><br><span class="line">@property (nonatomic, strong) BdmapFlutterStreamHandler* streamHandler;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@interface BdmapFlutterStreamHandler : NSObject&lt;FlutterStreamHandler&gt;</span><br><span class="line">@property (nonatomic, strong) FlutterEventSink eventSink;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line">NS_ASSUME_NONNULL_END</span><br></pre></td></tr></table></figure><ul><li>ios/Classes/BdmapFlutterStreamManager.m</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  BdmapFlutterStreamManager.m</span></span><br><span class="line"><span class="comment">//  bdmap_location_flutter_plugin</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Created by Wang,Shengzhan on 2020/2/4.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#import <span class="meta-string">"BdmapFlutterStreamManager.h"</span></span></span><br><span class="line"></span><br><span class="line">@implementation BdmapFlutterStreamManager</span><br><span class="line"></span><br><span class="line">+ (instancetype)sharedInstance &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">dispatch_once_t</span> onceToken;</span><br><span class="line">    <span class="keyword">static</span> BdmapFlutterStreamManager *manager = nil;</span><br><span class="line">    dispatch_once(&amp;onceToken, ^&#123;</span><br><span class="line">        manager = [[BdmapFlutterStreamManager alloc] init];</span><br><span class="line">        BdmapFlutterStreamHandler * streamHandler = [[BdmapFlutterStreamHandler alloc] init];</span><br><span class="line">        manager.streamHandler = streamHandler;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> manager;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@implementation BdmapFlutterStreamHandler</span><br><span class="line"></span><br><span class="line">- (FlutterError*)onListenWithArguments:(id)arguments eventSink:(FlutterEventSink)eventSink &#123;</span><br><span class="line">    self.eventSink = eventSink;</span><br><span class="line">    <span class="keyword">return</span> nil;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (FlutterError*)onCancelWithArguments:(id)arguments &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> nil;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure><h3 id="地图接口业务-FlutterBaiduPluginDucafecatPlugin"><a href="#地图接口业务-FlutterBaiduPluginDucafecatPlugin" class="headerlink" title="地图接口业务 FlutterBaiduPluginDucafecatPlugin"></a>地图接口业务 FlutterBaiduPluginDucafecatPlugin</h3><ul><li>ios/Classes/FlutterBaiduPluginDucafecatPlugin.h</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">&lt;Flutter/Flutter.h&gt;</span></span></span><br><span class="line"></span><br><span class="line">@interface FlutterBaiduPluginDucafecatPlugin : NSObject&lt;FlutterPlugin&gt;</span><br><span class="line">@end</span><br></pre></td></tr></table></figure><ul><li>ios/Classes/FlutterBaiduPluginDucafecatPlugin.m</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">"FlutterBaiduPluginDucafecatPlugin.h"</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">"BMKLocationkit/BMKLocationComponent.h"</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">"BdmapFlutterStreamManager.h"</span></span></span><br><span class="line"></span><br><span class="line">@interface FlutterBaiduPluginDucafecatPlugin()&lt;BMKLocationManagerDelegate&gt;</span><br><span class="line"></span><br><span class="line">@property (nonatomic,strong) BMKLocationManager *locManager;</span><br><span class="line"></span><br><span class="line">@property (nonatomic, copy) FlutterResult flutterResult;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@implementation FlutterBaiduPluginDucafecatPlugin</span><br><span class="line">+ (<span class="keyword">void</span>)registerWithRegistrar:(NSObject&lt;FlutterPluginRegistrar&gt;*)registrar &#123;</span><br><span class="line">  <span class="comment">// FlutterMethodChannel* channel = [FlutterMethodChannel</span></span><br><span class="line">  <span class="comment">//     methodChannelWithName:@"flutter_baidu_plugin_ducafecat"</span></span><br><span class="line">  <span class="comment">//           binaryMessenger:[registrar messenger]];</span></span><br><span class="line">  <span class="comment">// FlutterBaiduPluginDucafecatPlugin* instance = [[FlutterBaiduPluginDucafecatPlugin alloc] init];</span></span><br><span class="line">  <span class="comment">// [registrar addMethodCallDelegate:instance channel:channel];</span></span><br><span class="line"></span><br><span class="line">    FlutterMethodChannel* channel = [FlutterMethodChannel</span><br><span class="line">                                     methodChannelWithName:@<span class="string">"flutter_baidu_plugin_ducafecat"</span></span><br><span class="line">                                     binaryMessenger:[registrar messenger]];</span><br><span class="line"></span><br><span class="line">    FlutterBaiduPluginDucafecatPlugin* instance = [[FlutterBaiduPluginDucafecatPlugin alloc] init];</span><br><span class="line"></span><br><span class="line">    [registrar addMethodCallDelegate:instance channel:channel];</span><br><span class="line"></span><br><span class="line">    FlutterEventChannel *eventChanel = [FlutterEventChannel eventChannelWithName:@<span class="string">"flutter_baidu_plugin_ducafecat_stream"</span> binaryMessenger:[registrar messenger]];</span><br><span class="line"></span><br><span class="line">    [eventChanel setStreamHandler:[[BdmapFlutterStreamManager sharedInstance] streamHandler]];</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// - (void)handleMethodCall:(FlutterMethodCall*)call result:(FlutterResult)result &#123;</span></span><br><span class="line"><span class="comment">//   if ([@"getPlatformVersion" isEqualToString:call.method]) &#123;</span></span><br><span class="line"><span class="comment">//     result([@"iOS " stringByAppendingString:[[UIDevice currentDevice] systemVersion]]);</span></span><br><span class="line"><span class="comment">//   &#125;</span></span><br><span class="line"><span class="comment">//   else if ([@"duAddOne" isEqualToString:call.method]) &#123;</span></span><br><span class="line"><span class="comment">//       NSInteger val = 100;</span></span><br><span class="line"><span class="comment">//       val += [[call.arguments objectForKey:@"num"] intValue];</span></span><br><span class="line"><span class="comment">//       result([NSNumber numberWithLong:val]);</span></span><br><span class="line"><span class="comment">//   &#125;</span></span><br><span class="line"><span class="comment">//   else &#123;</span></span><br><span class="line"><span class="comment">//     result(FlutterMethodNotImplemented);</span></span><br><span class="line"><span class="comment">//   &#125;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)handleMethodCall:(FlutterMethodCall*)call result:(FlutterResult)result &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ([@<span class="string">"getPlatformVersion"</span> isEqualToString:call.method]) &#123;</span><br><span class="line"></span><br><span class="line">        result([@<span class="string">"iOS "</span> stringByAppendingString:[[UIDevice currentDevice] systemVersion]]);</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> ([@<span class="string">"startLocation"</span> isEqualToString:call.method])&#123; <span class="comment">// 开始定位</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        NSLog((@"\n[bdmap_loc_flutter_plugin:%s]"), "startLocation...");</span></span><br><span class="line">        [self startLocation:result];</span><br><span class="line"></span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> ([@<span class="string">"stopLocation"</span> isEqualToString:call.method])&#123; <span class="comment">// 停止定位</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        NSLog((@"\n[bdmap_loc_flutter_plugin:%s]"), "stopLocation...");</span></span><br><span class="line">        [self stopLocation];</span><br><span class="line">        result(@YES);</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> ([@<span class="string">"updateOption"</span> isEqualToString:call.method] ) &#123; <span class="comment">// 设置定位参数</span></span><br><span class="line"></span><br><span class="line">        result(@([self updateOption:call.arguments]));</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> ([@<span class="string">"setApiKey"</span> isEqualToString:call.method])&#123; <span class="comment">// 设置ios端ak</span></span><br><span class="line"><span class="comment">//        NSLog((@"\n[bdmap_loc_flutter_plugin:%s]"), "setApiKey...");</span></span><br><span class="line">        [[BMKLocationAuth sharedInstance] checkPermisionWithKey:call.arguments authDelegate:self];</span><br><span class="line">        result(@YES);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line">        result(FlutterMethodNotImplemented);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> 获取设置的期望定位精度</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">-(<span class="keyword">double</span>)getDesiredAccuracy:(NSString*)str&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>([@<span class="string">"kCLLocationAccuracyBest"</span> isEqualToString:str]) &#123;</span><br><span class="line">        <span class="keyword">return</span> kCLLocationAccuracyBest;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> ([@<span class="string">"kCLLocationAccuracyNearestTenMeters"</span> isEqualToString:str]) &#123;</span><br><span class="line">        <span class="keyword">return</span> kCLLocationAccuracyNearestTenMeters;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> ([@<span class="string">"kCLLocationAccuracyHundredMeters"</span> isEqualToString:str]) &#123;</span><br><span class="line">        <span class="keyword">return</span> kCLLocationAccuracyHundredMeters;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> ([@<span class="string">"kCLLocationAccuracyKilometer"</span> isEqualToString:str]) &#123;</span><br><span class="line">        <span class="keyword">return</span> kCLLocationAccuracyKilometer;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> kCLLocationAccuracyBest;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> 获取设置的经纬度坐标系类型</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">-(<span class="keyword">int</span>)getCoordinateType:(NSString*)str&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>([@<span class="string">"BMKLocationCoordinateTypeBMK09LL"</span> isEqualToString:str]) &#123;</span><br><span class="line">        <span class="keyword">return</span> BMKLocationCoordinateTypeBMK09LL;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> ([@<span class="string">"BMKLocationCoordinateTypeBMK09MC"</span> isEqualToString:str]) &#123;</span><br><span class="line">        <span class="keyword">return</span> BMKLocationCoordinateTypeBMK09MC;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> ([@<span class="string">"BMKLocationCoordinateTypeWGS84"</span> isEqualToString:str]) &#123;</span><br><span class="line">        <span class="keyword">return</span> BMKLocationCoordinateTypeWGS84;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> ([@<span class="string">"BMKLocationCoordinateTypeGCJ02"</span> isEqualToString:str]) &#123;</span><br><span class="line">        <span class="keyword">return</span> BMKLocationCoordinateTypeGCJ02;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> BMKLocationCoordinateTypeGCJ02;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> 获取设置的应用位置类型</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">-(<span class="keyword">int</span>)getActivityType:(NSString*)str&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ([@<span class="string">"CLActivityTypeOther"</span> isEqualToString:str]) &#123;</span><br><span class="line">        <span class="keyword">return</span> CLActivityTypeOther;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> ([@<span class="string">"CLActivityTypeAutomotiveNavigation"</span> isEqualToString:str]) &#123;</span><br><span class="line">        <span class="keyword">return</span> CLActivityTypeAutomotiveNavigation;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> ([@<span class="string">"CLActivityTypeFitness"</span> isEqualToString:str]) &#123;</span><br><span class="line">        <span class="keyword">return</span> CLActivityTypeFitness;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> ([@<span class="string">"CLActivityTypeOtherNavigation"</span> isEqualToString:str]) &#123;</span><br><span class="line">        <span class="keyword">return</span> CLActivityTypeOtherNavigation;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> CLActivityTypeAutomotiveNavigation;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> 解析flutter端所设置的定位SDK参数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">-(BOOL)updateOption:(NSDictionary*)args &#123;</span><br><span class="line">    <span class="keyword">if</span>(self.locManager) &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//        NSLog(@"定位参数配置:%@",args);</span></span><br><span class="line"></span><br><span class="line">        self.locManager.isNeedNewVersionReGeocode = YES;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置期望定位精度</span></span><br><span class="line">        <span class="keyword">if</span> ([[args allKeys] containsObject:@<span class="string">"desiredAccuracy"</span>]) &#123;</span><br><span class="line">          [self.locManager setDesiredAccuracy:[ self getDesiredAccuracy: args[@<span class="string">"desiredAccuracy"</span>]]];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置定位的最小更新距离</span></span><br><span class="line">        <span class="keyword">if</span> ([[args allKeys] containsObject:@<span class="string">"distanceFilter"</span>]) &#123;</span><br><span class="line">            self.locManager.distanceFilter = [args[@<span class="string">"distanceFilter"</span>] doubleValue];</span><br><span class="line"><span class="comment">//            NSLog(@"最小更新距离值:%f", [args[@"distanceFilter"] doubleValue]);</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置返回位置坐标系类型</span></span><br><span class="line">        <span class="keyword">if</span> ([[args allKeys] containsObject:@<span class="string">"BMKLocationCoordinateType"</span>]) &#123;</span><br><span class="line">            [self.locManager setCoordinateType:[ self getCoordinateType: args[@<span class="string">"desiredAccuracy"</span>]]];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置应用位置类型</span></span><br><span class="line">        <span class="keyword">if</span> ([[args allKeys] containsObject:@<span class="string">"activityType"</span>]) &#123;</span><br><span class="line">            [self.locManager setActivityType:[ self getActivityType: args[@<span class="string">"desiredAccuracy"</span>]]];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置是否需要返回新版本rgc信息</span></span><br><span class="line">        <span class="keyword">if</span> ([[args allKeys] containsObject:@<span class="string">"isNeedNewVersionRgc"</span>]) &#123;</span><br><span class="line">            <span class="keyword">if</span> ((<span class="keyword">bool</span>)args[@<span class="string">"desiredAccuracy"</span>]) &#123;</span><br><span class="line"><span class="comment">//                NSLog(@"需要返回新版本rgc信息");</span></span><br><span class="line">                self.locManager.isNeedNewVersionReGeocode = YES;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">//                NSLog(@"不需要返回新版本rgc信息");</span></span><br><span class="line">                self.locManager.isNeedNewVersionReGeocode = NO;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 指定定位是否会被系统自动暂停</span></span><br><span class="line">        <span class="keyword">if</span> ([[args allKeys] containsObject:@<span class="string">"pausesLocationUpdatesAutomatically"</span>]) &#123;</span><br><span class="line">            <span class="keyword">if</span> ((<span class="keyword">bool</span>)args[@<span class="string">"pausesLocationUpdatesAutomatically"</span>]) &#123;</span><br><span class="line"><span class="comment">//                NSLog(@"设置定位被系统自动暂停");</span></span><br><span class="line">                self.locManager.isNeedNewVersionReGeocode = YES;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">//                NSLog(@"设置定位不能被系统自动暂停");</span></span><br><span class="line">                self.locManager.isNeedNewVersionReGeocode = NO;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置是否允许后台定位</span></span><br><span class="line">        <span class="keyword">if</span> ([[args allKeys] containsObject:@<span class="string">"allowsBackgroundLocationUpdates"</span>]) &#123;</span><br><span class="line">             <span class="keyword">if</span> ((<span class="keyword">bool</span>)args[@<span class="string">"allowsBackgroundLocationUpdates"</span>]) &#123;</span><br><span class="line"><span class="comment">//                  NSLog(@"设置允许后台定位");</span></span><br><span class="line">                  self.locManager.isNeedNewVersionReGeocode = YES;</span><br><span class="line">             &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">//                  NSLog(@"设置不允许后台定位");</span></span><br><span class="line">                  self.locManager.isNeedNewVersionReGeocode = NO;</span><br><span class="line">                 self.locManager.distanceFilter = kCLDistanceFilterNone;</span><br><span class="line">             &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置定位超时时间</span></span><br><span class="line">        <span class="keyword">if</span> ([[args allKeys] containsObject:@<span class="string">"locationTimeout"</span>]) &#123;</span><br><span class="line">            [self.locManager setLocationTimeout:[args[@<span class="string">"locationTimeout"</span>] integerValue]];</span><br><span class="line">            self.locManager.coordinateType = BMKLocationCoordinateTypeGCJ02;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置逆地理超时时间</span></span><br><span class="line">        <span class="keyword">if</span> ([[args allKeys] containsObject:@<span class="string">"reGeocodeTimeout"</span>]) &#123;</span><br><span class="line">            [self.locManager setReGeocodeTimeout:[args[@<span class="string">"reGeocodeTimeout"</span>] integerValue]];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> YES;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> NO;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> 启动定位</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)startLocation:(FlutterResult)result</span><br><span class="line">&#123;</span><br><span class="line">    self.flutterResult = result;</span><br><span class="line">    [self.locManager startUpdatingLocation];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> 停止定位</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)stopLocation</span><br><span class="line">&#123;</span><br><span class="line">    self.flutterResult = nil;</span><br><span class="line">    [self.locManager stopUpdatingLocation];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (BMKLocationManager *)locManager &#123;</span><br><span class="line">    <span class="keyword">if</span> (!_locManager) &#123;</span><br><span class="line">        _locManager = [[BMKLocationManager alloc] init];</span><br><span class="line">        _locManager.locatingWithReGeocode = YES;</span><br><span class="line">        _locManager.delegate = self;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> _locManager;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  @brief 连续定位回调函数</span></span><br><span class="line"><span class="comment"> *  @param manager 定位 BMKLocationManager 类。</span></span><br><span class="line"><span class="comment"> *  @param location 定位结果。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)BMKLocationManager:(BMKLocationManager * _Nonnull)manager didUpdateLocation:(BMKLocation * _Nullable)location orError:(NSError * _Nullable)error</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (error)</span><br><span class="line">    &#123;</span><br><span class="line"><span class="comment">//        NSLog(@"locError:&#123;%ld - %@&#125;;", (long)error.code, error.localizedDescription);</span></span><br><span class="line">    &#125; <span class="keyword">if</span> (location) &#123; <span class="comment">// 得到定位信息，添加annotation</span></span><br><span class="line">        NSMutableDictionary *dic = [NSMutableDictionary dictionaryWithCapacity:<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (location) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (location.location.timestamp) &#123;</span><br><span class="line">                [dic setObject:[self getFormatTime:location.location.timestamp] forKey:@<span class="string">"locTime"</span>]; <span class="comment">// 定位时间</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (location.location.horizontalAccuracy) &#123;</span><br><span class="line">                [dic setObject:@(location.location.horizontalAccuracy) forKey:@<span class="string">"radius"</span>]; <span class="comment">// 定位精度</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (location.location.coordinate.latitude) &#123;</span><br><span class="line">                [dic setObject:@(location.location.coordinate.latitude) forKey:@<span class="string">"latitude"</span>]; <span class="comment">// 纬度</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (location.location.coordinate.longitude) &#123;</span><br><span class="line">                [dic setObject:@(location.location.coordinate.longitude) forKey:@<span class="string">"longitude"</span>]; <span class="comment">// 经度</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (location.location.altitude) &#123;</span><br><span class="line"><span class="comment">//                NSLog(@"返回海拔高度信息");</span></span><br><span class="line">                [dic setObject:@(location.location.altitude) forKey:@<span class="string">"altitude"</span>];<span class="comment">// 高度</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (location.rgcData) &#123;</span><br><span class="line">                [dic setObject:[location.rgcData country] forKey:@<span class="string">"country"</span>]; <span class="comment">// 国家</span></span><br><span class="line">                [dic setObject:[location.rgcData province] forKey:@<span class="string">"province"</span>]; <span class="comment">// 省份</span></span><br><span class="line">                [dic setObject:[location.rgcData city] forKey:@<span class="string">"city"</span>]; <span class="comment">// 城市</span></span><br><span class="line">                <span class="keyword">if</span> (location.rgcData.district) &#123;</span><br><span class="line">                    [dic setObject:[location.rgcData district] forKey:@<span class="string">"district"</span>]; <span class="comment">// 区县</span></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (location.rgcData.street) &#123;</span><br><span class="line">                    [dic setObject:[location.rgcData street] forKey:@<span class="string">"street"</span>]; <span class="comment">// 街道</span></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (location.rgcData.description) &#123;</span><br><span class="line">                    <span class="comment">// 地址信息</span></span><br><span class="line">                    [dic setObject:[location.rgcData description] forKey:@<span class="string">"address"</span>];</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (location.rgcData.poiList) &#123;</span><br><span class="line"></span><br><span class="line">                    NSString* poilist;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> (location.rgcData.poiList.count == <span class="number">1</span>) &#123;</span><br><span class="line"></span><br><span class="line">                        <span class="keyword">for</span> (BMKLocationPoi * poi in location.rgcData.poiList) &#123;</span><br><span class="line">                            poilist = [[poi name] stringByAppendingFormat:@<span class="string">",%@,%@"</span>, [poi tags], [poi addr]];</span><br><span class="line">                        &#125;</span><br><span class="line"></span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; location.rgcData.poiList.count - <span class="number">1</span> ; i++) &#123;</span><br><span class="line">                            poilist = [poilist stringByAppendingFormat:@<span class="string">"%@,%@,%@|"</span>, location.rgcData.poiList[i].name,location.rgcData.poiList[i].tags,location.rgcData.poiList[i].addr];</span><br><span class="line">                        &#125;</span><br><span class="line"></span><br><span class="line">                        poilist = [poilist stringByAppendingFormat:@<span class="string">"%@,%@,%@"</span>,</span><br><span class="line">                                location.rgcData.poiList[location.rgcData.poiList.count<span class="number">-1</span>].name,location.rgcData.poiList[location.rgcData.poiList.count<span class="number">-1</span>].tags,location.rgcData.poiList[location.rgcData.poiList.count<span class="number">-1</span>].addr];</span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line">                    [dic setObject: poilist forKey:@<span class="string">"poiList"</span>]; <span class="comment">// 周边poi信息</span></span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            [dic setObject: @<span class="number">1</span> forKey:@<span class="string">"errorCode"</span>]; <span class="comment">// 定位结果错误码</span></span><br><span class="line">            [dic setObject:@<span class="string">"location is null"</span> forKey:@<span class="string">"errorInfo"</span>]; <span class="comment">// 定位错误信息</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 定位结果回调时间</span></span><br><span class="line">        [dic setObject:[self getFormatTime:[NSDate date]] forKey:@<span class="string">"callbackTime"</span>];</span><br><span class="line"></span><br><span class="line">        [[BdmapFlutterStreamManager sharedInstance] streamHandler].eventSink(dic);</span><br><span class="line"><span class="comment">//        NSLog(@"x=%f,y=%f",location.location.coordinate.latitude,location.location.coordinate.longitude);</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> 格式化时间</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (NSString *)getFormatTime:(NSDate*)date</span><br><span class="line">&#123;</span><br><span class="line">    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];</span><br><span class="line">    [formatter setDateFormat:@<span class="string">"YYYY-MM-dd HH:mm:ss"</span>];</span><br><span class="line">    NSString *timeString = [formatter stringFromDate:date];</span><br><span class="line">    <span class="keyword">return</span> timeString;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure><h2 id="Flutter-部分"><a href="#Flutter-部分" class="headerlink" title="Flutter 部分"></a>Flutter 部分</h2><h3 id="设置-AK-1"><a href="#设置-AK-1" class="headerlink" title="设置 AK"></a>设置 AK</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@override</span></span><br><span class="line"><span class="keyword">void</span> initState() &#123;</span><br><span class="line">  <span class="keyword">super</span>.initState();</span><br><span class="line">  _requestPermission(); <span class="comment">// 执行权限请求</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (Platform.isIOS == <span class="keyword">true</span>) &#123;</span><br><span class="line">    FlutterBaiduPluginDucafecat.setApiKeyForIOS(</span><br><span class="line">        <span class="string">"dkYT07blcAj3drBbcN1eGFYqt16HP1pR"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>其它代码和 android 同接口 无影响</p></blockquote><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://lbsyun.baidu.com/apiconsole/key#/home" target="_blank" rel="noopener">https://lbsyun.baidu.com/apiconsole/key#/home</a></li><li><a href="https://flutter.dev/docs/development/packages-and-plugins/developing-packages#step-2c-add-ios-platform-code-swifthm" target="_blank" rel="noopener">https://flutter.dev/docs/development/packages-and-plugins/developing-packages#step-2c-add-ios-platform-code-swifthm</a></li><li><a href="http://lbsyun.baidu.com/index.php?title=ios-locsdk/guide/create-project/cocoapods-create" target="_blank" rel="noopener">http://lbsyun.baidu.com/index.php?title=ios-locsdk/guide/create-project/cocoapods-create</a></li><li><a href="http://lbsyun.baidu.com/index.php?title=ios-locsdk" target="_blank" rel="noopener">http://lbsyun.baidu.com/index.php?title=ios-locsdk</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p><p><a href="https://ducafecat.gitee.io" target="_blank" rel="noopener">https://ducafecat.gitee.io</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="Flutter混合开发" scheme="https://blog.ducafecat.tech/categories/Flutter%E6%B7%B7%E5%90%88%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 混合开发 - 02 百度地图定位功能 android 篇</title>
    <link href="https://blog.ducafecat.tech/2020/08/04/flutter-daily/flutter-plugins-02-baidu-map-android/"/>
    <id>https://blog.ducafecat.tech/2020/08/04/flutter-daily/flutter-plugins-02-baidu-map-android/</id>
    <published>2020-08-03T16:00:00.000Z</published>
    <updated>2020-08-24T02:04:41.440Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-08-06-18-10-40.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>百度地图业务</li><li>百度组件初始</li><li>编写定位代码 android 篇</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-08-12-15-01-43.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ flutter doctor</span><br><span class="line">Doctor summary (to see all details, run flutter doctor -v):</span><br><span class="line">[✓] Flutter (Channel stable, 1.20.1, on Mac OS X 10.15.6 19G73, locale zh-Hans-CN)</span><br><span class="line">[✓] Android toolchain - develop <span class="keyword">for</span> Android devices (Android SDK version 29.0.2)</span><br><span class="line">[✓] Xcode - develop <span class="keyword">for</span> iOS and macOS (Xcode 11.6)</span><br><span class="line">[✓] Android Studio (version 4.0)</span><br><span class="line">[✓] VS Code (version 1.47.3)</span><br></pre></td></tr></table></figure><h2 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h2><p><a href="https://www.bilibili.com/video/BV1iK411T7LC/" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1iK411T7LC/</a></p><iframe src="//player.bilibili.com/player.html?bvid=BV1iK411T7LC&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" height="400px"> </iframe><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/ducafecat/flutter_baidu_plugin_ducafecat/releases/tag/v1.0.2" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_baidu_plugin_ducafecat/releases/tag/v1.0.2</a></p><p>可以直接用 👇 v1.0.3</p><p><a href="https://github.com/ducafecat/flutter_baidu_plugin_ducafecat/releases/tag/v1.0.3" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_baidu_plugin_ducafecat/releases/tag/v1.0.3</a></p><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><h3 id="创建组件的几种方式"><a href="#创建组件的几种方式" class="headerlink" title="创建组件的几种方式"></a>创建组件的几种方式</h3><h4 id="现成轮子直接用"><a href="#现成轮子直接用" class="headerlink" title="现成轮子直接用"></a>现成轮子直接用</h4><ul><li><p>官方仓库搜索</p><p><a href="https://pub.dev/flutter/packages" target="_blank" rel="noopener">https://pub.dev/flutter/packages</a></p><p><a href="https://pub.flutter-io.cn/flutter/packages" target="_blank" rel="noopener">https://pub.flutter-io.cn/flutter/packages</a></p></li></ul><h4 id="可参考的组件代码"><a href="#可参考的组件代码" class="headerlink" title="可参考的组件代码"></a>可参考的组件代码</h4><ul><li><p>通过仓库，查找 github 代码仓</p></li><li><p>网站、客服索取代码</p></li></ul><h4 id="参考官方集成文档编写组件"><a href="#参考官方集成文档编写组件" class="headerlink" title="参考官方集成文档编写组件"></a>参考官方集成文档编写组件</h4><ul><li>官网文档</li></ul><p><a href="http://lbsyun.baidu.com/index.php?title=flutter/loc" target="_blank" rel="noopener">http://lbsyun.baidu.com/index.php?title=flutter/loc</a></p><h3 id="组件代码"><a href="#组件代码" class="headerlink" title="组件代码"></a>组件代码</h3><h4 id="百度应用管理，创建-AK"><a href="#百度应用管理，创建-AK" class="headerlink" title="百度应用管理，创建 AK"></a>百度应用管理，创建 AK</h4><ul><li>应用管理</li></ul><p><a href="https://lbsyun.baidu.com/apiconsole/key#/home" target="_blank" rel="noopener">https://lbsyun.baidu.com/apiconsole/key#/home</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-08-06-16-27-33.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>查询 SHA1</li></ul><p><a href="http://lbsyun.baidu.com/index.php?title=FAQ/SHA1" target="_blank" rel="noopener">http://lbsyun.baidu.com/index.php?title=FAQ/SHA1</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-08-06-16-29-26.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">keytool -list -v -keystore ~/.android/debug.keystore -<span class="built_in">alias</span> androiddebugkey</span><br></pre></td></tr></table></figure><ul><li>设置 AK</li></ul><p>example/android/app/src/main/AndroidManifest.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 在这里设置android端ak--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta-data</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:name</span>=<span class="string">"com.baidu.lbsapi.API_KEY"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:value</span>=<span class="string">"aCUtcLDufllGi4nEaKgU8FmBqufFyekh"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">application</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="设置-Android-权限"><a href="#设置-Android-权限" class="headerlink" title="设置 Android 权限"></a>设置 Android 权限</h4><ul><li>文档</li></ul><p><a href="http://lbsyun.baidu.com/index.php?title=android-locsdk/guide/create-project/android-studio" target="_blank" rel="noopener">http://lbsyun.baidu.com/index.php?title=android-locsdk/guide/create-project/android-studio</a></p><ul><li>android/src/main/AndroidManifest.xml</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">manifest</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">package</span>=<span class="string">"tech.ducafecat.flutter_baidu_plugin_ducafecat"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 这个权限用于进行网络定位--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.ACCESS_COARSE_LOCATION"</span>&gt;</span><span class="tag">&lt;/<span class="name">uses-permission</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 这个权限用于访问GPS定位--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.ACCESS_FINE_LOCATION"</span>&gt;</span><span class="tag">&lt;/<span class="name">uses-permission</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 用于访问wifi网络信息，wifi信息会用于进行网络定位--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.ACCESS_WIFI_STATE"</span>&gt;</span><span class="tag">&lt;/<span class="name">uses-permission</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 获取运营商信息，用于支持提供运营商信息相关的接口--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.ACCESS_NETWORK_STATE"</span>&gt;</span><span class="tag">&lt;/<span class="name">uses-permission</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 这个权限用于获取wifi的获取权限，wifi信息会用来进行网络定位--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.CHANGE_WIFI_STATE"</span>&gt;</span><span class="tag">&lt;/<span class="name">uses-permission</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 用于读取手机当前的状态--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.READ_PHONE_STATE"</span>&gt;</span><span class="tag">&lt;/<span class="name">uses-permission</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 写入扩展存储，向扩展卡写入数据，用于写入离线定位数据--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.WRITE_EXTERNAL_STORAGE"</span>&gt;</span><span class="tag">&lt;/<span class="name">uses-permission</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 访问网络，网络定位需要上网--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.INTERNET"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 读取系统信息，包含系统版本等信息，用作统计--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"com.android.launcher.permission.READ_SETTINGS"</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 程序在手机屏幕关闭后后台进程仍然运行--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.WAKE_LOCK"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">application</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 声明service组件 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">service</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:name</span>=<span class="string">"com.baidu.location.f"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:enabled</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:process</span>=<span class="string">":remote"</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">service</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">application</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="添加-android-libs-库文件"><a href="#添加-android-libs-库文件" class="headerlink" title="添加 android libs 库文件"></a>添加 android libs 库文件</h4><ul><li>目录 android/libs</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-08-06-16-27-07.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>android/build.gradle</li></ul><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">android &#123;</span><br><span class="line">    compileSdkVersion <span class="number">28</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">sourceSets</span> &#123;</span><br><span class="line">        main &#123;</span><br><span class="line">            jniLibs.srcDir <span class="string">'libs'</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    defaultConfig &#123;</span><br><span class="line">        minSdkVersion <span class="number">16</span></span><br><span class="line">    &#125;</span><br><span class="line">    lintOptions &#123;</span><br><span class="line">        disable <span class="string">'InvalidPackage'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    implementation files(<span class="string">'libs/BaiduLBS_Android.jar'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="编写-Flutter-组件代码"><a href="#编写-Flutter-组件代码" class="headerlink" title="编写 Flutter 组件代码"></a>编写 Flutter 组件代码</h4><ul><li>目录 lib</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-08-06-16-30-34.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>地理信息 lib/entity/flutter_baidu_location.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="markdown">/// 百度定位结果类，用于存储各类定位结果信息</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BaiduLocation</span> </span>&#123;</span><br><span class="line">  <span class="comment"><span class="markdown">/// 定位成功时间</span></span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> locTime;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 定位结果类型</span></span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">int</span> locType;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 半径</span></span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">double</span> radius;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 纬度</span></span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">double</span> latitude;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 经度</span></span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">double</span> longitude;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 海拔</span></span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">double</span> altitude;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 国家</span></span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> country;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 省份</span></span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> province;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 城市</span></span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> city;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 区县</span></span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> district;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 街道</span></span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> street;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 地址</span></span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> address;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 位置语义化描述，例如"在百度大厦附近"</span></span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> locationDetail;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 周边poi信息，每个poi之间用"|"隔开</span></span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> poiList;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 定位结果回调时间</span></span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> callbackTime;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 错误码</span></span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">int</span> errorCode;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 定位失败描述信息</span></span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> errorInfo;</span><br><span class="line"></span><br><span class="line">  BaiduLocation(</span><br><span class="line">      &#123;<span class="keyword">this</span>.locTime,</span><br><span class="line">      <span class="keyword">this</span>.locType,</span><br><span class="line">      <span class="keyword">this</span>.radius,</span><br><span class="line">      <span class="keyword">this</span>.latitude,</span><br><span class="line">      <span class="keyword">this</span>.longitude,</span><br><span class="line">      <span class="keyword">this</span>.altitude,</span><br><span class="line">      <span class="keyword">this</span>.country,</span><br><span class="line">      <span class="keyword">this</span>.province,</span><br><span class="line">      <span class="keyword">this</span>.city,</span><br><span class="line">      <span class="keyword">this</span>.district,</span><br><span class="line">      <span class="keyword">this</span>.street,</span><br><span class="line">      <span class="keyword">this</span>.address,</span><br><span class="line">      <span class="keyword">this</span>.locationDetail,</span><br><span class="line">      <span class="keyword">this</span>.poiList,</span><br><span class="line">      <span class="keyword">this</span>.callbackTime,</span><br><span class="line">      <span class="keyword">this</span>.errorCode,</span><br><span class="line">      <span class="keyword">this</span>.errorInfo&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 根据传入的map生成BaiduLocation对象</span></span></span><br><span class="line">  <span class="keyword">factory</span> BaiduLocation.fromMap(<span class="keyword">dynamic</span> value) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> BaiduLocation(</span><br><span class="line">      locTime: value[<span class="string">'locTime'</span>],</span><br><span class="line">      locType: value[<span class="string">'locType'</span>],</span><br><span class="line">      radius: value[<span class="string">'radius'</span>],</span><br><span class="line">      latitude: value[<span class="string">'latitude'</span>],</span><br><span class="line">      longitude: value[<span class="string">'longitude'</span>],</span><br><span class="line">      altitude: value[<span class="string">'altitude'</span>],</span><br><span class="line">      country: value[<span class="string">'country'</span>],</span><br><span class="line">      province: value[<span class="string">'province'</span>],</span><br><span class="line">      city: value[<span class="string">'city'</span>],</span><br><span class="line">      district: value[<span class="string">'district'</span>],</span><br><span class="line">      street: value[<span class="string">'street'</span>],</span><br><span class="line">      address: value[<span class="string">'address'</span>],</span><br><span class="line">      locationDetail: value[<span class="string">'locationDetail'</span>],</span><br><span class="line">      poiList: value[<span class="string">'poiList'</span>],</span><br><span class="line">      callbackTime: value[<span class="string">'callbackTime'</span>],</span><br><span class="line">      errorCode: value[<span class="string">'errorCode'</span>],</span><br><span class="line">      errorInfo: value[<span class="string">'errorInfo'</span>],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 获取对本类所有变量赋值后的map键值对</span></span></span><br><span class="line">  <span class="built_in">Map</span> getMap() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="string">"locTime"</span>: locTime,</span><br><span class="line">      <span class="string">"locType"</span>: locType,</span><br><span class="line">      <span class="string">"radius"</span>: radius,</span><br><span class="line">      <span class="string">"latitude"</span>: latitude,</span><br><span class="line">      <span class="string">"longitude"</span>: longitude,</span><br><span class="line">      <span class="string">"altitude"</span>: altitude,</span><br><span class="line">      <span class="string">"country"</span>: country,</span><br><span class="line">      <span class="string">"province"</span>: province,</span><br><span class="line">      <span class="string">"city"</span>: city,</span><br><span class="line">      <span class="string">"district"</span>: district,</span><br><span class="line">      <span class="string">"street"</span>: street,</span><br><span class="line">      <span class="string">"address"</span>: address,</span><br><span class="line">      <span class="string">"locationDescribe"</span>: locationDetail,</span><br><span class="line">      <span class="string">"poiList"</span>: poiList,</span><br><span class="line">      <span class="string">"callbackTime"</span>: callbackTime,</span><br><span class="line">      <span class="string">"errorCode"</span>: errorCode,</span><br><span class="line">      <span class="string">"errorInfo"</span>: errorInfo,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>android 配置项 lib/entity/flutter_baidu_location_android_option.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="markdown">/// 设置android端定位参数类</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BaiduLocationAndroidOption</span> </span>&#123;</span><br><span class="line">  <span class="comment"><span class="markdown">/// 坐标系类型</span></span></span><br><span class="line">  <span class="built_in">String</span> coorType;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 是否需要返回地址信息</span></span></span><br><span class="line">  <span class="built_in">bool</span> isNeedAddres;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 是否需要返回海拔高度信息</span></span></span><br><span class="line">  <span class="built_in">bool</span> isNeedAltitude;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 是否需要返回周边poi信息</span></span></span><br><span class="line">  <span class="built_in">bool</span> isNeedLocationPoiList;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 是否需要返回新版本rgc信息</span></span></span><br><span class="line">  <span class="built_in">bool</span> isNeedNewVersionRgc;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 是否需要返回位置描述信息</span></span></span><br><span class="line">  <span class="built_in">bool</span> isNeedLocationDescribe;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 是否使用gps</span></span></span><br><span class="line">  <span class="built_in">bool</span> openGps;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 可选，设置发起定位请求的间隔，int类型，单位ms</span></span></span><br><span class="line">  <span class="comment"><span class="markdown">/// 如果设置为0，则代表单次定位，即仅定位一次，默认为0</span></span></span><br><span class="line">  <span class="comment"><span class="markdown">/// 如果设置非0，需设置1000ms以上才有效</span></span></span><br><span class="line">  <span class="built_in">int</span> scanspan;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 设置定位模式，可选的模式有高精度、仅设备、仅网络。默认为高精度模式</span></span></span><br><span class="line">  <span class="built_in">int</span> locationMode;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 可选，设置场景定位参数，包括签到场景、运动场景、出行场景</span></span></span><br><span class="line">  <span class="built_in">int</span> locationPurpose;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 可选，设置返回经纬度坐标类型，默认GCJ02</span></span></span><br><span class="line">  <span class="comment"><span class="markdown">/// GCJ02：国测局坐标；</span></span></span><br><span class="line">  <span class="comment"><span class="markdown">/// BD09ll：百度经纬度坐标；</span></span></span><br><span class="line">  <span class="comment"><span class="markdown">/// BD09：百度墨卡托坐标；</span></span></span><br><span class="line">  <span class="comment"><span class="markdown">/// 海外地区定位，无需设置坐标类型，统一返回WGS84类型坐标</span></span></span><br><span class="line">  <span class="keyword">void</span> setCoorType(<span class="built_in">String</span> coorType) &#123;</span><br><span class="line">    <span class="keyword">this</span>.coorType = coorType;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 是否需要返回地址信息</span></span></span><br><span class="line">  <span class="keyword">void</span> setIsNeedAddres(<span class="built_in">bool</span> isNeedAddres) &#123;</span><br><span class="line">    <span class="keyword">this</span>.isNeedAddres = isNeedAddres;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 是否需要返回海拔高度信息</span></span></span><br><span class="line">  <span class="keyword">void</span> setIsNeedAltitude(<span class="built_in">bool</span> isNeedAltitude) &#123;</span><br><span class="line">    <span class="keyword">this</span>.isNeedAltitude = isNeedAltitude;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 是否需要返回周边poi信息</span></span></span><br><span class="line">  <span class="keyword">void</span> setIsNeedLocationPoiList(<span class="built_in">bool</span> isNeedLocationPoiList) &#123;</span><br><span class="line">    <span class="keyword">this</span>.isNeedLocationPoiList = isNeedLocationPoiList;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 是否需要返回位置描述信息</span></span></span><br><span class="line">  <span class="keyword">void</span> setIsNeedLocationDescribe(<span class="built_in">bool</span> isNeedLocationDescribe) &#123;</span><br><span class="line">    <span class="keyword">this</span>.isNeedLocationDescribe = isNeedLocationDescribe;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 是否需要返回新版本rgc信息</span></span></span><br><span class="line">  <span class="keyword">void</span> setIsNeedNewVersionRgc(<span class="built_in">bool</span> isNeedNewVersionRgc) &#123;</span><br><span class="line">    <span class="keyword">this</span>.isNeedNewVersionRgc = isNeedNewVersionRgc;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 是否使用gps</span></span></span><br><span class="line">  <span class="keyword">void</span> setOpenGps(<span class="built_in">bool</span> openGps) &#123;</span><br><span class="line">    <span class="keyword">this</span>.openGps = openGps;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 可选，设置发起定位请求的间隔，int类型，单位ms</span></span></span><br><span class="line">  <span class="comment"><span class="markdown">/// 如果设置为0，则代表单次定位，即仅定位一次，默认为0</span></span></span><br><span class="line">  <span class="comment"><span class="markdown">/// 如果设置非0，需设置1000ms以上才有效</span></span></span><br><span class="line">  <span class="keyword">void</span> setScanspan(<span class="built_in">int</span> scanspan) &#123;</span><br><span class="line">    <span class="keyword">this</span>.scanspan = scanspan;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 设置定位模式，可选的模式有高精度、仅设备、仅网络，默认为高精度模式</span></span></span><br><span class="line">  <span class="keyword">void</span> setLocationMode(LocationMode locationMode) &#123;</span><br><span class="line">    <span class="keyword">if</span> (locationMode == LocationMode.Hight_Accuracy) &#123;</span><br><span class="line">      <span class="keyword">this</span>.locationMode = <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (locationMode == LocationMode.Device_Sensors) &#123;</span><br><span class="line">      <span class="keyword">this</span>.locationMode = <span class="number">2</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (locationMode == LocationMode.Battery_Saving) &#123;</span><br><span class="line">      <span class="keyword">this</span>.locationMode = <span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 可选，设置场景定位参数，包括签到场景、运动场景、出行场景</span></span></span><br><span class="line">  <span class="keyword">void</span> setLocationPurpose(BDLocationPurpose locationPurpose) &#123;</span><br><span class="line">    <span class="keyword">if</span> (locationPurpose == BDLocationPurpose.SignIn) &#123;</span><br><span class="line">      <span class="keyword">this</span>.locationPurpose = <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (locationPurpose == BDLocationPurpose.Transport) &#123;</span><br><span class="line">      <span class="keyword">this</span>.locationPurpose = <span class="number">2</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (locationPurpose == BDLocationPurpose.Sport) &#123;</span><br><span class="line">      <span class="keyword">this</span>.locationPurpose = <span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  BaiduLocationAndroidOption(</span><br><span class="line">      &#123;<span class="keyword">this</span>.coorType,</span><br><span class="line">      <span class="keyword">this</span>.isNeedAddres,</span><br><span class="line">      <span class="keyword">this</span>.isNeedAltitude,</span><br><span class="line">      <span class="keyword">this</span>.isNeedLocationPoiList,</span><br><span class="line">      <span class="keyword">this</span>.isNeedNewVersionRgc,</span><br><span class="line">      <span class="keyword">this</span>.openGps,</span><br><span class="line">      <span class="keyword">this</span>.isNeedLocationDescribe,</span><br><span class="line">      <span class="keyword">this</span>.scanspan,</span><br><span class="line">      <span class="keyword">this</span>.locationMode,</span><br><span class="line">      <span class="keyword">this</span>.locationPurpose&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 根据传入的map生成BaiduLocationAndroidOption对象</span></span></span><br><span class="line">  <span class="keyword">factory</span> BaiduLocationAndroidOption.fromMap(<span class="keyword">dynamic</span> value) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> BaiduLocationAndroidOption(</span><br><span class="line">      coorType: value[<span class="string">'coorType'</span>],</span><br><span class="line">      isNeedAddres: value[<span class="string">'isNeedAddres'</span>],</span><br><span class="line">      isNeedAltitude: value[<span class="string">'isNeedAltitude'</span>],</span><br><span class="line">      isNeedLocationPoiList: value[<span class="string">'isNeedLocationPoiList'</span>],</span><br><span class="line">      isNeedNewVersionRgc: value[<span class="string">'isNeedNewVersionRgc'</span>],</span><br><span class="line">      openGps: value[<span class="string">'openGps'</span>],</span><br><span class="line">      isNeedLocationDescribe: value[<span class="string">''</span>],</span><br><span class="line">      scanspan: value[<span class="string">'scanspan'</span>],</span><br><span class="line">      locationMode: value[<span class="string">'locationMode'</span>],</span><br><span class="line">      locationPurpose: value[<span class="string">'LocationPurpose'</span>],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 获取对本类所有变量赋值后的map键值对</span></span></span><br><span class="line">  <span class="built_in">Map</span> getMap() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="string">"coorType"</span>: coorType,</span><br><span class="line">      <span class="string">"isNeedAddres"</span>: isNeedAddres,</span><br><span class="line">      <span class="string">"isNeedAltitude"</span>: isNeedAltitude,</span><br><span class="line">      <span class="string">"isNeedLocationPoiList"</span>: isNeedLocationPoiList,</span><br><span class="line">      <span class="string">"isNeedNewVersionRgc"</span>: isNeedNewVersionRgc,</span><br><span class="line">      <span class="string">"openGps"</span>: openGps,</span><br><span class="line">      <span class="string">"isNeedLocationDescribe"</span>: isNeedLocationDescribe,</span><br><span class="line">      <span class="string">"scanspan"</span>: scanspan,</span><br><span class="line">      <span class="string">"locationMode"</span>: locationMode,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="markdown">/// 定位模式枚举类</span></span></span><br><span class="line"><span class="keyword">enum</span> LocationMode &#123;</span><br><span class="line">  <span class="comment"><span class="markdown">/// 高精度模式</span></span></span><br><span class="line">  Hight_Accuracy,</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 低功耗模式</span></span></span><br><span class="line">  Battery_Saving,</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 仅设备(Gps)模式</span></span></span><br><span class="line">  Device_Sensors</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="markdown">/// 场景定位枚举类</span></span></span><br><span class="line"><span class="keyword">enum</span> BDLocationPurpose &#123;</span><br><span class="line">  <span class="comment"><span class="markdown">///  签到场景</span></span></span><br><span class="line">  <span class="comment"><span class="markdown">/// 只进行一次定位返回最接近真实位置的定位结果（定位速度可能会延迟1-3s）</span></span></span><br><span class="line">  SignIn,</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 出行场景</span></span></span><br><span class="line">  <span class="comment"><span class="markdown">/// 高精度连续定位，适用于有户内外切换的场景，卫星定位和网络定位相互切换，卫星定位成功之后网络定位不再返回，卫星信号断开之后一段时间才会返回网络结果</span></span></span><br><span class="line">  Sport,</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 运动场景</span></span></span><br><span class="line">  <span class="comment"><span class="markdown">/// 高精度连续定位，适用于有户内外切换的场景，卫星定位和网络定位相互切换，卫星定位成功之后网络定位不再返回，卫星信号断开之后一段时间才会返回网络结果</span></span></span><br><span class="line">  Transport</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ios 配置项 lib/entity/flutter_baidu_location_ios_option.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="markdown">/// 设置ios端定位参数类</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BaiduLocationIOSOption</span> </span>&#123;</span><br><span class="line">  <span class="comment"><span class="markdown">/// 设置位置获取超时时间</span></span></span><br><span class="line">  <span class="built_in">int</span> locationTimeout;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 设置获取地址信息超时时间</span></span></span><br><span class="line">  <span class="built_in">int</span> reGeocodeTimeout;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 设置应用位置类型</span></span></span><br><span class="line">  <span class="built_in">String</span> activityType;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 设置返回位置的坐标系类型</span></span></span><br><span class="line">  <span class="built_in">String</span> BMKLocationCoordinateType;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 设置预期精度参数</span></span></span><br><span class="line">  <span class="built_in">String</span> desiredAccuracy;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 是否需要最新版本rgc数据</span></span></span><br><span class="line">  <span class="built_in">bool</span> isNeedNewVersionRgc;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 指定定位是否会被系统自动暂停</span></span></span><br><span class="line">  <span class="built_in">bool</span> pausesLocationUpdatesAutomatically;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 指定是否允许后台定位</span></span></span><br><span class="line">  <span class="built_in">bool</span> allowsBackgroundLocationUpdates;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 设定定位的最小更新距离</span></span></span><br><span class="line">  <span class="built_in">double</span> distanceFilter;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 指定是否允许后台定位</span></span></span><br><span class="line">  <span class="comment"><span class="markdown">/// allowsBackgroundLocationUpdates为true则允许后台定位</span></span></span><br><span class="line">  <span class="comment"><span class="markdown">/// allowsBackgroundLocationUpdates为false则不允许后台定位</span></span></span><br><span class="line">  <span class="keyword">void</span> setAllowsBackgroundLocationUpdates(</span><br><span class="line">      <span class="built_in">bool</span> allowsBackgroundLocationUpdates) &#123;</span><br><span class="line">    <span class="keyword">this</span>.allowsBackgroundLocationUpdates = allowsBackgroundLocationUpdates;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 指定定位是否会被系统自动暂停</span></span></span><br><span class="line">  <span class="comment"><span class="markdown">/// pausesLocationUpdatesAutomatically为true则定位会被系统自动暂停</span></span></span><br><span class="line">  <span class="comment"><span class="markdown">/// pausesLocationUpdatesAutomatically为false则定位不会被系统自动暂停</span></span></span><br><span class="line">  <span class="keyword">void</span> setPauseLocUpdateAutomatically(<span class="built_in">bool</span> pausesLocationUpdatesAutomatically) &#123;</span><br><span class="line">    <span class="keyword">this</span>.pausesLocationUpdatesAutomatically =</span><br><span class="line">        pausesLocationUpdatesAutomatically;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 设置位置获取超时时间</span></span></span><br><span class="line">  <span class="keyword">void</span> setLocationTimeout(<span class="built_in">int</span> locationTimeout) &#123;</span><br><span class="line">    <span class="keyword">this</span>.locationTimeout = locationTimeout;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 设置获取地址信息超时时间</span></span></span><br><span class="line">  <span class="keyword">void</span> setReGeocodeTimeout(<span class="built_in">int</span> reGeocodeTimeout) &#123;</span><br><span class="line">    <span class="keyword">this</span>.reGeocodeTimeout = reGeocodeTimeout;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 设置应用位置类型</span></span></span><br><span class="line">  <span class="comment"><span class="markdown">/// activityType可选值包括:</span></span></span><br><span class="line">  <span class="comment"><span class="markdown">/// "CLActivityTypeOther"</span></span></span><br><span class="line">  <span class="comment"><span class="markdown">/// "CLActivityTypeAutomotiveNavigation"</span></span></span><br><span class="line">  <span class="comment"><span class="markdown">/// "CLActivityTypeFitness"</span></span></span><br><span class="line">  <span class="comment"><span class="markdown">/// "CLActivityTypeOtherNavigation"</span></span></span><br><span class="line">  <span class="keyword">void</span> setActivityType(<span class="built_in">String</span> activityType) &#123;</span><br><span class="line">    <span class="keyword">this</span>.activityType = activityType;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 设置返回位置的坐标系类型</span></span></span><br><span class="line">  <span class="comment"><span class="markdown">/// BMKLocationCoordinateType可选值包括:</span></span></span><br><span class="line">  <span class="comment"><span class="markdown">/// "BMKLocationCoordinateTypeBMK09LL"</span></span></span><br><span class="line">  <span class="comment"><span class="markdown">/// "BMKLocationCoordinateTypeBMK09MC"</span></span></span><br><span class="line">  <span class="comment"><span class="markdown">/// "BMKLocationCoordinateTypeWGS84"</span></span></span><br><span class="line">  <span class="comment"><span class="markdown">/// "BMKLocationCoordinateTypeGCJ02"</span></span></span><br><span class="line">  <span class="keyword">void</span> setBMKLocationCoordinateType(<span class="built_in">String</span> BMKLocationCoordinateType) &#123;</span><br><span class="line">    <span class="keyword">this</span>.BMKLocationCoordinateType = BMKLocationCoordinateType;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 设置预期精度参数</span></span></span><br><span class="line">  <span class="comment"><span class="markdown">/// desiredAccuracy可选值包括:</span></span></span><br><span class="line">  <span class="comment"><span class="markdown">/// "kCLLocationAccuracyBest"</span></span></span><br><span class="line">  <span class="comment"><span class="markdown">/// "kCLLocationAccuracyNearestTenMeters"</span></span></span><br><span class="line">  <span class="comment"><span class="markdown">/// "kCLLocationAccuracyHundredMeters"</span></span></span><br><span class="line">  <span class="comment"><span class="markdown">/// "kCLLocationAccuracyKilometer"</span></span></span><br><span class="line">  <span class="keyword">void</span> setDesiredAccuracy(<span class="built_in">String</span> desiredAccuracy) &#123;</span><br><span class="line">    <span class="keyword">this</span>.desiredAccuracy = desiredAccuracy;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 设定定位的最小更新距离</span></span></span><br><span class="line">  <span class="keyword">void</span> setDistanceFilter(<span class="built_in">double</span> distanceFilter) &#123;</span><br><span class="line">    <span class="keyword">this</span>.distanceFilter = distanceFilter;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 是否需要最新版本rgc数据</span></span></span><br><span class="line">  <span class="comment"><span class="markdown">/// isNeedNewVersionRgc为true则需要返回最新版本rgc数据</span></span></span><br><span class="line">  <span class="comment"><span class="markdown">/// isNeedNewVersionRgc为false则不需要返回最新版本rgc数据</span></span></span><br><span class="line">  <span class="keyword">void</span> setIsNeedNewVersionRgc(<span class="built_in">bool</span> isNeedNewVersionRgc) &#123;</span><br><span class="line">    <span class="keyword">this</span>.isNeedNewVersionRgc = isNeedNewVersionRgc;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  BaiduLocationIOSOption(</span><br><span class="line">      &#123;<span class="keyword">this</span>.locationTimeout,</span><br><span class="line">      <span class="keyword">this</span>.reGeocodeTimeout,</span><br><span class="line">      <span class="keyword">this</span>.activityType,</span><br><span class="line">      <span class="keyword">this</span>.BMKLocationCoordinateType,</span><br><span class="line">      <span class="keyword">this</span>.desiredAccuracy,</span><br><span class="line">      <span class="keyword">this</span>.isNeedNewVersionRgc,</span><br><span class="line">      <span class="keyword">this</span>.pausesLocationUpdatesAutomatically,</span><br><span class="line">      <span class="keyword">this</span>.allowsBackgroundLocationUpdates,</span><br><span class="line">      <span class="keyword">this</span>.distanceFilter&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 根据传入的map生成BaiduLocationIOSOption对象</span></span></span><br><span class="line">  <span class="keyword">factory</span> BaiduLocationIOSOption.fromMap(<span class="keyword">dynamic</span> value) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> BaiduLocationIOSOption(</span><br><span class="line">      locationTimeout: value[<span class="string">'locationTimeout'</span>],</span><br><span class="line">      reGeocodeTimeout: value[<span class="string">'reGeocodeTimeout'</span>],</span><br><span class="line">      activityType: value[<span class="string">'activityType'</span>],</span><br><span class="line">      BMKLocationCoordinateType: value[<span class="string">'BMKLocationCoordinateType'</span>],</span><br><span class="line">      desiredAccuracy: value[<span class="string">'desiredAccuracy'</span>],</span><br><span class="line">      isNeedNewVersionRgc: value[<span class="string">'isNeedNewVersionRgc'</span>],</span><br><span class="line">      pausesLocationUpdatesAutomatically:</span><br><span class="line">          value[<span class="string">'pausesLocationUpdatesAutomatically'</span>],</span><br><span class="line">      allowsBackgroundLocationUpdates: value[<span class="string">'allowsBackgroundLocationUpdates'</span>],</span><br><span class="line">      distanceFilter: value[<span class="string">'distanceFilter'</span>],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 获取对本类所有变量赋值后的map键值对</span></span></span><br><span class="line">  <span class="built_in">Map</span> getMap() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="string">"locationTimeout"</span>: locationTimeout,</span><br><span class="line">      <span class="string">"reGeocodeTimeout"</span>: reGeocodeTimeout,</span><br><span class="line">      <span class="string">"activityType"</span>: activityType,</span><br><span class="line">      <span class="string">"BMKLocationCoordinateType"</span>: BMKLocationCoordinateType,</span><br><span class="line">      <span class="string">"desiredAccuracy"</span>: desiredAccuracy,</span><br><span class="line">      <span class="string">"isNeedNewVersionRgc"</span>: isNeedNewVersionRgc,</span><br><span class="line">      <span class="string">"pausesLocationUpdatesAutomatically"</span>: pausesLocationUpdatesAutomatically,</span><br><span class="line">      <span class="string">"allowsBackgroundLocationUpdates"</span>: allowsBackgroundLocationUpdates,</span><br><span class="line">      <span class="string">"distanceFilter"</span>: distanceFilter,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>接口 lib/flutter_baidu_plugin_ducafecat.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'dart:async'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'dart:io'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/services.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FlutterBaiduPluginDucafecat</span> </span>&#123;</span><br><span class="line">  <span class="comment"><span class="markdown">/// flutter端主动调用原生端方法</span></span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> MethodChannel _channel =</span><br><span class="line">      <span class="keyword">const</span> MethodChannel(<span class="string">'flutter_baidu_plugin_ducafecat'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 原生端主动回传结果数据到flutter端</span></span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> EventChannel _stream =</span><br><span class="line">      <span class="keyword">const</span> EventChannel(<span class="string">"flutter_baidu_plugin_ducafecat_stream"</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// ios 下设置 key</span></span></span><br><span class="line">  <span class="comment"><span class="markdown">/// android 在 AndroidManifest.xml 中设置</span></span></span><br><span class="line">  <span class="keyword">static</span> Future&lt;<span class="built_in">bool</span>&gt; setApiKey(<span class="built_in">String</span> key) <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">await</span> _channel.invokeMethod(<span class="string">"setApiKey"</span>, key);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 设置定位参数</span></span></span><br><span class="line">  <span class="keyword">void</span> prepareLoc(<span class="built_in">Map</span> androidMap, <span class="built_in">Map</span> iosMap) &#123;</span><br><span class="line">    <span class="built_in">Map</span> map;</span><br><span class="line">    <span class="keyword">if</span> (Platform.isAndroid) &#123;</span><br><span class="line">      map = androidMap;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      map = iosMap;</span><br><span class="line">    &#125;</span><br><span class="line">    _channel.invokeMethod(<span class="string">"updateOption"</span>, map);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 启动定位</span></span></span><br><span class="line">  <span class="keyword">void</span> startLocation() &#123;</span><br><span class="line">    _channel.invokeMethod(<span class="string">'startLocation'</span>);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 停止定位</span></span></span><br><span class="line">  <span class="keyword">void</span> stopLocation() &#123;</span><br><span class="line">    _channel.invokeMethod(<span class="string">'stopLocation'</span>);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 原生端回传键值对map到flutter端</span></span></span><br><span class="line">  <span class="comment"><span class="markdown">/// map中key为isInChina对应的value，如果为1则判断是在国内，为0则判断是在国外</span></span></span><br><span class="line">  <span class="comment"><span class="markdown">/// map中存在key为nearby则判断为已到达设置监听位置附近</span></span></span><br><span class="line">  Stream&lt;<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">Object</span>&gt;&gt; onResultCallback() &#123;</span><br><span class="line">    Stream&lt;<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">Object</span>&gt;&gt; _resultMap;</span><br><span class="line">    <span class="keyword">if</span> (_resultMap == <span class="keyword">null</span>) &#123;</span><br><span class="line">      _resultMap = _stream.receiveBroadcastStream().map&lt;<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">Object</span>&gt;&gt;(</span><br><span class="line">          (element) =&gt; element.cast&lt;<span class="built_in">String</span>, <span class="built_in">Object</span>&gt;());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> _resultMap;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="触发-registerWith-的方式，老项目"><a href="#触发-registerWith-的方式，老项目" class="headerlink" title="触发 registerWith 的方式，老项目"></a>触发 registerWith 的方式，老项目</h4><blockquote><p>// This static function is optional and equivalent to onAttachedToEngine. It supports the old<br>// pre-Flutter-1.12 Android projects. You are encouraged to continue supporting<br>// plugin registration via this function while apps migrate to use the new Android APIs<br>// post-flutter-1.12 via <a href="https://flutter.dev/go/android-project-migration" target="_blank" rel="noopener">https://flutter.dev/go/android-project-migration</a>.</p></blockquote><ul><li>android 组件代码</li></ul><p>android/src/main/java/tech/ducafecat/flutter_baidu_plugin_ducafecat/FlutterBaiduPluginDucafecatPlugin.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">registerWith</span><span class="params">(Registrar registrar)</span> </span>&#123;</span><br><span class="line">  ......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>example android 注册组件</li></ul><p>example/android/app/src/main/java/io/flutter/plugins/GeneratedPluginRegistrant.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">GeneratedPluginRegistrant</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">registerWith</span><span class="params">(PluginRegistry registry)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (alreadyRegisteredWith(registry)) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    LocationFlutterPlugin.registerWith(registry.registrarFor(<span class="string">"com.baidu.bdmap_location_flutter_plugin.LocationFlutterPlugin"</span>));</span><br><span class="line">    PermissionHandlerPlugin.registerWith(registry.registrarFor(<span class="string">"com.baseflow.permissionhandler.PermissionHandlerPlugin"</span>));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">alreadyRegisteredWith</span><span class="params">(PluginRegistry registry)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> String key = GeneratedPluginRegistrant.class.getCanonicalName();</span><br><span class="line">    <span class="keyword">if</span> (registry.hasPlugin(key)) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    registry.registrarFor(key);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="成员变量、同步、异步处理"><a href="#成员变量、同步、异步处理" class="headerlink" title="成员变量、同步、异步处理"></a>成员变量、同步、异步处理</h4><p>MethodChannel 请求方法后，同步返回结果</p><p>EventChannel 组件主动推消息到 Flutter</p><ul><li>android/src/main/java/tech/ducafecat/flutter_baidu_plugin_ducafecat/FlutterBaiduPluginDucafecatPlugin.java</li></ul><p>用到的成员变量先定义下</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FlutterBaiduPluginDucafecatPlugin</span> <span class="keyword">implements</span> <span class="title">FlutterPlugin</span>, <span class="title">MethodCallHandler</span>, <span class="title">EventChannel</span>.<span class="title">StreamHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 通道名称</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String CHANNEL_METHOD_LOCATION = <span class="string">"flutter_baidu_plugin_ducafecat"</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String CHANNEL_STREAM_LOCATION = <span class="string">"flutter_baidu_plugin_ducafecat_stream"</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> Context mContext = <span class="keyword">null</span>; <span class="comment">// flutter view context</span></span><br><span class="line">  <span class="keyword">private</span> LocationClient mLocationClient = <span class="keyword">null</span>; <span class="comment">// 定位对象</span></span><br><span class="line">  <span class="keyword">private</span> EventChannel.EventSink mEventSink = <span class="keyword">null</span>; <span class="comment">// 事件对象</span></span><br><span class="line">  <span class="keyword">private</span> BDNotifyListener mNotifyListener; <span class="comment">// 位置提醒对象</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">boolean</span> isPurporseLoc = <span class="keyword">false</span>; <span class="comment">// 签到场景</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">boolean</span> isInChina = <span class="keyword">false</span>;  <span class="comment">// 是否启用国内外位置判断功能</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">boolean</span> isNotify = <span class="keyword">false</span>; <span class="comment">// 位置提醒</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 通道对象</span></span><br><span class="line">  <span class="keyword">private</span> MethodChannel channel = <span class="keyword">null</span>;</span><br><span class="line">  <span class="keyword">private</span> EventChannel eventChannel = <span class="keyword">null</span>;</span><br></pre></td></tr></table></figure><h4 id="组件生命周期"><a href="#组件生命周期" class="headerlink" title="组件生命周期"></a>组件生命周期</h4><ul><li>文件</li></ul><p>android/src/main/java/tech/ducafecat/flutter_baidu_plugin_ducafecat/FlutterBaiduPluginDucafecatPlugin.java</p><ul><li>组件注册 onAttachedToEngine</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAttachedToEngine</span><span class="params">(@NonNull FlutterPluginBinding flutterPluginBinding)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">this</span>.mContext = flutterPluginBinding.getApplicationContext();</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 开始、停止定位</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  channel = <span class="keyword">new</span> MethodChannel(flutterPluginBinding.getBinaryMessenger(), CHANNEL_METHOD_LOCATION);</span><br><span class="line">  channel.setMethodCallHandler(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 监听位置变化</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  eventChannel = <span class="keyword">new</span> EventChannel(flutterPluginBinding.getBinaryMessenger(), CHANNEL_STREAM_LOCATION);</span><br><span class="line">  eventChannel.setStreamHandler(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>老项目 组件注册 registerWith</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">registerWith</span><span class="params">(Registrar registrar)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    FlutterBaiduPluginDucafecatPlugin plugin = <span class="keyword">new</span> FlutterBaiduPluginDucafecatPlugin();</span><br><span class="line">    plugin.mContext = registrar.context();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 开始、停止定位</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">final</span> MethodChannel channel = <span class="keyword">new</span> MethodChannel(registrar.messenger(), CHANNEL_METHOD_LOCATION);</span><br><span class="line">    channel.setMethodCallHandler(plugin);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 监听位置变化</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">final</span> EventChannel eventChannel = <span class="keyword">new</span> EventChannel(registrar.messenger(), CHANNEL_STREAM_LOCATION);</span><br><span class="line">    eventChannel.setStreamHandler(plugin);</span><br><span class="line"></span><br><span class="line"><span class="comment">//    final MethodChannel channel = new MethodChannel(registrar.messenger(), "flutter_baidu_plugin_ducafecat");</span></span><br><span class="line"><span class="comment">//    channel.setMethodCallHandler(new FlutterBaiduPluginDucafecatPlugin());</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><ul><li>注销组件 onCancel</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCancel</span><span class="params">(Object arguments)</span> </span>&#123;</span><br><span class="line">  stopLocation();</span><br><span class="line">  <span class="keyword">if</span> (isNotify) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">null</span> != mLocationClient) &#123;</span><br><span class="line">      mLocationClient.removeNotifyEvent(mNotifyListener);</span><br><span class="line">    &#125;</span><br><span class="line">    mNotifyListener = <span class="keyword">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>销毁组件 onDetachedFromEngine</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onDetachedFromEngine</span><span class="params">(@NonNull FlutterPluginBinding binding)</span> </span>&#123;</span><br><span class="line">  channel.setMethodCallHandler(<span class="keyword">null</span>);</span><br><span class="line">  eventChannel.setStreamHandler(<span class="keyword">null</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>方法调用 onMethodCall</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onMethodCall</span><span class="params">(@NonNull MethodCall call, @NonNull Result result)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="string">"startLocation"</span>.equals(call.method)) &#123;</span><br><span class="line">    startLocation(); <span class="comment">// 启动定位</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">"stopLocation"</span>.equals(call.method)) &#123;</span><br><span class="line">    stopLocation(); <span class="comment">// 停止定位</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">"updateOption"</span>.equals(call.method)) &#123; <span class="comment">// 设置定位参数</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      updateOption((Map) call.arguments);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> ((<span class="string">"getPlatformVersion"</span>).equals(call.method)) &#123;</span><br><span class="line">    result.success(<span class="string">"Android "</span> + android.os.Build.VERSION.RELEASE);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    result.notImplemented();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>flutter onListen 回调对象</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onListen</span><span class="params">(Object arguments, EventChannel.EventSink events)</span> </span>&#123;</span><br><span class="line">  mEventSink = events;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="地图业务参数"><a href="#地图业务参数" class="headerlink" title="地图业务参数"></a>地图业务参数</h4><ul><li>更新参数 updateOption</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 准备定位</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> arguments</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">updateOption</span><span class="params">(Map arguments)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">null</span> == mLocationClient) &#123;</span><br><span class="line">    mLocationClient = <span class="keyword">new</span> LocationClient(mContext);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 判断是否启用位置提醒功能</span></span><br><span class="line">  <span class="keyword">if</span> (arguments.containsKey(<span class="string">"isNotify"</span>)) &#123;</span><br><span class="line">    isNotify = <span class="keyword">true</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">null</span> == mNotifyListener) &#123;</span><br><span class="line">      mNotifyListener = <span class="keyword">new</span> MyNotifyLister();</span><br><span class="line">    &#125;</span><br><span class="line">    mLocationClient.registerNotify(mNotifyListener);</span><br><span class="line">    <span class="keyword">double</span> lat = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">double</span> lon = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">float</span> radius = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (arguments.containsKey(<span class="string">"latitude"</span>)) &#123;</span><br><span class="line">      lat = (<span class="keyword">double</span>)arguments.get(<span class="string">"latitude"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (arguments.containsKey(<span class="string">"longitude"</span>)) &#123;</span><br><span class="line">      lon = (<span class="keyword">double</span>)arguments.get(<span class="string">"longitude"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (arguments.containsKey(<span class="string">"radius"</span>)) &#123;</span><br><span class="line">      <span class="keyword">double</span> radius1 = (<span class="keyword">double</span>)arguments.get(<span class="string">"radius"</span>);</span><br><span class="line">      radius = Float.parseFloat(String.valueOf(radius1));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    String coorType = mLocationClient.getLocOption().getCoorType();</span><br><span class="line">    mNotifyListener.SetNotifyLocation(lat, lon, radius, coorType);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    isNotify = <span class="keyword">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  mLocationClient.registerLocationListener(<span class="keyword">new</span> CurrentLocationListener());</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 判断是否启用国内外位置判断功能</span></span><br><span class="line">  <span class="keyword">if</span> (arguments.containsKey(<span class="string">"isInChina"</span>)) &#123;</span><br><span class="line">    isInChina = <span class="keyword">true</span>;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    isInChina =<span class="keyword">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  LocationClientOption option = <span class="keyword">new</span> LocationClientOption();</span><br><span class="line">  parseOptions(option, arguments);</span><br><span class="line">  option.setProdName(<span class="string">"flutter"</span>);</span><br><span class="line">  mLocationClient.setLocOption(option);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>解析定位参数 parseOptions</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 解析定位参数</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> option</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> arguments</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">parseOptions</span><span class="params">(LocationClientOption option,Map arguments)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (arguments != <span class="keyword">null</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 可选，设置是否返回逆地理地址信息。默认是true</span></span><br><span class="line">    <span class="keyword">if</span> (arguments.containsKey(<span class="string">"isNeedAddres"</span>)) &#123;</span><br><span class="line">      <span class="keyword">if</span> (((<span class="keyword">boolean</span>)arguments.get(<span class="string">"isNeedAddres"</span>))) &#123;</span><br><span class="line">        option.setIsNeedAddress(<span class="keyword">true</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        option.setIsNeedAddress(<span class="keyword">false</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 可选，设置定位模式，可选的模式有高精度、仅设备、仅网络。默认为高精度模式</span></span><br><span class="line">    <span class="keyword">if</span> (arguments.containsKey(<span class="string">"locationMode"</span>)) &#123;</span><br><span class="line">      <span class="keyword">if</span> (((<span class="keyword">int</span>)arguments.get(<span class="string">"locationMode"</span>)) == <span class="number">1</span>) &#123;</span><br><span class="line">        option.setLocationMode(LocationClientOption.LocationMode.Hight_Accuracy); <span class="comment">// 高精度模式</span></span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (((<span class="keyword">int</span>)arguments.get(<span class="string">"locationMode"</span>)) == <span class="number">2</span>) &#123;</span><br><span class="line">        option.setLocationMode(LocationClientOption.LocationMode.Device_Sensors); <span class="comment">// 仅设备模式</span></span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (((<span class="keyword">int</span>)arguments.get(<span class="string">"locationMode"</span>)) == <span class="number">3</span>) &#123;</span><br><span class="line">        option.setLocationMode(LocationClientOption.LocationMode.Battery_Saving); <span class="comment">// 仅网络模式</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 可选，设置场景定位参数，包括签到场景、运动场景、出行场景</span></span><br><span class="line">    <span class="keyword">if</span> ((arguments.containsKey(<span class="string">"LocationPurpose"</span>))) &#123;</span><br><span class="line">      isPurporseLoc = <span class="keyword">true</span>;</span><br><span class="line">      <span class="keyword">if</span>  (((<span class="keyword">int</span>)arguments.get(<span class="string">"LocationPurpose"</span>)) == <span class="number">1</span>) &#123;</span><br><span class="line">        option.setLocationPurpose(LocationClientOption.BDLocationPurpose.SignIn); <span class="comment">// 签到场景</span></span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (((<span class="keyword">int</span>)arguments.get(<span class="string">"LocationPurpose"</span>)) == <span class="number">2</span>) &#123;</span><br><span class="line">        option.setLocationPurpose(LocationClientOption.BDLocationPurpose.Transport); <span class="comment">// 运动场景</span></span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (((<span class="keyword">int</span>)arguments.get(<span class="string">"LocationPurpose"</span>)) == <span class="number">3</span>) &#123;</span><br><span class="line">        option.setLocationPurpose(LocationClientOption.BDLocationPurpose.Sport); <span class="comment">// 出行场景</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      isPurporseLoc = <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 可选，设置需要返回海拔高度信息</span></span><br><span class="line">    <span class="keyword">if</span> (arguments.containsKey(<span class="string">"isNeedAltitude"</span>)) &#123;</span><br><span class="line">      <span class="keyword">if</span> (((<span class="keyword">boolean</span>)arguments.get(<span class="string">"isNeedAltitude"</span>))) &#123;</span><br><span class="line">        option.setIsNeedAddress(<span class="keyword">true</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        option.setIsNeedAltitude(<span class="keyword">false</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 可选，设置是否使用gps，默认false</span></span><br><span class="line">    <span class="keyword">if</span> (arguments.containsKey(<span class="string">"openGps"</span>)) &#123;</span><br><span class="line">      <span class="keyword">if</span>(((<span class="keyword">boolean</span>)arguments.get(<span class="string">"openGps"</span>))) &#123;</span><br><span class="line">        option.setOpenGps(<span class="keyword">true</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        option.setOpenGps(<span class="keyword">false</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 可选，设置是否允许返回逆地理地址信息，默认是true</span></span><br><span class="line">    <span class="keyword">if</span> (arguments.containsKey(<span class="string">"isNeedLocationDescribe"</span>)) &#123;</span><br><span class="line">      <span class="keyword">if</span>(((<span class="keyword">boolean</span>)arguments.get(<span class="string">"isNeedLocationDescribe"</span>))) &#123;</span><br><span class="line">        option.setIsNeedLocationDescribe(<span class="keyword">true</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        option.setIsNeedLocationDescribe(<span class="keyword">false</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 可选，设置发起定位请求的间隔，int类型，单位ms</span></span><br><span class="line">    <span class="comment">// 如果设置为0，则代表单次定位，即仅定位一次，默认为0</span></span><br><span class="line">    <span class="comment">// 如果设置非0，需设置1000ms以上才有效</span></span><br><span class="line">    <span class="keyword">if</span> (arguments.containsKey(<span class="string">"scanspan"</span>)) &#123;</span><br><span class="line">      option.setScanSpan((<span class="keyword">int</span>)arguments.get(<span class="string">"scanspan"</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 可选，设置返回经纬度坐标类型，默认GCJ02</span></span><br><span class="line">    <span class="comment">// GCJ02：国测局坐标；</span></span><br><span class="line">    <span class="comment">// BD09ll：百度经纬度坐标；</span></span><br><span class="line">    <span class="comment">// BD09：百度墨卡托坐标；</span></span><br><span class="line">    <span class="comment">// 海外地区定位，无需设置坐标类型，统一返回WGS84类型坐标</span></span><br><span class="line">    <span class="keyword">if</span> (arguments.containsKey(<span class="string">"coorType"</span>)) &#123;</span><br><span class="line">      option.setCoorType((String)arguments.get(<span class="string">"coorType"</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置是否需要返回附近的poi列表</span></span><br><span class="line">    <span class="keyword">if</span> (arguments.containsKey(<span class="string">"isNeedLocationPoiList"</span>)) &#123;</span><br><span class="line">      <span class="keyword">if</span> (((<span class="keyword">boolean</span>)arguments.get(<span class="string">"isNeedLocationPoiList"</span>))) &#123;</span><br><span class="line">        option.setIsNeedLocationPoiList(<span class="keyword">true</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        option.setIsNeedLocationPoiList(<span class="keyword">false</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 设置是否需要最新版本rgc数据</span></span><br><span class="line">    <span class="keyword">if</span> (arguments.containsKey(<span class="string">"isNeedNewVersionRgc"</span>)) &#123;</span><br><span class="line">      <span class="keyword">if</span> (((<span class="keyword">boolean</span>)arguments.get(<span class="string">"isNeedNewVersionRgc"</span>))) &#123;</span><br><span class="line">        option.setIsNeedLocationPoiList(<span class="keyword">true</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        option.setIsNeedLocationPoiList(<span class="keyword">false</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="编写启动、停止功能"><a href="#编写启动、停止功能" class="headerlink" title="编写启动、停止功能"></a>编写启动、停止功能</h4><ul><li>开始定位</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">startLocation</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(<span class="keyword">null</span> != mLocationClient) &#123;</span><br><span class="line">    mLocationClient.start();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>停止定位</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">stopLocation</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">null</span> != mLocationClient) &#123;</span><br><span class="line">    mLocationClient.stop();</span><br><span class="line">    mLocationClient = <span class="keyword">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="百度定位回调"><a href="#百度定位回调" class="headerlink" title="百度定位回调"></a>百度定位回调</h4><ul><li>CurrentLocationListener</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 格式化时间</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> time</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> strPattern</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="keyword">private</span> String <span class="title">formatUTC</span><span class="params">(<span class="keyword">long</span> time, String strPattern)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (TextUtils.isEmpty(strPattern)) &#123;</span><br><span class="line">      strPattern = <span class="string">"yyyy-MM-dd HH:mm:ss"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    SimpleDateFormat sdf = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      sdf = <span class="keyword">new</span> SimpleDateFormat(strPattern, Locale.CHINA);</span><br><span class="line">      sdf.applyPattern(strPattern);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Throwable e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sdf == <span class="keyword">null</span> ? <span class="string">"NULL"</span> : sdf.format(time);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">CurrentLocationListener</span> <span class="keyword">extends</span> <span class="title">BDAbstractLocationListener</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceiveLocation</span><span class="params">(BDLocation bdLocation)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">null</span> == mEventSink) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      Map&lt;String, Object&gt; result = <span class="keyword">new</span> LinkedHashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 判断国内外获取结果</span></span><br><span class="line">      <span class="keyword">if</span> (isInChina) &#123;</span><br><span class="line">        <span class="keyword">if</span> (bdLocation.getLocationWhere() == BDLocation.LOCATION_WHERE_IN_CN) &#123;</span><br><span class="line">          result.put(<span class="string">"isInChina"</span>, <span class="number">1</span>); <span class="comment">// 在国内</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          result.put(<span class="string">"isInChina"</span>, <span class="number">0</span>); <span class="comment">// 在国外</span></span><br><span class="line">        &#125;</span><br><span class="line">        mEventSink.success(result);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 场景定位获取结果</span></span><br><span class="line">      <span class="keyword">if</span> (isPurporseLoc) &#123;</span><br><span class="line">        result.put(<span class="string">"latitude"</span>, bdLocation.getLatitude()); <span class="comment">// 纬度</span></span><br><span class="line">        result.put(<span class="string">"longitude"</span>, bdLocation.getLongitude()); <span class="comment">// 经度</span></span><br><span class="line">        mEventSink.success(result);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      result.put(<span class="string">"callbackTime"</span>, formatUTC(System.currentTimeMillis(), <span class="string">"yyyy-MM-dd HH:mm:ss"</span>));</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">null</span> != bdLocation) &#123;</span><br><span class="line">        <span class="keyword">if</span> (bdLocation.getLocType() == BDLocation.TypeGpsLocation</span><br><span class="line">                || bdLocation.getLocType() == BDLocation.TypeNetWorkLocation</span><br><span class="line">                || bdLocation.getLocType() == BDLocation.TypeOffLineLocation) &#123;</span><br><span class="line">          result.put(<span class="string">"locType"</span>, bdLocation.getLocType()); <span class="comment">// 定位结果类型</span></span><br><span class="line">          result.put(<span class="string">"locTime"</span>, bdLocation.getTime()); <span class="comment">// 定位成功时间</span></span><br><span class="line">          result.put(<span class="string">"latitude"</span>, bdLocation.getLatitude()); <span class="comment">// 纬度</span></span><br><span class="line">          result.put(<span class="string">"longitude"</span>, bdLocation.getLongitude()); <span class="comment">// 经度</span></span><br><span class="line">          <span class="keyword">if</span> (bdLocation.hasAltitude()) &#123;</span><br><span class="line">            result.put(<span class="string">"altitude"</span>, bdLocation.getAltitude()); <span class="comment">// 高度</span></span><br><span class="line">          &#125;</span><br><span class="line">          result.put(<span class="string">"radius"</span>, Double.parseDouble(String.valueOf(bdLocation.getRadius()))); <span class="comment">// 定位精度</span></span><br><span class="line">          result.put(<span class="string">"country"</span>, bdLocation.getCountry()); <span class="comment">// 国家</span></span><br><span class="line">          result.put(<span class="string">"province"</span>, bdLocation.getProvince()); <span class="comment">// 省份</span></span><br><span class="line">          result.put(<span class="string">"city"</span>, bdLocation.getCity()); <span class="comment">// 城市</span></span><br><span class="line">          result.put(<span class="string">"district"</span>, bdLocation.getDistrict()); <span class="comment">// 区域</span></span><br><span class="line">          result.put(<span class="string">"town"</span>, bdLocation.getTown()); <span class="comment">// 城镇</span></span><br><span class="line">          result.put(<span class="string">"street"</span>, bdLocation.getStreet()); <span class="comment">// 街道</span></span><br><span class="line">          result.put(<span class="string">"address"</span>, bdLocation.getAddrStr()); <span class="comment">// 地址</span></span><br><span class="line">          result.put(<span class="string">"locationDetail"</span>, bdLocation.getLocationDescribe()); <span class="comment">// 位置语义化描述</span></span><br><span class="line">          <span class="keyword">if</span> (<span class="keyword">null</span> != bdLocation.getPoiList() &amp;&amp; !bdLocation.getPoiList().isEmpty()) &#123;</span><br><span class="line"></span><br><span class="line">            List&lt;Poi&gt; pois = bdLocation.getPoiList();</span><br><span class="line">            StringBuilder stringBuilder = <span class="keyword">new</span> StringBuilder();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (pois.size() == <span class="number">1</span>) &#123;</span><br><span class="line">              stringBuilder.append(pois.get(<span class="number">0</span>).getName()).append(<span class="string">","</span>).append(pois.get(<span class="number">0</span>).getTags())</span><br><span class="line">                      .append(pois.get(<span class="number">0</span>).getAddr());</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">              <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; pois.size() - <span class="number">1</span>; i++) &#123;</span><br><span class="line">                stringBuilder.append(pois.get(i).getName()).append(<span class="string">","</span>).append(pois.get(i).getTags())</span><br><span class="line">                        .append(pois.get(i).getAddr()).append(<span class="string">"|"</span>);</span><br><span class="line">              &#125;</span><br><span class="line">              stringBuilder.append(pois.get(pois.size()-<span class="number">1</span>).getName()).append(<span class="string">","</span>).append(pois.get(pois.size()-<span class="number">1</span>).getTags())</span><br><span class="line">                      .append(pois.get(pois.size()-<span class="number">1</span>).getAddr());</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            result.put(<span class="string">"poiList"</span>,stringBuilder.toString()); <span class="comment">// 周边poi信息</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">if</span> (bdLocation.getFloor() != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="comment">// 当前支持高精度室内定位</span></span><br><span class="line">            String buildingID = bdLocation.getBuildingID();<span class="comment">// 百度内部建筑物ID</span></span><br><span class="line">            String buildingName = bdLocation.getBuildingName();<span class="comment">// 百度内部建筑物缩写</span></span><br><span class="line">            String floor = bdLocation.getFloor();<span class="comment">// 室内定位的楼层信息，如 f1,f2,b1,b2</span></span><br><span class="line">            StringBuilder stringBuilder = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">            stringBuilder.append(buildingID).append(<span class="string">"-"</span>).append(buildingName).append(<span class="string">"-"</span>).append(floor);</span><br><span class="line">            result.put(<span class="string">"indoor"</span>, stringBuilder.toString()); <span class="comment">// 室内定位结果信息</span></span><br><span class="line">            mLocationClient.startIndoorMode();<span class="comment">// 开启室内定位模式（重复调用也没问题），开启后，定位SDK会融合各种定位信息（GPS,WI-FI，蓝牙，传感器等）连续平滑的输出定位结果；</span></span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            mLocationClient.stopIndoorMode(); <span class="comment">// 处于室外则关闭室内定位模式</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          result.put(<span class="string">"errorCode"</span>, bdLocation.getLocType()); <span class="comment">// 定位结果错误码</span></span><br><span class="line">          result.put(<span class="string">"errorInfo"</span>, bdLocation.getLocTypeDescription()); <span class="comment">// 定位失败描述信息</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        result.put(<span class="string">"errorCode"</span>, -<span class="number">1</span>);</span><br><span class="line">        result.put(<span class="string">"errorInfo"</span>, <span class="string">"location is null"</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      mEventSink.success(result); <span class="comment">// android端实时检测位置变化，将位置结果发送到flutter端</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h4 id="位置提醒服务"><a href="#位置提醒服务" class="headerlink" title="位置提醒服务"></a>位置提醒服务</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyNotifyLister</span> <span class="keyword">extends</span> <span class="title">BDNotifyListener</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 已到达设置监听位置附近</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNotify</span><span class="params">(BDLocation mlocation, <span class="keyword">float</span> distance)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">null</span> == mEventSink) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Map&lt;String, Object&gt; result = <span class="keyword">new</span> LinkedHashMap&lt;&gt;();</span><br><span class="line">    result.put(<span class="string">"nearby"</span>, <span class="string">"已到达设置监听位置附近"</span>); <span class="comment">// 1为已经到达 0为未到达</span></span><br><span class="line">    mEventSink.success(result);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Example-代码"><a href="#Example-代码" class="headerlink" title="Example 代码"></a>Example 代码</h3><h4 id="动态授权"><a href="#动态授权" class="headerlink" title="动态授权"></a>动态授权</h4><ul><li>example/pubspec.yaml</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dependencies:</span></span><br><span class="line"><span class="attr">  flutter:</span></span><br><span class="line"><span class="attr">    sdk:</span> <span class="string">flutter</span></span><br><span class="line"></span><br><span class="line">  <span class="string">...</span></span><br><span class="line"></span><br><span class="line"><span class="attr">  permission_handler:</span> <span class="string">^5.0.1+1</span></span><br></pre></td></tr></table></figure><ul><li>example/lib/main.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_MyAppState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">MyApp</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    _requestPermission(); <span class="comment">// 执行权限请求</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 动态申请定位权限</span></span><br><span class="line">  Future&lt;<span class="built_in">bool</span>&gt; _requestPermission() <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="built_in">Map</span>&lt;Permission, PermissionStatus&gt; statuses = <span class="keyword">await</span> [</span><br><span class="line">      Permission.location,</span><br><span class="line">      Permission.storage,</span><br><span class="line">    ].request();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> statuses[Permission.location].isGranted &amp;&amp;</span><br><span class="line">        statuses[Permission.storage].isGranted;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="主界面代码"><a href="#主界面代码" class="headerlink" title="主界面代码"></a>主界面代码</h4><ul><li>example/lib/main.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'dart:io'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'dart:async'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_baidu_plugin_ducafecat/flutter_baidu_plugin_ducafecat.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_baidu_plugin_ducafecat_example/views/location-view.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:permission_handler/permission_handler.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  runApp(MyApp());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _MyAppState createState() =&gt; _MyAppState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_MyAppState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">MyApp</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    _requestPermission(); <span class="comment">// 执行权限请求</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (Platform.isIOS == <span class="keyword">true</span>) &#123;</span><br><span class="line">      FlutterBaiduPluginDucafecat.setApiKeyForIOS(</span><br><span class="line">          <span class="string">"dkYT07blcAj3drBbcN1eGFYqt16HP1pR"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> dispose() &#123;</span><br><span class="line">    <span class="keyword">super</span>.dispose();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 动态申请定位权限</span></span><br><span class="line">  Future&lt;<span class="built_in">bool</span>&gt; _requestPermission() <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="built_in">Map</span>&lt;Permission, PermissionStatus&gt; statuses = <span class="keyword">await</span> [</span><br><span class="line">      Permission.location,</span><br><span class="line">      Permission.storage,</span><br><span class="line">    ].request();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> statuses[Permission.location].isGranted &amp;&amp;</span><br><span class="line">        statuses[Permission.storage].isGranted;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      routes: &#123;</span><br><span class="line">        <span class="string">"location_view"</span>: (context) =&gt; LocationView(),</span><br><span class="line">      &#125;,</span><br><span class="line">      home: MyHome(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyHome</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(title: Text(<span class="string">'地图插件'</span>)),</span><br><span class="line">      body: SingleChildScrollView(</span><br><span class="line">        child: Column(</span><br><span class="line">          children: [</span><br><span class="line">            ListTile(</span><br><span class="line">              title: Text(<span class="string">'定位信息'</span>),</span><br><span class="line">              subtitle: Text(<span class="string">'点击开始后，百度地图实时推送经纬度信息'</span>),</span><br><span class="line">              leading: Icon(Icons.location_searching),</span><br><span class="line">              trailing: Icon(Icons.keyboard_arrow_right),</span><br><span class="line">              onTap: () &#123;</span><br><span class="line">                Navigator.pushNamed(context, <span class="string">"location_view"</span>);</span><br><span class="line">              &#125;,</span><br><span class="line">            )</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="定位服务代码"><a href="#定位服务代码" class="headerlink" title="定位服务代码"></a>定位服务代码</h4><ul><li>example/lib/views/location-view.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'dart:async'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_baidu_plugin_ducafecat/entity/flutter_baidu_location.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_baidu_plugin_ducafecat/entity/flutter_baidu_location_android_option.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_baidu_plugin_ducafecat/entity/flutter_baidu_location_ios_option.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_baidu_plugin_ducafecat/flutter_baidu_plugin_ducafecat.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LocationView</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  LocationView(&#123;Key key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _LocationViewState createState() =&gt; _LocationViewState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_LocationViewState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">LocationView</span>&gt; </span>&#123;</span><br><span class="line">  FlutterBaiduPluginDucafecat _locationPlugin = FlutterBaiduPluginDucafecat();</span><br><span class="line">  StreamSubscription&lt;<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">Object</span>&gt;&gt; _locationListener; <span class="comment">// 事件监听</span></span><br><span class="line">  BaiduLocation _baiduLocation; <span class="comment">// 经纬度信息</span></span><br><span class="line">  <span class="comment">// Map&lt;String, Object&gt; _loationResult; // 返回格式数据</span></span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> dispose() &#123;</span><br><span class="line">    <span class="keyword">super</span>.dispose();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 取消监听</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">null</span> != _locationListener) &#123;</span><br><span class="line">      _locationListener.cancel();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 返回定位信息</span></span><br><span class="line">  <span class="keyword">void</span> _setupListener() &#123;</span><br><span class="line">    <span class="keyword">if</span> (_locationListener != <span class="keyword">null</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    _locationListener =</span><br><span class="line">        _locationPlugin.onResultCallback().listen((<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">Object</span>&gt; result) &#123;</span><br><span class="line">      setState(() &#123;</span><br><span class="line">        <span class="comment">// _loationResult = result;</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          _baiduLocation = BaiduLocation.fromMap(result);</span><br><span class="line">          <span class="built_in">print</span>(_baiduLocation);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">          <span class="built_in">print</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 设置android端和ios端定位参数</span></span><br><span class="line">  <span class="keyword">void</span> _setLocOption() &#123;</span><br><span class="line">    <span class="comment">// android 端设置定位参数</span></span><br><span class="line">    BaiduLocationAndroidOption androidOption = <span class="keyword">new</span> BaiduLocationAndroidOption();</span><br><span class="line">    androidOption.setCoorType(<span class="string">"bd09ll"</span>); <span class="comment">// 设置返回的位置坐标系类型</span></span><br><span class="line">    androidOption.setIsNeedAltitude(<span class="keyword">true</span>); <span class="comment">// 设置是否需要返回海拔高度信息</span></span><br><span class="line">    androidOption.setIsNeedAddres(<span class="keyword">true</span>); <span class="comment">// 设置是否需要返回地址信息</span></span><br><span class="line">    androidOption.setIsNeedLocationPoiList(<span class="keyword">true</span>); <span class="comment">// 设置是否需要返回周边poi信息</span></span><br><span class="line">    androidOption.setIsNeedNewVersionRgc(<span class="keyword">true</span>); <span class="comment">// 设置是否需要返回最新版本rgc信息</span></span><br><span class="line">    androidOption.setIsNeedLocationDescribe(<span class="keyword">true</span>); <span class="comment">// 设置是否需要返回位置描述</span></span><br><span class="line">    androidOption.setOpenGps(<span class="keyword">true</span>); <span class="comment">// 设置是否需要使用gps</span></span><br><span class="line">    androidOption.setLocationMode(LocationMode.Hight_Accuracy); <span class="comment">// 设置定位模式</span></span><br><span class="line">    androidOption.setScanspan(<span class="number">1000</span>); <span class="comment">// 设置发起定位请求时间间隔</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">Map</span> androidMap = androidOption.getMap();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ios 端设置定位参数</span></span><br><span class="line">    BaiduLocationIOSOption iosOption = <span class="keyword">new</span> BaiduLocationIOSOption();</span><br><span class="line">    iosOption.setIsNeedNewVersionRgc(<span class="keyword">true</span>); <span class="comment">// 设置是否需要返回最新版本rgc信息</span></span><br><span class="line">    iosOption.setBMKLocationCoordinateType(</span><br><span class="line">        <span class="string">"BMKLocationCoordinateTypeBMK09LL"</span>); <span class="comment">// 设置返回的位置坐标系类型</span></span><br><span class="line">    iosOption.setActivityType(<span class="string">"CLActivityTypeAutomotiveNavigation"</span>); <span class="comment">// 设置应用位置类型</span></span><br><span class="line">    iosOption.setLocationTimeout(<span class="number">10</span>); <span class="comment">// 设置位置获取超时时间</span></span><br><span class="line">    iosOption.setDesiredAccuracy(<span class="string">"kCLLocationAccuracyBest"</span>); <span class="comment">// 设置预期精度参数</span></span><br><span class="line">    iosOption.setReGeocodeTimeout(<span class="number">10</span>); <span class="comment">// 设置获取地址信息超时时间</span></span><br><span class="line">    iosOption.setDistanceFilter(<span class="number">100</span>); <span class="comment">// 设置定位最小更新距离</span></span><br><span class="line">    iosOption.setAllowsBackgroundLocationUpdates(<span class="keyword">true</span>); <span class="comment">// 是否允许后台定位</span></span><br><span class="line">    iosOption.setPauseLocUpdateAutomatically(<span class="keyword">true</span>); <span class="comment">//  定位是否会被系统自动暂停</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">Map</span> iosMap = iosOption.getMap();</span><br><span class="line"></span><br><span class="line">    _locationPlugin.prepareLoc(androidMap, iosMap);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 启动定位</span></span><br><span class="line">  <span class="keyword">void</span> _handleStartLocation() &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">null</span> != _locationPlugin) &#123;</span><br><span class="line">      _setupListener();</span><br><span class="line">      _setLocOption();</span><br><span class="line">      _locationPlugin.startLocation();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 停止定位</span></span><br><span class="line">  <span class="keyword">void</span> _handleStopLocation() &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">null</span> != _locationPlugin) &#123;</span><br><span class="line">      _locationPlugin.stopLocation();</span><br><span class="line">      setState(() &#123;</span><br><span class="line">        _baiduLocation = <span class="keyword">null</span>;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">////////////////////////////////////////////////////////////</span></span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 显示地理信息</span></span><br><span class="line">  Widget _buildLocationView() &#123;</span><br><span class="line">    <span class="keyword">return</span> _baiduLocation != <span class="keyword">null</span></span><br><span class="line">        ? Table(</span><br><span class="line">            children: [</span><br><span class="line">              TableRow(children: [</span><br><span class="line">                TableCell(child: Text(<span class="string">'经度'</span>)),</span><br><span class="line">                TableCell(child: Text(_baiduLocation.longitude.toString())),</span><br><span class="line">              ]),</span><br><span class="line">              TableRow(children: [</span><br><span class="line">                TableCell(child: Text(<span class="string">'纬度'</span>)),</span><br><span class="line">                TableCell(child: Text(_baiduLocation.latitude.toString())),</span><br><span class="line">              ]),</span><br><span class="line">              TableRow(children: [</span><br><span class="line">                TableCell(child: Text(<span class="string">'国家'</span>)),</span><br><span class="line">                TableCell(</span><br><span class="line">                    child: Text(_baiduLocation.country != <span class="keyword">null</span></span><br><span class="line">                        ? _baiduLocation.country</span><br><span class="line">                        : <span class="string">""</span>)),</span><br><span class="line">              ]),</span><br><span class="line">              TableRow(children: [</span><br><span class="line">                TableCell(child: Text(<span class="string">'省份'</span>)),</span><br><span class="line">                TableCell(</span><br><span class="line">                    child: Text(_baiduLocation.province != <span class="keyword">null</span></span><br><span class="line">                        ? _baiduLocation.province</span><br><span class="line">                        : <span class="string">""</span>)),</span><br><span class="line">              ]),</span><br><span class="line">              TableRow(children: [</span><br><span class="line">                TableCell(child: Text(<span class="string">'城市'</span>)),</span><br><span class="line">                TableCell(</span><br><span class="line">                    child: Text(_baiduLocation.city != <span class="keyword">null</span></span><br><span class="line">                        ? _baiduLocation.city</span><br><span class="line">                        : <span class="string">""</span>)),</span><br><span class="line">              ]),</span><br><span class="line">              TableRow(children: [</span><br><span class="line">                TableCell(child: Text(<span class="string">'区县'</span>)),</span><br><span class="line">                TableCell(</span><br><span class="line">                    child: Text(_baiduLocation.district != <span class="keyword">null</span></span><br><span class="line">                        ? _baiduLocation.district</span><br><span class="line">                        : <span class="string">""</span>)),</span><br><span class="line">              ]),</span><br><span class="line">              TableRow(children: [</span><br><span class="line">                TableCell(child: Text(<span class="string">'街道'</span>)),</span><br><span class="line">                TableCell(</span><br><span class="line">                    child: Text(_baiduLocation.street != <span class="keyword">null</span></span><br><span class="line">                        ? _baiduLocation.street</span><br><span class="line">                        : <span class="string">""</span>)),</span><br><span class="line">              ]),</span><br><span class="line">              TableRow(children: [</span><br><span class="line">                TableCell(child: Text(<span class="string">'地址'</span>)),</span><br><span class="line">                TableCell(</span><br><span class="line">                    child: Text(_baiduLocation.address != <span class="keyword">null</span></span><br><span class="line">                        ? _baiduLocation.address</span><br><span class="line">                        : <span class="string">""</span>)),</span><br><span class="line">              ]),</span><br><span class="line">              TableRow(children: [</span><br><span class="line">                TableCell(child: Text(<span class="string">'位置语义化描述'</span>)),</span><br><span class="line">                TableCell(</span><br><span class="line">                    child: Text(_baiduLocation.locationDetail != <span class="keyword">null</span></span><br><span class="line">                        ? _baiduLocation.locationDetail</span><br><span class="line">                        : <span class="string">""</span>)),</span><br><span class="line">              ]),</span><br><span class="line">              TableRow(children: [</span><br><span class="line">                TableCell(child: Text(<span class="string">'周边poi信息'</span>)),</span><br><span class="line">                TableCell(</span><br><span class="line">                    child: Text(_baiduLocation.poiList != <span class="keyword">null</span></span><br><span class="line">                        ? _baiduLocation.poiList</span><br><span class="line">                        : <span class="string">""</span>)),</span><br><span class="line">              ]),</span><br><span class="line">              TableRow(children: [</span><br><span class="line">                TableCell(child: Text(<span class="string">'错误码'</span>)),</span><br><span class="line">                TableCell(</span><br><span class="line">                    child: Text(_baiduLocation.errorCode != <span class="keyword">null</span></span><br><span class="line">                        ? _baiduLocation.errorCode.toString()</span><br><span class="line">                        : <span class="string">""</span>)),</span><br><span class="line">              ]),</span><br><span class="line">              TableRow(children: [</span><br><span class="line">                TableCell(child: Text(<span class="string">'定位失败描述信息'</span>)),</span><br><span class="line">                TableCell(</span><br><span class="line">                    child: Text(_baiduLocation.errorInfo != <span class="keyword">null</span></span><br><span class="line">                        ? _baiduLocation.errorInfo</span><br><span class="line">                        : <span class="string">""</span>)),</span><br><span class="line">              ]),</span><br><span class="line">            ],</span><br><span class="line">          )</span><br><span class="line">        : Container();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 控制面板</span></span><br><span class="line">  Widget _buildControlPlan() &#123;</span><br><span class="line">    <span class="keyword">return</span> Row(</span><br><span class="line">      mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">      children: [</span><br><span class="line">        MaterialButton(</span><br><span class="line">          color: Colors.blue,</span><br><span class="line">          textColor: Colors.white,</span><br><span class="line">          onPressed: _baiduLocation == <span class="keyword">null</span> ? _handleStartLocation : <span class="keyword">null</span>,</span><br><span class="line">          child: Text(<span class="string">'开始定位'</span>),</span><br><span class="line">        ),</span><br><span class="line">        MaterialButton(</span><br><span class="line">          color: Colors.blue,</span><br><span class="line">          textColor: Colors.white,</span><br><span class="line">          onPressed: _baiduLocation != <span class="keyword">null</span> ? _handleStopLocation : <span class="keyword">null</span>,</span><br><span class="line">          child: Text(<span class="string">'暂停定位'</span>),</span><br><span class="line">        )</span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">'定位信息'</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: SingleChildScrollView(</span><br><span class="line">        child: Column(</span><br><span class="line">          children: [</span><br><span class="line">            _buildControlPlan(),</span><br><span class="line">            Divider(),</span><br><span class="line">            _buildLocationView(),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://lbsyun.baidu.com/apiconsole/key#/home" target="_blank" rel="noopener">https://lbsyun.baidu.com/apiconsole/key#/home</a></li><li><a href="http://lbsyun.baidu.com/index.php?title=android-locsdk" target="_blank" rel="noopener">http://lbsyun.baidu.com/index.php?title=android-locsdk</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a><br><a href="https://ducafecat.gitee.io" target="_blank" rel="noopener">https://ducafecat.gitee.io</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="Flutter混合开发" scheme="https://blog.ducafecat.tech/categories/Flutter%E6%B7%B7%E5%90%88%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 混合开发 - 01 编写设备端组件的正确姿势!</title>
    <link href="https://blog.ducafecat.tech/2020/07/30/flutter-daily/flutter-plugins-01-developing-packages-plugins/"/>
    <id>https://blog.ducafecat.tech/2020/07/30/flutter-daily/flutter-plugins-01-developing-packages-plugins/</id>
    <published>2020-07-29T16:00:00.000Z</published>
    <updated>2020-08-04T09:07:26.404Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-07-30-21-51-56.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>闲鱼手册中提到的混合开发</li><li>编写到使用一个 flutter 组件的完整过程</li></ul><h2 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h2><p><a href="https://www.bilibili.com/video/bv1iT4y1j72t" target="_blank" rel="noopener">https://www.bilibili.com/video/bv1iT4y1j72t</a></p><iframe src="//player.bilibili.com/player.html?bvid=bv1iT4y1j72t&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" height="400px"> </iframe><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/ducafecat/flutter_baidu_plugin_ducafecat/releases/tag/1.0.1" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_baidu_plugin_ducafecat/releases/tag/1.0.1</a></p><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><h3 id="从古至今、移动开发不可回避的问题"><a href="#从古至今、移动开发不可回避的问题" class="headerlink" title="从古至今、移动开发不可回避的问题"></a>从古至今、移动开发不可回避的问题</h3><ul><li>flutter、weex、React Native、Cordova</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-07-30-17-35-34.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>开发模式</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-07-30-17-48-41.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="聊聊-Flutter-in-Action-闲鱼最佳实践"><a href="#聊聊-Flutter-in-Action-闲鱼最佳实践" class="headerlink" title="聊聊 Flutter in Action 闲鱼最佳实践"></a>聊聊 Flutter in Action 闲鱼最佳实践</h2><p>电子书下载</p><p><a href="https://c.tb.cn/I3.ZZpRl" target="_blank" rel="noopener">https://c.tb.cn/I3.ZZpRl</a></p><h3 id="第二代混合技术方案-FlutterBoost"><a href="#第二代混合技术方案-FlutterBoost" class="headerlink" title="第二代混合技术方案 FlutterBoost"></a>第二代混合技术方案 FlutterBoost</h3><ul><li>项目开源地址</li></ul><p><a href="https://github.com/alibaba/flutter_boost" target="_blank" rel="noopener">https://github.com/alibaba/flutter_boost</a></p><ul><li>架构图</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-07-30-20-19-21.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>Native 层概念</li></ul><p>● Container：Native 容器，平台 Controller，Activity，ViewController<br>● Container Manager：容器的管理者<br>● Adaptor：Flutter 是适配层<br>● Messaging：基于 Channel 的消息通信</p><ul><li>Dart 层概念</li></ul><p>● Container：Flutter 用来容纳 Widget 的容器，具体实现为 Navigator 的派生类<br>● Container Manager：Flutter 容器的管理，提供 show，remove 等 Api<br>● Coordinator: 协调器，接受 Messaging 消息，负责调用 Container Manager 的状态管理。<br>● Messaging：基于 Channel 的消息通信</p><h3 id="Flutter-amp-FaaS-云端一体化"><a href="#Flutter-amp-FaaS-云端一体化" class="headerlink" title="Flutter &amp; FaaS 云端一体化"></a>Flutter &amp; FaaS 云端一体化</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-07-30-20-49-45.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="Flutter-会为以下团队带来较大的收益"><a href="#Flutter-会为以下团队带来较大的收益" class="headerlink" title="Flutter 会为以下团队带来较大的收益"></a>Flutter 会为以下团队带来较大的收益</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-07-30-21-08-03.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="Flutter-Redux"><a href="#Flutter-Redux" class="headerlink" title="Flutter Redux"></a>Flutter Redux</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-07-30-21-15-03.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="混合工程下的-Flutter-研发结构"><a href="#混合工程下的-Flutter-研发结构" class="headerlink" title="混合工程下的 Flutter 研发结构"></a>混合工程下的 Flutter 研发结构</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-07-30-21-25-14.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="动手写第一个-Flutter-组件"><a href="#动手写第一个-Flutter-组件" class="headerlink" title="动手写第一个 Flutter 组件"></a>动手写第一个 Flutter 组件</h2><h3 id="创建-flutter-组件工程"><a href="#创建-flutter-组件工程" class="headerlink" title="创建 flutter 组件工程"></a>创建 flutter 组件工程</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ flutter create --org tech.ducafecat --template=plugin -a java -i objc flutter-baidu-plugin-ducafecat</span><br></pre></td></tr></table></figure><h3 id="加入-加法-函数"><a href="#加入-加法-函数" class="headerlink" title="加入 加法 函数"></a>加入 加法 函数</h3><ul><li>dart 代码</li></ul><p>lib/flutter_baidu_plugin_ducafecat.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'dart:async'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/services.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FlutterBaiduPluginDucafecat</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> MethodChannel _channel =</span><br><span class="line">      <span class="keyword">const</span> MethodChannel(<span class="string">'flutter_baidu_plugin_ducafecat'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> Future&lt;<span class="built_in">String</span>&gt; <span class="keyword">get</span> platformVersion <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">String</span> version = <span class="keyword">await</span> _channel.invokeMethod(<span class="string">'getPlatformVersion'</span>);</span><br><span class="line">    <span class="keyword">return</span> version;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> Future&lt;<span class="built_in">int</span>&gt; duAddOne(<span class="built_in">int</span> <span class="built_in">num</span>) <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">int</span> val = <span class="keyword">await</span> _channel.invokeMethod(<span class="string">'duAddOne'</span>, &#123;<span class="string">"num"</span>: <span class="built_in">num</span>&#125;);</span><br><span class="line">    <span class="keyword">return</span> val;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>android 代码</li></ul><p>android/src/main/java/tech/ducafecat/flutter_baidu_plugin_ducafecat/FlutterBaiduPluginDucafecatPlugin.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onMethodCall</span><span class="params">(@NonNull MethodCall call, @NonNull Result result)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (call.method.equals(<span class="string">"getPlatformVersion"</span>)) &#123;</span><br><span class="line">    result.success(<span class="string">"Android "</span> + android.os.Build.VERSION.RELEASE);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (call.method.equals(<span class="string">"duAddOne"</span>)) &#123;</span><br><span class="line">    <span class="keyword">int</span> val = <span class="number">100</span>;</span><br><span class="line">    val += Integer.valueOf(call.argument(<span class="string">"num"</span>).toString());</span><br><span class="line">    result.success(val);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> &#123;</span><br><span class="line">    result.notImplemented();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ios 代码</li></ul><p>ios/Classes/FlutterBaiduPluginDucafecatPlugin.m</p><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">"FlutterBaiduPluginDucafecatPlugin.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">FlutterBaiduPluginDucafecatPlugin</span></span></span><br><span class="line">+ (<span class="keyword">void</span>)registerWithRegistrar:(<span class="built_in">NSObject</span>&lt;FlutterPluginRegistrar&gt;*)registrar &#123;</span><br><span class="line">  FlutterMethodChannel* channel = [FlutterMethodChannel</span><br><span class="line">      methodChannelWithName:<span class="string">@"flutter_baidu_plugin_ducafecat"</span></span><br><span class="line">            binaryMessenger:[registrar messenger]];</span><br><span class="line">  FlutterBaiduPluginDucafecatPlugin* instance = [[FlutterBaiduPluginDucafecatPlugin alloc] init];</span><br><span class="line">  [registrar addMethodCallDelegate:instance channel:channel];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)handleMethodCall:(FlutterMethodCall*)call result:(FlutterResult)result &#123;</span><br><span class="line">  <span class="keyword">if</span> ([<span class="string">@"getPlatformVersion"</span> isEqualToString:call.method]) &#123;</span><br><span class="line">    result([<span class="string">@"iOS "</span> stringByAppendingString:[[<span class="built_in">UIDevice</span> currentDevice] systemVersion]]);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> ([<span class="string">@"duAddOne"</span> isEqualToString:call.method]) &#123;</span><br><span class="line">      <span class="built_in">NSInteger</span> val = <span class="number">100</span>;</span><br><span class="line">      val += [[call.arguments objectForKey:<span class="string">@"num"</span>] intValue];</span><br><span class="line">      result([<span class="built_in">NSNumber</span> numberWithLong:val]);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> &#123;</span><br><span class="line">    result(FlutterMethodNotImplemented);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure><h3 id="新建工程调用"><a href="#新建工程调用" class="headerlink" title="新建工程调用"></a>新建工程调用</h3><ul><li>pubspec.yaml</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">flutter_baidu_plugin_ducafecat:</span></span><br><span class="line"><span class="attr">  git:</span></span><br><span class="line"><span class="attr">    url:</span> <span class="attr">https://github.com/ducafecat/flutter_baidu_plugin_ducafecat</span></span><br><span class="line"><span class="attr">    version:</span> <span class="string">^0.0.1</span></span><br></pre></td></tr></table></figure><ul><li>调用 加法</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> _incrementCounter() <span class="keyword">async</span> &#123;</span><br><span class="line">  _counter = <span class="keyword">await</span> FlutterBaiduPluginDucafecat.duAddOne(<span class="number">20</span>);</span><br><span class="line">  setState(() &#123;&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://cordova.apache.org/" target="_blank" rel="noopener">https://cordova.apache.org/</a></li><li><a href="https://reactnative.dev/" target="_blank" rel="noopener">https://reactnative.dev/</a></li><li><a href="https://flutter.dev/" target="_blank" rel="noopener">https://flutter.dev/</a></li><li><a href="https://weex.apache.org/" target="_blank" rel="noopener">https://weex.apache.org/</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="Flutter混合开发" scheme="https://blog.ducafecat.tech/categories/Flutter%E6%B7%B7%E5%90%88%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 实战从零开始 新闻客户端 - 17 headless strapi centos 发布部署 + jmeter 压测</title>
    <link href="https://blog.ducafecat.tech/2020/07/21/flutter-project/flutter-project-news-17-strapi-docker-compose-deploy-jmeter/"/>
    <id>https://blog.ducafecat.tech/2020/07/21/flutter-project/flutter-project-news-17-strapi-docker-compose-deploy-jmeter/</id>
    <published>2020-07-20T16:00:00.000Z</published>
    <updated>2020-07-24T08:41:39.144Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-07-22-14-40-04.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>上传代码到生产环境</li><li>配置发布环境代码</li><li>docker-compose 方式启动项目</li><li>jmeter 做基线测试 调优服务器配置</li></ul><h2 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h2><p><a href="https://www.bilibili.com/video/BV15v411q7CK/" target="_blank" rel="noopener">https://www.bilibili.com/video/BV15v411q7CK/</a></p><iframe src="//player.bilibili.com/player.html?bvid=BV15v411q7CK&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" height="400px"> </iframe><h2 id="strapi-运行环境网盘下载"><a href="#strapi-运行环境网盘下载" class="headerlink" title="strapi 运行环境网盘下载"></a>strapi 运行环境网盘下载</h2><ul><li>网盘</li></ul><p>链接:<a href="https://pan.baidu.com/s/13Ujy2hzXp8tSqxCx_4IhVQ" target="_blank" rel="noopener">https://pan.baidu.com/s/13Ujy2hzXp8tSqxCx_4IhVQ</a><br>密码:yu82</p><ul><li>运行</li></ul><p>本节下载 strapi-docker-compose-16.zip 这个文件</p><p>需要用 docker-compose 启动<br>账号 admin<br>密码 123456</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动</span></span><br><span class="line">docker-compose up -d --remove-orphans</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭</span></span><br><span class="line">docker-compose down</span><br></pre></td></tr></table></figure><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><h3 id="打包上传服务器"><a href="#打包上传服务器" class="headerlink" title="打包上传服务器"></a>打包上传服务器</h3><ul><li>服务器配置</li></ul><p>考虑到基线压测优化，所以一开始低些</p><p>服务器 cpu1 核心 2G 内存</p><ul><li>如何配置 centos 服务器</li></ul><p>参考我之前的文章</p><p><a href="https://ducafecat.tech/2020/05/29/docker/docker-02-windows-vmware-centos-setup/" target="_blank" rel="noopener">https://ducafecat.tech/2020/05/29/docker/docker-02-windows-vmware-centos-setup/</a></p><p><a href="https://youtu.be/NJIwbs8qmDY" target="_blank" rel="noopener">https://youtu.be/NJIwbs8qmDY</a></p><ul><li>把所有文件 tar、zip 打包后上传</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; yum install -y zip unzip</span><br><span class="line"></span><br><span class="line">&gt; unzip filename.zip</span><br></pre></td></tr></table></figure><h3 id="修改-graphql-配置"><a href="#修改-graphql-配置" class="headerlink" title="修改 graphql 配置"></a>修改 graphql 配置</h3><ul><li>文件 ./config/plugins.js</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">//</span></span><br><span class="line">  graphql: &#123;</span><br><span class="line">    endpoint: <span class="string">"/graphql"</span>,</span><br><span class="line">    tracing: <span class="literal">false</span>,</span><br><span class="line">    shadowCRUD: <span class="literal">true</span>,</span><br><span class="line">    playgroundAlways: <span class="literal">false</span>,</span><br><span class="line">    depthLimit: <span class="number">7</span>,</span><br><span class="line">    amountLimit: <span class="number">100</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>endpoint</td><td>对外路径</td></tr><tr><td>tracing</td><td>反馈性能报告</td></tr><tr><td>shadowCRUD</td><td>支持 CRUD 操作</td></tr><tr><td>playgroundAlways</td><td>显示调试界面</td></tr><tr><td>depthLimit</td><td>查询深度限制</td></tr><tr><td>amountLimit</td><td>查询项目个数</td></tr></tbody></table><ul><li>参数说明</li></ul><h3 id="修改-admin-面板地址"><a href="#修改-admin-面板地址" class="headerlink" title="修改 admin 面板地址"></a>修改 admin 面板地址</h3><ul><li>文件 ./config/server.js</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="function">(<span class="params">&#123; env &#125;</span>) =&gt;</span> (&#123;</span><br><span class="line">  host: env(<span class="string">"HOST"</span>, <span class="string">"0.0.0.0"</span>),</span><br><span class="line">  port: env.int(<span class="string">"PORT"</span>, <span class="number">1337</span>),</span><br><span class="line">  admin: &#123;</span><br><span class="line">    url: <span class="string">"/dashboard"</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><blockquote><p>默认 admin 不安全，可以改成奇怪的路径 dfasdx97s7 这种</p></blockquote><h3 id="strapi-build-编译"><a href="#strapi-build-编译" class="headerlink" title="strapi build 编译"></a>strapi build 编译</h3><ul><li>安装 portainer</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 9000:9000 \</span><br><span class="line">    --restart=always \</span><br><span class="line">    -v /var/run/docker.sock:/var/run/docker.sock \</span><br><span class="line">    --name portainer-local \</span><br><span class="line">    portainer/portainer</span><br></pre></td></tr></table></figure><ul><li>用工具 portainer 进入容器</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-07-22-09-23-25.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-07-22-09-36-35.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; strapi build</span><br></pre></td></tr></table></figure><h3 id="修改-docker-compose-命令"><a href="#修改-docker-compose-命令" class="headerlink" title="修改 docker-compose 命令"></a>修改 docker-compose 命令</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">...</span></span><br><span class="line"><span class="attr">strapi-app:</span></span><br><span class="line"><span class="attr">  image:</span> <span class="string">strapi/strapi</span></span><br><span class="line"><span class="attr">  container_name:</span> <span class="string">strapi-app</span></span><br><span class="line"><span class="attr">  restart:</span> <span class="string">always</span></span><br><span class="line"><span class="attr">  ports:</span></span><br><span class="line"><span class="bullet">    -</span> <span class="number">1337</span><span class="string">:1337</span></span><br><span class="line"><span class="attr">  command:</span> <span class="string">strapi</span> <span class="string">start</span></span><br><span class="line"><span class="attr">  environment:</span></span><br><span class="line">    <span class="string">...</span></span><br></pre></td></tr></table></figure><h3 id="jmeter-压第一轮-服务器-cpu1-核心-2G-内存"><a href="#jmeter-压第一轮-服务器-cpu1-核心-2G-内存" class="headerlink" title="jmeter 压第一轮 - 服务器 cpu1 核心 2G 内存"></a>jmeter 压第一轮 - 服务器 cpu1 核心 2G 内存</h3><ul><li>测试工具</li></ul><p><a href="https://jmeter.apache.org/download_jmeter.cgi" target="_blank" rel="noopener">https://jmeter.apache.org/download_jmeter.cgi</a></p><blockquote><p>需要安装 java 运行环境 jre 1.8</p></blockquote><ul><li>测试内容</li></ul><p>新闻首页</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">post /graphql</span><br><span class="line"></span><br><span class="line">&#123;&quot;operationName&quot;:&quot;pageIndex&quot;,&quot;variables&quot;:&#123;&#125;,&quot;query&quot;:&quot;query pageIndex &#123;\n  dictCategories(sort: \&quot;sortNum:desc\&quot;) &#123;\n    code\n    title\n  &#125;\n  dictChannels(sort: \&quot;sortNum:desc\&quot;) &#123;\n    code\n    title\n    icon &#123;\n      url\n    &#125;\n  &#125;\n  busNews(where: &#123;dict_categories: &#123;code: \&quot;news_hot\&quot;&#125;&#125;) &#123;\n    title\n    dict_channel &#123;\n      code\n      title\n      icon &#123;\n        url\n      &#125;\n    &#125;\n    dict_categories &#123;\n      code\n      title\n    &#125;\n    author\n    url\n    addtime\n    thumbnail &#123;\n      url\n    &#125;\n  &#125;\n&#125;\n&quot;&#125;</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-07-22-09-29-05.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-07-22-09-29-43.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>测试环境</li></ul><p>压测机: 8 核心 32G 本机 macos，发起线程数 1000~2000 官方建议单机数量<br>服务器: 1 核心 2G 虚拟机 centos</p><ul><li>服务器信息监控</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&gt; top</span><br><span class="line"></span><br><span class="line">top - 23:41:47 up 45 min,  2 users,  load average: 0.12, 2.10, 2.09</span><br><span class="line">Tasks: 160 total,   1 running, 159 sleeping,   0 stopped,   0 zombie</span><br><span class="line">%Cpu(s):  2.2 us,  1.2 sy,  0.0 ni, 96.3 id,  0.0 wa,  0.0 hi,  0.2 si,  0.0 st</span><br><span class="line">KiB Mem :  1877360 total,   424344 free,   746224 used,   706792 buff/cache</span><br><span class="line">KiB Swap:  6713340 total,  6713340 free,        0 used.   963492 avail Mem</span><br><span class="line"></span><br><span class="line">  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND</span><br><span class="line">31814 root      20   0 2099204  91620  23620 S   3.7  4.9   3:03.04 node</span><br><span class="line">  977 root      20   0  820140  47944  14876 S   2.0  2.6   0:40.63 containerd</span><br><span class="line">    9 root      20   0       0      0      0 S   0.3  0.0   0:01.84 rcu_sched</span><br><span class="line">  445 root      20   0       0      0      0 S   0.3  0.0   0:01.07 xfsaild/dm-0</span><br><span class="line">  995 root      20   0  783740  91376  29532 S   0.3  4.9   0:08.46 dockerd</span><br><span class="line"> 1675 polkitd   20   0 1659672 119912  18932 S   0.3  6.4   2:15.62 mongod</span><br><span class="line">31570 root      20   0  633704  38776  15156 S   0.3  2.1   0:13.24 node</span><br><span class="line">    1 root      20   0  191036   3940   2572 S   0.0  0.2   0:00.60 systemd</span><br><span class="line">    2 root      20   0       0      0      0 S   0.0  0.0   0:00.00 kthreadd</span><br><span class="line">    4 root       0 -20       0      0      0 S   0.0  0.0   0:00.00 kworker/0:0H</span><br><span class="line">    6 root      20   0       0      0      0 S   0.0  0.0   0:01.15 ksoftirqd/0</span><br><span class="line">    7 root      rt   0       0      0      0 S   0.0  0.0   0:00.09 migration/0</span><br><span class="line">    8 root      20   0       0      0      0 S   0.0  0.0   0:00.00 rcu_bh</span><br></pre></td></tr></table></figure><blockquote><p>ctrl + c 停止</p></blockquote><ul><li>GUI 压测</li></ul><blockquote><p>1000 个请求 10 秒内</p></blockquote><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-07-22-10-46-12.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-07-22-10-49-10.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>命令行 压测</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jmeter -n -t strapi.jmx -l report/result.csv -j report/log.log -e -o report_html</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-07-22-10-53-49.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="jmeter-压第二轮-服务器-cpu4-核心-2G-内存"><a href="#jmeter-压第二轮-服务器-cpu4-核心-2G-内存" class="headerlink" title="jmeter 压第二轮 - 服务器 cpu4 核心 2G 内存"></a>jmeter 压第二轮 - 服务器 cpu4 核心 2G 内存</h3><ul><li>测试环境</li></ul><p>压测机: 8 核心 32G 本机 macos，发起线程数 1000~2000<br>服务器: 4 核心 2G 虚拟机 centos</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-07-22-11-11-19.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><blockquote><p>1000 个请求 5 秒内</p></blockquote><ul><li>压测报告</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jmeter -n -t strapi.jmx -l report/result.csv -j report/log.log -e -o report_html</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-07-22-11-12-33.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="strapi-优化线程数"><a href="#strapi-优化线程数" class="headerlink" title="strapi 优化线程数"></a>strapi 优化线程数</h3><ul><li>安装 pm2 工具</li></ul><p><a href="https://pm2.keymetrics.io/docs/usage/quick-start/" target="_blank" rel="noopener">https://pm2.keymetrics.io/docs/usage/quick-start/</a></p><ul><li>编写 启动代码 server.js</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> strapi = <span class="built_in">require</span>(<span class="string">"strapi"</span>);</span><br><span class="line">strapi().start();</span><br></pre></td></tr></table></figure><ul><li>编写 配置文件 strapi.config.js</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  apps: [</span><br><span class="line">    &#123;</span><br><span class="line">      name: <span class="string">"strapi-app"</span>,</span><br><span class="line">      script: <span class="string">"./server.js"</span>,</span><br><span class="line">      instances: <span class="number">4</span>,</span><br><span class="line">      exec_mode: <span class="string">"cluster"</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>instances 等于你的核心数</p></blockquote><ul><li>修改 docker-compose.yml</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">  <span class="string">...</span></span><br><span class="line"><span class="attr">strapi-app:</span></span><br><span class="line"><span class="attr">  image:</span> <span class="string">strapi/strapi</span></span><br><span class="line"><span class="attr">  container_name:</span> <span class="string">strapi-app</span></span><br><span class="line"><span class="attr">  restart:</span> <span class="string">always</span></span><br><span class="line"><span class="attr">  ports:</span></span><br><span class="line"><span class="bullet">    -</span> <span class="number">1337</span><span class="string">:1337</span></span><br><span class="line">  <span class="comment"># command: strapi build</span></span><br><span class="line">  <span class="comment"># command: strapi start</span></span><br><span class="line"><span class="attr">  command:</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">/bin/bash</span></span><br><span class="line"><span class="bullet">    -</span> <span class="bullet">-c</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">|</span></span><br><span class="line"><span class="string">      npm install pm2@latest -g</span></span><br><span class="line"><span class="string">      cd /srv/app</span></span><br><span class="line"><span class="string">      pm2-runtime start strapi.config.js</span></span><br><span class="line"><span class="string"></span><span class="attr">  environment:</span></span><br><span class="line">    <span class="string">...</span></span><br></pre></td></tr></table></figure><h3 id="jmeter-压第三轮-服务器-cpu4-核心-2G-内存"><a href="#jmeter-压第三轮-服务器-cpu4-核心-2G-内存" class="headerlink" title="jmeter 压第三轮 - 服务器 cpu4 核心 2G 内存"></a>jmeter 压第三轮 - 服务器 cpu4 核心 2G 内存</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-07-22-11-37-44.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><blockquote><p>2000 个请求 1 秒内</p></blockquote><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-07-22-11-38-41.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="主要服务器指标"><a href="#主要服务器指标" class="headerlink" title="主要服务器指标"></a>主要服务器指标</h3><table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>CPU</td><td>&lt;= 40%</td></tr><tr><td>内存</td><td>&lt;= 70%</td></tr></tbody></table><blockquote><p>其它主要指标 连接数、本机进出流量、内网带宽、外网带宽</p></blockquote><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul><li>strapi 服务器部署配置</li><li>jmetre 基线测试方法、主要指标查看</li></ul><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li>strapi 插件配置</li></ul><p><a href="https://strapi.io/documentation/v3.x/plugins/graphql.html" target="_blank" rel="noopener">https://strapi.io/documentation/v3.x/plugins/graphql.html</a></p><ul><li>strapi 命令行</li></ul><p><a href="https://strapi.io/documentation/v3.x/cli/CLI.html#strapi-new" target="_blank" rel="noopener">https://strapi.io/documentation/v3.x/cli/CLI.html#strapi-new</a></p><ul><li>strapi 部署说明</li></ul><p><a href="https://strapi.io/documentation/v3.x/admin-panel/deploy.html" target="_blank" rel="noopener">https://strapi.io/documentation/v3.x/admin-panel/deploy.html</a></p><ul><li>pm2 安装</li></ul><p><a href="https://pm2.keymetrics.io/docs/usage/quick-start/" target="_blank" rel="noopener">https://pm2.keymetrics.io/docs/usage/quick-start/</a></p><ul><li>pm2 配置文件</li></ul><p><a href="https://pm2.keymetrics.io/docs/usage/application-declaration/" target="_blank" rel="noopener">https://pm2.keymetrics.io/docs/usage/application-declaration/</a></p><ul><li>jmeter</li></ul><p><a href="https://jmeter.apache.org/download_jmeter.cgi" target="_blank" rel="noopener">https://jmeter.apache.org/download_jmeter.cgi</a></p><ul><li>jmeter 分布式</li></ul><p><a href="https://jmeter.apache.org/usermanual/jmeter_distributed_testing_step_by_step.html" target="_blank" rel="noopener">https://jmeter.apache.org/usermanual/jmeter_distributed_testing_step_by_step.html</a></p><h2 id="资源"><a href="#资源" class="headerlink" title="资源"></a>资源</h2><h3 id="设计稿蓝湖预览"><a href="#设计稿蓝湖预览" class="headerlink" title="设计稿蓝湖预览"></a>设计稿蓝湖预览</h3><p><a href="https://lanhuapp.com/url/lYuz1" target="_blank" rel="noopener">https://lanhuapp.com/url/lYuz1</a><br>密码: gSKl</p><blockquote><p>蓝湖现在收费了，所以查看标记还请自己上传 xd 设计稿<br>商业设计稿文件不好直接分享, 可以加微信联系 ducafecat</p></blockquote><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="Flutter 实战从零开始" scheme="https://blog.ducafecat.tech/categories/Flutter-%E5%AE%9E%E6%88%98%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 实战从零开始 新闻客户端 - 16 headless strapi + graphql 用户注册、登录、异常处理</title>
    <link href="https://blog.ducafecat.tech/2020/07/14/flutter-project/flutter-project-news-16-strapi-graphql-login-register/"/>
    <id>https://blog.ducafecat.tech/2020/07/14/flutter-project/flutter-project-news-16-strapi-graphql-login-register/</id>
    <published>2020-07-13T16:00:00.000Z</published>
    <updated>2020-07-24T08:42:17.504Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-07-14-15-06-20.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>编写 mutation 操作，登录、注册</li><li>graphql 操作类加入异常处理</li></ul><h2 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h2><p><a href="https://www.bilibili.com/video/BV1vt4y1Q7i3/" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1vt4y1Q7i3/</a></p><iframe src="//player.bilibili.com/player.html?bvid=BV1vt4y1Q7i3&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" height="400px"> </iframe><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/ducafecat/flutter_learn_news/releases/tag/v1.0.16" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news/releases/tag/v1.0.16</a></p><h2 id="strapi-运行环境网盘下载"><a href="#strapi-运行环境网盘下载" class="headerlink" title="strapi 运行环境网盘下载"></a>strapi 运行环境网盘下载</h2><ul><li>网盘</li></ul><p>链接:<a href="https://pan.baidu.com/s/13Ujy2hzXp8tSqxCx_4IhVQ" target="_blank" rel="noopener">https://pan.baidu.com/s/13Ujy2hzXp8tSqxCx_4IhVQ</a><br>密码:yu82</p><ul><li>运行</li></ul><p>需要用 docker-compose 启动<br>账号 admin<br>密码 123456</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动</span></span><br><span class="line">docker-compose up -d --remove-orphans</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭</span></span><br><span class="line">docker-compose down</span><br></pre></td></tr></table></figure><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><ul><li>调试地址</li></ul><p><a href="http://localhost:1337/graphql" target="_blank" rel="noopener">http://localhost:1337/graphql</a></p><h3 id="注册-graphql"><a href="#注册-graphql" class="headerlink" title="注册 graphql"></a>注册 graphql</h3><ul><li>mutation</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mutation UserRegister($username: String!, $email: String!, $password: String!) &#123;</span><br><span class="line">  register(input: &#123; username: $username, email: $email, password: $password &#125;) &#123;</span><br><span class="line">    jwt</span><br><span class="line">    user &#123;</span><br><span class="line">      id</span><br><span class="line">      username</span><br><span class="line">      email</span><br><span class="line">      role &#123;</span><br><span class="line">        id</span><br><span class="line">        name</span><br><span class="line">        description</span><br><span class="line">        type</span><br><span class="line">      &#125;</span><br><span class="line">      blocked</span><br><span class="line">      confirmed</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>variables</li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"username"</span>: <span class="string">"dbuser"</span>,</span><br><span class="line">  <span class="attr">"email"</span>: <span class="string">"dbuser@ducafecat.tech"</span>,</span><br><span class="line">  <span class="attr">"password"</span>: <span class="string">"12345678"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="登录-graphql"><a href="#登录-graphql" class="headerlink" title="登录 graphql"></a>登录 graphql</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mutation UserLogin($identifier: String!, $password: String!) &#123;</span><br><span class="line">  login(input: &#123; identifier: $identifier, password: $password &#125;) &#123;</span><br><span class="line">    jwt</span><br><span class="line">    user &#123;</span><br><span class="line">      id</span><br><span class="line">      username</span><br><span class="line">      email</span><br><span class="line">      role &#123;</span><br><span class="line">        id</span><br><span class="line">        name</span><br><span class="line">        description</span><br><span class="line">        type</span><br><span class="line">      &#125;</span><br><span class="line">      blocked</span><br><span class="line">      confirmed</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>variables</li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"identifier"</span>: <span class="string">"dbuser"</span>,</span><br><span class="line">  <span class="attr">"password"</span>: <span class="string">"12345678"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>identifier 可以是 username、email ，都是唯一的</p></blockquote><h3 id="Graphql-请求类加入异常处理"><a href="#Graphql-请求类加入异常处理" class="headerlink" title="Graphql 请求类加入异常处理"></a>Graphql 请求类加入异常处理</h3><ul><li>lib/common/utils/graphql_client.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/common/utils/utils.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/common/values/values.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/common/widgets/widgets.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/global.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:graphql/client.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GraphqlClientUtil</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> OptimisticCache cache = OptimisticCache(</span><br><span class="line">    dataIdFromObject: typenameDataIdFromObject,</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> client() &#123;</span><br><span class="line">    HttpLink _httpLink = HttpLink(</span><br><span class="line">      uri: <span class="string">'$SERVER_STRAPI_GRAPHQL_URL/graphql'</span>,</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (Global.profile?.jwt != <span class="keyword">null</span>) &#123;</span><br><span class="line">      <span class="keyword">final</span> AuthLink _authLink = AuthLink(</span><br><span class="line">        getToken: () =&gt; <span class="string">'Bearer <span class="subst">$&#123;Global.profile.jwt&#125;</span>'</span>,</span><br><span class="line">      );</span><br><span class="line">      <span class="keyword">final</span> Link _link = _authLink.concat(_httpLink);</span><br><span class="line">      <span class="keyword">return</span> GraphQLClient(</span><br><span class="line">        cache: cache,</span><br><span class="line">        link: _link,</span><br><span class="line">      );</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> GraphQLClient(</span><br><span class="line">        cache: cache,</span><br><span class="line">        link: _httpLink,</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 错误处理</span></span></span><br><span class="line">  <span class="keyword">static</span> _formatException(BuildContext context, OperationException exception) &#123;</span><br><span class="line">    <span class="keyword">var</span> statusCode = <span class="string">''</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      statusCode = exception</span><br><span class="line">          .graphqlErrors[<span class="number">0</span>]?.extensions[<span class="string">"exception"</span>][<span class="string">"output"</span>][<span class="string">"statusCode"</span>]</span><br><span class="line">          .toString();</span><br><span class="line">      <span class="keyword">if</span> (statusCode == <span class="string">''</span>) &#123;</span><br><span class="line">        statusCode = exception.graphqlErrors[<span class="number">0</span>]?.extensions[<span class="string">"exception"</span>][<span class="string">"code"</span>]</span><br><span class="line">            .toString();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span> (statusCode) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">'400'</span>: <span class="comment">// 重新登录</span></span><br><span class="line">        toastInfo(msg: <span class="string">"错误请求，提交数据错误！"</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">'401'</span>: <span class="comment">// 没有认证</span></span><br><span class="line">      <span class="keyword">case</span> <span class="string">'403'</span>: <span class="comment">// 没有授权</span></span><br><span class="line">        toastInfo(msg: <span class="string">"账号无效、服务没有授权，请重新登录！"</span>);</span><br><span class="line">        <span class="keyword">return</span> goLoginPage(context);</span><br><span class="line">      <span class="comment">// break;</span></span><br><span class="line">      <span class="keyword">default</span>:</span><br><span class="line">        toastInfo(msg: exception.toString());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">throw</span> exception;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 查询</span></span><br><span class="line">  <span class="keyword">static</span> Future query(&#123;</span><br><span class="line">    <span class="meta">@required</span> BuildContext context,</span><br><span class="line">    <span class="meta">@required</span> <span class="built_in">String</span> schema,</span><br><span class="line">    <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; variables,</span><br><span class="line">  &#125;) <span class="keyword">async</span> &#123;</span><br><span class="line">    QueryOptions options = QueryOptions(</span><br><span class="line">      documentNode: gql(schema),</span><br><span class="line">      variables: variables,</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    QueryResult result = <span class="keyword">await</span> client().query(options);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (result.hasException) &#123;</span><br><span class="line">      _formatException(context, result.exception);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 操作</span></span><br><span class="line">  <span class="keyword">static</span> Future mutate(&#123;</span><br><span class="line">    <span class="meta">@required</span> BuildContext context,</span><br><span class="line">    <span class="meta">@required</span> <span class="built_in">String</span> schema,</span><br><span class="line">    <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; variables,</span><br><span class="line">  &#125;) <span class="keyword">async</span> &#123;</span><br><span class="line">    MutationOptions options = MutationOptions(</span><br><span class="line">      documentNode: gql(schema),</span><br><span class="line">      variables: variables,</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    QueryResult result = <span class="keyword">await</span> client().mutate(options);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (result.hasException) &#123;</span><br><span class="line">      _formatException(context, result.exception);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>常见错误码:</li></ul><p>400 数据提交时间<br>401 需要登录认证<br>403 功能需要授权</p><h3 id="Entity-用户"><a href="#Entity-用户" class="headerlink" title="Entity 用户"></a>Entity 用户</h3><ul><li>lib/common/entitys/gql_user.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 用户登录 - request</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GqlUserLoginRequestEntity</span> </span>&#123;</span><br><span class="line">  GqlUserLoginRequestEntity(&#123;</span><br><span class="line">    <span class="keyword">this</span>.identifier,</span><br><span class="line">    <span class="keyword">this</span>.password,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">String</span> identifier;</span><br><span class="line">  <span class="built_in">String</span> password;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">factory</span> GqlUserLoginRequestEntity.fromJson(<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; json) =&gt;</span><br><span class="line">      GqlUserLoginRequestEntity(</span><br><span class="line">        identifier: json[<span class="string">"identifier"</span>],</span><br><span class="line">        password: json[<span class="string">"password"</span>],</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">  <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; toJson() =&gt; &#123;</span><br><span class="line">        <span class="string">"identifier"</span>: identifier,</span><br><span class="line">        <span class="string">"password"</span>: password,</span><br><span class="line">      &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用户登录 - request</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GqlUserRegisterRequestEntity</span> </span>&#123;</span><br><span class="line">  GqlUserRegisterRequestEntity(&#123;</span><br><span class="line">    <span class="keyword">this</span>.username,</span><br><span class="line">    <span class="keyword">this</span>.email,</span><br><span class="line">    <span class="keyword">this</span>.password,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">String</span> username;</span><br><span class="line">  <span class="built_in">String</span> email;</span><br><span class="line">  <span class="built_in">String</span> password;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">factory</span> GqlUserRegisterRequestEntity.fromJson(<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; json) =&gt;</span><br><span class="line">      GqlUserRegisterRequestEntity(</span><br><span class="line">        username: json[<span class="string">"username"</span>],</span><br><span class="line">        email: json[<span class="string">"email"</span>],</span><br><span class="line">        password: json[<span class="string">"password"</span>],</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">  <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; toJson() =&gt; &#123;</span><br><span class="line">        <span class="string">"username"</span>: username,</span><br><span class="line">        <span class="string">"email"</span>: email,</span><br><span class="line">        <span class="string">"password"</span>: password,</span><br><span class="line">      &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="markdown">//////////////////////////////////////////////////////////////////</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 用户登录 - response</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GqlUserLoginResponseEntity</span> </span>&#123;</span><br><span class="line">  GqlUserLoginResponseEntity(&#123;</span><br><span class="line">    <span class="keyword">this</span>.jwt,</span><br><span class="line">    <span class="keyword">this</span>.user,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">String</span> jwt;</span><br><span class="line">  UserEntity user;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">factory</span> GqlUserLoginResponseEntity.fromJson(<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; json) =&gt;</span><br><span class="line">      GqlUserLoginResponseEntity(</span><br><span class="line">        jwt: json[<span class="string">"jwt"</span>],</span><br><span class="line">        user: UserEntity.fromJson(json[<span class="string">"user"</span>]),</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">  <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; toJson() =&gt; &#123;</span><br><span class="line">        <span class="string">"jwt"</span>: jwt,</span><br><span class="line">        <span class="string">"user"</span>: user.toJson(),</span><br><span class="line">      &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 注册新用户 - response</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GqlUserRegisterResponseEntity</span> </span>&#123;</span><br><span class="line">  GqlUserRegisterResponseEntity(&#123;</span><br><span class="line">    <span class="keyword">this</span>.jwt,</span><br><span class="line">    <span class="keyword">this</span>.user,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">String</span> jwt;</span><br><span class="line">  UserEntity user;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">factory</span> GqlUserRegisterResponseEntity.fromJson(<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; json) =&gt;</span><br><span class="line">      GqlUserRegisterResponseEntity(</span><br><span class="line">        jwt: json[<span class="string">"jwt"</span>],</span><br><span class="line">        user: UserEntity.fromJson(json[<span class="string">"user"</span>]),</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">  <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; toJson() =&gt; &#123;</span><br><span class="line">        <span class="string">"jwt"</span>: jwt,</span><br><span class="line">        <span class="string">"user"</span>: user.toJson(),</span><br><span class="line">      &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用户</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserEntity</span> </span>&#123;</span><br><span class="line">  UserEntity(&#123;</span><br><span class="line">    <span class="keyword">this</span>.id,</span><br><span class="line">    <span class="keyword">this</span>.username,</span><br><span class="line">    <span class="keyword">this</span>.email,</span><br><span class="line">    <span class="keyword">this</span>.role,</span><br><span class="line">    <span class="keyword">this</span>.blocked,</span><br><span class="line">    <span class="keyword">this</span>.confirmed,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">String</span> id;</span><br><span class="line">  <span class="built_in">String</span> username;</span><br><span class="line">  <span class="built_in">String</span> email;</span><br><span class="line">  RoleEntity role;</span><br><span class="line">  <span class="built_in">bool</span> blocked;</span><br><span class="line">  <span class="built_in">bool</span> confirmed;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">factory</span> UserEntity.fromJson(<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; json) =&gt; UserEntity(</span><br><span class="line">        id: json[<span class="string">"id"</span>],</span><br><span class="line">        username: json[<span class="string">"username"</span>],</span><br><span class="line">        email: json[<span class="string">"email"</span>],</span><br><span class="line">        role: RoleEntity.fromJson(json[<span class="string">"role"</span>]),</span><br><span class="line">        blocked: json[<span class="string">"blocked"</span>],</span><br><span class="line">        confirmed: json[<span class="string">"confirmed"</span>],</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">  <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; toJson() =&gt; &#123;</span><br><span class="line">        <span class="string">"id"</span>: id,</span><br><span class="line">        <span class="string">"username"</span>: username,</span><br><span class="line">        <span class="string">"email"</span>: email,</span><br><span class="line">        <span class="string">"role"</span>: role.toJson(),</span><br><span class="line">        <span class="string">"blocked"</span>: blocked,</span><br><span class="line">        <span class="string">"confirmed"</span>: confirmed,</span><br><span class="line">      &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 角色</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RoleEntity</span> </span>&#123;</span><br><span class="line">  RoleEntity(&#123;</span><br><span class="line">    <span class="keyword">this</span>.id,</span><br><span class="line">    <span class="keyword">this</span>.name,</span><br><span class="line">    <span class="keyword">this</span>.description,</span><br><span class="line">    <span class="keyword">this</span>.type,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">String</span> id;</span><br><span class="line">  <span class="built_in">String</span> name;</span><br><span class="line">  <span class="built_in">String</span> description;</span><br><span class="line">  <span class="built_in">String</span> type;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">factory</span> RoleEntity.fromJson(<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; json) =&gt; RoleEntity(</span><br><span class="line">        id: json[<span class="string">"id"</span>],</span><br><span class="line">        name: json[<span class="string">"name"</span>],</span><br><span class="line">        description: json[<span class="string">"description"</span>],</span><br><span class="line">        type: json[<span class="string">"type"</span>],</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">  <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; toJson() =&gt; &#123;</span><br><span class="line">        <span class="string">"id"</span>: id,</span><br><span class="line">        <span class="string">"name"</span>: name,</span><br><span class="line">        <span class="string">"description"</span>: description,</span><br><span class="line">        <span class="string">"type"</span>: type,</span><br><span class="line">      &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="API-用户注册、登录"><a href="#API-用户注册、登录" class="headerlink" title="API 用户注册、登录"></a>API 用户注册、登录</h3><ul><li>lib/common/apis/gql_user.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/common/entitys/entitys.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/common/graphql/graphql.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/common/utils/utils.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:graphql/client.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="markdown">/// 新闻</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GqlUserAPI</span> </span>&#123;</span><br><span class="line">  <span class="comment"><span class="markdown">/// 登录</span></span></span><br><span class="line">  <span class="keyword">static</span> Future&lt;GqlUserLoginResponseEntity&gt; login(&#123;</span><br><span class="line">    <span class="meta">@required</span> BuildContext context,</span><br><span class="line">    <span class="meta">@required</span> GqlUserLoginRequestEntity variables,</span><br><span class="line">  &#125;) <span class="keyword">async</span> &#123;</span><br><span class="line">    QueryResult response = <span class="keyword">await</span> GraphqlClientUtil.mutate(</span><br><span class="line">        context: context,</span><br><span class="line">        schema: GQL_USER_LOGIN,</span><br><span class="line">        variables: variables.toJson());</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> GqlUserLoginResponseEntity.fromJson(response.data[<span class="string">"login"</span>]);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 注册</span></span></span><br><span class="line">  <span class="keyword">static</span> Future&lt;GqlUserRegisterResponseEntity&gt; register(&#123;</span><br><span class="line">    <span class="meta">@required</span> BuildContext context,</span><br><span class="line">    <span class="meta">@required</span> GqlUserRegisterRequestEntity variables,</span><br><span class="line">  &#125;) <span class="keyword">async</span> &#123;</span><br><span class="line">    QueryResult response = <span class="keyword">await</span> GraphqlClientUtil.mutate(</span><br><span class="line">        context: context,</span><br><span class="line">        schema: GQL_USER_REGISTER,</span><br><span class="line">        variables: variables.toJson());</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> GqlUserRegisterResponseEntity.fromJson(response.data[<span class="string">"register"</span>]);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="资源"><a href="#资源" class="headerlink" title="资源"></a>资源</h2><h3 id="设计稿蓝湖预览"><a href="#设计稿蓝湖预览" class="headerlink" title="设计稿蓝湖预览"></a>设计稿蓝湖预览</h3><p><a href="https://lanhuapp.com/url/lYuz1" target="_blank" rel="noopener">https://lanhuapp.com/url/lYuz1</a><br>密码: gSKl</p><blockquote><p>蓝湖现在收费了，所以查看标记还请自己上传 xd 设计稿<br>商业设计稿文件不好直接分享, 可以加微信联系 ducafecat</p></blockquote><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="Flutter 实战从零开始" scheme="https://blog.ducafecat.tech/categories/Flutter-%E5%AE%9E%E6%88%98%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 实战从零开始 新闻客户端 - 15 headless strapi 数据建模 graphql 条件查询排序</title>
    <link href="https://blog.ducafecat.tech/2020/07/09/flutter-project/flutter-project-news-15-strapi-graphql-data-model/"/>
    <id>https://blog.ducafecat.tech/2020/07/09/flutter-project/flutter-project-news-15-strapi-graphql-data-model/</id>
    <published>2020-07-08T16:00:00.000Z</published>
    <updated>2020-07-24T06:53:23.029Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-07-09-21-27-16.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>portainer 容器管理工具</li><li>数据库设计过程</li><li>数据库设计目标、规范、习惯</li><li>graphql 条件查询、排序</li><li>flutter 代码实现</li></ul><h2 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h2><p><a href="https://www.bilibili.com/video/BV1jD4y1S7Mu/" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1jD4y1S7Mu/</a></p><iframe src="//player.bilibili.com/player.html?bvid=BV1jD4y1S7Mu&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" height="400px"> </iframe><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/ducafecat/flutter_learn_news/releases/tag/v1.0.15" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news/releases/tag/v1.0.15</a></p><h2 id="strapi-运行环境网盘下载"><a href="#strapi-运行环境网盘下载" class="headerlink" title="strapi 运行环境网盘下载"></a>strapi 运行环境网盘下载</h2><ul><li>网盘</li></ul><p>链接:<a href="https://pan.baidu.com/s/13Ujy2hzXp8tSqxCx_4IhVQ" target="_blank" rel="noopener">https://pan.baidu.com/s/13Ujy2hzXp8tSqxCx_4IhVQ</a><br>密码:yu82</p><ul><li>文件</li></ul><table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>strapi-docker-compose-00.zip</td><td>干净环境，已安装 graphql 插件</td></tr><tr><td>strapi-docker-compose-15.zip</td><td>15 课内容</td></tr></tbody></table><ul><li>运行</li></ul><p>需要用 docker-compose 启动<br>账号 admin<br>密码 123456</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动</span></span><br><span class="line">docker-compose up -d --remove-orphans</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭</span></span><br><span class="line">docker-compose down</span><br></pre></td></tr></table></figure><h2 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h2><ul><li><a href="https://www.portainer.io" target="_blank" rel="noopener">https://www.portainer.io</a></li><li><a href="https://www.draw.io" target="_blank" rel="noopener">https://www.draw.io</a></li><li><a href="https://app.quicktype.io" target="_blank" rel="noopener">https://app.quicktype.io</a></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><h3 id="安装-portainer"><a href="#安装-portainer" class="headerlink" title="安装 portainer"></a>安装 portainer</h3><ul><li><a href="https://www.portainer.io" target="_blank" rel="noopener">https://www.portainer.io</a></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 9000:9000 \</span><br><span class="line">    --restart=always \</span><br><span class="line">    -v /var/run/docker.sock:/var/run/docker.sock \</span><br><span class="line">    --name portainer-local \</span><br><span class="line">    portainer/portainer</span><br></pre></td></tr></table></figure><h3 id="设计数据模型"><a href="#设计数据模型" class="headerlink" title="设计数据模型"></a>设计数据模型</h3><ul><li><p><a href="https://www.draw.io" target="_blank" rel="noopener">https://www.draw.io</a></p></li><li><p>标准数据库设计</p></li></ul><p>ER 图 -&gt; 设计范式 -&gt; 数据库物理表</p><ul><li>ER</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-07-09-17-59-37.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>范式</li></ul><p><a href="https://zh.wikipedia.org/wiki/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A7%84%E8%8C%83%E5%8C%96" target="_blank" rel="noopener">https://zh.wikipedia.org/wiki/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A7%84%E8%8C%83%E5%8C%96</a></p><ul><li>设计规范 表前缀</li></ul><p>sys<em> 系统、用户、权限<br>dict</em> 字典表<br>bus_ 业务</p><ul><li>设计数据 对象、属性、关系</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-07-09-17-56-48.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="创建-strapi-数据类型"><a href="#创建-strapi-数据类型" class="headerlink" title="创建 strapi 数据类型"></a>创建 strapi 数据类型</h3><ul><li>创建外键表 新闻分类</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-07-09-18-02-49.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>创建外键表 新闻频道</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-07-09-18-03-04.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>创建业务表 新闻内容</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-07-09-18-03-20.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>创建链接外键 新闻内容、分类、频道</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-07-09-18-03-37.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="编写-graphql-查询"><a href="#编写-graphql-查询" class="headerlink" title="编写 graphql 查询"></a>编写 graphql 查询</h3><ul><li>新闻</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">query News($category_code: String) &#123;</span><br><span class="line">  busNews(where: &#123; dict_categories: &#123; code: $category_code &#125; &#125;) &#123;</span><br><span class="line">    title</span><br><span class="line">    dict_channel &#123;</span><br><span class="line">      code</span><br><span class="line">      title</span><br><span class="line">      icon &#123;</span><br><span class="line">        url</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    dict_categories &#123;</span><br><span class="line">      code</span><br><span class="line">      title</span><br><span class="line">    &#125;</span><br><span class="line">    author</span><br><span class="line">    url</span><br><span class="line">    addtime</span><br><span class="line">    thumbnail &#123;</span><br><span class="line">      url</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>首页</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">query pageIndex &#123;</span><br><span class="line">  # 分类</span><br><span class="line">  dictCategories(sort: &quot;sortNum:desc&quot;) &#123;</span><br><span class="line">    code</span><br><span class="line">    title</span><br><span class="line">  &#125;</span><br><span class="line">  # 频道</span><br><span class="line">  dictChannels(sort: &quot;sortNum:desc&quot;) &#123;</span><br><span class="line">    code</span><br><span class="line">    title</span><br><span class="line">    icon &#123;</span><br><span class="line">      url</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  # 热点</span><br><span class="line">  busNews(where: &#123; dict_categories: &#123; code: &quot;news_hot&quot; &#125; &#125;) &#123;</span><br><span class="line">    title</span><br><span class="line">    dict_channel &#123;</span><br><span class="line">      code</span><br><span class="line">      title</span><br><span class="line">      icon &#123;</span><br><span class="line">        url</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    dict_categories &#123;</span><br><span class="line">      code</span><br><span class="line">      title</span><br><span class="line">    &#125;</span><br><span class="line">    author</span><br><span class="line">    url</span><br><span class="line">    addtime</span><br><span class="line">    thumbnail &#123;</span><br><span class="line">      url</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="编写-flutter-代码"><a href="#编写-flutter-代码" class="headerlink" title="编写 flutter 代码"></a>编写 flutter 代码</h3><ul><li>实例 entity</li></ul><p>lib/common/entitys/gql_news.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 首页</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GqlIndexResponseEntity</span> </span>&#123;</span><br><span class="line">  GqlIndexResponseEntity(&#123;</span><br><span class="line">    <span class="keyword">this</span>.dictCategories,</span><br><span class="line">    <span class="keyword">this</span>.dictChannels,</span><br><span class="line">    <span class="keyword">this</span>.busNews,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">List</span>&lt;DictCategoryEntity&gt; dictCategories;</span><br><span class="line">  <span class="built_in">List</span>&lt;DictChannelEntity&gt; dictChannels;</span><br><span class="line">  <span class="built_in">List</span>&lt;GqlNewsResponseEntity&gt; busNews;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">factory</span> GqlIndexResponseEntity.fromJson(<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; json) =&gt;</span><br><span class="line">      GqlIndexResponseEntity(</span><br><span class="line">        dictCategories: <span class="built_in">List</span>&lt;DictCategoryEntity&gt;.from(</span><br><span class="line">            json[<span class="string">"dictCategories"</span>].map((x) =&gt; DictCategoryEntity.fromJson(x))),</span><br><span class="line">        dictChannels: <span class="built_in">List</span>&lt;DictChannelEntity&gt;.from(</span><br><span class="line">            json[<span class="string">"dictChannels"</span>].map((x) =&gt; DictChannelEntity.fromJson(x))),</span><br><span class="line">        busNews: <span class="built_in">List</span>&lt;GqlNewsResponseEntity&gt;.from(</span><br><span class="line">            json[<span class="string">"busNews"</span>].map((x) =&gt; GqlNewsResponseEntity.fromJson(x))),</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">  <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; toJson() =&gt; &#123;</span><br><span class="line">        <span class="string">"dictCategories"</span>:</span><br><span class="line">            <span class="built_in">List</span>&lt;<span class="keyword">dynamic</span>&gt;.from(dictCategories.map((x) =&gt; x.toJson())),</span><br><span class="line">        <span class="string">"dictChannels"</span>: <span class="built_in">List</span>&lt;<span class="keyword">dynamic</span>&gt;.from(dictChannels.map((x) =&gt; x.toJson())),</span><br><span class="line">        <span class="string">"busNews"</span>: <span class="built_in">List</span>&lt;<span class="keyword">dynamic</span>&gt;.from(busNews.map((x) =&gt; x.toJson())),</span><br><span class="line">      &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 新闻</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GqlNewsResponseEntity</span> </span>&#123;</span><br><span class="line">  GqlNewsResponseEntity(&#123;</span><br><span class="line">    <span class="keyword">this</span>.title,</span><br><span class="line">    <span class="keyword">this</span>.dictChannel,</span><br><span class="line">    <span class="keyword">this</span>.dictCategories,</span><br><span class="line">    <span class="keyword">this</span>.author,</span><br><span class="line">    <span class="keyword">this</span>.url,</span><br><span class="line">    <span class="keyword">this</span>.addtime,</span><br><span class="line">    <span class="keyword">this</span>.thumbnail,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">String</span> title;</span><br><span class="line">  DictChannelEntity dictChannel;</span><br><span class="line">  <span class="built_in">List</span>&lt;DictCategoryEntity&gt; dictCategories;</span><br><span class="line">  <span class="built_in">String</span> author;</span><br><span class="line">  <span class="built_in">String</span> url;</span><br><span class="line">  <span class="built_in">DateTime</span> addtime;</span><br><span class="line">  ThumbnailEntity thumbnail;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">factory</span> GqlNewsResponseEntity.fromJson(<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; json) =&gt;</span><br><span class="line">      GqlNewsResponseEntity(</span><br><span class="line">        title: json[<span class="string">"title"</span>],</span><br><span class="line">        dictChannel: DictChannelEntity.fromJson(json[<span class="string">"dict_channel"</span>]),</span><br><span class="line">        dictCategories: <span class="built_in">List</span>&lt;DictCategoryEntity&gt;.from(</span><br><span class="line">            json[<span class="string">"dict_categories"</span>].map((x) =&gt; DictCategoryEntity.fromJson(x))),</span><br><span class="line">        author: json[<span class="string">"author"</span>],</span><br><span class="line">        url: json[<span class="string">"url"</span>],</span><br><span class="line">        addtime: <span class="built_in">DateTime</span>.parse(json[<span class="string">"addtime"</span>]),</span><br><span class="line">        thumbnail: ThumbnailEntity.fromJson(json[<span class="string">"thumbnail"</span>]),</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">  <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; toJson() =&gt; &#123;</span><br><span class="line">        <span class="string">"title"</span>: title,</span><br><span class="line">        <span class="string">"dict_channel"</span>: dictChannel.toJson(),</span><br><span class="line">        <span class="string">"dict_categories"</span>:</span><br><span class="line">            <span class="built_in">List</span>&lt;<span class="keyword">dynamic</span>&gt;.from(dictCategories.map((x) =&gt; x.toJson())),</span><br><span class="line">        <span class="string">"author"</span>: author,</span><br><span class="line">        <span class="string">"url"</span>: url,</span><br><span class="line">        <span class="string">"addtime"</span>:</span><br><span class="line">            <span class="string">"<span class="subst">$&#123;addtime.year.toString().padLeft(<span class="number">4</span>, <span class="string">'0'</span>)&#125;</span>-<span class="subst">$&#123;addtime.month.toString().padLeft(<span class="number">2</span>, <span class="string">'0'</span>)&#125;</span>-<span class="subst">$&#123;addtime.day.toString().padLeft(<span class="number">2</span>, <span class="string">'0'</span>)&#125;</span>"</span>,</span><br><span class="line">        <span class="string">"ThumbnailEntity"</span>: thumbnail.toJson(),</span><br><span class="line">      &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 分类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DictCategoryEntity</span> </span>&#123;</span><br><span class="line">  DictCategoryEntity(&#123;</span><br><span class="line">    <span class="keyword">this</span>.code,</span><br><span class="line">    <span class="keyword">this</span>.title,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">String</span> code;</span><br><span class="line">  <span class="built_in">String</span> title;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">factory</span> DictCategoryEntity.fromJson(<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; json) =&gt;</span><br><span class="line">      DictCategoryEntity(</span><br><span class="line">        code: json[<span class="string">"code"</span>],</span><br><span class="line">        title: json[<span class="string">"title"</span>],</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">  <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; toJson() =&gt; &#123;</span><br><span class="line">        <span class="string">"code"</span>: code,</span><br><span class="line">        <span class="string">"title"</span>: title,</span><br><span class="line">      &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 频道</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DictChannelEntity</span> </span>&#123;</span><br><span class="line">  DictChannelEntity(&#123;</span><br><span class="line">    <span class="keyword">this</span>.code,</span><br><span class="line">    <span class="keyword">this</span>.title,</span><br><span class="line">    <span class="keyword">this</span>.icon,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">String</span> code;</span><br><span class="line">  <span class="built_in">String</span> title;</span><br><span class="line">  ThumbnailEntity icon;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">factory</span> DictChannelEntity.fromJson(<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; json) =&gt;</span><br><span class="line">      DictChannelEntity(</span><br><span class="line">        code: json[<span class="string">"code"</span>],</span><br><span class="line">        title: json[<span class="string">"title"</span>],</span><br><span class="line">        icon: ThumbnailEntity.fromJson(json[<span class="string">"icon"</span>]),</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">  <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; toJson() =&gt; &#123;</span><br><span class="line">        <span class="string">"code"</span>: code,</span><br><span class="line">        <span class="string">"title"</span>: title,</span><br><span class="line">        <span class="string">"icon"</span>: icon.toJson(),</span><br><span class="line">      &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 图</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ThumbnailEntity</span> </span>&#123;</span><br><span class="line">  ThumbnailEntity(&#123;</span><br><span class="line">    <span class="keyword">this</span>.url,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">String</span> url;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">factory</span> ThumbnailEntity.fromJson(<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; json) =&gt;</span><br><span class="line">      ThumbnailEntity(</span><br><span class="line">        url: json[<span class="string">"url"</span>],</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">  <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; toJson() =&gt; &#123;</span><br><span class="line">        <span class="string">"url"</span>: url,</span><br><span class="line">      &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>api</li></ul><p>lib/common/apis/gql_news.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="markdown">/// 新闻</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GqlNewsAPI</span> </span>&#123;</span><br><span class="line">  <span class="comment"><span class="markdown">/// 首页</span></span></span><br><span class="line">  <span class="keyword">static</span> Future&lt;GqlIndexResponseEntity&gt; indexPageInfo(&#123;</span><br><span class="line">    <span class="meta">@required</span> BuildContext context,</span><br><span class="line">    <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; params,</span><br><span class="line">  &#125;) <span class="keyword">async</span> &#123;</span><br><span class="line">    QueryResult response =</span><br><span class="line">        <span class="keyword">await</span> GraphqlClientUtil.query(context: context, schema: GQL_INDEX_PAGE);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> GqlIndexResponseEntity.fromJson(response.data);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 翻页</span></span></span><br><span class="line">  <span class="keyword">static</span> Future&lt;<span class="built_in">List</span>&lt;GqlNewsResponseEntity&gt;&gt; newsPageList(&#123;</span><br><span class="line">    <span class="meta">@required</span> BuildContext context,</span><br><span class="line">    <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; params,</span><br><span class="line">  &#125;) <span class="keyword">async</span> &#123;</span><br><span class="line">    QueryResult response = <span class="keyword">await</span> GraphqlClientUtil.query(</span><br><span class="line">        context: context, schema: GQL_NEWS_LIST, variables: params);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> response.data[<span class="string">'busNews'</span>]</span><br><span class="line">        .map&lt;GqlNewsResponseEntity&gt;(</span><br><span class="line">            (item) =&gt; GqlNewsResponseEntity.fromJson(item))</span><br><span class="line">        .toList();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>界面业务代码</li></ul><p>lib/pages/main/main.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">GqlIndexResponseEntity _indexPageData; <span class="comment">// 首页数据</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 读取所有数据</span></span><br><span class="line">_loadAllData() <span class="keyword">async</span> &#123;</span><br><span class="line">  _indexPageData = <span class="keyword">await</span> GqlNewsAPI.indexPageInfo(context: context);</span><br><span class="line">  ...</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (mounted) &#123;</span><br><span class="line">    setState(() &#123;&#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 拉取推荐、新闻</span></span><br><span class="line">_loadNewsData(</span><br><span class="line">  categoryCode, &#123;</span><br><span class="line">  <span class="built_in">bool</span> refresh = <span class="keyword">false</span>,</span><br><span class="line">&#125;) <span class="keyword">async</span> &#123;</span><br><span class="line">  _selCategoryCode = categoryCode;</span><br><span class="line">  _newsPageList = <span class="keyword">await</span> GqlNewsAPI.newsPageList(</span><br><span class="line">      context: context, params: &#123;<span class="string">"category_code"</span>: categoryCode&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (mounted) &#123;</span><br><span class="line">    setState(() &#123;&#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">...</span><br></pre></td></tr></table></figure><blockquote><p>详见 git</p></blockquote><h2 id="资源"><a href="#资源" class="headerlink" title="资源"></a>资源</h2><h3 id="设计稿蓝湖预览"><a href="#设计稿蓝湖预览" class="headerlink" title="设计稿蓝湖预览"></a>设计稿蓝湖预览</h3><p><a href="https://lanhuapp.com/url/lYuz1" target="_blank" rel="noopener">https://lanhuapp.com/url/lYuz1</a><br>密码: gSKl</p><blockquote><p>蓝湖现在收费了，所以查看标记还请自己上传 xd 设计稿<br>商业设计稿文件不好直接分享, 可以加微信联系 ducafecat</p></blockquote><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="Flutter 实战从零开始" scheme="https://blog.ducafecat.tech/categories/Flutter-%E5%AE%9E%E6%88%98%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 实战从零开始 新闻客户端 - 14 headless strapi + graphql 快速构建新闻后台</title>
    <link href="https://blog.ducafecat.tech/2020/07/03/flutter-project/flutter-project-news-14-headless-strapi-graphql/"/>
    <id>https://blog.ducafecat.tech/2020/07/03/flutter-project/flutter-project-news-14-headless-strapi-graphql/</id>
    <published>2020-07-02T16:00:00.000Z</published>
    <updated>2020-07-04T06:19:49.792Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-07-03-17-43-32.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>strapi + graphql 插件 + docker 安装</li><li>strapi 管理数据结构、内容</li><li>flutter + graphql 插件 实现查询</li></ul><h2 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h2><iframe src="//player.bilibili.com/player.html?bvid=BV1Zz411e7dj&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" height="400px"> </iframe><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/ducafecat/flutter_learn_news/releases/tag/v1.0.14" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news/releases/tag/v1.0.14</a></p><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><h3 id="后台开发步骤"><a href="#后台开发步骤" class="headerlink" title="后台开发步骤"></a>后台开发步骤</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-07-04-13-47-38.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="采用-strapi-nodejs-网关-的方案"><a href="#采用-strapi-nodejs-网关-的方案" class="headerlink" title="采用 strapi + nodejs + 网关 的方案"></a>采用 strapi + nodejs + 网关 的方案</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-07-04-13-48-08.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="1-strapi-安装"><a href="#1-strapi-安装" class="headerlink" title="1. strapi 安装"></a>1. strapi 安装</h3><h4 id="1-1-docker-compose-方式安装"><a href="#1-1-docker-compose-方式安装" class="headerlink" title="1.1 docker-compose 方式安装"></a>1.1 docker-compose 方式安装</h4><ul><li>.env</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PASSWORD=123456</span><br></pre></td></tr></table></figure><ul><li>docker-compose.yml</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">"3"</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"><span class="attr">  mongo:</span></span><br><span class="line"><span class="attr">    image:</span> <span class="string">mongo</span></span><br><span class="line"><span class="attr">    container_name:</span> <span class="string">mongo</span></span><br><span class="line"><span class="attr">    restart:</span> <span class="string">always</span></span><br><span class="line"><span class="attr">    ports:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="number">27017</span><span class="string">:27017</span></span><br><span class="line"><span class="attr">    environment:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">TZ=Asia/Shanghai</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">MONGO_INITDB_ROOT_USERNAME=root</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">MONGO_INITDB_ROOT_PASSWORD=$&#123;PASSWORD&#125;</span></span><br><span class="line"><span class="attr">    volumes:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">./docker-data/mongo:/data/db</span></span><br><span class="line"><span class="attr">    networks:</span></span><br><span class="line"><span class="attr">      docker_net:</span></span><br><span class="line"><span class="attr">        ipv4_address:</span> <span class="number">172.22</span><span class="number">.0</span><span class="number">.11</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># starpi</span></span><br><span class="line">  <span class="comment"># admin / 123456 / admin@ducafecat.tech</span></span><br><span class="line"><span class="attr">  strapi-app:</span></span><br><span class="line"><span class="attr">    image:</span> <span class="string">strapi/strapi</span></span><br><span class="line"><span class="attr">    container_name:</span> <span class="string">strapi-app</span></span><br><span class="line"><span class="attr">    restart:</span> <span class="string">always</span></span><br><span class="line"><span class="attr">    ports:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="number">1337</span><span class="string">:1337</span></span><br><span class="line">    <span class="comment"># command: strapi build</span></span><br><span class="line">    <span class="comment"># command: strapi start</span></span><br><span class="line"><span class="attr">    environment:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">TZ=Asia/Shanghai</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">DATABASE_CLIENT=mongo</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">DATABASE_HOST=mongo</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">DATABASE_PORT=27017</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">DATABASE_NAME=strapi</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">DATABASE_USERNAME=root</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">DATABASE_PASSWORD=$&#123;PASSWORD&#125;</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">DATABASE_AUTHENTICATION_DATABASE=strapi</span></span><br><span class="line">      <span class="comment"># - NODE_ENV=production</span></span><br><span class="line"><span class="attr">    depends_on:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">mongo</span></span><br><span class="line"><span class="attr">    volumes:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">./docker-data/strapi-app:/srv/app</span></span><br><span class="line"><span class="attr">    networks:</span></span><br><span class="line"><span class="attr">      docker_net:</span></span><br><span class="line"><span class="attr">        ipv4_address:</span> <span class="number">172.22</span><span class="number">.0</span><span class="number">.12</span></span><br><span class="line"></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line"><span class="attr">  docker_net:</span></span><br><span class="line"><span class="attr">    driver:</span> <span class="string">bridge</span></span><br><span class="line"><span class="attr">    ipam:</span></span><br><span class="line"><span class="attr">      config:</span></span><br><span class="line"><span class="attr">        - subnet:</span> <span class="number">172.22</span><span class="number">.0</span><span class="number">.0</span><span class="string">/16</span></span><br></pre></td></tr></table></figure><p><a href="http://localhost:1337/admin" target="_blank" rel="noopener">http://localhost:1337/admin</a></p><h4 id="1-2-安装-graphql-插件"><a href="#1-2-安装-graphql-插件" class="headerlink" title="1.2 安装 graphql 插件"></a>1.2 安装 graphql 插件</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-07-03-16-45-52.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="2-构建新闻数据结构"><a href="#2-构建新闻数据结构" class="headerlink" title="2. 构建新闻数据结构"></a>2. 构建新闻数据结构</h3><h4 id="2-1-创建数据类型"><a href="#2-1-创建数据类型" class="headerlink" title="2.1 创建数据类型"></a>2.1 创建数据类型</h4><ul><li>添加类型</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-07-03-16-47-15.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>添加字段</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-07-03-16-47-35.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>字段列表</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-07-03-16-46-25.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h4 id="2-2-调整数据编辑界面"><a href="#2-2-调整数据编辑界面" class="headerlink" title="2.2 调整数据编辑界面"></a>2.2 调整数据编辑界面</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-07-03-16-48-29.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h4 id="2-3-调整数据列表界面"><a href="#2-3-调整数据列表界面" class="headerlink" title="2.3 调整数据列表界面"></a>2.3 调整数据列表界面</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-07-03-16-48-55.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h4 id="2-4-维护数据"><a href="#2-4-维护数据" class="headerlink" title="2.4 维护数据"></a>2.4 维护数据</h4><ul><li>列表</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-07-03-16-49-37.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>添加</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-07-03-16-49-59.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="3-调试-graphql-请求"><a href="#3-调试-graphql-请求" class="headerlink" title="3. 调试 graphql 请求"></a>3. 调试 graphql 请求</h3><h4 id="3-3-graphql-语法"><a href="#3-3-graphql-语法" class="headerlink" title="3.3 graphql 语法"></a>3.3 graphql 语法</h4><ul><li>类型<ul><li>query 查询</li><li>mutate 操作</li></ul></li></ul><h4 id="3-4-调试新闻列表"><a href="#3-4-调试新闻列表" class="headerlink" title="3.4 调试新闻列表"></a>3.4 调试新闻列表</h4><p><a href="http://localhost:1337/graphql" target="_blank" rel="noopener">http://localhost:1337/graphql</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-07-03-16-50-31.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="4-编写-flutter-代码"><a href="#4-编写-flutter-代码" class="headerlink" title="4. 编写 flutter 代码"></a>4. 编写 flutter 代码</h3><h4 id="4-1-加入-graphql-插件"><a href="#4-1-加入-graphql-插件" class="headerlink" title="4.1 加入 graphql 插件"></a>4.1 加入 graphql 插件</h4><p><a href="https://pub.flutter-io.cn/packages/graphql" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/graphql</a></p><ul><li>pubspec.yaml</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dependencies:</span></span><br><span class="line">  <span class="comment"># graphql</span></span><br><span class="line"><span class="attr">  graphql:</span> <span class="string">^3.0.2</span></span><br></pre></td></tr></table></figure><h4 id="4-2-封装-graphql-client-工具类"><a href="#4-2-封装-graphql-client-工具类" class="headerlink" title="4.2 封装 graphql client 工具类"></a>4.2 封装 graphql client 工具类</h4><ul><li>lib/common/utils/graphql_client.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/common/values/values.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/common/widgets/widgets.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:graphql/client.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GraphqlClientUtil</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> OptimisticCache cache = OptimisticCache(</span><br><span class="line">    dataIdFromObject: typenameDataIdFromObject,</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> client() &#123;</span><br><span class="line">    HttpLink _httpLink = HttpLink(</span><br><span class="line">      uri: <span class="string">'$SERVER_STRAPI_GRAPHQL_URL/graphql'</span>,</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// final AuthLink _authLink = AuthLink(</span></span><br><span class="line">    <span class="comment">//   getToken: () =&gt;</span></span><br><span class="line">    <span class="comment">//       'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVlZmMzNDdhYzgzOTVjMDAwY2ViYzE5NyIsImlhdCI6MTU5MzY1NDcwNiwiZXhwIjoxNTk2MjQ2NzA2fQ.RYDmNSDJxcZLLPHAf4u59IER7Bs5VoWfBo1_t-TR5yY',</span></span><br><span class="line">    <span class="comment">// );</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// final Link _link = _authLink.concat(_httpLink);</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> GraphQLClient(</span><br><span class="line">      cache: cache,</span><br><span class="line">      link: _httpLink,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 查询</span></span><br><span class="line">  <span class="keyword">static</span> Future query(&#123;</span><br><span class="line">    <span class="meta">@required</span> BuildContext context,</span><br><span class="line">    <span class="meta">@required</span> <span class="built_in">String</span> schema,</span><br><span class="line">    <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; variables,</span><br><span class="line">  &#125;) <span class="keyword">async</span> &#123;</span><br><span class="line">    QueryOptions options = QueryOptions(</span><br><span class="line">      documentNode: gql(schema),</span><br><span class="line">      variables: variables,</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    QueryResult result = <span class="keyword">await</span> client().query(options);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (result.hasException) &#123;</span><br><span class="line">      toastInfo(msg: result.exception.toString());</span><br><span class="line">      <span class="keyword">throw</span> result.exception;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 操作</span></span><br><span class="line">  <span class="keyword">static</span> Future mutate(&#123;</span><br><span class="line">    <span class="meta">@required</span> BuildContext context,</span><br><span class="line">    <span class="meta">@required</span> <span class="built_in">String</span> schema,</span><br><span class="line">    <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; variables,</span><br><span class="line">  &#125;) <span class="keyword">async</span> &#123;</span><br><span class="line">    QueryOptions options = QueryOptions(</span><br><span class="line">      documentNode: gql(schema),</span><br><span class="line">      variables: variables,</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    QueryResult result = <span class="keyword">await</span> client().mutate(options);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (result.hasException) &#123;</span><br><span class="line">      toastInfo(msg: result.exception.toString());</span><br><span class="line">      <span class="keyword">throw</span> result.exception;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-3-编写-graphql-查询请求"><a href="#4-3-编写-graphql-查询请求" class="headerlink" title="4.3 编写 graphql 查询请求"></a>4.3 编写 graphql 查询请求</h4><ul><li>lib/common/graphql/news_content.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="built_in">String</span> GQL_NEWS_LIST = <span class="string">r'''</span></span><br><span class="line"><span class="string">  query News &#123;</span></span><br><span class="line"><span class="string">    newsContents &#123;</span></span><br><span class="line"><span class="string">      title</span></span><br><span class="line"><span class="string">      category</span></span><br><span class="line"><span class="string">      author</span></span><br><span class="line"><span class="string">      url</span></span><br><span class="line"><span class="string">      addtime</span></span><br><span class="line"><span class="string">      thumbnail &#123;</span></span><br><span class="line"><span class="string">        url</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">'''</span>;</span><br></pre></td></tr></table></figure><h4 id="4-4-编写数据实体"><a href="#4-4-编写数据实体" class="headerlink" title="4.4 编写数据实体"></a>4.4 编写数据实体</h4><p>lib/common/entitys/gql_news.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GqlNewsResponseEntity</span> </span>&#123;</span><br><span class="line">  GqlNewsResponseEntity(&#123;</span><br><span class="line">    <span class="keyword">this</span>.id,</span><br><span class="line">    <span class="keyword">this</span>.title,</span><br><span class="line">    <span class="keyword">this</span>.category,</span><br><span class="line">    <span class="keyword">this</span>.author,</span><br><span class="line">    <span class="keyword">this</span>.url,</span><br><span class="line">    <span class="keyword">this</span>.addtime,</span><br><span class="line">    <span class="keyword">this</span>.thumbnail,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">String</span> id;</span><br><span class="line">  <span class="built_in">String</span> title;</span><br><span class="line">  <span class="built_in">String</span> category;</span><br><span class="line">  <span class="built_in">String</span> author;</span><br><span class="line">  <span class="built_in">String</span> url;</span><br><span class="line">  <span class="built_in">DateTime</span> addtime;</span><br><span class="line">  Thumbnail thumbnail;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">factory</span> GqlNewsResponseEntity.fromJson(<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; json) =&gt;</span><br><span class="line">      GqlNewsResponseEntity(</span><br><span class="line">        id: json[<span class="string">"id"</span>],</span><br><span class="line">        title: json[<span class="string">"title"</span>],</span><br><span class="line">        category: json[<span class="string">"category"</span>],</span><br><span class="line">        author: json[<span class="string">"author"</span>],</span><br><span class="line">        url: json[<span class="string">"url"</span>],</span><br><span class="line">        addtime: <span class="built_in">DateTime</span>.parse(json[<span class="string">"addtime"</span>]),</span><br><span class="line">        thumbnail: Thumbnail.fromJson(json[<span class="string">"thumbnail"</span>]),</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">  <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; toJson() =&gt; &#123;</span><br><span class="line">        <span class="string">"id"</span>: id,</span><br><span class="line">        <span class="string">"title"</span>: title,</span><br><span class="line">        <span class="string">"category"</span>: category,</span><br><span class="line">        <span class="string">"author"</span>: author,</span><br><span class="line">        <span class="string">"url"</span>: url,</span><br><span class="line">        <span class="string">"addtime"</span>:</span><br><span class="line">            <span class="string">"<span class="subst">$&#123;addtime.year.toString().padLeft(<span class="number">4</span>, <span class="string">'0'</span>)&#125;</span>-<span class="subst">$&#123;addtime.month.toString().padLeft(<span class="number">2</span>, <span class="string">'0'</span>)&#125;</span>-<span class="subst">$&#123;addtime.day.toString().padLeft(<span class="number">2</span>, <span class="string">'0'</span>)&#125;</span>"</span>,</span><br><span class="line">        <span class="string">"thumbnail"</span>: thumbnail.toJson(),</span><br><span class="line">      &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Thumbnail</span> </span>&#123;</span><br><span class="line">  Thumbnail(&#123;</span><br><span class="line">    <span class="keyword">this</span>.url,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">String</span> url;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">factory</span> Thumbnail.fromJson(<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; json) =&gt; Thumbnail(</span><br><span class="line">        url: json[<span class="string">"url"</span>],</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">  <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; toJson() =&gt; &#123;</span><br><span class="line">        <span class="string">"url"</span>: url,</span><br><span class="line">      &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-5-编写-API-访问"><a href="#4-5-编写-API-访问" class="headerlink" title="4.5 编写 API 访问"></a>4.5 编写 API 访问</h4><ul><li>lib/common/apis/gql_news.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/common/entitys/entitys.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/common/graphql/graphql.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/common/utils/utils.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:graphql/client.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="markdown">/// 新闻</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GqlNewsAPI</span> </span>&#123;</span><br><span class="line">  <span class="comment"><span class="markdown">/// 翻页</span></span></span><br><span class="line">  <span class="keyword">static</span> Future&lt;<span class="built_in">List</span>&lt;GqlNewsResponseEntity&gt;&gt; newsPageList(&#123;</span><br><span class="line">    <span class="meta">@required</span> BuildContext context,</span><br><span class="line">    <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; params,</span><br><span class="line">  &#125;) <span class="keyword">async</span> &#123;</span><br><span class="line">    QueryResult response =</span><br><span class="line">        <span class="keyword">await</span> GraphqlClientUtil.query(context: context, schema: GQL_NEWS_LIST);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> response.data[<span class="string">'newsContents'</span>]</span><br><span class="line">        .map&lt;GqlNewsResponseEntity&gt;(</span><br><span class="line">            (item) =&gt; GqlNewsResponseEntity.fromJson(item))</span><br><span class="line">        .toList();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-6-修改新闻列表页"><a href="#4-6-修改新闻列表页" class="headerlink" title="4.6 修改新闻列表页"></a>4.6 修改新闻列表页</h4><ul><li>lib/pages/main/main.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'dart:async'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/common/apis/apis.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/common/entitys/entitys.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/common/utils/utils.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/common/values/values.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/common/widgets/widgets.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/pages/main/ad_widget.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/pages/main/categories_widget.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/pages/main/channels_widget.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/pages/main/news_item_widget.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/pages/main/newsletter_widget.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/pages/main/recommend_widget.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_easyrefresh/easy_refresh.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MainPage</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  MainPage(&#123;Key key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _MainPageState createState() =&gt; _MainPageState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_MainPageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">MainPage</span>&gt; </span>&#123;</span><br><span class="line">  EasyRefreshController _controller; <span class="comment">// EasyRefresh控制器</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// NewsPageListResponseEntity _newsPageList; // 新闻翻页</span></span><br><span class="line">  <span class="built_in">List</span>&lt;GqlNewsResponseEntity&gt; _newsPageList; <span class="comment">// 新闻翻页</span></span><br><span class="line"></span><br><span class="line">  NewsItem _newsRecommend; <span class="comment">// 新闻推荐</span></span><br><span class="line">  <span class="built_in">List</span>&lt;CategoryResponseEntity&gt; _categories; <span class="comment">// 分类</span></span><br><span class="line">  <span class="built_in">List</span>&lt;ChannelResponseEntity&gt; _channels; <span class="comment">// 频道</span></span><br><span class="line"></span><br><span class="line">  <span class="built_in">String</span> _selCategoryCode; <span class="comment">// 选中的分类Code</span></span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    _controller = EasyRefreshController();</span><br><span class="line">    _loadAllData();</span><br><span class="line">    _loadLatestWithDiskCache();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 如果有磁盘缓存，延迟3秒拉取更新档案</span></span><br><span class="line">  _loadLatestWithDiskCache() &#123;</span><br><span class="line">    <span class="keyword">if</span> (CACHE_ENABLE == <span class="keyword">true</span>) &#123;</span><br><span class="line">      <span class="keyword">var</span> cacheData = StorageUtil().getJSON(STORAGE_INDEX_NEWS_CACHE_KEY);</span><br><span class="line">      <span class="keyword">if</span> (cacheData != <span class="keyword">null</span>) &#123;</span><br><span class="line">        Timer(<span class="built_in">Duration</span>(seconds: <span class="number">3</span>), () &#123;</span><br><span class="line">          _controller.callRefresh();</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 读取所有数据</span></span><br><span class="line">  _loadAllData() <span class="keyword">async</span> &#123;</span><br><span class="line">    _categories = <span class="keyword">await</span> NewsAPI.categories(</span><br><span class="line">      context: context,</span><br><span class="line">      cacheDisk: <span class="keyword">true</span>,</span><br><span class="line">    );</span><br><span class="line">    _channels = <span class="keyword">await</span> NewsAPI.channels(</span><br><span class="line">      context: context,</span><br><span class="line">      cacheDisk: <span class="keyword">true</span>,</span><br><span class="line">    );</span><br><span class="line">    <span class="comment">// _newsRecommend = await NewsAPI.newsRecommend(</span></span><br><span class="line">    <span class="comment">//   context: context,</span></span><br><span class="line">    <span class="comment">//   cacheDisk: true,</span></span><br><span class="line">    <span class="comment">// );</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// _newsPageList = await NewsAPI.newsPageList(</span></span><br><span class="line">    <span class="comment">//   context: context,</span></span><br><span class="line">    <span class="comment">//   cacheDisk: true,</span></span><br><span class="line">    <span class="comment">// );</span></span><br><span class="line">    _newsPageList = <span class="keyword">await</span> GqlNewsAPI.newsPageList(</span><br><span class="line">      context: context,</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    _selCategoryCode = _categories.first.code;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (mounted) &#123;</span><br><span class="line">      setState(() &#123;&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 拉取推荐、新闻</span></span><br><span class="line">  _loadNewsData(</span><br><span class="line">    categoryCode, &#123;</span><br><span class="line">    <span class="built_in">bool</span> refresh = <span class="keyword">false</span>,</span><br><span class="line">  &#125;) <span class="keyword">async</span> &#123;</span><br><span class="line">    _selCategoryCode = categoryCode;</span><br><span class="line">    _newsRecommend = <span class="keyword">await</span> NewsAPI.newsRecommend(</span><br><span class="line">      context: context,</span><br><span class="line">      params: NewsRecommendRequestEntity(categoryCode: categoryCode),</span><br><span class="line">      refresh: refresh,</span><br><span class="line">      cacheDisk: <span class="keyword">true</span>,</span><br><span class="line">    );</span><br><span class="line">    <span class="comment">// _newsPageList = await NewsAPI.newsPageList(</span></span><br><span class="line">    <span class="comment">//   context: context,</span></span><br><span class="line">    <span class="comment">//   params: NewsPageListRequestEntity(categoryCode: categoryCode),</span></span><br><span class="line">    <span class="comment">//   refresh: refresh,</span></span><br><span class="line">    <span class="comment">//   cacheDisk: true,</span></span><br><span class="line">    <span class="comment">// );</span></span><br><span class="line">    _newsPageList = <span class="keyword">await</span> GqlNewsAPI.newsPageList(</span><br><span class="line">      context: context,</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (mounted) &#123;</span><br><span class="line">      setState(() &#123;&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 分类菜单</span></span><br><span class="line">  Widget _buildCategories() &#123;</span><br><span class="line">    <span class="keyword">return</span> _categories == <span class="keyword">null</span></span><br><span class="line">        ? Container()</span><br><span class="line">        : newsCategoriesWidget(</span><br><span class="line">            categories: _categories,</span><br><span class="line">            selCategoryCode: _selCategoryCode,</span><br><span class="line">            onTap: (CategoryResponseEntity item) &#123;</span><br><span class="line">              _loadNewsData(item.code);</span><br><span class="line">            &#125;,</span><br><span class="line">          );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 推荐阅读</span></span><br><span class="line">  Widget _buildRecommend() &#123;</span><br><span class="line">    <span class="keyword">return</span> _newsRecommend == <span class="keyword">null</span> <span class="comment">// 数据没到位，可以用骨架图展示</span></span><br><span class="line">        ? Container()</span><br><span class="line">        : recommendWidget(_newsRecommend);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 频道</span></span><br><span class="line">  Widget _buildChannels() &#123;</span><br><span class="line">    <span class="keyword">return</span> _channels == <span class="keyword">null</span></span><br><span class="line">        ? Container()</span><br><span class="line">        : newsChannelsWidget(</span><br><span class="line">            channels: _channels,</span><br><span class="line">            onTap: (ChannelResponseEntity item) &#123;&#125;,</span><br><span class="line">          );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 新闻列表</span></span><br><span class="line">  Widget _buildNewsList() &#123;</span><br><span class="line">    <span class="keyword">return</span> _newsPageList == <span class="keyword">null</span></span><br><span class="line">        ? Container(</span><br><span class="line">            height: duSetHeight(<span class="number">161</span> * <span class="number">5</span> + <span class="number">100.0</span>),</span><br><span class="line">          )</span><br><span class="line">        : Column(</span><br><span class="line">            children: _newsPageList.map((item) &#123;</span><br><span class="line">              <span class="comment">// 新闻行</span></span><br><span class="line">              <span class="built_in">List</span>&lt;Widget&gt; widgets = &lt;Widget&gt;[</span><br><span class="line">                newsItem(item),</span><br><span class="line">                Divider(height: <span class="number">1</span>),</span><br><span class="line">              ];</span><br><span class="line"></span><br><span class="line">              <span class="comment">// 每 5 条 显示广告</span></span><br><span class="line">              <span class="built_in">int</span> index = _newsPageList.indexOf(item);</span><br><span class="line">              <span class="keyword">if</span> (((index + <span class="number">1</span>) % <span class="number">5</span>) == <span class="number">0</span>) &#123;</span><br><span class="line">                widgets.addAll(&lt;Widget&gt;[</span><br><span class="line">                  adWidget(),</span><br><span class="line">                  Divider(height: <span class="number">1</span>),</span><br><span class="line">                ]);</span><br><span class="line">              &#125;</span><br><span class="line"></span><br><span class="line">              <span class="comment">// 返回</span></span><br><span class="line">              <span class="keyword">return</span> Column(</span><br><span class="line">                children: widgets,</span><br><span class="line">              );</span><br><span class="line">            &#125;).toList(),</span><br><span class="line">          );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ad 广告条</span></span><br><span class="line">  <span class="comment">// 邮件订阅</span></span><br><span class="line">  Widget _buildEmailSubscribe() &#123;</span><br><span class="line">    <span class="keyword">return</span> newsletterWidget();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> _newsPageList == <span class="keyword">null</span></span><br><span class="line">        ? cardListSkeleton()</span><br><span class="line">        : EasyRefresh(</span><br><span class="line">            enableControlFinishRefresh: <span class="keyword">true</span>,</span><br><span class="line">            controller: _controller,</span><br><span class="line">            header: ClassicalHeader(),</span><br><span class="line">            onRefresh: () <span class="keyword">async</span> &#123;</span><br><span class="line">              <span class="keyword">await</span> _loadNewsData(</span><br><span class="line">                _selCategoryCode,</span><br><span class="line">                refresh: <span class="keyword">true</span>,</span><br><span class="line">              );</span><br><span class="line">              _controller.finishRefresh();</span><br><span class="line">            &#125;,</span><br><span class="line">            child: SingleChildScrollView(</span><br><span class="line">              child: Column(</span><br><span class="line">                children: &lt;Widget&gt;[</span><br><span class="line">                  _buildCategories(),</span><br><span class="line">                  Divider(height: <span class="number">1</span>),</span><br><span class="line">                  _buildRecommend(),</span><br><span class="line">                  Divider(height: <span class="number">1</span>),</span><br><span class="line">                  _buildChannels(),</span><br><span class="line">                  Divider(height: <span class="number">1</span>),</span><br><span class="line">                  _buildNewsList(),</span><br><span class="line">                  Divider(height: <span class="number">1</span>),</span><br><span class="line">                  _buildEmailSubscribe(),</span><br><span class="line">                ],</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">          );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-7-修改新闻详情页"><a href="#4-7-修改新闻详情页" class="headerlink" title="4.7 修改新闻详情页"></a>4.7 修改新闻详情页</h4><ul><li>lib/pages/main/news_item_widget.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:auto_route/auto_route.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/common/entitys/entitys.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/common/utils/utils.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/common/values/values.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/common/widgets/widgets.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/common/router/router.gr.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="markdown">/// 新闻行 Item</span></span></span><br><span class="line">Widget newsItem(GqlNewsResponseEntity item) &#123;</span><br><span class="line">  <span class="keyword">return</span> Container(</span><br><span class="line">    height: duSetHeight(<span class="number">161</span>),</span><br><span class="line">    padding: EdgeInsets.all(duSetWidth(<span class="number">20</span>)),</span><br><span class="line">    child: Row(</span><br><span class="line">      mainAxisAlignment: MainAxisAlignment.spaceBetween,</span><br><span class="line">      crossAxisAlignment: CrossAxisAlignment.start,</span><br><span class="line">      children: &lt;Widget&gt;[</span><br><span class="line">        <span class="comment">// 图</span></span><br><span class="line">        InkWell(</span><br><span class="line">          onTap: () &#123;</span><br><span class="line">            ExtendedNavigator.rootNavigator.pushNamed(</span><br><span class="line">              Routes.detailsPageRoute,</span><br><span class="line">              arguments: DetailsPageArguments(item: item),</span><br><span class="line">            );</span><br><span class="line">          &#125;,</span><br><span class="line">          child: imageCached(</span><br><span class="line">            <span class="string">'$SERVER_STRAPI_GRAPHQL_URL<span class="subst">$&#123;item.thumbnail.url&#125;</span>'</span>,</span><br><span class="line">            width: duSetWidth(<span class="number">121</span>),</span><br><span class="line">            height: duSetWidth(<span class="number">121</span>),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">        <span class="comment">// 右侧</span></span><br><span class="line">        SizedBox(</span><br><span class="line">          width: duSetWidth(<span class="number">194</span>),</span><br><span class="line">          child: Column(</span><br><span class="line">            crossAxisAlignment: CrossAxisAlignment.start,</span><br><span class="line">            children: &lt;Widget&gt;[</span><br><span class="line">              <span class="comment">// 作者</span></span><br><span class="line">              Container(</span><br><span class="line">                margin: EdgeInsets.all(<span class="number">0</span>),</span><br><span class="line">                child: Text(</span><br><span class="line">                  item.author,</span><br><span class="line">                  style: TextStyle(</span><br><span class="line">                    fontFamily: <span class="string">'Avenir'</span>,</span><br><span class="line">                    fontWeight: FontWeight.normal,</span><br><span class="line">                    color: AppColors.thirdElementText,</span><br><span class="line">                    fontSize: duSetFontSize(<span class="number">14</span>),</span><br><span class="line">                    height: <span class="number">1</span>,</span><br><span class="line">                  ),</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">              <span class="comment">// 标题</span></span><br><span class="line">              InkWell(</span><br><span class="line">                onTap: () &#123;</span><br><span class="line">                  ExtendedNavigator.rootNavigator.pushNamed(</span><br><span class="line">                    Routes.detailsPageRoute,</span><br><span class="line">                    arguments: DetailsPageArguments(item: item),</span><br><span class="line">                  );</span><br><span class="line">                &#125;,</span><br><span class="line">                child: Container(</span><br><span class="line">                  margin: EdgeInsets.only(top: duSetHeight(<span class="number">10</span>)),</span><br><span class="line">                  child: Text(</span><br><span class="line">                    item.title,</span><br><span class="line">                    style: TextStyle(</span><br><span class="line">                      fontFamily: <span class="string">'Montserrat'</span>,</span><br><span class="line">                      fontWeight: FontWeight.w500,</span><br><span class="line">                      color: AppColors.primaryText,</span><br><span class="line">                      fontSize: duSetFontSize(<span class="number">16</span>),</span><br><span class="line">                      height: <span class="number">1</span>,</span><br><span class="line">                    ),</span><br><span class="line">                    overflow: TextOverflow.clip,</span><br><span class="line">                    maxLines: <span class="number">3</span>,</span><br><span class="line">                  ),</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">              <span class="comment">// Spacer</span></span><br><span class="line">              Spacer(),</span><br><span class="line">              <span class="comment">// 一行 3 列</span></span><br><span class="line">              Container(</span><br><span class="line">                child: Row(</span><br><span class="line">                  crossAxisAlignment: CrossAxisAlignment.center,</span><br><span class="line">                  children: &lt;Widget&gt;[</span><br><span class="line">                    <span class="comment">// 分类</span></span><br><span class="line">                    ConstrainedBox(</span><br><span class="line">                      constraints: BoxConstraints(</span><br><span class="line">                        maxWidth: duSetWidth(<span class="number">60</span>),</span><br><span class="line">                      ),</span><br><span class="line">                      child: Text(</span><br><span class="line">                        item.category,</span><br><span class="line">                        style: TextStyle(</span><br><span class="line">                          fontFamily: <span class="string">'Avenir'</span>,</span><br><span class="line">                          fontWeight: FontWeight.normal,</span><br><span class="line">                          color: AppColors.secondaryElementText,</span><br><span class="line">                          fontSize: duSetFontSize(<span class="number">14</span>),</span><br><span class="line">                          height: <span class="number">1</span>,</span><br><span class="line">                        ),</span><br><span class="line">                        overflow: TextOverflow.clip,</span><br><span class="line">                        maxLines: <span class="number">1</span>,</span><br><span class="line">                      ),</span><br><span class="line">                    ),</span><br><span class="line">                    <span class="comment">// 添加时间</span></span><br><span class="line">                    Container(</span><br><span class="line">                      width: duSetWidth(<span class="number">15</span>),</span><br><span class="line">                    ),</span><br><span class="line">                    ConstrainedBox(</span><br><span class="line">                      constraints: BoxConstraints(</span><br><span class="line">                        maxWidth: duSetWidth(<span class="number">100</span>),</span><br><span class="line">                      ),</span><br><span class="line">                      child: Text(</span><br><span class="line">                        <span class="string">'• <span class="subst">$&#123;duTimeLineFormat(item.addtime)&#125;</span>'</span>,</span><br><span class="line">                        style: TextStyle(</span><br><span class="line">                          fontFamily: <span class="string">'Avenir'</span>,</span><br><span class="line">                          fontWeight: FontWeight.normal,</span><br><span class="line">                          color: AppColors.thirdElementText,</span><br><span class="line">                          fontSize: duSetFontSize(<span class="number">14</span>),</span><br><span class="line">                          height: <span class="number">1</span>,</span><br><span class="line">                        ),</span><br><span class="line">                        overflow: TextOverflow.clip,</span><br><span class="line">                        maxLines: <span class="number">1</span>,</span><br><span class="line">                      ),</span><br><span class="line">                    ),</span><br><span class="line">                    <span class="comment">// 更多</span></span><br><span class="line">                    Spacer(),</span><br><span class="line">                    InkWell(</span><br><span class="line">                      child: Icon(</span><br><span class="line">                        Icons.more_horiz,</span><br><span class="line">                        color: AppColors.primaryText,</span><br><span class="line">                        size: <span class="number">24</span>,</span><br><span class="line">                      ),</span><br><span class="line">                      onTap: () &#123;&#125;,</span><br><span class="line">                    ),</span><br><span class="line">                  ],</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">            ],</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ],</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="资源"><a href="#资源" class="headerlink" title="资源"></a>资源</h2><h3 id="设计稿蓝湖预览"><a href="#设计稿蓝湖预览" class="headerlink" title="设计稿蓝湖预览"></a>设计稿蓝湖预览</h3><p><a href="https://lanhuapp.com/url/lYuz1" target="_blank" rel="noopener">https://lanhuapp.com/url/lYuz1</a><br>密码: gSKl</p><blockquote><p>蓝湖现在收费了，所以查看标记还请自己上传 xd 设计稿<br>商业设计稿文件不好直接分享, 可以加微信联系 ducafecat</p></blockquote><h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul><li><a href="https://pub.flutter-io.cn/packages/graphql" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/graphql</a></li><li><a href="https://strapi.io/documentation/v3.x/getting-started/quick-start.html" target="_blank" rel="noopener">https://strapi.io/documentation/v3.x/getting-started/quick-start.html</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="Flutter 实战从零开始" scheme="https://blog.ducafecat.tech/categories/Flutter-%E5%AE%9E%E6%88%98%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 实战从零开始 新闻客户端 - 13 使用 supernova、imgcook 导入 sketch psd xd 自动生成用户中心代码</title>
    <link href="https://blog.ducafecat.tech/2020/06/18/flutter-project/flutter-project-news-13-code-generate-supernova/"/>
    <id>https://blog.ducafecat.tech/2020/06/18/flutter-project/flutter-project-news-13-code-generate-supernova/</id>
    <published>2020-06-17T16:00:00.000Z</published>
    <updated>2020-07-04T05:56:42.135Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-06-18-14-22-12.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>了解 supernova 代码生成器作用</li><li>导入 xd 设计稿</li><li>如何高效使用生成代码</li></ul><h2 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h2><iframe src="//player.bilibili.com/player.html?bvid=BV1t5411W7Tt&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" height="400px"> </iframe><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/ducafecat/flutter_learn_news/releases/tag/v1.0.13" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news/releases/tag/v1.0.13</a></p><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><h3 id="代码生成器"><a href="#代码生成器" class="headerlink" title="代码生成器"></a>代码生成器</h3><ul><li><a href="https://supernova.io" target="_blank" rel="noopener">supernova</a></li><li><a href="https://imgcook.taobao.org" target="_blank" rel="noopener">imgcook</a></li></ul><h3 id="有潜力加入代码生成功能"><a href="#有潜力加入代码生成功能" class="headerlink" title="有潜力加入代码生成功能"></a>有潜力加入代码生成功能</h3><ul><li><a href="https://lanhuapp.com/" target="_blank" rel="noopener">lanhuapp</a></li><li><a href="https://app.mockplus.cn/" target="_blank" rel="noopener">mockplus</a></li></ul><h3 id="supernova-代码生成器"><a href="#supernova-代码生成器" class="headerlink" title="supernova 代码生成器"></a>supernova 代码生成器</h3><p><a href="https://supernova.io/" target="_blank" rel="noopener">https://supernova.io/</a></p><h3 id="导入-xd-设计稿，生成代码"><a href="#导入-xd-设计稿，生成代码" class="headerlink" title="导入 xd 设计稿，生成代码"></a>导入 xd 设计稿，生成代码</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-06-18-11-13-44.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><blockquote><p>商业设计稿不好直接分享, 可以加微信联系 ducafecat</p></blockquote><h3 id="编写用户中心界面代码"><a href="#编写用户中心界面代码" class="headerlink" title="编写用户中心界面代码"></a>编写用户中心界面代码</h3><h4 id="组织代码结构"><a href="#组织代码结构" class="headerlink" title="组织代码结构"></a>组织代码结构</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_AccountPageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">AccountPage</span>&gt; </span>&#123;</span><br><span class="line">  <span class="comment">// 个人页面 头部</span></span><br><span class="line">  Widget _buildUserHeader() &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 列表项</span></span><br><span class="line">  Widget _buildCell() &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">final</span> appState = Provider.of&lt;AppState&gt;(context);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> SingleChildScrollView(</span><br><span class="line">      child: Column(</span><br><span class="line">        children: &lt;Widget&gt;[</span><br><span class="line">          _buildUserHeader(),</span><br><span class="line">          _buildCell(),</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="直接使用生成的代码"><a href="#直接使用生成的代码" class="headerlink" title="直接使用生成的代码"></a>直接使用生成的代码</h4><ul><li>个人页面 头部</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line">Widget _buildUserHeader() &#123;</span><br><span class="line">  <span class="keyword">return</span> Container(</span><br><span class="line">            height: <span class="number">333</span>,</span><br><span class="line">            child: Stack(</span><br><span class="line">              alignment: Alignment.center,</span><br><span class="line">              children: [</span><br><span class="line">                Positioned(</span><br><span class="line">                  left: <span class="number">0</span>,</span><br><span class="line">                  right: <span class="number">0</span>,</span><br><span class="line">                  child: Container(</span><br><span class="line">                    height: <span class="number">333</span>,</span><br><span class="line">                    decoration: BoxDecoration(</span><br><span class="line">                      color: AppColors.primaryBackground,</span><br><span class="line">                    ),</span><br><span class="line">                    child: Column(</span><br><span class="line">                      mainAxisAlignment: MainAxisAlignment.end,</span><br><span class="line">                      crossAxisAlignment: CrossAxisAlignment.stretch,</span><br><span class="line">                      children: [</span><br><span class="line">                        Container(</span><br><span class="line">                          height: <span class="number">2</span>,</span><br><span class="line">                          decoration: BoxDecoration(</span><br><span class="line">                            color: AppColors.primaryElement,</span><br><span class="line">                          ),</span><br><span class="line">                          child: Container(),</span><br><span class="line">                        ),</span><br><span class="line">                      ],</span><br><span class="line">                    ),</span><br><span class="line">                  ),</span><br><span class="line">                ),</span><br><span class="line">                Positioned(</span><br><span class="line">                  left: <span class="number">20</span>,</span><br><span class="line">                  top: <span class="number">40</span>,</span><br><span class="line">                  right: <span class="number">20</span>,</span><br><span class="line">                  bottom: <span class="number">21</span>,</span><br><span class="line">                  child: Column(</span><br><span class="line">                    crossAxisAlignment: CrossAxisAlignment.stretch,</span><br><span class="line">                    children: [</span><br><span class="line">                      Container(</span><br><span class="line">                        height: <span class="number">198</span>,</span><br><span class="line">                        child: Column(</span><br><span class="line">                          crossAxisAlignment: CrossAxisAlignment.stretch,</span><br><span class="line">                          children: [</span><br><span class="line">                            Align(</span><br><span class="line">                              alignment: Alignment.topCenter,</span><br><span class="line">                              child: Container(</span><br><span class="line">                                width: <span class="number">108</span>,</span><br><span class="line">                                height: <span class="number">108</span>,</span><br><span class="line">                                child: Stack(</span><br><span class="line">                                  alignment: Alignment.center,</span><br><span class="line">                                  children: [</span><br><span class="line">                                    Positioned(</span><br><span class="line">                                      top: <span class="number">0</span>,</span><br><span class="line">                                      child: Container(</span><br><span class="line">                                        width: <span class="number">108</span>,</span><br><span class="line">                                        height: <span class="number">108</span>,</span><br><span class="line">                                        decoration: BoxDecoration(</span><br><span class="line">                                          color: AppColors.primaryBackground,</span><br><span class="line">                                          boxShadow: [</span><br><span class="line">                                            Shadows.primaryShadow,</span><br><span class="line">                                          ],</span><br><span class="line">                                          borderRadius: Radii.k54pxRadius,</span><br><span class="line">                                        ),</span><br><span class="line">                                        child: Container(),</span><br><span class="line">                                      ),</span><br><span class="line">                                    ),</span><br><span class="line">                                    Positioned(</span><br><span class="line">                                      top: <span class="number">10</span>,</span><br><span class="line">                                      child: Image.asset(</span><br><span class="line">                                        <span class="string">"assets/images/image.png"</span>,</span><br><span class="line">                                        fit: BoxFit.none,</span><br><span class="line">                                      ),</span><br><span class="line">                                    ),</span><br><span class="line">                                  ],</span><br><span class="line">                                ),</span><br><span class="line">                              ),</span><br><span class="line">                            ),</span><br><span class="line">                            Spacer(),</span><br><span class="line">                            Container(</span><br><span class="line">                              margin: EdgeInsets.only(bottom: <span class="number">9</span>),</span><br><span class="line">                              child: Text(</span><br><span class="line">                                <span class="string">"Cameron Rogers"</span>,</span><br><span class="line">                                textAlign: TextAlign.center,</span><br><span class="line">                                style: TextStyle(</span><br><span class="line">                                  color: AppColors.primaryText,</span><br><span class="line">                                  fontFamily: <span class="string">"Montserrat"</span>,</span><br><span class="line">                                  fontWeight: FontWeight.w400,</span><br><span class="line">                                  fontSize: <span class="number">24</span>,</span><br><span class="line">                                ),</span><br><span class="line">                              ),</span><br><span class="line">                            ),</span><br><span class="line">                            Text(</span><br><span class="line">                              <span class="string">"@boltrogers"</span>,</span><br><span class="line">                              textAlign: TextAlign.center,</span><br><span class="line">                              style: TextStyle(</span><br><span class="line">                                color: AppColors.primaryText,</span><br><span class="line">                                fontFamily: <span class="string">"Avenir"</span>,</span><br><span class="line">                                fontWeight: FontWeight.w400,</span><br><span class="line">                                fontSize: <span class="number">16</span>,</span><br><span class="line">                              ),</span><br><span class="line">                            ),</span><br><span class="line">                          ],</span><br><span class="line">                        ),</span><br><span class="line">                      ),</span><br><span class="line">                      Spacer(),</span><br><span class="line">                      Container(</span><br><span class="line">                        height: <span class="number">44</span>,</span><br><span class="line">                        child: FlatButton(</span><br><span class="line">                          onPressed: () =&gt; <span class="keyword">this</span>.onButtonPressed(context),</span><br><span class="line">                          color: Color.fromARGB(<span class="number">255</span>, <span class="number">41</span>, <span class="number">103</span>, <span class="number">255</span>),</span><br><span class="line">                          shape: RoundedRectangleBorder(</span><br><span class="line">                            borderRadius: BorderRadius.all(Radius.circular(<span class="number">6</span>)),</span><br><span class="line">                          ),</span><br><span class="line">                          textColor: Color.fromARGB(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>),</span><br><span class="line">                          padding: EdgeInsets.all(<span class="number">0</span>),</span><br><span class="line">                          child: Text(</span><br><span class="line">                            <span class="string">"Get Premium - \$9.99"</span>,</span><br><span class="line">                            textAlign: TextAlign.center,</span><br><span class="line">                            style: TextStyle(</span><br><span class="line">                              color: AppColors.secondaryText,</span><br><span class="line">                              fontFamily: <span class="string">"Montserrat"</span>,</span><br><span class="line">                              fontWeight: FontWeight.w400,</span><br><span class="line">                              fontSize: <span class="number">18</span>,</span><br><span class="line">                            ),</span><br><span class="line">                          ),</span><br><span class="line">                        ),</span><br><span class="line">                      ),</span><br><span class="line">                    ],</span><br><span class="line">                  ),</span><br><span class="line">                ),</span><br><span class="line">              ],</span><br><span class="line">            ),</span><br><span class="line">          );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>列表项</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line">Widget _buildCell() &#123;</span><br><span class="line">  <span class="keyword">return</span> Container(</span><br><span class="line">            height: <span class="number">60</span>,</span><br><span class="line">            child: Stack(</span><br><span class="line">              alignment: Alignment.centerLeft,</span><br><span class="line">              children: [</span><br><span class="line">                Positioned(</span><br><span class="line">                  left: <span class="number">0</span>,</span><br><span class="line">                  right: <span class="number">0</span>,</span><br><span class="line">                  child: Container(</span><br><span class="line">                    height: <span class="number">60</span>,</span><br><span class="line">                    decoration: BoxDecoration(</span><br><span class="line">                      color: AppColors.secondaryElement,</span><br><span class="line">                    ),</span><br><span class="line">                    child: Column(</span><br><span class="line">                      mainAxisAlignment: MainAxisAlignment.end,</span><br><span class="line">                      crossAxisAlignment: CrossAxisAlignment.stretch,</span><br><span class="line">                      children: [</span><br><span class="line">                        Container(</span><br><span class="line">                          height: <span class="number">1</span>,</span><br><span class="line">                          decoration: BoxDecoration(</span><br><span class="line">                            color: AppColors.primaryElement,</span><br><span class="line">                          ),</span><br><span class="line">                          child: Container(),</span><br><span class="line">                        ),</span><br><span class="line">                      ],</span><br><span class="line">                    ),</span><br><span class="line">                  ),</span><br><span class="line">                ),</span><br><span class="line">                Positioned(</span><br><span class="line">                  right: <span class="number">0</span>,</span><br><span class="line">                  child: Row(</span><br><span class="line">                    mainAxisAlignment: MainAxisAlignment.end,</span><br><span class="line">                    children: [</span><br><span class="line">                      Container(</span><br><span class="line">                        margin: EdgeInsets.only(right: <span class="number">11</span>),</span><br><span class="line">                        child: Text(</span><br><span class="line">                          <span class="string">"12"</span>,</span><br><span class="line">                          textAlign: TextAlign.right,</span><br><span class="line">                          style: TextStyle(</span><br><span class="line">                            color: AppColors.primaryText,</span><br><span class="line">                            fontFamily: <span class="string">"Avenir"</span>,</span><br><span class="line">                            fontWeight: FontWeight.w400,</span><br><span class="line">                            fontSize: <span class="number">18</span>,</span><br><span class="line">                          ),</span><br><span class="line">                        ),</span><br><span class="line">                      ),</span><br><span class="line">                      Container(</span><br><span class="line">                        width: <span class="number">24</span>,</span><br><span class="line">                        height: <span class="number">24</span>,</span><br><span class="line">                        margin: EdgeInsets.only(right: <span class="number">20</span>),</span><br><span class="line">                        child: Image.asset(</span><br><span class="line">                          <span class="string">"assets/images/icon.png"</span>,</span><br><span class="line">                          fit: BoxFit.none,</span><br><span class="line">                        ),</span><br><span class="line">                      ),</span><br><span class="line">                    ],</span><br><span class="line">                  ),</span><br><span class="line">                ),</span><br><span class="line">                Positioned(</span><br><span class="line">                  left: <span class="number">0</span>,</span><br><span class="line">                  child: Stack(</span><br><span class="line">                    alignment: Alignment.center,</span><br><span class="line">                    children: [</span><br><span class="line">                      Positioned(</span><br><span class="line">                        left: <span class="number">0</span>,</span><br><span class="line">                        right: <span class="number">19</span>,</span><br><span class="line">                        child: Container(),</span><br><span class="line">                      ),</span><br><span class="line">                      Positioned(</span><br><span class="line">                        left: <span class="number">20</span>,</span><br><span class="line">                        right: <span class="number">0</span>,</span><br><span class="line">                        child: Text(</span><br><span class="line">                          <span class="string">"Favorite channels"</span>,</span><br><span class="line">                          textAlign: TextAlign.left,</span><br><span class="line">                          style: TextStyle(</span><br><span class="line">                            color: AppColors.primaryText,</span><br><span class="line">                            fontFamily: <span class="string">"Montserrat"</span>,</span><br><span class="line">                            fontWeight: FontWeight.w400,</span><br><span class="line">                            fontSize: <span class="number">18</span>,</span><br><span class="line">                          ),</span><br><span class="line">                        ),</span><br><span class="line">                      ),</span><br><span class="line">                    ],</span><br><span class="line">                  ),</span><br><span class="line">                ),</span><br><span class="line">              ],</span><br><span class="line">            ),</span><br><span class="line">          );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="抽取代码-lib-common-widgets-app-dart"><a href="#抽取代码-lib-common-widgets-app-dart" class="headerlink" title="抽取代码 lib/common/widgets/app.dart"></a>抽取代码 lib/common/widgets/app.dart</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="markdown">/// 10像素 Divider</span></span></span><br><span class="line">Widget divider10Px(&#123;Color bgColor = AppColors.secondaryElement&#125;) &#123;</span><br><span class="line">  <span class="keyword">return</span> Container(</span><br><span class="line">    height: duSetWidth(<span class="number">10</span>),</span><br><span class="line">    decoration: BoxDecoration(</span><br><span class="line">      color: bgColor,</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="修改代码-buildUserHeader"><a href="#修改代码-buildUserHeader" class="headerlink" title="修改代码 _buildUserHeader"></a>修改代码 _buildUserHeader</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 个人页面 头部</span></span><br><span class="line">Widget _buildUserHeader() &#123;</span><br><span class="line">  <span class="keyword">return</span> Container(</span><br><span class="line">    height: duSetWidth(<span class="number">333</span>),</span><br><span class="line">    child: Stack(</span><br><span class="line">      alignment: Alignment.center,</span><br><span class="line">      children: [</span><br><span class="line">        <span class="comment">// 背景</span></span><br><span class="line">        Positioned(</span><br><span class="line">          left: <span class="number">0</span>,</span><br><span class="line">          right: <span class="number">0</span>,</span><br><span class="line">          child: Container(</span><br><span class="line">            height: duSetWidth(<span class="number">333</span>),</span><br><span class="line">            decoration: BoxDecoration(</span><br><span class="line">              color: AppColors.primaryBackground,</span><br><span class="line">            ),</span><br><span class="line">            child: Column(</span><br><span class="line">              mainAxisAlignment: MainAxisAlignment.end,</span><br><span class="line">              crossAxisAlignment: CrossAxisAlignment.stretch,</span><br><span class="line">              children: [</span><br><span class="line">                Container(</span><br><span class="line">                  height: duSetWidth(<span class="number">2</span>),</span><br><span class="line">                  decoration: BoxDecoration(</span><br><span class="line">                    color: AppColors.tabCellSeparator,</span><br><span class="line">                  ),</span><br><span class="line">                  child: Container(),</span><br><span class="line">                ),</span><br><span class="line">              ],</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">        Positioned(</span><br><span class="line">          left: <span class="number">20</span>,</span><br><span class="line">          top: <span class="number">40</span>,</span><br><span class="line">          right: <span class="number">20</span>,</span><br><span class="line">          bottom: <span class="number">21</span>,</span><br><span class="line">          child: Column(</span><br><span class="line">            crossAxisAlignment: CrossAxisAlignment.stretch,</span><br><span class="line">            children: [</span><br><span class="line">              <span class="comment">// 头像</span></span><br><span class="line">              Container(</span><br><span class="line">                height: duSetWidth(<span class="number">198</span>),</span><br><span class="line">                child: Column(</span><br><span class="line">                  crossAxisAlignment: CrossAxisAlignment.stretch,</span><br><span class="line">                  children: [</span><br><span class="line">                    Align(</span><br><span class="line">                      alignment: Alignment.topCenter,</span><br><span class="line">                      child: Container(</span><br><span class="line">                        width: duSetWidth(<span class="number">108</span>),</span><br><span class="line">                        height: duSetWidth(<span class="number">108</span>),</span><br><span class="line">                        child: Stack(</span><br><span class="line">                          alignment: Alignment.center,</span><br><span class="line">                          children: [</span><br><span class="line">                            Positioned(</span><br><span class="line">                              top: <span class="number">0</span>,</span><br><span class="line">                              child: Container(</span><br><span class="line">                                width: duSetWidth(<span class="number">108</span>),</span><br><span class="line">                                height: duSetWidth(<span class="number">108</span>),</span><br><span class="line">                                decoration: BoxDecoration(</span><br><span class="line">                                  color: AppColors.primaryBackground,</span><br><span class="line">                                  boxShadow: [</span><br><span class="line">                                    Shadows.primaryShadow,</span><br><span class="line">                                  ],</span><br><span class="line">                                  borderRadius: BorderRadius.all(</span><br><span class="line">                                      Radius.circular(duSetWidth(<span class="number">108</span>) / <span class="number">2</span>)),</span><br><span class="line">                                ),</span><br><span class="line">                                child: Container(),</span><br><span class="line">                              ),</span><br><span class="line">                            ),</span><br><span class="line">                            Positioned(</span><br><span class="line">                              top: <span class="number">10</span>,</span><br><span class="line">                              child: Image.asset(</span><br><span class="line">                                <span class="string">"assets/images/account_header.png"</span>,</span><br><span class="line">                                height: duSetWidth(<span class="number">88</span>),</span><br><span class="line">                                width: duSetWidth(<span class="number">88</span>),</span><br><span class="line">                                fit: BoxFit.fill,</span><br><span class="line">                              ),</span><br><span class="line">                            ),</span><br><span class="line">                          ],</span><br><span class="line">                        ),</span><br><span class="line">                      ),</span><br><span class="line">                    ),</span><br><span class="line">                    <span class="comment">// 文字</span></span><br><span class="line">                    Spacer(),</span><br><span class="line">                    Container(</span><br><span class="line">                      margin: EdgeInsets.only(bottom: <span class="number">9</span>),</span><br><span class="line">                      child: Text(</span><br><span class="line">                        Global.profile.displayName,</span><br><span class="line">                        textAlign: TextAlign.center,</span><br><span class="line">                        style: TextStyle(</span><br><span class="line">                          color: AppColors.primaryText,</span><br><span class="line">                          fontFamily: <span class="string">"Montserrat"</span>,</span><br><span class="line">                          fontWeight: FontWeight.w400,</span><br><span class="line">                          fontSize: <span class="number">24</span>,</span><br><span class="line">                        ),</span><br><span class="line">                      ),</span><br><span class="line">                    ),</span><br><span class="line">                    Text(</span><br><span class="line">                      <span class="string">"@boltrogers"</span>,</span><br><span class="line">                      textAlign: TextAlign.center,</span><br><span class="line">                      style: TextStyle(</span><br><span class="line">                        color: AppColors.primaryText,</span><br><span class="line">                        fontFamily: <span class="string">"Avenir"</span>,</span><br><span class="line">                        fontWeight: FontWeight.w400,</span><br><span class="line">                        fontSize: <span class="number">16</span>,</span><br><span class="line">                      ),</span><br><span class="line">                    ),</span><br><span class="line">                  ],</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">              <span class="comment">// 按钮</span></span><br><span class="line">              Spacer(),</span><br><span class="line">              Container(</span><br><span class="line">                height: <span class="number">44</span>,</span><br><span class="line">                child: FlatButton(</span><br><span class="line">                  onPressed: () =&gt; &#123;&#125;,</span><br><span class="line">                  color: Color.fromARGB(<span class="number">255</span>, <span class="number">41</span>, <span class="number">103</span>, <span class="number">255</span>),</span><br><span class="line">                  shape: RoundedRectangleBorder(</span><br><span class="line">                    borderRadius: BorderRadius.all(Radius.circular(<span class="number">6</span>)),</span><br><span class="line">                  ),</span><br><span class="line">                  textColor: Color.fromARGB(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>),</span><br><span class="line">                  padding: EdgeInsets.all(<span class="number">0</span>),</span><br><span class="line">                  child: Text(</span><br><span class="line">                    <span class="string">"Get Premium - \$9.99"</span>,</span><br><span class="line">                    textAlign: TextAlign.center,</span><br><span class="line">                    style: TextStyle(</span><br><span class="line">                      color: AppColors.primaryElementText,</span><br><span class="line">                      fontFamily: <span class="string">"Montserrat"</span>,</span><br><span class="line">                      fontWeight: FontWeight.w400,</span><br><span class="line">                      fontSize: <span class="number">18</span>,</span><br><span class="line">                    ),</span><br><span class="line">                  ),</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">            ],</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ],</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="修改代码-buildCell"><a href="#修改代码-buildCell" class="headerlink" title="修改代码 _buildCell"></a>修改代码 _buildCell</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 列表项</span></span><br><span class="line">Widget _buildCell(&#123;</span><br><span class="line">  <span class="built_in">String</span> title,</span><br><span class="line">  <span class="built_in">String</span> subTitle,</span><br><span class="line">  <span class="built_in">int</span> number,</span><br><span class="line">  <span class="built_in">bool</span> hasArrow = <span class="keyword">false</span>,</span><br><span class="line">  VoidCallback onTap,</span><br><span class="line">&#125;) &#123;</span><br><span class="line">  <span class="keyword">return</span> GestureDetector(</span><br><span class="line">    onTap: onTap,</span><br><span class="line">    child: Container(</span><br><span class="line">      height: duSetWidth(<span class="number">60</span>),</span><br><span class="line">      color: Colors.white,</span><br><span class="line">      child: Stack(</span><br><span class="line">        alignment: Alignment.centerLeft,</span><br><span class="line">        children: [</span><br><span class="line">          <span class="comment">// 背景</span></span><br><span class="line">          Positioned(</span><br><span class="line">            left: <span class="number">0</span>,</span><br><span class="line">            right: <span class="number">0</span>,</span><br><span class="line">            child: Container(</span><br><span class="line">              height: duSetWidth(<span class="number">60</span>),</span><br><span class="line">              decoration: BoxDecoration(</span><br><span class="line">                color: AppColors.primaryBackground,</span><br><span class="line">              ),</span><br><span class="line">              child: Column(</span><br><span class="line">                mainAxisAlignment: MainAxisAlignment.end,</span><br><span class="line">                crossAxisAlignment: CrossAxisAlignment.stretch,</span><br><span class="line">                children: [</span><br><span class="line">                  Container(</span><br><span class="line">                    height: duSetWidth(<span class="number">1</span>),</span><br><span class="line">                    decoration: BoxDecoration(</span><br><span class="line">                      color: AppColors.tabCellSeparator,</span><br><span class="line">                    ),</span><br><span class="line">                    child: Container(),</span><br><span class="line">                  ),</span><br><span class="line">                ],</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">          <span class="comment">// 右侧</span></span><br><span class="line">          Positioned(</span><br><span class="line">            right: <span class="number">0</span>,</span><br><span class="line">            child: Row(</span><br><span class="line">              mainAxisAlignment: MainAxisAlignment.end,</span><br><span class="line">              children: [</span><br><span class="line">                <span class="comment">// 数字</span></span><br><span class="line">                number == <span class="keyword">null</span></span><br><span class="line">                    ? Container()</span><br><span class="line">                    : Container(</span><br><span class="line">                        margin: EdgeInsets.only(right: <span class="number">11</span>),</span><br><span class="line">                        child: Text(</span><br><span class="line">                          number.toString(),</span><br><span class="line">                          textAlign: TextAlign.right,</span><br><span class="line">                          style: TextStyle(</span><br><span class="line">                            color: AppColors.primaryText,</span><br><span class="line">                            fontFamily: <span class="string">"Avenir"</span>,</span><br><span class="line">                            fontWeight: FontWeight.w400,</span><br><span class="line">                            fontSize: duSetFontSize(<span class="number">18</span>),</span><br><span class="line">                          ),</span><br><span class="line">                        ),</span><br><span class="line">                      ),</span><br><span class="line">                <span class="comment">// 箭头</span></span><br><span class="line">                hasArrow == <span class="keyword">false</span></span><br><span class="line">                    ? Container()</span><br><span class="line">                    : Container(</span><br><span class="line">                        width: duSetWidth(<span class="number">24</span>),</span><br><span class="line">                        height: duSetWidth(<span class="number">24</span>),</span><br><span class="line">                        margin: EdgeInsets.only(right: <span class="number">20</span>),</span><br><span class="line">                        child: Icon(</span><br><span class="line">                          Icons.arrow_forward_ios,</span><br><span class="line">                          color: AppColors.primaryText,</span><br><span class="line">                        ),</span><br><span class="line">                      ),</span><br><span class="line">              ],</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line"></span><br><span class="line">          <span class="comment">// 标题</span></span><br><span class="line">          title == <span class="keyword">null</span></span><br><span class="line">              ? Container()</span><br><span class="line">              : Positioned(</span><br><span class="line">                  left: <span class="number">20</span>,</span><br><span class="line">                  child: Text(</span><br><span class="line">                    title,</span><br><span class="line">                    textAlign: TextAlign.left,</span><br><span class="line">                    style: TextStyle(</span><br><span class="line">                      color: AppColors.primaryText,</span><br><span class="line">                      fontFamily: <span class="string">"Montserrat"</span>,</span><br><span class="line">                      fontWeight: FontWeight.w400,</span><br><span class="line">                      fontSize: duSetFontSize(<span class="number">18</span>),</span><br><span class="line">                    ),</span><br><span class="line">                  ),</span><br><span class="line">                ),</span><br><span class="line"></span><br><span class="line">          <span class="comment">// 子标题</span></span><br><span class="line">          subTitle == <span class="keyword">null</span></span><br><span class="line">              ? Container()</span><br><span class="line">              : Positioned(</span><br><span class="line">                  right: <span class="number">20</span>,</span><br><span class="line">                  child: Text(</span><br><span class="line">                    subTitle,</span><br><span class="line">                    textAlign: TextAlign.left,</span><br><span class="line">                    style: TextStyle(</span><br><span class="line">                      color: AppColors.primaryText,</span><br><span class="line">                      fontFamily: <span class="string">"Montserrat"</span>,</span><br><span class="line">                      fontWeight: FontWeight.w400,</span><br><span class="line">                      fontSize: duSetFontSize(<span class="number">18</span>),</span><br><span class="line">                    ),</span><br><span class="line">                  ),</span><br><span class="line">                ),</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="修改代码-build"><a href="#修改代码-build" class="headerlink" title="修改代码 build"></a>修改代码 build</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@override</span></span><br><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">  <span class="keyword">final</span> appState = Provider.of&lt;AppState&gt;(context);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> SingleChildScrollView(</span><br><span class="line">    child: Column(</span><br><span class="line">      children: &lt;Widget&gt;[</span><br><span class="line">        _buildUserHeader(),</span><br><span class="line">        divider10Px(),</span><br><span class="line">        _buildCell(</span><br><span class="line">          title: <span class="string">"Email"</span>,</span><br><span class="line">          subTitle: <span class="string">"boltrogers@gmail.com"</span>,</span><br><span class="line">        ),</span><br><span class="line">        divider10Px(),</span><br><span class="line">        _buildCell(</span><br><span class="line">          title: <span class="string">"Favorite channels"</span>,</span><br><span class="line">          number: <span class="number">12</span>,</span><br><span class="line">          hasArrow: <span class="keyword">true</span>,</span><br><span class="line">        ),</span><br><span class="line">        _buildCell(</span><br><span class="line">          title: <span class="string">"Bookmarks"</span>,</span><br><span class="line">          number: <span class="number">294</span>,</span><br><span class="line">          hasArrow: <span class="keyword">true</span>,</span><br><span class="line">        ),</span><br><span class="line">        _buildCell(</span><br><span class="line">          title: <span class="string">"Popular categories"</span>,</span><br><span class="line">          number: <span class="number">7</span>,</span><br><span class="line">          hasArrow: <span class="keyword">true</span>,</span><br><span class="line">        ),</span><br><span class="line">        divider10Px(),</span><br><span class="line">        _buildCell(</span><br><span class="line">          title: <span class="string">"Newsletter"</span>,</span><br><span class="line">          hasArrow: <span class="keyword">true</span>,</span><br><span class="line">        ),</span><br><span class="line">        _buildCell(</span><br><span class="line">          title: <span class="string">"Settings"</span>,</span><br><span class="line">          hasArrow: <span class="keyword">true</span>,</span><br><span class="line">        ),</span><br><span class="line">        divider10Px(),</span><br><span class="line">        _buildCell(</span><br><span class="line">          title: <span class="string">"Switch Gray Filter"</span>,</span><br><span class="line">          hasArrow: <span class="keyword">true</span>,</span><br><span class="line">          onTap: () =&gt; appState.switchGrayFilter(),</span><br><span class="line">        ),</span><br><span class="line">        _buildCell(</span><br><span class="line">          title: <span class="string">"Log out"</span>,</span><br><span class="line">          hasArrow: <span class="keyword">true</span>,</span><br><span class="line">          onTap: () =&gt; goLoginPage(context),</span><br><span class="line">        ),</span><br><span class="line">        divider10Px(),</span><br><span class="line">      ],</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="技巧"><a href="#技巧" class="headerlink" title="技巧"></a>技巧</h3><ul><li>vscode 固定代码</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-06-18-11-15-41.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-06-19-07-22-10.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="资源"><a href="#资源" class="headerlink" title="资源"></a>资源</h2><h3 id="设计稿蓝湖预览"><a href="#设计稿蓝湖预览" class="headerlink" title="设计稿蓝湖预览"></a>设计稿蓝湖预览</h3><p><a href="https://lanhuapp.com/url/lYuz1" target="_blank" rel="noopener">https://lanhuapp.com/url/lYuz1</a><br>密码: gSKl</p><blockquote><p>蓝湖现在收费了，所以查看标记还请自己上传 xd 设计稿<br>商业设计稿文件不好直接分享, 可以加微信联系 ducafecat</p></blockquote><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="Flutter 实战从零开始" scheme="https://blog.ducafecat.tech/categories/Flutter-%E5%AE%9E%E6%88%98%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 实战从零开始 新闻客户端 - 12 采用 sentry 平台收集错误</title>
    <link href="https://blog.ducafecat.tech/2020/06/05/flutter-project/flutter-project-news-12-error-sentry/"/>
    <id>https://blog.ducafecat.tech/2020/06/05/flutter-project/flutter-project-news-12-error-sentry/</id>
    <published>2020-06-04T16:00:00.000Z</published>
    <updated>2020-07-04T06:33:27.703Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="bg.jpg" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>使用 sentry 平台</li><li>flutter 集成</li><li>android 集成</li><li>ios 集成</li></ul><h2 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h2><iframe src="//player.bilibili.com/player.html?bvid=BV1Ek4y1r7zk&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" height="400px"> </iframe><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/ducafecat/flutter_learn_news/releases/tag/v1.0.12" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news/releases/tag/v1.0.12</a></p><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><h3 id="错误收集策略"><a href="#错误收集策略" class="headerlink" title="错误收集策略"></a>错误收集策略</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="flutter-error.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="sentry-平台"><a href="#sentry-平台" class="headerlink" title="sentry 平台"></a>sentry 平台</h3><p><a href="https://sentry.io" target="_blank" rel="noopener">https://sentry.io</a></p><h3 id="收集-flutter"><a href="#收集-flutter" class="headerlink" title="收集 flutter"></a>收集 flutter</h3><ul><li>参考</li></ul><p><a href="https://docs.sentry.io/platforms/flutter/" target="_blank" rel="noopener">https://docs.sentry.io/platforms/flutter/</a></p><ul><li>pubspec.yaml</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dependencies:</span></span><br><span class="line"><span class="attr">  sentry:</span> <span class="string">^3.0.1</span></span><br></pre></td></tr></table></figure><ul><li>lib/main.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建 SentryClient 用于将异常日志上报给 sentry 平台</span></span><br><span class="line"><span class="keyword">final</span> SentryClient _sentry = <span class="keyword">new</span> SentryClient(</span><br><span class="line">  dsn:</span><br><span class="line">      <span class="string">'https://xxxxxxxxxx'</span>,</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 是否开发环境</span></span><br><span class="line"><span class="built_in">bool</span> <span class="keyword">get</span> isInDebugMode &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">false</span>; <span class="comment">// false 开始上传 sentry</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 上报异常的函数</span></span><br><span class="line">Future&lt;<span class="keyword">void</span>&gt; _reportError(<span class="keyword">dynamic</span> error, <span class="keyword">dynamic</span> stackTrace) <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'Caught error: $error'</span>);</span><br><span class="line">  <span class="keyword">if</span> (isInDebugMode) &#123;</span><br><span class="line">    <span class="built_in">print</span>(stackTrace);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> SentryResponse response = <span class="keyword">await</span> _sentry.captureException(</span><br><span class="line">      exception: error,</span><br><span class="line">      stackTrace: stackTrace,</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (response.isSuccessful) &#123;</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">'Success! Event ID: <span class="subst">$&#123;response.eventId&#125;</span>'</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">'Failed to report to Sentry.io: <span class="subst">$&#123;response.error&#125;</span>'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Future&lt;<span class="built_in">Null</span>&gt; main() <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="comment">// 捕获并上报 Flutter 异常</span></span><br><span class="line">  FlutterError.onError = (FlutterErrorDetails details) <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (isInDebugMode == <span class="keyword">true</span>) &#123;</span><br><span class="line">      FlutterError.dumpErrorToConsole(details);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      Zone.current.handleUncaughtError(details.exception, details.stack);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 捕获并上报 Dart 异常</span></span><br><span class="line">  runZonedGuarded(() <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">await</span> Global.init();</span><br><span class="line">    runApp(</span><br><span class="line">      MultiProvider(</span><br><span class="line">        providers: [</span><br><span class="line">          ChangeNotifierProvider&lt;AppState&gt;.value(</span><br><span class="line">            value: Global.appState,</span><br><span class="line">          ),</span><br><span class="line">        ],</span><br><span class="line">        child: Consumer&lt;AppState&gt;(builder: (context, appState, _) &#123;</span><br><span class="line">          <span class="keyword">if</span> (appState.isGrayFilter) &#123;</span><br><span class="line">            <span class="keyword">return</span> ColorFiltered(</span><br><span class="line">              colorFilter: ColorFilter.mode(Colors.white, BlendMode.color),</span><br><span class="line">              child: NewsApp(),</span><br><span class="line">            );</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> NewsApp();</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;, (<span class="built_in">Object</span> error, StackTrace stack) &#123;</span><br><span class="line">    _reportError(error, stack);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="收集-android"><a href="#收集-android" class="headerlink" title="收集 android"></a>收集 android</h3><ul><li>参考</li></ul><p><a href="https://docs.sentry.io/platforms/android/" target="_blank" rel="noopener">https://docs.sentry.io/platforms/android/</a></p><ul><li>集成 sdk</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">// ADD JCENTER REPOSITORY</span><br><span class="line">repositories &#123;</span><br><span class="line">    jcenter()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// ADD COMPATIBILITY OPTIONS TO BE COMPATIBLE WITH JAVA 1.8</span><br><span class="line">android &#123;</span><br><span class="line">    compileOptions &#123;</span><br><span class="line">        sourceCompatibility = JavaVersion.VERSION_1_8</span><br><span class="line">        targetCompatibility = JavaVersion.VERSION_1_8</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// ADD SENTRY ANDROID AS A DEPENDENCY</span><br><span class="line">dependencies &#123;</span><br><span class="line">    // https://github.com/getsentry/sentry-android/releases</span><br><span class="line">    implementation &apos;io.sentry:sentry-android:&#123;version&#125;&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>android/app/src/main/AndroidManifest.xml</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">application</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">"io.flutter.app.FlutterApplication"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:label</span>=<span class="string">"猫哥新闻"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:icon</span>=<span class="string">"@mipmap/launcher_icon"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- sentry --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:name</span>=<span class="string">"io.sentry.dsn"</span> <span class="attr">android:value</span>=<span class="string">"xxxxxxxxxxxxxxxxx"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">application</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>android/app/src/main/kotlin/com/example/flutterducafecatnews/CrashHandler.java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CrashHandler</span> <span class="keyword">implements</span> <span class="title">UncaughtExceptionHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">uncaughtException</span><span class="params">(Thread t, Throwable e)</span> </span>&#123;</span><br><span class="line">        Sentry.captureException(e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>android/app/src/main/kotlin/com/example/flutterducafecatnews/MainActivity.kt</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.sentry.core.Sentry</span><br><span class="line"></span><br><span class="line">class MainActivity: FlutterActivity() &#123;</span><br><span class="line">    <span class="function">override fun <span class="title">configureFlutterEngine</span><span class="params">(@NonNull flutterEngine: FlutterEngine)</span> </span>&#123;</span><br><span class="line">        val crashHandler = CrashHandler()</span><br><span class="line">        Thread.setDefaultUncaughtExceptionHandler(crashHandler)</span><br><span class="line">        GeneratedPluginRegistrant.registerWith(flutterEngine)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="收集-ios"><a href="#收集-ios" class="headerlink" title="收集 ios"></a>收集 ios</h3><ul><li>资料</li></ul><p><a href="https://docs.sentry.io/platforms/cocoa/?_ga=2.17974013.534595501.1591172359-228174411.1591172359&amp;_gac=1.12380800.1591172359.EAIaIQobChMIrICd9Jrl6QIVCj5gCh2zFw8lEAAYASAAEgJwyfD_BwE&amp;platform=javascript" target="_blank" rel="noopener">https://docs.sentry.io/platforms/cocoa/?_ga=2.17974013.534595501.1591172359-228174411.1591172359&amp;_gac=1.12380800.1591172359.EAIaIQobChMIrICd9Jrl6QIVCj5gCh2zFw8lEAAYASAAEgJwyfD_BwE&amp;platform=javascript</a></p><ul><li>集成 CocoaPods</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">platform :ios, &apos;8.0&apos;</span><br><span class="line">use_frameworks! # This is important</span><br><span class="line"></span><br><span class="line">target &apos;YourApp&apos; do</span><br><span class="line">    pod &apos;Sentry&apos;, :git =&gt; &apos;https://github.com/getsentry/sentry-cocoa.git&apos;, :tag =&gt; &apos;5.1.2&apos;</span><br><span class="line">end</span><br></pre></td></tr></table></figure><ul><li>ios/Runner/AppDelegate.swift</li></ul><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">SentrySDK</span>.start(options: [</span><br><span class="line">        <span class="string">"dsn"</span>: <span class="string">"https://xxxxxxxxxxxxxxxxxxx"</span>,</span><br><span class="line">        <span class="string">"debug"</span>: <span class="literal">true</span>, <span class="comment">// Enabled debug when first installing is always helpful</span></span><br><span class="line">        <span class="string">"enableAutoSessionTracking"</span>: <span class="literal">true</span></span><br><span class="line">    ])</span><br><span class="line"></span><br><span class="line">    <span class="type">NSSetUncaughtExceptionHandler</span> &#123; exception <span class="keyword">in</span></span><br><span class="line">     <span class="built_in">print</span>(exception)</span><br><span class="line">     <span class="type">SentrySDK</span>.capture(message: exception.description)</span><br><span class="line">     <span class="type">SentrySDK</span>.capture(exception: exception)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">GeneratedPluginRegistrant</span>.register(with: <span class="keyword">self</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">super</span>.application(application, didFinishLaunchingWithOptions: launchOptions)</span><br><span class="line"></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h2 id="资源"><a href="#资源" class="headerlink" title="资源"></a>资源</h2><h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul><li><p><a href="https://docs.sentry.io/platforms/flutter/" target="_blank" rel="noopener">https://docs.sentry.io/platforms/flutter/</a></p></li><li><p><a href="https://docs.sentry.io/platforms/android/" target="_blank" rel="noopener">https://docs.sentry.io/platforms/android/</a></p></li><li><p><a href="https://docs.sentry.io/platforms/cocoa/?_ga=2.17974013.534595501.1591172359-228174411.1591172359&amp;_gac=1.12380800.1591172359.EAIaIQobChMIrICd9Jrl6QIVCj5gCh2zFw8lEAAYASAAEgJwyfD_BwE&amp;platform=javascript" target="_blank" rel="noopener">https://docs.sentry.io/platforms/cocoa/?_ga=2.17974013.534595501.1591172359-228174411.1591172359&amp;_gac=1.12380800.1591172359.EAIaIQobChMIrICd9Jrl6QIVCj5gCh2zFw8lEAAYASAAEgJwyfD_BwE&amp;platform=javascript</a></p></li></ul><h3 id="设计稿蓝湖预览"><a href="#设计稿蓝湖预览" class="headerlink" title="设计稿蓝湖预览"></a>设计稿蓝湖预览</h3><p><a href="https://lanhuapp.com/url/lYuz1" target="_blank" rel="noopener">https://lanhuapp.com/url/lYuz1</a><br>密码: gSKl</p><blockquote><p>蓝湖现在收费了，所以查看标记还请自己上传 xd 设计稿<br>商业设计稿文件不好直接分享, 可以加微信联系 ducafecat</p></blockquote><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="Flutter 实战从零开始" scheme="https://blog.ducafecat.tech/categories/Flutter-%E5%AE%9E%E6%88%98%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Docker - 02 前端全栈 windows 从零安装 vmware + centos + docker + yapi</title>
    <link href="https://blog.ducafecat.tech/2020/05/29/docker/docker-02-windows-vmware-centos-setup/"/>
    <id>https://blog.ducafecat.tech/2020/05/29/docker/docker-02-windows-vmware-centos-setup/</id>
    <published>2020-05-28T16:00:00.000Z</published>
    <updated>2020-07-09T06:26:43.598Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="bg.jpg" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>前端全栈主力操作系统选哪个 ?</li><li>windows 下使用 docker 为什么不行 ?</li><li>VMWare 安装 centos</li><li>远程 centos 系统</li><li>centos 配置 docker 环境</li></ul><h2 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h2><p><a href="https://youtu.be/NJIwbs8qmDY" target="_blank" rel="noopener">https://youtu.be/NJIwbs8qmDY</a></p><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><h3 id="1-主力操作系统分析"><a href="#1-主力操作系统分析" class="headerlink" title="1. 主力操作系统分析"></a>1. 主力操作系统分析</h3><p>从前端全栈角度考虑</p><table><thead><tr><th></th><th>windows</th><th>macos</th><th>ubuntu</th></tr></thead><tbody><tr><td>nodejs、java、go、python</td><td>ok</td><td>ok</td><td>ok</td></tr><tr><td>vue、react、electron、rn</td><td>ok</td><td>ok</td><td>ok</td></tr><tr><td>小程序</td><td>ok</td><td>ok</td><td>ok</td></tr><tr><td>ios</td><td></td><td>ok</td><td></td></tr><tr><td>android</td><td>ok</td><td>ok</td><td>ok</td></tr><tr><td>办公 office wps ps 微信 QQ XD VSCode</td><td>ok</td><td>ok</td><td>ok</td></tr><tr><td>macos 专属 safri sketch</td><td></td><td>ok</td><td></td></tr><tr><td>程序编译、文件名大小写严格</td><td></td><td>ok</td><td>ok</td></tr></tbody></table><h3 id="2-windows-直接用-docker-存在的问题"><a href="#2-windows-直接用-docker-存在的问题" class="headerlink" title="2. windows 直接用 docker 存在的问题"></a>2. windows 直接用 docker 存在的问题</h3><p><strong>问题：</strong></p><p><a href="https://docs.docker.com/get-started/overview/" target="_blank" rel="noopener">https://docs.docker.com/get-started/overview/</a><br><a href="https://docs.docker.com/get-started/" target="_blank" rel="noopener">https://docs.docker.com/get-started/</a><br><a href="https://docs.microsoft.com/en-us/windows/wsl/about" target="_blank" rel="noopener">https://docs.microsoft.com/en-us/windows/wsl/about</a></p><ul><li><p>容器架构不同</p></li><li><p>切到 linux 容器架构，频繁遇到存储驱动兼容问题</p></li><li><p>WSL 2 的路还很长</p></li></ul><p><strong>总结</strong></p><p>开发环境与线上环境不一致，引发不必要的联调成本。</p><h3 id="3-windows-下-vmware-安装-centos"><a href="#3-windows-下-vmware-安装-centos" class="headerlink" title="3. windows 下 vmware 安装 centos"></a>3. windows 下 vmware 安装 centos</h3><h4 id="3-1-下载-centos-7"><a href="#3-1-下载-centos-7" class="headerlink" title="3.1 下载 centos 7"></a>3.1 下载 centos 7</h4><p><a href="http://isoredirect.centos.org/centos/7/isos/x86_64/" target="_blank" rel="noopener">http://isoredirect.centos.org/centos/7/isos/x86_64/</a></p><h4 id="3-2-安装-centos-7"><a href="#3-2-安装-centos-7" class="headerlink" title="3.2 安装 centos 7"></a>3.2 安装 centos 7</h4><p>操作见视频</p><h4 id="3-3-配置-centos-网卡"><a href="#3-3-配置-centos-网卡" class="headerlink" title="3.3 配置 centos 网卡"></a>3.3 配置 centos 网卡</h4><p>操作见视频</p><p>指令记录</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 修改配置</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> /etc/sysconfig/network-scripts</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ll</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> vi ifcfg-eth0</span></span><br><span class="line">ONBOOT=yes</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> vi 文件编辑</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> 进入目录</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ll 目录列表</span></span><br><span class="line"></span><br><span class="line">------------------------------</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 重启网卡</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> service network restart</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> service 管理系统服务</span></span><br><span class="line"></span><br><span class="line">------------------------------</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装工具</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> yum install -y net-tools</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> yum 软件包管理</span></span><br><span class="line"></span><br><span class="line">------------------------------</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看ip</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ifconfig</span></span><br><span class="line"></span><br><span class="line">------------------------------</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 固定ip、dns</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> vi ifcfg-eth0</span></span><br><span class="line">BOOTPROTO=static</span><br><span class="line">IPADDR=10.211.55.5</span><br><span class="line">NETMASK=255.255.255.0</span><br><span class="line">GATEWAY=10.211.55.1</span><br><span class="line">DNS1=223.5.5.5</span><br><span class="line">DNS2=223.6.6.6</span><br><span class="line"></span><br><span class="line">------------------------------</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 重启服务、查看dns</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> service network restart</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> cat /etc/resolv.conf</span></span><br></pre></td></tr></table></figure><h4 id="3-4-远程-ssh-工具"><a href="#3-4-远程-ssh-工具" class="headerlink" title="3.4 远程 ssh 工具"></a>3.4 远程 ssh 工具</h4><ul><li><p>finalshell<br><a href="http://www.hostbuf.com" target="_blank" rel="noopener">http://www.hostbuf.com</a></p></li><li><p>xshell、sftp<br><a href="https://www.netsarang.com/zh/xshell/" target="_blank" rel="noopener">https://www.netsarang.com/zh/xshell/</a></p></li><li><p>putty<br><a href="https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html" target="_blank" rel="noopener">https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html</a></p></li><li><p>cmder<br><a href="http://cmder.net/" target="_blank" rel="noopener">http://cmder.net/</a></p></li></ul><h4 id="3-6-安装-docker"><a href="#3-6-安装-docker" class="headerlink" title="3.6 安装 docker"></a>3.6 安装 docker</h4><h5 id="卸载旧版"><a href="#卸载旧版" class="headerlink" title="卸载旧版"></a>卸载旧版</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo yum remove docker \</span></span><br><span class="line">                  docker-client \</span><br><span class="line">                  docker-client-latest \</span><br><span class="line">                  docker-common \</span><br><span class="line">                  docker-latest \</span><br><span class="line">                  docker-latest-logrotate \</span><br><span class="line">                  docker-logrotate \</span><br><span class="line">                  docker-engine</span><br></pre></td></tr></table></figure><blockquote><p>sudo root 用户可以不用</p></blockquote><h5 id="原生安装"><a href="#原生安装" class="headerlink" title="原生安装"></a>原生安装</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 系统工具</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo yum install -y yum-utils device-mapper-persistent-data lvm2</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 加仓库</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo yum-config-manager \</span></span><br><span class="line">    --add-repo \</span><br><span class="line">    https://download.docker.com/linux/centos/docker-ce.repo</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装 docker ce cli</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo yum install -y docker-ce docker-ce-cli containerd.io</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 启动服务</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo systemctl start docker</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 开机启动</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo systemctl <span class="built_in">enable</span> docker</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装 docker-compose</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo curl -L <span class="string">"https://github.com/docker/compose/releases/download/1.25.5/docker-compose-<span class="variable">$(uname -s)</span>-<span class="variable">$(uname -m)</span>"</span> -o /usr/<span class="built_in">local</span>/bin/docker-compose</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 阿里云加速</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo mkdir -p /etc/docker</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo tee /etc/docker/daemon.json &lt;&lt;-<span class="string">'EOF'</span></span></span><br><span class="line">&#123;</span><br><span class="line">  "registry-mirrors": ["https://8stycbeq.mirror.aliyuncs.com"]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo systemctl daemon-reload</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo systemctl restart docker</span></span><br></pre></td></tr></table></figure><h3 id="4-运行-yapi"><a href="#4-运行-yapi" class="headerlink" title="4. 运行 yapi"></a>4. 运行 yapi</h3><h4 id="4-1-docker-compose-配置"><a href="#4-1-docker-compose-配置" class="headerlink" title="4.1 docker-compose 配置"></a>4.1 docker-compose 配置</h4><p>这次修改了数据持久化在指定目录</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">"3"</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"><span class="attr">  mongo-yapi:</span></span><br><span class="line"><span class="attr">    image:</span> <span class="string">mongo</span></span><br><span class="line"><span class="attr">    container_name:</span> <span class="string">mongo-ypai</span></span><br><span class="line"><span class="attr">    restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="comment"># ports:</span></span><br><span class="line">    <span class="comment">#   - 27017:27017</span></span><br><span class="line"><span class="attr">    environment:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">TZ=Asia/Shanghai</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">MONGO_INITDB_DATABASE=yapi</span></span><br><span class="line">      <span class="comment"># - MONGO_INITDB_ROOT_USERNAME=root</span></span><br><span class="line">      <span class="comment"># - MONGO_INITDB_ROOT_PASSWORD=$&#123;PASSWORD&#125;</span></span><br><span class="line"><span class="attr">    volumes:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">./docker-data/mongo-yapi:/data/db</span></span><br><span class="line"><span class="attr">    networks:</span></span><br><span class="line"><span class="attr">      docker_net:</span></span><br><span class="line"><span class="attr">        ipv4_address:</span> <span class="number">172.22</span><span class="number">.0</span><span class="number">.11</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># https://github.com/fjc0k/docker-YApi</span></span><br><span class="line"><span class="attr">  web-yapi:</span></span><br><span class="line"><span class="attr">    image:</span> <span class="string">jayfong/yapi:latest</span></span><br><span class="line"><span class="attr">    container_name:</span> <span class="string">web-ypai</span></span><br><span class="line"><span class="attr">    restart:</span> <span class="string">always</span></span><br><span class="line"><span class="attr">    ports:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="number">3000</span><span class="string">:3000</span></span><br><span class="line"><span class="attr">    depends_on:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">mongo-yapi</span></span><br><span class="line"><span class="attr">    links:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">mongo-yapi</span></span><br><span class="line"><span class="attr">    environment:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">TZ=Asia/Shanghai</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">YAPI_ADMIN_ACCOUNT=admin@ducafecat.tech</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">YAPI_ADMIN_PASSWORD=$&#123;PASSWORD&#125;</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">YAPI_CLOSE_REGISTER=true</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">YAPI_DB_SERVERNAME=mongo-yapi</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">YAPI_DB_PORT=27017</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">YAPI_DB_DATABASE=yapi</span></span><br><span class="line">      <span class="comment"># - YAPI_DB_USER=root</span></span><br><span class="line">      <span class="comment"># - YAPI_DB_PASS=$&#123;PASSWORD&#125;</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">YAPI_MAIL_ENABLE=false</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">YAPI_LDAP_LOGIN_ENABLE=false</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">YAPI_PLUGINS=[]</span></span><br><span class="line"><span class="attr">    networks:</span></span><br><span class="line"><span class="attr">      docker_net:</span></span><br><span class="line"><span class="attr">        ipv4_address:</span> <span class="number">172.22</span><span class="number">.0</span><span class="number">.12</span></span><br><span class="line"></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line"><span class="attr">  docker_net:</span></span><br><span class="line"><span class="attr">    driver:</span> <span class="string">bridge</span></span><br><span class="line"><span class="attr">    ipam:</span></span><br><span class="line"><span class="attr">      config:</span></span><br><span class="line"><span class="attr">        - subnet:</span> <span class="number">172.22</span><span class="number">.0</span><span class="number">.0</span><span class="string">/16</span></span><br></pre></td></tr></table></figure><h4 id="4-2-运行-yapi"><a href="#4-2-运行-yapi" class="headerlink" title="4.2 运行 yapi"></a>4.2 运行 yapi</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 启动</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker-compose up -d</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 卸载</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker-compose down</span></span><br></pre></td></tr></table></figure><h4 id="4-3-修改本地解析"><a href="#4-3-修改本地解析" class="headerlink" title="4.3 修改本地解析"></a>4.3 修改本地解析</h4><p>C:\Windows\System32\drivers\etc\hosts</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1 api.news.ducafecat.tech</span><br></pre></td></tr></table></figure><h2 id="问题整理"><a href="#问题整理" class="headerlink" title="问题整理"></a>问题整理</h2><h3 id="VMware-Workstation-与-Device-Credential-Guard-不兼容。"><a href="#VMware-Workstation-与-Device-Credential-Guard-不兼容。" class="headerlink" title="VMware Workstation 与 Device/Credential Guard 不兼容。"></a>VMware Workstation 与 Device/Credential Guard 不兼容。</h3><p>网上说卸载 Hyper-V， 没必要卸载</p><p>管理员方式运行 cmd 执行</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bcdedit /set hypervisorlaunchtype off</span><br></pre></td></tr></table></figure><p>然后重启电脑</p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><p>install docker</p><p><a href="https://docs.docker.com/engine/install/centos/" target="_blank" rel="noopener">https://docs.docker.com/engine/install/centos/</a></p></li><li><p>install docker-compose</p><p><a href="https://github.com/docker/compose/releases" target="_blank" rel="noopener">https://github.com/docker/compose/releases</a></p></li><li><p>阿里镜像</p><p><a href="https://cr.console.aliyun.com/cn-beijing/instances/mirrors" target="_blank" rel="noopener">https://cr.console.aliyun.com/cn-beijing/instances/mirrors</a></p></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="Docker" scheme="https://blog.ducafecat.tech/categories/Docker/"/>
    
    
      <category term="Docker" scheme="https://blog.ducafecat.tech/tags/Docker/"/>
    
  </entry>
  
  <entry>
    <title>Docker - 01 windows 下安装 docker 并运行 yapi 服务</title>
    <link href="https://blog.ducafecat.tech/2020/05/21/docker/docker-01-install-yapi/"/>
    <id>https://blog.ducafecat.tech/2020/05/21/docker/docker-01-install-yapi/</id>
    <published>2020-05-20T16:00:00.000Z</published>
    <updated>2020-05-22T12:59:16.289Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="bg.jpg" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>安装 docker</li><li>启动 yapi</li><li>备份、恢复 yapi</li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><h3 id="安装-Windows-10-专业工作站版"><a href="#安装-Windows-10-专业工作站版" class="headerlink" title="安装 Windows 10 专业工作站版"></a>安装 Windows 10 专业工作站版</h3><ul><li>i tell you</li></ul><p><a href="https://msdn.itellyou.cn/" target="_blank" rel="noopener">https://msdn.itellyou.cn/</a></p><ul><li>选用 business 镜像</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-05-18-14-40-53.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="安装-docker"><a href="#安装-docker" class="headerlink" title="安装 docker"></a>安装 docker</h3><ul><li>官网</li></ul><p><a href="https://www.docker.com/" target="_blank" rel="noopener">https://www.docker.com/</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-05-18-14-46-06.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>启用 Hyper-V</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-05-21-11-02-39.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>切换 linunx container</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-05-21-11-03-10.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="阿里镜像加速"><a href="#阿里镜像加速" class="headerlink" title="阿里镜像加速"></a>阿里镜像加速</h3><ul><li>阿里镜像加速</li></ul><p><a href="https://cr.console.aliyun.com/cn-zhangjiakou/instances/mirrors" target="_blank" rel="noopener">https://cr.console.aliyun.com/cn-zhangjiakou/instances/mirrors</a></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="string">"registry-mirrors"</span>: [<span class="string">"https://你的代码.mirror.aliyuncs.com"</span>],</span><br><span class="line"><span class="string">"insecure-registries"</span>: [],</span><br><span class="line"><span class="string">"debug"</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="string">"experimental"</span>: <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="docker-compose-配置-yapi"><a href="#docker-compose-配置-yapi" class="headerlink" title="docker-compose 配置 yapi"></a>docker-compose 配置 yapi</h3><ul><li>.env</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PASSWORD=$V7iTNk5N8#AkOeiwO@BywzBFte2^WsAuI$eJ4k9CKV0riqe</span><br></pre></td></tr></table></figure><ul><li>docker-compose.yml</li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">"3"</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"><span class="attr">  mongo-yapi:</span></span><br><span class="line"><span class="attr">    image:</span> <span class="string">mongo</span></span><br><span class="line"><span class="attr">    container_name:</span> <span class="string">mongo-ypai</span></span><br><span class="line"><span class="attr">    restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="comment"># ports:</span></span><br><span class="line">    <span class="comment">#   - 27017:27017</span></span><br><span class="line"><span class="attr">    environment:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">TZ=Asia/Shanghai</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">MONGO_INITDB_DATABASE=yapi</span></span><br><span class="line">      <span class="comment"># - MONGO_INITDB_ROOT_USERNAME=root</span></span><br><span class="line">      <span class="comment"># - MONGO_INITDB_ROOT_PASSWORD=$&#123;PASSWORD&#125;</span></span><br><span class="line"><span class="attr">    volumes:</span></span><br><span class="line">      <span class="comment"># - ./docker-data/mongo-yapi:/data/db</span></span><br><span class="line"><span class="attr">      - mongo-data:</span><span class="string">/data/db</span></span><br><span class="line"><span class="attr">    networks:</span></span><br><span class="line"><span class="attr">      docker_net:</span></span><br><span class="line"><span class="attr">        ipv4_address:</span> <span class="number">172.22</span><span class="number">.0</span><span class="number">.11</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># https://github.com/fjc0k/docker-YApi</span></span><br><span class="line"><span class="attr">  web-yapi:</span></span><br><span class="line"><span class="attr">    image:</span> <span class="string">jayfong/yapi:latest</span></span><br><span class="line"><span class="attr">    container_name:</span> <span class="string">web-ypai</span></span><br><span class="line"><span class="attr">    restart:</span> <span class="string">always</span></span><br><span class="line"><span class="attr">    ports:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="number">3000</span><span class="string">:3000</span></span><br><span class="line"><span class="attr">    depends_on:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">mongo-yapi</span></span><br><span class="line"><span class="attr">    links:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">mongo-yapi</span></span><br><span class="line"><span class="attr">    environment:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">TZ=Asia/Shanghai</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">YAPI_ADMIN_ACCOUNT=admin@ducafecat.tech</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">YAPI_ADMIN_PASSWORD=$&#123;PASSWORD&#125;</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">YAPI_CLOSE_REGISTER=true</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">YAPI_DB_SERVERNAME=mongo-yapi</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">YAPI_DB_PORT=27017</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">YAPI_DB_DATABASE=yapi</span></span><br><span class="line">      <span class="comment"># - YAPI_DB_USER=root</span></span><br><span class="line">      <span class="comment"># - YAPI_DB_PASS=$&#123;PASSWORD&#125;</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">YAPI_MAIL_ENABLE=false</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">YAPI_LDAP_LOGIN_ENABLE=false</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">YAPI_PLUGINS=[]</span></span><br><span class="line"><span class="attr">    networks:</span></span><br><span class="line"><span class="attr">      docker_net:</span></span><br><span class="line"><span class="attr">        ipv4_address:</span> <span class="number">172.22</span><span class="number">.0</span><span class="number">.12</span></span><br><span class="line"></span><br><span class="line"><span class="attr">volumes:</span></span><br><span class="line"><span class="attr">  mongo-data:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line"><span class="attr">  docker_net:</span></span><br><span class="line"><span class="attr">    driver:</span> <span class="string">bridge</span></span><br><span class="line"><span class="attr">    ipam:</span></span><br><span class="line"><span class="attr">      config:</span></span><br><span class="line"><span class="attr">        - subnet:</span> <span class="number">172.22</span><span class="number">.0</span><span class="number">.0</span><span class="string">/16</span></span><br></pre></td></tr></table></figure><h3 id="启动、卸载-ypai-服务"><a href="#启动、卸载-ypai-服务" class="headerlink" title="启动、卸载 ypai 服务"></a>启动、卸载 ypai 服务</h3><ul><li>启动</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker-compose up -d</span><br></pre></td></tr></table></figure><ul><li>卸载</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker-compose down</span><br></pre></td></tr></table></figure><h3 id="本地域名解析"><a href="#本地域名解析" class="headerlink" title="本地域名解析"></a>本地域名解析</h3><ul><li>C:\Windows\System32\drivers\etc\hosts</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1 api.news.ducafecat.tech</span><br></pre></td></tr></table></figure><h3 id="查询-volume"><a href="#查询-volume" class="headerlink" title="查询 volume"></a>查询 volume</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ docker volume ls</span><br><span class="line">DRIVER              VOLUME NAME</span><br><span class="line"><span class="built_in">local</span>               2fc91e2fd47a7110c2ecc5c8b88b997c4e6ddcf471a1df04f3fb618238ffd8aa</span><br><span class="line"><span class="built_in">local</span>               26e58cd678a97108f6dcd2cab33b9de341f992ceedacb7fd772c196bec908306</span><br><span class="line"><span class="built_in">local</span>               yapi-volumes_mongo-data</span><br></pre></td></tr></table></figure><h3 id="备份数据"><a href="#备份数据" class="headerlink" title="备份数据"></a>备份数据</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker run --rm --volumes-from mongo-ypai -v c:\backup:/backup ubuntu tar cvf /backup/backup.tar -C /data/db .</span><br></pre></td></tr></table></figure><h3 id="还原数据"><a href="#还原数据" class="headerlink" title="还原数据"></a>还原数据</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker run --rm --volumes-from mongo-ypai -v c:\backup:/backup ubuntu bash -c <span class="string">"cd /data/db &amp;&amp; tar xvf /backup/backup.tar -C /data/db "</span></span><br></pre></td></tr></table></figure><h2 id="资源"><a href="#资源" class="headerlink" title="资源"></a>资源</h2><h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul><li><a href="https://github.com/fjc0k/docker-YApi" target="_blank" rel="noopener">https://github.com/fjc0k/docker-YApi</a></li><li><a href="https://cr.console.aliyun.com/cn-zhangjiakou/instances/mirrors" target="_blank" rel="noopener">https://cr.console.aliyun.com/cn-zhangjiakou/instances/mirrors</a></li><li><a href="https://docs.docker.com/storage/volumes/#backup-restore-or-migrate-data-volumes" target="_blank" rel="noopener">https://docs.docker.com/storage/volumes/#backup-restore-or-migrate-data-volumes</a></li></ul><h3 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h3><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><p><a href="https://github.com/ducafecat/docker-yapi.git" target="_blank" rel="noopener">https://github.com/ducafecat/docker-yapi.git</a></p><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="Docker" scheme="https://blog.ducafecat.tech/categories/Docker/"/>
    
    
      <category term="Docker" scheme="https://blog.ducafecat.tech/tags/Docker/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 实战从零开始 新闻客户端 - 11 APP升级、android动态授权</title>
    <link href="https://blog.ducafecat.tech/2020/05/16/flutter-project/flutter-project-news-11-update-permission/"/>
    <id>https://blog.ducafecat.tech/2020/05/16/flutter-project/flutter-project-news-11-update-permission/</id>
    <published>2020-05-15T16:00:00.000Z</published>
    <updated>2020-07-04T06:33:27.703Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="bg.jpg" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>app 升级策略</li><li>android 动态授权</li><li>android 设备目录</li><li>ios 支持 swift 语言</li><li>快速提示框</li></ul><h2 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h2><iframe src="//player.bilibili.com/player.html?bvid=BV1Gi4y147zG&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" height="400px"> </iframe><iframe src="//player.bilibili.com/player.html?bvid=BV17t4y117ua&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" height="400px"> </iframe><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/ducafecat/flutter_learn_news/releases/tag/v1.0.11" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news/releases/tag/v1.0.11</a></p><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><h3 id="ios-支持-swift-语言"><a href="#ios-支持-swift-语言" class="headerlink" title="ios 支持 swift 语言"></a>ios 支持 swift 语言</h3><ul><li>出发点</li></ul><p>社区第三方包都在用 swift 开发，打包的时候需要加入 swift 语言包。</p><ul><li>操作</li></ul><p>创建一个支持 swift 的新项目，然后把 lib assets pubspec.yaml 覆盖即可。</p><h3 id="app-升级策略"><a href="#app-升级策略" class="headerlink" title="app 升级策略"></a>app 升级策略</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-05-16-15-18-48.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h3><h4 id="定义接口"><a href="#定义接口" class="headerlink" title="定义接口"></a>定义接口</h4><ul><li>post /app/update</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-05-16-16-02-33.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h4 id="加入依赖包"><a href="#加入依赖包" class="headerlink" title="加入依赖包"></a>加入依赖包</h4><ul><li>pubspec.yaml</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dependencies:</span></span><br><span class="line">  <span class="comment"># 设备信息</span></span><br><span class="line"><span class="attr">  device_info:</span> <span class="string">^0.4.2+3</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># 包信息</span></span><br><span class="line"><span class="attr">  package_info:</span> <span class="string">^0.4.0+18</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># 路径查询</span></span><br><span class="line"><span class="attr">  path_provider:</span> <span class="string">^1.6.8</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># permission 权限</span></span><br><span class="line"><span class="attr">  permission_handler:</span> <span class="string">^5.0.0+hotfix.6</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># 安装</span></span><br><span class="line"><span class="attr">  install_plugin:</span> <span class="string">^2.0.1</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># 对话框</span></span><br><span class="line"><span class="attr">  easy_dialog:</span> <span class="string">^1.0.5</span></span><br></pre></td></tr></table></figure><h4 id="升级工具类"><a href="#升级工具类" class="headerlink" title="升级工具类"></a>升级工具类</h4><ul><li>lib/common/utils/update.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'dart:io'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:dio/dio.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:easy_dialog/easy_dialog.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/common/apis/app.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/common/entitys/entitys.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/common/widgets/toast.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/global.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:install_plugin/install_plugin.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:path_provider/path_provider.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="markdown">/// app 升级</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AppUpdateUtil</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> AppUpdateUtil _instance = AppUpdateUtil._internal();</span><br><span class="line">  <span class="keyword">factory</span> AppUpdateUtil() =&gt; _instance;</span><br><span class="line"></span><br><span class="line">  BuildContext _context;</span><br><span class="line">  AppUpdateResponseEntity _appUpdateInfo;</span><br><span class="line"></span><br><span class="line">  AppUpdateUtil._internal();</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 获取更新信息</span></span></span><br><span class="line">  Future run(BuildContext context) <span class="keyword">async</span> &#123;</span><br><span class="line">    _context = context;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 提交 设备类型、发行渠道、架构、机型</span></span><br><span class="line">    AppUpdateRequestEntity requestDeviceInfo = AppUpdateRequestEntity(</span><br><span class="line">      device: Global.isIOS == <span class="keyword">true</span> ? <span class="string">"ios"</span> : <span class="string">"android"</span>,</span><br><span class="line">      channel: Global.channel,</span><br><span class="line">      architecture: Global.isIOS == <span class="keyword">true</span></span><br><span class="line">          ? Global.iosDeviceInfo.utsname.machine</span><br><span class="line">          : Global.androidDeviceInfo.device,</span><br><span class="line">      model: Global.isIOS == <span class="keyword">true</span></span><br><span class="line">          ? Global.iosDeviceInfo.name</span><br><span class="line">          : Global.androidDeviceInfo.brand,</span><br><span class="line">    );</span><br><span class="line">    _appUpdateInfo =</span><br><span class="line">        <span class="keyword">await</span> AppApi.update(context: context, params: requestDeviceInfo);</span><br><span class="line"></span><br><span class="line">    _runAppUpdate();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 检查是否有新版</span></span></span><br><span class="line">  Future _runAppUpdate() <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="comment">// 比较版本</span></span><br><span class="line">    <span class="keyword">final</span> isNewVersion =</span><br><span class="line">        (_appUpdateInfo.latestVersion.compareTo(Global.packageInfo.version) ==</span><br><span class="line">            <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 安装</span></span><br><span class="line">    <span class="keyword">if</span> (isNewVersion == <span class="keyword">true</span>) &#123;</span><br><span class="line">      _appUpdateConformDialog(() &#123;</span><br><span class="line">        Navigator.of(_context).pop();</span><br><span class="line">        <span class="keyword">if</span> (Global.isIOS == <span class="keyword">true</span>) &#123;</span><br><span class="line">          <span class="comment">// 去苹果店</span></span><br><span class="line">          InstallPlugin.gotoAppStore(_appUpdateInfo.shopUrl);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="comment">// apk 下载安装</span></span><br><span class="line">          toastInfo(msg: <span class="string">"开始下载升级包"</span>);</span><br><span class="line">          _downloadAPKAndSetup(_appUpdateInfo.fileUrl);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 下载文件 &amp; 安装</span></span></span><br><span class="line">  Future _downloadAPKAndSetup(<span class="built_in">String</span> fileUrl) <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="comment">// 下载</span></span><br><span class="line">    Directory externalDir = <span class="keyword">await</span> getExternalStorageDirectory();</span><br><span class="line">    <span class="built_in">String</span> fullPath = externalDir.path + <span class="string">"/release.apk"</span>;</span><br><span class="line"></span><br><span class="line">    Dio dio = Dio(BaseOptions(</span><br><span class="line">        responseType: ResponseType.bytes,</span><br><span class="line">        followRedirects: <span class="keyword">false</span>,</span><br><span class="line">        validateStatus: (status) &#123;</span><br><span class="line">          <span class="keyword">return</span> status &lt; <span class="number">500</span>;</span><br><span class="line">        &#125;));</span><br><span class="line">    Response response = <span class="keyword">await</span> dio.<span class="keyword">get</span>(</span><br><span class="line">      fileUrl,</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    File file = File(fullPath);</span><br><span class="line">    <span class="keyword">var</span> raf = file.openSync(mode: FileMode.write);</span><br><span class="line">    raf.writeFromSync(response.data);</span><br><span class="line">    <span class="keyword">await</span> raf.close();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 安装</span></span><br><span class="line">    <span class="keyword">await</span> InstallPlugin.installApk(fullPath, Global.packageInfo.packageName);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 升级确认对话框</span></span></span><br><span class="line">  <span class="keyword">void</span> _appUpdateConformDialog(VoidCallback onPressed) &#123;</span><br><span class="line">    EasyDialog(</span><br><span class="line">        title: Text(</span><br><span class="line">          <span class="string">"发现新版本 <span class="subst">$&#123;_appUpdateInfo.latestVersion&#125;</span>"</span>,</span><br><span class="line">          style: TextStyle(fontWeight: FontWeight.bold),</span><br><span class="line">          textScaleFactor: <span class="number">1.2</span>,</span><br><span class="line">        ),</span><br><span class="line">        description: Text(</span><br><span class="line">          _appUpdateInfo.latestDescription,</span><br><span class="line">          textScaleFactor: <span class="number">1.1</span>,</span><br><span class="line">          textAlign: TextAlign.center,</span><br><span class="line">        ),</span><br><span class="line">        height: <span class="number">220</span>,</span><br><span class="line">        contentList: [</span><br><span class="line">          Row(</span><br><span class="line">            mainAxisAlignment: MainAxisAlignment.end,</span><br><span class="line">            children: &lt;Widget&gt;[</span><br><span class="line">              <span class="keyword">new</span> FlatButton(</span><br><span class="line">                padding: <span class="keyword">const</span> EdgeInsets.only(top: <span class="number">8.0</span>),</span><br><span class="line">                textColor: Colors.lightBlue,</span><br><span class="line">                onPressed: onPressed,</span><br><span class="line">                child: <span class="keyword">new</span> Text(</span><br><span class="line">                  <span class="string">"同意"</span>,</span><br><span class="line">                  textScaleFactor: <span class="number">1.2</span>,</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">              <span class="keyword">new</span> FlatButton(</span><br><span class="line">                padding: <span class="keyword">const</span> EdgeInsets.only(top: <span class="number">8.0</span>),</span><br><span class="line">                textColor: Colors.lightBlue,</span><br><span class="line">                onPressed: () &#123;</span><br><span class="line">                  Navigator.of(_context).pop();</span><br><span class="line">                &#125;,</span><br><span class="line">                child: <span class="keyword">new</span> Text(</span><br><span class="line">                  <span class="string">"取消"</span>,</span><br><span class="line">                  textScaleFactor: <span class="number">1.2</span>,</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">            ],</span><br><span class="line">          )</span><br><span class="line">        ]).show(_context);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="读取设备信息"><a href="#读取设备信息" class="headerlink" title="读取设备信息"></a>读取设备信息</h4><ul><li>插件</li></ul><p><a href="https://pub.flutter-io.cn/packages/device_info" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/device_info</a></p><ul><li>全局信息</li></ul><p>lib/global.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="markdown">/// 是否 ios</span></span></span><br><span class="line"><span class="keyword">static</span> <span class="built_in">bool</span> isIOS = Platform.isIOS;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="markdown">/// android 设备信息</span></span></span><br><span class="line"><span class="keyword">static</span> AndroidDeviceInfo androidDeviceInfo;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="markdown">/// ios 设备信息</span></span></span><br><span class="line"><span class="keyword">static</span> IosDeviceInfo iosDeviceInfo;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="markdown">/// 包信息</span></span></span><br><span class="line"><span class="keyword">static</span> PackageInfo packageInfo;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="markdown">/// init</span></span></span><br><span class="line"><span class="keyword">static</span> Future init() <span class="keyword">async</span> &#123;</span><br><span class="line">  ...</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 读取设备信息</span></span><br><span class="line">  DeviceInfoPlugin deviceInfoPlugin = DeviceInfoPlugin();</span><br><span class="line">  <span class="keyword">if</span> (Global.isIOS) &#123;</span><br><span class="line">    Global.iosDeviceInfo = <span class="keyword">await</span> deviceInfoPlugin.iosInfo;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    Global.androidDeviceInfo = <span class="keyword">await</span> deviceInfoPlugin.androidInfo;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 包信息</span></span><br><span class="line">  Global.packageInfo = <span class="keyword">await</span> PackageInfo.fromPlatform();</span><br><span class="line"></span><br><span class="line">  ...</span><br></pre></td></tr></table></figure><ul><li>定义升级信息 entity</li></ul><p>lib/common/entitys/app.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AppUpdateRequestEntity</span> </span>&#123;</span><br><span class="line">  <span class="built_in">String</span> device;</span><br><span class="line">  <span class="built_in">String</span> channel;</span><br><span class="line">  <span class="built_in">String</span> architecture;</span><br><span class="line">  <span class="built_in">String</span> model;</span><br><span class="line"></span><br><span class="line">  AppUpdateRequestEntity(&#123;</span><br><span class="line">    <span class="keyword">this</span>.device,</span><br><span class="line">    <span class="keyword">this</span>.channel,</span><br><span class="line">    <span class="keyword">this</span>.architecture,</span><br><span class="line">    <span class="keyword">this</span>.model,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">factory</span> AppUpdateRequestEntity.fromJson(<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; json) =&gt;</span><br><span class="line">      AppUpdateRequestEntity(</span><br><span class="line">        device: json[<span class="string">"device"</span>],</span><br><span class="line">        channel: json[<span class="string">"channel"</span>],</span><br><span class="line">        architecture: json[<span class="string">"architecture"</span>],</span><br><span class="line">        model: json[<span class="string">"model"</span>],</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">  <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; toJson() =&gt; &#123;</span><br><span class="line">        <span class="string">"device"</span>: device,</span><br><span class="line">        <span class="string">"channel"</span>: channel,</span><br><span class="line">        <span class="string">"architecture"</span>: architecture,</span><br><span class="line">        <span class="string">"model"</span>: model,</span><br><span class="line">      &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AppUpdateResponseEntity</span> </span>&#123;</span><br><span class="line">  <span class="built_in">String</span> shopUrl;</span><br><span class="line">  <span class="built_in">String</span> fileUrl;</span><br><span class="line">  <span class="built_in">String</span> latestVersion;</span><br><span class="line">  <span class="built_in">String</span> latestDescription;</span><br><span class="line"></span><br><span class="line">  AppUpdateResponseEntity(&#123;</span><br><span class="line">    <span class="keyword">this</span>.shopUrl,</span><br><span class="line">    <span class="keyword">this</span>.fileUrl,</span><br><span class="line">    <span class="keyword">this</span>.latestVersion,</span><br><span class="line">    <span class="keyword">this</span>.latestDescription,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">factory</span> AppUpdateResponseEntity.fromJson(<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; json) =&gt;</span><br><span class="line">      AppUpdateResponseEntity(</span><br><span class="line">        shopUrl: json[<span class="string">"shopUrl"</span>],</span><br><span class="line">        fileUrl: json[<span class="string">"fileUrl"</span>],</span><br><span class="line">        latestVersion: json[<span class="string">"latestVersion"</span>],</span><br><span class="line">        latestDescription: json[<span class="string">"latestDescription"</span>],</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">  <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; toJson() =&gt; &#123;</span><br><span class="line">        <span class="string">"shopUrl"</span>: shopUrl,</span><br><span class="line">        <span class="string">"fileUrl"</span>: fileUrl,</span><br><span class="line">        <span class="string">"latestVersion"</span>: latestVersion,</span><br><span class="line">        <span class="string">"latestDescription"</span>: latestDescription,</span><br><span class="line">      &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>api 请求</li></ul><p>lib/common/apis/app.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="markdown">/// 系统相关</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AppApi</span> </span>&#123;</span><br><span class="line">  <span class="comment"><span class="markdown">/// 获取最新版本信息</span></span></span><br><span class="line">  <span class="keyword">static</span> Future&lt;AppUpdateResponseEntity&gt; update(&#123;</span><br><span class="line">    <span class="meta">@required</span> BuildContext context,</span><br><span class="line">    AppUpdateRequestEntity params,</span><br><span class="line">  &#125;) <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> response = <span class="keyword">await</span> HttpUtil().post(</span><br><span class="line">      <span class="string">'/app/update'</span>,</span><br><span class="line">      context: context,</span><br><span class="line">      params: params,</span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">return</span> AppUpdateResponseEntity.fromJson(response);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>提交信息 获取版本</li></ul><p>lib/common/utils/update.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="markdown">/// 获取更新信息</span></span></span><br><span class="line">Future run(BuildContext context) <span class="keyword">async</span> &#123;</span><br><span class="line">  _context = context;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 提交 设备类型、发行渠道、架构、机型</span></span><br><span class="line">  AppUpdateRequestEntity requestDeviceInfo = AppUpdateRequestEntity(</span><br><span class="line">    device: Global.isIOS == <span class="keyword">true</span> ? <span class="string">"ios"</span> : <span class="string">"android"</span>,</span><br><span class="line">    channel: Global.channel,</span><br><span class="line">    architecture: Global.isIOS == <span class="keyword">true</span></span><br><span class="line">        ? Global.iosDeviceInfo.utsname.machine</span><br><span class="line">        : Global.androidDeviceInfo.device,</span><br><span class="line">    model: Global.isIOS == <span class="keyword">true</span></span><br><span class="line">        ? Global.iosDeviceInfo.name</span><br><span class="line">        : Global.androidDeviceInfo.brand,</span><br><span class="line">  );</span><br><span class="line">  _appUpdateInfo =</span><br><span class="line">      <span class="keyword">await</span> AppApi.update(context: context, params: requestDeviceInfo);</span><br><span class="line"></span><br><span class="line">  _runAppUpdate();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="markdown">/// 检查是否有新版</span></span></span><br><span class="line">Future _runAppUpdate() <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="comment">// 比较版本</span></span><br><span class="line">  <span class="keyword">final</span> isNewVersion =</span><br><span class="line">      (_appUpdateInfo.latestVersion.compareTo(Global.packageInfo.version) ==</span><br><span class="line">          <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 安装</span></span><br><span class="line">  <span class="keyword">if</span> (isNewVersion == <span class="keyword">true</span>) &#123;</span><br><span class="line">    _appUpdateConformDialog(() &#123;</span><br><span class="line">      Navigator.of(_context).pop();</span><br><span class="line">      <span class="keyword">if</span> (Global.isIOS == <span class="keyword">true</span>) &#123;</span><br><span class="line">        <span class="comment">// 去苹果店</span></span><br><span class="line">        InstallPlugin.gotoAppStore(_appUpdateInfo.shopUrl);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// apk 下载安装</span></span><br><span class="line">        toastInfo(msg: <span class="string">"开始下载升级包"</span>);</span><br><span class="line">        _downloadAPKAndSetup(_appUpdateInfo.fileUrl);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="android-动态授权"><a href="#android-动态授权" class="headerlink" title="android 动态授权"></a>android 动态授权</h4><ul><li>插件</li></ul><p><a href="https://pub.flutter-io.cn/packages/permission_handler" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/permission_handler</a></p><ul><li>官方文章</li></ul><p><a href="https://developer.android.com/training/permissions/requesting" target="_blank" rel="noopener">https://developer.android.com/training/permissions/requesting</a></p><p><a href="https://developer.android.com/training/permissions/usage-notes" target="_blank" rel="noopener">https://developer.android.com/training/permissions/usage-notes</a></p><ul><li>AndroidManifest.xml 中加入权限</li></ul><p>android/app/src/main/AndroidManifest.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.INTERNET"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.READ_EXTERNAL_STORAGE"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.WRITE_EXTERNAL_STORAGE"</span> /&gt;</span></span><br></pre></td></tr></table></figure><ul><li>flutter 启动页中执行授权</li></ul><p>lib/pages/index/index.dart</p><p>在 initState 是执行</p><p>延迟 3 秒，用户体验好些</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_IndexPageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">IndexPage</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (Global.isRelease == <span class="keyword">true</span>) &#123;</span><br><span class="line">      doAppUpdate();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Future doAppUpdate() <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">await</span> Future.delayed(<span class="built_in">Duration</span>(seconds: <span class="number">3</span>), () <span class="keyword">async</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (Global.isIOS == <span class="keyword">false</span> &amp;&amp;</span><br><span class="line">          <span class="keyword">await</span> Permission.storage.isGranted == <span class="keyword">false</span>) &#123;</span><br><span class="line">        <span class="keyword">await</span> [Permission.storage].request();</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">await</span> Permission.storage.isGranted) &#123;</span><br><span class="line">        AppUpdateUtil().run(context);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h4 id="android-目录权限"><a href="#android-目录权限" class="headerlink" title="android 目录权限"></a>android 目录权限</h4><ul><li>插件</li></ul><p><a href="https://pub.flutter-io.cn/packages/path_provider" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/path_provider</a><br><a href="https://pub.flutter-io.cn/packages/install_plugin" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/install_plugin</a></p><ul><li>文章</li></ul><p><a href="https://developer.android.com/reference/androidx/core/content/FileProvider.html" target="_blank" rel="noopener">https://developer.android.com/reference/androidx/core/content/FileProvider.html</a></p><ul><li>lib/common/utils/update.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="markdown">/// 下载文件 &amp; 安装</span></span></span><br><span class="line">Future _downloadAPKAndSetup(<span class="built_in">String</span> fileUrl) <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="comment">// 下载</span></span><br><span class="line">  Directory externalDir = <span class="keyword">await</span> getExternalStorageDirectory();</span><br><span class="line">  <span class="built_in">String</span> fullPath = externalDir.path + <span class="string">"/release.apk"</span>;</span><br><span class="line"></span><br><span class="line">  Dio dio = Dio(BaseOptions(</span><br><span class="line">      responseType: ResponseType.bytes,</span><br><span class="line">      followRedirects: <span class="keyword">false</span>,</span><br><span class="line">      validateStatus: (status) &#123;</span><br><span class="line">        <span class="keyword">return</span> status &lt; <span class="number">500</span>;</span><br><span class="line">      &#125;));</span><br><span class="line">  Response response = <span class="keyword">await</span> dio.<span class="keyword">get</span>(</span><br><span class="line">    fileUrl,</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  File file = File(fullPath);</span><br><span class="line">  <span class="keyword">var</span> raf = file.openSync(mode: FileMode.write);</span><br><span class="line">  raf.writeFromSync(response.data);</span><br><span class="line">  <span class="keyword">await</span> raf.close();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 安装</span></span><br><span class="line">  <span class="keyword">await</span> InstallPlugin.installApk(fullPath, Global.packageInfo.packageName);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="EasyDialog-快速提示框"><a href="#EasyDialog-快速提示框" class="headerlink" title="EasyDialog 快速提示框"></a>EasyDialog 快速提示框</h4><ul><li>插件</li></ul><p><a href="https://pub.flutter-io.cn/packages/easy_dialog" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/easy_dialog</a></p><ul><li>lib/common/utils/update.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="markdown">/// 升级确认对话框</span></span></span><br><span class="line"><span class="keyword">void</span> _appUpdateConformDialog(VoidCallback onPressed) &#123;</span><br><span class="line">  EasyDialog(</span><br><span class="line">      title: Text(</span><br><span class="line">        <span class="string">"发现新版本 <span class="subst">$&#123;_appUpdateInfo.latestVersion&#125;</span>"</span>,</span><br><span class="line">        style: TextStyle(fontWeight: FontWeight.bold),</span><br><span class="line">        textScaleFactor: <span class="number">1.2</span>,</span><br><span class="line">      ),</span><br><span class="line">      description: Text(</span><br><span class="line">        _appUpdateInfo.latestDescription,</span><br><span class="line">        textScaleFactor: <span class="number">1.1</span>,</span><br><span class="line">        textAlign: TextAlign.center,</span><br><span class="line">      ),</span><br><span class="line">      height: <span class="number">220</span>,</span><br><span class="line">      contentList: [</span><br><span class="line">        Row(</span><br><span class="line">          mainAxisAlignment: MainAxisAlignment.end,</span><br><span class="line">          children: &lt;Widget&gt;[</span><br><span class="line">            <span class="keyword">new</span> FlatButton(</span><br><span class="line">              padding: <span class="keyword">const</span> EdgeInsets.only(top: <span class="number">8.0</span>),</span><br><span class="line">              textColor: Colors.lightBlue,</span><br><span class="line">              onPressed: onPressed,</span><br><span class="line">              child: <span class="keyword">new</span> Text(</span><br><span class="line">                <span class="string">"同意"</span>,</span><br><span class="line">                textScaleFactor: <span class="number">1.2</span>,</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">            <span class="keyword">new</span> FlatButton(</span><br><span class="line">              padding: <span class="keyword">const</span> EdgeInsets.only(top: <span class="number">8.0</span>),</span><br><span class="line">              textColor: Colors.lightBlue,</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                Navigator.of(_context).pop();</span><br><span class="line">              &#125;,</span><br><span class="line">              child: <span class="keyword">new</span> Text(</span><br><span class="line">                <span class="string">"取消"</span>,</span><br><span class="line">                textScaleFactor: <span class="number">1.2</span>,</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        )</span><br><span class="line">      ]).show(_context);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="资源"><a href="#资源" class="headerlink" title="资源"></a>资源</h2><h3 id="视频-1"><a href="#视频-1" class="headerlink" title="视频"></a>视频</h3><ul><li><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">b 站</a></li><li><a href="https://www.youtube.com/watch?v=Uucg6GGGBsY&amp;list=PL274L1n86T80VZR30KaLOKV6jqwTq5E8D" target="_blank" rel="noopener">油管镜像</a></li></ul><h3 id="蓝湖设计稿（加微信给授权-ducafecat）"><a href="#蓝湖设计稿（加微信给授权-ducafecat）" class="headerlink" title="蓝湖设计稿（加微信给授权 ducafecat）"></a>蓝湖设计稿（加微信给授权 ducafecat）</h3><p><a href="https://lanhuapp.com/url/lYuz1" target="_blank" rel="noopener">https://lanhuapp.com/url/lYuz1</a><br>密码: gSKl</p><blockquote><p>蓝湖现在收费了，所以查看标记还请自己上传 xd 设计稿<br>商业设计稿文件不好直接分享, 可以加微信联系 ducafecat</p></blockquote><h3 id="YAPI-接口管理"><a href="#YAPI-接口管理" class="headerlink" title="YAPI 接口管理"></a>YAPI 接口管理</h3><p><a href="http://yapi.demo.qunar.com/" target="_blank" rel="noopener">http://yapi.demo.qunar.com/</a></p><h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul><li>文章</li></ul><p><a href="https://developer.android.com/training/permissions/requesting" target="_blank" rel="noopener">https://developer.android.com/training/permissions/requesting</a><br><a href="https://developer.android.com/training/permissions/usage-notes" target="_blank" rel="noopener">https://developer.android.com/training/permissions/usage-notes</a><br><a href="https://developer.android.com/reference/androidx/core/content/FileProvider.html" target="_blank" rel="noopener">https://developer.android.com/reference/androidx/core/content/FileProvider.html</a></p><ul><li>flutter 插件</li></ul><p><a href="https://pub.flutter-io.cn/packages/device_info" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/device_info</a><br><a href="https://pub.flutter-io.cn/packages/path_provider" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/path_provider</a><br><a href="https://pub.flutter-io.cn/packages/permission_handler" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/permission_handler</a><br><a href="https://pub.flutter-io.cn/packages/install_plugin" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/install_plugin</a><br><a href="https://pub.flutter-io.cn/packages/easy_dialog" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/easy_dialog</a></p><h3 id="VSCode-插件"><a href="#VSCode-插件" class="headerlink" title="VSCode 插件"></a>VSCode 插件</h3><ul><li>Flutter、Dart</li><li><a href="https://marketplace.visualstudio.com/items?itemName=alexisvt.flutter-snippets" target="_blank" rel="noopener">Flutter Widget Snippets</a></li><li><a href="https://marketplace.visualstudio.com/items?itemName=Nash.awesome-flutter-snippets" target="_blank" rel="noopener">Awesome Flutter Snippets</a></li><li><a href="https://marketplace.visualstudio.com/items?itemName=quicktype.quicktype" target="_blank" rel="noopener">Paste JSON as Code</a></li><li><a href="https://marketplace.visualstudio.com/items?itemName=FelixAngelov.bloc" target="_blank" rel="noopener">bloc</a></li><li><a href="https://marketplace.visualstudio.com/items?itemName=streetsidesoftware.code-spell-checker" target="_blank" rel="noopener">Code Spell Checker</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="Flutter 实战从零开始" scheme="https://blog.ducafecat.tech/categories/Flutter-%E5%AE%9E%E6%88%98%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 实战从零开始 新闻客户端 - 10 编译发布正式版</title>
    <link href="https://blog.ducafecat.tech/2020/05/05/flutter-project/flutter-project-news-10-release/"/>
    <id>https://blog.ducafecat.tech/2020/05/05/flutter-project/flutter-project-news-10-release/</id>
    <published>2020-05-04T16:00:00.000Z</published>
    <updated>2020-07-04T06:33:27.703Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="bg.jpg" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>编译 build releae</li><li>程序瘦身</li><li>混淆程序</li><li>修改程序名称</li><li>制作图标</li><li>制作启动画面</li></ul><h2 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h2><iframe src="//player.bilibili.com/player.html?bvid=BV1G541147ZV&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" height="400px"> </iframe><iframe src="//player.bilibili.com/player.html?bvid=BV1ik4y1k7yP&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" height="400px"> </iframe><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/ducafecat/flutter_learn_news/releases/tag/v1.0.10" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news/releases/tag/v1.0.10</a></p><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><h3 id="1-APP-图标"><a href="#1-APP-图标" class="headerlink" title="1. APP 图标"></a>1. APP 图标</h3><h4 id="规格说明"><a href="#规格说明" class="headerlink" title="规格说明"></a>规格说明</h4><p><a href="https://developer.android.com/google-play/resources/icon-design-specifications" target="_blank" rel="noopener">https://developer.android.com/google-play/resources/icon-design-specifications</a></p><p><a href="https://developer.apple.com/design/human-interface-guidelines/ios/icons-and-images/app-icon/" target="_blank" rel="noopener">https://developer.apple.com/design/human-interface-guidelines/ios/icons-and-images/app-icon/</a></p><h4 id="图标尺寸"><a href="#图标尺寸" class="headerlink" title="图标尺寸"></a>图标尺寸</h4><p>android 512x512</p><p>ios 1024x1024</p><h4 id="在线工具"><a href="#在线工具" class="headerlink" title="在线工具"></a>在线工具</h4><p><a href="https://www.designevo.com/cn/logo-maker/" target="_blank" rel="noopener">https://www.designevo.com/cn/logo-maker/</a></p><h4 id="flutter-launcher-icons-插件"><a href="#flutter-launcher-icons-插件" class="headerlink" title="flutter_launcher_icons 插件"></a>flutter_launcher_icons 插件</h4><p><a href="https://pub.dev/packages/flutter_launcher_icons" target="_blank" rel="noopener">https://pub.dev/packages/flutter_launcher_icons</a></p><h4 id="pubspec-yaml"><a href="#pubspec-yaml" class="headerlink" title="pubspec.yaml"></a>pubspec.yaml</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dev_dependencies:</span></span><br><span class="line">  <span class="comment"># icons</span></span><br><span class="line"><span class="attr">  flutter_launcher_icons:</span> <span class="string">^0.7.5</span></span><br><span class="line"></span><br><span class="line"><span class="attr">flutter_icons:</span></span><br><span class="line"><span class="attr">  android:</span> <span class="string">"launcher_icon"</span></span><br><span class="line"><span class="attr">  ios:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">  image_path:</span> <span class="string">"assets/icons/logo-1024.png"</span></span><br></pre></td></tr></table></figure><h4 id="生成图标"><a href="#生成图标" class="headerlink" title="生成图标"></a>生成图标</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter pub run flutter_launcher_icons:main</span><br></pre></td></tr></table></figure><h4 id="图标目录"><a href="#图标目录" class="headerlink" title="图标目录"></a>图标目录</h4><p>android/app/src/main/res</p><p>ios/Runner/Assets.xcassets/AppIcon.appiconset</p><h3 id="2-启动图片"><a href="#2-启动图片" class="headerlink" title="2. 启动图片"></a>2. 启动图片</h3><h4 id="规格说明-1"><a href="#规格说明-1" class="headerlink" title="规格说明"></a>规格说明</h4><p><a href="https://developer.apple.com/design/human-interface-guidelines/ios/visual-design/adaptivity-and-layout/#device-screen-sizes-and-orientations" target="_blank" rel="noopener">https://developer.apple.com/design/human-interface-guidelines/ios/visual-design/adaptivity-and-layout/#device-screen-sizes-and-orientations</a></p><p><a href="https://developer.android.com/about/dashboards/index.html#Screens" target="_blank" rel="noopener">https://developer.android.com/about/dashboards/index.html#Screens</a></p><p><a href="https://uiiiuiii.com/screen/" target="_blank" rel="noopener">https://uiiiuiii.com/screen/</a></p><h4 id="图片尺寸"><a href="#图片尺寸" class="headerlink" title="图片尺寸"></a>图片尺寸</h4><p>iPhone XS Max 1242px × 2688px</p><p>android xxhdpi xhdpi</p><h4 id="在线工具-1"><a href="#在线工具-1" class="headerlink" title="在线工具"></a>在线工具</h4><p><a href="https://hotpot.ai/icon_resizer" target="_blank" rel="noopener">https://hotpot.ai/icon_resizer</a></p><h3 id="3-Android-发布"><a href="#3-Android-发布" class="headerlink" title="3. Android 发布"></a>3. Android 发布</h3><h4 id="证书签名说明"><a href="#证书签名说明" class="headerlink" title="证书签名说明"></a>证书签名说明</h4><p><a href="https://developer.android.com/studio/publish/app-signing?hl=zh-cn" target="_blank" rel="noopener">https://developer.android.com/studio/publish/app-signing?hl=zh-cn</a></p><h4 id="生成证书"><a href="#生成证书" class="headerlink" title="生成证书"></a>生成证书</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入目录 android/app/</span></span><br><span class="line">keytool -genkey -v -keystore ./key.jks -keyalg RSA -keysize 2048 -validity 10000 -<span class="built_in">alias</span> key</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出文件</span></span><br><span class="line">android/app/key.jks</span><br></pre></td></tr></table></figure><h4 id="Gradle-配置"><a href="#Gradle-配置" class="headerlink" title="Gradle 配置"></a>Gradle 配置</h4><ul><li><p>android/gradle.properties</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">android.enableAapt2=false # 不检测依赖资源</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>android/key.properties</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">storePassword=123456</span><br><span class="line">keyPassword=123456</span><br><span class="line">keyAlias=key</span><br><span class="line">storeFile=./key.jks</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>android/app/build.gradle</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义属性读取对象，读取 android/key.properties</span></span><br><span class="line"><span class="keyword">def</span> keystoreProperties = <span class="keyword">new</span> Properties()</span><br><span class="line"><span class="keyword">def</span> keystorePropertiesFile = rootProject.<span class="keyword">file</span>(<span class="string">'key.properties'</span>)</span><br><span class="line"><span class="keyword">if</span> (keystorePropertiesFile.exists()) &#123;</span><br><span class="line">    keystoreProperties.load(<span class="keyword">new</span> FileInputStream(keystorePropertiesFile))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">android &#123;</span><br><span class="line">    compileSdkVersion <span class="number">28</span></span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 签名配置</span></span><br><span class="line">    signingConfigs &#123;</span><br><span class="line">        release &#123;</span><br><span class="line">            keyAlias keystoreProperties[<span class="string">'keyAlias'</span>]</span><br><span class="line">            keyPassword keystoreProperties[<span class="string">'keyPassword'</span>]</span><br><span class="line">            storeFile <span class="keyword">file</span>(keystoreProperties[<span class="string">'storeFile'</span>])</span><br><span class="line">            storePassword keystoreProperties[<span class="string">'storePassword'</span>]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    buildTypes &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 发布配置</span></span><br><span class="line">        release &#123;</span><br><span class="line">            signingConfig signingConfigs.release</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="修改版本号"><a href="#修改版本号" class="headerlink" title="修改版本号"></a>修改版本号</h4><ul><li>pubspec.yaml</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">version: 1.0.0+1</span><br></pre></td></tr></table></figure><h4 id="修改程序名称"><a href="#修改程序名称" class="headerlink" title="修改程序名称"></a>修改程序名称</h4><ul><li><p>android/app/src/main/AndroidManifest.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">application</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">"io.flutter.app.FlutterApplication"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:label</span>=<span class="string">"猫哥新闻"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:icon</span>=<span class="string">"@mipmap/launcher_icon"</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="设置网络权限"><a href="#设置网络权限" class="headerlink" title="设置网络权限"></a>设置网络权限</h4><ul><li><p>android/app/src/main/AndroidManifest.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;/<span class="name">application</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.INTERNET"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="编译打包"><a href="#编译打包" class="headerlink" title="编译打包"></a>编译打包</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter build apk --split-per-abi</span><br></pre></td></tr></table></figure><h4 id="输出目录"><a href="#输出目录" class="headerlink" title="输出目录"></a>输出目录</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">✓ Built build/app/outputs/apk/release/app-armeabi-v7a-release.apk (7.2MB).</span><br><span class="line">✓ Built build/app/outputs/apk/release/app-arm64-v8a-release.apk (7.4MB).</span><br><span class="line">✓ Built build/app/outputs/apk/release/app-x86_64-release.apk (7.6MB).</span><br></pre></td></tr></table></figure><h4 id="混淆编译"><a href="#混淆编译" class="headerlink" title="混淆编译"></a>混淆编译</h4><p><a href="https://github.com/flutter/flutter/wiki/Obfuscating-Dart-Code" target="_blank" rel="noopener">https://github.com/flutter/flutter/wiki/Obfuscating-Dart-Code</a></p><ul><li><p>android/gradle.properties</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">extra-gen-snapshot-options=--obfuscate</span><br></pre></td></tr></table></figure></li><li><p>android/proguard-rules.pro</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#Flutter Wrapper</span><br><span class="line">-dontwarn io.flutter.**</span><br><span class="line">-keep class io.flutter.app.** &#123; *; &#125;</span><br><span class="line">-keep class io.flutter.plugin.**  &#123; *; &#125;</span><br><span class="line">-keep class io.flutter.util.**  &#123; *; &#125;</span><br><span class="line">-keep class io.flutter.view.**  &#123; *; &#125;</span><br><span class="line">-keep class io.flutter.**  &#123; *; &#125;</span><br><span class="line">-keep class io.flutter.plugins.**  &#123; *; &#125;</span><br></pre></td></tr></table></figure></li><li><p>android/app/build.gradle</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">buildTypes &#123;</span><br><span class="line">    release &#123;</span><br><span class="line">        signingConfig signingConfigs.release</span><br><span class="line"></span><br><span class="line">        minifyEnabled <span class="keyword">true</span>  <span class="comment">//资源压缩设置</span></span><br><span class="line">        useProguard <span class="keyword">true</span>    <span class="comment">//代码压缩设置</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//读取代码压缩配置文件</span></span><br><span class="line">        proguardFiles getDefaultProguardFile(<span class="string">'proguard-android.txt'</span>), <span class="string">'proguard-rules.pro'</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>编译</p></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter build apk --split-per-abi</span><br></pre></td></tr></table></figure><h4 id="启动页"><a href="#启动页" class="headerlink" title="启动页"></a>启动页</h4><ul><li><p>图片<br><img src="2020-05-07-21-56-57.png" alt=""></p></li><li><p>android/app/src/main/res/values/colors.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"cyan"</span>&gt;</span>#deecec<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>android/app/src/main/res/drawable/launch_background.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="comment">&lt;!-- Modify this file to customize your launch splash screen --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">layer-list</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:drawable</span>=<span class="string">"@color/cyan"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bitmap</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:gravity</span>=<span class="string">"center"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:src</span>=<span class="string">"@mipmap/launch_image"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">layer-list</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="4-IOS-发布"><a href="#4-IOS-发布" class="headerlink" title="4. IOS 发布"></a>4. IOS 发布</h3><h4 id="启动页-1"><a href="#启动页-1" class="headerlink" title="启动页"></a>启动页</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-05-07-21-52-25.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h4 id="修改程序名称-1"><a href="#修改程序名称-1" class="headerlink" title="修改程序名称"></a>修改程序名称</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-05-07-21-51-46.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="资源"><a href="#资源" class="headerlink" title="资源"></a>资源</h2><h3 id="视频-1"><a href="#视频-1" class="headerlink" title="视频"></a>视频</h3><ul><li><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">b 站</a></li><li><a href="https://www.youtube.com/watch?v=Uucg6GGGBsY&amp;list=PL274L1n86T80VZR30KaLOKV6jqwTq5E8D" target="_blank" rel="noopener">油管镜像</a></li></ul><h3 id="蓝湖设计稿（加微信给授权-ducafecat）"><a href="#蓝湖设计稿（加微信给授权-ducafecat）" class="headerlink" title="蓝湖设计稿（加微信给授权 ducafecat）"></a>蓝湖设计稿（加微信给授权 ducafecat）</h3><p><a href="https://lanhuapp.com/url/lYuz1" target="_blank" rel="noopener">https://lanhuapp.com/url/lYuz1</a><br>密码: gSKl</p><blockquote><p>蓝湖现在收费了，所以查看标记还请自己上传 xd 设计稿<br>商业设计稿文件不好直接分享, 可以加微信联系 ducafecat</p></blockquote><h3 id="YAPI-接口管理"><a href="#YAPI-接口管理" class="headerlink" title="YAPI 接口管理"></a>YAPI 接口管理</h3><p><a href="http://yapi.demo.qunar.com/" target="_blank" rel="noopener">http://yapi.demo.qunar.com/</a></p><h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p><a href="https://flutter.dev/docs/deployment/android" target="_blank" rel="noopener">https://flutter.dev/docs/deployment/android</a></p><p><a href="https://flutter.dev/docs/deployment/ios" target="_blank" rel="noopener">https://flutter.dev/docs/deployment/ios</a></p><p><a href="https://flutter.dev/docs/deployment/obfuscate" target="_blank" rel="noopener">https://flutter.dev/docs/deployment/obfuscate</a></p><p><a href="https://github.com/flutter/flutter/wiki/Obfuscating-Dart-Code" target="_blank" rel="noopener">https://github.com/flutter/flutter/wiki/Obfuscating-Dart-Code</a></p><p><a href="https://pub.dev/packages/flutter_launcher_icons" target="_blank" rel="noopener">https://pub.dev/packages/flutter_launcher_icons</a></p><p><a href="https://developer.android.com/google-play/resources/icon-design-specifications" target="_blank" rel="noopener">https://developer.android.com/google-play/resources/icon-design-specifications</a></p><p><a href="https://developer.apple.com/design/human-interface-guidelines/ios/icons-and-images/app-icon/" target="_blank" rel="noopener">https://developer.apple.com/design/human-interface-guidelines/ios/icons-and-images/app-icon/</a></p><p><a href="https://developer.apple.com/design/human-interface-guidelines/ios/visual-design/adaptivity-and-layout/#device-screen-sizes-and-orientations" target="_blank" rel="noopener">https://developer.apple.com/design/human-interface-guidelines/ios/visual-design/adaptivity-and-layout/#device-screen-sizes-and-orientations</a></p><p><a href="https://developer.android.com/about/dashboards/index.html#Screens" target="_blank" rel="noopener">https://developer.android.com/about/dashboards/index.html#Screens</a></p><p><a href="https://uiiiuiii.com/screen/" target="_blank" rel="noopener">https://uiiiuiii.com/screen/</a></p><h3 id="VSCode-插件"><a href="#VSCode-插件" class="headerlink" title="VSCode 插件"></a>VSCode 插件</h3><ul><li>Flutter、Dart</li><li><a href="https://marketplace.visualstudio.com/items?itemName=alexisvt.flutter-snippets" target="_blank" rel="noopener">Flutter Widget Snippets</a></li><li><a href="https://marketplace.visualstudio.com/items?itemName=Nash.awesome-flutter-snippets" target="_blank" rel="noopener">Awesome Flutter Snippets</a></li><li><a href="https://marketplace.visualstudio.com/items?itemName=quicktype.quicktype" target="_blank" rel="noopener">Paste JSON as Code</a></li><li><a href="https://marketplace.visualstudio.com/items?itemName=FelixAngelov.bloc" target="_blank" rel="noopener">bloc</a></li><li><a href="https://marketplace.visualstudio.com/items?itemName=streetsidesoftware.code-spell-checker" target="_blank" rel="noopener">Code Spell Checker</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="Flutter 实战从零开始" scheme="https://blog.ducafecat.tech/categories/Flutter-%E5%AE%9E%E6%88%98%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 实战从零开始 新闻客户端 - 09 详情页展示、分享、远程真机调试</title>
    <link href="https://blog.ducafecat.tech/2020/04/24/flutter-project/flutter-project-news-09-webview/"/>
    <id>https://blog.ducafecat.tech/2020/04/24/flutter-project/flutter-project-news-09-webview/</id>
    <published>2020-04-23T16:00:00.000Z</published>
    <updated>2020-07-04T06:33:27.703Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="bg.jpg" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>详情页技术方案比较</li><li>载入 web 内容</li><li>自动计算高度</li><li>清除广告、推荐</li><li>拦截请求</li><li>loading 状态显示</li><li>分享插件</li><li>远程 android 设备调试</li></ul><h2 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h2><iframe src="//player.bilibili.com/player.html?bvid=BV18e411s7A1&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" height="400px"> </iframe><iframe src="//player.bilibili.com/player.html?bvid=BV1RZ4y1W7CN&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" height="400px"> </iframe><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/ducafecat/flutter_learn_news/releases/tag/v1.0.9" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news/releases/tag/v1.0.9</a></p><h2 id="详情展示"><a href="#详情展示" class="headerlink" title="详情展示"></a>详情展示</h2><h3 id="技术方案选择"><a href="#技术方案选择" class="headerlink" title="技术方案选择"></a>技术方案选择</h3><h4 id="分析工具-UI-automator-view"><a href="#分析工具-UI-automator-view" class="headerlink" title="分析工具 UI automator view"></a>分析工具 UI automator view</h4><ul><li>文件位置</li></ul><p>/Users/ducafecat/Library/Android/sdk/tools/bin/uiautomatorviewer</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-04-24-10-32-51.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h4 id="淘宝方案"><a href="#淘宝方案" class="headerlink" title="淘宝方案"></a>淘宝方案</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-04-24-10-30-45.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><blockquote><p>混合方式</p></blockquote><h4 id="头条"><a href="#头条" class="headerlink" title="头条"></a>头条</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-04-24-11-08-21.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-04-24-11-09-58.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><blockquote><p>混合方式</p></blockquote><h4 id="什么值得买"><a href="#什么值得买" class="headerlink" title="什么值得买"></a>什么值得买</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-04-24-11-14-22.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-04-24-11-15-10.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-04-24-11-16-16.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><blockquote><p>单一 webView</p></blockquote><h3 id="技术点分析"><a href="#技术点分析" class="headerlink" title="技术点分析"></a>技术点分析</h3><ul><li><ol><li>webView 原生 混合方式</li></ol></li><li><ol start="2"><li>计算 web 页面高度</li></ol></li><li><ol start="3"><li>拦截请求，自定义指令</li></ol></li><li><ol start="4"><li>内存占用（尽量少的 dom 元素）</li></ol></li></ul><h3 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h3><ul><li>webview_flutter</li></ul><p><a href="https://pub.flutter-io.cn/packages/webview_flutter" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/webview_flutter</a></p><ul><li>pubspec.yaml</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dependencies:</span></span><br><span class="line"><span class="attr">  webview_flutter:</span> <span class="string">^0.3.20+2</span></span><br></pre></td></tr></table></figure><ul><li>ios/Runner/Info.plist</li></ul><figure class="highlight plist"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">key</span>&gt;</span>io.flutter.embedded_views_preview<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">true</span>/&gt;</span></span><br></pre></td></tr></table></figure><h3 id="构建界面代码"><a href="#构建界面代码" class="headerlink" title="构建界面代码"></a>构建界面代码</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 顶部导航</span></span><br><span class="line">Widget _buildAppBar() &#123;</span><br><span class="line">  <span class="keyword">return</span> Container();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 页标题</span></span><br><span class="line">Widget _buildPageTitle() &#123;</span><br><span class="line">  <span class="keyword">return</span> Container();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 页头部</span></span><br><span class="line">Widget _buildPageHeader() &#123;</span><br><span class="line">  <span class="keyword">return</span> Container();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// web内容</span></span><br><span class="line">Widget _buildWebView() &#123;</span><br><span class="line">  <span class="keyword">return</span> Container();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@override</span></span><br><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">  <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: _buildAppBar(),</span><br><span class="line">      body: SingleChildScrollView(</span><br><span class="line">            child: Column(</span><br><span class="line">              children: &lt;Widget&gt;[</span><br><span class="line">                _buildPageTitle(),</span><br><span class="line">                Divider(height: <span class="number">1</span>),</span><br><span class="line">                _buildPageHeader(),</span><br><span class="line">                _buildWebView(),</span><br><span class="line">              ],</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="url-载入"><a href="#url-载入" class="headerlink" title="url 载入"></a>url 载入</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Widget _buildWebView() &#123;</span><br><span class="line">  <span class="keyword">return</span> Container(</span><br><span class="line">    height: _webViewHeight,</span><br><span class="line">    child: WebView(</span><br><span class="line">      initialUrl:</span><br><span class="line">          <span class="string">'$SERVER_API_URL/news/content/<span class="subst">$&#123;widget.item.id&#125;</span>'</span>, <span class="comment">//widget.url,</span></span><br><span class="line">      javascriptMode: JavascriptMode.unrestricted,</span><br><span class="line">      onWebViewCreated: (WebViewController webViewController) <span class="keyword">async</span> &#123;</span><br><span class="line">        _controller.complete(webViewController);</span><br><span class="line">      &#125;,</span><br><span class="line">      gestureNavigationEnabled: <span class="keyword">true</span>,</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="计算高度"><a href="#计算高度" class="headerlink" title="计算高度"></a>计算高度</h3><ul><li><p>PX DP</p><ul><li><a href="https://blog.akanelee.me/2018/07/31/dpi-px-pt-dp-sp/" target="_blank" rel="noopener">https://blog.akanelee.me/2018/07/31/dpi-px-pt-dp-sp/</a></li></ul></li><li><p>设备像素密度</p><blockquote><p>一个逻辑像素占用多少个实际像素</p></blockquote><ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/devicePixelRatio" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Web/API/Window/devicePixelRatio</a></li><li><a href="https://api.flutter.dev/flutter/dart-ui/Window/devicePixelRatio.html" target="_blank" rel="noopener">https://api.flutter.dev/flutter/dart-ui/Window/devicePixelRatio.html</a></li></ul></li><li><p>注册 js</p></li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">double</span> _webViewHeight = <span class="number">200</span>;</span><br><span class="line"></span><br><span class="line">      javascriptChannels: &lt;JavascriptChannel&gt;[</span><br><span class="line">        _invokeJavascriptChannel(context),</span><br><span class="line">      ].toSet(),</span><br></pre></td></tr></table></figure><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 注册js回调</span></span><br><span class="line">JavascriptChannel _invokeJavascriptChannel(BuildContext context) &#123;</span><br><span class="line">  <span class="keyword">return</span> JavascriptChannel(</span><br><span class="line">      name: <span class="string">'Invoke'</span>,</span><br><span class="line">      onMessageReceived: (JavascriptMessage message) &#123;</span><br><span class="line">        <span class="built_in">print</span>(message.message);</span><br><span class="line">        <span class="keyword">var</span> webHeight = <span class="built_in">double</span>.parse(message.message);</span><br><span class="line">        <span class="keyword">if</span> (webHeight != <span class="keyword">null</span>) &#123;</span><br><span class="line">          setState(() &#123;</span><br><span class="line">            _webViewHeight = webHeight;</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>回调</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">onPageFinished: (<span class="built_in">String</span> url) &#123;</span><br><span class="line">  _getWebViewHeight();</span><br><span class="line">  setState(() &#123;</span><br><span class="line">    _isPageFinished = <span class="keyword">true</span>;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取页面高度</span></span><br><span class="line">_getWebViewHeight() <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="keyword">await</span> (<span class="keyword">await</span> _controller.future)?.evaluateJavascript(<span class="string">'''</span></span><br><span class="line"><span class="string">      try &#123;</span></span><br><span class="line"><span class="string">        // Invoke.postMessage([document.body.clientHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight]);</span></span><br><span class="line"><span class="string">        let scrollHeight = document.documentElement.scrollHeight;</span></span><br><span class="line"><span class="string">        if (scrollHeight) &#123;</span></span><br><span class="line"><span class="string">          Invoke.postMessage(scrollHeight);</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125; catch &#123;&#125;</span></span><br><span class="line"><span class="string">      '''</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="清除广告、推荐"><a href="#清除广告、推荐" class="headerlink" title="清除广告、推荐"></a>清除广告、推荐</h3><ul><li><p><a href="https://cn.engadget.com/cn-2020-01-21-google-pixelbook-go-not-pink-available.html" target="_blank" rel="noopener">https://cn.engadget.com/cn-2020-01-21-google-pixelbook-go-not-pink-available.html</a></p></li><li><p>删除广告</p></li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">onPageStarted: (<span class="built_in">String</span> url) &#123;</span><br><span class="line">  Timer(<span class="built_in">Duration</span>(seconds: <span class="number">1</span>), () &#123;</span><br><span class="line">     setState(() &#123;</span><br><span class="line">       _isPageFinished = <span class="keyword">true</span>;</span><br><span class="line">     &#125;);</span><br><span class="line">   _removeAd();</span><br><span class="line">   _getViewHeight();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">_removeWebViewAd() <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="keyword">await</span> (<span class="keyword">await</span> _controller.future)?.evaluateJavascript(<span class="string">'''</span></span><br><span class="line"><span class="string">      try &#123;</span></span><br><span class="line"><span class="string">        function removeElement(elementName)&#123;</span></span><br><span class="line"><span class="string">          let _element = document.getElementById(elementName);</span></span><br><span class="line"><span class="string">          if(!_element) &#123;</span></span><br><span class="line"><span class="string">            _element = document.querySelector(elementName);</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">          if(!_element) &#123;</span></span><br><span class="line"><span class="string">            return;</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">          let _parentElement = _element.parentNode;</span></span><br><span class="line"><span class="string">          if(_parentElement)&#123;</span></span><br><span class="line"><span class="string">              _parentElement.removeChild(_element);</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        removeElement('module-engadget-deeplink-top-ad');</span></span><br><span class="line"><span class="string">        removeElement('module-engadget-deeplink-streams');</span></span><br><span class="line"><span class="string">        removeElement('footer');</span></span><br><span class="line"><span class="string">      &#125; catch&#123;&#125;</span></span><br><span class="line"><span class="string">      '''</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="拦截请求"><a href="#拦截请求" class="headerlink" title="拦截请求"></a>拦截请求</h3><ul><li>页面中 href</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"tags"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/tag/chrome-os"</span> <span class="attr">class</span>=<span class="string">"tag"</span>&gt;</span>chrome os<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/tag/chromebook"</span> <span class="attr">class</span>=<span class="string">"tag"</span>&gt;</span>chromebook<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/tag/computer"</span> <span class="attr">class</span>=<span class="string">"tag"</span>&gt;</span>computer<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/tag/gear"</span> <span class="attr">class</span>=<span class="string">"tag"</span>&gt;</span>gear<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/tag/google"</span> <span class="attr">class</span>=<span class="string">"tag"</span>&gt;</span>google<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/tag/laptop"</span> <span class="attr">class</span>=<span class="string">"tag"</span>&gt;</span>laptop<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/tag/personal computing"</span> <span class="attr">class</span>=<span class="string">"tag"</span>&gt;</span>personal computing<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/tag/personalcomputing"</span> <span class="attr">class</span>=<span class="string">"tag"</span>&gt;</span>personalcomputing<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/tag/pixelbook-go"</span> <span class="attr">class</span>=<span class="string">"tag"</span>&gt;</span>pixelbook go<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>navigation 拦截</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">navigationDelegate: (NavigationRequest request) &#123;</span><br><span class="line">  <span class="keyword">if</span> (request.url != <span class="string">'$SERVER_API_URL/news/content/<span class="subst">$&#123;widget.item.id&#125;</span>'</span>) &#123;</span><br><span class="line">    toastInfo(msg: request.url);</span><br><span class="line">    <span class="keyword">return</span> NavigationDecision.prevent;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> NavigationDecision.navigate;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h3 id="loading-状态显示"><a href="#loading-状态显示" class="headerlink" title="loading 状态显示"></a>loading 状态显示</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="built_in">bool</span> _isPageFinished = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@override</span></span><br><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">  <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: _buildAppBar(),</span><br><span class="line">      body: Stack(</span><br><span class="line">        children: &lt;Widget&gt;[</span><br><span class="line">          SingleChildScrollView(</span><br><span class="line">            child: Column(</span><br><span class="line">              children: &lt;Widget&gt;[</span><br><span class="line">                _buildPageTitle(),</span><br><span class="line">                Divider(height: <span class="number">1</span>),</span><br><span class="line">                _buildPageHeader(),</span><br><span class="line">                _buildWebView(),</span><br><span class="line">              ],</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">          _isPageFinished == <span class="keyword">true</span></span><br><span class="line">              ? Container()</span><br><span class="line">              : Align(</span><br><span class="line">                  alignment: Alignment.center,</span><br><span class="line">                  child: LoadingBouncingGrid.square(),</span><br><span class="line">                ),</span><br><span class="line">        ],</span><br><span class="line">      ));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="分享"><a href="#分享" class="headerlink" title="分享"></a>分享</h2><h3 id="安装插件-1"><a href="#安装插件-1" class="headerlink" title="安装插件"></a>安装插件</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dependencies:</span></span><br><span class="line"><span class="attr">  share:</span> <span class="string">^0.6.4</span></span><br></pre></td></tr></table></figure><h3 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">onPressed: () &#123;</span><br><span class="line">  Share.share(<span class="string">'<span class="subst">$&#123;widget.item.title&#125;</span> <span class="subst">$&#123;widget.item.url&#125;</span>'</span>);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h3 id="真机调试"><a href="#真机调试" class="headerlink" title="真机调试"></a>真机调试</h3><ul><li>scrcpy</li></ul><p><a href="https://github.com/Genymobile/scrcpy" target="_blank" rel="noopener">https://github.com/Genymobile/scrcpy</a></p><h2 id="资源"><a href="#资源" class="headerlink" title="资源"></a>资源</h2><h3 id="视频-1"><a href="#视频-1" class="headerlink" title="视频"></a>视频</h3><ul><li><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">b 站</a></li><li><a href="https://www.youtube.com/watch?v=Uucg6GGGBsY&amp;list=PL274L1n86T80VZR30KaLOKV6jqwTq5E8D" target="_blank" rel="noopener">油管镜像</a></li></ul><h3 id="蓝湖设计稿（加微信给授权-ducafecat）"><a href="#蓝湖设计稿（加微信给授权-ducafecat）" class="headerlink" title="蓝湖设计稿（加微信给授权 ducafecat）"></a>蓝湖设计稿（加微信给授权 ducafecat）</h3><p><a href="https://lanhuapp.com/url/lYuz1" target="_blank" rel="noopener">https://lanhuapp.com/url/lYuz1</a><br>密码: gSKl</p><blockquote><p>蓝湖现在收费了，所以查看标记还请自己上传 xd 设计稿<br>商业设计稿文件不好直接分享, 可以加微信联系 ducafecat</p></blockquote><h3 id="YAPI-接口管理"><a href="#YAPI-接口管理" class="headerlink" title="YAPI 接口管理"></a>YAPI 接口管理</h3><p><a href="http://yapi.demo.qunar.com/" target="_blank" rel="noopener">http://yapi.demo.qunar.com/</a></p><h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p><a href="https://pub.flutter-io.cn/packages/webview_flutter" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/webview_flutter</a><br><a href="https://pub.flutter-io.cn/packages/loading_animations" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/loading_animations</a><br><a href="https://pub.flutter-io.cn/packages/share" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/share</a><br><a href="https://github.com/Genymobile/scrcpy" target="_blank" rel="noopener">https://github.com/Genymobile/scrcpy</a></p><h3 id="VSCode-插件"><a href="#VSCode-插件" class="headerlink" title="VSCode 插件"></a>VSCode 插件</h3><ul><li>Flutter、Dart</li><li><a href="https://marketplace.visualstudio.com/items?itemName=alexisvt.flutter-snippets" target="_blank" rel="noopener">Flutter Widget Snippets</a></li><li><a href="https://marketplace.visualstudio.com/items?itemName=Nash.awesome-flutter-snippets" target="_blank" rel="noopener">Awesome Flutter Snippets</a></li><li><a href="https://marketplace.visualstudio.com/items?itemName=quicktype.quicktype" target="_blank" rel="noopener">Paste JSON as Code</a></li><li><a href="https://marketplace.visualstudio.com/items?itemName=FelixAngelov.bloc" target="_blank" rel="noopener">bloc</a></li><li><a href="https://marketplace.visualstudio.com/items?itemName=streetsidesoftware.code-spell-checker" target="_blank" rel="noopener">Code Spell Checker</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="Flutter 实战从零开始" scheme="https://blog.ducafecat.tech/categories/Flutter-%E5%AE%9E%E6%88%98%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 实战从零开始 新闻客户端 - 08 路由管理 auto_route</title>
    <link href="https://blog.ducafecat.tech/2020/04/17/flutter-project/flutter-project-news-08-auto-route/"/>
    <id>https://blog.ducafecat.tech/2020/04/17/flutter-project/flutter-project-news-08-auto-route/</id>
    <published>2020-04-16T16:00:00.000Z</published>
    <updated>2020-07-04T06:33:27.703Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="bg.jpg" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>安装插件</li><li>路由定义</li><li>自动生成路由控制类</li><li>转场动画</li><li>登录检查中间件</li><li>带参数传递</li><li>获取返回值</li></ul><h2 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h2><iframe src="//player.bilibili.com/player.html?bvid=BV1xf4y1S7Xq&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" height="400px"> </iframe><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/ducafecat/flutter_learn_news/releases/tag/v1.0.8" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news/releases/tag/v1.0.8</a></p><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><h3 id="一些优秀的路由插件"><a href="#一些优秀的路由插件" class="headerlink" title="一些优秀的路由插件"></a>一些优秀的路由插件</h3><ul><li><p><a href="https://pub.flutter-io.cn/packages/fluro" target="_blank" rel="noopener">fluro</a></p><p>前端的使用体验</p><p>router.navigateTo(context, “/users/1234”, transition: TransitionType.fadeIn);</p></li><li><p><a href="https://pub.flutter-io.cn/packages/flutter_modular" target="_blank" rel="noopener">flutter_modular</a></p><p>功能强大的路由管理：中间件、懒加载、状态管理、动态路由、分组路由、动画、返回值、命名路由</p></li><li><p><a href="https://pub.flutter-io.cn/packages/auto_route" target="_blank" rel="noopener">auto_route</a></p><p>设计精简、低耦合其它功能</p><p>功能：中间件、自动生成路由代码、动态路由、动画、返回值、命名路由</p></li></ul><h3 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h3><ul><li>官网</li></ul><p><a href="https://pub.flutter-io.cn/packages/auto_route" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/auto_route</a></p><ul><li>pubspec.yaml</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dependencies:</span></span><br><span class="line"><span class="attr">  flutter:</span></span><br><span class="line"><span class="attr">    sdk:</span> <span class="string">flutter</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># 路由管理</span></span><br><span class="line"><span class="attr">  auto_route:</span> <span class="string">^0.4.4</span></span><br><span class="line"></span><br><span class="line"><span class="attr">dev_dependencies:</span></span><br><span class="line"><span class="attr">  flutter_test:</span></span><br><span class="line"><span class="attr">    sdk:</span> <span class="string">flutter</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># 路由生成</span></span><br><span class="line"><span class="attr">  auto_route_generator:</span> <span class="string">^0.4.4</span></span><br><span class="line"><span class="attr">  build_runner:</span></span><br></pre></td></tr></table></figure><h3 id="路由定义"><a href="#路由定义" class="headerlink" title="路由定义"></a>路由定义</h3><ul><li>lib/common/router/router.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@MaterialAutoRouter</span>()</span><br><span class="line"><span class="class"><span class="keyword">class</span> $<span class="title">AppRouter</span> </span>&#123;</span><br><span class="line">  <span class="meta">@initial</span></span><br><span class="line">  IndexPage indexPageRoute;</span><br><span class="line"></span><br><span class="line">  WelcomePage welcomePageRoute;</span><br><span class="line"></span><br><span class="line">  SignInPage signInPageRoute;</span><br><span class="line"></span><br><span class="line">  SignUpPage signUpPageRoute;</span><br><span class="line"></span><br><span class="line">  ApplicationPage applicationPageRoute;</span><br><span class="line"></span><br><span class="line">  DetailsPage detailsPageRoute;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>注意 <code>$</code> 符号</p></blockquote><h3 id="自动生成路由控制类"><a href="#自动生成路由控制类" class="headerlink" title="自动生成路由控制类"></a>自动生成路由控制类</h3><ul><li>执行命令</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter packages pub run build_runner build</span><br></pre></td></tr></table></figure><ul><li>自动生成 lib/common/router/router.gr.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// GENERATED CODE - DO NOT MODIFY BY HAND</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// **************************************************************************</span></span><br><span class="line"><span class="comment">// AutoRouteGenerator</span></span><br><span class="line"><span class="comment">// **************************************************************************</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/cupertino.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:auto_route/auto_route.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/pages/index/index.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/pages/welcome/welcome.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/pages/sign_in/sign_in.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/pages/sign_up/sign_up.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/pages/application/application.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/common/router/auth_grard.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/pages/details/details.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Routes</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> indexPageRoute = <span class="string">'/'</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> welcomePageRoute = <span class="string">'/welcome-page-route'</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> signInPageRoute = <span class="string">'/sign-in-page-route'</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> signUpPageRoute = <span class="string">'/sign-up-page-route'</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> applicationPageRoute = <span class="string">'/application-page-route'</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> detailsPageRoute = <span class="string">'/details-page-route'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AppRouter</span> <span class="keyword">extends</span> <span class="title">RouterBase</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">List</span>&lt;<span class="built_in">Type</span>&gt;&gt; <span class="keyword">get</span> guardedRoutes =&gt; &#123;</span><br><span class="line">        Routes.applicationPageRoute: [AuthGuard],</span><br><span class="line">        Routes.detailsPageRoute: [AuthGuard],</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//This will probably be removed in future versions</span></span><br><span class="line">  <span class="comment">//you should call ExtendedNavigator.ofRouter&lt;Router&gt;() directly</span></span><br><span class="line">  <span class="keyword">static</span> ExtendedNavigatorState <span class="keyword">get</span> navigator =&gt;</span><br><span class="line">      ExtendedNavigator.ofRouter&lt;AppRouter&gt;();</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Route&lt;<span class="keyword">dynamic</span>&gt; onGenerateRoute(RouteSettings settings) &#123;</span><br><span class="line">    <span class="keyword">final</span> args = settings.arguments;</span><br><span class="line">    <span class="keyword">switch</span> (settings.name) &#123;</span><br><span class="line">      <span class="keyword">case</span> Routes.indexPageRoute:</span><br><span class="line">        <span class="keyword">if</span> (hasInvalidArgs&lt;IndexPageArguments&gt;(args)) &#123;</span><br><span class="line">          <span class="keyword">return</span> misTypedArgsRoute&lt;IndexPageArguments&gt;(args);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">final</span> typedArgs = args <span class="keyword">as</span> IndexPageArguments ?? IndexPageArguments();</span><br><span class="line">        <span class="keyword">return</span> MaterialPageRoute&lt;<span class="keyword">dynamic</span>&gt;(</span><br><span class="line">          builder: (_) =&gt; IndexPage(key: typedArgs.key),</span><br><span class="line">          settings: settings,</span><br><span class="line">        );</span><br><span class="line">      <span class="keyword">case</span> Routes.welcomePageRoute:</span><br><span class="line">        <span class="keyword">if</span> (hasInvalidArgs&lt;WelcomePageArguments&gt;(args)) &#123;</span><br><span class="line">          <span class="keyword">return</span> misTypedArgsRoute&lt;WelcomePageArguments&gt;(args);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">final</span> typedArgs =</span><br><span class="line">            args <span class="keyword">as</span> WelcomePageArguments ?? WelcomePageArguments();</span><br><span class="line">        <span class="keyword">return</span> MaterialPageRoute&lt;<span class="keyword">dynamic</span>&gt;(</span><br><span class="line">          builder: (_) =&gt; WelcomePage(key: typedArgs.key),</span><br><span class="line">          settings: settings,</span><br><span class="line">        );</span><br><span class="line">      <span class="keyword">case</span> Routes.signInPageRoute:</span><br><span class="line">        <span class="keyword">if</span> (hasInvalidArgs&lt;SignInPageArguments&gt;(args)) &#123;</span><br><span class="line">          <span class="keyword">return</span> misTypedArgsRoute&lt;SignInPageArguments&gt;(args);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">final</span> typedArgs = args <span class="keyword">as</span> SignInPageArguments ?? SignInPageArguments();</span><br><span class="line">        <span class="keyword">return</span> MaterialPageRoute&lt;<span class="keyword">dynamic</span>&gt;(</span><br><span class="line">          builder: (_) =&gt; SignInPage(key: typedArgs.key),</span><br><span class="line">          settings: settings,</span><br><span class="line">        );</span><br><span class="line">      <span class="keyword">case</span> Routes.signUpPageRoute:</span><br><span class="line">        <span class="keyword">if</span> (hasInvalidArgs&lt;SignUpPageArguments&gt;(args)) &#123;</span><br><span class="line">          <span class="keyword">return</span> misTypedArgsRoute&lt;SignUpPageArguments&gt;(args);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">final</span> typedArgs = args <span class="keyword">as</span> SignUpPageArguments ?? SignUpPageArguments();</span><br><span class="line">        <span class="keyword">return</span> MaterialPageRoute&lt;<span class="keyword">dynamic</span>&gt;(</span><br><span class="line">          builder: (_) =&gt; SignUpPage(key: typedArgs.key),</span><br><span class="line">          settings: settings,</span><br><span class="line">        );</span><br><span class="line">      <span class="keyword">case</span> Routes.applicationPageRoute:</span><br><span class="line">        <span class="keyword">if</span> (hasInvalidArgs&lt;ApplicationPageArguments&gt;(args)) &#123;</span><br><span class="line">          <span class="keyword">return</span> misTypedArgsRoute&lt;ApplicationPageArguments&gt;(args);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">final</span> typedArgs =</span><br><span class="line">            args <span class="keyword">as</span> ApplicationPageArguments ?? ApplicationPageArguments();</span><br><span class="line">        <span class="keyword">return</span> MaterialPageRoute&lt;<span class="keyword">dynamic</span>&gt;(</span><br><span class="line">          builder: (_) =&gt; ApplicationPage(key: typedArgs.key),</span><br><span class="line">          settings: settings,</span><br><span class="line">        );</span><br><span class="line">      <span class="keyword">case</span> Routes.detailsPageRoute:</span><br><span class="line">        <span class="keyword">if</span> (hasInvalidArgs&lt;DetailsPageArguments&gt;(args)) &#123;</span><br><span class="line">          <span class="keyword">return</span> misTypedArgsRoute&lt;DetailsPageArguments&gt;(args);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">final</span> typedArgs =</span><br><span class="line">            args <span class="keyword">as</span> DetailsPageArguments ?? DetailsPageArguments();</span><br><span class="line">        <span class="keyword">return</span> MaterialPageRoute&lt;<span class="keyword">dynamic</span>&gt;(</span><br><span class="line">          builder: (_) =&gt; DetailsPage(key: typedArgs.key),</span><br><span class="line">          settings: settings,</span><br><span class="line">        );</span><br><span class="line">      <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">return</span> unknownRoutePage(settings.name);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//**************************************************************************</span></span><br><span class="line"><span class="comment">// Arguments holder classes</span></span><br><span class="line"><span class="comment">//***************************************************************************</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//IndexPage arguments holder class</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IndexPageArguments</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> Key key;</span><br><span class="line">  IndexPageArguments(&#123;<span class="keyword">this</span>.key&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//WelcomePage arguments holder class</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WelcomePageArguments</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> Key key;</span><br><span class="line">  WelcomePageArguments(&#123;<span class="keyword">this</span>.key&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//SignInPage arguments holder class</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SignInPageArguments</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> Key key;</span><br><span class="line">  SignInPageArguments(&#123;<span class="keyword">this</span>.key&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//SignUpPage arguments holder class</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SignUpPageArguments</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> Key key;</span><br><span class="line">  SignUpPageArguments(&#123;<span class="keyword">this</span>.key&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ApplicationPage arguments holder class</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ApplicationPageArguments</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> Key key;</span><br><span class="line">  ApplicationPageArguments(&#123;<span class="keyword">this</span>.key&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//DetailsPage arguments holder class</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DetailsPageArguments</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> Key key;</span><br><span class="line">  DetailsPageArguments(&#123;<span class="keyword">this</span>.key&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="路由跳转"><a href="#路由跳转" class="headerlink" title="路由跳转"></a>路由跳转</h3><ul><li>方式 1：带 context 方式</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ExtendedNavigator.of(context).pushNamed(Routes.signUpPageRoute);</span><br></pre></td></tr></table></figure><ul><li>方式 2：不带 context 方式</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ExtendedNavigator.ofRouter&lt;AppRouter&gt;().pushNamed(Routes.signUpPageRoute);</span><br></pre></td></tr></table></figure><ul><li>方式 3：如果你只有一个导航</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ExtenedNavigator.rootNavigator.pushNamed(Routes.signUpPageRoute);</span><br></pre></td></tr></table></figure><h3 id="转场动画"><a href="#转场动画" class="headerlink" title="转场动画"></a>转场动画</h3><ul><li>lib/common/router/router.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Widget zoomInTransition(BuildContext context, Animation&lt;<span class="built_in">double</span>&gt; animation,</span><br><span class="line">    Animation&lt;<span class="built_in">double</span>&gt; secondaryAnimation, Widget child) &#123;</span><br><span class="line">  <span class="comment">// you get an animation object and a widget</span></span><br><span class="line">  <span class="comment">// make your own transition</span></span><br><span class="line">  <span class="keyword">return</span> ScaleTransition(scale: animation, child: child);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@MaterialAutoRouter</span>()</span><br><span class="line"><span class="class"><span class="keyword">class</span> $<span class="title">AppRouter</span> </span>&#123;</span><br><span class="line">  ...</span><br><span class="line"></span><br><span class="line">  <span class="meta">@CustomRoute</span>(transitionsBuilder: zoomInTransition)</span><br><span class="line">  ApplicationPage applicationPageRoute;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>重新生成</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter packages pub run build_runner build</span><br></pre></td></tr></table></figure><h3 id="登录检查中间件"><a href="#登录检查中间件" class="headerlink" title="登录检查中间件"></a>登录检查中间件</h3><ul><li>创建 lib/common/router/auth_grard.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:auto_route/auto_route.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/common/router/router.gr.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/common/utils/utils.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AuthGuard</span> <span class="keyword">extends</span> <span class="title">RouteGuard</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Future&lt;<span class="built_in">bool</span>&gt; canNavigate(ExtendedNavigatorState navigator, <span class="built_in">String</span> routeName,</span><br><span class="line">      <span class="built_in">Object</span> arguments) <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> isAuth = <span class="keyword">await</span> isAuthenticated();</span><br><span class="line">    <span class="keyword">if</span> (isAuth == <span class="keyword">false</span>) &#123;</span><br><span class="line">      ExtendedNavigator.rootNavigator.pushNamed(Routes.signInPageRoute);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> isAuth;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>注册 lib/main.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      title: <span class="string">'ducafecat.tech'</span>,</span><br><span class="line">      debugShowCheckedModeBanner: <span class="keyword">false</span>,</span><br><span class="line">      builder: ExtendedNavigator&lt;AppRouter&gt;(</span><br><span class="line">        initialRoute: Routes.indexPageRoute,</span><br><span class="line">        router: AppRouter(),</span><br><span class="line">        guards: [AuthGuard()],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>定义 lib/common/router/router.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@MaterialAutoRouter</span>()</span><br><span class="line"><span class="class"><span class="keyword">class</span> $<span class="title">AppRouter</span> </span>&#123;</span><br><span class="line">  ...</span><br><span class="line"></span><br><span class="line">  <span class="meta">@GuardedBy</span>([AuthGuard])</span><br><span class="line">  <span class="meta">@CustomRoute</span>(transitionsBuilder: zoomInTransition)</span><br><span class="line">  ApplicationPage applicationPageRoute;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>重新生成</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter packages pub run build_runner build</span><br></pre></td></tr></table></figure><h2 id="参数传递"><a href="#参数传递" class="headerlink" title="参数传递"></a>参数传递</h2><ul><li>设定初始参数 lib/pages/details/details.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DetailsPage</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> cid;</span><br><span class="line">  DetailsPage(&#123;Key key, <span class="keyword">this</span>.cid&#125;) : <span class="keyword">super</span>(key: key);</span><br></pre></td></tr></table></figure><ul><li>定义 lib/common/router/router.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@MaterialAutoRouter</span>(generateNavigationHelperExtension: <span class="keyword">true</span>)</span><br><span class="line"><span class="class"><span class="keyword">class</span> $<span class="title">AppRouter</span> </span>&#123;</span><br><span class="line">  ...</span><br></pre></td></tr></table></figure><ul><li>重新生成</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter packages pub run build_runner build</span><br></pre></td></tr></table></figure><ul><li>lib/common/router/router.gr.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//DetailsPage arguments holder class</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DetailsPageArguments</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> Key key;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> cid;</span><br><span class="line">  DetailsPageArguments(&#123;<span class="keyword">this</span>.key, <span class="keyword">this</span>.cid&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>导航参数</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ExtendedNavigator.rootNavigator.pushDetailsPageRoute(cid: <span class="string">'123'</span>);</span><br></pre></td></tr></table></figure><ul><li>获取返回值</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ExtendedNavigator.rootNavigator</span><br><span class="line">    .pushNamed(Routes.signUpPageRoute)</span><br><span class="line">    .then((onValue) &#123;</span><br><span class="line">  <span class="built_in">print</span>(onValue);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="资源"><a href="#资源" class="headerlink" title="资源"></a>资源</h2><h3 id="视频-1"><a href="#视频-1" class="headerlink" title="视频"></a>视频</h3><ul><li><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">b 站</a></li><li><a href="https://www.youtube.com/watch?v=Uucg6GGGBsY&amp;list=PL274L1n86T80VZR30KaLOKV6jqwTq5E8D" target="_blank" rel="noopener">油管镜像</a></li></ul><h3 id="蓝湖设计稿（加微信给授权-ducafecat）"><a href="#蓝湖设计稿（加微信给授权-ducafecat）" class="headerlink" title="蓝湖设计稿（加微信给授权 ducafecat）"></a>蓝湖设计稿（加微信给授权 ducafecat）</h3><p><a href="https://lanhuapp.com/url/lYuz1" target="_blank" rel="noopener">https://lanhuapp.com/url/lYuz1</a><br>密码: gSKl</p><blockquote><p>蓝湖现在收费了，所以查看标记还请自己上传 xd 设计稿<br>商业设计稿文件不好直接分享, 可以加微信联系 ducafecat</p></blockquote><h3 id="YAPI-接口管理"><a href="#YAPI-接口管理" class="headerlink" title="YAPI 接口管理"></a>YAPI 接口管理</h3><p><a href="http://yapi.demo.qunar.com/" target="_blank" rel="noopener">http://yapi.demo.qunar.com/</a></p><h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p><a href="https://pub.flutter-io.cn/packages/auto_route" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/auto_route</a></p><h3 id="VSCode-插件"><a href="#VSCode-插件" class="headerlink" title="VSCode 插件"></a>VSCode 插件</h3><ul><li>Flutter、Dart</li><li><a href="https://marketplace.visualstudio.com/items?itemName=alexisvt.flutter-snippets" target="_blank" rel="noopener">Flutter Widget Snippets</a></li><li><a href="https://marketplace.visualstudio.com/items?itemName=Nash.awesome-flutter-snippets" target="_blank" rel="noopener">Awesome Flutter Snippets</a></li><li><a href="https://marketplace.visualstudio.com/items?itemName=quicktype.quicktype" target="_blank" rel="noopener">Paste JSON as Code</a></li><li><a href="https://marketplace.visualstudio.com/items?itemName=FelixAngelov.bloc" target="_blank" rel="noopener">bloc</a></li><li><a href="https://marketplace.visualstudio.com/items?itemName=streetsidesoftware.code-spell-checker" target="_blank" rel="noopener">Code Spell Checker</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="Flutter 实战从零开始" scheme="https://blog.ducafecat.tech/categories/Flutter-%E5%AE%9E%E6%88%98%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 实战从零开始 新闻客户端 - 07 Provider、认证授权、骨架屏、磁盘缓存</title>
    <link href="https://blog.ducafecat.tech/2020/04/08/flutter-project/flutter-project-news-07-provider/"/>
    <id>https://blog.ducafecat.tech/2020/04/08/flutter-project/flutter-project-news-07-provider/</id>
    <published>2020-04-07T16:00:00.000Z</published>
    <updated>2020-07-04T06:29:29.891Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="bg.jpg" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h2><ul><li>第一次登录显示欢迎界面</li><li>离线登录</li><li>Provider 响应数据管理</li><li>实现 APP 色彩灰度处理</li><li>注销登录</li><li>Http Status 401 认证授权</li><li>首页磁盘缓存</li><li>首页缓存策略，延迟 1~3 秒</li><li>首页骨架屏</li></ul><h2 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h2><iframe src="//player.bilibili.com/player.html?bvid=BV1vV411o7bn&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" height="400px"> </iframe><iframe src="//player.bilibili.com/player.html?bvid=BV1SA411t7ov&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" height="400px"> </iframe><iframe src="//player.bilibili.com/player.html?bvid=BV1jt4y1U7Nn&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" height="400px"> </iframe><iframe src="//player.bilibili.com/player.html?bvid=BV1wt4y127L5&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" height="400px"> </iframe><iframe src="//player.bilibili.com/player.html?bvid=BV1b54y1d7DB&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" height="400px"> </iframe><iframe src="//player.bilibili.com/player.html?bvid=BV11z411b7FJ&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" height="400px"> </iframe><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/ducafecat/flutter_learn_news/releases/tag/v1.0.7" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news/releases/tag/v1.0.7</a></p><h2 id="视频-1"><a href="#视频-1" class="headerlink" title="视频"></a>视频</h2><ul><li><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">b 站</a></li><li><a href="https://www.youtube.com/watch?v=Uucg6GGGBsY&amp;list=PL274L1n86T80VZR30KaLOKV6jqwTq5E8D" target="_blank" rel="noopener">油管镜像</a></li></ul><h2 id="资源"><a href="#资源" class="headerlink" title="资源"></a>资源</h2><ul><li><p>蓝湖设计稿（加微信给授权 ducafecat）<br><a href="https://lanhuapp.com/url/wbhGq" target="_blank" rel="noopener">https://lanhuapp.com/url/wbhGq</a></p></li><li><p>YAPI 接口管理<br><a href="http://yapi.demo.qunar.com/" target="_blank" rel="noopener">http://yapi.demo.qunar.com/</a></p></li><li><p>代码<br><a href="https://github.com/ducafecat/flutter_learn_news/releases/tag/v1.0.7" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news/releases/tag/v1.0.7</a></p></li><li><p>参考</p><ul><li><a href="https://pub.flutter-io.cn/packages/provider" target="_blank" rel="noopener">provider</a></li><li><a href="https://pub.flutter-io.cn/packages/pk_skeleton" target="_blank" rel="noopener">pk_skeleton</a></li></ul></li></ul><h2 id="第一次显示欢迎界面、离线登录"><a href="#第一次显示欢迎界面、离线登录" class="headerlink" title="第一次显示欢迎界面、离线登录"></a>第一次显示欢迎界面、离线登录</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-04-08-22-08-21.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>lib/global.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="markdown">/// 是否第一次打开</span></span></span><br><span class="line"><span class="keyword">static</span> <span class="built_in">bool</span> isFirstOpen = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="markdown">/// 是否离线登录</span></span></span><br><span class="line"><span class="keyword">static</span> <span class="built_in">bool</span> isOfflineLogin = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="markdown">/// init</span></span></span><br><span class="line"><span class="keyword">static</span> Future init() <span class="keyword">async</span> &#123;</span><br><span class="line">  ...</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 读取设备第一次打开</span></span><br><span class="line">  isFirstOpen = !StorageUtil().getBool(STORAGE_DEVICE_ALREADY_OPEN_KEY);</span><br><span class="line">  <span class="keyword">if</span> (isFirstOpen) &#123;</span><br><span class="line">    StorageUtil().setBool(STORAGE_DEVICE_ALREADY_OPEN_KEY, <span class="keyword">true</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 读取离线用户信息</span></span><br><span class="line">  <span class="keyword">var</span> _profileJSON = StorageUtil().getJSON(STORAGE_USER_PROFILE_KEY);</span><br><span class="line">  <span class="keyword">if</span> (_profileJSON != <span class="keyword">null</span>) &#123;</span><br><span class="line">    profile = UserLoginResponseEntity.fromJson(_profileJSON);</span><br><span class="line">    isOfflineLogin = <span class="keyword">true</span>;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><ul><li>lib/pages/index/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IndexPage</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  IndexPage(&#123;Key key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _IndexPageState createState() =&gt; _IndexPageState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_IndexPageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">IndexPage</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    ScreenUtil.init(</span><br><span class="line">      context,</span><br><span class="line">      width: <span class="number">375</span>,</span><br><span class="line">      height: <span class="number">812</span> - <span class="number">44</span> - <span class="number">34</span>,</span><br><span class="line">      allowFontScaling: <span class="keyword">true</span>,</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      body: Global.isFirstOpen == <span class="keyword">true</span></span><br><span class="line">          ? WelcomePage()</span><br><span class="line">          : Global.isOfflineLogin == <span class="keyword">true</span> ? ApplicationPage() : SignInPage(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Provider-实现动态灰度处理"><a href="#Provider-实现动态灰度处理" class="headerlink" title="Provider 实现动态灰度处理"></a>Provider 实现动态灰度处理</h2><p><a href="https://pub.flutter-io.cn/packages/provider" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/provider</a></p><h3 id="步骤-1：安装依赖"><a href="#步骤-1：安装依赖" class="headerlink" title="步骤 1：安装依赖"></a>步骤 1：安装依赖</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dependencies:</span></span><br><span class="line"><span class="attr">  provider:</span> <span class="string">^4.0.4</span></span><br></pre></td></tr></table></figure><h3 id="步骤-2：创建响应数据类"><a href="#步骤-2：创建响应数据类" class="headerlink" title="步骤 2：创建响应数据类"></a>步骤 2：创建响应数据类</h3><ul><li>lib/common/provider/app.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="markdown">/// 系统相应状态</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AppState</span> <span class="title">with</span> <span class="title">ChangeNotifier</span> </span>&#123;</span><br><span class="line">  <span class="built_in">bool</span> _isGrayFilter;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">get</span> isGrayFilter =&gt; _isGrayFilter;</span><br><span class="line"></span><br><span class="line">  AppState(&#123;<span class="built_in">bool</span> isGrayFilter = <span class="keyword">false</span>&#125;) &#123;</span><br><span class="line">    <span class="keyword">this</span>._isGrayFilter = isGrayFilter;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="步骤-3：初始响应数据"><a href="#步骤-3：初始响应数据" class="headerlink" title="步骤 3：初始响应数据"></a>步骤 3：初始响应数据</h3><h4 id="方式一：先创建数据对象，再挂载"><a href="#方式一：先创建数据对象，再挂载" class="headerlink" title="方式一：先创建数据对象，再挂载"></a>方式一：先创建数据对象，再挂载</h4><ul><li>lib/global.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="markdown">/// 应用状态</span></span></span><br><span class="line"><span class="keyword">static</span> AppState appState = AppState();</span><br></pre></td></tr></table></figure><ul><li>lib/main.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main() =&gt; Global.init().then((e) =&gt; runApp(</span><br><span class="line">      MultiProvider(</span><br><span class="line">        providers: [</span><br><span class="line">          ChangeNotifierProvider&lt;AppState&gt;.value(</span><br><span class="line">            value: Global.appState,</span><br><span class="line">          ),</span><br><span class="line">        ],</span><br><span class="line">        child: MyApp(),</span><br><span class="line">      ),</span><br><span class="line">    ));</span><br></pre></td></tr></table></figure><h4 id="方式二：挂载时，创建对象"><a href="#方式二：挂载时，创建对象" class="headerlink" title="方式二：挂载时，创建对象"></a>方式二：挂载时，创建对象</h4><ul><li>lib/main.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main() =&gt; Global.init().then((e) =&gt; runApp(</span><br><span class="line">      MultiProvider(</span><br><span class="line">        providers: [</span><br><span class="line">          ChangeNotifierProvider&lt;AppState&gt;(</span><br><span class="line">            Create: (_) =&gt; <span class="keyword">new</span> AppState(),</span><br><span class="line">          ),</span><br><span class="line">        ],</span><br><span class="line">        child: MyApp(),</span><br><span class="line">      ),</span><br><span class="line">    ));</span><br></pre></td></tr></table></figure><h3 id="步骤-4：通知数据发声变化"><a href="#步骤-4：通知数据发声变化" class="headerlink" title="步骤 4：通知数据发声变化"></a>步骤 4：通知数据发声变化</h3><ul><li>lib/common/provider/app.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AppState</span> <span class="title">with</span> <span class="title">ChangeNotifier</span> </span>&#123;</span><br><span class="line">  ...</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 切换灰色滤镜</span></span><br><span class="line">  switchGrayFilter() &#123;</span><br><span class="line">    _isGrayFilter = !_isGrayFilter;</span><br><span class="line">    notifyListeners();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="步骤-5：收到数据发声变化"><a href="#步骤-5：收到数据发声变化" class="headerlink" title="步骤 5：收到数据发声变化"></a>步骤 5：收到数据发声变化</h3><h4 id="方式一：Consumer"><a href="#方式一：Consumer" class="headerlink" title="方式一：Consumer"></a>方式一：Consumer</h4><ul><li>lib/main.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main() =&gt; Global.init().then((e) =&gt; runApp(</span><br><span class="line">      MultiProvider(</span><br><span class="line">        providers: [</span><br><span class="line">          ChangeNotifierProvider&lt;AppState&gt;.value(</span><br><span class="line">            value: Global.appState,</span><br><span class="line">          ),</span><br><span class="line">        ],</span><br><span class="line">        child: Consumer&lt;AppState&gt;(builder: (context, appState, _) &#123;</span><br><span class="line">          <span class="keyword">if</span> (appState.isGrayFilter) &#123;</span><br><span class="line">            <span class="keyword">return</span> ColorFiltered(</span><br><span class="line">              colorFilter: ColorFilter.mode(Colors.white, BlendMode.color),</span><br><span class="line">              child: MyApp(),</span><br><span class="line">            );</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> MyApp();</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;),</span><br><span class="line">      ),</span><br><span class="line">    ));</span><br></pre></td></tr></table></figure><h4 id="方式二：Provider-of"><a href="#方式二：Provider-of" class="headerlink" title="方式二：Provider.of"></a>方式二：Provider.of</h4><ul><li>lib/pages/account/account.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> appState = Provider.of&lt;AppState&gt;(context);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> Column(</span><br><span class="line">  children: &lt;Widget&gt;[</span><br><span class="line">    MaterialButton(</span><br><span class="line">      onPressed: () &#123;</span><br><span class="line">        appState.switchGrayFilter();</span><br><span class="line">      &#125;,</span><br><span class="line">      child: Text(<span class="string">'灰色切换 <span class="subst">$&#123;appState.isGrayFilter&#125;</span>'</span>),</span><br><span class="line">    ),</span><br><span class="line">  ],</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="多个响应数据处理"><a href="#多个响应数据处理" class="headerlink" title="多个响应数据处理"></a>多个响应数据处理</h3><ul><li><p>挂载用 MultiProvider</p></li><li><p>接收用 Consumer2 ~ Consumer6</p></li></ul><h2 id="注销登录"><a href="#注销登录" class="headerlink" title="注销登录"></a>注销登录</h2><ul><li>lib/common/utils/authentication.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="markdown">/// 检查是否有 token</span></span></span><br><span class="line">Future&lt;<span class="built_in">bool</span>&gt; isAuthenticated() <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="keyword">var</span> profileJSON = StorageUtil().getJSON(STORAGE_USER_PROFILE_KEY);</span><br><span class="line">  <span class="keyword">return</span> profileJSON != <span class="keyword">null</span> ? <span class="keyword">true</span> : <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="markdown">/// 删除缓存 token</span></span></span><br><span class="line">Future deleteAuthentication() <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="keyword">await</span> StorageUtil().remove(STORAGE_USER_PROFILE_KEY);</span><br><span class="line">  Global.profile = <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="markdown">/// 重新登录</span></span></span><br><span class="line">Future goLoginPage(BuildContext context) <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="keyword">await</span> deleteAuthentication();</span><br><span class="line">  Navigator.pushNamedAndRemoveUntil(</span><br><span class="line">      context, <span class="string">"/sign-in"</span>, (Route&lt;<span class="keyword">dynamic</span>&gt; route) =&gt; <span class="keyword">false</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>lib/pages/account/account.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_AccountPageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">AccountPage</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">final</span> appState = Provider.of&lt;AppState&gt;(context);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> Column(</span><br><span class="line">      children: &lt;Widget&gt;[</span><br><span class="line">        Text(<span class="string">'用户: <span class="subst">$&#123;Global.profile.displayName&#125;</span>'</span>),</span><br><span class="line">        Divider(),</span><br><span class="line">        MaterialButton(</span><br><span class="line">          onPressed: () &#123;</span><br><span class="line">            goLoginPage(context);</span><br><span class="line">          &#125;,</span><br><span class="line">          child: Text(<span class="string">'退出'</span>),</span><br><span class="line">        ),</span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Http-Status-401-认证授权"><a href="#Http-Status-401-认证授权" class="headerlink" title="Http Status 401 认证授权"></a>Http Status 401 认证授权</h2><h3 id="dio-封装界面的上下文对象-BuildContext-context"><a href="#dio-封装界面的上下文对象-BuildContext-context" class="headerlink" title="dio 封装界面的上下文对象 BuildContext context"></a>dio 封装界面的上下文对象 BuildContext context</h3><ul><li>lib/common/utils/http.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Future post(</span><br><span class="line">  <span class="built_in">String</span> path, &#123;</span><br><span class="line">  <span class="meta">@required</span> BuildContext context,</span><br><span class="line">  <span class="keyword">dynamic</span> params,</span><br><span class="line">  Options options,</span><br><span class="line">&#125;) <span class="keyword">async</span> &#123;</span><br><span class="line">  Options requestOptions = options ?? Options();</span><br><span class="line">  requestOptions = requestOptions.merge(extra: &#123;</span><br><span class="line">    <span class="string">"context"</span>: context,</span><br><span class="line">  &#125;);</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="错误处理-401-去登录界面"><a href="#错误处理-401-去登录界面" class="headerlink" title="错误处理 401 去登录界面"></a>错误处理 401 去登录界面</h3><ul><li>lib/common/utils/http.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 添加拦截器</span></span><br><span class="line">dio.interceptors</span><br><span class="line">    .add(InterceptorsWrapper(onRequest: (RequestOptions options) &#123;</span><br><span class="line">  <span class="keyword">return</span> options; <span class="comment">//continue</span></span><br><span class="line">&#125;, onResponse: (Response response) &#123;</span><br><span class="line">  <span class="keyword">return</span> response; <span class="comment">// continue</span></span><br><span class="line">&#125;, onError: (DioError e) &#123;</span><br><span class="line">  ErrorEntity eInfo = createErrorEntity(e);</span><br><span class="line">  <span class="comment">// 错误提示</span></span><br><span class="line">  toastInfo(msg: eInfo.message);</span><br><span class="line">  <span class="comment">// 错误交互处理</span></span><br><span class="line">  <span class="keyword">var</span> context = e.request.extra[<span class="string">"context"</span>];</span><br><span class="line">  <span class="keyword">if</span> (context != <span class="keyword">null</span>) &#123;</span><br><span class="line">    <span class="keyword">switch</span> (eInfo.code) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">401</span>: <span class="comment">// 没有权限 重新登录</span></span><br><span class="line">        goLoginPage(context);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">default</span>:</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> eInfo;</span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure><h2 id="首页磁盘缓存"><a href="#首页磁盘缓存" class="headerlink" title="首页磁盘缓存"></a>首页磁盘缓存</h2><ul><li>lib/common/utils/net_cache.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 策略 1 内存缓存优先，2 然后才是磁盘缓存</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1 内存缓存</span></span><br><span class="line"><span class="keyword">var</span> ob = cache[key];</span><br><span class="line"><span class="keyword">if</span> (ob != <span class="keyword">null</span>) &#123;</span><br><span class="line">  <span class="comment">//若缓存未过期，则返回缓存内容</span></span><br><span class="line">  <span class="keyword">if</span> ((<span class="built_in">DateTime</span>.now().millisecondsSinceEpoch - ob.timeStamp) / <span class="number">1000</span> &lt;</span><br><span class="line">      CACHE_MAXAGE) &#123;</span><br><span class="line">    <span class="keyword">return</span> cache[key].response;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">//若已过期则删除缓存，继续向服务器请求</span></span><br><span class="line">    cache.remove(key);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2 磁盘缓存</span></span><br><span class="line"><span class="keyword">if</span> (cacheDisk) &#123;</span><br><span class="line">  <span class="keyword">var</span> cacheData = StorageUtil().getJSON(key);</span><br><span class="line">  <span class="keyword">if</span> (cacheData != <span class="keyword">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> Response(</span><br><span class="line">      statusCode: <span class="number">200</span>,</span><br><span class="line">      data: cacheData,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="首页缓存策略，延迟-1-3-秒"><a href="#首页缓存策略，延迟-1-3-秒" class="headerlink" title="首页缓存策略，延迟 1~3 秒"></a>首页缓存策略，延迟 1~3 秒</h2><ul><li>lib/pages/main/channels_widget.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 如果有磁盘缓存，延迟3秒拉取更新档案</span></span><br><span class="line">_loadLatestWithDiskCache() &#123;</span><br><span class="line">  <span class="keyword">if</span> (CACHE_ENABLE == <span class="keyword">true</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> cacheData = StorageUtil().getJSON(STORAGE_INDEX_NEWS_CACHE_KEY);</span><br><span class="line">    <span class="keyword">if</span> (cacheData != <span class="keyword">null</span>) &#123;</span><br><span class="line">      Timer(<span class="built_in">Duration</span>(seconds: <span class="number">3</span>), () &#123;</span><br><span class="line">        _controller.callRefresh();</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="首页骨架屏"><a href="#首页骨架屏" class="headerlink" title="首页骨架屏"></a>首页骨架屏</h2><p><a href="https://pub.flutter-io.cn/packages/pk_skeleton" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/pk_skeleton</a></p><ul><li>lib/pages/main/main.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@override</span></span><br><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">  <span class="keyword">return</span> _newsPageList == <span class="keyword">null</span></span><br><span class="line">      ? cardListSkeleton()</span><br><span class="line">      : EasyRefresh(</span><br><span class="line">          enableControlFinishRefresh: <span class="keyword">true</span>,</span><br><span class="line">          controller: _controller,</span><br><span class="line">          ...</span><br></pre></td></tr></table></figure><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="Flutter 实战从零开始" scheme="https://blog.ducafecat.tech/categories/Flutter-%E5%AE%9E%E6%88%98%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 实战从零开始 新闻客户端 - 06 代码规范、业务代码组织、新闻首页实现</title>
    <link href="https://blog.ducafecat.tech/2020/03/31/flutter-project/flutter-project-news-06-main-ui/"/>
    <id>https://blog.ducafecat.tech/2020/03/31/flutter-project/flutter-project-news-06-main-ui/</id>
    <published>2020-03-30T16:00:00.000Z</published>
    <updated>2020-07-04T06:33:27.722Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="bg.jpeg" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="1-本节目标"><a href="#1-本节目标" class="headerlink" title="1 本节目标"></a>1 本节目标</h2><ul><li>代码规范</li><li>业务代码组织</li><li>首页代码编写</li></ul><h2 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h2><iframe src="//player.bilibili.com/player.html?bvid=BV1Pp4y1C7hx&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" height="400px"> </iframe><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/ducafecat/flutter_learn_news/releases/tag/v1.0.6" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news/releases/tag/v1.0.6</a></p><h2 id="2-代码规范"><a href="#2-代码规范" class="headerlink" title="2 代码规范"></a>2 代码规范</h2><h3 id="2-1-官方代码规范"><a href="#2-1-官方代码规范" class="headerlink" title="2.1 官方代码规范"></a>2.1 官方代码规范</h3><p><a href="https://dart.dev/guides/language/effective-dart" target="_blank" rel="noopener">https://dart.dev/guides/language/effective-dart</a></p><h3 id="2-3-chrome-插件-lt-彩云小译-网页翻译插件-gt"><a href="#2-3-chrome-插件-lt-彩云小译-网页翻译插件-gt" class="headerlink" title="2.3 chrome 插件 &lt;彩云小译 - 网页翻译插件&gt;"></a>2.3 chrome 插件 &lt;彩云小译 - 网页翻译插件&gt;</h3><p><a href="https://chrome.google.com/webstore/detail/lingocloud-web-translatio/jmpepeebcbihafjjadogphmbgiffiajh" target="_blank" rel="noopener">https://chrome.google.com/webstore/detail/lingocloud-web-translatio/jmpepeebcbihafjjadogphmbgiffiajh</a></p><h3 id="2-4-阿里项目规范"><a href="#2-4-阿里项目规范" class="headerlink" title="2.4 阿里项目规范"></a>2.4 阿里项目规范</h3><p><a href="https://github.com/alibaba/flutter-go/blob/master/Flutter_Go%20%E4%BB%A3%E7%A0%81%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83.md" target="_blank" rel="noopener">https://github.com/alibaba/flutter-go/blob/master/Flutter_Go%20%E4%BB%A3%E7%A0%81%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83.md</a></p><h2 id="3-业务界面代码组织"><a href="#3-业务界面代码组织" class="headerlink" title="3 业务界面代码组织"></a>3 业务界面代码组织</h2><h3 id="3-1-redux、fish-redux"><a href="#3-1-redux、fish-redux" class="headerlink" title="3.1 redux、fish-redux"></a>3.1 redux、fish-redux</h3><ul><li>redux 架构</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-04-01-09-50-51.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>fish-redux 架构</li></ul><p>进一步的细分，进行规范</p><p><a href="https://github.com/alibaba/fish-redux/tree/master/doc" target="_blank" rel="noopener">https://github.com/alibaba/fish-redux/tree/master/doc</a><br><a href="https://medium.com/@dave790602/flutter-architecture-fish-redux-9b753912224a" target="_blank" rel="noopener">https://medium.com/@dave790602/flutter-architecture-fish-redux-9b753912224a</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-04-01-09-52-25.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>fish-redux 代码</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-04-01-10-30-19.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="3-2-bloc"><a href="#3-2-bloc" class="headerlink" title="3.2 bloc"></a>3.2 bloc</h3><ul><li>架构</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-04-01-09-56-04.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p><a href="https://bloclibrary.dev/#/" target="_blank" rel="noopener">https://bloclibrary.dev/#/</a></p><ul><li>代码组织</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-04-01-10-39-09.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="3-3-简单就是美"><a href="#3-3-简单就是美" class="headerlink" title="3.3 简单就是美"></a>3.3 简单就是美</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-04-01-10-41-34.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="3-4-如何平衡"><a href="#3-4-如何平衡" class="headerlink" title="3.4 如何平衡"></a>3.4 如何平衡</h3><ul><li>是否团队开发</li></ul><ul><li>是否简单业务（20 页面）</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-04-01-14-17-41.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>是否重交互（视频社交、聊天 A）</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-04-01-14-16-06.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="4-新闻首页实现"><a href="#4-新闻首页实现" class="headerlink" title="4 新闻首页实现"></a>4 新闻首页实现</h2><h3 id="4-1-界面组成分析"><a href="#4-1-界面组成分析" class="headerlink" title="4.1 界面组成分析"></a>4.1 界面组成分析</h3><ul><li>分类导航、推荐新闻、频道导航</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-04-01-10-55-39.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>新闻列表、广告 ad、邮件订阅</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-04-01-10-57-39.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="4-2-代码框架"><a href="#4-2-代码框架" class="headerlink" title="4.2 代码框架"></a>4.2 代码框架</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_MainPageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">MainPage</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    _loadAllData();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 读取所有数据</span></span><br><span class="line">  _loadAllData() <span class="keyword">async</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 分类菜单</span></span><br><span class="line">  Widget _buildCategories() &#123;</span><br><span class="line">    <span class="keyword">return</span> Container();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 推荐阅读</span></span><br><span class="line">  Widget _buildRecommend() &#123;</span><br><span class="line">    <span class="keyword">return</span> Container();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 频道</span></span><br><span class="line">  Widget _buildChannels() &#123;</span><br><span class="line">    <span class="keyword">return</span> Container();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 新闻列表</span></span><br><span class="line">  Widget _buildNewsList() &#123;</span><br><span class="line">    <span class="keyword">return</span> Container();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ad 广告条</span></span><br><span class="line">  <span class="comment">// 邮件订阅</span></span><br><span class="line">  Widget _buildEmailSubscribe() &#123;</span><br><span class="line">    <span class="keyword">return</span> newsletterWidget();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> SingleChildScrollView(</span><br><span class="line">        child: Column(</span><br><span class="line">          children: &lt;Widget&gt;[</span><br><span class="line">            _buildCategories(),</span><br><span class="line">            Divider(height: <span class="number">1</span>),</span><br><span class="line">            _buildRecommend(),</span><br><span class="line">            Divider(height: <span class="number">1</span>),</span><br><span class="line">            _buildChannels(),</span><br><span class="line">            Divider(height: <span class="number">1</span>),</span><br><span class="line">            _buildNewsList(),</span><br><span class="line">            Divider(height: <span class="number">1</span>),</span><br><span class="line">            _buildEmailSubscribe(),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-3-实现业务"><a href="#4-3-实现业务" class="headerlink" title="4.3 实现业务"></a>4.3 实现业务</h3><ul><li>创建 widget 单独文件</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-04-01-11-00-53.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>分类导航</li></ul><p>lib/pages/main/categories_widget.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">Widget newsCategoriesWidget(&#123;</span><br><span class="line">  <span class="built_in">List</span>&lt;CategoryResponseEntity&gt; categories,</span><br><span class="line">  <span class="built_in">String</span> selCategoryCode,</span><br><span class="line">  <span class="built_in">Function</span>(CategoryResponseEntity) onTap,</span><br><span class="line">&#125;) &#123;</span><br><span class="line">  <span class="keyword">return</span> SingleChildScrollView(</span><br><span class="line">    scrollDirection: Axis.horizontal,</span><br><span class="line">    child: Row(</span><br><span class="line">      children: categories.map&lt;Widget&gt;((item) &#123;</span><br><span class="line">        <span class="keyword">return</span> Container(</span><br><span class="line">          alignment: Alignment.center,</span><br><span class="line">          height: duSetHeight(<span class="number">52</span>),</span><br><span class="line">          padding: EdgeInsets.symmetric(horizontal: <span class="number">8</span>),</span><br><span class="line">          child: GestureDetector(</span><br><span class="line">            child: Text(</span><br><span class="line">              item.title,</span><br><span class="line">              style: TextStyle(</span><br><span class="line">                color: selCategoryCode == item.code</span><br><span class="line">                    ? AppColors.secondaryElementText</span><br><span class="line">                    : AppColors.primaryText,</span><br><span class="line">                fontSize: duSetFontSize(<span class="number">18</span>),</span><br><span class="line">                fontFamily: <span class="string">'Montserrat'</span>,</span><br><span class="line">                fontWeight: FontWeight.w600,</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">            onTap: () =&gt; onTap(item),</span><br><span class="line">          ),</span><br><span class="line">        );</span><br><span class="line">      &#125;).toList(),</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>频道导航</li></ul><p>lib/pages/main/channels_widget.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">Widget newsChannelsWidget(&#123;</span><br><span class="line">  <span class="built_in">List</span>&lt;ChannelResponseEntity&gt; channels,</span><br><span class="line">  <span class="built_in">Function</span>(ChannelResponseEntity) onTap,</span><br><span class="line">&#125;) &#123;</span><br><span class="line">  <span class="keyword">return</span> Container(</span><br><span class="line">    height: duSetHeight(<span class="number">137</span>),</span><br><span class="line">    child: SingleChildScrollView(</span><br><span class="line">      scrollDirection: Axis.horizontal,</span><br><span class="line">      child: Row(</span><br><span class="line">        children: channels.map&lt;Widget&gt;((item) &#123;</span><br><span class="line">          <span class="keyword">return</span> Container(</span><br><span class="line">            width: duSetWidth(<span class="number">70</span>),</span><br><span class="line">            height: duSetHeight(<span class="number">97</span>),</span><br><span class="line">            margin: EdgeInsets.symmetric(horizontal: duSetWidth(<span class="number">10</span>)),</span><br><span class="line">            child: InkWell(</span><br><span class="line">              child: Column(</span><br><span class="line">                crossAxisAlignment: CrossAxisAlignment.stretch,</span><br><span class="line">                mainAxisAlignment: MainAxisAlignment.spaceBetween,</span><br><span class="line">                children: [</span><br><span class="line">                  <span class="comment">// 图标</span></span><br><span class="line">                  Container(</span><br><span class="line">                    height: duSetWidth(<span class="number">64</span>),</span><br><span class="line">                    margin: EdgeInsets.symmetric(horizontal: duSetWidth(<span class="number">3</span>)),</span><br><span class="line">                    child: Stack(</span><br><span class="line">                      alignment: Alignment.center,</span><br><span class="line">                      children: [</span><br><span class="line">                        Positioned(</span><br><span class="line">                          left: <span class="number">0</span>,</span><br><span class="line">                          top: <span class="number">0</span>,</span><br><span class="line">                          right: <span class="number">0</span>,</span><br><span class="line">                          child: Container(</span><br><span class="line">                            height: duSetWidth(<span class="number">64</span>),</span><br><span class="line">                            decoration: BoxDecoration(</span><br><span class="line">                              color: AppColors.primaryBackground,</span><br><span class="line">                              boxShadow: [</span><br><span class="line">                                Shadows.primaryShadow,</span><br><span class="line">                              ],</span><br><span class="line">                              borderRadius:</span><br><span class="line">                                  BorderRadius.all(Radius.circular(<span class="number">32</span>)),</span><br><span class="line">                            ),</span><br><span class="line">                            child: Container(),</span><br><span class="line">                          ),</span><br><span class="line">                        ),</span><br><span class="line">                        Positioned(</span><br><span class="line">                          left: duSetWidth(<span class="number">10</span>),</span><br><span class="line">                          top: duSetWidth(<span class="number">10</span>),</span><br><span class="line">                          right: duSetWidth(<span class="number">10</span>),</span><br><span class="line">                          child: Image.asset(</span><br><span class="line">                            <span class="string">"assets/images/channel-<span class="subst">$&#123;item.code&#125;</span>.png"</span>,</span><br><span class="line">                            fit: BoxFit.none,</span><br><span class="line">                          ),</span><br><span class="line">                        ),</span><br><span class="line">                      ],</span><br><span class="line">                    ),</span><br><span class="line">                  ),</span><br><span class="line">                  <span class="comment">// 标题</span></span><br><span class="line">                  Text(</span><br><span class="line">                    item.title,</span><br><span class="line">                    textAlign: TextAlign.center,</span><br><span class="line">                    overflow: TextOverflow.clip,</span><br><span class="line">                    maxLines: <span class="number">1</span>,</span><br><span class="line">                    style: TextStyle(</span><br><span class="line">                      color: AppColors.thirdElementText,</span><br><span class="line">                      fontFamily: <span class="string">"Avenir"</span>,</span><br><span class="line">                      fontWeight: FontWeight.w400,</span><br><span class="line">                      fontSize: duSetFontSize(<span class="number">14</span>),</span><br><span class="line">                      height: <span class="number">1</span>,</span><br><span class="line">                    ),</span><br><span class="line">                  ),</span><br><span class="line">                ],</span><br><span class="line">              ),</span><br><span class="line">              onTap: () =&gt; onTap(item),</span><br><span class="line">            ),</span><br><span class="line">          );</span><br><span class="line">        &#125;).toList(),</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>新闻行 Item</li></ul><p>lib/pages/main/news_item_widget.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line">Widget newsItem(NewsItem item) &#123;</span><br><span class="line">  <span class="keyword">return</span> Container(</span><br><span class="line">    height: duSetHeight(<span class="number">161</span>),</span><br><span class="line">    padding: EdgeInsets.all(duSetWidth(<span class="number">20</span>)),</span><br><span class="line">    child: Row(</span><br><span class="line">      mainAxisAlignment: MainAxisAlignment.spaceBetween,</span><br><span class="line">      crossAxisAlignment: CrossAxisAlignment.start,</span><br><span class="line">      children: &lt;Widget&gt;[</span><br><span class="line">        <span class="comment">// 图</span></span><br><span class="line">        imageCached(</span><br><span class="line">          item.thumbnail,</span><br><span class="line">          width: duSetWidth(<span class="number">121</span>),</span><br><span class="line">          height: duSetWidth(<span class="number">121</span>),</span><br><span class="line">        ),</span><br><span class="line">        <span class="comment">// 右侧</span></span><br><span class="line">        SizedBox(</span><br><span class="line">          width: duSetWidth(<span class="number">194</span>),</span><br><span class="line">          child: Column(</span><br><span class="line">            crossAxisAlignment: CrossAxisAlignment.start,</span><br><span class="line">            children: &lt;Widget&gt;[</span><br><span class="line">              <span class="comment">// 作者</span></span><br><span class="line">              Container(</span><br><span class="line">                margin: EdgeInsets.all(<span class="number">0</span>),</span><br><span class="line">                child: Text(</span><br><span class="line">                  item.author,</span><br><span class="line">                  style: TextStyle(</span><br><span class="line">                    fontFamily: <span class="string">'Avenir'</span>,</span><br><span class="line">                    fontWeight: FontWeight.normal,</span><br><span class="line">                    color: AppColors.thirdElementText,</span><br><span class="line">                    fontSize: duSetFontSize(<span class="number">14</span>),</span><br><span class="line">                    height: <span class="number">1</span>,</span><br><span class="line">                  ),</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">              <span class="comment">// 标题</span></span><br><span class="line">              Container(</span><br><span class="line">                margin: EdgeInsets.only(top: duSetHeight(<span class="number">10</span>)),</span><br><span class="line">                child: Text(</span><br><span class="line">                  item.title,</span><br><span class="line">                  style: TextStyle(</span><br><span class="line">                    fontFamily: <span class="string">'Montserrat'</span>,</span><br><span class="line">                    fontWeight: FontWeight.w500,</span><br><span class="line">                    color: AppColors.primaryText,</span><br><span class="line">                    fontSize: duSetFontSize(<span class="number">16</span>),</span><br><span class="line">                    height: <span class="number">1</span>,</span><br><span class="line">                  ),</span><br><span class="line">                  overflow: TextOverflow.clip,</span><br><span class="line">                  maxLines: <span class="number">3</span>,</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">              <span class="comment">// Spacer</span></span><br><span class="line">              Spacer(),</span><br><span class="line">              <span class="comment">// 一行 3 列</span></span><br><span class="line">              Container(</span><br><span class="line">                child: Row(</span><br><span class="line">                  crossAxisAlignment: CrossAxisAlignment.center,</span><br><span class="line">                  children: &lt;Widget&gt;[</span><br><span class="line">                    <span class="comment">// 分类</span></span><br><span class="line">                    ConstrainedBox(</span><br><span class="line">                      constraints: BoxConstraints(</span><br><span class="line">                        maxWidth: duSetWidth(<span class="number">60</span>),</span><br><span class="line">                      ),</span><br><span class="line">                      child: Text(</span><br><span class="line">                        item.category,</span><br><span class="line">                        style: TextStyle(</span><br><span class="line">                          fontFamily: <span class="string">'Avenir'</span>,</span><br><span class="line">                          fontWeight: FontWeight.normal,</span><br><span class="line">                          color: AppColors.secondaryElementText,</span><br><span class="line">                          fontSize: duSetFontSize(<span class="number">14</span>),</span><br><span class="line">                          height: <span class="number">1</span>,</span><br><span class="line">                        ),</span><br><span class="line">                        overflow: TextOverflow.clip,</span><br><span class="line">                        maxLines: <span class="number">1</span>,</span><br><span class="line">                      ),</span><br><span class="line">                    ),</span><br><span class="line">                    <span class="comment">// 添加时间</span></span><br><span class="line">                    Container(</span><br><span class="line">                      width: duSetWidth(<span class="number">15</span>),</span><br><span class="line">                    ),</span><br><span class="line">                    ConstrainedBox(</span><br><span class="line">                      constraints: BoxConstraints(</span><br><span class="line">                        maxWidth: duSetWidth(<span class="number">100</span>),</span><br><span class="line">                      ),</span><br><span class="line">                      child: Text(</span><br><span class="line">                        <span class="string">'• <span class="subst">$&#123;duTimeLineFormat(item.addtime)&#125;</span>'</span>,</span><br><span class="line">                        style: TextStyle(</span><br><span class="line">                          fontFamily: <span class="string">'Avenir'</span>,</span><br><span class="line">                          fontWeight: FontWeight.normal,</span><br><span class="line">                          color: AppColors.thirdElementText,</span><br><span class="line">                          fontSize: duSetFontSize(<span class="number">14</span>),</span><br><span class="line">                          height: <span class="number">1</span>,</span><br><span class="line">                        ),</span><br><span class="line">                        overflow: TextOverflow.clip,</span><br><span class="line">                        maxLines: <span class="number">1</span>,</span><br><span class="line">                      ),</span><br><span class="line">                    ),</span><br><span class="line">                    <span class="comment">// 更多</span></span><br><span class="line">                    Spacer(),</span><br><span class="line">                    InkWell(</span><br><span class="line">                      child: Icon(</span><br><span class="line">                        Icons.more_horiz,</span><br><span class="line">                        color: AppColors.primaryText,</span><br><span class="line">                        size: <span class="number">24</span>,</span><br><span class="line">                      ),</span><br><span class="line">                      onTap: () &#123;&#125;,</span><br><span class="line">                    ),</span><br><span class="line">                  ],</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">            ],</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ],</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>邮件订阅</li></ul><p>lib/pages/main/newsletter_widget.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">Widget newsletterWidget() &#123;</span><br><span class="line">  <span class="keyword">return</span> Container(</span><br><span class="line">    margin: EdgeInsets.all(duSetWidth(<span class="number">20</span>)),</span><br><span class="line">    child: Column(</span><br><span class="line">      children: &lt;Widget&gt;[</span><br><span class="line">        <span class="comment">// newsletter</span></span><br><span class="line">        Row(</span><br><span class="line">          children: &lt;Widget&gt;[</span><br><span class="line">            Text(</span><br><span class="line">              <span class="string">'Newsletter'</span>,</span><br><span class="line">              style: TextStyle(</span><br><span class="line">                fontFamily: <span class="string">'Montserrat'</span>,</span><br><span class="line">                fontSize: duSetFontSize(<span class="number">18</span>),</span><br><span class="line">                fontWeight: FontWeight.w600,</span><br><span class="line">                color: AppColors.thirdElement,</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">            Spacer(),</span><br><span class="line">            IconButton(</span><br><span class="line">              icon: Icon(</span><br><span class="line">                Icons.close,</span><br><span class="line">                color: AppColors.thirdElementText,</span><br><span class="line">                size: duSetFontSize(<span class="number">17</span>),</span><br><span class="line">              ),</span><br><span class="line">              onPressed: () &#123;&#125;,</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line"></span><br><span class="line">        <span class="comment">// email</span></span><br><span class="line">        inputEmailEdit(</span><br><span class="line">          marginTop: <span class="number">19</span>,</span><br><span class="line">          keyboardType: TextInputType.emailAddress,</span><br><span class="line">          hintText: <span class="string">"Email"</span>,</span><br><span class="line">          isPassword: <span class="keyword">false</span>,</span><br><span class="line">          controller: <span class="keyword">null</span>,</span><br><span class="line">        ),</span><br><span class="line"></span><br><span class="line">        <span class="comment">// btn subcrible</span></span><br><span class="line">        Padding(</span><br><span class="line">          padding: EdgeInsets.only(top: <span class="number">15</span>),</span><br><span class="line">          child: btnFlatButtonWidget(</span><br><span class="line">            onPressed: () &#123;&#125;,</span><br><span class="line">            width: duSetWidth(<span class="number">335</span>),</span><br><span class="line">            height: duSetHeight(<span class="number">44</span>),</span><br><span class="line">            fontWeight: FontWeight.w600,</span><br><span class="line">            title: <span class="string">"Subscribe"</span>,</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line"></span><br><span class="line">        <span class="comment">// disc</span></span><br><span class="line">        Container(</span><br><span class="line">          margin: EdgeInsets.only(top: duSetHeight(<span class="number">29</span>)),</span><br><span class="line">          width: duSetWidth(<span class="number">261</span>),</span><br><span class="line">          child: Text.rich(TextSpan(children: &lt;TextSpan&gt;[</span><br><span class="line">            TextSpan(</span><br><span class="line">              text: <span class="string">'By clicking on Subscribe button you agree to accept'</span>,</span><br><span class="line">              style: <span class="keyword">new</span> TextStyle(</span><br><span class="line">                color: AppColors.thirdElementText,</span><br><span class="line">                fontFamily: <span class="string">"Avenir"</span>,</span><br><span class="line">                fontWeight: FontWeight.w400,</span><br><span class="line">                fontSize: duSetFontSize(<span class="number">14</span>),</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">            TextSpan(</span><br><span class="line">              text: <span class="string">' Privacy Policy'</span>,</span><br><span class="line">              style: <span class="keyword">new</span> TextStyle(</span><br><span class="line">                color: AppColors.secondaryElementText,</span><br><span class="line">                fontFamily: <span class="string">"Avenir"</span>,</span><br><span class="line">                fontWeight: FontWeight.w400,</span><br><span class="line">                fontSize: duSetFontSize(<span class="number">14</span>),</span><br><span class="line">              ),</span><br><span class="line">              recognizer: TapGestureRecognizer()</span><br><span class="line">                ..onTap = () &#123;</span><br><span class="line">                  toastInfo(msg: <span class="string">'Privacy Policy'</span>);</span><br><span class="line">                &#125;,</span><br><span class="line">            ),</span><br><span class="line">          ])),</span><br><span class="line">        ),</span><br><span class="line">      ],</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>推荐阅读</li></ul><p>lib/pages/main/recommend_widget.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line">Widget recommendWidget(NewsRecommendResponseEntity newsRecommend) &#123;</span><br><span class="line">  <span class="keyword">return</span> Container(</span><br><span class="line">    margin: EdgeInsets.all(duSetWidth(<span class="number">20</span>)),</span><br><span class="line">    child: Column(</span><br><span class="line">      crossAxisAlignment: CrossAxisAlignment.start,</span><br><span class="line">      children: &lt;Widget&gt;[</span><br><span class="line">        <span class="comment">// 图</span></span><br><span class="line">        imageCached(</span><br><span class="line">          newsRecommend.thumbnail,</span><br><span class="line">          width: duSetWidth(<span class="number">335</span>),</span><br><span class="line">          height: duSetHeight(<span class="number">290</span>),</span><br><span class="line">        ),</span><br><span class="line">        <span class="comment">// 作者</span></span><br><span class="line">        Container(</span><br><span class="line">          margin: EdgeInsets.only(top: duSetHeight(<span class="number">14</span>)),</span><br><span class="line">          child: Text(</span><br><span class="line">            newsRecommend.author,</span><br><span class="line">            style: TextStyle(</span><br><span class="line">              fontFamily: <span class="string">'Avenir'</span>,</span><br><span class="line">              fontWeight: FontWeight.normal,</span><br><span class="line">              color: AppColors.thirdElementText,</span><br><span class="line">              fontSize: duSetFontSize(<span class="number">14</span>),</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">        <span class="comment">// 标题</span></span><br><span class="line">        Container(</span><br><span class="line">          margin: EdgeInsets.only(top: duSetHeight(<span class="number">10</span>)),</span><br><span class="line">          child: Text(</span><br><span class="line">            newsRecommend.title,</span><br><span class="line">            style: TextStyle(</span><br><span class="line">              fontFamily: <span class="string">'Montserrat'</span>,</span><br><span class="line">              fontWeight: FontWeight.w600,</span><br><span class="line">              color: AppColors.primaryText,</span><br><span class="line">              fontSize: duSetFontSize(<span class="number">24</span>),</span><br><span class="line">              height: <span class="number">1</span>,</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">        <span class="comment">// 一行 3 列</span></span><br><span class="line">        Container(</span><br><span class="line">          margin: EdgeInsets.only(top: duSetHeight(<span class="number">10</span>)),</span><br><span class="line">          child: Row(</span><br><span class="line">            crossAxisAlignment: CrossAxisAlignment.center,</span><br><span class="line">            children: &lt;Widget&gt;[</span><br><span class="line">              <span class="comment">// 分类</span></span><br><span class="line">              ConstrainedBox(</span><br><span class="line">                constraints: <span class="keyword">const</span> BoxConstraints(</span><br><span class="line">                  maxWidth: <span class="number">120</span>,</span><br><span class="line">                ),</span><br><span class="line">                child: Text(</span><br><span class="line">                  newsRecommend.category,</span><br><span class="line">                  style: TextStyle(</span><br><span class="line">                    fontFamily: <span class="string">'Avenir'</span>,</span><br><span class="line">                    fontWeight: FontWeight.normal,</span><br><span class="line">                    color: AppColors.secondaryElementText,</span><br><span class="line">                    fontSize: duSetFontSize(<span class="number">14</span>),</span><br><span class="line">                    height: <span class="number">1</span>,</span><br><span class="line">                  ),</span><br><span class="line">                  overflow: TextOverflow.clip,</span><br><span class="line">                  maxLines: <span class="number">1</span>,</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">              <span class="comment">// 添加时间</span></span><br><span class="line">              Container(</span><br><span class="line">                width: duSetWidth(<span class="number">15</span>),</span><br><span class="line">              ),</span><br><span class="line">              ConstrainedBox(</span><br><span class="line">                constraints: <span class="keyword">const</span> BoxConstraints(</span><br><span class="line">                  maxWidth: <span class="number">120</span>,</span><br><span class="line">                ),</span><br><span class="line">                child: Text(</span><br><span class="line">                  <span class="string">'• <span class="subst">$&#123;duTimeLineFormat(newsRecommend.addtime)&#125;</span>'</span>,</span><br><span class="line">                  style: TextStyle(</span><br><span class="line">                    fontFamily: <span class="string">'Avenir'</span>,</span><br><span class="line">                    fontWeight: FontWeight.normal,</span><br><span class="line">                    color: AppColors.thirdElementText,</span><br><span class="line">                    fontSize: duSetFontSize(<span class="number">14</span>),</span><br><span class="line">                    height: <span class="number">1</span>,</span><br><span class="line">                  ),</span><br><span class="line">                  overflow: TextOverflow.clip,</span><br><span class="line">                  maxLines: <span class="number">1</span>,</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">              <span class="comment">// 更多</span></span><br><span class="line">              Spacer(),</span><br><span class="line">              InkWell(</span><br><span class="line">                child: Icon(</span><br><span class="line">                  Icons.more_horiz,</span><br><span class="line">                  color: AppColors.primaryText,</span><br><span class="line">                  size: <span class="number">24</span>,</span><br><span class="line">                ),</span><br><span class="line">                onTap: () &#123;&#125;,</span><br><span class="line">              ),</span><br><span class="line">            ],</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ],</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="蓝湖设计稿"><a href="#蓝湖设计稿" class="headerlink" title="蓝湖设计稿"></a>蓝湖设计稿</h2><p><a href="https://lanhuapp.com/url/lYuz1" target="_blank" rel="noopener">https://lanhuapp.com/url/lYuz1</a><br>密码: gSKl</p><blockquote><p>蓝湖现在收费了，所以查看标记还请自己上传 xd 设计稿<br>商业设计稿文件不好直接分享, 可以加微信联系 ducafecat</p></blockquote><h2 id="YAPI-接口管理"><a href="#YAPI-接口管理" class="headerlink" title="YAPI 接口管理"></a>YAPI 接口管理</h2><p><a href="http://yapi.demo.qunar.com/" target="_blank" rel="noopener">http://yapi.demo.qunar.com/</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://github.com/alibaba/flutter-go#the-flutter-go-roadmap%E8%B7%AF%E7%BA%BF%E5%9B%BE-for-2019" target="_blank" rel="noopener">Flutter Go 代码开发规范 0.1.0 版</a></li><li><a href="https://dart.dev/guides/language/effective-dart" target="_blank" rel="noopener">effective-dart</a></li><li><a href="https://bloclibrary.dev/#/" target="_blank" rel="noopener">bloc</a></li></ul><h2 id="VSCode-插件"><a href="#VSCode-插件" class="headerlink" title="VSCode 插件"></a>VSCode 插件</h2><ul><li>Flutter、Dart</li><li><a href="https://marketplace.visualstudio.com/items?itemName=alexisvt.flutter-snippets" target="_blank" rel="noopener">Flutter Widget Snippets</a></li><li><a href="https://marketplace.visualstudio.com/items?itemName=Nash.awesome-flutter-snippets" target="_blank" rel="noopener">Awesome Flutter Snippets</a></li><li><a href="https://marketplace.visualstudio.com/items?itemName=quicktype.quicktype" target="_blank" rel="noopener">Paste JSON as Code</a></li><li><a href="https://marketplace.visualstudio.com/items?itemName=FelixAngelov.bloc" target="_blank" rel="noopener">bloc</a></li></ul><h2 id="视频-1"><a href="#视频-1" class="headerlink" title="视频"></a>视频</h2><ul><li><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">b 站</a></li><li><a href="https://www.youtube.com/watch?v=Uucg6GGGBsY&amp;list=PL274L1n86T80VZR30KaLOKV6jqwTq5E8D" target="_blank" rel="noopener">油管镜像</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="Flutter 实战从零开始" scheme="https://blog.ducafecat.tech/categories/Flutter-%E5%AE%9E%E6%88%98%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 实战从零开始 新闻客户端 - 05 AppData、Cache、Fiddle、iconfont、主界面搭建</title>
    <link href="https://blog.ducafecat.tech/2020/03/25/flutter-project/flutter-project-news-05-cache-iconfont/"/>
    <id>https://blog.ducafecat.tech/2020/03/25/flutter-project/flutter-project-news-05-cache-iconfont/</id>
    <published>2020-03-24T16:00:00.000Z</published>
    <updated>2020-07-04T06:33:27.729Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="bg.jpg" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h2><ul><li>全局数据、响应数据、持久化</li><li>http get 缓存</li><li>http proxy 代理</li><li>fiddle 抓包工具</li><li>iconfont 字体库</li><li>主界面搭建</li><li>BottomNavigationBar 导航控件</li><li>编写 api 接口代码</li></ul><h2 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h2><iframe src="//player.bilibili.com/player.html?bvid=BV1A54y1d7Pa&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" height="400px"> </iframe><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/ducafecat/flutter_learn_news/releases/tag/v1.0.5" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news/releases/tag/v1.0.5</a></p><h2 id="客户端数据管理"><a href="#客户端数据管理" class="headerlink" title="客户端数据管理"></a>客户端数据管理</h2><h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><ul><li>全局数据</li></ul><p>存储在内存</p><p>用户数据、语言包</p><ul><li>响应数据</li></ul><p>存储在内存</p><p>用户登录状态、多语言、皮肤样式</p><p>Redux、Bloc、provider</p><ul><li>持久化</li></ul><p>APP 保持磁盘上</p><p>浏览器 cookie localStorage</p><h3 id="编写全局管理"><a href="#编写全局管理" class="headerlink" title="编写全局管理"></a>编写全局管理</h3><ul><li>lib/global.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="markdown">/// 全局配置</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Global</span> </span>&#123;</span><br><span class="line">  <span class="comment"><span class="markdown">/// 用户配置</span></span></span><br><span class="line">  <span class="keyword">static</span> UserLoginResponseEntity profile = UserLoginResponseEntity(</span><br><span class="line">    accessToken: <span class="keyword">null</span>,</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 是否 release</span></span></span><br><span class="line">  <span class="keyword">static</span> <span class="built_in">bool</span> <span class="keyword">get</span> isRelease =&gt; <span class="built_in">bool</span>.fromEnvironment(<span class="string">"dart.vm.product"</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// init</span></span></span><br><span class="line">  <span class="keyword">static</span> Future init() <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="comment">// 运行初始</span></span><br><span class="line">    WidgetsFlutterBinding.ensureInitialized();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 工具初始</span></span><br><span class="line">    <span class="keyword">await</span> StorageUtil.init();</span><br><span class="line">    HttpUtil();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 读取离线用户信息</span></span><br><span class="line">    <span class="keyword">var</span> _profileJSON = StorageUtil().getJSON(STORAGE_USER_PROFILE_KEY);</span><br><span class="line">    <span class="keyword">if</span> (_profileJSON != <span class="keyword">null</span>) &#123;</span><br><span class="line">      profile = UserLoginResponseEntity.fromJson(_profileJSON);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// http 缓存</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// android 状态栏为透明的沉浸</span></span><br><span class="line">    <span class="keyword">if</span> (Platform.isAndroid) &#123;</span><br><span class="line">      SystemUiOverlayStyle systemUiOverlayStyle =</span><br><span class="line">          SystemUiOverlayStyle(statusBarColor: Colors.transparent);</span><br><span class="line">      SystemChrome.setSystemUIOverlayStyle(systemUiOverlayStyle);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 持久化 用户信息</span></span><br><span class="line">  <span class="keyword">static</span> Future&lt;<span class="built_in">bool</span>&gt; saveProfile(UserLoginResponseEntity userResponse) &#123;</span><br><span class="line">    profile = userResponse;</span><br><span class="line">    <span class="keyword">return</span> StorageUtil()</span><br><span class="line">        .setJSON(STORAGE_USER_PROFILE_KEY, userResponse.toJson());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="调用运行"><a href="#调用运行" class="headerlink" title="调用运行"></a>调用运行</h3><ul><li>lib/main.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main() =&gt; Global.init().then((e) =&gt; runApp(MyApp()));</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Container();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Http-内存缓存"><a href="#Http-内存缓存" class="headerlink" title="Http 内存缓存"></a>Http 内存缓存</h2><h3 id="缓存策略"><a href="#缓存策略" class="headerlink" title="缓存策略"></a>缓存策略</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-03-25-14-46-53.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h3><ul><li>缓存工具类 lib/common/utils/net_cache.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'dart:collection'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:dio/dio.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/common/values/values.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CacheObject</span> </span>&#123;</span><br><span class="line">  CacheObject(<span class="keyword">this</span>.response)</span><br><span class="line">      : timeStamp = <span class="built_in">DateTime</span>.now().millisecondsSinceEpoch;</span><br><span class="line">  Response response;</span><br><span class="line">  <span class="built_in">int</span> timeStamp;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">bool</span> <span class="keyword">operator</span> ==(other) &#123;</span><br><span class="line">    <span class="keyword">return</span> response.hashCode == other.hashCode;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">int</span> <span class="keyword">get</span> hashCode =&gt; response.realUri.hashCode;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NetCache</span> <span class="keyword">extends</span> <span class="title">Interceptor</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 为确保迭代器顺序和对象插入时间一致顺序一致，我们使用LinkedHashMap</span></span><br><span class="line">  <span class="keyword">var</span> cache = LinkedHashMap&lt;<span class="built_in">String</span>, CacheObject&gt;();</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  onRequest(RequestOptions options) <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!CACHE_ENABLE) <span class="keyword">return</span> options;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// refresh标记是否是"下拉刷新"</span></span><br><span class="line">    <span class="built_in">bool</span> refresh = options.extra[<span class="string">"refresh"</span>] == <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 如果是下拉刷新，先删除相关缓存</span></span><br><span class="line">    <span class="keyword">if</span> (refresh) &#123;</span><br><span class="line">      <span class="keyword">if</span> (options.extra[<span class="string">"list"</span>] == <span class="keyword">true</span>) &#123;</span><br><span class="line">        <span class="comment">//若是列表，则只要url中包含当前path的缓存全部删除（简单实现，并不精准）</span></span><br><span class="line">        cache.removeWhere((key, v) =&gt; key.contains(options.path));</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 如果不是列表，则只删除uri相同的缓存</span></span><br><span class="line">        delete(options.uri.toString());</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> options;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// get 请求，开启缓存</span></span><br><span class="line">    <span class="keyword">if</span> (options.extra[<span class="string">"noCache"</span>] != <span class="keyword">true</span> &amp;&amp;</span><br><span class="line">        options.method.toLowerCase() == <span class="string">'get'</span>) &#123;</span><br><span class="line">      <span class="built_in">String</span> key = options.extra[<span class="string">"cacheKey"</span>] ?? options.uri.toString();</span><br><span class="line">      <span class="keyword">var</span> ob = cache[key];</span><br><span class="line">      <span class="keyword">if</span> (ob != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="comment">//若缓存未过期，则返回缓存内容</span></span><br><span class="line">        <span class="keyword">if</span> ((<span class="built_in">DateTime</span>.now().millisecondsSinceEpoch - ob.timeStamp) / <span class="number">1000</span> &lt;</span><br><span class="line">            CACHE_MAXAGE) &#123;</span><br><span class="line">          <span class="keyword">return</span> cache[key].response;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="comment">//若已过期则删除缓存，继续向服务器请求</span></span><br><span class="line">          cache.remove(key);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  onError(DioError err) <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="comment">// 错误状态不缓存</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  onResponse(Response response) <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="comment">// 如果启用缓存，将返回结果保存到缓存</span></span><br><span class="line">    <span class="keyword">if</span> (CACHE_ENABLE) &#123;</span><br><span class="line">      _saveCache(response);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  _saveCache(Response object) &#123;</span><br><span class="line">    RequestOptions options = object.request;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 只缓存 get 的请求</span></span><br><span class="line">    <span class="keyword">if</span> (options.extra[<span class="string">"noCache"</span>] != <span class="keyword">true</span> &amp;&amp;</span><br><span class="line">        options.method.toLowerCase() == <span class="string">"get"</span>) &#123;</span><br><span class="line">      <span class="comment">// 如果缓存数量超过最大数量限制，则先移除最早的一条记录</span></span><br><span class="line">      <span class="keyword">if</span> (cache.length == CACHE_MAXCOUNT) &#123;</span><br><span class="line">        cache.remove(cache[cache.keys.first]);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">String</span> key = options.extra[<span class="string">"cacheKey"</span>] ?? options.uri.toString();</span><br><span class="line">      cache[key] = CacheObject(object);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> delete(<span class="built_in">String</span> key) &#123;</span><br><span class="line">    cache.remove(key);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>dio 封装 lib/common/utils/http.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 加内存缓存</span></span><br><span class="line">HttpUtil._internal() &#123;</span><br><span class="line">  ...</span><br><span class="line">  dio.interceptors.add(NetCache());</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改 get 请求</span></span><br><span class="line"><span class="comment"><span class="markdown">/// restful get 操作</span></span></span><br><span class="line"><span class="comment"><span class="markdown">/// refresh 是否下拉刷新 默认 false</span></span></span><br><span class="line"><span class="comment"><span class="markdown">/// noCache 是否不缓存 默认 true</span></span></span><br><span class="line"><span class="comment"><span class="markdown">/// list 是否列表 默认 false</span></span></span><br><span class="line"><span class="comment"><span class="markdown">/// cacheKey 缓存key</span></span></span><br><span class="line">Future <span class="keyword">get</span>(</span><br><span class="line">  <span class="built_in">String</span> path, &#123;</span><br><span class="line">  <span class="keyword">dynamic</span> params,</span><br><span class="line">  Options options,</span><br><span class="line">  <span class="built_in">bool</span> refresh = <span class="keyword">false</span>,</span><br><span class="line">  <span class="built_in">bool</span> noCache = !CACHE_ENABLE,</span><br><span class="line">  <span class="built_in">bool</span> list = <span class="keyword">false</span>,</span><br><span class="line">  <span class="built_in">String</span> cacheKey,</span><br><span class="line">&#125;) <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    Options requestOptions = options ?? Options();</span><br><span class="line">    requestOptions = requestOptions.merge(extra: &#123;</span><br><span class="line">      <span class="string">"refresh"</span>: refresh,</span><br><span class="line">      <span class="string">"noCache"</span>: noCache,</span><br><span class="line">      <span class="string">"list"</span>: list,</span><br><span class="line">      <span class="string">"cacheKey"</span>: cacheKey,</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; _authorization = getAuthorizationHeader();</span><br><span class="line">    <span class="keyword">if</span> (_authorization != <span class="keyword">null</span>) &#123;</span><br><span class="line">      requestOptions = requestOptions.merge(headers: _authorization);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> response = <span class="keyword">await</span> dio.<span class="keyword">get</span>(path,</span><br><span class="line">        queryParameters: params,</span><br><span class="line">        options: requestOptions,</span><br><span class="line">        cancelToken: cancelToken);</span><br><span class="line">    <span class="keyword">return</span> response.data;</span><br><span class="line">  &#125; on DioError <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="keyword">throw</span> createErrorEntity(e);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Http-Proxy-代理-Fiddle-抓包"><a href="#Http-Proxy-代理-Fiddle-抓包" class="headerlink" title="Http Proxy 代理 + Fiddle 抓包"></a>Http Proxy 代理 + Fiddle 抓包</h2><h3 id="安装-Fiddle"><a href="#安装-Fiddle" class="headerlink" title="安装 Fiddle"></a>安装 Fiddle</h3><p><a href="https://www.telerik.com/download/fiddler-everywhere" target="_blank" rel="noopener">https://www.telerik.com/download/fiddler-everywhere</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-03-26-14-03-16.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="dio-加入-proxy"><a href="#dio-加入-proxy" class="headerlink" title="dio 加入 proxy"></a>dio 加入 proxy</h3><ul><li>lib/common/utils/http.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!Global.isRelease &amp;&amp; PROXY_ENABLE) &#123;</span><br><span class="line">  (dio.httpClientAdapter <span class="keyword">as</span> DefaultHttpClientAdapter).onHttpClientCreate =</span><br><span class="line">      (client) &#123;</span><br><span class="line">    client.findProxy = (uri) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">"PROXY $PROXY_IP:$PROXY_PORT"</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">//代理工具会提供一个抓包的自签名证书，会通不过证书校验，所以我们禁用证书校验</span></span><br><span class="line">    client.badCertificateCallback =</span><br><span class="line">        (X509Certificate cert, <span class="built_in">String</span> host, <span class="built_in">int</span> port) =&gt; <span class="keyword">true</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Iconfont-字体库"><a href="#Iconfont-字体库" class="headerlink" title="Iconfont 字体库"></a>Iconfont 字体库</h2><h3 id="引入流程"><a href="#引入流程" class="headerlink" title="引入流程"></a>引入流程</h3><ul><li>登录</li></ul><p><a href="https://www.iconfont.cn" target="_blank" rel="noopener">https://www.iconfont.cn</a></p><ul><li>创建字体项目</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-03-25-14-56-48.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>字体文件放入</li></ul><p>assets/fonts/iconfont.ttf</p><ul><li>pubspec.yaml</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">fonts:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line"><span class="attr">  - family:</span> <span class="string">Iconfont</span></span><br><span class="line"><span class="attr">    fonts:</span></span><br><span class="line"><span class="attr">      - asset:</span> <span class="string">assets/fonts/iconfont.ttf</span></span><br></pre></td></tr></table></figure><ul><li>lib/common/utils/iconfont.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Iconfont</span> </span>&#123;</span><br><span class="line">    <span class="comment">// iconName: share</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> share = IconData(</span><br><span class="line">    <span class="number">0xe60d</span>,</span><br><span class="line">    fontFamily: <span class="string">'Iconfont'</span>,</span><br><span class="line">    matchTextDirection: <span class="keyword">true</span>,</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="自动生成字体库代码"><a href="#自动生成字体库代码" class="headerlink" title="自动生成字体库代码"></a>自动生成字体库代码</h3><p><a href="https://github.com/ymzuiku/iconfont_builder" target="_blank" rel="noopener">https://github.com/ymzuiku/iconfont_builder</a></p><ul><li>拉取项目、编译</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 拉取项目</span></span><br><span class="line">&gt; git <span class="built_in">clone</span> https://github.com/ymzuiku/iconfont_builder</span><br><span class="line"></span><br><span class="line"><span class="comment"># 更新包</span></span><br><span class="line">&gt; pub get</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装工具</span></span><br><span class="line">&gt; pub global activate iconfont_builder</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查环境配置</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$&#123;PATH&#125;</span>:~/.pub-cache/bin</span><br></pre></td></tr></table></figure><ul><li>参考我的配置</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># flutter sdk</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$&#123;PATH&#125;</span>:~/Documents/sdk/flutter/bin</span><br><span class="line"></span><br><span class="line"><span class="comment"># dart sdk</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$&#123;PATH&#125;</span>:~/Documents/sdk/flutter/bin/cache/dart-sdk/bin</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$&#123;PATH&#125;</span>:~/.pub-cache/bin</span><br><span class="line"></span><br><span class="line"><span class="comment"># flutter-io 国内镜像</span></span><br><span class="line"><span class="built_in">export</span> PUB_HOSTED_URL=https://pub.flutter-io.cn</span><br><span class="line"><span class="built_in">export</span> FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn</span><br><span class="line"></span><br><span class="line"><span class="comment"># android</span></span><br><span class="line"><span class="built_in">export</span> ANDROID_HOME=~/Library/Android/sdk</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$&#123;PATH&#125;</span>:<span class="variable">$&#123;ANDROID_HOME&#125;</span>/platform-tools</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$&#123;PATH&#125;</span>:<span class="variable">$&#123;ANDROID_HOME&#125;</span>/tools</span><br></pre></td></tr></table></figure><ul><li>生成字体类</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> 你的项目根目录</span><br><span class="line">iconfont_builder --from ./assets/fonts --to ./lib/common/utils/iconfont.dart</span><br></pre></td></tr></table></figure><h2 id="编写-api-业务代码"><a href="#编写-api-业务代码" class="headerlink" title="编写 api 业务代码"></a>编写 api 业务代码</h2><ul><li>yapi 配置</li></ul><p>导入 doc/api.json</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-03-25-15-09-38.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>代码</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-03-25-15-06-42.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="搭建主界面框架"><a href="#搭建主界面框架" class="headerlink" title="搭建主界面框架"></a>搭建主界面框架</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-03-26-16-24-46.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>框架页面 lib/pages/application/application.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_ApplicationPageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">ApplicationPage</span>&gt;</span></span><br><span class="line"><span class="class">    <span class="title">with</span> <span class="title">SingleTickerProviderStateMixin</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 当前 tab 页码</span></span><br><span class="line">  <span class="built_in">int</span> _page = <span class="number">0</span>;</span><br><span class="line">  <span class="comment">// tab 页标题</span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; _tabTitles = [</span><br><span class="line">    <span class="string">'Welcome'</span>,</span><br><span class="line">    <span class="string">'Cagegory'</span>,</span><br><span class="line">    <span class="string">'Bookmarks'</span>,</span><br><span class="line">    <span class="string">'Account'</span></span><br><span class="line">  ];</span><br><span class="line">  <span class="comment">// 页控制器</span></span><br><span class="line">  PageController _pageController;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 底部导航项目</span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">List</span>&lt;BottomNavigationBarItem&gt; _bottomTabs = &lt;BottomNavigationBarItem&gt;[...];</span><br><span class="line"></span><br><span class="line">  <span class="comment">// tab栏动画</span></span><br><span class="line">  <span class="keyword">void</span> _handleNavBarTap(<span class="built_in">int</span> index) &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// tab栏页码切换</span></span><br><span class="line">  <span class="keyword">void</span> _handlePageChanged(<span class="built_in">int</span> page) &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 顶部导航</span></span><br><span class="line">  Widget _buildAppBar() &#123;</span><br><span class="line">    <span class="keyword">return</span> Container();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 内容页</span></span><br><span class="line">  Widget _buildPageView() &#123;</span><br><span class="line">    <span class="keyword">return</span> Container();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 底部导航</span></span><br><span class="line">  Widget _buildBottomNavigationBar() &#123;</span><br><span class="line">    <span class="keyword">return</span> Container();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: _buildAppBar(),</span><br><span class="line">      body: _buildPageView(),</span><br><span class="line">      bottomNavigationBar: _buildBottomNavigationBar(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="编写首页代码"><a href="#编写首页代码" class="headerlink" title="编写首页代码"></a>编写首页代码</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-03-26-16-25-42.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>首页代码 lib/pages/main/main.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_MainPageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">MainPage</span>&gt; </span>&#123;</span><br><span class="line">  NewsPageListResponseEntity _newsPageList; <span class="comment">// 新闻翻页</span></span><br><span class="line">  NewsRecommendResponseEntity _newsRecommend; <span class="comment">// 新闻推荐</span></span><br><span class="line">  <span class="built_in">List</span>&lt;CategoryResponseEntity&gt; _categories; <span class="comment">// 分类</span></span><br><span class="line">  <span class="built_in">List</span>&lt;ChannelResponseEntity&gt; _channels; <span class="comment">// 频道</span></span><br><span class="line"></span><br><span class="line">  <span class="built_in">String</span> _selCategoryCode; <span class="comment">// 选中的分类Code</span></span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    _loadAllData();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 读取所有数据</span></span><br><span class="line">  _loadAllData() <span class="keyword">async</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 分类菜单</span></span><br><span class="line">  Widget _buildCategories() &#123;</span><br><span class="line">    <span class="keyword">return</span> Container();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 抽取前先实现业务</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 推荐阅读</span></span><br><span class="line">  Widget _buildRecommend() &#123;</span><br><span class="line">    <span class="keyword">return</span> Container();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 频道</span></span><br><span class="line">  Widget _buildChannels() &#123;</span><br><span class="line">    <span class="keyword">return</span> Container();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 新闻列表</span></span><br><span class="line">  Widget _buildNewsList() &#123;</span><br><span class="line">    <span class="keyword">return</span> Container();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ad 广告条</span></span><br><span class="line">  <span class="comment">// 邮件订阅</span></span><br><span class="line">  Widget _buildEmailSubscribe() &#123;</span><br><span class="line">    <span class="keyword">return</span> Container();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> SingleChildScrollView(</span><br><span class="line">      child: Column(</span><br><span class="line">        children: &lt;Widget&gt;[</span><br><span class="line">          _buildCategories(),</span><br><span class="line">          _buildRecommend(),</span><br><span class="line">          _buildChannels(),</span><br><span class="line">          _buildNewsList(),</span><br><span class="line">          _buildEmailSubscribe(),</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>抽取新闻分类 lib/pages/main/categories_widget.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">Widget newsCategoriesWidget(</span><br><span class="line">    &#123;<span class="built_in">List</span>&lt;CategoryResponseEntity&gt; categories,</span><br><span class="line">    <span class="built_in">String</span> selCategoryCode,</span><br><span class="line">    <span class="built_in">Function</span>(CategoryResponseEntity) onTap&#125;) &#123;</span><br><span class="line">  <span class="keyword">return</span> categories == <span class="keyword">null</span></span><br><span class="line">      ? Container()</span><br><span class="line">      : SingleChildScrollView(</span><br><span class="line">          scrollDirection: Axis.horizontal,</span><br><span class="line">          child: Row(</span><br><span class="line">            children: categories.map&lt;Widget&gt;((item) &#123;</span><br><span class="line">              <span class="keyword">return</span> Container(</span><br><span class="line">                alignment: Alignment.center,</span><br><span class="line">                height: duSetHeight(<span class="number">52</span>),</span><br><span class="line">                padding: EdgeInsets.symmetric(horizontal: <span class="number">8</span>),</span><br><span class="line">                child: GestureDetector(</span><br><span class="line">                  child: Text(</span><br><span class="line">                    item.title,</span><br><span class="line">                    style: TextStyle(</span><br><span class="line">                      color: selCategoryCode == item.code</span><br><span class="line">                          ? AppColors.secondaryElementText</span><br><span class="line">                          : AppColors.primaryText,</span><br><span class="line">                      fontSize: duSetFontSize(<span class="number">18</span>),</span><br><span class="line">                      fontFamily: <span class="string">'Montserrat'</span>,</span><br><span class="line">                      fontWeight: FontWeight.w600,</span><br><span class="line">                    ),</span><br><span class="line">                  ),</span><br><span class="line">                  onTap: () =&gt; onTap(item),</span><br><span class="line">                ),</span><br><span class="line">              );</span><br><span class="line">            &#125;).toList(),</span><br><span class="line">          ),</span><br><span class="line">        );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="蓝湖设计稿"><a href="#蓝湖设计稿" class="headerlink" title="蓝湖设计稿"></a>蓝湖设计稿</h2><p><a href="https://lanhuapp.com/url/lYuz1" target="_blank" rel="noopener">https://lanhuapp.com/url/lYuz1</a><br>密码: gSKl</p><blockquote><p>蓝湖现在收费了，所以查看标记还请自己上传 xd 设计稿<br>商业设计稿文件不好直接分享, 可以加微信联系 ducafecat</p></blockquote><h2 id="YAPI-接口管理"><a href="#YAPI-接口管理" class="headerlink" title="YAPI 接口管理"></a>YAPI 接口管理</h2><p><a href="http://yapi.demo.qunar.com/" target="_blank" rel="noopener">http://yapi.demo.qunar.com/</a></p><h2 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h2><ul><li><a href="https://app.quicktype.io" target="_blank" rel="noopener">json to object quicktype</a></li><li><a href="https://www.telerik.com/download/fiddler-everywhere" target="_blank" rel="noopener">Fiddler 抓包</a></li><li><a href="https://www.iconfont.cn" target="_blank" rel="noopener">iconfont 阿里图标库</a></li><li><a href="https://github.com/ymzuiku/iconfont_builder" target="_blank" rel="noopener">Iconfont 生成工具</a></li></ul><h2 id="VSCode-插件"><a href="#VSCode-插件" class="headerlink" title="VSCode 插件"></a>VSCode 插件</h2><ul><li>Flutter、Dart</li><li><a href="https://marketplace.visualstudio.com/items?itemName=alexisvt.flutter-snippets" target="_blank" rel="noopener">Flutter Widget Snippets</a></li><li><a href="https://marketplace.visualstudio.com/items?itemName=Nash.awesome-flutter-snippets" target="_blank" rel="noopener">Awesome Flutter Snippets</a></li><li><a href="https://marketplace.visualstudio.com/items?itemName=quicktype.quicktype" target="_blank" rel="noopener">Paste JSON as Code</a></li><li><a href="https://marketplace.visualstudio.com/items?itemName=FelixAngelov.bloc" target="_blank" rel="noopener">bloc</a></li></ul><h2 id="视频-1"><a href="#视频-1" class="headerlink" title="视频"></a>视频</h2><ul><li><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">b 站</a></li><li><a href="https://www.youtube.com/watch?v=Uucg6GGGBsY&amp;list=PL274L1n86T80VZR30KaLOKV6jqwTq5E8D" target="_blank" rel="noopener">油管镜像</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="Flutter 实战从零开始" scheme="https://blog.ducafecat.tech/categories/Flutter-%E5%AE%9E%E6%88%98%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 实战从零开始 新闻客户端 - 04 YAPI接口管理、RESTful、生成代码、dio封装</title>
    <link href="https://blog.ducafecat.tech/2020/03/16/flutter-project/flutter-project-news-04-entity-http/"/>
    <id>https://blog.ducafecat.tech/2020/03/16/flutter-project/flutter-project-news-04-entity-http/</id>
    <published>2020-03-15T16:00:00.000Z</published>
    <updated>2020-07-04T06:29:29.891Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="bg.jpg" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h2><ul><li>前后端分离、契约开发模式</li><li>API 接口管理、工具</li><li>RESTful 接口规范</li><li>TOKEN 安全通讯</li><li>自动生成 entity 接口实体类</li><li>dio 封装</li><li>localstorage 本地存储</li><li>密码加密</li></ul><h2 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h2><iframe src="//player.bilibili.com/player.html?bvid=BV1t7411R7tN&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" height="400px"> </iframe><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/ducafecat/flutter_learn_news/releases/tag/v1.0.4" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news/releases/tag/v1.0.4</a></p><h2 id="1-接口管理"><a href="#1-接口管理" class="headerlink" title="1. 接口管理"></a>1. 接口管理</h2><h3 id="1-1-前后端分离、契约模式"><a href="#1-1-前后端分离、契约模式" class="headerlink" title="1.1 前后端分离、契约模式"></a>1.1 前后端分离、契约模式</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-03-17-14-01-41.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="1-2-常见接口管理工具"><a href="#1-2-常见接口管理工具" class="headerlink" title="1.2 常见接口管理工具"></a>1.2 常见接口管理工具</h3><ul><li>yapi<br><a href="https://github.com/YMFE/yapi" target="_blank" rel="noopener">https://github.com/YMFE/yapi</a></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-03-17-14-55-25.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>easymock<br><a href="https://github.com/easy-mock/easy-mock" target="_blank" rel="noopener">https://github.com/easy-mock/easy-mock</a></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-03-17-14-56-43.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>RAP2<br><a href="https://github.com/thx/RAP" target="_blank" rel="noopener">https://github.com/thx/RAP</a></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-03-17-14-54-52.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>swagger<br><a href="https://swagger.io/" target="_blank" rel="noopener">https://swagger.io/</a></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-03-17-14-54-02.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="1-3-yapi-接口管理工具（猫哥推荐）"><a href="#1-3-yapi-接口管理工具（猫哥推荐）" class="headerlink" title="1.3 yapi 接口管理工具（猫哥推荐）"></a>1.3 yapi 接口管理工具（猫哥推荐）</h3><p><a href="http://yapi.demo.qunar.com/" target="_blank" rel="noopener">http://yapi.demo.qunar.com/</a></p><ul><li>输入</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-03-17-14-58-00.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>输出</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-03-17-14-58-20.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="1-4-mock-模拟数据"><a href="#1-4-mock-模拟数据" class="headerlink" title="1.4 mock 模拟数据"></a>1.4 mock 模拟数据</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-03-17-14-59-40.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="1-5-单元测试"><a href="#1-5-单元测试" class="headerlink" title="1.5 单元测试"></a>1.5 单元测试</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-03-17-15-00-25.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="1-6-swagger-导入"><a href="#1-6-swagger-导入" class="headerlink" title="1.6 swagger 导入"></a>1.6 swagger 导入</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-03-17-15-00-49.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="2-restful-接口风格"><a href="#2-restful-接口风格" class="headerlink" title="2. restful 接口风格"></a>2. restful 接口风格</h2><ul><li><a href="https://en.wikipedia.org/wiki/Representational_state_transfer" target="_blank" rel="noopener">REST wiki</a></li><li><a href="http://www.ruanyifeng.com/blog/2011/09/restful.html" target="_blank" rel="noopener">理解 RESTful 架构 阮一峰</a></li><li><a href="http://www.ruanyifeng.com/blog/2014/05/restful_api.html" target="_blank" rel="noopener">RESTful API 设计指南 阮一峰</a></li><li><a href="http://www.ruanyifeng.com/blog/2018/10/restful-api-best-practices.html" target="_blank" rel="noopener">RESTful API 最佳实践 阮一峰</a></li><li><a href="https://www.runoob.com/w3cnote/restful-architecture.html" target="_blank" rel="noopener">RESTful 架构详解</a></li></ul><h3 id="2-1-http-操作方式"><a href="#2-1-http-操作方式" class="headerlink" title="2.1 http 操作方式"></a>2.1 http 操作方式</h3><ul><li>GET 取数据</li><li>POST 新建数据</li><li>PUT 更新全部数据</li><li>PATCH 更新部分数据</li><li>DELETE 删除数据</li></ul><h4 id="例子"><a href="#例子" class="headerlink" title="例子:"></a>例子:</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">GET /zoos：列出所有动物园</span><br><span class="line">POST /zoos：新建一个动物园</span><br><span class="line">GET /zoos/ID：获取某个指定动物园的信息</span><br><span class="line">PUT /zoos/ID：更新某个指定动物园的信息（提供该动物园的全部信息）</span><br><span class="line">PATCH /zoos/ID：更新某个指定动物园的信息（提供该动物园的部分信息）</span><br><span class="line">DELETE /zoos/ID：删除某个动物园</span><br><span class="line">GET /zoos/ID/animals：列出某个指定动物园的所有动物</span><br><span class="line">DELETE /zoos/ID/animals/ID：删除某个指定动物园的指定动物</span><br></pre></td></tr></table></figure><h3 id="2-2-state-状态控制"><a href="#2-2-state-状态控制" class="headerlink" title="2.2 state 状态控制"></a>2.2 state 状态控制</h3><ul><li>200 OK</li><li>400 错误的请求，比如数据结构不对</li><li>401 需要登录认证</li><li>403 已登录，但是当前资源没有授权</li><li>404 找不到，地址错误</li><li>500 服务程序错误</li><li>502 服务网关错误</li><li>503 服务挂了</li><li>504 服务网关超时</li></ul><h3 id="2-3-优秀实践"><a href="#2-3-优秀实践" class="headerlink" title="2.3 优秀实践"></a>2.3 优秀实践</h3><ul><li><a href="https://developer.github.com/v3/" target="_blank" rel="noopener">Github REST API v3</a></li></ul><h2 id="3-token-安全通讯"><a href="#3-token-安全通讯" class="headerlink" title="3. token 安全通讯"></a>3. token 安全通讯</h2><h3 id="3-1-基于令牌的安全机制"><a href="#3-1-基于令牌的安全机制" class="headerlink" title="3.1 基于令牌的安全机制"></a>3.1 基于令牌的安全机制</h3><ul><li>流程</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-03-17-15-58-06.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>思路</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-03-17-16-29-41.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="3-2-Bearer-Type-Access-Token"><a href="#3-2-Bearer-Type-Access-Token" class="headerlink" title="3.2 Bearer Type Access Token"></a>3.2 Bearer Type Access Token</h3><p>在通讯 HTTP HEADER 头中加入</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GET /resource HTTP/1.1</span><br><span class="line">Host: server.example.com</span><br><span class="line">Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c</span><br></pre></td></tr></table></figure><h3 id="3-3-JWT"><a href="#3-3-JWT" class="headerlink" title="3.3 JWT"></a>3.3 JWT</h3><ul><li><a href="https://jwt.io/" target="_blank" rel="noopener">https://jwt.io/</a></li><li><a href="http://www.ruanyifeng.com/blog/2018/07/json_web_token-tutorial.html" target="_blank" rel="noopener">JSON Web Token 入门教程</a></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-03-17-16-03-17.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="4-自动生成-entity"><a href="#4-自动生成-entity" class="headerlink" title="4. 自动生成 entity"></a>4. 自动生成 entity</h2><h3 id="4-1-json-serializable-（官方）"><a href="#4-1-json-serializable-（官方）" class="headerlink" title="4.1 json_serializable （官方）"></a>4.1 json_serializable （官方）</h3><ul><li><a href="https://pub.dev/packages/json_serializable" target="_blank" rel="noopener">https://pub.dev/packages/json_serializable</a></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-03-17-16-37-25.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="4-2-json-to-code-（猫哥推荐）"><a href="#4-2-json-to-code-（猫哥推荐）" class="headerlink" title="4.2 json to code （猫哥推荐）"></a>4.2 json to code （猫哥推荐）</h3><ul><li><a href="https://app.quicktype.io/" target="_blank" rel="noopener">https://app.quicktype.io/</a></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-03-17-16-35-57.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>vscode 插件</li></ul><p><a href="https://marketplace.visualstudio.com/items?itemName=quicktype.quicktype" target="_blank" rel="noopener">https://marketplace.visualstudio.com/items?itemName=quicktype.quicktype</a></p><h2 id="5-dio-封装"><a href="#5-dio-封装" class="headerlink" title="5. dio 封装"></a>5. dio 封装</h2><h3 id="5-1-单例模式"><a href="#5-1-单例模式" class="headerlink" title="5.1 单例模式"></a>5.1 单例模式</h3><ul><li>dio</li></ul><p><a href="https://pub.dev/packages/dio" target="_blank" rel="noopener">https://pub.dev/packages/dio</a></p><ul><li>lib/common/utils/http.dart</li></ul><p>单例常见封装方式</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HttpUtil</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> HttpUtil _instance = HttpUtil._internal();</span><br><span class="line">  <span class="keyword">factory</span> HttpUtil() =&gt; _instance;</span><br><span class="line"></span><br><span class="line">  Dio dio;</span><br><span class="line">  CancelToken cancelToken = <span class="keyword">new</span> CancelToken();</span><br><span class="line"></span><br><span class="line">  HttpUtil._internal() &#123;</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure><h3 id="5-2-维护-token"><a href="#5-2-维护-token" class="headerlink" title="5.2 维护 token"></a>5.2 维护 token</h3><p>从本地 storage 中读取</p><ul><li>localstorage</li></ul><p><a href="https://pub.flutter-io.cn/packages/localstorage" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/localstorage</a></p><ul><li>getLocalOptions()</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Options getLocalOptions() &#123;</span><br><span class="line">  Options options;</span><br><span class="line">  <span class="built_in">String</span> token = StorageUtil().getItem(STORAGE_USER_TOKEN_KEY);</span><br><span class="line">  <span class="keyword">if</span> (token != <span class="keyword">null</span>) &#123;</span><br><span class="line">    options = Options(headers: &#123;</span><br><span class="line">      <span class="string">'Authorization'</span>: <span class="string">'Bearer $token'</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> options;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-3-处理异常"><a href="#5-3-处理异常" class="headerlink" title="5.3 处理异常"></a>5.3 处理异常</h3><p>格式化，错误信息，进行差别对待</p><ul><li>createErrorEntity()</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line">ErrorEntity createErrorEntity(DioError error) &#123;</span><br><span class="line">  <span class="keyword">switch</span> (error.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> DioErrorType.CANCEL:</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="keyword">return</span> ErrorEntity(code: <span class="number">-1</span>, message: <span class="string">"请求取消"</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> DioErrorType.CONNECT_TIMEOUT:</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="keyword">return</span> ErrorEntity(code: <span class="number">-1</span>, message: <span class="string">"连接超时"</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> DioErrorType.SEND_TIMEOUT:</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="keyword">return</span> ErrorEntity(code: <span class="number">-1</span>, message: <span class="string">"请求超时"</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> DioErrorType.RECEIVE_TIMEOUT:</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="keyword">return</span> ErrorEntity(code: <span class="number">-1</span>, message: <span class="string">"响应超时"</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> DioErrorType.RESPONSE:</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          <span class="built_in">int</span> errCode = error.response.statusCode;</span><br><span class="line">          <span class="comment">// String errMsg = error.response.statusMessage;</span></span><br><span class="line">          <span class="comment">// return ErrorEntity(code: errCode, message: errMsg);</span></span><br><span class="line">          <span class="keyword">switch</span> (errCode) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">400</span>:</span><br><span class="line">              &#123;</span><br><span class="line">                <span class="keyword">return</span> ErrorEntity(code: errCode, message: <span class="string">"请求语法错误"</span>);</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">401</span>:</span><br><span class="line">              &#123;</span><br><span class="line">                <span class="keyword">return</span> ErrorEntity(code: errCode, message: <span class="string">"没有权限"</span>);</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">403</span>:</span><br><span class="line">              &#123;</span><br><span class="line">                <span class="keyword">return</span> ErrorEntity(code: errCode, message: <span class="string">"服务器拒绝执行"</span>);</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">404</span>:</span><br><span class="line">              &#123;</span><br><span class="line">                <span class="keyword">return</span> ErrorEntity(code: errCode, message: <span class="string">"无法连接服务器"</span>);</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">405</span>:</span><br><span class="line">              &#123;</span><br><span class="line">                <span class="keyword">return</span> ErrorEntity(code: errCode, message: <span class="string">"请求方法被禁止"</span>);</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">500</span>:</span><br><span class="line">              &#123;</span><br><span class="line">                <span class="keyword">return</span> ErrorEntity(code: errCode, message: <span class="string">"服务器内部错误"</span>);</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">502</span>:</span><br><span class="line">              &#123;</span><br><span class="line">                <span class="keyword">return</span> ErrorEntity(code: errCode, message: <span class="string">"无效的请求"</span>);</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">503</span>:</span><br><span class="line">              &#123;</span><br><span class="line">                <span class="keyword">return</span> ErrorEntity(code: errCode, message: <span class="string">"服务器挂了"</span>);</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">505</span>:</span><br><span class="line">              &#123;</span><br><span class="line">                <span class="keyword">return</span> ErrorEntity(code: errCode, message: <span class="string">"不支持HTTP协议请求"</span>);</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">              &#123;</span><br><span class="line">                <span class="comment">// return ErrorEntity(code: errCode, message: "未知错误");</span></span><br><span class="line">                <span class="keyword">return</span> ErrorEntity(</span><br><span class="line">                    code: errCode, message: error.response.statusMessage);</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125; on Exception <span class="keyword">catch</span> (_) &#123;</span><br><span class="line">          <span class="keyword">return</span> ErrorEntity(code: <span class="number">-1</span>, message: <span class="string">"未知错误"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="keyword">return</span> ErrorEntity(code: <span class="number">-1</span>, message: error.message);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="6-登录调用"><a href="#6-登录调用" class="headerlink" title="6. 登录调用"></a>6. 登录调用</h2><h3 id="6-1-编写-api-接口"><a href="#6-1-编写-api-接口" class="headerlink" title="6.1 编写 api 接口"></a>6.1 编写 api 接口</h3><ul><li>lib/common/apis/user.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/common/entitys/entitys.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/common/utils/utils.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="markdown">/// 用户</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserAPI</span> </span>&#123;</span><br><span class="line">  <span class="comment"><span class="markdown">/// 登录</span></span></span><br><span class="line">  <span class="keyword">static</span> Future&lt;UserResponseEntity&gt; login(&#123;UserRequestEntity params&#125;) <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> response = <span class="keyword">await</span> HttpUtil().post(<span class="string">'/user/login'</span>, params: params);</span><br><span class="line">    <span class="keyword">return</span> UserResponseEntity.fromJson(response);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6-2-密码加密"><a href="#6-2-密码加密" class="headerlink" title="6.2 密码加密"></a>6.2 密码加密</h3><ul><li>crypto</li></ul><p><a href="https://pub.dev/packages/crypto" target="_blank" rel="noopener">https://pub.dev/packages/crypto</a></p><ul><li>lib/common/utils/security.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'dart:convert'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:crypto/crypto.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="markdown">/// SHA256</span></span></span><br><span class="line"><span class="built_in">String</span> duSHA256(<span class="built_in">String</span> input) &#123;</span><br><span class="line">  <span class="built_in">String</span> salt = <span class="string">'EIpWsyfiy@R@X#qn17!StJNdZK1fFF8iV6ffN!goZkqt#JxO'</span>; <span class="comment">// 加盐</span></span><br><span class="line">  <span class="keyword">var</span> bytes = utf8.encode(input + salt);</span><br><span class="line">  <span class="keyword">var</span> digest = sha256.convert(bytes);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> digest.toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6-3-调用接口"><a href="#6-3-调用接口" class="headerlink" title="6.3 调用接口"></a>6.3 调用接口</h3><ul><li>lib/pages/sign_in/sign_in.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 执行登录操作</span></span><br><span class="line">_handleSignIn() <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (!duIsEmail(_emailController.value.text)) &#123;</span><br><span class="line">    toastInfo(msg: <span class="string">'请正确输入邮件'</span>);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (!duCheckStringLength(_passController.value.text, <span class="number">6</span>)) &#123;</span><br><span class="line">    toastInfo(msg: <span class="string">'密码不能小于6位'</span>);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  UserRequestEntity params = UserRequestEntity(</span><br><span class="line">    email: _emailController.value.text,</span><br><span class="line">    password: duSHA256(_passController.value.text),</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  UserResponseEntity res = <span class="keyword">await</span> UserAPI.login(params: params);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 写本地 access_token , 不写全局，业务：离线登录</span></span><br><span class="line">  <span class="comment">// 全局数据 gUser</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="YAPI-接口管理"><a href="#YAPI-接口管理" class="headerlink" title="YAPI 接口管理"></a>YAPI 接口管理</h2><p><a href="http://yapi.demo.qunar.com/" target="_blank" rel="noopener">http://yapi.demo.qunar.com/</a></p><h2 id="蓝湖设计稿"><a href="#蓝湖设计稿" class="headerlink" title="蓝湖设计稿"></a>蓝湖设计稿</h2><p><a href="https://lanhuapp.com/url/lYuz1" target="_blank" rel="noopener">https://lanhuapp.com/url/lYuz1</a><br>密码: gSKl</p><blockquote><p>蓝湖现在收费了，所以查看标记还请自己上传 xd 设计稿<br>商业设计稿文件不好直接分享, 可以加微信联系 ducafecat</p></blockquote><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><p>RESTful</p><ul><li><a href="https://en.wikipedia.org/wiki/Representational_state_transfer" target="_blank" rel="noopener">REST wiki</a></li><li><a href="http://www.ruanyifeng.com/blog/2011/09/restful.html" target="_blank" rel="noopener">理解 RESTful 架构 阮一峰</a></li><li><a href="http://www.ruanyifeng.com/blog/2014/05/restful_api.html" target="_blank" rel="noopener">RESTful API 设计指南 阮一峰</a></li><li><a href="http://www.ruanyifeng.com/blog/2018/10/restful-api-best-practices.html" target="_blank" rel="noopener">RESTful API 最佳实践 阮一峰</a></li><li><a href="https://www.runoob.com/w3cnote/restful-architecture.html" target="_blank" rel="noopener">RESTful 架构详解</a></li></ul></li><li><p>Flutter packages</p><ul><li><a href="https://pub.flutter-io.cn/packages/localstorage" target="_blank" rel="noopener">localstorage</a></li><li><a href="https://pub.dev/packages/json_serializable" target="_blank" rel="noopener">json_serializable</a></li><li><a href="https://pub.dev/packages/dio" target="_blank" rel="noopener">dio</a></li><li><a href="https://pub.dev/packages/crypto" target="_blank" rel="noopener">crypto</a></li></ul></li><li><p>VSCode 插件</p><ul><li><a href="https://marketplace.visualstudio.com/items?itemName=Nash.awesome-flutter-snippets" target="_blank" rel="noopener">Awesome Flutter Snippets</a></li><li><a href="https://marketplace.visualstudio.com/items?itemName=quicktype.quicktype" target="_blank" rel="noopener">Paste JSON as Code</a></li></ul></li></ul><h2 id="视频-1"><a href="#视频-1" class="headerlink" title="视频"></a>视频</h2><ul><li><a href="https://space.bilibili.com/404904528/channel/detail?cid=106755" target="_blank" rel="noopener">b 站</a></li><li><a href="https://www.youtube.com/watch?v=Uucg6GGGBsY&amp;list=PL274L1n86T80VZR30KaLOKV6jqwTq5E8D" target="_blank" rel="noopener">油管镜像</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="Flutter 实战从零开始" scheme="https://blog.ducafecat.tech/categories/Flutter-%E5%AE%9E%E6%88%98%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 实战从零开始 新闻客户端 - 03 静态路由、组件抽取、登录注册界面</title>
    <link href="https://blog.ducafecat.tech/2020/03/12/flutter-project/flutter-project-news-03-sign-in-up/"/>
    <id>https://blog.ducafecat.tech/2020/03/12/flutter-project/flutter-project-news-03-sign-in-up/</id>
    <published>2020-03-11T16:00:00.000Z</published>
    <updated>2021-02-03T09:05:33.390Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="bg.jpg" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h2><ul><li>静态路由</li><li>带阴影的椭圆图标</li><li>输入有效性校验</li><li>组件抽取方法</li><li>通用组件、业务组件</li><li>程序目录组织</li><li>抽取透明导航栏</li><li>toast 提示组件</li></ul><h2 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h2><iframe src="//player.bilibili.com/player.html?bvid=BV1rE411G7se&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" height="400px"> </iframe><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/ducafecat/flutter_learn_news/releases/tag/v1.0.3" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news/releases/tag/v1.0.3</a></p><h2 id="1-静态路由"><a href="#1-静态路由" class="headerlink" title="1 静态路由"></a>1 静态路由</h2><h3 id="1-1-定义静态路由"><a href="#1-1-定义静态路由" class="headerlink" title="1.1 定义静态路由"></a>1.1 定义静态路由</h3><ul><li><p>登录页 lib/pages/sign_in/sign_in.dart</p></li><li><p>注册页 lib/pages/sign_up/sign_up.dart</p></li><li><p>静态路由 lib/routes.dart</p></li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/pages/sign_in/sign_in.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/pages/sign_up/sign_up.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="markdown">/// 静态路由</span></span></span><br><span class="line"><span class="keyword">var</span> staticRoutes = &#123;</span><br><span class="line">  <span class="string">"/sign-in"</span>: (context) =&gt; SignInPage(), <span class="comment">// 登录</span></span><br><span class="line">  <span class="string">"/sign-up"</span>: (context) =&gt; SignUpPage(), <span class="comment">// 注册</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="1-2-注册静态路由"><a href="#1-2-注册静态路由" class="headerlink" title="1.2 注册静态路由"></a>1.2 注册静态路由</h3><ul><li>lib/main.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/pages/welcome/welcome.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/routes.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() =&gt; runApp(MyApp());</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      title: <span class="string">'ducafecat.tech'</span>,</span><br><span class="line">      home: WelcomePage(),</span><br><span class="line">      routes: staticRoutes,</span><br><span class="line">      debugShowCheckedModeBanner: <span class="keyword">false</span>,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-登录界面"><a href="#2-登录界面" class="headerlink" title="2 登录界面"></a>2 登录界面</h2><h3 id="2-1-维护色彩常量"><a href="#2-1-维护色彩常量" class="headerlink" title="2.1 维护色彩常量"></a>2.1 维护色彩常量</h3><ul><li>lib/common/values/colors.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'dart:ui'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AppColors</span> </span>&#123;</span><br><span class="line">  <span class="comment"><span class="markdown">/// 主背景 白色</span></span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> Color primaryBackground = Color.fromARGB(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 主文本 灰色</span></span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> Color primaryText = Color.fromARGB(<span class="number">255</span>, <span class="number">45</span>, <span class="number">45</span>, <span class="number">47</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 主控件-背景 蓝色</span></span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> Color primaryElement = Color.fromARGB(<span class="number">255</span>, <span class="number">41</span>, <span class="number">103</span>, <span class="number">255</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 主控件-文本 白色</span></span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> Color primaryElementText = Color.fromARGB(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// *****************************************</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 第二种控件-背景色 淡灰色</span></span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> Color secondaryElement = Color.fromARGB(<span class="number">255</span>, <span class="number">246</span>, <span class="number">246</span>, <span class="number">246</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 第二种控件-文本 浅蓝色</span></span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> Color secondaryElementText = Color.fromARGB(<span class="number">255</span>, <span class="number">41</span>, <span class="number">103</span>, <span class="number">255</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// *****************************************</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 第三种控件-背景色 石墨色</span></span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> Color thirdElement = Color.fromARGB(<span class="number">255</span>, <span class="number">45</span>, <span class="number">45</span>, <span class="number">47</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-2-程序结构"><a href="#2-2-程序结构" class="headerlink" title="2.2 程序结构"></a>2.2 程序结构</h3><ul><li>lib/pages/sign_in/sign_in.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/common/utils/utils.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/common/values/values.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/common/widgets/widgets.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SignInPage</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  SignInPage(&#123;Key key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _SignInPageState createState() =&gt; _SignInPageState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_SignInPageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">SignInPage</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// logo</span></span><br><span class="line">  Widget _buildLogo() &#123;</span><br><span class="line">    <span class="keyword">return</span> Container();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 登录表单</span></span><br><span class="line">  Widget _buildInputForm() &#123;</span><br><span class="line">    <span class="keyword">return</span> Container();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 第三方登录</span></span><br><span class="line">  Widget _buildThirdPartyLogin() &#123;</span><br><span class="line">    <span class="keyword">return</span> Container();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 注册按钮</span></span><br><span class="line">  Widget _buildSignupButton() &#123;</span><br><span class="line">    <span class="keyword">return</span> Container();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      resizeToAvoidBottomInset: <span class="keyword">false</span>,</span><br><span class="line">      body: Center(</span><br><span class="line">        child: Column(</span><br><span class="line">          children: &lt;Widget&gt;[</span><br><span class="line">            _buildLogo(),</span><br><span class="line">            _buildInputForm(),</span><br><span class="line">            Spacer(),</span><br><span class="line">            _buildThirdPartyLogin(),</span><br><span class="line">            _buildSignupButton(),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-3-画带阴影的椭圆图标"><a href="#2-3-画带阴影的椭圆图标" class="headerlink" title="2.3 画带阴影的椭圆图标"></a>2.3 画带阴影的椭圆图标</h3><ul><li>lib/pages/sign_in/sign_in.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// logo</span></span><br><span class="line">Widget _buildLogo() &#123;</span><br><span class="line">  <span class="keyword">return</span> Container(</span><br><span class="line">    width: duSetWidth(<span class="number">110</span>),</span><br><span class="line">    margin: EdgeInsets.only(top: duSetHeight(<span class="number">40</span> + <span class="number">44.0</span>)), <span class="comment">// 顶部系统栏 44px</span></span><br><span class="line">    child: Column(</span><br><span class="line">      crossAxisAlignment: CrossAxisAlignment.stretch,</span><br><span class="line">      children: [</span><br><span class="line">        Container(</span><br><span class="line">          height: duSetWidth(<span class="number">76</span>),</span><br><span class="line">          width: duSetWidth(<span class="number">76</span>),</span><br><span class="line">          margin: EdgeInsets.symmetric(horizontal: duSetWidth(<span class="number">15</span>)),</span><br><span class="line">          child: Stack(</span><br><span class="line">            alignment: Alignment.center,</span><br><span class="line">            children: [</span><br><span class="line">              Positioned(</span><br><span class="line">                left: <span class="number">0</span>,</span><br><span class="line">                top: <span class="number">0</span>,</span><br><span class="line">                right: <span class="number">0</span>,</span><br><span class="line">                child: Container(</span><br><span class="line">                  height: duSetWidth(<span class="number">76</span>),</span><br><span class="line">                  decoration: BoxDecoration(</span><br><span class="line">                    color: AppColors.primaryBackground,</span><br><span class="line">                    boxShadow: [</span><br><span class="line">                      Shadows.primaryShadow,</span><br><span class="line">                    ],</span><br><span class="line">                    borderRadius: BorderRadius.all(</span><br><span class="line">                        Radius.circular(duSetWidth(<span class="number">76</span> * <span class="number">0.5</span>))), <span class="comment">// 父容器的50%</span></span><br><span class="line">                  ),</span><br><span class="line">                  child: Container(),</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">              Positioned(</span><br><span class="line">                top: duSetWidth(<span class="number">13</span>),</span><br><span class="line">                child: Image.asset(</span><br><span class="line">                  <span class="string">"assets/images/logo.png"</span>,</span><br><span class="line">                  fit: BoxFit.none,</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">            ],</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">        Container(</span><br><span class="line">          margin: EdgeInsets.only(top: duSetHeight(<span class="number">15</span>)),</span><br><span class="line">          child: Text(</span><br><span class="line">            <span class="string">"SECTOR"</span>,</span><br><span class="line">            textAlign: TextAlign.center,</span><br><span class="line">            style: TextStyle(</span><br><span class="line">              color: AppColors.primaryText,</span><br><span class="line">              fontFamily: <span class="string">"Montserrat"</span>,</span><br><span class="line">              fontWeight: FontWeight.w600,</span><br><span class="line">              fontSize: duSetFontSize(<span class="number">24</span>),</span><br><span class="line">              height: <span class="number">1</span>,</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">        Text(</span><br><span class="line">          <span class="string">"news"</span>,</span><br><span class="line">          textAlign: TextAlign.center,</span><br><span class="line">          style: TextStyle(</span><br><span class="line">            color: AppColors.primaryText,</span><br><span class="line">            fontFamily: <span class="string">"Avenir"</span>,</span><br><span class="line">            fontWeight: FontWeight.w400,</span><br><span class="line">            fontSize: duSetFontSize(<span class="number">16</span>),</span><br><span class="line">            height: <span class="number">1</span>,</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ],</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-4-抽取输入框"><a href="#2-4-抽取输入框" class="headerlink" title="2.4 抽取输入框"></a>2.4 抽取输入框</h3><ul><li>lib/common/widgets/input.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="markdown">/// 输入框</span></span></span><br><span class="line">Widget inputTextEdit(&#123;</span><br><span class="line">  <span class="meta">@required</span> TextEditingController controller,</span><br><span class="line">  TextInputType keyboardType = TextInputType.text,</span><br><span class="line">  <span class="built_in">String</span> hintText,</span><br><span class="line">  <span class="built_in">bool</span> isPassword = <span class="keyword">false</span>,</span><br><span class="line">  <span class="built_in">double</span> marginTop = <span class="number">15</span>,</span><br><span class="line">&#125;) &#123;</span><br><span class="line">  <span class="keyword">return</span> Container(</span><br><span class="line">    height: duSetHeight(<span class="number">44</span>),</span><br><span class="line">    margin: EdgeInsets.only(top: duSetHeight(marginTop)),</span><br><span class="line">    decoration: BoxDecoration(</span><br><span class="line">      color: AppColors.secondaryElement,</span><br><span class="line">      borderRadius: Radii.k6pxRadius,</span><br><span class="line">    ),</span><br><span class="line">    child: TextField(</span><br><span class="line">      controller: controller,</span><br><span class="line">      keyboardType: keyboardType,</span><br><span class="line">      decoration: InputDecoration(</span><br><span class="line">        hintText: hintText,</span><br><span class="line">        contentPadding: EdgeInsets.fromLTRB(<span class="number">20</span>, <span class="number">10</span>, <span class="number">0</span>, <span class="number">9</span>),</span><br><span class="line">        border: InputBorder.none,</span><br><span class="line">      ),</span><br><span class="line">      style: TextStyle(</span><br><span class="line">        color: AppColors.primaryText,</span><br><span class="line">        fontFamily: <span class="string">"Avenir"</span>,</span><br><span class="line">        fontWeight: FontWeight.w400,</span><br><span class="line">        fontSize: duSetFontSize(<span class="number">18</span>),</span><br><span class="line">      ),</span><br><span class="line">      maxLines: <span class="number">1</span>,</span><br><span class="line">      autocorrect: <span class="keyword">false</span>, <span class="comment">// 自动纠正</span></span><br><span class="line">      obscureText: isPassword, <span class="comment">// 隐藏输入内容, 密码框</span></span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-5-抽取扁平按钮"><a href="#2-5-抽取扁平按钮" class="headerlink" title="2.5 抽取扁平按钮"></a>2.5 抽取扁平按钮</h3><ul><li>lib/common/widgets/button.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="markdown">/// 扁平圆角按钮</span></span></span><br><span class="line">Widget btnFlatButtonWidget(&#123;</span><br><span class="line">  <span class="meta">@required</span> VoidCallback onPressed,</span><br><span class="line">  <span class="built_in">double</span> width = <span class="number">140</span>,</span><br><span class="line">  <span class="built_in">double</span> height = <span class="number">44</span>,</span><br><span class="line">  Color gbColor = AppColors.primaryElement,</span><br><span class="line">  <span class="built_in">String</span> title = <span class="string">"button"</span>,</span><br><span class="line">  Color fontColor = AppColors.primaryElementText,</span><br><span class="line">  <span class="built_in">double</span> fontSize = <span class="number">18</span>,</span><br><span class="line">  <span class="built_in">String</span> fontName = <span class="string">"Montserrat"</span>,</span><br><span class="line">  FontWeight fontWeight = FontWeight.w400,</span><br><span class="line">&#125;) &#123;</span><br><span class="line">  <span class="keyword">return</span> Container(</span><br><span class="line">    width: duSetWidth(width),</span><br><span class="line">    height: duSetHeight(height),</span><br><span class="line">    child: FlatButton(</span><br><span class="line">      onPressed: onPressed,</span><br><span class="line">      color: gbColor,</span><br><span class="line">      shape: RoundedRectangleBorder(</span><br><span class="line">        borderRadius: Radii.k6pxRadius,</span><br><span class="line">      ),</span><br><span class="line">      child: Text(</span><br><span class="line">        title,</span><br><span class="line">        textAlign: TextAlign.center,</span><br><span class="line">        style: TextStyle(</span><br><span class="line">          color: fontColor,</span><br><span class="line">          fontFamily: fontName,</span><br><span class="line">          fontWeight: fontWeight,</span><br><span class="line">          fontSize: duSetFontSize(fontSize),</span><br><span class="line">          height: <span class="number">1</span>,</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-6-抽取社交登录按钮"><a href="#2-6-抽取社交登录按钮" class="headerlink" title="2.6 抽取社交登录按钮"></a>2.6 抽取社交登录按钮</h3><ul><li>lib/common/widgets/button.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="markdown">/// 第三方按钮</span></span></span><br><span class="line">Widget btnFlatButtonBorderOnlyWidget(&#123;</span><br><span class="line">  <span class="meta">@required</span> VoidCallback onPressed,</span><br><span class="line">  <span class="built_in">double</span> width = <span class="number">88</span>,</span><br><span class="line">  <span class="built_in">double</span> height = <span class="number">44</span>,</span><br><span class="line">  <span class="built_in">String</span> iconFileName,</span><br><span class="line">&#125;) &#123;</span><br><span class="line">  <span class="keyword">return</span> Container(</span><br><span class="line">    width: duSetWidth(width),</span><br><span class="line">    height: duSetHeight(height),</span><br><span class="line">    child: FlatButton(</span><br><span class="line">      onPressed: onPressed,</span><br><span class="line">      shape: RoundedRectangleBorder(</span><br><span class="line">        side: Borders.primaryBorder,</span><br><span class="line">        borderRadius: Radii.k6pxRadius,</span><br><span class="line">      ),</span><br><span class="line">      child: Image.asset(</span><br><span class="line">        <span class="string">"assets/images/icons-$iconFileName.png"</span>,</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-7-封装-toast-提示框"><a href="#2-7-封装-toast-提示框" class="headerlink" title="2.7 封装 toast 提示框"></a>2.7 封装 toast 提示框</h3><ul><li>lib/common/widgets/toast.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Future&lt;<span class="built_in">bool</span>&gt; toastInfo(&#123;</span><br><span class="line">  <span class="meta">@required</span> <span class="built_in">String</span> msg,</span><br><span class="line">  Color backgroundColor = Colors.black,</span><br><span class="line">  Color textColor = Colors.white,</span><br><span class="line">&#125;) <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">await</span> Fluttertoast.showToast(</span><br><span class="line">    msg: msg,</span><br><span class="line">    toastLength: Toast.LENGTH_SHORT,</span><br><span class="line">    gravity: ToastGravity.TOP,</span><br><span class="line">    timeInSecForIos: <span class="number">1</span>,</span><br><span class="line">    backgroundColor: backgroundColor,</span><br><span class="line">    textColor: textColor,</span><br><span class="line">    fontSize: duSetFontSize(<span class="number">16</span>),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-8-数据有效性检验"><a href="#2-8-数据有效性检验" class="headerlink" title="2.8 数据有效性检验"></a>2.8 数据有效性检验</h3><ul><li>lib/pages/sign_in/sign_in.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_SignInPageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">SignInPage</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//email的控制器</span></span><br><span class="line">  <span class="keyword">final</span> TextEditingController _emailController = TextEditingController();</span><br><span class="line">  <span class="comment">//密码的控制器</span></span><br><span class="line">  <span class="keyword">final</span> TextEditingController _passController = TextEditingController();</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 执行登录操作</span></span><br><span class="line">  _handleSignIn() &#123;</span><br><span class="line">    <span class="keyword">if</span> (!duIsEmail(_emailController.value.text)) &#123;</span><br><span class="line">      toastInfo(msg: <span class="string">'请正确输入邮件'</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!duCheckStringLength(_passController.value.text, <span class="number">6</span>)) &#123;</span><br><span class="line">      toastInfo(msg: <span class="string">'密码不能小于6位'</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 登录表单</span></span><br><span class="line">  Widget _buildInputForm() &#123;</span><br><span class="line">    <span class="keyword">return</span> Container(</span><br><span class="line">      width: duSetWidth(<span class="number">295</span>),</span><br><span class="line">      <span class="comment">// height: 204,</span></span><br><span class="line">      margin: EdgeInsets.only(top: duSetHeight(<span class="number">49</span>)),</span><br><span class="line">      child: Column(</span><br><span class="line">        children: [</span><br><span class="line">          <span class="comment">// email input</span></span><br><span class="line">          inputTextEdit(</span><br><span class="line">            controller: _emailController,</span><br><span class="line">            keyboardType: TextInputType.emailAddress,</span><br><span class="line">            hintText: <span class="string">"Email"</span>,</span><br><span class="line">            marginTop: <span class="number">0</span>,</span><br><span class="line">          ),</span><br><span class="line">          <span class="comment">// password input</span></span><br><span class="line">          inputTextEdit(</span><br><span class="line">            controller: _passController,</span><br><span class="line">            keyboardType: TextInputType.visiblePassword,</span><br><span class="line">            hintText: <span class="string">"Password"</span>,</span><br><span class="line">            isPassword: <span class="keyword">true</span>,</span><br><span class="line">          ),</span><br><span class="line"></span><br><span class="line">          <span class="comment">// 注册、登录 横向布局</span></span><br><span class="line">          Container(</span><br><span class="line">            height: duSetHeight(<span class="number">44</span>),</span><br><span class="line">            margin: EdgeInsets.only(top: duSetHeight(<span class="number">15</span>)),</span><br><span class="line">            child: Row(</span><br><span class="line">              children: [</span><br><span class="line">                <span class="comment">// 注册</span></span><br><span class="line">                btnFlatButtonWidget(</span><br><span class="line">                  onPressed: _handleNavSignUp,</span><br><span class="line">                  gbColor: AppColors.thirdElement,</span><br><span class="line">                  title: <span class="string">"Sign up"</span>,</span><br><span class="line">                ),</span><br><span class="line">                Spacer(),</span><br><span class="line">                <span class="comment">// 登录</span></span><br><span class="line">                btnFlatButtonWidget(</span><br><span class="line">                  onPressed: _handleSignIn,</span><br><span class="line">                  gbColor: AppColors.primaryElement,</span><br><span class="line">                  title: <span class="string">"Sign in"</span>,</span><br><span class="line">                ),</span><br><span class="line">              ],</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">          <span class="comment">// Spacer(),</span></span><br><span class="line"></span><br><span class="line">          <span class="comment">// Fogot password</span></span><br><span class="line">          Container(</span><br><span class="line">            height: duSetHeight(<span class="number">22</span>),</span><br><span class="line">            margin: EdgeInsets.only(top: duSetHeight(<span class="number">20</span>)),</span><br><span class="line">            child: FlatButton(</span><br><span class="line">              onPressed: () =&gt; &#123;&#125;,</span><br><span class="line">              child: Text(</span><br><span class="line">                <span class="string">"Fogot password?"</span>,</span><br><span class="line">                textAlign: TextAlign.center,</span><br><span class="line">                style: TextStyle(</span><br><span class="line">                  color: AppColors.secondaryElementText,</span><br><span class="line">                  fontFamily: <span class="string">"Avenir"</span>,</span><br><span class="line">                  fontWeight: FontWeight.w400,</span><br><span class="line">                  fontSize: duSetFontSize(<span class="number">16</span>),</span><br><span class="line">                  height: <span class="number">1</span>, <span class="comment">// 设置下行高，否则字体下沉</span></span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h2 id="3-注册界面"><a href="#3-注册界面" class="headerlink" title="3 注册界面"></a>3 注册界面</h2><h3 id="3-1-程序结构"><a href="#3-1-程序结构" class="headerlink" title="3.1 程序结构"></a>3.1 程序结构</h3><ul><li>lib/pages/sign_up/sign_up.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/common/utils/utils.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/common/values/values.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_ducafecat_news/common/widgets/widgets.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SignUpPage</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  SignUpPage(&#123;Key key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _SignUpPageState createState() =&gt; _SignUpPageState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_SignUpPageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">SignUpPage</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// logo</span></span><br><span class="line">  Widget _buildLogo() &#123;</span><br><span class="line">    <span class="keyword">return</span> Container();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 注册表单</span></span><br><span class="line">  Widget _buildInputForm() &#123;</span><br><span class="line">    <span class="keyword">return</span> Container();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 第三方</span></span><br><span class="line">  Widget _buildThirdPartyLogin() &#123;</span><br><span class="line">    <span class="keyword">return</span> Container();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 有账号</span></span><br><span class="line">  Widget _buildHaveAccountButton() &#123;</span><br><span class="line">    <span class="keyword">return</span> Container();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      resizeToAvoidBottomInset: <span class="keyword">false</span>,</span><br><span class="line">      ...,</span><br><span class="line">      body: Center(</span><br><span class="line">        child: Column(</span><br><span class="line">          children: &lt;Widget&gt;[</span><br><span class="line">            Divider(height: <span class="number">1</span>),</span><br><span class="line">            _buildLogo(),</span><br><span class="line">            _buildInputForm(),</span><br><span class="line">            Spacer(),</span><br><span class="line">            _buildThirdPartyLogin(),</span><br><span class="line">            _buildHaveAccountButton(),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-2-透明导航栏"><a href="#3-2-透明导航栏" class="headerlink" title="3.2 透明导航栏"></a>3.2 透明导航栏</h3><ul><li>lib/common/widgets/app.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="markdown">/// 透明背景 AppBar</span></span></span><br><span class="line">Widget transparentAppBar(&#123;</span><br><span class="line">  <span class="meta">@required</span> BuildContext context,</span><br><span class="line">  <span class="built_in">List</span>&lt;Widget&gt; actions,</span><br><span class="line">&#125;) &#123;</span><br><span class="line">  <span class="keyword">return</span> AppBar(</span><br><span class="line">    backgroundColor: Colors.transparent,</span><br><span class="line">    elevation: <span class="number">0</span>,</span><br><span class="line">    title: Text(<span class="string">''</span>),</span><br><span class="line">    leading: IconButton(</span><br><span class="line">      icon: Icon(</span><br><span class="line">        Icons.arrow_back,</span><br><span class="line">        color: AppColors.primaryText,</span><br><span class="line">      ),</span><br><span class="line">      onPressed: () &#123;</span><br><span class="line">        Navigator.pop(context);</span><br><span class="line">      &#125;,</span><br><span class="line">    ),</span><br><span class="line">    actions: actions,</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>lib/pages/sign_up/sign_up.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@override</span></span><br><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">  <span class="keyword">return</span> Scaffold(</span><br><span class="line">    resizeToAvoidBottomInset: <span class="keyword">false</span>,</span><br><span class="line">    appBar: transparentAppBar(</span><br><span class="line">      context: context,</span><br><span class="line">      actions: &lt;Widget&gt;[</span><br><span class="line">        IconButton(</span><br><span class="line">          icon: Icon(</span><br><span class="line">            Icons.info_outline,</span><br><span class="line">            color: AppColors.primaryText,</span><br><span class="line">          ),</span><br><span class="line">          onPressed: () &#123;</span><br><span class="line">            toastInfo(msg: <span class="string">'这是注册界面'</span>);</span><br><span class="line">          &#125;,</span><br><span class="line">        )</span><br><span class="line">      ],</span><br><span class="line">    ),</span><br></pre></td></tr></table></figure><h3 id="3-2-注册表单"><a href="#3-2-注册表单" class="headerlink" title="3.2 注册表单"></a>3.2 注册表单</h3><ul><li>lib/pages/sign_up/sign_up.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 注册表单</span></span><br><span class="line">Widget _buildInputForm() &#123;</span><br><span class="line">  <span class="keyword">return</span> Container(</span><br><span class="line">    width: duSetWidth(<span class="number">295</span>),</span><br><span class="line">    <span class="comment">// height: 204,</span></span><br><span class="line">    margin: EdgeInsets.only(top: duSetHeight(<span class="number">49</span>)),</span><br><span class="line">    child: Column(</span><br><span class="line">      children: [</span><br><span class="line">        <span class="comment">// fullName input</span></span><br><span class="line">        inputTextEdit(</span><br><span class="line">          controller: _fullnameController,</span><br><span class="line">          keyboardType: TextInputType.text,</span><br><span class="line">          hintText: <span class="string">"Full name"</span>,</span><br><span class="line">          marginTop: <span class="number">0</span>,</span><br><span class="line">        ),</span><br><span class="line">        <span class="comment">// email input</span></span><br><span class="line">        inputTextEdit(</span><br><span class="line">          controller: _emailController,</span><br><span class="line">          keyboardType: TextInputType.emailAddress,</span><br><span class="line">          hintText: <span class="string">"Email"</span>,</span><br><span class="line">        ),</span><br><span class="line">        <span class="comment">// password input</span></span><br><span class="line">        inputTextEdit(</span><br><span class="line">          controller: _passController,</span><br><span class="line">          keyboardType: TextInputType.visiblePassword,</span><br><span class="line">          hintText: <span class="string">"Password"</span>,</span><br><span class="line">          isPassword: <span class="keyword">true</span>,</span><br><span class="line">        ),</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建</span></span><br><span class="line">        Container(</span><br><span class="line">          height: duSetHeight(<span class="number">44</span>),</span><br><span class="line">          margin: EdgeInsets.only(top: duSetHeight(<span class="number">15</span>)),</span><br><span class="line">          child: btnFlatButtonWidget(</span><br><span class="line">            onPressed: () &#123;</span><br><span class="line">              <span class="keyword">if</span> (!duCheckStringLength(_fullnameController.value.text, <span class="number">5</span>)) &#123;</span><br><span class="line">                toastInfo(msg: <span class="string">'用户名不能小于5位'</span>);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="keyword">if</span> (!duIsEmail(_emailController.value.text)) &#123;</span><br><span class="line">                toastInfo(msg: <span class="string">'请正确输入邮件'</span>);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="keyword">if</span> (!duCheckStringLength(_passController.value.text, <span class="number">6</span>)) &#123;</span><br><span class="line">                toastInfo(msg: <span class="string">'密码不能小于6位'</span>);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">              &#125;</span><br><span class="line">              Navigator.pop(context);</span><br><span class="line">            &#125;,</span><br><span class="line">            width: <span class="number">295</span>,</span><br><span class="line">            fontWeight: FontWeight.w600,</span><br><span class="line">            title: <span class="string">"Create an account"</span>,</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">        <span class="comment">// Spacer(),</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// Fogot password</span></span><br><span class="line">        Container(</span><br><span class="line">          height: duSetHeight(<span class="number">22</span>),</span><br><span class="line">          margin: EdgeInsets.only(top: duSetHeight(<span class="number">20</span>)),</span><br><span class="line">          child: FlatButton(</span><br><span class="line">            onPressed: _handleSignUp,</span><br><span class="line">            child: Text(</span><br><span class="line">              <span class="string">"Fogot password?"</span>,</span><br><span class="line">              textAlign: TextAlign.center,</span><br><span class="line">              style: TextStyle(</span><br><span class="line">                color: AppColors.secondaryElementText,</span><br><span class="line">                fontFamily: <span class="string">"Avenir"</span>,</span><br><span class="line">                fontWeight: FontWeight.w400,</span><br><span class="line">                fontSize: duSetFontSize(<span class="number">16</span>),</span><br><span class="line">                height: <span class="number">1</span>, <span class="comment">// 设置下行高，否则字体下沉</span></span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ],</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-3-检验有效性"><a href="#3-3-检验有效性" class="headerlink" title="3.3 检验有效性"></a>3.3 检验有效性</h3><ul><li>lib/pages/sign_up/sign_in.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 执行注册操作</span></span><br><span class="line">_handleSignUp() &#123;</span><br><span class="line">  <span class="keyword">if</span> (!duCheckStringLength(_fullnameController.value.text, <span class="number">5</span>)) &#123;</span><br><span class="line">    toastInfo(msg: <span class="string">'用户名不能小于5位'</span>);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (!duIsEmail(_emailController.value.text)) &#123;</span><br><span class="line">    toastInfo(msg: <span class="string">'请正确输入邮件'</span>);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (!duCheckStringLength(_passController.value.text, <span class="number">6</span>)) &#123;</span><br><span class="line">    toastInfo(msg: <span class="string">'密码不能小于6位'</span>);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  Navigator.pop(context);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-4-社交按钮"><a href="#3-4-社交按钮" class="headerlink" title="3.4 社交按钮"></a>3.4 社交按钮</h3><ul><li>lib/pages/sign_up/sign_up.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第三方</span></span><br><span class="line">Widget _buildThirdPartyLogin() &#123;</span><br><span class="line">  <span class="keyword">return</span> Container(</span><br><span class="line">    width: duSetWidth(<span class="number">295</span>),</span><br><span class="line">    margin: EdgeInsets.only(bottom: duSetHeight(<span class="number">40</span>)),</span><br><span class="line">    child: Column(</span><br><span class="line">      children: &lt;Widget&gt;[</span><br><span class="line">        <span class="comment">// title</span></span><br><span class="line">        Text(</span><br><span class="line">          <span class="string">"Or sign in with social networks"</span>,</span><br><span class="line">          textAlign: TextAlign.center,</span><br><span class="line">          style: TextStyle(</span><br><span class="line">            color: AppColors.primaryText,</span><br><span class="line">            fontFamily: <span class="string">"Avenir"</span>,</span><br><span class="line">            fontWeight: FontWeight.w400,</span><br><span class="line">            fontSize: duSetFontSize(<span class="number">16</span>),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">        <span class="comment">// 按钮</span></span><br><span class="line">        Padding(</span><br><span class="line">          padding: EdgeInsets.only(top: duSetHeight(<span class="number">20</span>)),</span><br><span class="line">          child: Row(</span><br><span class="line">            children: &lt;Widget&gt;[</span><br><span class="line">              btnFlatButtonBorderOnlyWidget(</span><br><span class="line">                onPressed: () &#123;&#125;,</span><br><span class="line">                width: <span class="number">88</span>,</span><br><span class="line">                iconFileName: <span class="string">"twitter"</span>,</span><br><span class="line">              ),</span><br><span class="line">              Spacer(),</span><br><span class="line">              btnFlatButtonBorderOnlyWidget(</span><br><span class="line">                onPressed: () &#123;&#125;,</span><br><span class="line">                width: <span class="number">88</span>,</span><br><span class="line">                iconFileName: <span class="string">"google"</span>,</span><br><span class="line">              ),</span><br><span class="line">              Spacer(),</span><br><span class="line">              btnFlatButtonBorderOnlyWidget(</span><br><span class="line">                onPressed: () &#123;&#125;,</span><br><span class="line">                width: <span class="number">88</span>,</span><br><span class="line">                iconFileName: <span class="string">"facebook"</span>,</span><br><span class="line">              ),</span><br><span class="line">            ],</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ],</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-5-返回按钮"><a href="#3-5-返回按钮" class="headerlink" title="3.5 返回按钮"></a>3.5 返回按钮</h3><ul><li>lib/pages/sign_up/sign_up.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 返回上一页</span></span><br><span class="line">_handleNavPop() &#123;</span><br><span class="line">  Navigator.pop(context);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Widget _buildHaveAccountButton() &#123;</span><br><span class="line">  <span class="keyword">return</span> Container(</span><br><span class="line">    margin: EdgeInsets.only(bottom: duSetHeight(<span class="number">20</span>)),</span><br><span class="line">    child: btnFlatButtonWidget(</span><br><span class="line">      onPressed: _handleNavPop,</span><br><span class="line">      width: <span class="number">294</span>,</span><br><span class="line">      gbColor: AppColors.secondaryElement,</span><br><span class="line">      fontColor: AppColors.primaryText,</span><br><span class="line">      title: <span class="string">"I have an account"</span>,</span><br><span class="line">      fontWeight: FontWeight.w500,</span><br><span class="line">      fontSize: <span class="number">16</span>,</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="蓝湖设计稿"><a href="#蓝湖设计稿" class="headerlink" title="蓝湖设计稿"></a>蓝湖设计稿</h2><p><a href="https://lanhuapp.com/url/lYuz1" target="_blank" rel="noopener">https://lanhuapp.com/url/lYuz1</a><br>密码: gSKl</p><blockquote><p>蓝湖现在收费了，所以查看标记还请自己上传 xd 设计稿<br>商业设计稿文件不好直接分享, 可以加微信联系 ducafecat</p></blockquote><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://flutter.dev/docs/development/ui/widgets" target="_blank" rel="noopener">widgets</a></li><li><a href="https://pub.flutter-io.cn/packages/fluttertoast" target="_blank" rel="noopener">fluttertoast</a></li></ul><h2 id="视频-1"><a href="#视频-1" class="headerlink" title="视频"></a>视频</h2><ul><li><a href="https://www.bilibili.com/video/av96034282/" target="_blank" rel="noopener">b 站</a></li><li><a href="https://www.youtube.com/watch?v=rF1KYE_QJWU" target="_blank" rel="noopener">油管镜像</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="Flutter 实战从零开始" scheme="https://blog.ducafecat.tech/categories/Flutter-%E5%AE%9E%E6%88%98%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 实战从零开始 新闻客户端 - 02 设计稿适配、加入图片字体资源、欢迎界面</title>
    <link href="https://blog.ducafecat.tech/2020/02/27/flutter-project/flutter-project-news-02-weclome/"/>
    <id>https://blog.ducafecat.tech/2020/02/27/flutter-project/flutter-project-news-02-weclome/</id>
    <published>2020-02-26T16:00:00.000Z</published>
    <updated>2020-07-04T06:25:22.533Z</updated>
    
    <content type="html"><![CDATA[<h2 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h2><ul><li>加入图片资源</li><li>加入字体资源</li><li>设计稿适配</li><li>编写界面代码的逻辑和组织</li></ul><h2 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h2><iframe src="//player.bilibili.com/player.html?bvid=BV19E411s7YM&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" height="400px"> </iframe><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/ducafecat/flutter_learn_news/releases/tag/v1.0.2" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news/releases/tag/v1.0.2</a></p><h2 id="1-加入图片资源"><a href="#1-加入图片资源" class="headerlink" title="1 加入图片资源"></a>1 加入图片资源</h2><h3 id="1-1-flutter-图片资源规则"><a href="#1-1-flutter-图片资源规则" class="headerlink" title="1.1 flutter 图片资源规则"></a>1.1 flutter 图片资源规则</h3><ul><li>官方说明</li></ul><p><a href="https://flutter.dev/docs/development/ui/assets-and-images" target="_blank" rel="noopener">https://flutter.dev/docs/development/ui/assets-and-images</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-03-02-11-29-01.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>按这个规则编排，flutter 自动适配分辨率图片</p><ul><li>assets 目录</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-03-02-11-29-58.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>yaml 配置</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">assets:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">assets/images/</span></span><br></pre></td></tr></table></figure><ul><li>代码调用</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Image.asset(<span class="string">"assets/images/logo.png"</span>)</span><br></pre></td></tr></table></figure><h3 id="1-2-蓝湖切图"><a href="#1-2-蓝湖切图" class="headerlink" title="1.2 蓝湖切图"></a>1.2 蓝湖切图</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-03-02-11-32-56.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>注意选着下 ios 目标，这样会自动切图 1x 2x 3x 三种格式</p><h2 id="2-加入字体资源"><a href="#2-加入字体资源" class="headerlink" title="2 加入字体资源"></a>2 加入字体资源</h2><ul><li>官方说明</li></ul><p><a href="https://flutter.dev/docs/cookbook/design/fonts" target="_blank" rel="noopener">https://flutter.dev/docs/cookbook/design/fonts</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-03-02-11-36-13.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>assets 目录</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-03-02-11-36-48.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>只上传用到的 ttf 字体，这样能控制打包大小</p><ul><li>yaml 配置</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">fonts:</span></span><br><span class="line"><span class="attr">  - family:</span> <span class="string">Avenir</span></span><br><span class="line"><span class="attr">    fonts:</span></span><br><span class="line"><span class="attr">      - asset:</span> <span class="string">assets/fonts/Avenir-Book.ttf</span></span><br><span class="line"><span class="attr">        weight:</span> <span class="number">400</span></span><br><span class="line"><span class="attr">  - family:</span> <span class="string">Montserrat</span></span><br><span class="line"><span class="attr">    fonts:</span></span><br><span class="line"><span class="attr">      - asset:</span> <span class="string">assets/fonts/Montserrat-SemiBold.ttf</span></span><br><span class="line"><span class="attr">        weight:</span> <span class="number">600</span></span><br></pre></td></tr></table></figure><ul><li>代码调用</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-03-02-11-37-48.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="3-编写欢迎界面"><a href="#3-编写欢迎界面" class="headerlink" title="3 编写欢迎界面"></a>3 编写欢迎界面</h2><h3 id="3-1-从上到下、从左到右、由大到小"><a href="#3-1-从上到下、从左到右、由大到小" class="headerlink" title="3.1 从上到下、从左到右、由大到小"></a>3.1 从上到下、从左到右、由大到小</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-03-02-13-38-19.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="3-2-设计稿适配"><a href="#3-2-设计稿适配" class="headerlink" title="3.2 设计稿适配"></a>3.2 设计稿适配</h3><p>插件 flutter_screenutil</p><p><a href="https://pub.flutter-io.cn/packages/flutter_screenutil" target="_blank" rel="noopener">https://pub.flutter-io.cn/packages/flutter_screenutil</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-03-02-13-41-31.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>按设计稿比例适配</p><h3 id="3-3-工具函数"><a href="#3-3-工具函数" class="headerlink" title="3.3 工具函数"></a>3.3 工具函数</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-03-03-14-11-29.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li><code>screen.dart</code> 设计稿适配函数</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_screenutil/flutter_screenutil.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="markdown">/// 设置宽度</span></span></span><br><span class="line"><span class="built_in">double</span> duSetWidth(<span class="built_in">double</span> width) &#123;</span><br><span class="line">  <span class="keyword">return</span> ScreenUtil().setWidth(width);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="markdown">/// 设置宽度</span></span></span><br><span class="line"><span class="built_in">double</span> duSetHeight(<span class="built_in">double</span> height) &#123;</span><br><span class="line">  <span class="keyword">return</span> ScreenUtil().setHeight(height);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="markdown">/// 设置字体尺寸</span></span></span><br><span class="line"><span class="built_in">double</span> duSetFontSize(<span class="built_in">double</span> fontSize) &#123;</span><br><span class="line">  <span class="keyword">return</span> ScreenUtil().setSp(fontSize);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>utils.dart</code> 导出类库</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span> utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="string">'screen.dart'</span>;</span><br></pre></td></tr></table></figure><h3 id="3-4-常量配置"><a href="#3-4-常量配置" class="headerlink" title="3.4 常量配置"></a>3.4 常量配置</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-03-03-14-14-55.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li><code>colors.dart</code> 颜色</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'dart:ui'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AppColors</span> </span>&#123;</span><br><span class="line">  <span class="comment"><span class="markdown">/// 主文本</span></span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> Color primaryText = Color.fromARGB(<span class="number">255</span>, <span class="number">45</span>, <span class="number">45</span>, <span class="number">47</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 主控件-背景</span></span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> Color primaryElement = Color.fromARGB(<span class="number">255</span>, <span class="number">41</span>, <span class="number">103</span>, <span class="number">255</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// 主控件-文本</span></span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> Color primaryElementText = Color.fromARGB(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>values.dart</code> 导出类库</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span> values;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="string">'colors.dart'</span>;</span><br></pre></td></tr></table></figure><h3 id="3-5-代码拆分"><a href="#3-5-代码拆分" class="headerlink" title="3.5 代码拆分"></a>3.5 代码拆分</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-03-02-13-43-25.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>尽可能的拆分到不同的函数，方便维护</p><p>再复杂的业务，可以拆分到不同的组件文件，如 <code>welcome_header_widget.dart</code> <code>welcome_feature_widget.dart</code> <code>welcome_buttons_widget.dart</code></p><h2 id="git-代码"><a href="#git-代码" class="headerlink" title="git 代码"></a>git 代码</h2><p><a href="https://github.com/ducafecat/flutter_learn_news/releases/tag/v1.0.1" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news/releases/tag/v1.0.1</a></p><h2 id="蓝湖设计稿"><a href="#蓝湖设计稿" class="headerlink" title="蓝湖设计稿"></a>蓝湖设计稿</h2><p><a href="https://lanhuapp.com/url/lYuz1" target="_blank" rel="noopener">https://lanhuapp.com/url/lYuz1</a><br>密码: gSKl</p><blockquote><p>蓝湖现在收费了，所以查看标记还请自己上传 xd 设计稿<br>商业设计稿文件不好直接分享, 可以加微信联系 ducafecat</p></blockquote><h2 id="视频-1"><a href="#视频-1" class="headerlink" title="视频"></a>视频</h2><ul><li><a href="https://www.bilibili.com/video/av93660835" target="_blank" rel="noopener">b 站</a></li><li><a href="https://www.youtube.com/watch?v=equsSqqwl9E" target="_blank" rel="noopener">油管镜像</a></li></ul><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://pub.flutter-io.cn/packages/flutter_screenutil" target="_blank" rel="noopener">flutter_screenutil</a></li><li><a href="https://flutter.dev/docs/development/ui/assets-and-images" target="_blank" rel="noopener">Adding assets and images</a></li><li><a href="https://flutter.dev/docs/cookbook/design/fonts" target="_blank" rel="noopener">Use a custom font</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;加入图片资源&lt;/li&gt;
&lt;li&gt;加入字体资源&lt;/li&gt;
&lt;li&gt;设计稿适配&lt;/li&gt;
&lt;li&gt;编写界面代码的逻辑
      
    
    </summary>
    
      <category term="Flutter 实战从零开始" scheme="https://blog.ducafecat.tech/categories/Flutter-%E5%AE%9E%E6%88%98%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 实战从零开始 新闻客户端 - 01 需求分析、使用蓝湖标注工具、项目目录构建</title>
    <link href="https://blog.ducafecat.tech/2020/02/26/flutter-project/flutter-project-news-01-setup/"/>
    <id>https://blog.ducafecat.tech/2020/02/26/flutter-project/flutter-project-news-01-setup/</id>
    <published>2020-02-25T16:00:00.000Z</published>
    <updated>2020-07-04T06:23:27.021Z</updated>
    
    <content type="html"><![CDATA[<h2 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h2><ul><li>需求分析</li><li>使用蓝湖平台作为标注工具</li><li>构建 Flutter 项目</li></ul><h2 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h2><iframe src="//player.bilibili.com/player.html?bvid=BV1J7411N7KF&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" height="400px"> </iframe><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/ducafecat/flutter_learn_news/releases/tag/v1.0.1" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news/releases/tag/v1.0.1</a></p><h2 id="1-需求说明"><a href="#1-需求说明" class="headerlink" title="1 需求说明"></a>1 需求说明</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-02-27-10-31-41.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="1-1-样式表"><a href="#1-1-样式表" class="headerlink" title="1.1 样式表"></a>1.1 样式表</h3><ul><li>颜色</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-02-26-17-52-10.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>组件</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-02-26-17-59-36.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>图标</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-02-27-10-03-03.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="1-2-整理页面-组件列表"><a href="#1-2-整理页面-组件列表" class="headerlink" title="1.2 整理页面+组件列表"></a>1.2 整理页面+组件列表</h3><table><thead><tr><th>页面名称</th><th>组件数量</th></tr></thead><tbody><tr><td>欢迎页</td><td>3</td></tr><tr><td>登录页</td><td>3</td></tr><tr><td>首页</td><td>6</td></tr><tr><td>搜索页</td><td>4</td></tr><tr><td>新闻页</td><td>4</td></tr></tbody></table><h3 id="1-3-排查技术点"><a href="#1-3-排查技术点" class="headerlink" title="1.3 排查技术点"></a>1.3 排查技术点</h3><ul><li>数据拉取</li><li>图片懒加载</li><li>图片缓存</li><li>新闻、频道、搜索历史数据缓存</li></ul><h2 id="2-使用蓝湖平台作为标注工具"><a href="#2-使用蓝湖平台作为标注工具" class="headerlink" title="2 使用蓝湖平台作为标注工具"></a>2 使用蓝湖平台作为标注工具</h2><h3 id="2-1-上传蓝湖"><a href="#2-1-上传蓝湖" class="headerlink" title="2.1 上传蓝湖"></a>2.1 上传蓝湖</h3><p>支持 Sketch、Adobe Photoshop、Adobe XD、设计图片 PNG</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-02-27-10-05-23.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="2-2-标注"><a href="#2-2-标注" class="headerlink" title="2.2 标注"></a>2.2 标注</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-02-27-10-32-17.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="2-3-代码提示"><a href="#2-3-代码提示" class="headerlink" title="2.3 代码提示"></a>2.3 代码提示</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-02-27-10-33-19.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="2-4-原型展示"><a href="#2-4-原型展示" class="headerlink" title="2.4 原型展示"></a>2.4 原型展示</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-02-27-11-03-37.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="3-构建-Flutter-项目"><a href="#3-构建-Flutter-项目" class="headerlink" title="3 构建 Flutter 项目"></a>3 构建 Flutter 项目</h2><h1 id="3-1-可复用小型项目结构"><a href="#3-1-可复用小型项目结构" class="headerlink" title="3.1 可复用小型项目结构"></a>3.1 可复用小型项目结构</h1><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2020-02-27-10-59-10.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="蓝湖设计稿"><a href="#蓝湖设计稿" class="headerlink" title="蓝湖设计稿"></a>蓝湖设计稿</h2><p><a href="https://lanhuapp.com/url/lYuz1" target="_blank" rel="noopener">https://lanhuapp.com/url/lYuz1</a><br>密码: gSKl</p><blockquote><p>蓝湖现在收费了，所以查看标记还请自己上传 xd 设计稿<br>商业设计稿文件不好直接分享, 可以加微信联系 ducafecat</p></blockquote><h2 id="git-代码"><a href="#git-代码" class="headerlink" title="git 代码"></a>git 代码</h2><p><a href="https://github.com/ducafecat/flutter_learn_news/releases/tag/v1.0.1" target="_blank" rel="noopener">https://github.com/ducafecat/flutter_learn_news/releases/tag/v1.0.1</a></p><h2 id="视频-1"><a href="#视频-1" class="headerlink" title="视频"></a>视频</h2><ul><li><a href="https://www.bilibili.com/video/av92158011/" target="_blank" rel="noopener">b 站</a></li><li><a href="https://youtu.be/Uucg6GGGBsY" target="_blank" rel="noopener">油管镜像</a></li></ul><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://lanhuapp.com/cms/#/sos" target="_blank" rel="noopener">蓝湖-上传设计图</a></li></ul><hr><p>© 猫哥</p><p>微信: ducafecat</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;需求分析&lt;/li&gt;
&lt;li&gt;使用蓝湖平台作为标注工具&lt;/li&gt;
&lt;li&gt;构建 Flutter 项目&lt;/li&gt;
&lt;
      
    
    </summary>
    
      <category term="Flutter 实战从零开始" scheme="https://blog.ducafecat.tech/categories/Flutter-%E5%AE%9E%E6%88%98%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 零基础入门中文教学 - 18 基础组件 Stack IndexedStack Positioned</title>
    <link href="https://blog.ducafecat.tech/2019/10/12/flutter/flutter-18-stack-indexedstack/"/>
    <id>https://blog.ducafecat.tech/2019/10/12/flutter/flutter-18-stack-indexedstack/</id>
    <published>2019-10-11T16:00:00.000Z</published>
    <updated>2019-10-21T03:50:51.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h2><ul><li>Stack</li><li>IndexedStack</li><li>Positioned</li></ul><p>Stack 和 IndexStack 都是层叠布局方式，类似于 Android 里的 FrameLayout 帧布局，内部子元素是有层级堆起来的。</p><p>Stack 继承自 MultiChildRenderObjectWidget，Stack 也是多子元素的一个组件之一（内部可以包含多个子元素）。</p><p>而 IndexedStack 继承自 Stack，扩展了 Stack 的一些特性。它的作用是显示第 index 个子元素，其他子元素都是不可见的。所以 IndexedStack 的尺寸永远是跟最大的子元素尺寸一致。</p><p>Stack 的布局行为，是根据子元素是 positioned 还是 non-positioned 来区分的：</p><p>对于 positioned 的子元素，它们的位置会根据所设置的 top、bottom、right 或 left 属性来确定，这几个值都是相对于 Stack 的左上角；<br>对于 non-positioned 的子元素，它们会根据 Stack 的 aligment 来设置位置。<br>Stack 布局的子元素层级堆叠顺序：最先布局绘制的子元素在最底层，越后绘制的越在顶层。类似于 Web 中的 z-index。</p><h2 id="Stack"><a href="#Stack" class="headerlink" title="Stack"></a>Stack</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Stack(&#123;</span><br><span class="line">    Key key,</span><br><span class="line">    <span class="comment">// 对齐方式，默认是左上角（topStart）</span></span><br><span class="line">    <span class="keyword">this</span>.alignment = AlignmentDirectional.topStart,</span><br><span class="line">    <span class="comment">// 对齐方向</span></span><br><span class="line">    <span class="keyword">this</span>.textDirection,</span><br><span class="line">    <span class="comment">// 定义如何设置无定位子元素尺寸，默认为loose</span></span><br><span class="line">    <span class="keyword">this</span>.fit = StackFit.loose,</span><br><span class="line">    <span class="comment">// 超过的部分子元素处理方式</span></span><br><span class="line">    <span class="keyword">this</span>.overflow = Overflow.clip,</span><br><span class="line">    <span class="comment">// 子元素</span></span><br><span class="line">    <span class="built_in">List</span>&lt;Widget&gt; children = <span class="keyword">const</span> &lt;Widget&gt;[],</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure><ul><li>alignment</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 左上角</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> Alignment topLeft = Alignment(<span class="number">-1.0</span>, <span class="number">-1.0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 主轴顶部对齐，交叉轴居中</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> Alignment topCenter = Alignment(<span class="number">0.0</span>, <span class="number">-1.0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 主轴顶部对齐，交叉轴偏右</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> Alignment topRight = Alignment(<span class="number">1.0</span>, <span class="number">-1.0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 主轴居中，交叉轴偏左</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> Alignment centerLeft = Alignment(<span class="number">-1.0</span>, <span class="number">0.0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 居中</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> Alignment center = Alignment(<span class="number">0.0</span>, <span class="number">0.0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 主轴居中，交叉轴偏右</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> Alignment centerRight = Alignment(<span class="number">1.0</span>, <span class="number">0.0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 主轴底部对齐，交叉轴偏左</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> Alignment bottomLeft = Alignment(<span class="number">-1.0</span>, <span class="number">1.0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 主轴底部对齐，交叉轴居中</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> Alignment bottomCenter = Alignment(<span class="number">0.0</span>, <span class="number">1.0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 主轴底部对齐，交叉轴偏右</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> Alignment bottomRight = Alignment(<span class="number">1.0</span>, <span class="number">1.0</span>);</span><br></pre></td></tr></table></figure><ul><li>fit</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> StackFit &#123;</span><br><span class="line">  <span class="comment">// 子元素宽松的取值，可以从min到max的尺寸</span></span><br><span class="line">  loose,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 子元素尽可能的占用剩余空间，取max尺寸</span></span><br><span class="line">  expand,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 不改变子元素的约束条件</span></span><br><span class="line">  passthrough,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>overflow</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> Overflow &#123;</span><br><span class="line">  <span class="comment">// 超出部分不会被裁剪，正常显示</span></span><br><span class="line">  visible,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 超出部分会被裁剪</span></span><br><span class="line">  clip,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="IndexedStack"><a href="#IndexedStack" class="headerlink" title="IndexedStack"></a>IndexedStack</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">IndexedStack(&#123;</span><br><span class="line">    Key key,</span><br><span class="line">    AlignmentGeometry alignment = AlignmentDirectional.topStart,</span><br><span class="line">    TextDirection textDirection,</span><br><span class="line">    StackFit sizing = StackFit.loose,</span><br><span class="line">    <span class="comment">// 多了一个索引，索引的这个元素显示，其他元素隐藏</span></span><br><span class="line">    <span class="keyword">this</span>.index = <span class="number">0</span>,</span><br><span class="line">    <span class="comment">// 子元素</span></span><br><span class="line">    <span class="built_in">List</span>&lt;Widget&gt; children = <span class="keyword">const</span> &lt;Widget&gt;[],</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure><h2 id="Positioned"><a href="#Positioned" class="headerlink" title="Positioned"></a>Positioned</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Positioned(&#123;</span><br><span class="line">  Key key,</span><br><span class="line">  <span class="keyword">this</span>.left, <span class="comment">// 上下左右位置</span></span><br><span class="line">  <span class="keyword">this</span>.top,</span><br><span class="line">  <span class="keyword">this</span>.right,</span><br><span class="line">  <span class="keyword">this</span>.bottom,</span><br><span class="line">  <span class="keyword">this</span>.width, <span class="comment">// 宽高</span></span><br><span class="line">  <span class="keyword">this</span>.height,</span><br><span class="line">  <span class="meta">@required</span> Widget child,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/ducafecat/flutter-learn/tree/master/state_less_ful_app" target="_blank" rel="noopener">https://github.com/ducafecat/flutter-learn/tree/master/state_less_ful_app</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://flutter.dev/docs/development/ui/widgets" target="_blank" rel="noopener">widgets</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;Stack&lt;/li&gt;
&lt;li&gt;IndexedStack&lt;/li&gt;
&lt;li&gt;Positioned&lt;/li&gt;
&lt;/u
      
    
    </summary>
    
      <category term="Flutter零基础入门中文教学" scheme="https://blog.ducafecat.tech/categories/Flutter%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%E4%B8%AD%E6%96%87%E6%95%99%E5%AD%A6/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 零基础入门中文教学 - 17 基础组件 Fex Expanded</title>
    <link href="https://blog.ducafecat.tech/2019/10/11/flutter/flutter-17-flex-expanded/"/>
    <id>https://blog.ducafecat.tech/2019/10/11/flutter/flutter-17-flex-expanded/</id>
    <published>2019-10-10T16:00:00.000Z</published>
    <updated>2019-10-21T03:00:26.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h2><ul><li>expanded</li><li>flex</li></ul><p>Flex 组件是 Row 和 Column 的父类，主要用于弹性布局，类似于 HTML 中的 Flex 弹性盒子布局，可以按照一定比例进行分类布局空间。</p><p>Flex 继承自 MultiChildRenderObjectWidget，Flex 也是多子元素的一个组件之一（内部可以包含多个子元素）。</p><p>Flex 一般和 Expanded 搭配使用，Expanded 组件从名字就可以看出它的特点，就是让子元素扩展占用 Flex 的剩余空间。</p><h2 id="Expanded-Flex"><a href="#Expanded-Flex" class="headerlink" title="Expanded Flex"></a>Expanded Flex</h2><ul><li>构造函数</li></ul><p>单独看 Flex 组件没有意义，因为一般直接用它的子类 Row 和 Column 来使用。而 Flex 主要是和 Expanded 搭配使用。我们再看下 Expanded 组件构造方法：</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Flex(&#123;</span><br><span class="line">    Key key,</span><br><span class="line">    <span class="comment">// 子元素排列方向：横向还是纵向</span></span><br><span class="line">    <span class="meta">@required</span> <span class="keyword">this</span>.direction,</span><br><span class="line">    <span class="keyword">this</span>.mainAxisAlignment = MainAxisAlignment.start,</span><br><span class="line">    <span class="keyword">this</span>.mainAxisSize = MainAxisSize.max,</span><br><span class="line">    <span class="keyword">this</span>.crossAxisAlignment = CrossAxisAlignment.center,</span><br><span class="line">    <span class="keyword">this</span>.textDirection,</span><br><span class="line">    <span class="keyword">this</span>.verticalDirection = VerticalDirection.down,</span><br><span class="line">    <span class="keyword">this</span>.textBaseline,</span><br><span class="line">    <span class="built_in">List</span>&lt;Widget&gt; children = <span class="keyword">const</span> &lt;Widget&gt;[],</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Expanded(&#123;</span><br><span class="line">    Key key,</span><br><span class="line">    <span class="comment">// 占用空间比重、权重</span></span><br><span class="line">    <span class="built_in">int</span> flex = <span class="number">1</span>,</span><br><span class="line">    <span class="comment">// 子元素</span></span><br><span class="line">    <span class="meta">@required</span> Widget child,</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure><h2 id="例子-Expanded"><a href="#例子-Expanded" class="headerlink" title="例子 Expanded"></a>例子 Expanded</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Row(</span><br><span class="line">  children: &lt;Widget&gt;[</span><br><span class="line">    Container(</span><br><span class="line">      width: <span class="number">50</span>,</span><br><span class="line">      color: Colors.cyan,</span><br><span class="line">    ),</span><br><span class="line">    Expanded(</span><br><span class="line">      child: Container(</span><br><span class="line">        color: Colors.brown,</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">  ],</span><br><span class="line">)</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-10-21-10-59-29.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="例子-Flex"><a href="#例子-Flex" class="headerlink" title="例子 Flex"></a>例子 Flex</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Column(</span><br><span class="line">  children: &lt;Widget&gt;[</span><br><span class="line">    Expanded(</span><br><span class="line">      flex: <span class="number">1</span>,</span><br><span class="line">      child: Container(</span><br><span class="line">        color: Colors.cyan,</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">    Expanded(</span><br><span class="line">      flex: <span class="number">4</span>,</span><br><span class="line">      child: Container(</span><br><span class="line">        color: Colors.brown,</span><br><span class="line">      ),</span><br><span class="line">    )</span><br><span class="line">  ],</span><br><span class="line">)</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-10-21-11-00-23.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/ducafecat/flutter-learn/tree/master/flex_expanded_widget" target="_blank" rel="noopener">https://github.com/ducafecat/flutter-learn/tree/master/flex_expanded_widget</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://flutter.dev/docs/development/ui/widgets" target="_blank" rel="noopener">widgets</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;expanded&lt;/li&gt;
&lt;li&gt;flex&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Flex 组件是 Row 和 Colu
      
    
    </summary>
    
      <category term="Flutter零基础入门中文教学" scheme="https://blog.ducafecat.tech/categories/Flutter%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%E4%B8%AD%E6%96%87%E6%95%99%E5%AD%A6/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 零基础入门中文教学 - 16 基础组件 Row Column</title>
    <link href="https://blog.ducafecat.tech/2019/10/10/flutter/flutter-16-row-column/"/>
    <id>https://blog.ducafecat.tech/2019/10/10/flutter/flutter-16-row-column/</id>
    <published>2019-10-09T16:00:00.000Z</published>
    <updated>2019-10-11T08:52:27.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h2><ul><li>Row 行组件</li><li>Column 列组件</li><li>mainAxisAlignment 主轴</li><li>crossAxisAlignment 交叉轴</li><li>textDirection 排列方向</li><li>verticalDirection 交叉轴起始位置</li></ul><h2 id="Row"><a href="#Row" class="headerlink" title="Row"></a>Row</h2><p>Row 布局组件类似于 Android 中的 LinearLayout 线性布局，它用来做水平横向布局使用，里面的 children 子元素按照水平方向进行排列。</p><ul><li>构造</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Row(&#123;</span><br><span class="line">    Key key,</span><br><span class="line">    <span class="comment">// 主轴方向上的对齐方式（Row的主轴是横向轴）</span></span><br><span class="line">    MainAxisAlignment mainAxisAlignment = MainAxisAlignment.start,</span><br><span class="line">    <span class="comment">// 在主轴方向（Row的主轴是横向轴）占有空间的值，默认是max</span></span><br><span class="line">    MainAxisSize mainAxisSize = MainAxisSize.max,</span><br><span class="line">    <span class="comment">// 在交叉轴方向(Row是纵向轴)的对齐方式，Row的高度等于子元素中最高的子元素高度</span></span><br><span class="line">    CrossAxisAlignment crossAxisAlignment = CrossAxisAlignment.center,</span><br><span class="line">    <span class="comment">// 水平方向子元素的排列方向：从左到右排列还是反向</span></span><br><span class="line">    TextDirection textDirection,</span><br><span class="line">    <span class="comment">// 表示纵轴（垂直）的对齐排列方向，默认是VerticalDirection.down，表示从上到下。这个参数一般用于Column组件里</span></span><br><span class="line">    VerticalDirection verticalDirection = VerticalDirection.down,</span><br><span class="line">    <span class="comment">// 字符对齐基线方式</span></span><br><span class="line">    TextBaseline textBaseline,</span><br><span class="line">    <span class="comment">// 子元素集合</span></span><br><span class="line">    <span class="built_in">List</span>&lt;Widget&gt; children = <span class="keyword">const</span> &lt;Widget&gt;[],</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure><ul><li>MainAxisAlignment</li></ul><p>主轴属性：主轴方向上的对齐方式，Row 是横向轴为主轴</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> MainAxisAlignment &#123;</span><br><span class="line">  <span class="comment">// 按照主轴起点对齐，例如：按照靠近最左侧子元素对齐</span></span><br><span class="line">  start,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 将子元素放置在主轴的末尾，按照末尾对齐</span></span><br><span class="line">  end,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 子元素放置在主轴中心对齐</span></span><br><span class="line">  center,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 将主轴方向上的空白区域均分，使得子元素之间的空白区域相等，首尾子元素都靠近首尾，没有间隙。有点类似于两端对齐</span></span><br><span class="line">  spaceBetween,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 将主轴方向上的空白区域均分，使得子元素之间的空白区域相等，但是首尾子元素的空白区域为1/2</span></span><br><span class="line">  spaceAround,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 将主轴方向上的空白区域均分，使得子元素之间的空白区域相等，包括首尾子元素</span></span><br><span class="line">  spaceEvenly,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>CrossAxisAlignment</li></ul><p>交叉属性：在交叉轴方向的对齐方式，Row 是纵向轴。Row 的高度等于子元素中最高的子元素高度</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> CrossAxisAlignment &#123;</span><br><span class="line">  <span class="comment">// 子元素在交叉轴上起点处展示</span></span><br><span class="line">  start,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 子元素在交叉轴上末尾处展示</span></span><br><span class="line">  end,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 子元素在交叉轴上居中展示</span></span><br><span class="line">  center,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 让子元素填满交叉轴方向</span></span><br><span class="line">  stretch,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 在交叉轴方向，使得子元素按照baseline对齐</span></span><br><span class="line">  baseline,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>MainAxisSize</li></ul><p>在主轴方向子元素占有空间的方式，Row 的主轴是横向轴。默认是 max</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> MainAxisSize &#123;</span><br><span class="line">  <span class="comment">// 根据传入的布局约束条件，最大化主轴方向占用可用空间，也就是尽可能充满可用宽度</span></span><br><span class="line">  max,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 与max相反，是最小化占用主轴方向的可用空间</span></span><br><span class="line">  min,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Column"><a href="#Column" class="headerlink" title="Column"></a>Column</h2><p>Column 是纵向排列子元素</p><p>参数用法同上</p><h2 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Row 行组件</span></span><br><span class="line">Widget _buildRow() &#123;</span><br><span class="line">  <span class="keyword">return</span> Row(</span><br><span class="line">    mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">    verticalDirection: VerticalDirection.up,</span><br><span class="line">    textBaseline: TextBaseline.ideographic,</span><br><span class="line">    children: &lt;Widget&gt;[</span><br><span class="line">      RaisedButton(</span><br><span class="line">        color: Colors.blue,</span><br><span class="line">        child: Text(<span class="string">'按钮1'</span>),</span><br><span class="line">        onPressed: () &#123;&#125;,</span><br><span class="line">      ),</span><br><span class="line">      RaisedButton(</span><br><span class="line">        color: Colors.grey,</span><br><span class="line">        child: Text(<span class="string">'按钮2'</span>),</span><br><span class="line">        onPressed: () &#123;&#125;,</span><br><span class="line">      ),</span><br><span class="line">      RaisedButton(</span><br><span class="line">        color: Colors.orange,</span><br><span class="line">        child: Text(<span class="string">'按钮3'</span>),</span><br><span class="line">        onPressed: () &#123;&#125;,</span><br><span class="line">      ),</span><br><span class="line">    ],</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Column 列组件</span></span><br><span class="line">Widget _buildColumn() &#123;</span><br><span class="line">  <span class="keyword">return</span> Column(</span><br><span class="line">    mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">    children: &lt;Widget&gt;[</span><br><span class="line">      RaisedButton(</span><br><span class="line">        color: Colors.blue,</span><br><span class="line">        child: Text(<span class="string">'按钮1'</span>),</span><br><span class="line">        onPressed: () &#123;&#125;,</span><br><span class="line">      ),</span><br><span class="line">      RaisedButton(</span><br><span class="line">        color: Colors.grey,</span><br><span class="line">        child: Text(<span class="string">'按钮2'</span>),</span><br><span class="line">        onPressed: () &#123;&#125;,</span><br><span class="line">      ),</span><br><span class="line">      RaisedButton(</span><br><span class="line">        color: Colors.orange,</span><br><span class="line">        child: Text(<span class="string">'按钮3'</span>),</span><br><span class="line">        onPressed: () &#123;&#125;,</span><br><span class="line">      ),</span><br><span class="line">    ],</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Row Column 组件嵌套</span></span><br><span class="line">Widget _buildRowColumn() &#123;</span><br><span class="line">  <span class="keyword">return</span> Column(</span><br><span class="line">    mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">    <span class="comment">// crossAxisAlignment: CrossAxisAlignment.center,</span></span><br><span class="line">    children: &lt;Widget&gt;[</span><br><span class="line">      Row(</span><br><span class="line">        <span class="comment">// 元素排列顺序</span></span><br><span class="line">        textDirection: TextDirection.rtl,</span><br><span class="line">        <span class="comment">// 主轴方向</span></span><br><span class="line">        mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">        <span class="comment">// 交叉轴的起始位置</span></span><br><span class="line">        verticalDirection: VerticalDirection.up,</span><br><span class="line">        <span class="comment">// 交叉轴对齐方式</span></span><br><span class="line">        crossAxisAlignment: CrossAxisAlignment.end,</span><br><span class="line">        children: &lt;Widget&gt;[</span><br><span class="line">          RaisedButton(</span><br><span class="line">            color: Colors.blue,</span><br><span class="line">            child: Text(<span class="string">'按钮1'</span>),</span><br><span class="line">            onPressed: () &#123;&#125;,</span><br><span class="line">          ),</span><br><span class="line">          RaisedButton(</span><br><span class="line">            color: Colors.blue,</span><br><span class="line">            child: Text(<span class="string">'按钮2222222'</span>),</span><br><span class="line">            onPressed: () &#123;&#125;,</span><br><span class="line">          ),</span><br><span class="line">          Container(</span><br><span class="line">            width: <span class="number">100</span>,</span><br><span class="line">            height: <span class="number">100</span>,</span><br><span class="line">            color: Colors.yellow,</span><br><span class="line">          )</span><br><span class="line">        ],</span><br><span class="line">      )</span><br><span class="line">    ],</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> MaterialApp(</span><br><span class="line">  title: <span class="string">'Material App'</span>,</span><br><span class="line">  home: Scaffold(</span><br><span class="line">    appBar: AppBar(</span><br><span class="line">      title: Text(<span class="string">'Material App Bar'</span>),</span><br><span class="line">    ),</span><br><span class="line">    body:</span><br><span class="line">        <span class="comment">//_buildRow(),</span></span><br><span class="line">        <span class="comment">// _buildColumn(),</span></span><br><span class="line">        _buildRowColumn(),</span><br><span class="line">  ),</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/ducafecat/flutter-learn/blob/master/row_column_widget" target="_blank" rel="noopener">https://github.com/ducafecat/flutter-learn/blob/master/row_column_widget</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://api.flutter.dev/flutter/widgets/Row-class.html" target="_blank" rel="noopener">Row class</a></li><li><a href="https://api.flutter.dev/flutter/widgets/Column-class.html" target="_blank" rel="noopener">Column class</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;Row 行组件&lt;/li&gt;
&lt;li&gt;Column 列组件&lt;/li&gt;
&lt;li&gt;mainAxisAlignment 主
      
    
    </summary>
    
      <category term="Flutter零基础入门中文教学" scheme="https://blog.ducafecat.tech/categories/Flutter%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%E4%B8%AD%E6%96%87%E6%95%99%E5%AD%A6/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 零基础入门中文教学 - 15 基础组件 MaterialApp Scaffold</title>
    <link href="https://blog.ducafecat.tech/2019/10/09/flutter/flutter-15-scaffold/"/>
    <id>https://blog.ducafecat.tech/2019/10/09/flutter/flutter-15-scaffold/</id>
    <published>2019-10-08T16:00:00.000Z</published>
    <updated>2019-10-11T07:40:16.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h2><ul><li>MaterialApp</li><li>Scafford</li><li>Scaffold.of</li></ul><h2 id="MaterialApp"><a href="#MaterialApp" class="headerlink" title="MaterialApp"></a>MaterialApp</h2><p>Material 风格的程序的构建，如 Key 导航 路由 首页 样式 多语言 调试</p><ul><li>构造</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> MaterialApp(&#123;</span><br><span class="line">  Key key,</span><br><span class="line">  <span class="comment">// 导航键 , key的作用提高复用性能</span></span><br><span class="line">  <span class="keyword">this</span>.navigatorKey,</span><br><span class="line">  <span class="comment">// 主页</span></span><br><span class="line">  <span class="keyword">this</span>.home,</span><br><span class="line">  <span class="comment">// 路由</span></span><br><span class="line">  <span class="keyword">this</span>.routes = <span class="keyword">const</span> &lt;<span class="built_in">String</span>, WidgetBuilder&gt;&#123;&#125;,</span><br><span class="line">  <span class="comment">// 初始命名路由</span></span><br><span class="line">  <span class="keyword">this</span>.initialRoute,</span><br><span class="line">  <span class="comment">// 路由构造</span></span><br><span class="line">  <span class="keyword">this</span>.onGenerateRoute,</span><br><span class="line">  <span class="comment">// 未知路由</span></span><br><span class="line">  <span class="keyword">this</span>.onUnknownRoute,</span><br><span class="line">  <span class="comment">// 导航观察器</span></span><br><span class="line">  <span class="keyword">this</span>.navigatorObservers = <span class="keyword">const</span> &lt;NavigatorObserver&gt;[],</span><br><span class="line">  <span class="comment">// 建造者</span></span><br><span class="line">  <span class="keyword">this</span>.builder,</span><br><span class="line">  <span class="comment">// APP 标题</span></span><br><span class="line">  <span class="keyword">this</span>.title = <span class="string">''</span>,</span><br><span class="line">  <span class="comment">// 生成标题</span></span><br><span class="line">  <span class="keyword">this</span>.onGenerateTitle,</span><br><span class="line">  <span class="comment">// APP 颜色</span></span><br><span class="line">  <span class="keyword">this</span>.color,</span><br><span class="line">  <span class="comment">// 样式定义</span></span><br><span class="line">  <span class="keyword">this</span>.theme,</span><br><span class="line">  <span class="comment">// 主机暗色模式</span></span><br><span class="line">  <span class="keyword">this</span>.darkTheme,</span><br><span class="line">  <span class="comment">// 样式模式</span></span><br><span class="line">  <span class="keyword">this</span>.themeMode = ThemeMode.system,</span><br><span class="line">  <span class="comment">// 多语言 本地化</span></span><br><span class="line">  <span class="keyword">this</span>.locale,</span><br><span class="line">  <span class="comment">// 多语言代理</span></span><br><span class="line">  <span class="keyword">this</span>.localizationsDelegates,</span><br><span class="line">  <span class="comment">// 多语言回调</span></span><br><span class="line">  <span class="keyword">this</span>.localeListResolutionCallback,</span><br><span class="line">  <span class="keyword">this</span>.localeResolutionCallback,</span><br><span class="line">  <span class="comment">// 支持的多国语言</span></span><br><span class="line">  <span class="keyword">this</span>.supportedLocales = <span class="keyword">const</span> &lt;Locale&gt;[Locale(<span class="string">'en'</span>, <span class="string">'US'</span>)],</span><br><span class="line">  <span class="comment">// 调试显示材质网格</span></span><br><span class="line">  <span class="keyword">this</span>.debugShowMaterialGrid = <span class="keyword">false</span>,</span><br><span class="line">  <span class="comment">// 显示性能叠加</span></span><br><span class="line">  <span class="keyword">this</span>.showPerformanceOverlay = <span class="keyword">false</span>,</span><br><span class="line">  <span class="comment">// 检查缓存图片的情况</span></span><br><span class="line">  <span class="keyword">this</span>.checkerboardRasterCacheImages = <span class="keyword">false</span>,</span><br><span class="line">  <span class="comment">// 检查不必要的setlayer</span></span><br><span class="line">  <span class="keyword">this</span>.checkerboardOffscreenLayers = <span class="keyword">false</span>,</span><br><span class="line">  <span class="comment">// 显示语义调试器</span></span><br><span class="line">  <span class="keyword">this</span>.showSemanticsDebugger = <span class="keyword">false</span>,</span><br><span class="line">  <span class="comment">// 显示debug标记 右上角</span></span><br><span class="line">  <span class="keyword">this</span>.debugShowCheckedModeBanner = <span class="keyword">true</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="Scaffold"><a href="#Scaffold" class="headerlink" title="Scaffold"></a>Scaffold</h2><p>Scaffold 是一个页面布局脚手架，实现了基本的 Material 布局，继承自 StatefulWidget，是有状态组件。我们知道大部分的应用页面都是含有标题栏，主体内容，底部导航菜单或者侧滑抽屉菜单等等构成，那么每次都重复写这些内容会大大降低开发效率，所以 Flutter 提供了 Material 风格的 Scaffold 页面布局脚手架，可以很快地搭建出这些元素部分</p><ul><li>构造</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Scaffold(&#123;</span><br><span class="line">    Key key,</span><br><span class="line">    <span class="comment">// 菜单栏</span></span><br><span class="line">    <span class="keyword">this</span>.appBar,</span><br><span class="line">    <span class="comment">// 中间主体内容部分</span></span><br><span class="line">    <span class="keyword">this</span>.body,</span><br><span class="line">    <span class="comment">// 悬浮按钮</span></span><br><span class="line">    <span class="keyword">this</span>.floatingActionButton,</span><br><span class="line">    <span class="comment">// 悬浮按钮位置</span></span><br><span class="line">    <span class="keyword">this</span>.floatingActionButtonLocation,</span><br><span class="line">    <span class="comment">// 悬浮按钮动画</span></span><br><span class="line">    <span class="keyword">this</span>.floatingActionButtonAnimator,</span><br><span class="line">    <span class="comment">// 固定在下方显示的按钮</span></span><br><span class="line">    <span class="keyword">this</span>.persistentFooterButtons,</span><br><span class="line">    <span class="comment">// 左侧 侧滑抽屉菜单</span></span><br><span class="line">    <span class="keyword">this</span>.drawer,</span><br><span class="line">    <span class="comment">// 右侧 侧滑抽屉菜单</span></span><br><span class="line">    <span class="keyword">this</span>.endDrawer,</span><br><span class="line">    <span class="comment">// 底部菜单</span></span><br><span class="line">    <span class="keyword">this</span>.bottomNavigationBar,</span><br><span class="line">    <span class="comment">// 底部拉出菜单</span></span><br><span class="line">    <span class="keyword">this</span>.bottomSheet,</span><br><span class="line">    <span class="comment">// 背景色</span></span><br><span class="line">    <span class="keyword">this</span>.backgroundColor,</span><br><span class="line">    <span class="comment">// 自动适应底部padding</span></span><br><span class="line">    <span class="keyword">this</span>.resizeToAvoidBottomPadding,</span><br><span class="line">    <span class="comment">// 重新计算body布局空间大小，避免被遮挡</span></span><br><span class="line">    <span class="keyword">this</span>.resizeToAvoidBottomInset,</span><br><span class="line">    <span class="comment">// 是否显示到底部，默认为true将显示到顶部状态栏</span></span><br><span class="line">    <span class="keyword">this</span>.primary = <span class="keyword">true</span>,</span><br><span class="line">    <span class="keyword">this</span>.drawerDragStartBehavior = DragStartBehavior.down,</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure><h2 id="Scaffold-of"><a href="#Scaffold-of" class="headerlink" title="Scaffold.of"></a>Scaffold.of</h2><p>Scaffold.of 函数来获取 ScaffoldState 对象</p><p>contenxt 是动态获取的</p><p>所以需要用 Builder 套一个构造器</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> ScaffoldState of(BuildContext context, &#123; <span class="built_in">bool</span> nullOk = <span class="keyword">false</span> &#125;) &#123;</span><br><span class="line">  <span class="keyword">assert</span>(nullOk != <span class="keyword">null</span>);</span><br><span class="line">  <span class="keyword">assert</span>(context != <span class="keyword">null</span>);</span><br><span class="line">  <span class="keyword">final</span> ScaffoldState result = context.ancestorStateOfType(<span class="keyword">const</span> TypeMatcher&lt;ScaffoldState&gt;());</span><br><span class="line">  <span class="keyword">if</span> (nullOk || result != <span class="keyword">null</span>)</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  <span class="keyword">throw</span> FlutterError(</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure><h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> MaterialApp(</span><br><span class="line">  <span class="comment">// APP 标题</span></span><br><span class="line">  title: <span class="string">'Material App'</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// APP 颜色</span></span><br><span class="line">  color: Colors.yellow,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 样式</span></span><br><span class="line">  theme: ThemeData(primaryColor: Colors.green),</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 主机暗色模式 android 下无效 ios 可以</span></span><br><span class="line">  darkTheme: ThemeData(primaryColor: Colors.yellow),</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 调试显示材质网格</span></span><br><span class="line">  debugShowMaterialGrid: <span class="keyword">false</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 显示性能叠加</span></span><br><span class="line">  showPerformanceOverlay: <span class="keyword">false</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 检查缓存图片的情况</span></span><br><span class="line">  checkerboardRasterCacheImages: <span class="keyword">false</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 检查不必要的setlayer</span></span><br><span class="line">  checkerboardOffscreenLayers: <span class="keyword">false</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 显示语义调试器</span></span><br><span class="line">  showSemanticsDebugger: <span class="keyword">false</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 显示debug标记 右上角</span></span><br><span class="line">  debugShowCheckedModeBanner: <span class="keyword">false</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 主页</span></span><br><span class="line">  home: Scaffold(</span><br><span class="line">    <span class="comment">// 菜单栏</span></span><br><span class="line">    appBar: AppBar(</span><br><span class="line">      title: Text(<span class="string">'Material App Bar'</span>),</span><br><span class="line">    ),</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 悬浮按钮</span></span><br><span class="line">    floatingActionButton: FloatingActionButton(</span><br><span class="line">      onPressed: () &#123;&#125;,</span><br><span class="line">      child: Icon(Icons.add_photo_alternate),</span><br><span class="line">    ),</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 悬浮按钮位置</span></span><br><span class="line">    floatingActionButtonLocation: FloatingActionButtonLocation.centerFloat,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 固定在下方显示的按钮</span></span><br><span class="line">    persistentFooterButtons: [</span><br><span class="line">      Text(<span class="string">'persistentFooterButtons1'</span>),</span><br><span class="line">      Text(<span class="string">'persistentFooterButtons2'</span>),</span><br><span class="line">    ],</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 左侧 侧滑抽屉菜单</span></span><br><span class="line">    drawer: Drawer(</span><br><span class="line">      child: Text(<span class="string">'data'</span>),</span><br><span class="line">    ),</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 右侧 侧滑抽屉菜单</span></span><br><span class="line">    endDrawer: Drawer(</span><br><span class="line">      child: Text(<span class="string">'data'</span>),</span><br><span class="line">    ),</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 底部菜单</span></span><br><span class="line">    bottomNavigationBar: Text(<span class="string">'bottomNavigationBar'</span>),</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 底部拉出菜单</span></span><br><span class="line">    bottomSheet: Text(<span class="string">'bottomSheet'</span>),</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 背景色</span></span><br><span class="line">    backgroundColor: Colors.amberAccent,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 自动适应底部padding</span></span><br><span class="line">    resizeToAvoidBottomPadding: <span class="keyword">true</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 压缩顶部菜单空间</span></span><br><span class="line">    primary: <span class="keyword">false</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// drawerDragStartBehavior: DragStartBehavior.start,</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 正文</span></span><br><span class="line">    body: Builder(</span><br><span class="line">      builder: (BuildContext context) &#123;</span><br><span class="line">        <span class="keyword">return</span> Center(</span><br><span class="line">          child: Container(</span><br><span class="line">            child: RaisedButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                <span class="comment">// Scaffold.of(context).openDrawer();</span></span><br><span class="line">                Scaffold.of(context).showSnackBar(<span class="keyword">new</span> SnackBar(</span><br><span class="line">                  content: <span class="keyword">new</span> Text(<span class="string">'Hello!'</span>),</span><br><span class="line">                ));</span><br><span class="line">              &#125;,</span><br><span class="line">              child: Text(<span class="string">'data'</span>),</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        );</span><br><span class="line">      &#125;,</span><br><span class="line">    ),</span><br><span class="line">  ),</span><br><span class="line"></span><br><span class="line">  <span class="comment">//</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/ducafecat/flutter-learn/blob/master/container_widget" target="_blank" rel="noopener">https://github.com/ducafecat/flutter-learn/blob/master/container_widget</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://api.flutter.dev/flutter/material/MaterialApp-class.html" target="_blank" rel="noopener">MaterialApp class</a></li><li><a href="https://api.flutter.dev/flutter/material/Scaffold-class.html" target="_blank" rel="noopener">Scaffold class</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;MaterialApp&lt;/li&gt;
&lt;li&gt;Scafford&lt;/li&gt;
&lt;li&gt;Scaffold.of&lt;/li&gt;

      
    
    </summary>
    
      <category term="Flutter零基础入门中文教学" scheme="https://blog.ducafecat.tech/categories/Flutter%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%E4%B8%AD%E6%96%87%E6%95%99%E5%AD%A6/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 零基础入门中文教学 - 14 基础组件 Container</title>
    <link href="https://blog.ducafecat.tech/2019/10/08/flutter/flutter-14-container/"/>
    <id>https://blog.ducafecat.tech/2019/10/08/flutter/flutter-14-container/</id>
    <published>2019-10-07T16:00:00.000Z</published>
    <updated>2019-10-10T08:34:41.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h2><ul><li>基础用法</li><li>Padding 和 Margin</li><li>BoxDecoration 装饰</li><li>BoxShadow 阴影</li><li>RadialGradient 渐变</li></ul><h2 id="基础用法"><a href="#基础用法" class="headerlink" title="基础用法"></a>基础用法</h2><p>Container 是一个组合类容器，它本身不对应具体的 RenderObject，它是 DecoratedBox、ConstrainedBox、Transform、Padding、Align 等组件组合的一个多功能容器，所以我们只需通过一个 Container 组件可以实现同时需要装饰、变换、限制的场景。下面是 Container 的定义：</p><ul><li>构造函数</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Container(&#123;</span><br><span class="line">    Key key,</span><br><span class="line">    <span class="comment">// 容器子Widget对齐方式</span></span><br><span class="line">    <span class="keyword">this</span>.alignment,</span><br><span class="line">    <span class="comment">// 容器内部padding</span></span><br><span class="line">    <span class="keyword">this</span>.padding,</span><br><span class="line">    <span class="comment">// 背景色</span></span><br><span class="line">    Color color,</span><br><span class="line">    <span class="comment">// 背景装饰</span></span><br><span class="line">    Decoration decoration,</span><br><span class="line">    <span class="comment">// 前景装饰</span></span><br><span class="line">    <span class="keyword">this</span>.foregroundDecoration,</span><br><span class="line">    <span class="comment">// 容器的宽度</span></span><br><span class="line">    <span class="built_in">double</span> width,</span><br><span class="line">    <span class="comment">// 容器的高度</span></span><br><span class="line">    <span class="built_in">double</span> height,</span><br><span class="line">    <span class="comment">// 容器大小的限制条件</span></span><br><span class="line">    BoxConstraints constraints,</span><br><span class="line">    <span class="comment">// 容器外部margin</span></span><br><span class="line">    <span class="keyword">this</span>.margin,</span><br><span class="line">    <span class="comment">// 变换，如旋转</span></span><br><span class="line">    <span class="keyword">this</span>.transform,</span><br><span class="line">    <span class="comment">// 容器内子Widget</span></span><br><span class="line">    <span class="keyword">this</span>.child,</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure><h2 id="BoxDecoration-装饰"><a href="#BoxDecoration-装饰" class="headerlink" title="BoxDecoration 装饰"></a>BoxDecoration 装饰</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> BoxDecoration(&#123;</span><br><span class="line">  <span class="comment">// 背景色</span></span><br><span class="line">  <span class="keyword">this</span>.color,</span><br><span class="line">  <span class="comment">// 背景图片</span></span><br><span class="line">  <span class="keyword">this</span>.image,</span><br><span class="line">  <span class="comment">// 边框样式</span></span><br><span class="line">  <span class="keyword">this</span>.border,</span><br><span class="line">  <span class="comment">// 边框圆角</span></span><br><span class="line">  <span class="keyword">this</span>.borderRadius,</span><br><span class="line">  <span class="comment">// 阴影</span></span><br><span class="line">  <span class="keyword">this</span>.boxShadow,</span><br><span class="line">  <span class="comment">// 渐变</span></span><br><span class="line">  <span class="keyword">this</span>.gradient,</span><br><span class="line">  <span class="comment">// 背景混合模式</span></span><br><span class="line">  <span class="keyword">this</span>.backgroundBlendMode,</span><br><span class="line">  <span class="comment">// 形状</span></span><br><span class="line">  <span class="keyword">this</span>.shape = BoxShape.rectangle,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">Container(</span><br><span class="line">    constraints: BoxConstraints.expand(</span><br><span class="line">      height: <span class="number">200.0</span>,</span><br><span class="line">    ),</span><br><span class="line">    margin: <span class="keyword">const</span> EdgeInsets.all(<span class="number">20.0</span>),</span><br><span class="line">    padding: <span class="keyword">const</span> EdgeInsets.all(<span class="number">8.0</span>),</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 背景色</span></span><br><span class="line">    <span class="comment">// color: Colors.teal.shade700,</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 子Widget居中</span></span><br><span class="line">    alignment: Alignment.centerLeft,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 子Widget元素</span></span><br><span class="line">    child: Text(<span class="string">'Hello World'</span>,</span><br><span class="line">        style: Theme.of(context)</span><br><span class="line">            .textTheme</span><br><span class="line">            .display1</span><br><span class="line">            .copyWith(color: Colors.white)),</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 背景装饰</span></span><br><span class="line">    decoration: BoxDecoration(</span><br><span class="line">      <span class="comment">// 背景色</span></span><br><span class="line">      color: Colors.blueAccent,</span><br><span class="line">      <span class="comment">// 圆角</span></span><br><span class="line">      <span class="comment">// borderRadius: BorderRadius.all(</span></span><br><span class="line">      <span class="comment">//   Radius.circular(20.0),</span></span><br><span class="line">      <span class="comment">// ),</span></span><br><span class="line">      <span class="comment">// 渐变</span></span><br><span class="line">      gradient: RadialGradient(</span><br><span class="line">        colors: [Colors.red, Colors.orange],</span><br><span class="line">        center: Alignment.topLeft,</span><br><span class="line">        radius: <span class="number">.98</span>,</span><br><span class="line">      ),</span><br><span class="line">      <span class="comment">// 阴影</span></span><br><span class="line">      boxShadow: [</span><br><span class="line">        BoxShadow(</span><br><span class="line">          blurRadius: <span class="number">2</span>,</span><br><span class="line">          offset: Offset(<span class="number">0</span>, <span class="number">2</span>),</span><br><span class="line">          color: Colors.blue,</span><br><span class="line">        ),</span><br><span class="line">      ],</span><br><span class="line">      <span class="comment">// 背景图</span></span><br><span class="line">      <span class="comment">// image: DecorationImage(</span></span><br><span class="line">      <span class="comment">//   image: AssetImage('assets/flutter.png'),</span></span><br><span class="line">      <span class="comment">//   fit: BoxFit.cover,</span></span><br><span class="line">      <span class="comment">// ),</span></span><br><span class="line">      <span class="comment">// 背景混合模式</span></span><br><span class="line">      backgroundBlendMode: BlendMode.color,</span><br><span class="line">      <span class="comment">// 形状</span></span><br><span class="line">      shape: BoxShape.circle,</span><br><span class="line">    ),</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 前景装饰</span></span><br><span class="line">    <span class="comment">// foregroundDecoration: BoxDecoration(</span></span><br><span class="line">    <span class="comment">//   image: DecorationImage(</span></span><br><span class="line">    <span class="comment">//     image: AssetImage('assets/flutter.png'),</span></span><br><span class="line">    <span class="comment">//   ),</span></span><br><span class="line">    <span class="comment">// ),</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Container旋转</span></span><br><span class="line">    <span class="comment">// transform: Matrix4.rotationZ(0.1),</span></span><br><span class="line">  ),</span><br></pre></td></tr></table></figure><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/ducafecat/flutter-learn/blob/master/container_widget" target="_blank" rel="noopener">https://github.com/ducafecat/flutter-learn/blob/master/container_widget</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://api.flutter.dev/flutter/widgets/Container-class.html" target="_blank" rel="noopener">Container class</a></li><li><a href="https://api.flutter.dev/flutter/painting/BoxDecoration-class.html" target="_blank" rel="noopener">BoxDecoration class</a></li><li><a href="https://api.flutter.dev/flutter/painting/RadialGradient-class.html" target="_blank" rel="noopener">RadialGradient class</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;基础用法&lt;/li&gt;
&lt;li&gt;Padding 和 Margin&lt;/li&gt;
&lt;li&gt;BoxDecoration 装饰
      
    
    </summary>
    
      <category term="Flutter零基础入门中文教学" scheme="https://blog.ducafecat.tech/categories/Flutter%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%E4%B8%AD%E6%96%87%E6%95%99%E5%AD%A6/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 零基础入门中文教学 - 13 基础组件 Button FlatButton RaisedButton OutlineButton</title>
    <link href="https://blog.ducafecat.tech/2019/10/07/flutter/flutter-13-widget-button/"/>
    <id>https://blog.ducafecat.tech/2019/10/07/flutter/flutter-13-widget-button/</id>
    <published>2019-10-06T16:00:00.000Z</published>
    <updated>2019-10-07T09:10:03.000Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-10-07-17-06-41.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h2><p>常用按钮操作</p><ul><li>FlatButton（扁平化）</li><li>RaisedButton（有按下状态）</li><li>OutlineButton（有边框）</li><li>MaterialButton（Material 风格）</li><li>RawMaterialButton（没有应用 style 的 Material 风格按钮）</li><li>FloatingActionButton（悬浮按钮）</li></ul><h2 id="Button"><a href="#Button" class="headerlink" title="Button"></a>Button</h2><p>在 Flutter 中 Button 有很多封装好的 Widget 类：</p><ul><li>FlatButton（扁平化）</li><li>RaisedButton（有按下状态）</li><li>OutlineButton（有边框）</li><li>MaterialButton（Material 风格）</li><li>RawMaterialButton（没有应用 style 的 Material 风格按钮）</li><li>FloatingActionButton（悬浮按钮）</li><li>BackButton（返回按钮）</li><li>IconButton（Icon 图标）</li><li>CloseButton（关闭按钮）</li><li>ButtonBar（可以排列放置按钮元素的）</li></ul><p>其中大部分的 Button 都是基于 RawMaterialButton 进行的修改定制而成的。</p><ul><li>构造函数</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> FlatButton(&#123;</span><br><span class="line">    Key key,</span><br><span class="line">    <span class="comment">// 点击事件</span></span><br><span class="line">    <span class="meta">@required</span> VoidCallback onPressed,</span><br><span class="line">    <span class="comment">// 高亮改变，按下和抬起时都会调用的方法</span></span><br><span class="line">    ValueChanged&lt;<span class="built_in">bool</span>&gt; onHighlightChanged,</span><br><span class="line">    <span class="comment">// 定义按钮的基色，以及按钮的最小尺寸，内部填充和形状的默认值</span></span><br><span class="line">    ButtonTextTheme textTheme,</span><br><span class="line">    <span class="comment">// 按钮文字的颜色</span></span><br><span class="line">    Color textColor,</span><br><span class="line">    <span class="comment">// 按钮禁用时的文字颜色</span></span><br><span class="line">    Color disabledTextColor,</span><br><span class="line">    <span class="comment">// 按钮背景颜色</span></span><br><span class="line">    Color color,</span><br><span class="line">    <span class="comment">// 按钮禁用时的背景颜色</span></span><br><span class="line">    Color disabledColor,</span><br><span class="line">    <span class="comment">// 按钮按下时的背景颜色</span></span><br><span class="line">    Color highlightColor,</span><br><span class="line">    <span class="comment">// 点击时，水波动画中水波的颜色，不要水波纹效果设置透明颜色即可</span></span><br><span class="line">    Color splashColor,</span><br><span class="line">    <span class="comment">// 按钮主题，默认是浅色主题，分为深色和浅色</span></span><br><span class="line">    Brightness colorBrightness,</span><br><span class="line">    <span class="comment">// 按钮的填充间距</span></span><br><span class="line">    EdgeInsetsGeometry padding,</span><br><span class="line">    <span class="comment">// 外形</span></span><br><span class="line">    ShapeBorder shape,</span><br><span class="line">    Clip clipBehavior = Clip.none,</span><br><span class="line">    MaterialTapTargetSize materialTapTargetSize,</span><br><span class="line">    <span class="comment">// 按钮的内容，里面可以放子元素</span></span><br><span class="line">    <span class="meta">@required</span> Widget child,</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure><h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><ul><li>后退、关闭</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ButtonBar(</span><br><span class="line">  children: &lt;Widget&gt;[</span><br><span class="line">    BackButton(</span><br><span class="line">      color: Colors.orange,</span><br><span class="line">    ),</span><br><span class="line">    CloseButton(),</span><br><span class="line">  ],</span><br><span class="line">),</span><br></pre></td></tr></table></figure><ul><li>扁平按钮 FlatButton</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">ButtonBar(</span><br><span class="line">  children: &lt;Widget&gt;[</span><br><span class="line">    FlatButton(</span><br><span class="line">      child: Text(<span class="string">'扁平按钮'</span>),</span><br><span class="line">      onPressed: () &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">'我是扁平按钮'</span>);</span><br><span class="line">      &#125;,</span><br><span class="line">    ),</span><br><span class="line">    FlatButton(</span><br><span class="line">      child: Text(</span><br><span class="line">        <span class="string">'扁平按钮 禁用'</span>,</span><br><span class="line">      ),</span><br><span class="line">      onPressed: <span class="keyword">null</span>,</span><br><span class="line">    ),</span><br><span class="line">  ],</span><br><span class="line">),</span><br></pre></td></tr></table></figure><ul><li>扁平带图标按钮 FlatButton.icon</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">ButtonBar(</span><br><span class="line">  children: &lt;Widget&gt;[</span><br><span class="line">    FlatButton.icon(</span><br><span class="line">      label: Text(<span class="string">'带图标扁平按钮'</span>),</span><br><span class="line">      icon: Icon(Icons.add_call, size: <span class="number">18.0</span>),</span><br><span class="line">      onPressed: () &#123;&#125;,</span><br><span class="line">    ),</span><br><span class="line">    FlatButton.icon(</span><br><span class="line">      icon: <span class="keyword">const</span> Icon(Icons.add_call, size: <span class="number">18.0</span>),</span><br><span class="line">      label: <span class="keyword">const</span> Text(<span class="string">'带图标扁平按钮 禁用'</span>),</span><br><span class="line">      onPressed: <span class="keyword">null</span>,</span><br><span class="line">    ),</span><br><span class="line">  ],</span><br><span class="line">),</span><br></pre></td></tr></table></figure><ul><li>带框按钮 OutlineButton</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ButtonBar(</span><br><span class="line">  children: &lt;Widget&gt;[</span><br><span class="line">    OutlineButton(</span><br><span class="line">      onPressed: () &#123;&#125;,</span><br><span class="line">      child: Text(<span class="string">'带框按钮'</span>),</span><br><span class="line">    ),</span><br><span class="line">    OutlineButton(</span><br><span class="line">      onPressed: <span class="keyword">null</span>,</span><br><span class="line">      child: Text(<span class="string">'带框按钮 禁用'</span>),</span><br><span class="line">    ),</span><br><span class="line">  ],</span><br><span class="line">),</span><br></pre></td></tr></table></figure><ul><li>带框图标按钮 OutlineButton.icon</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">ButtonBar(</span><br><span class="line">  children: &lt;Widget&gt;[</span><br><span class="line">    OutlineButton.icon(</span><br><span class="line">      label: Text(<span class="string">'带框图标按钮'</span>),</span><br><span class="line">      icon: Icon(Icons.add_to_photos, size: <span class="number">18.0</span>),</span><br><span class="line">      onPressed: () &#123;&#125;,</span><br><span class="line">    ),</span><br><span class="line">    OutlineButton.icon(</span><br><span class="line">      disabledTextColor: Colors.orange,</span><br><span class="line">      icon: Icon(Icons.add_to_photos, size: <span class="number">18.0</span>),</span><br><span class="line">      label: Text(<span class="string">'带框图标按钮 禁用'</span>),</span><br><span class="line">      onPressed: <span class="keyword">null</span>,</span><br><span class="line">    ),</span><br><span class="line">  ],</span><br><span class="line">),</span><br></pre></td></tr></table></figure><ul><li>立体按钮 RaisedButton</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ButtonBar(</span><br><span class="line">  children: &lt;Widget&gt;[</span><br><span class="line">    RaisedButton(</span><br><span class="line">      child: Text(<span class="string">'立体按钮'</span>),</span><br><span class="line">      onPressed: () &#123;&#125;,</span><br><span class="line">    ),</span><br><span class="line">    RaisedButton(</span><br><span class="line">      child: Text(<span class="string">'立体按钮 禁用'</span>),</span><br><span class="line">      onPressed: <span class="keyword">null</span>,</span><br><span class="line">    ),</span><br><span class="line">  ],</span><br><span class="line">),</span><br></pre></td></tr></table></figure><ul><li>立体按钮带图标 RaisedButton.icon</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">ButtonBar(</span><br><span class="line">  children: &lt;Widget&gt;[</span><br><span class="line">    RaisedButton.icon(</span><br><span class="line">      icon: Icon(Icons.add, size: <span class="number">18.0</span>),</span><br><span class="line">      label: Text(<span class="string">'立体按钮带图标'</span>),</span><br><span class="line">      onPressed: () &#123;&#125;,</span><br><span class="line">    ),</span><br><span class="line">    RaisedButton.icon(</span><br><span class="line">      icon: Icon(Icons.add, size: <span class="number">18.0</span>),</span><br><span class="line">      label: Text(<span class="string">'立体按钮带图标 禁用'</span>),</span><br><span class="line">      onPressed: <span class="keyword">null</span>,</span><br><span class="line">    ),</span><br><span class="line">  ],</span><br><span class="line">),</span><br></pre></td></tr></table></figure><ul><li>Material 按钮 MaterialButton</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">ButtonBar(</span><br><span class="line">  children: &lt;Widget&gt;[</span><br><span class="line">    MaterialButton(</span><br><span class="line">      child: Text(<span class="string">'Material按钮'</span>),</span><br><span class="line">      onPressed: () &#123;</span><br><span class="line">        <span class="comment">// Perform some action</span></span><br><span class="line">      &#125;,</span><br><span class="line">    ),</span><br><span class="line">    MaterialButton(</span><br><span class="line">      child: Text(<span class="string">'Material按钮 禁用'</span>),</span><br><span class="line">      onPressed: <span class="keyword">null</span>,</span><br><span class="line">    ),</span><br><span class="line">  ],</span><br><span class="line">),</span><br></pre></td></tr></table></figure><ul><li>RawMaterial 按钮 RawMaterialButton</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">ButtonBar(</span><br><span class="line">  children: &lt;Widget&gt;[</span><br><span class="line">    RawMaterialButton(</span><br><span class="line">      child: Text(<span class="string">'RawMaterial按钮'</span>),</span><br><span class="line">      onPressed: () &#123;</span><br><span class="line">        <span class="comment">// Perform some action</span></span><br><span class="line">      &#125;,</span><br><span class="line">    ),</span><br><span class="line">    RawMaterialButton(</span><br><span class="line">      child: Text(<span class="string">'RawMaterial按钮 禁用'</span>),</span><br><span class="line">      onPressed: <span class="keyword">null</span>,</span><br><span class="line">    ),</span><br><span class="line">  ],</span><br><span class="line">),</span><br></pre></td></tr></table></figure><ul><li>浮动按钮 FloatingActionButton</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">ButtonBar(</span><br><span class="line">  children: &lt;Widget&gt;[</span><br><span class="line">    FloatingActionButton(</span><br><span class="line">      child: <span class="keyword">const</span> Icon(Icons.add),</span><br><span class="line">      heroTag: <span class="string">'浮动按钮'</span>,</span><br><span class="line">      onPressed: () &#123;</span><br><span class="line">        <span class="comment">// Perform some action</span></span><br><span class="line">      &#125;,</span><br><span class="line">      tooltip: <span class="string">'浮动按钮提示1'</span>,</span><br><span class="line">    ),</span><br><span class="line">    FloatingActionButton(</span><br><span class="line">      child: <span class="keyword">const</span> Icon(Icons.add),</span><br><span class="line">      onPressed: <span class="keyword">null</span>,</span><br><span class="line">      heroTag: <span class="string">'浮动按钮 禁用'</span>,</span><br><span class="line">      tooltip: <span class="string">'浮动按钮提示2'</span>,</span><br><span class="line">    ),</span><br><span class="line">  ],</span><br><span class="line">),</span><br></pre></td></tr></table></figure><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/ducafecat/flutter-learn/blob/master/button_widget" target="_blank" rel="noopener">https://github.com/ducafecat/flutter-learn/blob/master/button_widget</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://api.flutter.dev/flutter/material/FlatButton-class.html" target="_blank" rel="noopener">FlatButton class</a></li><li><a href="https://api.flutter.dev/flutter/material/RaisedButton-class.html" target="_blank" rel="noopener">RaisedButton class</a></li><li><a href="https://api.flutter.dev/flutter/material/OutlineButton-class.html" target="_blank" rel="noopener">OutlineButton class</a></li><li><a href="https://api.flutter.dev/flutter/material/MaterialButton-class.html" target="_blank" rel="noopener">MaterialButton class</a></li><li><a href="https://api.flutter.dev/flutter/material/RawMaterialButton-class.html" target="_blank" rel="noopener">RawMaterialButton class</a></li><li><a href="https://api.flutter.dev/flutter/material/FloatingActionButton-class.html" target="_blank" rel="noopener">FloatingActionButton class</a></li><li><a href="https://api.flutter.dev/flutter/material/BackButton-class.html" target="_blank" rel="noopener">BackButton class</a></li><li><a href="https://api.flutter.dev/flutter/material/IconButton-class.html" target="_blank" rel="noopener">IconButton class</a></li><li><a href="https://api.flutter.dev/flutter/material/CloseButton-class.html" target="_blank" rel="noopener">CloseButton class</a></li><li><a href="https://api.flutter.dev/flutter/material/ButtonBar-class.html" target="_blank" rel="noopener">ButtonBar class</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="Flutter零基础入门中文教学" scheme="https://blog.ducafecat.tech/categories/Flutter%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%E4%B8%AD%E6%96%87%E6%95%99%E5%AD%A6/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 零基础入门中文教学 - 12 基础组件 Image Asset NetworkImage</title>
    <link href="https://blog.ducafecat.tech/2019/10/07/flutter/flutter-12-widget-image/"/>
    <id>https://blog.ducafecat.tech/2019/10/07/flutter/flutter-12-widget-image/</id>
    <published>2019-10-06T16:00:00.000Z</published>
    <updated>2019-10-07T09:07:13.000Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-10-07-16-37-56.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h2><ul><li>image 构造函数的 5 种方式</li><li>加载图片 Asset、NetworkImage</li><li>占位图 FadeInImage</li><li>头像 CircleAvatar</li><li>圆角 ClipRRect</li><li>图片 fit 方式</li></ul><h2 id="1-Image"><a href="#1-Image" class="headerlink" title="1. Image"></a>1. Image</h2><p>图片显示组件</p><p>支持图像格式 JPEG，PNG，GIF，动画 GIF，WebP，动画 WebP，BMP 和 WBMP</p><ul><li>五种构造方式</li></ul><table><thead><tr><th>构造</th><th>说明</th></tr></thead><tbody><tr><td>Image()</td><td>ImageProvider 适配图片</td></tr><tr><td>Image.asset</td><td>加载资源图片</td></tr><tr><td>Image.file</td><td>加载本地图片</td></tr><tr><td>Image.network</td><td>加载网络图片</td></tr><tr><td>Image.memory</td><td>加载 Uint8List 资源图片</td></tr></tbody></table><ul><li>构造参数</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//通过ImageProvider来加载图片</span></span><br><span class="line"><span class="keyword">const</span> Image(&#123;</span><br><span class="line">    Key key,</span><br><span class="line">    <span class="comment">// ImageProvider，图像显示源</span></span><br><span class="line">    <span class="meta">@required</span> <span class="keyword">this</span>.image,</span><br><span class="line">    <span class="keyword">this</span>.semanticLabel,</span><br><span class="line">    <span class="keyword">this</span>.excludeFromSemantics = <span class="keyword">false</span>,</span><br><span class="line">    <span class="comment">//显示宽度</span></span><br><span class="line">    <span class="keyword">this</span>.width,</span><br><span class="line">    <span class="comment">//显示高度</span></span><br><span class="line">    <span class="keyword">this</span>.height,</span><br><span class="line">    <span class="comment">//图片的混合色值</span></span><br><span class="line">    <span class="keyword">this</span>.color,</span><br><span class="line">    <span class="comment">//混合模式</span></span><br><span class="line">    <span class="keyword">this</span>.colorBlendMode,</span><br><span class="line">    <span class="comment">//缩放显示模式</span></span><br><span class="line">    <span class="keyword">this</span>.fit,</span><br><span class="line">    <span class="comment">//对齐方式</span></span><br><span class="line">    <span class="keyword">this</span>.alignment = Alignment.center,</span><br><span class="line">    <span class="comment">//重复方式</span></span><br><span class="line">    <span class="keyword">this</span>.repeat = ImageRepeat.noRepeat,</span><br><span class="line">    <span class="comment">//当图片需要被拉伸显示的时候，centerSlice定义的矩形区域会被拉伸，类似.9图片</span></span><br><span class="line">    <span class="keyword">this</span>.centerSlice,</span><br><span class="line">    <span class="comment">//类似于文字的显示方向</span></span><br><span class="line">    <span class="keyword">this</span>.matchTextDirection = <span class="keyword">false</span>,</span><br><span class="line">    <span class="comment">//图片发生变化后，加载过程中原图片保留还是留白</span></span><br><span class="line">    <span class="keyword">this</span>.gaplessPlayback = <span class="keyword">false</span>,</span><br><span class="line">    <span class="comment">//图片显示质量</span></span><br><span class="line">    <span class="keyword">this</span>.filterQuality = FilterQuality.low,</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 加载网络图片，封装类：NetworkImage</span></span><br><span class="line">Image.network(</span><br><span class="line">    <span class="comment">//路径</span></span><br><span class="line">    <span class="built_in">String</span> src,</span><br><span class="line">   &#123;</span><br><span class="line">    Key key,</span><br><span class="line">    <span class="comment">//缩放</span></span><br><span class="line">    <span class="built_in">double</span> scale = <span class="number">1.0</span>,</span><br><span class="line">    <span class="keyword">this</span>.semanticLabel,</span><br><span class="line">    <span class="keyword">this</span>.excludeFromSemantics = <span class="keyword">false</span>,</span><br><span class="line">    <span class="keyword">this</span>.width,</span><br><span class="line">    <span class="keyword">this</span>.height,</span><br><span class="line">    <span class="keyword">this</span>.color,</span><br><span class="line">    <span class="keyword">this</span>.colorBlendMode,</span><br><span class="line">    <span class="keyword">this</span>.fit,</span><br><span class="line">    <span class="keyword">this</span>.alignment = Alignment.center,</span><br><span class="line">    <span class="keyword">this</span>.repeat = ImageRepeat.noRepeat,</span><br><span class="line">    <span class="keyword">this</span>.centerSlice,</span><br><span class="line">    <span class="keyword">this</span>.matchTextDirection = <span class="keyword">false</span>,</span><br><span class="line">    <span class="keyword">this</span>.gaplessPlayback = <span class="keyword">false</span>,</span><br><span class="line">    <span class="keyword">this</span>.filterQuality = FilterQuality.low,</span><br><span class="line">    <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">String</span>&gt; headers,</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 加载本地File文件图片，封装类：FileImage</span></span><br><span class="line">Image.file(</span><br><span class="line">    <span class="comment">//File对象</span></span><br><span class="line">    File file,</span><br><span class="line">  &#123;</span><br><span class="line">    Key key,</span><br><span class="line">    <span class="built_in">double</span> scale = <span class="number">1.0</span>,</span><br><span class="line">    <span class="keyword">this</span>.semanticLabel,</span><br><span class="line">    <span class="keyword">this</span>.excludeFromSemantics = <span class="keyword">false</span>,</span><br><span class="line">    <span class="keyword">this</span>.width,</span><br><span class="line">    <span class="keyword">this</span>.height,</span><br><span class="line">    <span class="keyword">this</span>.color,</span><br><span class="line">    <span class="keyword">this</span>.colorBlendMode,</span><br><span class="line">    <span class="keyword">this</span>.fit,</span><br><span class="line">    <span class="keyword">this</span>.alignment = Alignment.center,</span><br><span class="line">    <span class="keyword">this</span>.repeat = ImageRepeat.noRepeat,</span><br><span class="line">    <span class="keyword">this</span>.centerSlice,</span><br><span class="line">    <span class="keyword">this</span>.matchTextDirection = <span class="keyword">false</span>,</span><br><span class="line">    <span class="keyword">this</span>.gaplessPlayback = <span class="keyword">false</span>,</span><br><span class="line">    <span class="keyword">this</span>.filterQuality = FilterQuality.low,</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 加载本地资源图片,例如项目内资源图片</span></span><br><span class="line"><span class="comment">// 需要把图片路径在pubspec.yaml文件中声明一下，如：</span></span><br><span class="line"><span class="comment">// assets:</span></span><br><span class="line"><span class="comment">//      - packages/fancy_backgrounds/backgrounds/background1.png</span></span><br><span class="line"><span class="comment">// 封装类有：AssetImage、ExactAssetImage</span></span><br><span class="line">Image.asset(</span><br><span class="line">    <span class="comment">//文件名称，包含路径</span></span><br><span class="line">    <span class="built_in">String</span> name,</span><br><span class="line">  &#123;</span><br><span class="line">    Key key,</span><br><span class="line">    <span class="comment">// 用于访问资源对象</span></span><br><span class="line">    AssetBundle bundle,</span><br><span class="line">    <span class="keyword">this</span>.semanticLabel,</span><br><span class="line">    <span class="keyword">this</span>.excludeFromSemantics = <span class="keyword">false</span>,</span><br><span class="line">    <span class="built_in">double</span> scale,</span><br><span class="line">    <span class="keyword">this</span>.width,</span><br><span class="line">    <span class="keyword">this</span>.height,</span><br><span class="line">    <span class="keyword">this</span>.color,</span><br><span class="line">    <span class="keyword">this</span>.colorBlendMode,</span><br><span class="line">    <span class="keyword">this</span>.fit,</span><br><span class="line">    <span class="keyword">this</span>.alignment = Alignment.center,</span><br><span class="line">    <span class="keyword">this</span>.repeat = ImageRepeat.noRepeat,</span><br><span class="line">    <span class="keyword">this</span>.centerSlice,</span><br><span class="line">    <span class="keyword">this</span>.matchTextDirection = <span class="keyword">false</span>,</span><br><span class="line">    <span class="keyword">this</span>.gaplessPlayback = <span class="keyword">false</span>,</span><br><span class="line">    <span class="built_in">String</span> package,</span><br><span class="line">    <span class="keyword">this</span>.filterQuality = FilterQuality.low,</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 加载Uint8List资源图片/从内存中获取图片显示</span></span><br><span class="line"><span class="comment">// 封装类：MemoryImage</span></span><br><span class="line">Image.memory(</span><br><span class="line">    <span class="comment">// Uint8List资源图片</span></span><br><span class="line">    Uint8List bytes,</span><br><span class="line">  &#123;</span><br><span class="line">    Key key,</span><br><span class="line">    <span class="built_in">double</span> scale = <span class="number">1.0</span>,</span><br><span class="line">    <span class="keyword">this</span>.semanticLabel,</span><br><span class="line">    <span class="keyword">this</span>.excludeFromSemantics = <span class="keyword">false</span>,</span><br><span class="line">    <span class="keyword">this</span>.width,</span><br><span class="line">    <span class="keyword">this</span>.height,</span><br><span class="line">    <span class="keyword">this</span>.color,</span><br><span class="line">    <span class="keyword">this</span>.colorBlendMode,</span><br><span class="line">    <span class="keyword">this</span>.fit,</span><br><span class="line">    <span class="keyword">this</span>.alignment = Alignment.center,</span><br><span class="line">    <span class="keyword">this</span>.repeat = ImageRepeat.noRepeat,</span><br><span class="line">    <span class="keyword">this</span>.centerSlice,</span><br><span class="line">    <span class="keyword">this</span>.matchTextDirection = <span class="keyword">false</span>,</span><br><span class="line">    <span class="keyword">this</span>.gaplessPlayback = <span class="keyword">false</span>,</span><br><span class="line">    <span class="keyword">this</span>.filterQuality = FilterQuality.low,</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure><p>29 种混合模式</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> BlendMode &#123;</span><br><span class="line">  clear,src,dst,srcOver,dstOver,srcIn,dstIn,srcOut,dstOut,srcATop,dstATop,xor,plus，modulate,screen,overlay,darken,lighten,colorDodge,colorBurn,hardLight,softLight,difference,exclusion,multiply,hue,saturation,color,luminosity,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>主要的混合模式效果如下</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="image-20190523170707924.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>缩放</li></ul><p>enum BoxFit 枚举对象</p><table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>fill</td><td>图片按照指定的大小在 Image 中显示，拉伸显示图片，不保持原比例，填满 Image。<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="image-20190523170951568.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure></td></tr><tr><td>contain</td><td>以原图正常显示为目的，如果原图大小大于 Image 的 size，就按照比例缩小原图的宽高，居中显示在 Image 中。如果原图 size 小于 Image 的 size，则按比例拉升原图的宽和高，填充 Image 一边并居中显示。<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="image-20190523171033329.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure></td></tr><tr><td>cover</td><td>以原图填满 Image 为目的，如果原图 size 大于 Image 的 size，按比例缩小，居中显示在 Image 上。如果原图 size 小于 Image 的 size，则按比例拉升原图的宽和高，填充 Image 居中显示。<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="image-20190523172626391.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure></td></tr><tr><td>fitWidth</td><td>以原图正常显示为目的，如果原图宽大小大于（小于）Image 的宽，就缩小（放大）原图的宽与 Image 一致，居中显示在 Image 中。<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="image-20190523172716044.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure></td></tr><tr><td>fitHeight</td><td>以原图正常显示为目的，如果原图高大小大于（小于）Image 的高，就缩小（放大）原图的高与 Image 一致，居中显示在 Image 中。<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="image-20190523172757661.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure></td></tr><tr><td>none</td><td>保持原图的大小，显示在 Image 的中心。当原图的 size 大于 Image 的 size 时，多出来的部分被截掉。<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="image-20190523172853657.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure></td></tr><tr><td>scaleDown</td><td>以原图正常显示为目的，如果原图大小大于 Image 的 size，就按照比例缩小原图的宽高，居中显示在 Image 中。如果原图 size 小于 Image 的 size，则不做处理居中显示图片。<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="image-20190523172919652.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure></td></tr></tbody></table><h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><ul><li>pubspec.yaml</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">assets:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">assets/images/</span></span><br></pre></td></tr></table></figure><ul><li>main.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// assets</span></span><br><span class="line">Text(<span class="string">'assets'</span>),</span><br><span class="line">Image.asset(_assetImg),</span><br><span class="line"></span><br><span class="line"><span class="comment">// 网络读取</span></span><br><span class="line">Text(<span class="string">'网络读取'</span>),</span><br><span class="line">Image.network(_imgUrl),</span><br><span class="line"></span><br><span class="line"><span class="comment">// NetworkImage</span></span><br><span class="line">Text(<span class="string">'NetworkImage'</span>),</span><br><span class="line">Image(image: NetworkImage(_imgUrl)),</span><br><span class="line"></span><br><span class="line"><span class="comment">// 占位图</span></span><br><span class="line">Text(<span class="string">'占位图'</span>),</span><br><span class="line">FadeInImage(</span><br><span class="line">    fadeInCurve: Curves.bounceIn,</span><br><span class="line">    placeholder: AssetImage(_assetImg),</span><br><span class="line">    image: NetworkImage(_imgUrl)),</span><br><span class="line"></span><br><span class="line"><span class="comment">// 原型头像</span></span><br><span class="line">Text(<span class="string">'原型头像'</span>),</span><br><span class="line">CircleAvatar(</span><br><span class="line">    backgroundColor: Colors.brown.shade800,</span><br><span class="line">    child: Text(<span class="string">'圆角图片'</span>),</span><br><span class="line">    backgroundImage: AssetImage(_assetHeaderImg),</span><br><span class="line">    radius: <span class="number">50.0</span>),</span><br><span class="line"></span><br><span class="line"><span class="comment">// 图标</span></span><br><span class="line">Text(<span class="string">'图标'</span>),</span><br><span class="line">ImageIcon(</span><br><span class="line">  NetworkImage(_imgUrl),</span><br><span class="line">  size: <span class="number">100</span>,</span><br><span class="line">),</span><br><span class="line"></span><br><span class="line"><span class="comment">// ClipRRect 圆角</span></span><br><span class="line">Text(<span class="string">'ClipRRect 圆角'</span>),</span><br><span class="line">ClipRRect(</span><br><span class="line">  child: Image.network(_imgUrl),</span><br><span class="line">  borderRadius: BorderRadius.all(Radius.circular(<span class="number">20</span>)),</span><br><span class="line">),</span><br><span class="line"></span><br><span class="line"><span class="comment">// 圆角矩形框</span></span><br><span class="line">Text(<span class="string">'圆角矩形框'</span>),</span><br><span class="line">Container(</span><br><span class="line">  width: <span class="number">200</span>,</span><br><span class="line">  height: <span class="number">80</span>,</span><br><span class="line">  decoration: BoxDecoration(</span><br><span class="line">    shape: BoxShape.rectangle,</span><br><span class="line">    borderRadius: BorderRadius.circular(<span class="number">10.0</span>),</span><br><span class="line">    image: DecorationImage(</span><br><span class="line">        image: NetworkImage(_imgUrl), fit: BoxFit.cover),</span><br><span class="line">  ),</span><br><span class="line">),</span><br><span class="line"></span><br><span class="line"><span class="comment">// 椭圆图</span></span><br><span class="line">Text(<span class="string">'椭圆图'</span>),</span><br><span class="line">ClipOval(</span><br><span class="line">  child: Image.network(</span><br><span class="line">    _imgUrl,</span><br><span class="line">    scale: <span class="number">8.5</span>,</span><br><span class="line">  ),</span><br><span class="line">),</span><br><span class="line"></span><br><span class="line"><span class="comment">// 混色</span></span><br><span class="line">Text(<span class="string">'混色'</span>),</span><br><span class="line">Image.asset(</span><br><span class="line">  _assetHeaderImg,</span><br><span class="line">  color: Colors.amber,</span><br><span class="line">  colorBlendMode: BlendMode.dstATop,</span><br><span class="line">),</span><br><span class="line"></span><br><span class="line"><span class="comment">// 裁剪</span></span><br><span class="line">Text(<span class="string">'裁剪'</span>),</span><br><span class="line">Image.asset(</span><br><span class="line">  _assetImg,</span><br><span class="line">  width: <span class="number">400</span>,</span><br><span class="line">  height: <span class="number">50</span>,</span><br><span class="line">  fit: BoxFit.cover,</span><br><span class="line">),</span><br></pre></td></tr></table></figure><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/ducafecat/flutter-learn/tree/master/image_widget" target="_blank" rel="noopener">https://github.com/ducafecat/flutter-learn/tree/master/image_widget</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://api.flutter.dev/flutter/dart-ui/Image-class.html" target="_blank" rel="noopener">Image class</a></li><li><a href="https://api.flutter.dev/flutter/painting/NetworkImage-class.html" target="_blank" rel="noopener">NetworkImage class</a></li><li><a href="https://api.flutter.dev/flutter/widgets/FadeInImage-class.html" target="_blank" rel="noopener">FadeInImage class</a></li><li><a href="https://api.flutter.dev/flutter/widgets/ClipRRect-class.html" target="_blank" rel="noopener">ClipRRect class</a></li><li><a href="https://api.flutter.dev/flutter/widgets/ClipOval-class.html" target="_blank" rel="noopener">ClipOval class</a></li><li><a href="https://api.flutter.dev/flutter/widgets/ImageIcon-class.html" target="_blank" rel="noopener">ImageIcon class</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="Flutter零基础入门中文教学" scheme="https://blog.ducafecat.tech/categories/Flutter%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%E4%B8%AD%E6%96%87%E6%95%99%E5%AD%A6/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 零基础入门中文教学 - 11 基础组件 Text RichText TextSpan</title>
    <link href="https://blog.ducafecat.tech/2019/10/06/flutter/flutter-11-widget-text/"/>
    <id>https://blog.ducafecat.tech/2019/10/06/flutter/flutter-11-widget-text/</id>
    <published>2019-10-05T16:00:00.000Z</published>
    <updated>2019-10-07T08:50:02.000Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-10-07-15-12-06.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h2><ul><li>Text 构造参数</li><li>TextStyle 样式构造参数</li><li>Text.rich、RichText、TextSpan 处理复杂字符显示</li></ul><h2 id="Text"><a href="#Text" class="headerlink" title="Text"></a>Text</h2><p>Text Widget，从名字也可以看出，在 Flutter 里是用来负责显示文本信息的一个组件，功能类似于 Android 的 TextView、HTML 的一些文本标签等等，属于基础组件。</p><ul><li>基础用法</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Text(<span class="string">'hello word!'</span>);</span><br></pre></td></tr></table></figure><h3 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h3><ul><li>Text</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Text(</span><br><span class="line">    <span class="comment">//要显示的文字内容</span></span><br><span class="line">    <span class="keyword">this</span>.data,</span><br><span class="line">   &#123;</span><br><span class="line">    <span class="comment">//key类似于id</span></span><br><span class="line">    Key key,</span><br><span class="line">    <span class="comment">//文字显示样式和属性</span></span><br><span class="line">    <span class="keyword">this</span>.style,</span><br><span class="line">    <span class="keyword">this</span>.strutStyle,</span><br><span class="line">    <span class="comment">//文字对齐方式</span></span><br><span class="line">    <span class="keyword">this</span>.textAlign,</span><br><span class="line">    <span class="comment">//文字显示方向</span></span><br><span class="line">    <span class="keyword">this</span>.textDirection,</span><br><span class="line">    <span class="comment">//设置语言环境</span></span><br><span class="line">    <span class="keyword">this</span>.locale,</span><br><span class="line">    <span class="comment">//是否自动换行</span></span><br><span class="line">    <span class="keyword">this</span>.softWrap,</span><br><span class="line">    <span class="comment">//文字溢出后处理方式</span></span><br><span class="line">    <span class="keyword">this</span>.overflow,</span><br><span class="line">    <span class="comment">//字体缩放</span></span><br><span class="line">    <span class="keyword">this</span>.textScaleFactor,</span><br><span class="line">    <span class="comment">//最大显示行数</span></span><br><span class="line">    <span class="keyword">this</span>.maxLines,</span><br><span class="line">    <span class="comment">//图像的语义描述，用于向Andoid上的TalkBack和iOS上的VoiceOver提供图像描述</span></span><br><span class="line">    <span class="keyword">this</span>.semanticsLabel,</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure><ul><li>TextStyle</li></ul><p>style 属性比较常用，传入的是 TextStyle 对象，我们细看下它可以配置哪些属性样式。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> TextStyle(&#123;</span><br><span class="line">    <span class="comment">//是否继承父类组件属性</span></span><br><span class="line">    <span class="keyword">this</span>.inherit = <span class="keyword">true</span>,</span><br><span class="line">    <span class="comment">//字体颜色</span></span><br><span class="line">    <span class="keyword">this</span>.color,</span><br><span class="line">    <span class="comment">//文字大小，默认14px</span></span><br><span class="line">    <span class="keyword">this</span>.fontSize,</span><br><span class="line">    <span class="comment">//字体粗细</span></span><br><span class="line">    <span class="keyword">this</span>.fontWeight,</span><br><span class="line">    <span class="comment">//字体样式,normal或italic</span></span><br><span class="line">    <span class="keyword">this</span>.fontStyle,</span><br><span class="line">    <span class="comment">//字母间距，默认为0，负数间距缩小，正数间距增大</span></span><br><span class="line">    <span class="keyword">this</span>.letterSpacing,</span><br><span class="line">    <span class="comment">//单词间距，默认为0，负数间距缩小，正数间距增大</span></span><br><span class="line">    <span class="keyword">this</span>.wordSpacing,</span><br><span class="line">    <span class="comment">//字体基线</span></span><br><span class="line">    <span class="keyword">this</span>.textBaseline,</span><br><span class="line">    <span class="comment">//行高</span></span><br><span class="line">    <span class="keyword">this</span>.height,</span><br><span class="line">    <span class="comment">//设置区域</span></span><br><span class="line">    <span class="keyword">this</span>.locale,</span><br><span class="line">    <span class="comment">//前景色</span></span><br><span class="line">    <span class="keyword">this</span>.foreground,</span><br><span class="line">    <span class="comment">//背景色</span></span><br><span class="line">    <span class="keyword">this</span>.background,</span><br><span class="line">    <span class="comment">//阴影</span></span><br><span class="line">    <span class="keyword">this</span>.shadows,</span><br><span class="line">    <span class="comment">//文字划线，下换线等等装饰</span></span><br><span class="line">    <span class="keyword">this</span>.decoration,</span><br><span class="line">    <span class="comment">//划线颜色</span></span><br><span class="line">    <span class="keyword">this</span>.decorationColor,</span><br><span class="line">    <span class="comment">//划线样式，虚线、实线等样式</span></span><br><span class="line">    <span class="keyword">this</span>.decorationStyle,</span><br><span class="line">    <span class="comment">//描述信息</span></span><br><span class="line">    <span class="keyword">this</span>.debugLabel,</span><br><span class="line">    <span class="comment">//字体</span></span><br><span class="line">    <span class="built_in">String</span> fontFamily,</span><br><span class="line">    <span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; fontFamilyFallback,</span><br><span class="line">    <span class="built_in">String</span> package,</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure><h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><ul><li>颜色、大小、样式</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Text(<span class="string">'字体24下划线'</span>,</span><br><span class="line">     style: TextStyle(</span><br><span class="line">       color: Colors.blue, <span class="comment">// 蓝色</span></span><br><span class="line">       fontSize: <span class="number">24</span>,<span class="comment">// 24 号字体</span></span><br><span class="line">       decoration: TextDecoration.underline, <span class="comment">// 下划线</span></span><br><span class="line">     )),</span><br></pre></td></tr></table></figure><ul><li>缩放、加粗</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Text(<span class="string">'放大加粗'</span>,</span><br><span class="line">     textScaleFactor: <span class="number">1.2</span>, <span class="comment">// 放大 1.2</span></span><br><span class="line">     style: TextStyle(</span><br><span class="line">       fontWeight: FontWeight.bold,<span class="comment">// 加粗 bold</span></span><br><span class="line">       fontSize: <span class="number">24</span>,<span class="comment">// 24 号字体</span></span><br><span class="line">       color: Colors.green,<span class="comment">// 绿色</span></span><br><span class="line">       decoration: TextDecoration.none, <span class="comment">// 不要下滑线</span></span><br><span class="line">     )),</span><br></pre></td></tr></table></figure><ul><li>文字溢出</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Text(</span><br><span class="line">  <span class="string">'缩放，Each line here is progressively more opaque. The base color is material.Colors.black, and Color.withOpacity is used to create a derivative color with the desired opacity. The root TextSpan for this RichText widget is explicitly given the ambient DefaultTextStyle, since RichText does not do that automatically. The inner TextStyle objects are implicitly mixed with the parent TextSpans TextSpan.style.'</span>,</span><br><span class="line">  textScaleFactor: <span class="number">1.0</span>,</span><br><span class="line">  textAlign: TextAlign.center,</span><br><span class="line">  softWrap: <span class="keyword">true</span>,</span><br><span class="line">  maxLines: <span class="number">3</span>, <span class="comment">// 3 行</span></span><br><span class="line">  overflow: TextOverflow.ellipsis, <span class="comment">// 剪切 加省略号</span></span><br><span class="line">  style: TextStyle(</span><br><span class="line">    fontWeight: FontWeight.bold,</span><br><span class="line">    fontSize: <span class="number">18</span>,</span><br><span class="line">  )),</span><br></pre></td></tr></table></figure><h2 id="Text-rich、RichText-、TextSpan"><a href="#Text-rich、RichText-、TextSpan" class="headerlink" title="Text.rich、RichText 、TextSpan"></a>Text.rich、RichText 、TextSpan</h2><h3 id="构造函数-1"><a href="#构造函数-1" class="headerlink" title="构造函数"></a>构造函数</h3><p>可以在 Text 里加入一些 Span 标签，对某部分文字进行个性化改变样式，如加入 @ 符号，加入超链接、变色、加表情等等。Text.rich(…) 等价于 RichText(…)，用哪个都可以。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Text.rich(</span><br><span class="line">    <span class="comment">// 样式片段标签TextSpan</span></span><br><span class="line">    <span class="keyword">this</span>.textSpan,</span><br><span class="line">  &#123;</span><br><span class="line">    Key key,</span><br><span class="line">    <span class="keyword">this</span>.style,</span><br><span class="line">    <span class="keyword">this</span>.strutStyle,</span><br><span class="line">    <span class="keyword">this</span>.textAlign,</span><br><span class="line">    <span class="keyword">this</span>.textDirection,</span><br><span class="line">    <span class="keyword">this</span>.locale,</span><br><span class="line">    <span class="keyword">this</span>.softWrap,</span><br><span class="line">    <span class="keyword">this</span>.overflow,</span><br><span class="line">    <span class="keyword">this</span>.textScaleFactor,</span><br><span class="line">    <span class="keyword">this</span>.maxLines,</span><br><span class="line">    <span class="keyword">this</span>.semanticsLabel,</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> RichText(&#123;</span><br><span class="line">    Key key,</span><br><span class="line">    <span class="comment">// 样式片段标签TextSpan</span></span><br><span class="line">    <span class="meta">@required</span> <span class="keyword">this</span>.text,</span><br><span class="line">    <span class="keyword">this</span>.textAlign = TextAlign.start,</span><br><span class="line">    <span class="keyword">this</span>.textDirection,</span><br><span class="line">    <span class="keyword">this</span>.softWrap = <span class="keyword">true</span>,</span><br><span class="line">    <span class="keyword">this</span>.overflow = TextOverflow.clip,</span><br><span class="line">    <span class="keyword">this</span>.textScaleFactor = <span class="number">1.0</span>,</span><br><span class="line">    <span class="keyword">this</span>.maxLines,</span><br><span class="line">    <span class="keyword">this</span>.locale,</span><br><span class="line">    <span class="keyword">this</span>.strutStyle,</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure><p>textSpan 类型是 TextSpan ，其它参数同上</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> TextSpan(&#123;</span><br><span class="line">    <span class="comment">//样式片段</span></span><br><span class="line">    <span class="keyword">this</span>.style,</span><br><span class="line">    <span class="comment">//要显示的文字</span></span><br><span class="line">    <span class="keyword">this</span>.text,</span><br><span class="line">    <span class="comment">//样式片段TextSpan数组，可以包含多个TextSpan</span></span><br><span class="line">    <span class="keyword">this</span>.children,</span><br><span class="line">    <span class="comment">//用于手势进行识别处理,如点击跳转</span></span><br><span class="line">    <span class="keyword">this</span>.recognizer,</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure><h3 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h3><ul><li>拼接字符</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">Text.rich(TextSpan(</span><br><span class="line">  text: <span class="string">'TextSpan'</span>,</span><br><span class="line">  style: TextStyle(</span><br><span class="line">    color: Colors.red,</span><br><span class="line">    fontSize: <span class="number">24.0</span>,</span><br><span class="line">  ),</span><br><span class="line">  children: &lt;TextSpan&gt;[</span><br><span class="line">    <span class="keyword">new</span> TextSpan(</span><br><span class="line">      text: <span class="string">'aaaaa'</span>,</span><br><span class="line">      style: <span class="keyword">new</span> TextStyle(</span><br><span class="line">        color: Colors.blueGrey,</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">    <span class="keyword">new</span> TextSpan(</span><br><span class="line">      text: <span class="string">'bbbbbb'</span>,</span><br><span class="line">      style: <span class="keyword">new</span> TextStyle(</span><br><span class="line">        color: Colors.cyan,</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">  ],</span><br><span class="line">)),</span><br></pre></td></tr></table></figure><ul><li>添加交互</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Text.rich(TextSpan(</span><br><span class="line">  children: &lt;TextSpan&gt;[</span><br><span class="line">    <span class="keyword">new</span> TextSpan(</span><br><span class="line">      text: <span class="string">'Tap点击'</span>,</span><br><span class="line">      style: <span class="keyword">new</span> TextStyle(</span><br><span class="line">        color: Colors.blueGrey,</span><br><span class="line">      ),</span><br><span class="line">      recognizer: <span class="keyword">new</span> TapGestureRecognizer()</span><br><span class="line">      ..onTap = () &#123;</span><br><span class="line">        <span class="comment">//增加一个点击事件</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">'被点击了'</span>);</span><br><span class="line">      &#125;,</span><br><span class="line">    ),</span><br><span class="line">  ],</span><br><span class="line">)),</span><br></pre></td></tr></table></figure><blockquote><p>recognizer 用来识别事件</p><p>TapGestureRecognizer tap 点击手势</p></blockquote><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/ducafecat/flutter-learn/tree/master/text_widget" target="_blank" rel="noopener">https://github.com/ducafecat/flutter-learn/tree/master/text_widget</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://api.flutter.dev/flutter/widgets/Text-class.html" target="_blank" rel="noopener">Text class</a></li><li><a href="https://api.flutter.dev/flutter/painting/TextSpan-class.html" target="_blank" rel="noopener">TextSpan class</a></li><li><a href="https://api.flutter.dev/flutter/widgets/RichText-class.html" target="_blank" rel="noopener">RichText class</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="Flutter零基础入门中文教学" scheme="https://blog.ducafecat.tech/categories/Flutter%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%E4%B8%AD%E6%96%87%E6%95%99%E5%AD%A6/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 见闻 - 01 Flutter 1.9 正式发布 实现三端编译发布 android ios web</title>
    <link href="https://blog.ducafecat.tech/2019/09/16/flutter-daily/flutter-daily-01-update-sdk19/"/>
    <id>https://blog.ducafecat.tech/2019/09/16/flutter-daily/flutter-daily-01-update-sdk19/</id>
    <published>2019-09-15T16:00:00.000Z</published>
    <updated>2019-09-16T08:08:35.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h2><ul><li>在 web 平台运行 Flutter</li><li>macOS Catalina 和 iOS 13 支持</li><li>全新的 Material widget</li><li>全球语言支持</li><li>Dart 2.5 发布</li><li>工具链优化</li></ul><h2 id="在-web-平台运行-Flutter"><a href="#在-web-平台运行-Flutter" class="headerlink" title="在 web 平台运行 Flutter"></a>在 web 平台运行 Flutter</h2><ul><li>更新 SDK</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; flutter channel master</span><br><span class="line">&gt; flutter upgrade</span><br></pre></td></tr></table></figure><ul><li>启用 web 支持</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; flutter config --<span class="built_in">enable</span>-web</span><br><span class="line"></span><br><span class="line">&gt; flutter devices</span><br></pre></td></tr></table></figure><ul><li>更新现有项目</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; flutter create .</span><br></pre></td></tr></table></figure><ul><li>创建新项目</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; flutter create myapp</span><br></pre></td></tr></table></figure><ul><li>运行 web</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; flutter run -d chrome</span><br></pre></td></tr></table></figure><ul><li>编译 web</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; flutter build web</span><br></pre></td></tr></table></figure><h2 id="Flutter-Widget-Livebook"><a href="#Flutter-Widget-Livebook" class="headerlink" title="Flutter Widget Livebook"></a>Flutter Widget Livebook</h2><p>一个在网页上展示 widget 运行效果的网站，它使用 Flutter 开发，并直接运行在网页上。</p><p><a href="https://flutter-widget-livebook.blankapp.org/basics/introduction/" target="_blank" rel="noopener">https://flutter-widget-livebook.blankapp.org/basics/introduction/</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-09-16-15-06-02.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="Panache"><a href="#Panache" class="headerlink" title="Panache"></a>Panache</h2><p>则是一款为 Flutter 创建主题的工具，您可以下载创建好的主题，然后将其直接添加到代码中。</p><p><a href="https://rxlabz.github.io/panache_web/#/" target="_blank" rel="noopener">https://rxlabz.github.io/panache_web/#/</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-09-16-15-07-30.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-09-16-15-08-15.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-09-16-15-09-15.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="macOS-Catalina-和-iOS-13-支持"><a href="#macOS-Catalina-和-iOS-13-支持" class="headerlink" title="macOS Catalina 和 iOS 13 支持"></a>macOS Catalina 和 iOS 13 支持</h2><ul><li>iOS 13 的拖拽式工具栏</li></ul><p><a href="https://github.com/flutter/flutter/pull/35829" target="_blank" rel="noopener">https://github.com/flutter/flutter/pull/35829</a></p><ul><li>触感反馈</li></ul><p><a href="https://github.com/flutter/flutter/pull/37724" target="_blank" rel="noopener">https://github.com/flutter/flutter/pull/37724</a></p><ul><li>开发者已经提交了 pull request</li></ul><p><a href="https://github.com/flutter/flutter/issues/35541" target="_blank" rel="noopener">https://github.com/flutter/flutter/issues/35541</a></p><ul><li>启用 Bitcode 实验性支持</li></ul><p><a href="https://github.com/flutter/flutter/wiki/Creating-an-iOS-Bitcode-enabled-app-(experimental)" target="_blank" rel="noopener">https://github.com/flutter/flutter/wiki/Creating-an-iOS-Bitcode-enabled-app-(experimental)</a></p><h2 id="全新的-Material-widget"><a href="#全新的-Material-widget" class="headerlink" title="全新的 Material widget"></a>全新的 Material widget</h2><ul><li>ToggleButtons 示例</li></ul><p>它能为您的应用按钮实现更加多元化的设计——不论是单选还是多选，选择至少一个或是零个，尖角还是圆角、粗边或细边，图标或文本——ToggleButtons widget 全都可以满足。</p><p><a href="https://github.com/csells/flutter_toggle_buttons" target="_blank" rel="noopener">https://github.com/csells/flutter_toggle_buttons</a></p><ul><li>ColorFiltered 示例</li></ul><p>允许您更改子 widget 树的颜色，用来灵活的调整配色服务。</p><p><a href="https://github.com/csells/flutter_color_filter" target="_blank" rel="noopener">https://github.com/csells/flutter_color_filter</a></p><h2 id="全球语言支持"><a href="#全球语言支持" class="headerlink" title="全球语言支持"></a>全球语言支持</h2><p>还新增了南非语 (Afrikaans)、祖鲁语 (Zulu) 等 24 种语言的支持。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-09-16-14-48-40.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="Dart-2-5-发布"><a href="#Dart-2-5-发布" class="headerlink" title="Dart 2.5 发布"></a>Dart 2.5 发布</h2><ul><li>ML 代码补全</li></ul><p><a href="https://github.com/dart-lang/sdk/wiki/Previewing-Dart-code-completions-powered-by-machine-learning" target="_blank" rel="noopener">https://github.com/dart-lang/sdk/wiki/Previewing-Dart-code-completions-powered-by-machine-learning</a></p><ul><li><p>用于 Dart-C 互操作的 ffi 外部函数接口</p></li><li><p>改进常量表达式</p></li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="built_in">Object</span> i = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">const</span> list = [i <span class="keyword">as</span> <span class="built_in">int</span>];</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">set</span> = &#123;<span class="keyword">if</span> (list <span class="keyword">is</span> <span class="built_in">List</span>&lt;<span class="built_in">int</span>&gt;) ...list&#125;;</span><br><span class="line"><span class="keyword">const</span> map = &#123;<span class="keyword">if</span> (i <span class="keyword">is</span> <span class="built_in">int</span>) i: <span class="string">"int"</span>&#125;;</span><br></pre></td></tr></table></figure><h2 id="工具链优化"><a href="#工具链优化" class="headerlink" title="工具链优化"></a>工具链优化</h2><ul><li><p>从 Flutter 1.9 开始，iOS 新项目默认使用 Swift 语言，而非 Objective-C；Android 新项目则默认使用 Kotlin，而非 Java。</p></li><li><p>Swift 编译瘦身</p></li><li><p>改善错误信息提示</p></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-09-16-15-04-00.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p><a href="https://mp.weixin.qq.com/s?__biz=MzAwODY4OTk2Mg==&amp;mid=2652050546&amp;idx=1&amp;sn=2c81e067ac34da40f89558f426e97af6&amp;chksm=808cb437b7fb3d2127431c7858beb3a03a29186c1c6a78aa0a2e97cd895e756b7ee3367ec935&amp;scene=21#wechat_redirect" target="_blank" rel="noopener">https://mp.weixin.qq.com/s?__biz=MzAwODY4OTk2Mg==&amp;mid=2652050546&amp;idx=1&amp;sn=2c81e067ac34da40f89558f426e97af6&amp;chksm=808cb437b7fb3d2127431c7858beb3a03a29186c1c6a78aa0a2e97cd895e756b7ee3367ec935&amp;scene=21#wechat_redirect</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://flutter.dev/docs/get-started/web" target="_blank" rel="noopener">Building a web application with Flutter</a></li><li><a href="https://github.com/flutter/flutter_web" target="_blank" rel="noopener">flutter_web</a></li><li><a href="https://mp.weixin.qq.com/s/uajbjbVYmcBHtq3Jv8tgzg" target="_blank" rel="noopener">Flutter 1.9 正式发布！| 全平台创新开发体验</a></li><li><a href="https://v.qq.com/x/page/t09240vp8cy.html" target="_blank" rel="noopener">腾讯视频链接</a></li><li><a href="https://flutter-widget-livebook.blankapp.org/basics/introduction/" target="_blank" rel="noopener">Flutter Widget Livebook</a></li><li><a href="https://mp.weixin.qq.com/s?__biz=MzAwODY4OTk2Mg==&amp;mid=2652050546&amp;idx=1&amp;sn=2c81e067ac34da40f89558f426e97af6&amp;chksm=808cb437b7fb3d2127431c7858beb3a03a29186c1c6a78aa0a2e97cd895e756b7ee3367ec935&amp;scene=21#wechat_redirect" target="_blank" rel="noopener">更精准更简洁: Flutter 改进错误信息提示</a></li><li><a href="https://rxlabz.github.io/panache_web/#/" target="_blank" rel="noopener">Panache</a></li><li><a href="https://github.com/flutter/flutter/pull/35829" target="_blank" rel="noopener">iOS 13 的拖拽式工具栏</a></li><li><a href="https://github.com/flutter/flutter/pull/37724" target="_blank" rel="noopener">触感反馈</a></li><li><a href="https://github.com/flutter/flutter/issues/35541" target="_blank" rel="noopener">开发者已经提交了 pull request</a></li><li><a href="https://github.com/flutter/flutter/wiki/Creating-an-iOS-Bitcode-enabled-app-(experimental" target="_blank" rel="noopener">启用 Bitcode 实验性支持</a>&gt;)</li><li><a href="https://github.com/csells/flutter_toggle_buttons" target="_blank" rel="noopener">ToggleButtons</a></li><li><a href="https://github.com/csells/flutter_color_filter" target="_blank" rel="noopener">ColorFiltered</a></li><li><a href="https://github.com/dart-lang/sdk/wiki/Previewing-Dart-code-completions-powered-by-machine-learning" target="_blank" rel="noopener">ML 代码补全</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;在 web 平台运行 Flutter&lt;/li&gt;
&lt;li&gt;macOS Catalina 和 iOS 13 支持&lt;/
      
    
    </summary>
    
      <category term="Flutter见闻" scheme="https://blog.ducafecat.tech/categories/Flutter%E8%A7%81%E9%97%BB/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 零基础入门中文教学 - 10 stateless stateful 有状态、无状态组件</title>
    <link href="https://blog.ducafecat.tech/2019/08/18/flutter/flutter-10-stateless-stateful-widget/"/>
    <id>https://blog.ducafecat.tech/2019/08/18/flutter/flutter-10-stateless-stateful-widget/</id>
    <published>2019-08-17T16:00:00.000Z</published>
    <updated>2019-09-01T03:34:04.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h2><ul><li>stateless、stateless 差别</li><li>动手封装两个 widget 来体验</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-09-01-11-25-01.png" alt="点击切换" title="">                </div>                <div class="image-caption">点击切换</div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-09-01-11-25-15.png" alt="点击切换" title="">                </div>                <div class="image-caption">点击切换</div>            </figure><h2 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h2><p>Awesome Flutter Snippets</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-09-01-11-27-15.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="第一步：编写-statefull-主程序"><a href="#第一步：编写-statefull-主程序" class="headerlink" title="第一步：编写 statefull 主程序"></a>第一步：编写 statefull 主程序</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"></span><br><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  runApp(MyApp());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  MyApp(&#123;Key key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  _MyAppState createState() =&gt; _MyAppState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_MyAppState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">MyApp</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      home: Scaffold(</span><br><span class="line">        body: Text(<span class="string">'data'</span>),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="第二步：编写-stateless-图片显示"><a href="#第二步：编写-stateless-图片显示" class="headerlink" title="第二步：编写 stateless 图片显示"></a>第二步：编写 stateless 图片显示</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyPicView</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> picName;</span><br><span class="line">  MyPicView(&#123;Key key, <span class="keyword">this</span>.picName&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  _MyPicViewState createState() =&gt; _MyPicViewState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_MyPicViewState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">MyPicView</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Container(</span><br><span class="line">      child: Image.asset(<span class="string">'assets/<span class="subst">$&#123;widget.picName&#125;</span>'</span>),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="第三步：编写切换图片路径状态"><a href="#第三步：编写切换图片路径状态" class="headerlink" title="第三步：编写切换图片路径状态"></a>第三步：编写切换图片路径状态</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'my_pic_view.dart'</span>;</span><br><span class="line"></span><br><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  runApp(MyApp());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  MyApp(&#123;Key key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  _MyAppState createState() =&gt; _MyAppState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_MyAppState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">MyApp</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">String</span> fileName = <span class="string">'p1.jpg'</span>;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      home: Scaffold(</span><br><span class="line">          body: Column(</span><br><span class="line">        children: &lt;Widget&gt;[</span><br><span class="line">          MyPicView(</span><br><span class="line">            picName: fileName,</span><br><span class="line">          ),</span><br><span class="line">          RaisedButton(</span><br><span class="line">            onPressed: () &#123;</span><br><span class="line">              <span class="built_in">String</span> tmpFileName = <span class="string">'p1.jpg'</span>;</span><br><span class="line">              <span class="keyword">if</span> (fileName == <span class="string">'p1.jpg'</span>) &#123;</span><br><span class="line">                tmpFileName = <span class="string">'p2.jpg'</span>;</span><br><span class="line">              &#125;</span><br><span class="line">              setState(() &#123;</span><br><span class="line">                fileName = tmpFileName;</span><br><span class="line">              &#125;);</span><br><span class="line">            &#125;,</span><br><span class="line">            child: Text(<span class="string">'切换图片'</span>),</span><br><span class="line">          )</span><br><span class="line">        ],</span><br><span class="line">      )),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/ducafecat/flutter-learn/tree/master/state_less_ful_app" target="_blank" rel="noopener">https://github.com/ducafecat/flutter-learn/tree/master/state_less_ful_app</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://marketplace.visualstudio.com/items?itemName=Nash.awesome-flutter-snippets" target="_blank" rel="noopener">插件 Awesome Flutter Snippets</a></li><li><a href="https://medium.com/@paridhi.softinator/flutter-stateless-and-stateful-widget-4f1ef1fb7177" target="_blank" rel="noopener">Flutter Stateless and Stateful Widget</a></li><li><a href="https://medium.com/flutter-community/flutter-stateful-vs-stateless-db325309deae" target="_blank" rel="noopener">Flutter: Stateful vs Stateless Widget</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;stateless、stateless 差别&lt;/li&gt;
&lt;li&gt;动手封装两个 widget 来体验&lt;/li&gt;
&lt;
      
    
    </summary>
    
      <category term="Flutter零基础入门中文教学" scheme="https://blog.ducafecat.tech/categories/Flutter%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%E4%B8%AD%E6%96%87%E6%95%99%E5%AD%A6/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 零基础入门中文教学 - 09 一切都是 widget</title>
    <link href="https://blog.ducafecat.tech/2019/08/17/flutter/flutter-09-widgets/"/>
    <id>https://blog.ducafecat.tech/2019/08/17/flutter/flutter-09-widgets/</id>
    <published>2019-08-16T16:00:00.000Z</published>
    <updated>2019-10-09T23:59:20.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h2><ul><li>整体架构设计</li><li>层次分类</li></ul><h2 id="整体架构设计"><a href="#整体架构设计" class="headerlink" title="整体架构设计"></a>整体架构设计</h2><h3 id="架构图"><a href="#架构图" class="headerlink" title="架构图"></a>架构图</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-08-26-15-13-31.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="源码目录"><a href="#源码目录" class="headerlink" title="源码目录"></a>源码目录</h3><p>…/sdk/flutter/packages/flutter/lib</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-08-26-15-30-25.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="目录功能"><a href="#目录功能" class="headerlink" title="目录功能"></a>目录功能</h3><table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>Foundation</td><td>基础部分</td></tr><tr><td>Animation</td><td>动画</td></tr><tr><td>Painting</td><td>边框绘制、颜色、裁剪图像处理、画笔、插值器等跟绘制、图像、装饰相关的类</td></tr><tr><td>Gestures</td><td>事件类、长按、触摸、放大等等</td></tr><tr><td>Rendering</td><td>渲染 Widget 的基础库</td></tr><tr><td>Widget</td><td>依赖 Rendering 层进行构建，Widget 是 Flutter 的核心</td></tr><tr><td>Material</td><td>Android 平台的风格</td></tr><tr><td>Cupertino</td><td>iOS 平台风格的扁平化</td></tr></tbody></table><h2 id="widget-分类"><a href="#widget-分类" class="headerlink" title="widget 分类"></a>widget 分类</h2><h3 id="主要分为-StatelessWidget-和-StatefulWidget"><a href="#主要分为-StatelessWidget-和-StatefulWidget" class="headerlink" title="主要分为 StatelessWidget 和 StatefulWidget"></a>主要分为 StatelessWidget 和 StatefulWidget</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="Ft06Pki12EkIUT-IrLZeUXPKeUZt.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="官方分类"><a href="#官方分类" class="headerlink" title="官方分类"></a>官方分类</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="image-20190826154543964.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li><p>基础组件 Widget（Basics）：</p><p>Container、Row、Column、Image、Text、Icon、RaisedButton、Scaffold、Appbar、FlutterLogo、Placeholder</p></li><li><p>Material Components：</p></li><li><p>App 结构和导航类</p><p>Scaffold、Appbar、BottomNavigationBar、TabBar、TabBarView、MaterialApp、WidgetsApp、Drawer、SliverAppBar</p></li><li><p>按钮类</p><p>RaisedButton、FloatingActionButton、FlatButton、IconButton、DropdownButton、PopupMenuButton、ButtonBar</p></li><li><p>输入和选择类</p><p>TextField、Checkbox、Raido、Switch、Slider、Date&amp;Time Pickers</p></li><li><p>对话框和控制面板类</p><p>SimpleDialog、AlertDialog、BottomSheet、ExpansionPanel、SnackBar）；</p><p>信息显示类（Image、Icon、Chip、Tooltip、DataTable、Card、LinearProgressIndicator、CircularProgressIndicator、GridView</p></li><li><p>布局类</p><p>ListTile、Stepper、Divider</p></li><li><p>Cupertino （iOS-style widgets）：</p><p>CupertinoActionSheet、CupertinoActivityIndicator、CupertinoAlertDialog、CupertinoButton、CupertinoDatePicker、CupertinoDialog、CupertinoDialogAction、CupertinoFullscreenDialogTransition、CupertinoPageScaffold、CupertinoPageTransition、CupertinoPicker、CupertinoPopupSurface、CupertinoSegmentedControl、CupertinoSlider、CupertinoSwitch、CupertinoNavigationBar、CupertinoTabBar、CupertinoTabScaffold、CupertinoTabView、CupertinoTextField、CupertinoTimerPicker</p></li><li><p>Layout：</p></li><li><p>单个子元素的布局 Widget</p><p>Container、Padding、Center、Align、FittedBox、AspectRatio、ConstrainedBox、Baseline、FractionallySizedBox、IntrinsicHeight、IntrinsicWidth、LimitedBox、Offstage、OverflowBox、SizedBox、SizedOverflowBox、Transform、CustomSingleChildLayout</p></li><li><p>多个子元素的布局 Widget</p><p>Row、Column、Stack、IndexedStack、GridView、Flow、Table、Wrap、ListBody、CustomMultiChildLayout、LayoutBuilder、ListView、Expanded</p></li><li><p>Text 文本显示类：</p><p>Text、RichText、DefaultTextStyle</p></li><li><p>Assets、图片、Icons 类：</p><p>Image、Icon、RawImage、AssetBundle</p></li><li><p>Input 输入类：</p><p>Form、FormField、RawKeyboardListener</p></li><li><p>动画和 Motion 类：</p><p>AnimatedContainer、AnimatedCrossFade、Hero、AnimatedBuilder、DecoratedBoxTransition、FadeTransition、PositionedTransition、RotationTransition、ScaleTransition、SizeTransition、SlideTransition、AnimatedDefaultTextStyle、AnimatedListState、AnimatedModalBarrier、AnimatedOpacity、AnimatedPhysicalModel、AnimatedPositioned、AnimatedSize、AnimatedWidget、AnimatedWidgetBaseState</p></li><li><p>交互模型类：</p></li><li><p>触摸交互</p><p>Draggable、LongPressDraggable、GestureDetector、DragTarget、Dismissible、IgnorePointer、AbsorbPointer、Scrollable</p></li><li><p>路由导航</p><p>Hero、Navigator</p></li><li><p>样式类：</p><p>Padding、Theme、MediaQuery</p></li><li><p>绘制和效果类：</p><p>Transform、Opacity、DecoratedBox、FractionalTranslation、RotatedBox、ClipOval、ClipPath、ClipRect、CustomPaint、BackdropFilter</p></li><li><p>Async 异步模型类：</p><p>FutureBuilder、StreamBuilder</p></li><li><p>滚动类：</p><p>GridView、ListView、NestedScrollView、SingleChildScrollView、Scrollable、Scrollbar、CustomScrollView、NotificationListener、ScrollConfiguration、RefreshIndicator、PageView</p></li><li><p>辅助功能类：</p><p>Semantics、MergeSemantics、ExcludeSemantics</p></li></ul><h3 id="widget-地图"><a href="#widget-地图" class="headerlink" title="widget 地图"></a>widget 地图</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="FlOkMR8qN2K07EG0J69eMEw-IroG.png" alt="img" title="">                </div>                <div class="image-caption">img</div>            </figure><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://flutter.dev/docs/development/ui/widgets" target="_blank" rel="noopener">Widget catalog</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;整体架构设计&lt;/li&gt;
&lt;li&gt;层次分类&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;整体架构设计&quot;&gt;&lt;a href=
      
    
    </summary>
    
      <category term="Flutter零基础入门中文教学" scheme="https://blog.ducafecat.tech/categories/Flutter%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%E4%B8%AD%E6%96%87%E6%95%99%E5%AD%A6/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 零基础入门中文教学 - 08 开发规范</title>
    <link href="https://blog.ducafecat.tech/2019/08/16/flutter/flutter-08-standard/"/>
    <id>https://blog.ducafecat.tech/2019/08/16/flutter/flutter-08-standard/</id>
    <published>2019-08-15T16:00:00.000Z</published>
    <updated>2019-08-26T07:11:13.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h2><ul><li>Dart 规范</li><li>Flutter 阿里规范</li></ul><h2 id="VSCode-格式化"><a href="#VSCode-格式化" class="headerlink" title="VSCode 格式化"></a>VSCode 格式化</h2><ul><li>右键菜单</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-08-26-15-10-18.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>当 Save 时自动格式化</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-08-26-15-08-42.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="规范精要"><a href="#规范精要" class="headerlink" title="规范精要"></a>规范精要</h2><h3 id="使用小写加下划线来命名库和源文件"><a href="#使用小写加下划线来命名库和源文件" class="headerlink" title="使用小写加下划线来命名库和源文件"></a>使用小写加下划线来命名库和源文件</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span> peg_parser.source_scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">'file_system.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'slider_menu.dart'</span>;</span><br></pre></td></tr></table></figure><h3 id="优先使用小驼峰法作为常量命名"><a href="#优先使用小驼峰法作为常量命名" class="headerlink" title="优先使用小驼峰法作为常量命名"></a>优先使用小驼峰法作为常量命名</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> pi = <span class="number">3.14</span>;</span><br><span class="line"><span class="keyword">const</span> defaultTimeout = <span class="number">1000</span>;</span><br><span class="line"><span class="keyword">final</span> urlScheme = <span class="built_in">RegExp</span>(<span class="string">'^([a-z]+):'</span>);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dice</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">final</span> numberGenerator = Random();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="所有流控制结构，请使用大括号"><a href="#所有流控制结构，请使用大括号" class="headerlink" title="所有流控制结构，请使用大括号"></a>所有流控制结构，请使用大括号</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (isWeekDay) &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'Bike to work!'</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'Go dancing or read a book!'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Doc-注释"><a href="#Doc-注释" class="headerlink" title="Doc 注释"></a>Doc 注释</h3><p>使用///文档注释来记录成员和类型。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="markdown">/// The number of characters in this chunk when unsplit.</span></span></span><br><span class="line"><span class="built_in">int</span> <span class="keyword">get</span> length =&gt; ...</span><br></pre></td></tr></table></figure><h3 id="导入-lib-下文件库，统一指定包名，避免过多的"><a href="#导入-lib-下文件库，统一指定包名，避免过多的" class="headerlink" title="导入 lib 下文件库，统一指定包名，避免过多的"></a>导入 lib 下文件库，统一指定包名，避免过多的<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```dart</span><br><span class="line">package:flutter_go/</span><br></pre></td></tr></table></figure></h3><h3 id="使用相邻字符串连接字符串文字"><a href="#使用相邻字符串连接字符串文字" class="headerlink" title="使用相邻字符串连接字符串文字"></a>使用相邻字符串连接字符串文字</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">raiseAlarm(</span><br><span class="line">    <span class="string">'ERROR: Parts of the spaceship are on fire. Other '</span></span><br><span class="line">    <span class="string">'parts are overrun by martians. Unclear which are which.'</span>);</span><br></pre></td></tr></table></figure><h3 id="优先使用模板字符串"><a href="#优先使用模板字符串" class="headerlink" title="优先使用模板字符串"></a>优先使用模板字符串</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'Hello, $name! You are <span class="subst">$&#123;year - birth&#125;</span> years old.'</span>;</span><br></pre></td></tr></table></figure><h3 id="在不需要的时候，避免使用花括号"><a href="#在不需要的时候，避免使用花括号" class="headerlink" title="在不需要的时候，避免使用花括号"></a>在不需要的时候，避免使用花括号</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'Hi, $name!'</span></span><br><span class="line"><span class="string">"Wear your wildest $decade's outfit."</span></span><br></pre></td></tr></table></figure><h3 id="不要使用-length-查看集合是否为空"><a href="#不要使用-length-查看集合是否为空" class="headerlink" title="不要使用.length 查看集合是否为空"></a>不要使用.length 查看集合是否为空</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (lunchBox.isEmpty) <span class="keyword">return</span> <span class="string">'so hungry...'</span>;</span><br><span class="line"><span class="keyword">if</span> (words.isNotEmpty) <span class="keyword">return</span> words.join(<span class="string">' '</span>);</span><br></pre></td></tr></table></figure><h3 id="遍历一个序列"><a href="#遍历一个序列" class="headerlink" title="遍历一个序列"></a>遍历一个序列</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> person <span class="keyword">in</span> people) &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="不要显式地将变量初始化为空"><a href="#不要显式地将变量初始化为空" class="headerlink" title="不要显式地将变量初始化为空"></a>不要显式地将变量初始化为空</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> _nextId;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LazyId</span> </span>&#123;</span><br><span class="line">  <span class="built_in">int</span> _id;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">int</span> <span class="keyword">get</span> id &#123;</span><br><span class="line">    <span class="keyword">if</span> (_nextId == <span class="keyword">null</span>) _nextId = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (_id == <span class="keyword">null</span>) _id = _nextId++;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> _id;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="在不需要的时候不要用-this"><a href="#在不需要的时候不要用-this" class="headerlink" title="在不需要的时候不要用 this"></a>在不需要的时候不要用 this</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Box</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> value;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> clear() &#123;</span><br><span class="line">    update(<span class="keyword">null</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> update(value) &#123;</span><br><span class="line">    <span class="keyword">this</span>.value = value;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="尽可能使用初始化的形式"><a href="#尽可能使用初始化的形式" class="headerlink" title="尽可能使用初始化的形式"></a>尽可能使用初始化的形式</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">  <span class="built_in">num</span> x, y;</span><br><span class="line">  Point(<span class="keyword">this</span>.x, <span class="keyword">this</span>.y);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="不要使用-new"><a href="#不要使用-new" class="headerlink" title="不要使用 new"></a>不要使用 new</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">  <span class="keyword">return</span> Row(</span><br><span class="line">    children: [</span><br><span class="line">      RaisedButton(</span><br><span class="line">        child: Text(<span class="string">'Increment'</span>),</span><br><span class="line">      ),</span><br><span class="line">      Text(<span class="string">'Click!'</span>),</span><br><span class="line">    ],</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="优先使用-async-await-代替原始的-futures"><a href="#优先使用-async-await-代替原始的-futures" class="headerlink" title="优先使用 async/await 代替原始的 futures"></a>优先使用 async/await 代替原始的 futures</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Future&lt;<span class="built_in">int</span>&gt; countActivePlayers(<span class="built_in">String</span> teamName) <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> team = <span class="keyword">await</span> downloadTeam(teamName);</span><br><span class="line">    <span class="keyword">if</span> (team == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> players = <span class="keyword">await</span> team.roster;</span><br><span class="line">    <span class="keyword">return</span> players.where((player) =&gt; player.isActive).length;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    log.error(e);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="当异步没有任何用处时，不要使用它"><a href="#当异步没有任何用处时，不要使用它" class="headerlink" title="当异步没有任何用处时，不要使用它"></a>当异步没有任何用处时，不要使用它</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Future afterTwoThings(Future first, Future second) &#123;</span><br><span class="line">  <span class="keyword">return</span> Future.wait([first, second]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="http://dart.goodev.org/guides/language/effective-dart" target="_blank" rel="noopener">Dart 官方规范</a></li><li><a href="https://github.com/alibaba/flutter-go/blob/develop/Flutter_Go%20%E4%BB%A3%E7%A0%81%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83.md" target="_blank" rel="noopener">阿里 Flutter Go 代码开发规范 0.1.0 版</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;Dart 规范&lt;/li&gt;
&lt;li&gt;Flutter 阿里规范&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;VSCode-
      
    
    </summary>
    
      <category term="Flutter零基础入门中文教学" scheme="https://blog.ducafecat.tech/categories/Flutter%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%E4%B8%AD%E6%96%87%E6%95%99%E5%AD%A6/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 零基础入门中文教学 - 07 我们的第一个程序 hello word</title>
    <link href="https://blog.ducafecat.tech/2019/08/12/flutter/flutter-07-first-app-helloword/"/>
    <id>https://blog.ducafecat.tech/2019/08/12/flutter/flutter-07-first-app-helloword/</id>
    <published>2019-08-11T16:00:00.000Z</published>
    <updated>2019-09-01T02:58:26.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h2><ul><li>程序基础结构</li><li>pubspec.yaml 配置</li><li>布局，样式使用</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-09-01-10-58-22.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="目录文件结构"><a href="#目录文件结构" class="headerlink" title="目录文件结构"></a>目录文件结构</h2><table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>lib</td><td>Flutter 代码</td></tr><tr><td>android</td><td>Android 项目</td></tr><tr><td>ios</td><td>IOS 项目</td></tr><tr><td>test</td><td>测试目录</td></tr><tr><td>.idea</td><td>IDEA 编辑器配置</td></tr><tr><td>pubspec.yaml</td><td>Flutter 配置文件</td></tr><tr><td>pubspec.lock</td><td>包版本锁定</td></tr><tr><td>build</td><td>编译目录</td></tr></tbody></table><h2 id="一、编写最基础-helloword"><a href="#一、编写最基础-helloword" class="headerlink" title="一、编写最基础 helloword"></a>一、编写最基础 helloword</h2><ul><li>步骤</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. 第一步 runApp(...)</span><br><span class="line">2. 第二步 MaterialApp(...)</span><br><span class="line">3. 第三步 指定 widget Text(...)</span><br></pre></td></tr></table></figure><ul><li>代码</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"></span><br><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="comment">// 第一步 runApp(...)</span></span><br><span class="line">  runApp(</span><br><span class="line">      <span class="comment">// 第二步 MaterialApp</span></span><br><span class="line">      MaterialApp(</span><br><span class="line">    <span class="comment">// 第三步 指定 widget</span></span><br><span class="line">    home: Text(<span class="string">'hello word!'</span>),</span><br><span class="line">  ));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="二、采用界面脚手架-标题-侧栏-正文"><a href="#二、采用界面脚手架-标题-侧栏-正文" class="headerlink" title="二、采用界面脚手架 标题 侧栏 正文"></a>二、采用界面脚手架 标题 侧栏 正文</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="comment">// 第一步 runApp(...)</span></span><br><span class="line">  runApp(</span><br><span class="line">      <span class="comment">// 第二步 MaterialApp</span></span><br><span class="line">      MaterialApp(</span><br><span class="line">    <span class="comment">// 第三步 指定 widget</span></span><br><span class="line">    home:</span><br><span class="line">        <span class="comment">// 第四步 页面脚手架</span></span><br><span class="line">        Scaffold(</span><br><span class="line">      <span class="comment">// 第五步 程序标题</span></span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">'我们第一个程序'</span>),</span><br><span class="line">      ),</span><br><span class="line">      <span class="comment">// 第六步 侧栏</span></span><br><span class="line">      drawer: Drawer(</span><br><span class="line">        child: Text(<span class="string">'侧栏'</span>),</span><br><span class="line">      ),</span><br><span class="line">      <span class="comment">// 正文</span></span><br><span class="line">      body: Text(<span class="string">'hello word!'</span>),</span><br><span class="line">    ),</span><br><span class="line">  ));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="三、布局-样式-图片"><a href="#三、布局-样式-图片" class="headerlink" title="三、布局 样式 图片"></a>三、布局 样式 图片</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="comment">// 第一步 runApp(...)</span></span><br><span class="line">  runApp(</span><br><span class="line">      <span class="comment">// 第二步 MaterialApp</span></span><br><span class="line">      MaterialApp(</span><br><span class="line">    <span class="comment">// 第三步 指定 widget</span></span><br><span class="line">    home:</span><br><span class="line">        <span class="comment">// 第四步 页面脚手架</span></span><br><span class="line">        Scaffold(</span><br><span class="line">      <span class="comment">// 第五步 程序标题</span></span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">'我们第一个程序'</span>),</span><br><span class="line">      ),</span><br><span class="line">      <span class="comment">// 第六步 侧栏</span></span><br><span class="line">      drawer: Drawer(</span><br><span class="line">        child: Text(<span class="string">'侧栏'</span>),</span><br><span class="line">      ),</span><br><span class="line">      <span class="comment">// 正文</span></span><br><span class="line">      body:</span><br><span class="line">          <span class="comment">// 居中</span></span><br><span class="line">          Center(</span><br><span class="line">        child: Column(</span><br><span class="line">          children: &lt;Widget&gt;[</span><br><span class="line">            <span class="comment">// 载入图片</span></span><br><span class="line">            Image.asset(<span class="string">'assets/p1.jpg'</span>),</span><br><span class="line">            <span class="comment">// 文字</span></span><br><span class="line">            Text(</span><br><span class="line">              <span class="string">'雷神'</span>,</span><br><span class="line">              <span class="comment">// 样式</span></span><br><span class="line">              style: TextStyle(fontSize: <span class="number">28</span>, color: Colors.red),</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">  ));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/ducafecat/flutter-learn/tree/master/helloword" target="_blank" rel="noopener">https://github.com/ducafecat/flutter-learn/tree/master/helloword</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://flutter.dev/docs/get-started/codelab" target="_blank" rel="noopener">Write your first Flutter app, part 1</a></li><li><a href="https://flutter.dev/docs/development/ui/widgets" target="_blank" rel="noopener">widgets</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;程序基础结构&lt;/li&gt;
&lt;li&gt;pubspec.yaml 配置&lt;/li&gt;
&lt;li&gt;布局，样式使用&lt;/li&gt;
&lt;/
      
    
    </summary>
    
      <category term="Flutter零基础入门中文教学" scheme="https://blog.ducafecat.tech/categories/Flutter%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%E4%B8%AD%E6%96%87%E6%95%99%E5%AD%A6/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 零基础入门中文教学 - 06 Windows10 下配置 Flutter 开发环境</title>
    <link href="https://blog.ducafecat.tech/2019/08/11/flutter/flutter-06-setup-windows10/"/>
    <id>https://blog.ducafecat.tech/2019/08/11/flutter/flutter-06-setup-windows10/</id>
    <published>2019-08-10T16:00:00.000Z</published>
    <updated>2019-08-26T02:07:12.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h2><ul><li>安装 JDK 1.8</li><li>安装 Flutter SDK</li><li>安装 Android Studio</li><li>安装 VSCode</li><li>配置 VSCode 插件</li><li>配置 Android 插件</li><li>配置 Android 模拟器</li></ul><h2 id="环境介绍"><a href="#环境介绍" class="headerlink" title="环境介绍"></a>环境介绍</h2><ul><li>window10 专业版</li><li>jdk1.8</li><li>flutter 1.7.8</li><li>vscode 1.37.1</li><li>android studio 3.5</li></ul><h2 id="1-安装-JDK-1-8"><a href="#1-安装-JDK-1-8" class="headerlink" title="1. 安装 JDK 1.8"></a>1. 安装 JDK 1.8</h2><ul><li>下载地址</li></ul><p><a href="https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_blank" rel="noopener">https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html</a></p><ul><li>选取 windows x64</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-08-26-09-31-32.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="2-安装-Flutter-SDK"><a href="#2-安装-Flutter-SDK" class="headerlink" title="2. 安装 Flutter SDK"></a>2. 安装 Flutter SDK</h2><ul><li>下载地址</li></ul><p><a href="https://flutter.dev/docs/development/tools/sdk/releases?tab=windows#windows" target="_blank" rel="noopener">https://flutter.dev/docs/development/tools/sdk/releases?tab=windows#windows</a></p><ul><li>解压</li></ul><p>我放在了 c:\sdk\flutter</p><ul><li>配置环境变量</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Path</span></span><br><span class="line">C:\sdk\flutter\bin</span><br><span class="line"></span><br><span class="line"><span class="comment"># FLUTTER_STORAGE_BASE_URL</span></span><br><span class="line">https://storage.flutter-io.cn</span><br><span class="line"></span><br><span class="line"><span class="comment"># PUB_HOSTED_URL</span></span><br><span class="line">https://pub.flutter-io.cn</span><br></pre></td></tr></table></figure><ul><li>执行检查</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Flutter doctor</span><br></pre></td></tr></table></figure><h2 id="3-安装-Android-Studio"><a href="#3-安装-Android-Studio" class="headerlink" title="3. 安装 Android Studio"></a>3. 安装 Android Studio</h2><ul><li>下载</li></ul><p><a href="https://developer.android.com/studio/" target="_blank" rel="noopener">https://developer.android.com/studio/</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-08-26-10-03-40.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>配置 SDK 包</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-08-26-09-50-23.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>配置 SDK Tools</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-08-26-09-51-19.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>配置环境变量</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Path</span></span><br><span class="line">C:\Users\ducaf\AppData\Local\Android\Sdk\tools</span><br><span class="line">C:\Users\ducaf\AppData\Local\Android\Sdk\platform-tools</span><br><span class="line"></span><br><span class="line"><span class="comment"># ANDROID_HOME</span></span><br><span class="line">C:\Users\ducaf\AppData\Local\Android\Sdk</span><br></pre></td></tr></table></figure><ul><li>安装 Android 证书</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">flutter doctor --android-licenses</span><br><span class="line"></span><br><span class="line">一路按 Y</span><br></pre></td></tr></table></figure><h2 id="4-安装-VSCode"><a href="#4-安装-VSCode" class="headerlink" title="4. 安装 VSCode"></a>4. 安装 VSCode</h2><ul><li>下载地址</li></ul><p><a href="https://code.visualstudio.com/" target="_blank" rel="noopener">https://code.visualstudio.com/</a></p><h2 id="5-配置-VSCode-插件"><a href="#5-配置-VSCode-插件" class="headerlink" title="5. 配置 VSCode 插件"></a>5. 配置 VSCode 插件</h2><ul><li>Flutter 必装</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-08-26-09-55-56.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>Awesome Flutter Snippets</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-08-26-09-56-41.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>Paste JSON as Code</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-08-26-09-57-36.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>bloc</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-08-26-09-58-58.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="6-配置-Android-插件"><a href="#6-配置-Android-插件" class="headerlink" title="6. 配置 Android 插件"></a>6. 配置 Android 插件</h2><ul><li>flutter</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-08-26-10-00-53.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="7-配置-Android-模拟器"><a href="#7-配置-Android-模拟器" class="headerlink" title="7. 配置 Android 模拟器"></a>7. 配置 Android 模拟器</h2><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;安装 JDK 1.8&lt;/li&gt;
&lt;li&gt;安装 Flutter SDK&lt;/li&gt;
&lt;li&gt;安装 Android S
      
    
    </summary>
    
      <category term="Flutter零基础入门中文教学" scheme="https://blog.ducafecat.tech/categories/Flutter%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%E4%B8%AD%E6%96%87%E6%95%99%E5%AD%A6/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 零基础入门中文教学 - 05 配置 IDE Macos</title>
    <link href="https://blog.ducafecat.tech/2019/06/21/flutter/flutter-05-setup-ide-macos/"/>
    <id>https://blog.ducafecat.tech/2019/06/21/flutter/flutter-05-setup-ide-macos/</id>
    <published>2019-06-20T16:00:00.000Z</published>
    <updated>2019-08-01T18:39:22.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h2><ul><li>配置 VSCode</li><li>配置 Intellij IDEA</li><li>配置 Android Studio</li><li>Dart DevTools 调试视图</li><li>Hot Reload 热更新</li></ul><h2 id="配置-VSCode"><a href="#配置-VSCode" class="headerlink" title="配置 VSCode"></a>配置 VSCode</h2><h3 id="下载安装"><a href="#下载安装" class="headerlink" title="下载安装"></a>下载安装</h3><p><a href="https://code.visualstudio.com/" target="_blank" rel="noopener">https://code.visualstudio.com/</a></p><h3 id="安装插件-Dart"><a href="#安装插件-Dart" class="headerlink" title="安装插件 Dart"></a>安装插件 Dart</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-07-03-10-09-39.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="安装插件-Flutter"><a href="#安装插件-Flutter" class="headerlink" title="安装插件 Flutter"></a>安装插件 Flutter</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-07-03-10-10-08.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="安装插件-Awesome-Flutter-Snippets"><a href="#安装插件-Awesome-Flutter-Snippets" class="headerlink" title="安装插件 Awesome Flutter Snippets"></a>安装插件 Awesome Flutter Snippets</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-07-03-10-10-28.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h3><ul><li>flutter: new project</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-07-03-10-11-55.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>创建完成</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-07-03-10-13-20.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>创建模拟器</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-08-02-09-56-23.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>被提示需要 android 配置</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-08-02-09-49-46.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>Install Sources for Android 27</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-08-02-09-57-30.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>安装模拟器镜像 android-27</li></ul><p>Google Play Intel x86 Atom System Image (system-images;android-27;google_apis_playstore;x86)</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-08-02-09-59-24.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>x86 模拟器加速器</li></ul><p>Intel x86 Emulator Accelerator (HAXM installer)</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-08-02-10-49-23.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>android 模拟器</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-08-02-10-08-04.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>ios 模拟器</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-07-03-10-16-48.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>F5 运行</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-07-03-10-18-37.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>打开 Dart DevTools</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-07-03-10-19-57.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="配置-Intellij-IDEA"><a href="#配置-Intellij-IDEA" class="headerlink" title="配置 Intellij IDEA"></a>配置 Intellij IDEA</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p><a href="http://www.jetbrains.com/" target="_blank" rel="noopener">http://www.jetbrains.com/</a></p><h3 id="安装插件-Flutter-1"><a href="#安装插件-Flutter-1" class="headerlink" title="安装插件 Flutter"></a>安装插件 Flutter</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-07-03-10-29-15.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="new-project"><a href="#new-project" class="headerlink" title="new project"></a>new project</h3><ul><li>选择 flutter</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-07-03-10-34-28.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><blockquote><p>注意 选择 sdk 位置</p></blockquote><ul><li>选项</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-07-03-10-36-44.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><blockquote><p>点击 more 更多<br>设置 module name 为英文</p></blockquote><h3 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-07-03-10-51-28.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="调试器"><a href="#调试器" class="headerlink" title="调试器"></a>调试器</h3><ul><li>inspector</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-07-03-11-00-17.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>outline</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-07-03-11-02-01.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="配置-Android-Studio"><a href="#配置-Android-Studio" class="headerlink" title="配置 Android Studio"></a>配置 Android Studio</h2><h3 id="安装插件-Flutter-2"><a href="#安装插件-Flutter-2" class="headerlink" title="安装插件 Flutter"></a>安装插件 Flutter</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-07-03-11-11-02.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="创建项目-1"><a href="#创建项目-1" class="headerlink" title="创建项目"></a>创建项目</h3><ul><li>主面板</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-07-03-11-10-33.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>导航</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-07-03-11-11-57.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-07-03-11-13-42.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="运行-1"><a href="#运行-1" class="headerlink" title="运行"></a>运行</h3><p>同 IDEA 效果</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-07-03-11-29-16.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="hot-reload"><a href="#hot-reload" class="headerlink" title="hot reload"></a>hot reload</h2><p>热更新已支持</p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://flutter.dev/docs/get-started/install/macos" target="_blank" rel="noopener">Flutter SDK MacOS install</a></li><li><a href="https://flutter.dev/docs/get-started/editor" target="_blank" rel="noopener">Set up an editor</a></li><li><a href="https://flutter.dev/docs/development/tools/hot-reload" target="_blank" rel="noopener">Hot reload</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;配置 VSCode&lt;/li&gt;
&lt;li&gt;配置 Intellij IDEA&lt;/li&gt;
&lt;li&gt;配置 Android 
      
    
    </summary>
    
      <category term="Flutter零基础入门中文教学" scheme="https://blog.ducafecat.tech/categories/Flutter%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%E4%B8%AD%E6%96%87%E6%95%99%E5%AD%A6/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 零基础入门中文教学 - 04 配置 Android 开发环境 MacOS</title>
    <link href="https://blog.ducafecat.tech/2019/06/20/flutter/flutter-04-setup-android-macos/"/>
    <id>https://blog.ducafecat.tech/2019/06/20/flutter/flutter-04-setup-android-macos/</id>
    <published>2019-06-19T16:00:00.000Z</published>
    <updated>2019-08-01T18:39:22.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h2><ul><li>安装 Android Studio</li><li>配置 Flutter 连接 Android Studio</li><li>配置 Android 模拟器</li><li>在 Android 模拟器中运行 Flutter App</li></ul><h2 id="1-安装-Android-Studio"><a href="#1-安装-Android-Studio" class="headerlink" title="1. 安装 Android Studio"></a>1. 安装 Android Studio</h2><p><a href="https://developer.android.google.cn/studio" target="_blank" rel="noopener">https://developer.android.google.cn/studio</a></p><h3 id="1-2-“unable-to-access-android-sdk-add-on-list”-点击取消"><a href="#1-2-“unable-to-access-android-sdk-add-on-list”-点击取消" class="headerlink" title="1.2 “unable to access android sdk add-on list” 点击取消"></a>1.2 “unable to access android sdk add-on list” 点击取消</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="image-20190522104947380.png" alt="unable to access android sdk add-on list" title="">                </div>                <div class="image-caption">unable to access android sdk add-on list</div>            </figure><h3 id="1-3-自定义安装，全选项目"><a href="#1-3-自定义安装，全选项目" class="headerlink" title="1.3 自定义安装，全选项目"></a>1.3 自定义安装，全选项目</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="image-20190522105204530.png" alt="all" title="">                </div>                <div class="image-caption">all</div>            </figure><h3 id="1-4-配置模拟器"><a href="#1-4-配置模拟器" class="headerlink" title="1.4 配置模拟器"></a>1.4 配置模拟器</h3><ul><li>进去 AVD Manage</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="image-20190522110737156.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>不要选最新的模拟器镜像</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-07-02-14-13-42.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>配置模拟器参数</li></ul><p>大家机器好点的，就多给点内存和空间吧，这样模拟器运行的快些</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="image-20190522112214757.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>运行模拟器</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="image-20190522112401274.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="2-配置环境变量"><a href="#2-配置环境变量" class="headerlink" title="2. 配置环境变量"></a>2. 配置环境变量</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; vi ~/.bash_profile</span><br><span class="line"></span><br><span class="line"><span class="comment"># android</span></span><br><span class="line"><span class="built_in">export</span> ANDROID_HOME=~/Library/Android/sdk</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$&#123;PATH&#125;</span>:<span class="variable">$&#123;ANDROID_HOME&#125;</span>/platform-tools</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$&#123;PATH&#125;</span>:<span class="variable">$&#123;ANDROID_HOME&#125;</span>/tools</span><br><span class="line"></span><br><span class="line"><span class="built_in">source</span> ~/.bash_profile</span><br></pre></td></tr></table></figure><h2 id="3-运行-Flutter"><a href="#3-运行-Flutter" class="headerlink" title="3. 运行 Flutter"></a>3. 运行 Flutter</h2><h3 id="3-1-创建项目"><a href="#3-1-创建项目" class="headerlink" title="3.1 创建项目"></a>3.1 创建项目</h3><ul><li>crate &amp; run</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&gt; flutter create my_app</span><br><span class="line">&gt; <span class="built_in">cd</span> my_app</span><br><span class="line">&gt; flutter run</span><br><span class="line"></span><br><span class="line">Using hardware rendering with device Android SDK built <span class="keyword">for</span> x86. If you get graphics artifacts, consider enabling software rendering</span><br><span class="line">with <span class="string">"--enable-software-rendering"</span>.</span><br><span class="line">Launching lib/main.dart on Android SDK built <span class="keyword">for</span> x86 <span class="keyword">in</span> debug mode...</span><br><span class="line">Initializing gradle...                                              1.4s</span><br><span class="line">Resolving dependencies...                                           2.2s</span><br><span class="line">Running Gradle task <span class="string">'assembleDebug'</span>...</span><br><span class="line">Running Gradle task <span class="string">'assembleDebug'</span>... Done                         2.2s</span><br><span class="line">Built build/app/outputs/apk/debug/app-debug.apk.</span><br><span class="line">Installing build/app/outputs/apk/app.apk...                         2.2s</span><br><span class="line">D/EGL_emulation( 5614): eglMakeCurrent: 0xe2c05300: ver 3 0 (tinfo 0xe2c03350)</span><br><span class="line">Syncing files to device Android SDK built <span class="keyword">for</span> x86...</span><br><span class="line"> 2,067ms (!)</span><br><span class="line"></span><br><span class="line">🔥  To hot reload changes <span class="keyword">while</span> running, press <span class="string">"r"</span>. To hot restart (and rebuild state), press <span class="string">"R"</span>.</span><br><span class="line">An Observatory debugger and profiler on Android SDK built <span class="keyword">for</span> x86 is available at: http://127.0.0.1:64823/uqW8O20byg8=/</span><br><span class="line">For a more detailed <span class="built_in">help</span> message, press <span class="string">"h"</span>. To detach, press <span class="string">"d"</span>; to quit, press <span class="string">"q"</span>.</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-07-02-14-20-41.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://flutter.dev/docs/get-started/install/macos" target="_blank" rel="noopener">Flutter SDK MacOS install</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;安装 Android Studio&lt;/li&gt;
&lt;li&gt;配置 Flutter 连接 Android Studio&lt;
      
    
    </summary>
    
      <category term="Flutter零基础入门中文教学" scheme="https://blog.ducafecat.tech/categories/Flutter%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%E4%B8%AD%E6%96%87%E6%95%99%E5%AD%A6/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 零基础入门中文教学 - 03 配置 IOS 开发环境 MacOS</title>
    <link href="https://blog.ducafecat.tech/2019/06/19/flutter/flutter-03-setup-ios-macos/"/>
    <id>https://blog.ducafecat.tech/2019/06/19/flutter/flutter-03-setup-ios-macos/</id>
    <published>2019-06-18T16:00:00.000Z</published>
    <updated>2019-08-01T18:39:22.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h2><ul><li>安装 xcode</li><li>配置 flutter 连接 xcode</li><li>在 IOS 模拟器中运行 flutter app</li></ul><h2 id="1-安装-XCode"><a href="#1-安装-XCode" class="headerlink" title="1. 安装 XCode"></a>1. 安装 XCode</h2><p>安装 Xcode 9.0 以上版本 (访问 <a href="https://developer.apple.com/xcode/" target="_blank" rel="noopener">Apple网站</a> 下载或者，<a href="https://itunes.apple.com/us/app/xcode/id497799835" target="_blank" rel="noopener">Mac App Store</a> 方式安装).</p><h2 id="2-第一次启动-XCode-安装所需组件"><a href="#2-第一次启动-XCode-安装所需组件" class="headerlink" title="2. 第一次启动 XCode 安装所需组件"></a>2. 第一次启动 XCode 安装所需组件</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="image-20190628180642579.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="3-配置-Xcode-command-line-tools"><a href="#3-配置-Xcode-command-line-tools" class="headerlink" title="3. 配置 Xcode command-line tools"></a>3. 配置 Xcode command-line tools</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; sudo xcode-select --switch /Applications/Xcode.app/Contents/Developer</span><br><span class="line"></span><br><span class="line">检验 打印 license</span><br><span class="line">&gt; sudo xcodebuild -license</span><br></pre></td></tr></table></figure><h2 id="4-启动模拟器"><a href="#4-启动模拟器" class="headerlink" title="4. 启动模拟器"></a>4. 启动模拟器</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">open -a Simulator</span><br></pre></td></tr></table></figure><h2 id="5-创建-Flutter-项目"><a href="#5-创建-Flutter-项目" class="headerlink" title="5. 创建 Flutter 项目"></a>5. 创建 Flutter 项目</h2><h3 id="5-1-create-amp-run"><a href="#5-1-create-amp-run" class="headerlink" title="5.1 create &amp; run"></a>5.1 create &amp; run</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt; flutter create my_app</span><br><span class="line">&gt; <span class="built_in">cd</span> my_app</span><br><span class="line">&gt; flutter run</span><br><span class="line"></span><br><span class="line">🔥  To hot reload changes <span class="keyword">while</span> running, press <span class="string">"r"</span>. To hot restart (and rebuild state), press <span class="string">"R"</span>.</span><br><span class="line">An Observatory debugger and profiler on iPhone Xʀ is available at: http://127.0.0.1:62341/ztmtijcoJrI=/</span><br><span class="line">For a more detailed <span class="built_in">help</span> message, press <span class="string">"h"</span>. To detach, press <span class="string">"d"</span>; to quit, press <span class="string">"q"</span>.</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="image-20190701160914331.png" alt="模拟器运行" title="">                </div>                <div class="image-caption">模拟器运行</div>            </figure><h3 id="5-2-vm-报告"><a href="#5-2-vm-报告" class="headerlink" title="5.2 vm 报告"></a>5.2 vm 报告</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1:62341/ztmtijcoJrI=/<span class="comment">#/vm</span></span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="image-20190701161106890.png" alt="vm" title="">                </div>                <div class="image-caption">vm</div>            </figure><h2 id="6-部署到真机"><a href="#6-部署到真机" class="headerlink" title="6. 部署到真机"></a>6. 部署到真机</h2><h3 id="6-1-安装软件包"><a href="#6-1-安装软件包" class="headerlink" title="6.1 安装软件包"></a>6.1 安装软件包</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt; brew update</span><br><span class="line"></span><br><span class="line">&gt; brew install --HEAD usbmuxd</span><br><span class="line">&gt; brew link usbmuxd</span><br><span class="line">&gt; brew install --HEAD libimobiledevice</span><br><span class="line">&gt; brew install ideviceinstaller ios-deploy cocoapods</span><br><span class="line">&gt; pod setup</span><br></pre></td></tr></table></figure><blockquote><p>安装 <a href="https://brew.sh/" target="_blank" rel="noopener">homebrew</a></p></blockquote><blockquote><p>pod setup 很慢的问题</p><ol><li>手动下载 git clone <a href="https://github.com/CocoaPods/Specs" target="_blank" rel="noopener">https://github.com/CocoaPods/Specs</a></li><li>复制 ~/.cocoapods/repos/Specs-master</li><li>执行 pod update</li><li>复制 master 下的 .git 到 Specs-master</li><li>停止 pod update</li><li>重命名 Specs-master 为 master</li><li>进入项目的 ios 目录下 pod install 成功</li></ol></blockquote><h3 id="6-2-配置AppStore开发者账号"><a href="#6-2-配置AppStore开发者账号" class="headerlink" title="6.2 配置AppStore开发者账号"></a>6.2 配置AppStore开发者账号</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">open ios/Runner.xcworkspace</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="image-20190701161445927.png" alt="Add Account" title="">                </div>                <div class="image-caption">Add Account</div>            </figure><blockquote><p>开发者登录 <a href="https://developer.apple.com/cn/programs/" target="_blank" rel="noopener">https://developer.apple.com/cn/programs/</a></p></blockquote><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://flutter.dev/docs/get-started/install/macos" target="_blank" rel="noopener">Flutter SDK MacOS install</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;安装 xcode&lt;/li&gt;
&lt;li&gt;配置 flutter 连接 xcode&lt;/li&gt;
&lt;li&gt;在 IOS 模拟器
      
    
    </summary>
    
      <category term="Flutter零基础入门中文教学" scheme="https://blog.ducafecat.tech/categories/Flutter%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%E4%B8%AD%E6%96%87%E6%95%99%E5%AD%A6/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 零基础入门中文教学 - 02 安装 SDK MacOS</title>
    <link href="https://blog.ducafecat.tech/2019/06/18/flutter/flutter-02-install-sdk-macos/"/>
    <id>https://blog.ducafecat.tech/2019/06/18/flutter/flutter-02-install-sdk-macos/</id>
    <published>2019-06-17T16:00:00.000Z</published>
    <updated>2019-08-01T18:39:22.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h2><ul><li>采用 git 方式安装 SDK</li><li>编译代码 flutter tool</li><li>检查环境 flutter doctor</li></ul><h2 id="1-安装-SDK"><a href="#1-安装-SDK" class="headerlink" title="1. 安装 SDK"></a>1. 安装 SDK</h2><h3 id="1-1-方式一：下载SDK包"><a href="#1-1-方式一：下载SDK包" class="headerlink" title="1.1 方式一：下载SDK包"></a>1.1 方式一：下载SDK包</h3><ul><li><a href="https://flutter.dev/docs/development/tools/sdk/releases" target="_blank" rel="noopener">SDK包下载</a></li></ul><blockquote><p>解压到 ~/Documents/sdk/flutter</p></blockquote><h3 id="1-2-方式二：git-拉取源码"><a href="#1-2-方式二：git-拉取源码" class="headerlink" title="1.2 方式二：git 拉取源码"></a>1.2 方式二：git 拉取源码</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; mkdir ~/Documents/sdk</span><br><span class="line">&gt; <span class="built_in">cd</span> ~/Documents/sdk</span><br><span class="line">&gt; git <span class="built_in">clone</span> -b stable https://github.com/flutter/flutter.git</span><br></pre></td></tr></table></figure><h3 id="1-3-持续升级"><a href="#1-3-持续升级" class="headerlink" title="1.3 持续升级"></a>1.3 持续升级</h3><p>下次更新直接进入目录升级</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="built_in">cd</span> ~/Documents/sdk/flutter</span><br><span class="line">&gt; git pull</span><br><span class="line">&gt; flutter --version</span><br></pre></td></tr></table></figure><h2 id="2-配置环境变量"><a href="#2-配置环境变量" class="headerlink" title="2. 配置环境变量"></a>2. 配置环境变量</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt; vi ~/.bash_profile</span><br><span class="line"></span><br><span class="line"><span class="comment"># flutter , 注意没有单引号</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$&#123;PATH&#125;</span>:~/Documents/sdk/flutter/bin</span><br><span class="line"></span><br><span class="line"><span class="comment"># 以下两行适合国内</span></span><br><span class="line"><span class="built_in">export</span> PUB_HOSTED_URL=https://pub.flutter-io.cn</span><br><span class="line"><span class="built_in">export</span> FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn</span><br><span class="line"></span><br><span class="line">&gt; <span class="built_in">source</span> ~/.bash_profile</span><br></pre></td></tr></table></figure><h2 id="3-zsh-用户修改配置文件"><a href="#3-zsh-用户修改配置文件" class="headerlink" title="3. zsh 用户修改配置文件"></a>3. zsh 用户修改配置文件</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; vi ~/.zshrc</span><br><span class="line"></span><br><span class="line">最后一行加入</span><br><span class="line"><span class="built_in">source</span> ~/.bash_profile</span><br><span class="line"></span><br><span class="line">重启终端生效</span><br></pre></td></tr></table></figure><h2 id="4-命令行运行-flutter"><a href="#4-命令行运行-flutter" class="headerlink" title="4. 命令行运行 flutter"></a>4. 命令行运行 flutter</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&gt; flutter doctor</span><br><span class="line">xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun</span><br><span class="line">Building flutter tool...</span><br><span class="line"></span><br><span class="line">  ╔════════════════════════════════════════════════════════════════════════════╗</span><br><span class="line">  ║                 Welcome to Flutter! - https://flutter.dev                  ║</span><br><span class="line">  ║                                                                            ║</span><br><span class="line">  ║ The Flutter tool anonymously reports feature usage statistics and crash    ║</span><br><span class="line">  ║ reports to Google <span class="keyword">in</span> order to <span class="built_in">help</span> Google contribute improvements to       ║</span><br><span class="line">  ║ Flutter over time.                                                         ║</span><br><span class="line">  ║                                                                            ║</span><br><span class="line">  ║ Read about data we send with crash reports:                                ║</span><br><span class="line">  ║ https://github.com/flutter/flutter/wiki/Flutter-CLI-crash-reporting        ║</span><br><span class="line">  ║                                                                            ║</span><br><span class="line">  ║ See Google<span class="string">'s privacy policy:                                               ║</span></span><br><span class="line"><span class="string">  ║ https://www.google.com/intl/en/policies/privacy/                           ║</span></span><br><span class="line"><span class="string">  ║                                                                            ║</span></span><br><span class="line"><span class="string">  ║ Use "flutter config --no-analytics" to disable analytics and crash         ║</span></span><br><span class="line"><span class="string">  ║ reporting.                                                                 ║</span></span><br><span class="line"><span class="string">  ╚════════════════════════════════════════════════════════════════════════════╝</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Doctor summary (to see all details, run flutter doctor -v):</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Oops; flutter has exited unexpectedly.</span></span><br><span class="line"><span class="string">Crash report written to /Users/ducafecat/flutter_01.log;</span></span><br><span class="line"><span class="string">please let us know at https://github.com/flutter/flutter/issues.</span></span><br></pre></td></tr></table></figure><blockquote><p>第一次运行会进行 build</p></blockquote><ul><li>CommandLineTools 工具推荐，先安装 xcode （早晚都要安装的）</li></ul><p>然后 Terminal 运行 xcode-select –install</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="image-20190628153509349.png" alt="xcode-select --install" title="">                </div>                <div class="image-caption">xcode-select --install</div>            </figure><h2 id="5-检查环境-flutter-doctor"><a href="#5-检查环境-flutter-doctor" class="headerlink" title="5. 检查环境 flutter doctor"></a>5. 检查环境 flutter doctor</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&gt; flutter doctor</span><br><span class="line">Doctor summary (to see all details, run flutter doctor -v):</span><br><span class="line">[✓] Flutter (Channel stable, v1.5.4-hotfix.2, on Mac OS X 10.14.5 18F132, locale zh-Hans-CN)</span><br><span class="line">[!] Android toolchain - develop <span class="keyword">for</span> Android devices (Android SDK version 29.0.0)</span><br><span class="line">    ✗ Android licenses not accepted.  To resolve this, run: flutter doctor --android-licenses</span><br><span class="line">[✗] iOS toolchain - develop <span class="keyword">for</span> iOS devices</span><br><span class="line">    ✗ Xcode installation is incomplete; a full installation is necessary <span class="keyword">for</span> iOS development.</span><br><span class="line">      Download at: https://developer.apple.com/xcode/download/</span><br><span class="line">      Or install Xcode via the App Store.</span><br><span class="line">      Once installed, run:</span><br><span class="line">        sudo xcode-select --switch /Applications/Xcode.app/Contents/Developer</span><br><span class="line">    ✗ libimobiledevice and ideviceinstaller are not installed. To install with Brew, run:</span><br><span class="line">        brew update</span><br><span class="line">        brew install --HEAD usbmuxd</span><br><span class="line">        brew link usbmuxd</span><br><span class="line">        brew install --HEAD libimobiledevice</span><br><span class="line">        brew install ideviceinstaller</span><br><span class="line">    ✗ ios-deploy not installed. To install:</span><br><span class="line">        brew install ios-deploy</span><br><span class="line">    ✗ CocoaPods not installed.</span><br><span class="line">        CocoaPods is used to retrieve the iOS platform side<span class="string">'s plugin code that responds to your plugin usage on the Dart side.</span></span><br><span class="line"><span class="string">        Without resolving iOS dependencies with CocoaPods, plugins will not work on iOS.</span></span><br><span class="line"><span class="string">        For more info, see https://flutter.dev/platform-plugins</span></span><br><span class="line"><span class="string">      To install:</span></span><br><span class="line"><span class="string">        brew install cocoapods</span></span><br><span class="line"><span class="string">        pod setup</span></span><br><span class="line"><span class="string">[!] Android Studio (version 3.4)</span></span><br><span class="line"><span class="string">    ✗ Flutter plugin not installed; this adds Flutter specific functionality.</span></span><br><span class="line"><span class="string">    ✗ Dart plugin not installed; this adds Dart specific functionality.</span></span><br><span class="line"><span class="string">[!] IntelliJ IDEA Ultimate Edition (version 2019.1.3)</span></span><br><span class="line"><span class="string">    ✗ Flutter plugin not installed; this adds Flutter specific functionality.</span></span><br><span class="line"><span class="string">    ✗ Dart plugin not installed; this adds Dart specific functionality.</span></span><br><span class="line"><span class="string">[!] VS Code (version 1.35.1)</span></span><br><span class="line"><span class="string">    ✗ Flutter extension not installed; install from</span></span><br><span class="line"><span class="string">      https://marketplace.visualstudio.com/items?itemName=Dart-Code.flutter</span></span><br><span class="line"><span class="string">[!] Connected device</span></span><br><span class="line"><span class="string">    ! No devices available</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">! Doctor found issues in 6 categories.</span></span><br></pre></td></tr></table></figure><h2 id="6-查看版本-version"><a href="#6-查看版本-version" class="headerlink" title="6. 查看版本 version"></a>6. 查看版本 version</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; flutter --version</span><br><span class="line">Flutter 1.5.4-hotfix.2 • channel stable • https://github.com/flutter/flutter.git</span><br><span class="line">Framework • revision 7a4c33425d (9 weeks ago) • 2019-04-29 11:05:24 -0700</span><br><span class="line">Engine • revision 52c7a1e849</span><br><span class="line">Tools • Dart 2.3.0 (build 2.3.0-dev.0.5 a1668566e5)</span><br></pre></td></tr></table></figure><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://flutter.dev/docs/get-started/install/macos" target="_blank" rel="noopener">Flutter SDK MacOS install</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;采用 git 方式安装 SDK&lt;/li&gt;
&lt;li&gt;编译代码 flutter tool&lt;/li&gt;
&lt;li&gt;检查环境
      
    
    </summary>
    
      <category term="Flutter零基础入门中文教学" scheme="https://blog.ducafecat.tech/categories/Flutter%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%E4%B8%AD%E6%96%87%E6%95%99%E5%AD%A6/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 零基础入门中文教学 - 01 前言</title>
    <link href="https://blog.ducafecat.tech/2019/06/17/flutter/flutter-01-introduce/"/>
    <id>https://blog.ducafecat.tech/2019/06/17/flutter/flutter-01-introduce/</id>
    <published>2019-06-16T16:00:00.000Z</published>
    <updated>2020-02-26T07:55:53.417Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-01-22-16-13-18.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h2><ul><li>介绍 Flutter</li><li>课程计划</li><li>如果获取课程资料、代码、视频</li></ul><h2 id="适合人群"><a href="#适合人群" class="headerlink" title="适合人群"></a>适合人群</h2><ul><li>泛移动开发人员</li><li>原生移动开发人员</li><li>前端开发人员</li></ul><h2 id="跨平台-移动、Web、桌面、嵌入"><a href="#跨平台-移动、Web、桌面、嵌入" class="headerlink" title="跨平台: 移动、Web、桌面、嵌入"></a>跨平台: 移动、Web、桌面、嵌入</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="image-20190522135901818.png" alt="跨平台" title="">                </div>                <div class="image-caption">跨平台</div>            </figure><h2 id="Flutter-框架结构"><a href="#Flutter-框架结构" class="headerlink" title="Flutter 框架结构"></a>Flutter 框架结构</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="image-20190523091712106.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>Flutter Framework</li></ul><p>Framework 这一层使用 Dart 语言开发，它实现了一套基础库。</p><p>Foundation、Animation、Painting、Gestures 为 Dart 实现的 UI 层，提供动画、手势及绘制。</p><p>Rendering 渲染层，依赖 UI 层，在运行时 Rendering 层会构建一个 Widget 树，当有变化时，会更具一定的算法计算出有变化的部分，然后更新 Widget 树。</p><p>Widgets 层是 Flutter 提供的的一套基础组件库，在基础组件库之上，Flutter 还提供了 Material 和 Cupertino 两种视觉风格的组件库。</p><ul><li>Flutter Engine</li></ul><p>Skia 是一个开源的二维图形库，提供各种常用的 API，并可在多种软硬件平台上运行。谷歌 Chrome 浏览器、Chrome OS、安卓、火狐浏览器、火狐操作系统以及其它许多产品都使用它作为图形引擎。</p><p>Skia 由谷歌出资管理，任何人都可基于 BSD 免费软件许可证使用 Skia。Skia 开发团队致力于开发其核心部分， 并广泛采纳各方对于 Skia 的开源贡献。</p><p>因为没有使用原生的 UI 和绘制框架，所以才保证了 Flutter 的高性能体验。</p><h2 id="Skia"><a href="#Skia" class="headerlink" title="Skia"></a>Skia</h2><p><a href="https://skia.org/" target="_blank" rel="noopener">官网</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="image-20190626154959148.png" alt="image-20190626154959148" title="">                </div>                <div class="image-caption">image-20190626154959148</div>            </figure><p>Skia是一个开源的二维图形库，提供各种常用的API，并可在多种软硬件平台上运行。谷歌Chrome浏览器、Chrome OS、安卓、火狐浏览器、火狐操作系统以及其它许多产品都使用它作为图形引擎。</p><p>Skia由谷歌出资管理，任何人都可基于BSD免费软件许可证使用Skia。Skia开发团队致力于开发其核心部分， 并广泛采纳各方对于Skia的开源贡献。</p><h2 id="Flutter-for-Web"><a href="#Flutter-for-Web" class="headerlink" title="Flutter for Web"></a>Flutter for Web</h2><p><a href="https://flutter.dev/web" target="_blank" rel="noopener">https://flutter.dev/web</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="image-20190523092032825.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>通过对比，可以发现，web框架层和mobile的几乎一模一样。因此只需要重新实现一下引擎和嵌入层，不用变动Flutter API就可以完全可以将UI代码从Android / IOS Flutter App移植到Web。Dart能够使用Dart2Js编译器把Dart代码编译成Js代码。大多数原生App元素能够通过DOM实现，DOM实现不了的元素可以通过Canvas来实现。</p><h2 id="Fuchsia-OS"><a href="#Fuchsia-OS" class="headerlink" title="Fuchsia OS"></a>Fuchsia OS</h2><ul><li><p><a href="https://xuzhongxing.github.io/201806fuchsia.pdf" target="_blank" rel="noopener">许中兴博士演讲：Fuchsia OS 简介及幻灯片下载</a> </p></li><li><p>桌面系统</p></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="image-20190626153104569.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>手机OS</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="image-20190626153252442.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>平板</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="image-20190626153929267.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li>华为荣耀Play</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="image-20190626154621682.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="image-20190626154700792.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="Flutter-特点"><a href="#Flutter-特点" class="headerlink" title="Flutter 特点"></a>Flutter 特点</h2><ul><li><p>多平台支持 iOS Android Linux 未来 Fuchsia OS</p></li><li><p>原生用户界面</p></li><li><p>120fps 超高性能</p></li><li><p>两套成熟 UI 库 Material Design 和 Cupertino</p></li><li><p>响应式的框架 Redux、RxDart、BloC 业务和 UI 分离</p></li><li><p>Flutter 支持 Hot Reload</p></li><li><p>国内阿里咸鱼、腾讯、京东、国外的谷歌等公司都已经有上线产品在使用 Flutter 开发</p><ul><li><a href="https://flutter.io/showcase" target="_blank" rel="noopener">showcase</a></li></ul></li></ul><h2 id="Flutter-横向对比"><a href="#Flutter-横向对比" class="headerlink" title="Flutter 横向对比"></a>Flutter 横向对比</h2><ul><li><p>Cordova</p><p>基于 WebView 渲染，遇到动画、大列表 性能慢</p></li><li><p>React Native、Weex</p><p>基于虚拟 DOM 生成原生组件，比 Cordova 这类的性能好，但是遇到负责项目会有叠加 view 过多性能瓶颈</p></li><li><p>Flutter</p><p>自己封装的组件和渲染引擎，在设计上肯定会比 RN 这类的性能好，用的自家 Dart 语言深度编译，不需要像 RN 桥接 JavaScript 进行通讯，也会在性能上有优势</p></li></ul><h2 id="Flutter-生态资源"><a href="#Flutter-生态资源" class="headerlink" title="Flutter 生态资源"></a>Flutter 生态资源</h2><ul><li><a href="https://itsallwidgets.com/" target="_blank" rel="noopener">Flutter应用展示</a></li><li><a href="https://pub.dev/flutter" target="_blank" rel="noopener">官方包管理平台</a></li><li><a href="https://github.com/Solido/awesome-flutter" target="_blank" rel="noopener">awesome</a></li></ul><h2 id="课程计划"><a href="#课程计划" class="headerlink" title="课程计划"></a>课程计划</h2><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">- </span>开篇写在最前</span><br><span class="line">  - Flutter 介绍</span><br><span class="line">  - 学习方法推荐</span><br><span class="line">  - 课程计划</span><br><span class="line"></span><br><span class="line"><span class="bullet">- </span>开发环境搭建和工具配置</span><br><span class="line">  - Flutter 环境配置 MacOS</span><br><span class="line">  - IOS 环境配置 MacOS</span><br><span class="line">  - Android 环境配置 MacOS</span><br><span class="line">  - Flutter 环境配置 Windows10</span><br><span class="line">  - Android 环境配置 Windows10</span><br><span class="line">  - 开发工具的选择 VSCode、IDEA、AndroidStudio</span><br><span class="line"></span><br><span class="line"><span class="bullet">- </span>基础知识</span><br><span class="line">  - 项目及配置文件介绍</span><br><span class="line">  - 开发规范</span><br><span class="line">  - 一切都是 widget</span><br><span class="line">  - StatelessWidget、StatefulWidget</span><br><span class="line">  - 框架组件 MaterialApp、Scaffold</span><br><span class="line">  - 布局组件 Container、Center、Row、Column</span><br><span class="line">  - 基础组件 Text、Image、Button</span><br><span class="line">  - 路由导航 Routes、Navigator</span><br><span class="line">  - 生命周期</span><br><span class="line"></span><br><span class="line"><span class="bullet">- </span>快熟上手实战</span><br><span class="line">  - 新闻应用程序结构分析</span><br><span class="line">  - 使用布局组件搭建新闻列表界面</span><br><span class="line">  - 采用第三方 Http Dio 程序包读取数据</span><br><span class="line">  - 解析 Json 到 Modle</span><br><span class="line">  - 使用自定义组件展示新闻行信息</span><br><span class="line">  - 点击新闻条路由导航到详情页</span><br><span class="line">  - 采用Web容器展示新闻内容</span><br><span class="line">  - 上拉刷新、下拉加载新闻列表</span><br><span class="line">  - 定制 Loading 效果</span><br><span class="line">  - 采用矢量图标库</span><br><span class="line">  - 采用 Sqlite 实现新闻列表首页缓存</span><br><span class="line">  - Redux 管理主题样式</span><br><span class="line">  - 加入应用启动画面</span><br><span class="line">  - 打包 Android APK 文件</span><br><span class="line">  - 打包 IOS IPA 文件</span><br><span class="line"></span><br><span class="line"><span class="bullet">- </span>基础组件</span><br><span class="line">  - Widget 与 Element</span><br><span class="line">  - StatelessWidget</span><br><span class="line">  - StatefulWidget</span><br><span class="line">  - Text</span><br><span class="line">  - Image</span><br><span class="line">  - Button</span><br><span class="line">  - AppBar</span><br><span class="line">  - AlertDialog</span><br><span class="line">  - Icon</span><br><span class="line">  - TextField</span><br><span class="line">  - Form</span><br><span class="line">  - Switch</span><br><span class="line">  - Checkbox</span><br><span class="line"></span><br><span class="line"><span class="bullet">- </span>布局组件</span><br><span class="line">  - 线性 Row</span><br><span class="line">  - 线性 Column</span><br><span class="line">  - 弹性 Flex</span><br><span class="line">  - 弹性 Expanded</span><br><span class="line">  - 层叠 Stack</span><br><span class="line">  - 层叠 IndexedStack</span><br><span class="line">  - 层叠 Positioned</span><br><span class="line">  - 流式 Flow</span><br><span class="line">  - 流式 Wrap</span><br><span class="line"></span><br><span class="line"><span class="bullet">- </span>容器组件</span><br><span class="line">  - Scaffold</span><br><span class="line">  - Container</span><br><span class="line">  - Center</span><br><span class="line">  - Padding</span><br><span class="line">  - ConstrainedBox</span><br><span class="line">  - SizedBox</span><br><span class="line">  - DecoratedBox</span><br><span class="line">  - Transform</span><br><span class="line"></span><br><span class="line"><span class="bullet">- </span>导航组件</span><br><span class="line">  - TabBar</span><br><span class="line">  - NavigationBar</span><br><span class="line">  - PageView</span><br><span class="line"></span><br><span class="line"><span class="bullet">- </span>可滚动组件</span><br><span class="line">  - CustomScrollView</span><br><span class="line">  - ListView</span><br><span class="line">  - GridView</span><br><span class="line">  - ScrollView</span><br><span class="line">  - ExpansionPanel</span><br><span class="line">  - ScrollController</span><br><span class="line"></span><br><span class="line"><span class="bullet">- </span>表格组件</span><br><span class="line">  - Table</span><br><span class="line">  - DataTables</span><br><span class="line"></span><br><span class="line"><span class="bullet">- </span>功能型组件</span><br><span class="line">  - WillPopScope</span><br><span class="line">  - InheritedWidget</span><br><span class="line">  - 主题 Theme</span><br><span class="line"></span><br><span class="line"><span class="bullet">- </span>事件处理与通知</span><br><span class="line">  - 事件处理</span><br><span class="line">  - 手势识别</span><br><span class="line">  - 全局事件总线</span><br><span class="line">  - 通知消息</span><br><span class="line"></span><br><span class="line"><span class="bullet">- </span>自定义 Widget</span><br><span class="line">  - 组合其它 Widget</span><br><span class="line">  - 自绘 CustomPaint、Canvas</span><br><span class="line"></span><br><span class="line"><span class="bullet">- </span>进阶</span><br><span class="line">  - 文件操作</span><br><span class="line">  - Http 请求</span><br><span class="line">  - WebSocket 连接</span><br><span class="line">  - Json 解析</span><br><span class="line">  - 包与插件</span><br><span class="line">  - 国际化</span><br><span class="line">  - 数据库缓存</span><br><span class="line">  - Redux</span><br></pre></td></tr></table></figure><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://flutter.io" target="_blank" rel="noopener">flutter.io</a></li><li><a href="https://skia.org/index_zh" target="_blank" rel="noopener">skia</a></li><li><a href="https://flutter.io/showcase" target="_blank" rel="noopener">showcase</a></li><li><a href="https://itsallwidgets.com/" target="_blank" rel="noopener">An open list of apps built with Flutter</a></li><li><a href="https://developers.googleblog.com/2019/05/Flutter-io19.html" target="_blank" rel="noopener"><a href="https://developers.googleblog.com/2019/05/Flutter-io19.html" target="_blank" rel="noopener">Flutter: a Portable UI Framework for Mobile, Web, Embedded, and Desktop</a></a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
      <category term="Flutter零基础入门中文教学" scheme="https://blog.ducafecat.tech/categories/Flutter%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%E4%B8%AD%E6%96%87%E6%95%99%E5%AD%A6/"/>
    
    
      <category term="flutter" scheme="https://blog.ducafecat.tech/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>Dart语言学习 - 38 代码分格 API 设计 effective-design</title>
    <link href="https://blog.ducafecat.tech/2019/01/28/dart/dart-38-effective-design/"/>
    <id>https://blog.ducafecat.tech/2019/01/28/dart/dart-38-effective-design/</id>
    <published>2019-01-28T08:44:13.000Z</published>
    <updated>2019-08-01T18:39:22.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>API 设计</li></ul><h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><ul><li>Dart 2.1.0</li></ul><h1 id="要-使用一致的术语"><a href="#要-使用一致的术语" class="headerlink" title="要 使用一致的术语"></a>要 使用一致的术语</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pageCount         <span class="comment">// 一个成员变量</span></span><br><span class="line">updatePageCount() <span class="comment">// 和 pageCount 名字一致。</span></span><br><span class="line">toSomething()     <span class="comment">// 和 Iterable 的 toList() 一致。</span></span><br><span class="line">asSomething()     <span class="comment">// 和 List 的 asMap() 一致。</span></span><br><span class="line">Point             <span class="comment">// 广为人知的概念。</span></span><br></pre></td></tr></table></figure><h1 id="避免-缩写"><a href="#避免-缩写" class="headerlink" title="避免 缩写"></a>避免 缩写</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pageCount</span><br><span class="line">buildRectangles</span><br><span class="line">IOStream</span><br><span class="line">HttpRequest</span><br></pre></td></tr></table></figure><h1 id="推荐-把最具描述性的名词放到最后"><a href="#推荐-把最具描述性的名词放到最后" class="headerlink" title="推荐 把最具描述性的名词放到最后"></a>推荐 把最具描述性的名词放到最后</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pageCount             <span class="comment">// A count (of pages).</span></span><br><span class="line">ConversionSink        <span class="comment">// A sink for doing conversions.</span></span><br><span class="line">ChunkedConversionSink <span class="comment">// A ConversionSink that's chunked.</span></span><br><span class="line">CssFontFaceRule       <span class="comment">// A rule for font faces in CSS.</span></span><br></pre></td></tr></table></figure><h1 id="考虑-尽量让代码看起来像普通的句子"><a href="#考虑-尽量让代码看起来像普通的句子" class="headerlink" title="考虑 尽量让代码看起来像普通的句子"></a>考虑 尽量让代码看起来像普通的句子</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// "If errors is empty..."</span></span><br><span class="line"><span class="keyword">if</span> (errors.isEmpty) ...</span><br><span class="line"></span><br><span class="line"><span class="comment">// "Hey, _subscription, cancel!"</span></span><br><span class="line">_subscription.cancel();</span><br><span class="line"></span><br><span class="line"><span class="comment">// "Get the monsters where the monster has claws."</span></span><br><span class="line">monsters.where((monster) =&gt; monster.hasClaws);</span><br></pre></td></tr></table></figure><h1 id="推荐-使用非命令式动词短语命名布尔类型的变量和属性"><a href="#推荐-使用非命令式动词短语命名布尔类型的变量和属性" class="headerlink" title="推荐 使用非命令式动词短语命名布尔类型的变量和属性"></a>推荐 使用非命令式动词短语命名布尔类型的变量和属性</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">isEmpty</span><br><span class="line">hasElements</span><br><span class="line">canClose</span><br><span class="line">closesWindow</span><br><span class="line">canShowPopup</span><br><span class="line">hasShownPopup</span><br></pre></td></tr></table></figure><h1 id="考虑-省略命名布尔参数的动词"><a href="#考虑-省略命名布尔参数的动词" class="headerlink" title="考虑 省略命名布尔参数的动词"></a>考虑 省略命名布尔参数的动词</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Isolate.spawn(entryPoint, message, paused: <span class="keyword">false</span>)</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">List</span>.from(elements, growable: <span class="keyword">true</span>)</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">RegExp</span>(pattern, caseSensitive: <span class="keyword">false</span>)</span><br></pre></td></tr></table></figure><h1 id="推荐-使用命令式动词短语来命名带有副作用的函数或者方法"><a href="#推荐-使用命令式动词短语来命名带有副作用的函数或者方法" class="headerlink" title="推荐 使用命令式动词短语来命名带有副作用的函数或者方法"></a>推荐 使用命令式动词短语来命名带有副作用的函数或者方法</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">list.add()</span><br><span class="line">queue.removeFirst()</span><br><span class="line"><span class="built_in">window</span>.refresh()</span><br><span class="line">connection.downloadData()</span><br></pre></td></tr></table></figure><h1 id="考虑-使用名词短语或者非命令式动词短语命名返回数据为主要功能的方法或者函数"><a href="#考虑-使用名词短语或者非命令式动词短语命名返回数据为主要功能的方法或者函数" class="headerlink" title="考虑 使用名词短语或者非命令式动词短语命名返回数据为主要功能的方法或者函数"></a>考虑 使用名词短语或者非命令式动词短语命名返回数据为主要功能的方法或者函数</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">list.elementAt(<span class="number">3</span>)</span><br><span class="line">string.codeUnitAt(<span class="number">4</span>)</span><br></pre></td></tr></table></figure><h1 id="推荐-使用-to-来命名把对象的状态转换到一个新的对象的函数"><a href="#推荐-使用-to-来命名把对象的状态转换到一个新的对象的函数" class="headerlink" title="推荐 使用 to___() 来命名把对象的状态转换到一个新的对象的函数"></a>推荐 使用 to___() 来命名把对象的状态转换到一个新的对象的函数</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">list.toSet()</span><br><span class="line">stackTrace.toString()</span><br><span class="line">dateTime.toLocal()</span><br></pre></td></tr></table></figure><h1 id="使用-as-来命名把原来对象转换为另外一种表现形式的函数"><a href="#使用-as-来命名把原来对象转换为另外一种表现形式的函数" class="headerlink" title="使用 as___() 来命名把原来对象转换为另外一种表现形式的函数"></a>使用 as___() 来命名把原来对象转换为另外一种表现形式的函数</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">list.asMap()</span><br><span class="line">bytes.asFloat32List()</span><br><span class="line">subscription.asFuture()</span><br></pre></td></tr></table></figure><h1 id="避免-在方法或者函数名称中描述参数"><a href="#避免-在方法或者函数名称中描述参数" class="headerlink" title="避免 在方法或者函数名称中描述参数"></a>避免 在方法或者函数名称中描述参数</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">list.add(element)</span><br><span class="line">map.remove(key)</span><br></pre></td></tr></table></figure><h1 id="避免-定义使用简单的方法可以替代的只有一个成员的抽象类"><a href="#避免-定义使用简单的方法可以替代的只有一个成员的抽象类" class="headerlink" title="避免 定义使用简单的方法可以替代的只有一个成员的抽象类"></a>避免 定义使用简单的方法可以替代的只有一个成员的抽象类</h1><p>和 Java 不同的是， Dart 支持一等方法（first-class functions）、闭包和优雅的语法来使用它们。 如果你需要的只是一个回调函数，使用方法即可。 如果你定义了一个类，里面只有一个名字无意义的函数， 例如 call 或者 invoke， 这种情况最好用方法替代</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="built_in">bool</span> Predicate(item);</span><br></pre></td></tr></table></figure><h1 id="避免-定义只包含静态成员的类"><a href="#避免-定义只包含静态成员的类" class="headerlink" title="避免 定义只包含静态成员的类"></a>避免 定义只包含静态成员的类</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">DateTime</span> mostRecent(<span class="built_in">List</span>&lt;<span class="built_in">DateTime</span>&gt; dates) &#123;</span><br><span class="line">  <span class="keyword">return</span> dates.reduce((a, b) =&gt; a.isAfter(b) ? a : b);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> _favoriteMammal = <span class="string">'weasel'</span>;</span><br></pre></td></tr></table></figure><h1 id="然后，这条规则并不是强制的。对于一些常量或者枚举型的类型，-使用类来把相关的成员组织到一起可能也是合理的。当然，-使用库也是同样合理的。"><a href="#然后，这条规则并不是强制的。对于一些常量或者枚举型的类型，-使用类来把相关的成员组织到一起可能也是合理的。当然，-使用库也是同样合理的。" class="headerlink" title="然后，这条规则并不是强制的。对于一些常量或者枚举型的类型， 使用类来把相关的成员组织到一起可能也是合理的。当然， 使用库也是同样合理的。"></a>然后，这条规则并不是强制的。对于一些常量或者枚举型的类型， 使用类来把相关的成员组织到一起可能也是合理的。当然， 使用库也是同样合理的。</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Color</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> red = <span class="string">'#f00'</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> green = <span class="string">'#0f0'</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> blue = <span class="string">'#00f'</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> black = <span class="string">'#000'</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> white = <span class="string">'#fff'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="推荐-使用构造函数而不是静态函数来创建对象"><a href="#推荐-使用构造函数而不是静态函数来创建对象" class="headerlink" title="推荐 使用构造函数而不是静态函数来创建对象"></a>推荐 使用构造函数而不是静态函数来创建对象</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">  <span class="built_in">num</span> x, y;</span><br><span class="line">  Point(<span class="keyword">this</span>.x, <span class="keyword">this</span>.y);</span><br><span class="line">  Point.polar(<span class="built_in">num</span> theta, <span class="built_in">num</span> radius)</span><br><span class="line">      : x = radius * math.cos(theta),</span><br><span class="line">        y = radius * math.sin(theta);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="要-使用-getter-来定义访问属性的操作"><a href="#要-使用-getter-来定义访问属性的操作" class="headerlink" title="要 使用 getter 来定义访问属性的操作"></a>要 使用 getter 来定义访问属性的操作</h1><p>如果函数的名字带有 get 前缀，或者是一个像 length 或者 size 这样 的名称，这种情况通常最好定义该函数为一个 getter。 当全部满足下面的条件的时候，你应该使用一个 getter：</p><p>没有参数。<br>返回一个值<br>没有副作用 调用一个 getter 不应该改变对象外部可见的状态 (内部缓存和延时初始化的状态可以发生变化) 如果对象的状态在多次调用同一个 getter 之间没有发生变化，则 多次调用同一个 getter 应该返回同一个值</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rectangle.width</span><br><span class="line">collection.isEmpty</span><br><span class="line">button.canShow</span><br></pre></td></tr></table></figure><h1 id="要-对于本质上为修改对象属性的函数要使用-setter"><a href="#要-对于本质上为修改对象属性的函数要使用-setter" class="headerlink" title="要 对于本质上为修改对象属性的函数要使用 setter"></a>要 对于本质上为修改对象属性的函数要使用 setter</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rectangle.width = <span class="number">3</span>;</span><br><span class="line">button.visible = <span class="keyword">false</span>;</span><br></pre></td></tr></table></figure><h1 id="不要-为-setter-指定返回类型"><a href="#不要-为-setter-指定返回类型" class="headerlink" title="不要 为 setter 指定返回类型"></a>不要 为 setter 指定返回类型</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> foo(Foo value) &#123;...&#125;</span><br></pre></td></tr></table></figure><h1 id="推荐-为私有成员提供类型"><a href="#推荐-为私有成员提供类型" class="headerlink" title="推荐 为私有成员提供类型"></a>推荐 为私有成员提供类型</h1><p>在公开的 API 上使用类型可以帮助使用你的库的用户。同样， 是私有代码上使用类型，可以帮助你的你的同事或者代码维护者。 另外，在私有成员上使用类型，对于将来自己查看代码 也有帮助。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CallChainVisitor</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> SourceVisitor _visitor;</span><br><span class="line">  <span class="keyword">final</span> Expression _target;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> _writeCall(Expression call) &#123; ... &#125;</span><br><span class="line"></span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="避免-在方法表达式上使用类型"><a href="#避免-在方法表达式上使用类型" class="headerlink" title="避免 在方法表达式上使用类型"></a>避免 在方法表达式上使用类型</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> names = people.map((person) =&gt; person.name);</span><br></pre></td></tr></table></figure><h1 id="避免-在没必要的地方使用-dynamic-类型"><a href="#避免-在没必要的地方使用-dynamic-类型" class="headerlink" title="避免 在没必要的地方使用 dynamic 类型"></a>避免 在没必要的地方使用 dynamic 类型</h1><p>在大部分 Dart 代码中，类型可以忽略，这样该参数类型会自动设置为 dynamic。 所以没必要手动指定类型为 dynamic 的， 只需要省略类型即可。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">lookUpOrDefault(<span class="built_in">String</span> name, <span class="built_in">Map</span> map, defaultValue) &#123;</span><br><span class="line">  <span class="keyword">var</span> value = map[name];</span><br><span class="line">  <span class="keyword">if</span> (value != <span class="keyword">null</span>) <span class="keyword">return</span> value;</span><br><span class="line">  <span class="keyword">return</span> defaultValue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="避免-使用-Function-类型"><a href="#避免-使用-Function-类型" class="headerlink" title="避免 使用 Function 类型"></a>避免 使用 Function 类型</h1><ul><li>正确</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">bool</span> isValidString(<span class="built_in">String</span> value, <span class="built_in">bool</span> predicate(<span class="built_in">String</span> string)) &#123; ... &#125;</span><br></pre></td></tr></table></figure><ul><li>错误</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">bool</span> isValidString(<span class="built_in">String</span> value, <span class="built_in">Function</span> predicate) &#123; ... &#125;</span><br></pre></td></tr></table></figure><h1 id="要-使用-Object-来替代-dynamic-来表示可以接受任意对象"><a href="#要-使用-Object-来替代-dynamic-来表示可以接受任意对象" class="headerlink" title="要 使用 Object 来替代 dynamic 来表示可以接受任意对象"></a>要 使用 Object 来替代 dynamic 来表示可以接受任意对象</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Accepts any object.</span></span><br><span class="line"><span class="keyword">void</span> log(<span class="built_in">Object</span> object) &#123;</span><br><span class="line">  <span class="built_in">print</span>(object.toString());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Only accepts bool or String, which can't be expressed in a type annotation.</span></span><br><span class="line"><span class="built_in">bool</span> convertToBool(arg) &#123;</span><br><span class="line">  <span class="keyword">if</span> (arg <span class="keyword">is</span> <span class="built_in">bool</span>) <span class="keyword">return</span> arg;</span><br><span class="line">  <span class="keyword">if</span> (arg <span class="keyword">is</span> <span class="built_in">String</span>) <span class="keyword">return</span> arg == <span class="string">'true'</span>;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> ArgumentError(<span class="string">'Cannot convert $arg to a bool.'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="考虑使用命名参数或者命名构造函数以及命名常量来清晰-的表明您的意图："><a href="#考虑使用命名参数或者命名构造函数以及命名常量来清晰-的表明您的意图：" class="headerlink" title="考虑使用命名参数或者命名构造函数以及命名常量来清晰 的表明您的意图："></a>考虑使用命名参数或者命名构造函数以及命名常量来清晰 的表明您的意图：</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Task.oneShot();</span><br><span class="line"><span class="keyword">new</span> Task.repeating();</span><br><span class="line"><span class="keyword">new</span> ListBox(scroll: <span class="keyword">true</span>, showScrollbars: <span class="keyword">true</span>);</span><br><span class="line"><span class="keyword">new</span> Button(ButtonState.enabled);</span><br></pre></td></tr></table></figure><h1 id="对于-setter-则没有这个要求，应为-setter-的名字已经明确的-表明了值所代表的意义"><a href="#对于-setter-则没有这个要求，应为-setter-的名字已经明确的-表明了值所代表的意义" class="headerlink" title="对于 setter 则没有这个要求，应为 setter 的名字已经明确的 表明了值所代表的意义"></a>对于 setter 则没有这个要求，应为 setter 的名字已经明确的 表明了值所代表的意义</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">listBox.canScroll = <span class="keyword">true</span>;</span><br><span class="line">button.isEnabled = <span class="keyword">false</span>;</span><br></pre></td></tr></table></figure><h1 id="避免-把用户想要忽略的参数放到位置可选参数的前列"><a href="#避免-把用户想要忽略的参数放到位置可选参数的前列" class="headerlink" title="避免 把用户想要忽略的参数放到位置可选参数的前列"></a>避免 把用户想要忽略的参数放到位置可选参数的前列</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>.fromCharCodes(<span class="built_in">Iterable</span>&lt;<span class="built_in">int</span>&gt; charCodes, [<span class="built_in">int</span> start = <span class="number">0</span>, <span class="built_in">int</span> end])</span><br><span class="line"></span><br><span class="line"><span class="built_in">DateTime</span>(<span class="built_in">int</span> year,</span><br><span class="line">    [<span class="built_in">int</span> month = <span class="number">1</span>,</span><br><span class="line">    <span class="built_in">int</span> day = <span class="number">1</span>,</span><br><span class="line">    <span class="built_in">int</span> hour = <span class="number">0</span>,</span><br><span class="line">    <span class="built_in">int</span> minute = <span class="number">0</span>,</span><br><span class="line">    <span class="built_in">int</span> second = <span class="number">0</span>,</span><br><span class="line">    <span class="built_in">int</span> millisecond = <span class="number">0</span>,</span><br><span class="line">    <span class="built_in">int</span> microsecond = <span class="number">0</span>])</span><br><span class="line"></span><br><span class="line"><span class="built_in">Duration</span>(</span><br><span class="line">    &#123;<span class="built_in">int</span> days: <span class="number">0</span>,</span><br><span class="line">    <span class="built_in">int</span> hours: <span class="number">0</span>,</span><br><span class="line">    <span class="built_in">int</span> minutes: <span class="number">0</span>,</span><br><span class="line">    <span class="built_in">int</span> seconds: <span class="number">0</span>,</span><br><span class="line">    <span class="built_in">int</span> milliseconds: <span class="number">0</span>,</span><br><span class="line">    <span class="built_in">int</span> microseconds: <span class="number">0</span>&#125;)</span><br></pre></td></tr></table></figure><h1 id="避免-使用强制无意义的参数"><a href="#避免-使用强制无意义的参数" class="headerlink" title="避免 使用强制无意义的参数"></a>避免 使用强制无意义的参数</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">string.substring(start)</span><br></pre></td></tr></table></figure><h1 id="要-使用包含开始位置并且不包含结束位置的范围参数"><a href="#要-使用包含开始位置并且不包含结束位置的范围参数" class="headerlink" title="要 使用包含开始位置并且不包含结束位置的范围参数"></a>要 使用包含开始位置并且不包含结束位置的范围参数</h1><p>如果你定义一个函数或者方法让用户从基于位置排序的集合中 选择一些元素，需要一个开始位置索引和结束位置索引分别制定开始 元素的位置以及结束元素的位置。结束位置通常是指 大于最后一个元素的位置的值。</p><p>核心库就是这样定义的，所以最好和核心库保持一致</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].sublist(<span class="number">1</span>, <span class="number">3</span>) <span class="comment">// [1, 2].</span></span><br><span class="line"><span class="string">'abcd'</span>.substring(<span class="number">1</span>, <span class="number">3</span>)     <span class="comment">// "bc".</span></span><br></pre></td></tr></table></figure><h1 id="不要-在自定义-操作符中判断-null"><a href="#不要-在自定义-操作符中判断-null" class="headerlink" title="不要 在自定义 == 操作符中判断 null"></a>不要 在自定义 == 操作符中判断 null</h1><p>语言规范表明了这种判断已经自动执行了，你的 == 自定义操作符只有当 右侧对象不为 null 的时候才会执行。</p><ul><li>正确</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> name;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">operator</span> ==(other) =&gt;</span><br><span class="line">      other <span class="keyword">is</span> Person &amp;&amp; name == other.name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>错误</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> name;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">operator</span> ==(other) =&gt;</span><br><span class="line">      other != <span class="keyword">null</span> &amp;&amp;</span><br><span class="line">      other <span class="keyword">is</span> Person &amp;&amp;</span><br><span class="line">      name == other.name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul><li><a href="https://www.dartlang.org/guides/language/effective-dart/design" target="_blank" rel="noopener">design</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;API 设计&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;环境&quot;&gt;&lt;a href=&quot;#环境&quot; class=&quot;heade
      
    
    </summary>
    
      <category term="Dart语言学习" scheme="https://blog.ducafecat.tech/categories/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="dart" scheme="https://blog.ducafecat.tech/tags/dart/"/>
    
  </entry>
  
  <entry>
    <title>Dart语言学习 - 37 代码分格 最佳实践 effective-usage</title>
    <link href="https://blog.ducafecat.tech/2019/01/28/dart/dart-37-effective-usage/"/>
    <id>https://blog.ducafecat.tech/2019/01/28/dart/dart-37-effective-usage/</id>
    <published>2019-01-28T07:30:46.000Z</published>
    <updated>2019-08-01T18:39:22.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>最佳实践</li></ul><h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><ul><li>Dart 2.1.0</li></ul><h1 id="使用相邻的字符串字面量定义来链接字符串"><a href="#使用相邻的字符串字面量定义来链接字符串" class="headerlink" title="使用相邻的字符串字面量定义来链接字符串"></a>使用相邻的字符串字面量定义来链接字符串</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">raiseAlarm(</span><br><span class="line">    <span class="string">'ERROR: Parts of the spaceship are on fire. Other '</span></span><br><span class="line">    <span class="string">'parts are overrun by martians. Unclear which are which.'</span>);</span><br></pre></td></tr></table></figure><h1 id="使用插值的形式来组合字符串和值"><a href="#使用插值的形式来组合字符串和值" class="headerlink" title="使用插值的形式来组合字符串和值"></a>使用插值的形式来组合字符串和值</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'Hello, $name! You are <span class="subst">$&#123;year - birth&#125;</span> years old.'</span>;</span><br></pre></td></tr></table></figure><h1 id="避免在字符串插值中使用多余的大括号"><a href="#避免在字符串插值中使用多余的大括号" class="headerlink" title="避免在字符串插值中使用多余的大括号"></a>避免在字符串插值中使用多余的大括号</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'Hi, $name!'</span></span><br><span class="line"><span class="string">"Wear your wildest $decade's outfit."</span></span><br><span class="line"><span class="string">'Wear your wildest <span class="subst">$&#123;decade&#125;</span>s outfit.'</span></span><br></pre></td></tr></table></figure><h1 id="尽可能的使用集合字面量来定义集合"><a href="#尽可能的使用集合字面量来定义集合" class="headerlink" title="尽可能的使用集合字面量来定义集合"></a>尽可能的使用集合字面量来定义集合</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> points = [];</span><br><span class="line"><span class="keyword">var</span> addresses = &#123;&#125;;</span><br></pre></td></tr></table></figure><h1 id="如果有必要还可以提供泛型类型"><a href="#如果有必要还可以提供泛型类型" class="headerlink" title="如果有必要还可以提供泛型类型"></a>如果有必要还可以提供泛型类型</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> points = &lt;Point&gt;[];</span><br><span class="line"><span class="keyword">var</span> addresses = &lt;<span class="built_in">String</span>, Address&gt;&#123;&#125;;</span><br></pre></td></tr></table></figure><h1 id="不要-使用-length-来判断集合是否为空"><a href="#不要-使用-length-来判断集合是否为空" class="headerlink" title="不要 使用 .length 来判断集合是否为空"></a>不要 使用 .length 来判断集合是否为空</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (lunchBox.isEmpty) <span class="keyword">return</span> <span class="string">'so hungry...'</span>;</span><br><span class="line"><span class="keyword">if</span> (words.isNotEmpty) <span class="keyword">return</span> words.join(<span class="string">' '</span>);</span><br></pre></td></tr></table></figure><h1 id="使用高阶（higher-order）函数来转换集合数据"><a href="#使用高阶（higher-order）函数来转换集合数据" class="headerlink" title="使用高阶（higher-order）函数来转换集合数据"></a>使用高阶（higher-order）函数来转换集合数据</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> aquaticNames = animals</span><br><span class="line">    .where((animal) =&gt; animal.isAquatic)</span><br><span class="line">    .map((animal) =&gt; animal.name);</span><br></pre></td></tr></table></figure><h1 id="避免-在-Iterable-forEach-中使用函数声明形式"><a href="#避免-在-Iterable-forEach-中使用函数声明形式" class="headerlink" title="避免 在 Iterable.forEach() 中使用函数声明形式"></a>避免 在 Iterable.forEach() 中使用函数声明形式</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> person <span class="keyword">in</span> people) &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>forEach() 方法通常在 JavaScript 中使用，原因是系统内置的 for-in 循环并不能提供期望的结果。 相反，在 Dart 中如果需要遍历一个集合，通常使用循环语句</p><h1 id="如果你只想在每个集合元素上调用一个已经定义好的函数，则可以使用-forEach-函数"><a href="#如果你只想在每个集合元素上调用一个已经定义好的函数，则可以使用-forEach-函数" class="headerlink" title="如果你只想在每个集合元素上调用一个已经定义好的函数，则可以使用 forEach() 函数"></a>如果你只想在每个集合元素上调用一个已经定义好的函数，则可以使用 forEach() 函数</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">people.forEach(<span class="built_in">print</span>);</span><br></pre></td></tr></table></figure><h1 id="要-用方法声明的形式来给方法起个名字"><a href="#要-用方法声明的形式来给方法起个名字" class="headerlink" title="要 用方法声明的形式来给方法起个名字"></a>要 用方法声明的形式来给方法起个名字</h1><ul><li>正确</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  localFunction() &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>错误示范</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="keyword">var</span> localFunction = () &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="不要-显式的把变量初始化为-null"><a href="#不要-显式的把变量初始化为-null" class="headerlink" title="不要 显式的把变量初始化为 null"></a>不要 显式的把变量初始化为 null</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> _nextId;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LazyId</span> </span>&#123;</span><br><span class="line">  <span class="built_in">int</span> _id;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">int</span> <span class="keyword">get</span> id &#123;</span><br><span class="line">    <span class="keyword">if</span> (_nextId == <span class="keyword">null</span>) _nextId = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (_id == <span class="keyword">null</span>) _id = _nextId++;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> _id;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在 Dart 中没有初始化的变量和域会自动的 初始化为 null。在语言基本就保证了该行为的可靠性。 在 Dart 中没有 “未初始化的内存”这个概念。所以添加 = null 是多余的。</p><h1 id="不要-创建没必要的-getter-和-setter"><a href="#不要-创建没必要的-getter-和-setter" class="headerlink" title="不要 创建没必要的 getter 和 setter"></a>不要 创建没必要的 getter 和 setter</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line"></span><br><span class="line"># 段落 <span class="number">1</span></span><br><span class="line"></span><br><span class="line">- 正确</span><br><span class="line"></span><br><span class="line">```dart</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Box</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> contents;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>错误</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Box</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> _contents;</span><br><span class="line">  <span class="keyword">get</span> contents =&gt; _contents;</span><br><span class="line">  <span class="keyword">set</span> contents(value) &#123;</span><br><span class="line">    _contents = value;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="推荐-使用-final-关键字来限定只读属性"><a href="#推荐-使用-final-关键字来限定只读属性" class="headerlink" title="推荐 使用 final 关键字来限定只读属性"></a>推荐 使用 final 关键字来限定只读属性</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Box</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> contents = [];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="考虑-用-gt-来实现只有一个单一返回语句的函数"><a href="#考虑-用-gt-来实现只有一个单一返回语句的函数" class="headerlink" title="考虑 用 =&gt; 来实现只有一个单一返回语句的函数"></a>考虑 用 =&gt; 来实现只有一个单一返回语句的函数</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">get</span> width =&gt; right - left;</span><br><span class="line"><span class="built_in">bool</span> ready(<span class="built_in">num</span> time) =&gt; minTime == <span class="keyword">null</span> || minTime &lt;= time;</span><br><span class="line">containsValue(<span class="built_in">String</span> value) =&gt; getValues().contains(value);</span><br></pre></td></tr></table></figure><h1 id="要-尽可能的在定义变量的时候初始化其值"><a href="#要-尽可能的在定义变量的时候初始化其值" class="headerlink" title="要 尽可能的在定义变量的时候初始化其值"></a>要 尽可能的在定义变量的时候初始化其值</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Folder</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> name;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">List</span>&lt;Document&gt; contents = [];</span><br><span class="line"></span><br><span class="line">  Folder(<span class="keyword">this</span>.name);</span><br><span class="line">  Folder.temp() : name = <span class="string">'temporary'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="要-尽可能的使用初始化形式"><a href="#要-尽可能的使用初始化形式" class="headerlink" title="要 尽可能的使用初始化形式"></a>要 尽可能的使用初始化形式</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">  <span class="built_in">num</span> x, y;</span><br><span class="line">  Point(<span class="keyword">this</span>.x, <span class="keyword">this</span>.y);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="要-把-super-调用放到构造函数初始化列表之后调用"><a href="#要-把-super-调用放到构造函数初始化列表之后调用" class="headerlink" title="要 把 super() 调用放到构造函数初始化列表之后调用"></a>要 把 super() 调用放到构造函数初始化列表之后调用</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">View(Style style, <span class="built_in">List</span> children)</span><br><span class="line">    : _children = children,</span><br><span class="line">      <span class="keyword">super</span>(style) &#123;</span><br></pre></td></tr></table></figure><h1 id="要-使用-rethrow-来重新抛出捕获的异常"><a href="#要-使用-rethrow-来重新抛出捕获的异常" class="headerlink" title="要 使用 rethrow 来重新抛出捕获的异常"></a>要 使用 rethrow 来重新抛出捕获的异常</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  somethingRisky();</span><br><span class="line">&#125; <span class="keyword">catch</span>(e) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!canHandle(e)) <span class="keyword">rethrow</span>;</span><br><span class="line">  handle(e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="推荐-使用-async-await-而不是直接使用底层的特性"><a href="#推荐-使用-async-await-而不是直接使用底层的特性" class="headerlink" title="推荐 使用 async/await 而不是直接使用底层的特性"></a>推荐 使用 async/await 而不是直接使用底层的特性</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Future&lt;<span class="built_in">bool</span>&gt; doAsyncComputation() <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> result = <span class="keyword">await</span> longRunningCalculation();</span><br><span class="line">    <span class="keyword">return</span> verifyResult(result.summary);</span><br><span class="line">  &#125; <span class="keyword">catch</span>(e) &#123;</span><br><span class="line">    log.error(e);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="不要-在没有有用效果的情况下使用-async"><a href="#不要-在没有有用效果的情况下使用-async" class="headerlink" title="不要 在没有有用效果的情况下使用 async"></a>不要 在没有有用效果的情况下使用 async</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Future afterTwoThings(Future first, second) &#123;</span><br><span class="line">  <span class="keyword">return</span> Future.wait([first, second]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul><li><a href="https://www.dartlang.org/guides/language/effective-dart/usage" target="_blank" rel="noopener">usage</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;最佳实践&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;环境&quot;&gt;&lt;a href=&quot;#环境&quot; class=&quot;headerl
      
    
    </summary>
    
      <category term="Dart语言学习" scheme="https://blog.ducafecat.tech/categories/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="dart" scheme="https://blog.ducafecat.tech/tags/dart/"/>
    
  </entry>
  
  <entry>
    <title>Dart语言学习 - 36 - 代码分格 文档 effective-documentation</title>
    <link href="https://blog.ducafecat.tech/2019/01/28/dart/dart-36-effective-documentation/"/>
    <id>https://blog.ducafecat.tech/2019/01/28/dart/dart-36-effective-documentation/</id>
    <published>2019-01-28T07:15:00.000Z</published>
    <updated>2019-08-01T18:39:22.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>文档分格</li></ul><h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><ul><li>Dart 2.1.0</li></ul><h1 id="按照句子的格式来格式化评论"><a href="#按照句子的格式来格式化评论" class="headerlink" title="按照句子的格式来格式化评论"></a>按照句子的格式来格式化评论</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Not if there is nothing before it.</span></span><br><span class="line"><span class="keyword">if</span> (_chunks.isEmpty) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br></pre></td></tr></table></figure><p>如果第一个单词不是大小写相关的标识符，则首字母要大写。使用标点符号结尾 （句号、感叹号、问号）。对于所有的注释都是这样要求的：文档注释、 行内注释、甚至 TODO 注释。即使是一句话的一半也需要如此。</p><h1 id="使用块注释作为解释说明"><a href="#使用块注释作为解释说明" class="headerlink" title="使用块注释作为解释说明"></a>使用块注释作为解释说明</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">greet(name) &#123;</span><br><span class="line">  <span class="comment">// Assume we have a valid name.</span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'Hi, $name!'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="使用-文档注释来注释成员和类型"><a href="#使用-文档注释来注释成员和类型" class="headerlink" title="使用 /// 文档注释来注释成员和类型"></a>使用 /// 文档注释来注释成员和类型</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="markdown">/// The number of characters in this chunk when unsplit.</span></span></span><br><span class="line"><span class="built_in">int</span> <span class="keyword">get</span> length =&gt; ...</span><br></pre></td></tr></table></figure><h1 id="把第一个语句定义为一个段落"><a href="#把第一个语句定义为一个段落" class="headerlink" title="把第一个语句定义为一个段落"></a>把第一个语句定义为一个段落</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="markdown">/// Defines </span>a<span class="markdown"> flag.</span></span></span><br><span class="line"><span class="comment"><span class="markdown">///</span></span></span><br><span class="line"><span class="comment"><span class="markdown">/// Throws </span>an<span class="markdown"> [ArgumentError] if there is already </span>an<span class="markdown"> option named [name] or</span></span></span><br><span class="line"><span class="comment"><span class="markdown">/// there is already </span>an<span class="markdown"> option using abbreviation [abbr]. Returns </span>the<span class="markdown"> new flag.</span></span></span><br><span class="line">Flag addFlag(<span class="built_in">String</span> name, <span class="built_in">String</span> abbr) &#123; ... &#125;</span><br></pre></td></tr></table></figure><p>注释文档中的第一个段落应该是简洁的、面向用户的注释。例如下面的示例， 通常不是一个完成的语句。</p><h1 id="用第三人称来开始函数或者方法的文档注释"><a href="#用第三人称来开始函数或者方法的文档注释" class="headerlink" title="用第三人称来开始函数或者方法的文档注释"></a>用第三人称来开始函数或者方法的文档注释</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="markdown">/// Returns <span class="code">`true`</span> if every element satisfies </span>the<span class="markdown"> [predicate].</span></span></span><br><span class="line"><span class="built_in">bool</span> all(<span class="built_in">bool</span> predicate(T element)) &#123; ... &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="markdown">/// Starts </span>the<span class="markdown"> stopwatch if not already running.</span></span></span><br><span class="line"><span class="keyword">void</span> start() &#123; ... &#125;</span><br></pre></td></tr></table></figure><h1 id="使用名词短语来开始变量、getter、setter-的注释"><a href="#使用名词短语来开始变量、getter、setter-的注释" class="headerlink" title="使用名词短语来开始变量、getter、setter 的注释"></a>使用名词短语来开始变量、getter、setter 的注释</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="markdown">/// The current day of </span>the<span class="markdown"> week, where <span class="code">`0`</span> is Sunday.</span></span></span><br><span class="line"><span class="built_in">int</span> weekday;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="markdown">/// The number of checked buttons on </span>the<span class="markdown"> page.</span></span></span><br><span class="line"><span class="built_in">int</span> <span class="keyword">get</span> checkedCount &#123; ... &#125;</span><br></pre></td></tr></table></figure><p>注释文档应该表述这个属性是什么。虽然 getter 函数会做些计算， 但是也要求这样，调用者关心的是其结果而 不是如何计算的</p><h1 id="使用名词短语来开始库和类型注释"><a href="#使用名词短语来开始库和类型注释" class="headerlink" title="使用名词短语来开始库和类型注释"></a>使用名词短语来开始库和类型注释</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="markdown">/// A chunk of non-breaking output text terminated by </span>a<span class="markdown"> hard or soft newline.</span></span></span><br><span class="line"><span class="comment"><span class="markdown">///</span></span></span><br><span class="line"><span class="comment"><span class="markdown">/// ...</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Chunk</span> </span>&#123; ... &#125;</span><br></pre></td></tr></table></figure><p>在程序中，类的注释通常是最重要的文档。 类的注释描述了类型的不变性、介绍其使用的术语、 提供类成员使用的上下文信息。为类提供一些注释可以让 其他类成员的注释更易于理解和编写。</p><h1 id="在文档注释中添加示例代码"><a href="#在文档注释中添加示例代码" class="headerlink" title="在文档注释中添加示例代码"></a>在文档注释中添加示例代码</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="markdown">/// Returns </span>the<span class="markdown"> lesser of two numbers.</span></span></span><br><span class="line"><span class="comment"><span class="markdown">///</span></span></span><br><span class="line"><span class="comment"><span class="markdown">///     min(5, 3); // 3.</span></span></span><br><span class="line"><span class="built_in">num</span> min(<span class="built_in">num</span> a, <span class="built_in">num</span> b) &#123; ... &#125;</span><br></pre></td></tr></table></figure><p>人类非常擅长从示例中抽象出实质内容，所以即使提供 一行最简单的示例代码都可以让 API 更易于理解。</p><h1 id="而-Dart-把参数、返回值等描述放到文档注释中，并使用方括号来引用-以及高亮这些参数和返回值"><a href="#而-Dart-把参数、返回值等描述放到文档注释中，并使用方括号来引用-以及高亮这些参数和返回值" class="headerlink" title="而 Dart 把参数、返回值等描述放到文档注释中，并使用方括号来引用 以及高亮这些参数和返回值"></a>而 Dart 把参数、返回值等描述放到文档注释中，并使用方括号来引用 以及高亮这些参数和返回值</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="markdown">/// Defines </span>a<span class="markdown"> flag.</span></span></span><br><span class="line"><span class="comment"><span class="markdown">///</span></span></span><br><span class="line"><span class="comment"><span class="markdown">/// Throws </span>an<span class="markdown"> [ArgumentError] if there is already </span>an<span class="markdown"> option named [name] or</span></span></span><br><span class="line"><span class="comment"><span class="markdown">/// there is already </span>an<span class="markdown"> option using abbreviation [abbr]. Returns </span>the<span class="markdown"> new flag.</span></span></span><br><span class="line">Flag addFlag(<span class="built_in">String</span> name, <span class="built_in">String</span> abbr) &#123; ... &#125;</span><br></pre></td></tr></table></figure><h1 id="把注释文档放到注解之前"><a href="#把注释文档放到注解之前" class="headerlink" title="把注释文档放到注解之前"></a>把注释文档放到注解之前</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="markdown">/// <span class="emphasis">_Deprecated: Use [newMethod] instead._</span></span></span></span><br><span class="line"><span class="meta">@deprecated</span></span><br><span class="line">oldMethod();</span><br></pre></td></tr></table></figure><h1 id="使用-“this”-而不是-“the”-来引用实例成员"><a href="#使用-“this”-而不是-“the”-来引用实例成员" class="headerlink" title="使用 “this” 而不是 “the” 来引用实例成员"></a>使用 “this” 而不是 “the” 来引用实例成员</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Box</span> </span>&#123;</span><br><span class="line">  <span class="comment"><span class="markdown">/// The value this wraps.</span></span></span><br><span class="line">  <span class="keyword">var</span> _value;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="markdown">/// True if this box contains </span>a<span class="markdown"> value.</span></span></span><br><span class="line">  <span class="built_in">bool</span> <span class="keyword">get</span> hasValue =&gt; _value != <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul><li><a href="https://www.dartlang.org/guides/language/effective-dart/documentation" target="_blank" rel="noopener">documentation</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;文档分格&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;环境&quot;&gt;&lt;a href=&quot;#环境&quot; class=&quot;headerl
      
    
    </summary>
    
      <category term="Dart语言学习" scheme="https://blog.ducafecat.tech/categories/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="dart" scheme="https://blog.ducafecat.tech/tags/dart/"/>
    
  </entry>
  
  <entry>
    <title>Dart语言学习 - 35 - 代码分格 effective style</title>
    <link href="https://blog.ducafecat.tech/2019/01/28/dart/dart-35-effective-style/"/>
    <id>https://blog.ducafecat.tech/2019/01/28/dart/dart-35-effective-style/</id>
    <published>2019-01-28T06:43:12.000Z</published>
    <updated>2019-08-01T18:39:22.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>代码分格</li></ul><h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><ul><li>Dart 2.1.0</li></ul><h1 id="使用-UpperCamelCase-风格来命名类型名称"><a href="#使用-UpperCamelCase-风格来命名类型名称" class="headerlink" title="使用 UpperCamelCase 风格来命名类型名称"></a>使用 UpperCamelCase 风格来命名类型名称</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SliderMenu</span> </span>&#123; ... &#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HttpRequest</span> </span>&#123; ... &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">bool</span> Predicate&lt;T&gt;(T value);</span><br></pre></td></tr></table></figure><h1 id="使用-lowercase-with-underscores-风格来命名库和文件名名字"><a href="#使用-lowercase-with-underscores-风格来命名库和文件名名字" class="headerlink" title="使用 lowercase_with_underscores 风格来命名库和文件名名字"></a>使用 lowercase_with_underscores 风格来命名库和文件名名字</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span> peg_parser.source_scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">'file_system.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'slider_menu.dart'</span>;</span><br></pre></td></tr></table></figure><h1 id="使用-lowercase-with-underscores-风格命名导入的前缀"><a href="#使用-lowercase-with-underscores-风格命名导入的前缀" class="headerlink" title="使用 lowercase_with_underscores 风格命名导入的前缀"></a>使用 lowercase_with_underscores 风格命名导入的前缀</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'dart:json'</span> <span class="keyword">as</span> json;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'dart:math'</span> <span class="keyword">as</span> math;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:javascript_utils/javascript_utils.dart'</span> <span class="keyword">as</span> js_utils;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:js/js.dart'</span> <span class="keyword">as</span> js;</span><br></pre></td></tr></table></figure><h1 id="使用-lowerCamelCase-风格来命名其他的标识符"><a href="#使用-lowerCamelCase-风格来命名其他的标识符" class="headerlink" title="使用 lowerCamelCase 风格来命名其他的标识符"></a>使用 lowerCamelCase 风格来命名其他的标识符</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> item;</span><br><span class="line"></span><br><span class="line">HttpRequest httpRequest;</span><br><span class="line"></span><br><span class="line">align(clearItems) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="使用-lowerCamelCase-来命名常量"><a href="#使用-lowerCamelCase-来命名常量" class="headerlink" title="使用 lowerCamelCase 来命名常量"></a>使用 lowerCamelCase 来命名常量</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> pi = <span class="number">3.14</span>;</span><br><span class="line"><span class="keyword">const</span> defaultTimeout = <span class="number">1000</span>;</span><br><span class="line"><span class="keyword">final</span> urlScheme = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'^([a-z]+):'</span>);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dice</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">final</span> numberGenerator = <span class="keyword">new</span> Random();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="把-“dart-”-导入语句放到其他导入语句之前"><a href="#把-“dart-”-导入语句放到其他导入语句之前" class="headerlink" title="把 “dart:” 导入语句放到其他导入语句之前"></a>把 “dart:” 导入语句放到其他导入语句之前</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'dart:async'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'dart:html'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:bar/bar.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:foo/foo.dart'</span>;</span><br></pre></td></tr></table></figure><h1 id="把-“package-”-导入语句放到相对导入语句之前"><a href="#把-“package-”-导入语句放到相对导入语句之前" class="headerlink" title="把 “package:” 导入语句放到相对导入语句之前"></a>把 “package:” 导入语句放到相对导入语句之前</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:bar/bar.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:foo/foo.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">'a.dart'</span>;</span><br></pre></td></tr></table></figure><h1 id="把”第三方”-“package-”-导入语句放到其他语句之前。"><a href="#把”第三方”-“package-”-导入语句放到其他语句之前。" class="headerlink" title="把”第三方” “package:” 导入语句放到其他语句之前。"></a>把”第三方” “package:” 导入语句放到其他语句之前。</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:bar/bar.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:foo/foo.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:myapp/io.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:myapp/util.dart'</span>;</span><br></pre></td></tr></table></figure><h1 id="把导出（export）语句放到所有导入语句之后的部分"><a href="#把导出（export）语句放到所有导入语句之后的部分" class="headerlink" title="把导出（export）语句放到所有导入语句之后的部分"></a>把导出（export）语句放到所有导入语句之后的部分</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'src/error.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'src/string_source.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="string">'src/error.dart'</span>;</span><br></pre></td></tr></table></figure><h1 id="按照字母顺序来排序每个部分中的语句"><a href="#按照字母顺序来排序每个部分中的语句" class="headerlink" title="按照字母顺序来排序每个部分中的语句"></a>按照字母顺序来排序每个部分中的语句</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:bar/bar.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:foo/bar.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">'a.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'a/b.dart'</span>;</span><br></pre></td></tr></table></figure><h1 id="在所有的控制结构上使用大括号"><a href="#在所有的控制结构上使用大括号" class="headerlink" title="在所有的控制结构上使用大括号"></a>在所有的控制结构上使用大括号</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'sanity'</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'opposite day!'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="当只有-if-语句没有-else-语句并且-所有语句可以放到一行的时候，可以省略大括号"><a href="#当只有-if-语句没有-else-语句并且-所有语句可以放到一行的时候，可以省略大括号" class="headerlink" title="当只有 if 语句没有 else 语句并且 所有语句可以放到一行的时候，可以省略大括号"></a>当只有 if 语句没有 else 语句并且 所有语句可以放到一行的时候，可以省略大括号</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (arg == <span class="keyword">null</span>) <span class="keyword">return</span> defaultValue;</span><br></pre></td></tr></table></figure><h1 id="通常用于当条件满足的时候就跳出-if-或者-返回的情况。-但是对于其他表达式，如果可以放到一行中，-也可以这样使用"><a href="#通常用于当条件满足的时候就跳出-if-或者-返回的情况。-但是对于其他表达式，如果可以放到一行中，-也可以这样使用" class="headerlink" title="通常用于当条件满足的时候就跳出 if 或者 返回的情况。 但是对于其他表达式，如果可以放到一行中， 也可以这样使用"></a>通常用于当条件满足的时候就跳出 if 或者 返回的情况。 但是对于其他表达式，如果可以放到一行中， 也可以这样使用</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (parameter == <span class="keyword">null</span>) parameter = defaultValue;</span><br></pre></td></tr></table></figure><h1 id="在每个语句或者声明后面添加一个空行"><a href="#在每个语句或者声明后面添加一个空行" class="headerlink" title="在每个语句或者声明后面添加一个空行"></a>在每个语句或者声明后面添加一个空行</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">main() &#123;</span><br><span class="line">  first(statement);</span><br><span class="line">  second(statement);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">anotherDeclaration() &#123; ... &#125;</span><br></pre></td></tr></table></figure><h1 id="在关键字-operator-后面添加一个空格"><a href="#在关键字-operator-后面添加一个空格" class="headerlink" title="在关键字 operator 后面添加一个空格"></a>在关键字 operator 后面添加一个空格</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">bool</span> <span class="keyword">operator</span> ==(other) =&gt; ...;</span><br></pre></td></tr></table></figure><h1 id="在二元和三元操作符之间添加空格"><a href="#在二元和三元操作符之间添加空格" class="headerlink" title="在二元和三元操作符之间添加空格"></a>在二元和三元操作符之间添加空格</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">average = (a + b) / <span class="number">2</span>;</span><br><span class="line">largest = a &gt; b ? a : b;</span><br><span class="line"><span class="keyword">if</span> (obj <span class="keyword">is</span>! SomeType) <span class="built_in">print</span>(<span class="string">'not SomeType'</span>);</span><br><span class="line">optional([parameter = defaultValue]) &#123; ... &#125;</span><br></pre></td></tr></table></figure><h1 id="不要-在一元操作符前后添加空格"><a href="#不要-在一元操作符前后添加空格" class="headerlink" title="不要 在一元操作符前后添加空格"></a>不要 在一元操作符前后添加空格</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">!condition</span><br><span class="line">index++</span><br></pre></td></tr></table></figure><h1 id="把开始的大括号-放到同一行上"><a href="#把开始的大括号-放到同一行上" class="headerlink" title="把开始的大括号 ({) 放到同一行上"></a>把开始的大括号 ({) 放到同一行上</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> </span>&#123;</span><br><span class="line">  method() &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">      <span class="comment">// ...</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="在函数和方法体的-之前添加一个空格"><a href="#在函数和方法体的-之前添加一个空格" class="headerlink" title="在函数和方法体的 { 之前添加一个空格"></a>在函数和方法体的 { 之前添加一个空格</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">getEmptyFn(a) &#123;</span><br><span class="line">  <span class="keyword">return</span> () &#123;&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="把三元操作符放到多个表达式的下一行开始位置"><a href="#把三元操作符放到多个表达式的下一行开始位置" class="headerlink" title="把三元操作符放到多个表达式的下一行开始位置"></a>把三元操作符放到多个表达式的下一行开始位置</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> someCondition</span><br><span class="line">    ? whenTrue</span><br><span class="line">    : whenFalse;</span><br></pre></td></tr></table></figure><h1 id="把-放到下一行开头当表达式换行的时候"><a href="#把-放到下一行开头当表达式换行的时候" class="headerlink" title="把 . 放到下一行开头当表达式换行的时候"></a>把 . 放到下一行开头当表达式换行的时候</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">someVeryLongVariable.withAVeryLongProperty</span><br><span class="line">    .aMethodOnThatObject();</span><br></pre></td></tr></table></figure><h1 id="把构造函数初始化列表中的每个参数和值都放到同一行"><a href="#把构造函数初始化列表中的每个参数和值都放到同一行" class="headerlink" title="把构造函数初始化列表中的每个参数和值都放到同一行"></a>把构造函数初始化列表中的每个参数和值都放到同一行</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">MyClass()</span><br><span class="line">    : firstField = <span class="string">'some value'</span>,</span><br><span class="line">      secondField = <span class="string">'another'</span>,</span><br><span class="line">      thirdField = <span class="string">'last'</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="当无法在一行写完集合的时候，把每个元素都用集合定义的方式来表达"><a href="#当无法在一行写完集合的时候，把每个元素都用集合定义的方式来表达" class="headerlink" title="当无法在一行写完集合的时候，把每个元素都用集合定义的方式来表达"></a>当无法在一行写完集合的时候，把每个元素都用集合定义的方式来表达</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mapInsideList([</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">'a'</span>: <span class="string">'b'</span>,</span><br><span class="line">    <span class="string">'c'</span>: <span class="string">'d'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">'a'</span>: <span class="string">'b'</span>,</span><br><span class="line">    <span class="string">'c'</span>: <span class="string">'d'</span></span><br><span class="line">  &#125;,</span><br><span class="line">]);</span><br></pre></td></tr></table></figure><h1 id="用两个空格来缩进代码块和集合体"><a href="#用两个空格来缩进代码块和集合体" class="headerlink" title="用两个空格来缩进代码块和集合体"></a>用两个空格来缩进代码块和集合体</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (condition) &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'hi'</span>);</span><br><span class="line"></span><br><span class="line">  [</span><br><span class="line">    long,</span><br><span class="line">    list,</span><br><span class="line">    literal</span><br><span class="line">  ];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="缩进-switch-case-两个空格，-case-体四个空格"><a href="#缩进-switch-case-两个空格，-case-体四个空格" class="headerlink" title="缩进 switch case 两个空格， case 体四个空格"></a>缩进 switch case 两个空格， case 体四个空格</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> (fruit) &#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="string">'apple'</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'delish'</span>);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">case</span> <span class="string">'durian'</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'stinky'</span>);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="只少使用两个空格来缩进多行函数级联调用"><a href="#只少使用两个空格来缩进多行函数级联调用" class="headerlink" title="只少使用两个空格来缩进多行函数级联调用"></a>只少使用两个空格来缩进多行函数级联调用</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">buffer</span><br><span class="line">  ..write(<span class="string">'Hello, '</span>)</span><br><span class="line">  ..write(name)</span><br><span class="line">  ..write(<span class="string">'!'</span>);</span><br></pre></td></tr></table></figure><h1 id="使用四个空格来缩进同一行的换行"><a href="#使用四个空格来缩进同一行的换行" class="headerlink" title="使用四个空格来缩进同一行的换行"></a>使用四个空格来缩进同一行的换行</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">someLongObject.aReallyLongMethodName(longArg, anotherLongArg,</span><br><span class="line">    wrappedToNextLine);</span><br><span class="line"></span><br><span class="line">bobLikes() =&gt;</span><br><span class="line">    isDeepFried || (hasPieCrust &amp;&amp; !vegan) || containsBacon;</span><br></pre></td></tr></table></figure><h1 id="当表达式包含多行函数或者-集合声明定义的时候除外"><a href="#当表达式包含多行函数或者-集合声明定义的时候除外" class="headerlink" title="当表达式包含多行函数或者 集合声明定义的时候除外"></a>当表达式包含多行函数或者 集合声明定义的时候除外</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Future.delayed(<span class="keyword">const</span> <span class="built_in">Duration</span>(seconds: <span class="number">1</span>), () &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'I am a callback'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">args.addAll([</span><br><span class="line">  <span class="string">'--mode'</span>,</span><br><span class="line">  <span class="string">'release'</span>,</span><br><span class="line">  <span class="string">'--checked'</span></span><br><span class="line">]);</span><br></pre></td></tr></table></figure><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul><li><a href="https://www.dartlang.org/guides/language/effective-dart/style" target="_blank" rel="noopener">style</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;代码分格&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;环境&quot;&gt;&lt;a href=&quot;#环境&quot; class=&quot;headerl
      
    
    </summary>
    
      <category term="Dart语言学习" scheme="https://blog.ducafecat.tech/categories/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="dart" scheme="https://blog.ducafecat.tech/tags/dart/"/>
    
  </entry>
  
  <entry>
    <title>Dart语言学习 - 34 注解 Metadata</title>
    <link href="https://blog.ducafecat.tech/2019/01/22/dart/dart-34-metadata/"/>
    <id>https://blog.ducafecat.tech/2019/01/22/dart/dart-34-metadata/</id>
    <published>2019-01-21T16:15:56.000Z</published>
    <updated>2019-08-01T18:39:22.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>了解内置注解 <code>deprecated</code> <code>override</code></li><li>自定义注解，并使用反射实现</li></ul><h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><ul><li>Dart 2.1.0</li></ul><h1 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h1><p>官方称之为 <code>元数据</code> , 其实在 <code>java</code> 里就是注解</p><p>简化代码编写，方便阅读，和重用</p><h1 id="内置-deprecated"><a href="#内置-deprecated" class="headerlink" title="内置 deprecated"></a>内置 <code>deprecated</code></h1><p>用来注解 不建议使用、老旧的 成员对象</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Television</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@deprecated</span></span><br><span class="line">  <span class="keyword">void</span> activate() &#123;</span><br><span class="line">    turnOn();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> turnOn() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'on!'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="keyword">var</span> t = <span class="keyword">new</span> Television();</span><br><span class="line">  t.activate();</span><br><span class="line">  t.turnOn();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="内置-override"><a href="#内置-override" class="headerlink" title="内置 override"></a>内置 <code>override</code></h1><p>表明你的函数是想覆写超类的一个函数</p><p>超类就是被你集成的父类</p><p>下面的代码中父类是 <code>Object</code></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  noSuchMethod(Invocation mirror) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'没有找到方法'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="keyword">dynamic</span> a = <span class="keyword">new</span> A();</span><br><span class="line">  a.message();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="内置-proxy"><a href="#内置-proxy" class="headerlink" title="内置 proxy"></a>内置 <code>proxy</code></h1><p>注解来避免警告信息</p><p>在 Dart2 中已经被标记为过时老旧</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@proxy</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">  noSuchMethod(Invocation mirror) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'没有找到方法'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="keyword">dynamic</span> a = <span class="keyword">new</span> A();</span><br><span class="line">  a.say();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="自定义注解"><a href="#自定义注解" class="headerlink" title="自定义注解"></a>自定义注解</h1><p>使用反射可以在运行时获取元数据信息</p><p>比如服务端的控制器开发</p><p>下面的代码 展示了如何在反射中读取 <code>metadata</code> 信息</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'dart:mirrors'</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Todo</span>(<span class="string">'seth'</span>, <span class="string">'make this do something'</span>)</span><br><span class="line"><span class="keyword">void</span> doSomething() &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'do something'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Todo</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> who;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> what;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> Todo(<span class="keyword">this</span>.who, <span class="keyword">this</span>.what);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  currentMirrorSystem().libraries.forEach((uri, lib) &#123;</span><br><span class="line">    <span class="comment">// print('lib: $&#123;uri&#125;');</span></span><br><span class="line">    lib.declarations.forEach((s, decl) &#123;</span><br><span class="line">      <span class="comment">// print('decl: $&#123;s&#125;');</span></span><br><span class="line">      decl.metadata.where((m) =&gt; m.reflectee <span class="keyword">is</span> Todo).forEach((m) &#123;</span><br><span class="line">        <span class="keyword">var</span> anno = m.reflectee <span class="keyword">as</span> Todo;</span><br><span class="line">        <span class="keyword">if</span> (decl <span class="keyword">is</span> MethodMirror) &#123;</span><br><span class="line">          <span class="built_in">print</span>(<span class="string">'Todo(<span class="subst">$&#123;anno.who&#125;</span>, <span class="subst">$&#123;anno.what&#125;</span>)'</span>);</span><br><span class="line">          ((decl <span class="keyword">as</span> MethodMirror).owner <span class="keyword">as</span> LibraryMirror).invoke(s, []);</span><br><span class="line">        &#125;</span><br><span class="line">        ;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><ul><li><a href="https://github.com/ducafecat/dart-learn/tree/master/34-%E5%AA%92%E4%BD%93%E4%BF%A1%E6%81%AF" target="_blank" rel="noopener">34-媒体信息</a></li></ul><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul><li><a href="https://www.dartlang.org/guides/language/language-tour#metadata" target="_blank" rel="noopener">metadata</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;了解内置注解 &lt;code&gt;deprecated&lt;/code&gt; &lt;code&gt;override&lt;/code&gt;&lt;/li
      
    
    </summary>
    
      <category term="Dart语言学习" scheme="https://blog.ducafecat.tech/categories/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="dart" scheme="https://blog.ducafecat.tech/tags/dart/"/>
    
  </entry>
  
  <entry>
    <title>Dart语言学习 - 33 类型信息 typedef</title>
    <link href="https://blog.ducafecat.tech/2019/01/21/dart/dart-33-typedef/"/>
    <id>https://blog.ducafecat.tech/2019/01/21/dart/dart-33-typedef/</id>
    <published>2019-01-20T16:21:06.000Z</published>
    <updated>2019-08-01T18:39:22.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>typedef 使用</li></ul><h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><ul><li>Dart 2.1.0</li></ul><h1 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h1><p>typedef 用来保存函数的信息，未来可能会保存类信息。</p><h1 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a>示例代码</h1><ul><li>采用 <code>typedef</code></li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义函数类型</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">int</span> Compare(<span class="built_in">Object</span> a, <span class="built_in">Object</span> b);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义排序类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SortedCollection</span> </span>&#123;</span><br><span class="line">  Compare compare;</span><br><span class="line">  <span class="comment">// 构造时传入函数</span></span><br><span class="line">  SortedCollection(<span class="keyword">this</span>.compare);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义排序函数</span></span><br><span class="line"><span class="built_in">int</span> sort(<span class="built_in">Object</span> a, <span class="built_in">Object</span> b) =&gt; <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 程序入口</span></span><br><span class="line">main() &#123;</span><br><span class="line">  <span class="comment">// 实例化传入</span></span><br><span class="line">  SortedCollection coll = <span class="keyword">new</span> SortedCollection(sort);</span><br><span class="line">  <span class="comment">// 类型检查</span></span><br><span class="line">  <span class="keyword">assert</span>(coll.compare <span class="keyword">is</span> <span class="built_in">Function</span>);</span><br><span class="line">  <span class="keyword">assert</span>(coll.compare <span class="keyword">is</span> Compare);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>未采用 <code>typedef</code></li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SortedCollection</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 函数对象</span></span><br><span class="line">  <span class="built_in">Function</span> compare;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 定义函数</span></span><br><span class="line">  SortedCollection(<span class="built_in">int</span> f(<span class="built_in">Object</span> a, <span class="built_in">Object</span> b)) &#123;</span><br><span class="line">    compare = f;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 生命函数</span></span><br><span class="line"><span class="built_in">int</span> sort(<span class="built_in">Object</span> a, <span class="built_in">Object</span> b) =&gt; <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">main() &#123;</span><br><span class="line">  <span class="comment">// 实例化</span></span><br><span class="line">  SortedCollection coll = <span class="keyword">new</span> SortedCollection(sort);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 我们只知道 compare 是一个 Function 类型，</span></span><br><span class="line">  <span class="comment">// 但是不知道具体是何种 Function 类型？</span></span><br><span class="line">  <span class="keyword">assert</span>(coll.compare <span class="keyword">is</span> <span class="built_in">Function</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>区别就是 <code>typedef</code> 编辑器会提示函数信息</p><h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><ul><li><a href="https://github.com/ducafecat/dart-learn/tree/master/33-%E7%B1%BB%E5%9E%8B%E4%BF%A1%E6%81%AF" target="_blank" rel="noopener">33-类型信息</a></li></ul><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul><li><a href="https://www.dartlang.org/guides/language/language-tour#typedefs" target="_blank" rel="noopener">typedefs</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;typedef 使用&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;环境&quot;&gt;&lt;a href=&quot;#环境&quot; class=&quot;h
      
    
    </summary>
    
      <category term="Dart语言学习" scheme="https://blog.ducafecat.tech/categories/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="dart" scheme="https://blog.ducafecat.tech/tags/dart/"/>
    
  </entry>
  
  <entry>
    <title>Dart语言学习 - 32 线程隔离 isolate</title>
    <link href="https://blog.ducafecat.tech/2019/01/20/dart/dart-32-isolates/"/>
    <id>https://blog.ducafecat.tech/2019/01/20/dart/dart-32-isolates/</id>
    <published>2019-01-19T16:52:55.000Z</published>
    <updated>2019-08-01T18:39:22.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>了解线程隔离</li></ul><h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><ul><li>Dart 2.1.0</li></ul><h1 id="isolate"><a href="#isolate" class="headerlink" title="isolate"></a>isolate</h1><p>在Dart中实现并发可以用Isolate，它是类似于线程(thread)但不共享内存的独立运行的worker，是一个独立的Dart程序执行环境。其实默认环境就是一个main isolate。</p><p>在Dart语言中，所有的Dart代码都运行在某个isolate中，代码只能使用所属isolate的类和值。不同的isolate可以通过port发送message进行交流。</p><h1 id="示意图"><a href="#示意图" class="headerlink" title="示意图"></a>示意图</h1><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2019-01-21-16-09-42.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li><code>ReceivePort</code> 创建入口点</li><li><code>Isolate.spawn</code> 连接进程</li><li><code>SendPort.send</code> 发送消息</li></ul><h1 id="echo-例子"><a href="#echo-例子" class="headerlink" title="echo 例子"></a>echo 例子</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'dart:async'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'dart:isolate'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第1步：定义主线程</span></span><br><span class="line">main() <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="comment">// 第3步：编写回调Port</span></span><br><span class="line">  <span class="keyword">var</span> receivePort = <span class="keyword">new</span> ReceivePort();</span><br><span class="line">  <span class="keyword">await</span> Isolate.spawn(echo, receivePort.sendPort);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 第6步：保存隔离线程回调Port</span></span><br><span class="line">  <span class="keyword">var</span> sendPort = <span class="keyword">await</span> receivePort.first;</span><br><span class="line">  </span><br><span class="line"><span class="comment">// 第7步：发送消息</span></span><br><span class="line">  <span class="keyword">var</span> msg = <span class="keyword">await</span> sendReceive(sendPort, <span class="string">"foo"</span>);</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'received $msg'</span>);</span><br><span class="line">  msg = <span class="keyword">await</span> sendReceive(sendPort, <span class="string">"bar"</span>);</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'received $msg'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第2步：定义隔离线程的入口点</span></span><br><span class="line">echo(SendPort sendPort) <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="comment">// 第4步：编写回调Port</span></span><br><span class="line">  <span class="keyword">var</span> port = <span class="keyword">new</span> ReceivePort();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 第5步：告诉主线程回调入口点</span></span><br><span class="line">  sendPort.send(port.sendPort);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 第8步：循环接收消息</span></span><br><span class="line">  <span class="keyword">await</span> <span class="keyword">for</span> (<span class="keyword">var</span> msg <span class="keyword">in</span> port) &#123;</span><br><span class="line">    <span class="comment">// 数组 msg[0] 是数据</span></span><br><span class="line">    <span class="keyword">var</span> data = msg[<span class="number">0</span>];</span><br><span class="line">    <span class="comment">// 数组 msg[1] 是发送方Port</span></span><br><span class="line">    SendPort replyTo = msg[<span class="number">1</span>];</span><br><span class="line">    <span class="comment">// 回传发送方 数据</span></span><br><span class="line">    replyTo.send(data);</span><br><span class="line">    <span class="comment">// 如果数据时 bar 关闭当前回调</span></span><br><span class="line">    <span class="keyword">if</span> (data == <span class="string">"bar"</span>) port.close();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">主线程 发送消息函数</span></span><br><span class="line"><span class="comment">数组 msg[0] 是数据</span></span><br><span class="line"><span class="comment">数组 msg[1] 是发送方Port</span></span><br><span class="line"><span class="comment">返回 隔离线程 Port</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">Future sendReceive(SendPort port, msg) &#123;</span><br><span class="line">  ReceivePort response = <span class="keyword">new</span> ReceivePort();</span><br><span class="line">  port.send([msg, response.sendPort]);</span><br><span class="line">  <span class="keyword">return</span> response.first;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><ul><li><a href="https://github.com/ducafecat/dart-learn/tree/master/32-%E9%9A%94%E7%A6%BB" target="_blank" rel="noopener">32-隔离</a></li></ul><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul><li><a href="https://www.dartlang.org/guides/language/language-tour#isolates" target="_blank" rel="noopener">isolates</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;了解线程隔离&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;环境&quot;&gt;&lt;a href=&quot;#环境&quot; class=&quot;heade
      
    
    </summary>
    
      <category term="Dart语言学习" scheme="https://blog.ducafecat.tech/categories/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="dart" scheme="https://blog.ducafecat.tech/tags/dart/"/>
    
  </entry>
  
  <entry>
    <title>Dart语言学习 - 31 可调用类 callable</title>
    <link href="https://blog.ducafecat.tech/2019/01/16/dart/dart-31-callable/"/>
    <id>https://blog.ducafecat.tech/2019/01/16/dart/dart-31-callable/</id>
    <published>2019-01-16T03:37:26.000Z</published>
    <updated>2019-08-01T18:39:22.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>定义并执行可定义类</li></ul><h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><ul><li>Dart 2.1.0</li></ul><h1 id="callable"><a href="#callable" class="headerlink" title="callable"></a>callable</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="keyword">var</span> phone = IOSPhone();</span><br><span class="line">  phone(<span class="string">'911'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// IOSPhone()('911');</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IOSPhone</span> </span>&#123;</span><br><span class="line">  call(<span class="built_in">String</span> <span class="built_in">num</span>) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'phone number is $num'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><ul><li><a href="https://github.com/ducafecat/dart-learn/blob/master/31-%E5%8F%AF%E8%B0%83%E7%94%A8%E7%B1%BB/callable.dart" target="_blank" rel="noopener">可调用类</a></li></ul><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul><li><a href="https://www.dartlang.org/guides/language/language-tour#callable-classes" target="_blank" rel="noopener">callable-classes</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;定义并执行可定义类&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;环境&quot;&gt;&lt;a href=&quot;#环境&quot; class=&quot;he
      
    
    </summary>
    
      <category term="Dart语言学习" scheme="https://blog.ducafecat.tech/categories/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="dart" scheme="https://blog.ducafecat.tech/tags/dart/"/>
    
  </entry>
  
  <entry>
    <title>Dart语言学习 - 30 - 生成器 Generators</title>
    <link href="https://blog.ducafecat.tech/2019/01/15/dart/dart-30-generator/"/>
    <id>https://blog.ducafecat.tech/2019/01/15/dart/dart-30-generator/</id>
    <published>2019-01-15T09:25:58.000Z</published>
    <updated>2019-08-01T18:39:22.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>同步、异步代码生成器</li></ul><h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><ul><li>Dart 2.1.0</li></ul><h1 id="同步生成器"><a href="#同步生成器" class="headerlink" title="同步生成器"></a>同步生成器</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="keyword">var</span> it = naturalsTo(<span class="number">5</span>).iterator;</span><br><span class="line">  <span class="keyword">while</span>(it.moveNext()) &#123;</span><br><span class="line">    <span class="built_in">print</span>(it.current);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Iterable</span>&lt;<span class="built_in">int</span>&gt; naturalsTo(<span class="built_in">int</span> n) <span class="keyword">sync</span>* &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'start'</span>);</span><br><span class="line">  <span class="built_in">int</span> k = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span> (k &lt; n) &#123;</span><br><span class="line">    <span class="keyword">yield</span> k++;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'end'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>yield 会等待 <code>moveNext</code> 指令</p></blockquote><h1 id="异步生成器"><a href="#异步生成器" class="headerlink" title="异步生成器"></a>异步生成器</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'dart:async'</span>;</span><br><span class="line"></span><br><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="comment">// 流监听</span></span><br><span class="line">  <span class="comment">// asynchronousNaturalsTo(5).listen((onData) &#123;</span></span><br><span class="line">  <span class="comment">//   print(onData);</span></span><br><span class="line">  <span class="comment">// &#125;);</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 流监听 StreamSubscription 对象</span></span><br><span class="line">  StreamSubscription subscription = asynchronousNaturalsTo(<span class="number">5</span>).listen(<span class="keyword">null</span>);</span><br><span class="line">  subscription.onData((value) &#123;</span><br><span class="line">    <span class="built_in">print</span>(value);</span><br><span class="line">    <span class="comment">// subscription.pause();</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Stream&lt;<span class="built_in">int</span>&gt; asynchronousNaturalsTo(<span class="built_in">int</span> n) <span class="keyword">async</span>* &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'start'</span>);</span><br><span class="line">  <span class="built_in">int</span> k = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span> (k &lt; n) &#123;</span><br><span class="line">    <span class="keyword">yield</span> k++;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'end'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>以流的方式一次性推送</p><p><code>StreamSubscription</code> 对象进行流监听控制</p></blockquote><h1 id="递归生成器"><a href="#递归生成器" class="headerlink" title="递归生成器"></a>递归生成器</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="keyword">var</span> it = naturalsDownFrom(<span class="number">5</span>).iterator;</span><br><span class="line">  <span class="keyword">while</span>(it.moveNext()) &#123;</span><br><span class="line">    <span class="built_in">print</span>(it.current);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Iterable</span>&lt;<span class="built_in">int</span>&gt; naturalsDownFrom(<span class="built_in">int</span> n) <span class="keyword">sync</span>* &#123;</span><br><span class="line">  <span class="keyword">if</span> ( n &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">yield</span> n;</span><br><span class="line">    <span class="keyword">yield</span>* naturalsDownFrom(n<span class="number">-1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><code>yield*</code> 以指针的方式传递递归对象，而不是整个同步对象</p></blockquote><h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><ul><li><a href="https://github.com/ducafecat/dart-learn/tree/master/30-%E7%94%9F%E6%88%90%E5%99%A8" target="_blank" rel="noopener">生成器 generators</a></li></ul><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul><li><a href="https://www.dartlang.org/guides/language/language-tour#generators" target="_blank" rel="noopener">generators</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;同步、异步代码生成器&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;环境&quot;&gt;&lt;a href=&quot;#环境&quot; class=&quot;h
      
    
    </summary>
    
      <category term="Dart语言学习" scheme="https://blog.ducafecat.tech/categories/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="dart" scheme="https://blog.ducafecat.tech/tags/dart/"/>
    
  </entry>
  
  <entry>
    <title>Dart语言学习 - 29 异步 async</title>
    <link href="https://blog.ducafecat.tech/2018/12/05/dart/dart-29-async/"/>
    <id>https://blog.ducafecat.tech/2018/12/05/dart/dart-29-async/</id>
    <published>2018-12-05T07:51:09.000Z</published>
    <updated>2019-08-01T18:39:22.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>调用异步 等待、递归</li><li>异步返回值</li></ul><h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><ul><li>Dart 2.1.0</li></ul><h1 id="调用异步-回调"><a href="#调用异步-回调" class="headerlink" title="调用异步 回调"></a>调用异步 回调</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:dio/dio.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  Dio dio = <span class="keyword">new</span> Dio();</span><br><span class="line">  dio.<span class="keyword">get</span>(<span class="string">"https://www.baidu.com"</span>).then((response) &#123;</span><br><span class="line">    <span class="built_in">print</span>(response.data);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><code>then</code> 的方式异步回调</p></blockquote><h1 id="调用异步-等待"><a href="#调用异步-等待" class="headerlink" title="调用异步 等待"></a>调用异步 等待</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:dio/dio.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() <span class="keyword">async</span> &#123;</span><br><span class="line">  Dio dio = <span class="keyword">new</span> Dio();</span><br><span class="line">  Response&lt;<span class="built_in">String</span>&gt; response = <span class="keyword">await</span> dio.<span class="keyword">get</span>(<span class="string">"https://www.baidu.com"</span>);</span><br><span class="line">  <span class="built_in">print</span>(response.data);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><code>async</code> 写在函数定义<br><code>await</code> 写在异步请求头</p></blockquote><h1 id="异步返回值"><a href="#异步返回值" class="headerlink" title="异步返回值"></a>异步返回值</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:dio/dio.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="keyword">var</span> content = <span class="keyword">await</span> getUrl(<span class="string">'https://www.baidu.com'</span>);</span><br><span class="line">  <span class="built_in">print</span>(content);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Future&lt;<span class="built_in">String</span>&gt; getUrl(<span class="built_in">String</span> url) <span class="keyword">async</span> &#123;</span><br><span class="line">  Dio dio = <span class="keyword">new</span> Dio();</span><br><span class="line">  Response&lt;<span class="built_in">String</span>&gt; response = <span class="keyword">await</span> dio.<span class="keyword">get</span>(url);</span><br><span class="line">  <span class="keyword">return</span> response.data;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>定义 <code>Future&lt;T&gt;</code> 返回对象</p></blockquote><h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><ul><li><a href="https://github.com/ducafecat/dart-learn/tree/master/29-%E5%BC%82%E6%AD%A5" target="_blank" rel="noopener">异步</a></li></ul><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul><li><a href="https://www.dartlang.org/guides/language/language-tour" target="_blank" rel="noopener">language-tour</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;调用异步 等待、递归&lt;/li&gt;
&lt;li&gt;异步返回值&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;环境&quot;&gt;&lt;a href
      
    
    </summary>
    
      <category term="Dart语言学习" scheme="https://blog.ducafecat.tech/categories/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="dart" scheme="https://blog.ducafecat.tech/tags/dart/"/>
    
  </entry>
  
  <entry>
    <title>Dart语言学习 - 28 泛型</title>
    <link href="https://blog.ducafecat.tech/2018/12/05/dart/dart-28-generic/"/>
    <id>https://blog.ducafecat.tech/2018/12/05/dart/dart-28-generic/</id>
    <published>2018-12-05T03:30:26.000Z</published>
    <updated>2019-08-01T18:39:22.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>使用泛型</li><li>定义泛型</li><li>限制泛型</li></ul><h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><ul><li>Dart 2.1.0</li></ul><h1 id="泛型使用"><a href="#泛型使用" class="headerlink" title="泛型使用"></a>泛型使用</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="keyword">var</span> l = <span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt;();</span><br><span class="line">  l.add(<span class="string">'aaa'</span>);</span><br><span class="line">  l.add(<span class="string">'bbb'</span>);</span><br><span class="line">  l.add(<span class="string">'ccc'</span>);</span><br><span class="line">  <span class="built_in">print</span>(l);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> m = <span class="built_in">Map</span>&lt;<span class="built_in">int</span>, <span class="built_in">String</span>&gt;();</span><br><span class="line">  m[<span class="number">1</span>] = <span class="string">'aaaa'</span>;</span><br><span class="line">  m[<span class="number">2</span>] = <span class="string">'bbbb'</span>;</span><br><span class="line">  m[<span class="number">3</span>] = <span class="string">'cccc'</span>;</span><br><span class="line">  <span class="built_in">print</span>(m);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>很多的容器对象，在创建对象时都可以定义泛型类型。</p></blockquote><h1 id="泛型函数"><a href="#泛型函数" class="headerlink" title="泛型函数"></a>泛型函数</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="keyword">var</span> key = addCache(<span class="string">'a00001'</span>, <span class="string">'val.....'</span>);</span><br><span class="line">  <span class="built_in">print</span>(key);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">K addCache&lt;K, V&gt;(K key, V val) &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'<span class="subst">$&#123;key&#125;</span> <span class="subst">$&#123;val&#125;</span>'</span>);</span><br><span class="line">  <span class="keyword">return</span> key;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>泛型可以用在一个函数的定义</p></blockquote><h1 id="构造函数泛型"><a href="#构造函数泛型" class="headerlink" title="构造函数泛型"></a>构造函数泛型</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="keyword">var</span> p = Phone&lt;<span class="built_in">String</span>&gt;(<span class="string">'abc00000011111'</span>);</span><br><span class="line">  <span class="built_in">print</span>(p.mobileNumber);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Phone</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> T mobileNumber;</span><br><span class="line">  Phone(<span class="keyword">this</span>.mobileNumber);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>这是大多数情况下使用泛型的场景，在一个类的构造函数中</p></blockquote><h1 id="泛型限制"><a href="#泛型限制" class="headerlink" title="泛型限制"></a>泛型限制</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="keyword">var</span> ad = AndroidPhone();</span><br><span class="line">  <span class="keyword">var</span> p = Phone&lt;AndroidPhone&gt;(ad);</span><br><span class="line">  p.mobile.startup();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Phone</span>&lt;<span class="title">T</span> <span class="keyword">extends</span> <span class="title">AndroidPhone</span> &gt; </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> T mobile;</span><br><span class="line">  Phone(<span class="keyword">this</span>.mobile);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AndroidPhone</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> startup() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'Android Phone 开机'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>通过 extends 关键字 可以限定你可以泛型使用的类型</p></blockquote><h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><ul><li><a href="https://github.com/ducafecat/dart-learn/tree/master/28-%E6%B3%9B%E5%9E%8B" target="_blank" rel="noopener">泛型</a></li></ul><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul><li><a href="https://www.dartlang.org/guides/language/language-tour" target="_blank" rel="noopener">language-tour</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;使用泛型&lt;/li&gt;
&lt;li&gt;定义泛型&lt;/li&gt;
&lt;li&gt;限制泛型&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;环境&quot;&gt;
      
    
    </summary>
    
      <category term="Dart语言学习" scheme="https://blog.ducafecat.tech/categories/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="dart" scheme="https://blog.ducafecat.tech/tags/dart/"/>
    
  </entry>
  
  <entry>
    <title>Dart语言学习 - 27 库</title>
    <link href="https://blog.ducafecat.tech/2018/12/05/dart/dart-27-library/"/>
    <id>https://blog.ducafecat.tech/2018/12/05/dart/dart-27-library/</id>
    <published>2018-12-05T02:00:54.000Z</published>
    <updated>2019-09-16T09:29:30.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>核心库</li><li>外部库</li><li>导入模块</li></ul><h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><ul><li>Dart 2.1.0</li></ul><h1 id="导入核心库"><a href="#导入核心库" class="headerlink" title="导入核心库"></a>导入核心库</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'dart:io'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="keyword">var</span> f = <span class="keyword">new</span> File(<span class="string">'README.md'</span>);</span><br><span class="line">  <span class="keyword">var</span> content = f.readAsStringSync();</span><br><span class="line">  <span class="built_in">print</span>(content);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="导入第三方库"><a href="#导入第三方库" class="headerlink" title="导入第三方库"></a>导入第三方库</h1><ul><li>编写 <code>pubspec.yaml</code></li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">ducafecat</span></span><br><span class="line"><span class="attr">dependencies:</span></span><br><span class="line"><span class="attr">  dio:</span> <span class="number">1.0</span><span class="number">.9</span></span><br></pre></td></tr></table></figure><ul><li>程序调用</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:dio/dio.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() <span class="keyword">async</span> &#123;</span><br><span class="line">  Dio dio = <span class="keyword">new</span> Dio();</span><br><span class="line">  Response&lt;<span class="built_in">String</span>&gt; response = <span class="keyword">await</span> dio.<span class="keyword">get</span>(<span class="string">"https://www.baidu.com"</span>);</span><br><span class="line">  <span class="built_in">print</span>(response.data);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="导入文件"><a href="#导入文件" class="headerlink" title="导入文件"></a>导入文件</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'./phone.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="keyword">var</span> xm = Phone(<span class="string">'android'</span>);</span><br><span class="line">  xm.startup();</span><br><span class="line">  xm.shutdown();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="前缀"><a href="#前缀" class="headerlink" title="前缀"></a>前缀</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'./phone.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'./phone1.dart'</span> <span class="keyword">as</span> pp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="keyword">var</span> xm = Phone(<span class="string">'android'</span>);</span><br><span class="line">  xm.startup();</span><br><span class="line">  xm.shutdown();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> xm1 = pp.Phone(<span class="string">'android'</span>);</span><br><span class="line">  xm1.startup();</span><br><span class="line">  xm1.shutdown();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="筛选包内容"><a href="#筛选包内容" class="headerlink" title="筛选包内容"></a>筛选包内容</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// import './phone.dart' hide AndroidPhone;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./phone.dart'</span> show IOSPhone;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="keyword">var</span> xm = IOSPhone();</span><br><span class="line">  xm.startup();</span><br><span class="line">  xm.shutdown();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><code>hide</code> 筛掉某几个包<br><code>show</code> 只使用某几个包</p></blockquote><h1 id="延迟载入"><a href="#延迟载入" class="headerlink" title="延迟载入"></a>延迟载入</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'./phone.dart'</span> deferred <span class="keyword">as</span> pp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="keyword">var</span> run = <span class="keyword">true</span>;</span><br><span class="line">  <span class="keyword">if</span> (run) &#123;</span><br><span class="line">    <span class="keyword">await</span> pp.loadLibrary();</span><br><span class="line">    <span class="keyword">var</span> xm = pp.Phone(<span class="string">'android'</span>);</span><br><span class="line">    xm.startup();</span><br><span class="line">    xm.shutdown();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><code>loadLibrary()</code> 方式在需要的时候载入包<br>可提高程序启动速度<br>用在不常使用的功能<br>用在载入时间过长的包</p></blockquote><h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><ul><li><a href="https://github.com/ducafecat/dart-learn/tree/master/27-%E5%BA%93" target="_blank" rel="noopener">库</a></li></ul><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul><li><a href="https://www.dartlang.org/guides/language/language-tour" target="_blank" rel="noopener">language-tour</a></li><li><a href="https://pub.dartlang.org/" target="_blank" rel="noopener">包管理平台</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;核心库&lt;/li&gt;
&lt;li&gt;外部库&lt;/li&gt;
&lt;li&gt;导入模块&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;环境&quot;&gt;&lt;a
      
    
    </summary>
    
      <category term="Dart语言学习" scheme="https://blog.ducafecat.tech/categories/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="dart" scheme="https://blog.ducafecat.tech/tags/dart/"/>
    
  </entry>
  
  <entry>
    <title>Dart语言学习 - 26 工厂函数</title>
    <link href="https://blog.ducafecat.tech/2018/12/04/dart/dart-26-factory/"/>
    <id>https://blog.ducafecat.tech/2018/12/04/dart/dart-26-factory/</id>
    <published>2018-12-04T06:33:01.000Z</published>
    <updated>2019-08-01T18:39:22.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>工厂函数</li><li>工厂构造函数</li></ul><h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><ul><li>Dart 2.1.0</li></ul><h1 id="工厂函数"><a href="#工厂函数" class="headerlink" title="工厂函数"></a>工厂函数</h1><p>简化类型实例化</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="keyword">var</span> xm = phoneFactory(<span class="string">'ios'</span>);</span><br><span class="line">  xm.startup();</span><br><span class="line">  xm.shutdown();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Phone</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> startup() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'开机'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">void</span> shutdown() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'关机'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Phone phoneFactory(<span class="built_in">String</span> name) &#123;</span><br><span class="line">  <span class="keyword">switch</span> (name) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'android'</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> AndroidPhone();</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> IOSPhone();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AndroidPhone</span> <span class="keyword">extends</span> <span class="title">Phone</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> startup() &#123;</span><br><span class="line">    <span class="keyword">super</span>.startup();</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'Android Phone 开机'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IOSPhone</span> <span class="keyword">extends</span> <span class="title">Phone</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> startup() &#123;</span><br><span class="line">    <span class="keyword">super</span>.startup();</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'IOS Phone 开机'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="工厂构造函数"><a href="#工厂构造函数" class="headerlink" title="工厂构造函数"></a>工厂构造函数</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="keyword">var</span> xm = Phone(<span class="string">'android'</span>);</span><br><span class="line">  xm.startup();</span><br><span class="line">  xm.shutdown();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Phone</span> </span>&#123;</span><br><span class="line">  <span class="keyword">factory</span> Phone(<span class="built_in">String</span> name) &#123;</span><br><span class="line">    <span class="keyword">switch</span> (name) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">'android'</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> AndroidPhone();</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> IOSPhone();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">void</span> startup();</span><br><span class="line">  <span class="keyword">void</span> shutdown();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AndroidPhone</span> <span class="keyword">implements</span> <span class="title">Phone</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> startup() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'Android Phone 开机'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">void</span> shutdown() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'Android 关机'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IOSPhone</span> <span class="keyword">implements</span> <span class="title">Phone</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> startup() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'IOS Phone 开机'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">void</span> shutdown() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'IOS 关机'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><ul><li><a href="https://github.com/ducafecat/dart-learn/tree/master/26-%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener">factory</a></li></ul><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul><li><a href="https://www.dartlang.org/guides/language/language-tour" target="_blank" rel="noopener">language-tour</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;工厂函数&lt;/li&gt;
&lt;li&gt;工厂构造函数&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;环境&quot;&gt;&lt;a href=&quot;#环境
      
    
    </summary>
    
      <category term="Dart语言学习" scheme="https://blog.ducafecat.tech/categories/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="dart" scheme="https://blog.ducafecat.tech/tags/dart/"/>
    
  </entry>
  
  <entry>
    <title>Dart语言学习 - 25 多继承类 mixin</title>
    <link href="https://blog.ducafecat.tech/2018/12/04/dart/dart-25-mixin/"/>
    <id>https://blog.ducafecat.tech/2018/12/04/dart/dart-25-mixin/</id>
    <published>2018-12-04T03:26:18.000Z</published>
    <updated>2019-08-01T18:39:22.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>多继承类的实现方式</li><li>函数重名冲突</li></ul><h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><ul><li>Dart 2.1.0</li></ul><h1 id="类多继承"><a href="#类多继承" class="headerlink" title="类多继承"></a>类多继承</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="keyword">var</span> xm = Xiaomi();</span><br><span class="line">  xm.startup();</span><br><span class="line">  xm.shutdown();</span><br><span class="line">  xm.call();</span><br><span class="line">  xm.sms();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Phone</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> startup() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'开机'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">void</span> shutdown() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'关机'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AndroidPhone</span> <span class="keyword">extends</span> <span class="title">Phone</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> startup() &#123;</span><br><span class="line">    <span class="keyword">super</span>.startup();</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'AndroidPhone 开机'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AndroidSystem</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> call() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'android call'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Weixin</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> sms() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'weixin sms'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Xiaomi</span> <span class="keyword">extends</span> <span class="title">AndroidPhone</span> <span class="title">with</span> <span class="title">AndroidSystem</span>, <span class="title">Weixin</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> startup() &#123;</span><br><span class="line">    <span class="keyword">super</span>.startup();</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'AndroidPhone 开机'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>采用 <code>with ... , .... , ...</code> 方式 mixin 入多个类功能</p></blockquote><h1 id="函数重名冲突"><a href="#函数重名冲突" class="headerlink" title="函数重名冲突"></a>函数重名冲突</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="keyword">var</span> xm = Xiaomi();</span><br><span class="line">  xm.startup();</span><br><span class="line">  xm.shutdown();</span><br><span class="line">  xm.sms();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Phone</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> startup() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'开机'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">void</span> shutdown() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'关机'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AndroidPhone</span> <span class="keyword">extends</span> <span class="title">Phone</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> startup() &#123;</span><br><span class="line">    <span class="keyword">super</span>.startup();</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'AndroidPhone 开机'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AndroidSystem</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> call() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'android call'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Weixin</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> sms() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'weixin sms'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">QQ</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> sms() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'qq sms'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Xiaomi</span> <span class="keyword">extends</span> <span class="title">AndroidPhone</span> <span class="title">with</span> <span class="title">AndroidSystem</span>, <span class="title">Weixin</span>, <span class="title">QQ</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> startup() &#123;</span><br><span class="line">    <span class="keyword">super</span>.startup();</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'AndroidPhone 开机'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>遇到相同功能的函数，最后载入的会覆盖之前的函数定义</p></blockquote><h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><ul><li><a href="https://github.com/ducafecat/dart-learn/tree/master/25-%E5%A4%9A%E7%B1%BB%E7%BB%A7%E6%89%BF" target="_blank" rel="noopener">mixin</a></li></ul><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul><li><a href="https://www.dartlang.org/guides/language/language-tour" target="_blank" rel="noopener">language-tour</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;多继承类的实现方式&lt;/li&gt;
&lt;li&gt;函数重名冲突&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;环境&quot;&gt;&lt;a href
      
    
    </summary>
    
      <category term="Dart语言学习" scheme="https://blog.ducafecat.tech/categories/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="dart" scheme="https://blog.ducafecat.tech/tags/dart/"/>
    
  </entry>
  
  <entry>
    <title>Dart语言学习 - 24 extends 继承</title>
    <link href="https://blog.ducafecat.tech/2018/11/28/dart/dart-24-extends/"/>
    <id>https://blog.ducafecat.tech/2018/11/28/dart/dart-24-extends/</id>
    <published>2018-11-28T09:45:11.000Z</published>
    <updated>2019-08-01T18:39:22.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>实现继承</li><li>继承抽象类的问题</li><li>不可多继承</li><li>父类调用</li><li>调用父类构造</li><li>重写超类函数</li></ul><h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><ul><li>Dart 2.0.0</li></ul><h1 id="实现继承"><a href="#实现继承" class="headerlink" title="实现继承"></a>实现继承</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="keyword">var</span> p = AndroidPhone();</span><br><span class="line">  p.startup();</span><br><span class="line">  p.shutdown();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Phone</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> startup() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'开机'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">void</span> shutdown() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'关机'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AndroidPhone</span> <span class="keyword">extends</span> <span class="title">Phone</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="继承抽象类的问题"><a href="#继承抽象类的问题" class="headerlink" title="继承抽象类的问题"></a>继承抽象类的问题</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="keyword">var</span> p = AndroidPhone();</span><br><span class="line">  p.startup();</span><br><span class="line">  p.shutdown();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Phone</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> startup();</span><br><span class="line">  <span class="keyword">void</span> shutdown();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AndroidPhone</span> <span class="keyword">extends</span> <span class="title">Phone</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>抽象类中只定义抽象函数，实例化访问会报错</p></blockquote><h1 id="父类调用"><a href="#父类调用" class="headerlink" title="父类调用"></a>父类调用</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="keyword">var</span> p = AndroidPhone();</span><br><span class="line">  p.startup();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Phone</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> startup() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'开机'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">void</span> shutdown() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'关机'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AndroidPhone</span> <span class="keyword">extends</span> <span class="title">Phone</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> startup() &#123;</span><br><span class="line">    <span class="keyword">super</span>.startup();</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'AndroidPhone 开机'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>super 对象可以访问父类</p></blockquote><h1 id="调用父类构造"><a href="#调用父类构造" class="headerlink" title="调用父类构造"></a>调用父类构造</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="keyword">var</span> p = AndroidPhone(<span class="number">12345678</span>);</span><br><span class="line">  p.showNumber();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mobile</span> </span>&#123;</span><br><span class="line">  <span class="built_in">int</span> number;</span><br><span class="line">  <span class="built_in">int</span> signal;</span><br><span class="line">  Mobile(<span class="keyword">this</span>.number);</span><br><span class="line">  <span class="keyword">void</span> showNumber() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'010-<span class="subst">$&#123;number&#125;</span>'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AndroidPhone</span> <span class="keyword">extends</span> <span class="title">Mobile</span> </span>&#123;</span><br><span class="line">  AndroidPhone(<span class="built_in">int</span> number) : <span class="keyword">super</span>(number);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>可调用父类的 构造函数</p></blockquote><h1 id="重写超类函数"><a href="#重写超类函数" class="headerlink" title="重写超类函数"></a>重写超类函数</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="keyword">dynamic</span> p = AndroidPhone(<span class="number">12345678</span>);</span><br><span class="line">  p.showNumber111();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mobile</span> </span>&#123;</span><br><span class="line">  <span class="built_in">int</span> number;</span><br><span class="line">  <span class="built_in">int</span> signal;</span><br><span class="line">  Mobile(<span class="keyword">this</span>.number);</span><br><span class="line">  <span class="keyword">void</span> showNumber() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'010-<span class="subst">$&#123;number&#125;</span>'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AndroidPhone</span> <span class="keyword">extends</span> <span class="title">Mobile</span> </span>&#123;</span><br><span class="line">  AndroidPhone(<span class="built_in">int</span> number) : <span class="keyword">super</span>(number);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> noSuchMethod(Invocation mirror) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'被重写 noSuchMethod'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>在重写的函数上加修饰符 <code>@override</code></p></blockquote><h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><ul><li><a href="https://github.com/ducafecat/dart-learn/tree/master/24-%E7%BB%A7%E6%89%BF" target="_blank" rel="noopener">extends</a></li></ul><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul><li><a href="https://www.dartlang.org/guides/language/language-tour" target="_blank" rel="noopener">language-tour</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;实现继承&lt;/li&gt;
&lt;li&gt;继承抽象类的问题&lt;/li&gt;
&lt;li&gt;不可多继承&lt;/li&gt;
&lt;li&gt;父类调用&lt;/li&gt;
      
    
    </summary>
    
      <category term="Dart语言学习" scheme="https://blog.ducafecat.tech/categories/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="dart" scheme="https://blog.ducafecat.tech/tags/dart/"/>
    
  </entry>
  
  <entry>
    <title>Dart语言学习 - 23 interface 接口</title>
    <link href="https://blog.ducafecat.tech/2018/11/28/dart/dart-23-interface/"/>
    <id>https://blog.ducafecat.tech/2018/11/28/dart/dart-23-interface/</id>
    <published>2018-11-28T09:23:46.000Z</published>
    <updated>2019-08-01T18:39:22.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>实现接口</li><li>implements 多接口</li></ul><h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><ul><li>Dart 2.0.0</li></ul><h1 id="Dart-中没有-interface-关键字"><a href="#Dart-中没有-interface-关键字" class="headerlink" title="Dart 中没有 interface 关键字"></a><em>Dart 中没有 interface 关键字</em></h1><h1 id="实现接口"><a href="#实现接口" class="headerlink" title="实现接口"></a>实现接口</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="keyword">var</span> p = AndroidPhone();</span><br><span class="line">  p.startup();</span><br><span class="line">  p.shutdown();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">IPhone</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> startup();</span><br><span class="line">  <span class="keyword">void</span> shutdown();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AndroidPhone</span> <span class="keyword">implements</span> <span class="title">IPhone</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> startup() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'AndroidPhone 开机'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">void</span> shutdown() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'AndroidPhone 关机'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>接口用途的抽象类 请用字母 <code>I</code> 开头 , 如 <code>IPhone</code></p></blockquote><h1 id="从一个普通类履行接口"><a href="#从一个普通类履行接口" class="headerlink" title="从一个普通类履行接口"></a>从一个普通类履行接口</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="keyword">var</span> p = AndroidPhone();</span><br><span class="line">  p.startup();</span><br><span class="line">  p.shutdown();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Phone</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> startup() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'开机'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">void</span> shutdown() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'关机'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AndroidPhone</span> <span class="keyword">implements</span> <span class="title">Phone</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> startup() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'AndroidPhone 开机'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">void</span> shutdown() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'AndroidPhone 关机'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Dart 可以从一个普通的类履行接口</p></blockquote><h1 id="履行多接口"><a href="#履行多接口" class="headerlink" title="履行多接口"></a>履行多接口</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="keyword">var</span> p = AndroidPhone();</span><br><span class="line">  p.startup();</span><br><span class="line">  p.shutdown();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Phone</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> startup() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'开机'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">void</span> shutdown() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'关机'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mobile</span> </span>&#123;</span><br><span class="line">  <span class="built_in">int</span> signal;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AndroidPhone</span> <span class="keyword">implements</span> <span class="title">Phone</span>, <span class="title">Mobile</span> </span>&#123;</span><br><span class="line">  <span class="built_in">int</span> signal;</span><br><span class="line">  <span class="keyword">void</span> startup() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'AndroidPhone 开机'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">void</span> shutdown() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'AndroidPhone 关机'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Dart 可以履行多个接口</p></blockquote><h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><ul><li><a href="https://github.com/ducafecat/dart-learn/blob/master/19-%E7%B1%BB/interface.dart" target="_blank" rel="noopener">interface</a></li></ul><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul><li><a href="https://www.dartlang.org/guides/language/language-tour" target="_blank" rel="noopener">language-tour</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;实现接口&lt;/li&gt;
&lt;li&gt;implements 多接口&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;环境&quot;&gt;&lt;a h
      
    
    </summary>
    
      <category term="Dart语言学习" scheme="https://blog.ducafecat.tech/categories/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="dart" scheme="https://blog.ducafecat.tech/tags/dart/"/>
    
  </entry>
  
  <entry>
    <title>Dart语言学习 - 22 abstract 抽象</title>
    <link href="https://blog.ducafecat.tech/2018/11/28/dart/dart-22-abstract/"/>
    <id>https://blog.ducafecat.tech/2018/11/28/dart/dart-22-abstract/</id>
    <published>2018-11-28T08:17:42.000Z</published>
    <updated>2019-08-01T18:39:22.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>抽象 类、函数</li><li>接口方式使用</li><li>继承方式使用</li></ul><h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><ul><li>Dart 2.0.0</li></ul><h1 id="abstract-类、函数、成员"><a href="#abstract-类、函数、成员" class="headerlink" title="abstract 类、函数、成员"></a>abstract 类、函数、成员</h1><ul><li>普通类前加 abstract</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">String</span> name = <span class="string">'ducafecat'</span>;</span><br><span class="line">  <span class="keyword">void</span> printName()&#123;</span><br><span class="line">    <span class="built_in">print</span>(name);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="不能直接-new-实例化"><a href="#不能直接-new-实例化" class="headerlink" title="不能直接 new 实例化"></a>不能直接 new 实例化</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p = Person();</span><br><span class="line">p.printName();</span><br></pre></td></tr></table></figure><blockquote><p><code>Dart 2</code> 开始 <code>new</code> 可以不写，提高阅读体验</p></blockquote><h1 id="继承方式使用"><a href="#继承方式使用" class="headerlink" title="继承方式使用"></a>继承方式使用</h1><p>定义</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Teacher</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>实例</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> user = Teacher();</span><br><span class="line">user.printName();</span><br></pre></td></tr></table></figure><h1 id="接口方式使用"><a href="#接口方式使用" class="headerlink" title="接口方式使用"></a>接口方式使用</h1><p>定义</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">String</span> name = <span class="string">''</span>;</span><br><span class="line">  <span class="keyword">void</span> printName();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">implements</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="built_in">String</span> name = <span class="string">'this is student'</span>;</span><br><span class="line">  <span class="keyword">void</span> printName() &#123;</span><br><span class="line">    <span class="built_in">print</span>(name);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>实例</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> user = Student();</span><br><span class="line">user.printName();</span><br></pre></td></tr></table></figure><h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><ul><li><a href="https://github.com/ducafecat/dart-learn/blob/master/19-%E7%B1%BB/abstract.dart" target="_blank" rel="noopener">abstract</a></li></ul><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul><li><a href="https://www.dartlang.org/guides/language/language-tour" target="_blank" rel="noopener">language-tour</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;抽象 类、函数&lt;/li&gt;
&lt;li&gt;接口方式使用&lt;/li&gt;
&lt;li&gt;继承方式使用&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 i
      
    
    </summary>
    
      <category term="Dart语言学习" scheme="https://blog.ducafecat.tech/categories/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="dart" scheme="https://blog.ducafecat.tech/tags/dart/"/>
    
  </entry>
  
  <entry>
    <title>Dart语言学习 - 21 静态成员</title>
    <link href="https://blog.ducafecat.tech/2018/11/17/dart/dart-21-static/"/>
    <id>https://blog.ducafecat.tech/2018/11/17/dart/dart-21-static/</id>
    <published>2018-11-17T08:02:07.000Z</published>
    <updated>2019-08-01T18:39:22.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>静态变量</li><li>静态方法</li></ul><h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><ul><li>Dart 2.0.0</li></ul><h1 id="静态变量"><a href="#静态变量" class="headerlink" title="静态变量"></a>静态变量</h1><h2 id="static-定义"><a href="#static-定义" class="headerlink" title="static 定义"></a>static 定义</h2><p>声明</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">People</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="built_in">String</span> name = <span class="string">'ducafecat'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>调用</p><p>静态变量可以通过外部直接访问,不需要将类实例化</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(People.name);</span><br></pre></td></tr></table></figure><h2 id="函数内部访问"><a href="#函数内部访问" class="headerlink" title="函数内部访问"></a>函数内部访问</h2><p>实例化后的类也可以访问该静态变量</p><p>声明</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">People</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="built_in">String</span> name = <span class="string">'ducafecat'</span>;</span><br><span class="line">  <span class="keyword">void</span> show() &#123;</span><br><span class="line">    <span class="built_in">print</span>(name);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>调用</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> People();</span><br><span class="line">p.show();</span><br></pre></td></tr></table></figure><h2 id="不能用-this"><a href="#不能用-this" class="headerlink" title="不能用 this"></a>不能用 this</h2><p>因为静态变量实际上存在于类中,而不是实例本身</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">People</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="built_in">String</span> name = <span class="string">'ducafecat'</span>;</span><br><span class="line">  <span class="keyword">void</span> show() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="keyword">this</span>.name);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="静态方法"><a href="#静态方法" class="headerlink" title="静态方法"></a>静态方法</h1><p>静态方法可以通过外部直接访问</p><p>声明</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">People</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="built_in">String</span> name = <span class="string">'ducafecat'</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">void</span> printName() &#123;</span><br><span class="line">    <span class="built_in">print</span>(name);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>调用</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">People.printName();</span><br></pre></td></tr></table></figure><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><ul><li>实例化后将无法通过外部直接调用 static 成员</li><li>静态成员与实例成员是分开的, 静态成员处于类的定义体中, 实例成员处于类的实例中</li></ul><h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><ul><li><a href="https://github.com/ducafecat/dart-learn/blob/master/19-类/static.dart" target="_blank" rel="noopener">static.dart</a></li></ul><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul><li><a href="https://www.dartlang.org/guides/language/language-tour" target="_blank" rel="noopener">language-tour</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;静态变量&lt;/li&gt;
&lt;li&gt;静态方法&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;环境&quot;&gt;&lt;a href=&quot;#环境&quot; 
      
    
    </summary>
    
      <category term="Dart语言学习" scheme="https://blog.ducafecat.tech/categories/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="dart" scheme="https://blog.ducafecat.tech/tags/dart/"/>
    
  </entry>
  
  <entry>
    <title>Dart语言学习 - 20 get set</title>
    <link href="https://blog.ducafecat.tech/2018/11/17/dart/dart-20-getter-setter/"/>
    <id>https://blog.ducafecat.tech/2018/11/17/dart/dart-20-getter-setter/</id>
    <published>2018-11-17T07:30:21.000Z</published>
    <updated>2019-08-01T18:39:22.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>定义、使用、简化 get set</li></ul><h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><ul><li>Dart 2.0.0</li></ul><h1 id="定义、使用-get-set"><a href="#定义、使用-get-set" class="headerlink" title="定义、使用 get set"></a>定义、使用 get set</h1><p>getter 和 setter 的好处是，你可以开始使用实例变量，后来 你可以把实例变量用函数包裹起来，而调用你代码的地方不需要修改。</p><p>定义</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">People</span> </span>&#123;</span><br><span class="line">  <span class="built_in">String</span> _name;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">set</span> pName(<span class="built_in">String</span> value) &#123;</span><br><span class="line">    _name = value;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">String</span> <span class="keyword">get</span> pName &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'people is <span class="subst">$&#123;_name&#125;</span>'</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> People();</span><br><span class="line">p.pName = <span class="string">'ducafecat'</span>;</span><br><span class="line"><span class="built_in">print</span>(p.pName);</span><br></pre></td></tr></table></figure><h1 id="简化-get-set"><a href="#简化-get-set" class="headerlink" title="简化 get set"></a>简化 get set</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">People</span> </span>&#123;</span><br><span class="line">  <span class="built_in">String</span> _name;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">set</span> pName(<span class="built_in">String</span> value) =&gt; _name = value;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">String</span> <span class="keyword">get</span> pName =&gt; <span class="string">'people is <span class="subst">$&#123;_name&#125;</span>'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><ul><li><a href="https://github.com/ducafecat/dart-learn/blob/master/19-类/getset.dart" target="_blank" rel="noopener">getset.dart</a></li></ul><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul><li><a href="https://www.dartlang.org/guides/language/language-tour" target="_blank" rel="noopener">language-tour</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;定义、使用、简化 get set&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;环境&quot;&gt;&lt;a href=&quot;#环境&quot; cl
      
    
    </summary>
    
      <category term="Dart语言学习" scheme="https://blog.ducafecat.tech/categories/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="dart" scheme="https://blog.ducafecat.tech/tags/dart/"/>
    
  </entry>
  
  <entry>
    <title>Dart语言学习 - 19 类</title>
    <link href="https://blog.ducafecat.tech/2018/11/17/dart/dart-19-class/"/>
    <id>https://blog.ducafecat.tech/2018/11/17/dart/dart-19-class/</id>
    <published>2018-11-17T05:52:30.000Z</published>
    <updated>2019-08-01T18:39:22.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>定义、使用类</li><li>构造函数</li><li>简化构造</li><li>初始化列表</li><li>命名构造函数</li><li>重定向构造函数</li></ul><h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><ul><li>Dart 2.0.0</li></ul><h1 id="定义、使用类"><a href="#定义、使用类" class="headerlink" title="定义、使用类"></a>定义、使用类</h1><p>定义</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> Point();</span><br></pre></td></tr></table></figure><h1 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h1><p>定义</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">  <span class="built_in">num</span> x;</span><br><span class="line">  <span class="built_in">num</span> y;</span><br><span class="line">  Point(<span class="built_in">num</span> x, <span class="built_in">num</span> y)&#123;</span><br><span class="line">    <span class="keyword">this</span>.x = x;</span><br><span class="line">    <span class="keyword">this</span>.y = y;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> Point(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line"><span class="built_in">print</span>([p.x, p.y]);</span><br></pre></td></tr></table></figure><h1 id="简化构造"><a href="#简化构造" class="headerlink" title="简化构造"></a>简化构造</h1><p>定义</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">  <span class="built_in">num</span> x;</span><br><span class="line">  <span class="built_in">num</span> y;</span><br><span class="line">  Point(<span class="keyword">this</span>.x, <span class="keyword">this</span>.y);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> Point(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line"><span class="built_in">print</span>([p.x, p.y]);</span><br></pre></td></tr></table></figure><h1 id="初始化列表"><a href="#初始化列表" class="headerlink" title="初始化列表"></a>初始化列表</h1><p>定义</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">  <span class="built_in">num</span> x;</span><br><span class="line">  <span class="built_in">num</span> y;</span><br><span class="line">  <span class="keyword">var</span> origin;</span><br><span class="line">  Point(<span class="keyword">this</span>.x, <span class="keyword">this</span>.y): origin = &#123;x:x, y:y&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> Point(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line"><span class="built_in">print</span>([p.x, p.y, p.origin]);</span><br></pre></td></tr></table></figure><h1 id="命名构造函数"><a href="#命名构造函数" class="headerlink" title="命名构造函数"></a>命名构造函数</h1><p>定义</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">  <span class="built_in">num</span> x;</span><br><span class="line">  <span class="built_in">num</span> y;</span><br><span class="line">  Point.fromJson(<span class="built_in">Map</span> json) &#123;</span><br><span class="line">    x = json[<span class="string">'x'</span>];</span><br><span class="line">    y = json[<span class="string">'y'</span>];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> Point.fromJson(&#123;<span class="string">"x"</span>: <span class="number">1</span>, <span class="string">"y"</span>: <span class="number">2</span>&#125;);</span><br><span class="line"><span class="built_in">print</span>([p.x, p.y]);</span><br></pre></td></tr></table></figure><h1 id="重定向构造函数"><a href="#重定向构造函数" class="headerlink" title="重定向构造函数"></a>重定向构造函数</h1><p>定义</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">  <span class="built_in">num</span> x;</span><br><span class="line">  <span class="built_in">num</span> y;</span><br><span class="line">  Point(<span class="keyword">this</span>.x, <span class="keyword">this</span>.y);</span><br><span class="line">  Point.fromJson(<span class="built_in">Map</span> json) : <span class="keyword">this</span>(json[<span class="string">'x'</span>], json[<span class="string">'y'</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> Point.fromJson(&#123;<span class="string">"x"</span>: <span class="number">1</span>, <span class="string">"y"</span>: <span class="number">2</span>&#125;);</span><br><span class="line"><span class="built_in">print</span>([p.x, p.y]);</span><br></pre></td></tr></table></figure><h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><ul><li><a href="https://github.com/ducafecat/dart-learn/blob/master/19-类/class.dart" target="_blank" rel="noopener">class.dart</a></li></ul><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul><li><a href="https://www.dartlang.org/guides/language/language-tour" target="_blank" rel="noopener">language-tour</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;定义、使用类&lt;/li&gt;
&lt;li&gt;构造函数&lt;/li&gt;
&lt;li&gt;简化构造&lt;/li&gt;
&lt;li&gt;初始化列表&lt;/li&gt;
&lt;
      
    
    </summary>
    
      <category term="Dart语言学习" scheme="https://blog.ducafecat.tech/categories/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="dart" scheme="https://blog.ducafecat.tech/tags/dart/"/>
    
  </entry>
  
  <entry>
    <title>Dart语言学习 - 18 异常</title>
    <link href="https://blog.ducafecat.tech/2018/11/17/dart/dart-18-exceptions/"/>
    <id>https://blog.ducafecat.tech/2018/11/17/dart/dart-18-exceptions/</id>
    <published>2018-11-17T02:53:26.000Z</published>
    <updated>2019-08-01T18:39:22.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>错误类型</li><li>抛出、捕获</li></ul><h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><ul><li>Dart 2.0.0</li></ul><h1 id="错误的两种类型"><a href="#错误的两种类型" class="headerlink" title="错误的两种类型"></a>错误的两种类型</h1><h2 id="Exception-类"><a href="#Exception-类" class="headerlink" title="Exception 类"></a>Exception 类</h2><p><a href="https://api.dartlang.org/stable/2.1.0/dart-core/Exception-class.html" target="_blank" rel="noopener">Exception class</a></p><table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>DeferredLoadException</td><td>延迟加载错误</td></tr><tr><td>FormatException</td><td>格式错误</td></tr><tr><td>IntegerDivisionByZeroException</td><td>整数除零错误</td></tr><tr><td>IOException</td><td>IO 错误</td></tr><tr><td>IsolateSpawnException</td><td>隔离产生错误</td></tr><tr><td>TimeoutException</td><td>超时错误</td></tr></tbody></table><h2 id="Error-类"><a href="#Error-类" class="headerlink" title="Error 类"></a>Error 类</h2><p><a href="https://api.dartlang.org/stable/2.1.0/dart-core/Error-class.html" target="_blank" rel="noopener">Error class</a></p><table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>AbstractClassInstantiationError</td><td>抽象类实例化错误</td></tr><tr><td>ArgumentError</td><td>参数错误</td></tr><tr><td>AssertionError</td><td>断言错误</td></tr><tr><td>AsyncError</td><td>异步错误</td></tr><tr><td>CastError</td><td>Cast 错误</td></tr><tr><td>ConcurrentModificationError</td><td>并发修改错误</td></tr><tr><td>CyclicInitializationError</td><td>周期初始错误</td></tr><tr><td>FallThroughError</td><td>Fall Through 错误</td></tr><tr><td>JsonUnsupportedObjectError</td><td>json 不支持错误</td></tr><tr><td>NoSuchMethodError</td><td>没有这个方法错误</td></tr><tr><td>NullThrownError</td><td>Null 错误错误</td></tr><tr><td>OutOfMemoryError</td><td>内存溢出错误</td></tr><tr><td>RemoteError</td><td>远程错误</td></tr><tr><td>StackOverflowError</td><td>堆栈溢出错误</td></tr><tr><td>StateError</td><td>状态错误</td></tr><tr><td>UnimplementedError</td><td>未实现的错误</td></tr><tr><td>UnsupportedError</td><td>不支持错误</td></tr></tbody></table><h1 id="抛出错误"><a href="#抛出错误" class="headerlink" title="抛出错误"></a>抛出错误</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Exception 对象</span></span><br><span class="line"><span class="comment">// throw new FormatException('这是一个格式错误提示');</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Error 对象</span></span><br><span class="line"><span class="comment">// throw new OutOfMemoryError();</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 任意对象</span></span><br><span class="line"><span class="comment">// throw '这是一个异常';</span></span><br></pre></td></tr></table></figure><h1 id="捕获错误"><a href="#捕获错误" class="headerlink" title="捕获错误"></a>捕获错误</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// try &#123;</span></span><br><span class="line"><span class="comment">//   // throw new FormatException('这是一个格式错误提示');</span></span><br><span class="line"><span class="comment">//   throw new OutOfMemoryError();</span></span><br><span class="line"><span class="comment">// &#125; on OutOfMemoryError &#123;</span></span><br><span class="line"><span class="comment">//   print('没有内存了');</span></span><br><span class="line"><span class="comment">// &#125; catch (e) &#123;</span></span><br><span class="line"><span class="comment">//   print(e);</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure><h1 id="重新抛出错误"><a href="#重新抛出错误" class="headerlink" title="重新抛出错误"></a>重新抛出错误</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// try &#123;</span></span><br><span class="line"><span class="comment">//   throw new OutOfMemoryError();</span></span><br><span class="line"><span class="comment">// &#125; on OutOfMemoryError &#123;</span></span><br><span class="line"><span class="comment">//   print('没有内存了');</span></span><br><span class="line"><span class="comment">//   rethrow;</span></span><br><span class="line"><span class="comment">// &#125; catch (e) &#123;</span></span><br><span class="line"><span class="comment">//   print(e);</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure><h1 id="Finally-执行"><a href="#Finally-执行" class="headerlink" title="Finally 执行"></a>Finally 执行</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// try &#123;</span></span><br><span class="line"><span class="comment">//   throw new OutOfMemoryError();</span></span><br><span class="line"><span class="comment">// &#125; on OutOfMemoryError &#123;</span></span><br><span class="line"><span class="comment">//   print('没有内存了');</span></span><br><span class="line"><span class="comment">//   rethrow;</span></span><br><span class="line"><span class="comment">// &#125; catch (e) &#123;</span></span><br><span class="line"><span class="comment">//   print(e);</span></span><br><span class="line"><span class="comment">// &#125; finally &#123;</span></span><br><span class="line"><span class="comment">//   print('end');</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure><h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><ul><li><a href="https://github.com/ducafecat/dart-learn/blob/master/18-异常/exception.dart" target="_blank" rel="noopener">exception.dart</a></li></ul><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul><li><a href="https://www.dartlang.org/guides/language/language-tour" target="_blank" rel="noopener">language-tour</a></li><li><a href="https://api.dartlang.org/stable/2.1.0/dart-core/Exception-class.html" target="_blank" rel="noopener">Exception class</a></li><li><a href="https://api.dartlang.org/stable/2.1.0/dart-core/Error-class.html" target="_blank" rel="noopener">Error class</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;错误类型&lt;/li&gt;
&lt;li&gt;抛出、捕获&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;环境&quot;&gt;&lt;a href=&quot;#环境&quot;
      
    
    </summary>
    
      <category term="Dart语言学习" scheme="https://blog.ducafecat.tech/categories/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="dart" scheme="https://blog.ducafecat.tech/tags/dart/"/>
    
  </entry>
  
  <entry>
    <title>Dart语言学习 - 17 流程控制语句</title>
    <link href="https://blog.ducafecat.tech/2018/11/12/dart/dart-17-controlFlow/"/>
    <id>https://blog.ducafecat.tech/2018/11/12/dart/dart-17-controlFlow/</id>
    <published>2018-11-12T07:56:51.000Z</published>
    <updated>2019-08-01T18:39:22.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>条件判断</li><li>循环控制</li></ul><h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><ul><li>Dart 2.0.0</li></ul><h1 id="if-else"><a href="#if-else" class="headerlink" title="if else"></a>if else</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">bool</span> isPrint = <span class="keyword">true</span>;</span><br><span class="line"><span class="keyword">if</span> (isPrint) &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'hello'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="for"><a href="#for" class="headerlink" title="for"></a>for</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  <span class="built_in">print</span>(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="while"><a href="#while" class="headerlink" title="while"></a>while</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">bool</span> isDone = <span class="keyword">false</span>;</span><br><span class="line"><span class="keyword">while</span>(!isDone) &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'is not done'</span>);</span><br><span class="line">  isDone = <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="do-while"><a href="#do-while" class="headerlink" title="do while"></a>do while</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">bool</span> isRunning = <span class="keyword">true</span>;</span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'is running'</span>);</span><br><span class="line">  isRunning = <span class="keyword">false</span>;</span><br><span class="line">&#125; <span class="keyword">while</span> (isRunning);</span><br></pre></td></tr></table></figure><h1 id="switch-case"><a href="#switch-case" class="headerlink" title="switch case"></a>switch case</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span> name = <span class="string">'cat'</span>;</span><br><span class="line"><span class="keyword">switch</span> (name) &#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="string">'cat'</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'cat'</span>);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">default</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'not find'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="break"><a href="#break" class="headerlink" title="break"></a>break</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">num</span> i = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(<span class="keyword">true</span>) &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'<span class="subst">$&#123;i&#125;</span> - run'</span>);</span><br><span class="line">  i++;</span><br><span class="line">  <span class="keyword">if</span>(i == <span class="number">5</span>) &#123;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="continue"><a href="#continue" class="headerlink" title="continue"></a>continue</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">if</span> (i &lt; <span class="number">3</span>) &#123;</span><br><span class="line">    <span class="keyword">continue</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">print</span>(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="continue-指定位置"><a href="#continue-指定位置" class="headerlink" title="continue 指定位置"></a>continue 指定位置</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span> command = <span class="string">"close"</span>;</span><br><span class="line"><span class="keyword">switch</span>(command) &#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="string">"open"</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"open"</span>);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="string">"close"</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"close"</span>);</span><br><span class="line">    <span class="keyword">continue</span> doClose;</span><br><span class="line"></span><br><span class="line">  doClose:</span><br><span class="line">  <span class="keyword">case</span> <span class="string">"doClose"</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"DO_CLOSE"</span>);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">default</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"-----"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><ul><li><a href="https://github.com/ducafecat/dart-learn/blob/master/17-%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E8%AF%AD%E5%8F%A5/controlFlow.dart" target="_blank" rel="noopener">controlFlow.dart</a></li></ul><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul><li><a href="https://www.dartlang.org/guides/language/language-tour" target="_blank" rel="noopener">language-tour</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;条件判断&lt;/li&gt;
&lt;li&gt;循环控制&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;环境&quot;&gt;&lt;a href=&quot;#环境&quot; 
      
    
    </summary>
    
      <category term="Dart语言学习" scheme="https://blog.ducafecat.tech/categories/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="dart" scheme="https://blog.ducafecat.tech/tags/dart/"/>
    
  </entry>
  
  <entry>
    <title>Dart语言学习 - 16 操作符</title>
    <link href="https://blog.ducafecat.tech/2018/11/12/dart/dart-16-operators/"/>
    <id>https://blog.ducafecat.tech/2018/11/12/dart/dart-16-operators/</id>
    <published>2018-11-12T02:41:28.000Z</published>
    <updated>2019-08-01T18:39:22.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>优先级</li><li>算术操作符</li><li>相等相关的操作符</li><li>类型判定操作符</li><li>赋值操作符</li><li>逻辑操作符</li><li>位和移位操作符</li><li>条件表达式</li><li>级联操作符</li></ul><h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><ul><li>Dart 2.0.0</li></ul><h1 id="操作符表"><a href="#操作符表" class="headerlink" title="操作符表"></a>操作符表</h1><table><thead><tr><th>描述</th><th>操作符</th></tr></thead><tbody><tr><td> 后缀操作</td><td>expr++ expr– () [] . ?.</td></tr><tr><td>前缀操作</td><td>-expr !expr ~expr ++expr –expr</td></tr><tr><td>乘除</td><td>* / % ~/</td></tr><tr><td>加减</td><td>+ -</td></tr><tr><td>位移</td><td>&lt;&lt; &gt;&gt;</td></tr><tr><td>按位与</td><td>&amp;</td></tr><tr><td>按位异或</td><td>^</td></tr><tr><td>按位或</td><td>\</td><td></td></tr><tr><td>类型操作</td><td>&gt;= &gt; &lt;= &lt; as is is!</td></tr><tr><td>相等</td><td>== !=</td></tr><tr><td>逻辑与</td><td>&amp;&amp;</td></tr><tr><td>逻辑或</td><td>\</td><td>\</td><td></td></tr><tr><td>是为为空</td><td>??</td></tr><tr><td>三目运算</td><td>expr1 ? expr2 : expr3</td></tr><tr><td>级联</td><td>..</td></tr><tr><td>赋值</td><td>= *= /= ~/= %= += -= &lt;&lt;= &gt;&gt;= &amp;= ^= \</td><td>= ??=</td></tr></tbody></table><blockquote><p>优先级顺序 <code>上面左边</code> 优先级高于 <code>右边下面</code></p></blockquote><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(x == <span class="number">1</span> &amp;&amp; y == <span class="number">2</span>)&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="算术操作符"><a href="#算术操作符" class="headerlink" title="算术操作符"></a>算术操作符</h1><table><thead><tr><th>操作符</th><th>解释</th></tr></thead><tbody><tr><td>+</td><td>加号</td></tr><tr><td>–</td><td>减号</td></tr><tr><td>-expr</td><td>负号</td></tr><tr><td>*</td><td>乘号</td></tr><tr><td>/</td><td>除号</td></tr><tr><td>~/</td><td>除号，但是返回值为整数</td></tr><tr><td>%</td><td>取模</td></tr></tbody></table><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="number">5</span>/<span class="number">2</span>);</span><br><span class="line"><span class="built_in">print</span>(<span class="number">5</span>~/<span class="number">2</span>);</span><br><span class="line"><span class="built_in">print</span>(<span class="number">5</span> % <span class="number">2</span>);</span><br></pre></td></tr></table></figure><h1 id="相等相关的操作符"><a href="#相等相关的操作符" class="headerlink" title="相等相关的操作符"></a>相等相关的操作符</h1><table><thead><tr><th>操作符</th><th>解释</th></tr></thead><tbody><tr><td>==</td><td>相等</td></tr><tr><td>!=</td><td>不等</td></tr><tr><td>&gt;</td><td>大于</td></tr><tr><td>&lt;</td><td>小于</td></tr><tr><td>&gt;=</td><td>大于等于</td></tr><tr><td>&lt;=</td><td>小于等于</td></tr></tbody></table><h1 id="类型判定操作符"><a href="#类型判定操作符" class="headerlink" title="类型判定操作符"></a>类型判定操作符</h1><table><thead><tr><th>操作符</th><th>解释</th></tr></thead><tbody><tr><td>as</td><td>类型转换</td></tr><tr><td>is</td><td>如果对象是指定的类型返回 True</td></tr><tr><td>is!</td><td>如果对象是指定的类型返回 False</td></tr></tbody></table><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> a = <span class="number">123</span>;</span><br><span class="line"><span class="built_in">String</span> b = <span class="string">'ducafecat'</span>;</span><br><span class="line"><span class="built_in">String</span> c = <span class="string">'abc'</span>;</span><br><span class="line"><span class="built_in">print</span>(a <span class="keyword">as</span> <span class="built_in">Object</span>);</span><br><span class="line"><span class="built_in">print</span>(b <span class="keyword">is</span> <span class="built_in">String</span>);</span><br><span class="line"><span class="built_in">print</span>(c <span class="keyword">is</span>! <span class="built_in">String</span>);</span><br></pre></td></tr></table></figure><h1 id="条件表达式"><a href="#条件表达式" class="headerlink" title="条件表达式"></a>条件表达式</h1><table><thead><tr><th>操作符</th><th>解释</th></tr></thead><tbody><tr><td>condition ? expr1 : expr2</td><td>如果 condition 是 true，执行 expr1 (并返回执行的结果)； 否则执行 expr2 并返回其结果。</td></tr><tr><td>expr1 ?? expr2</td><td>如果 expr1 是 non-null，返回其值； 否则执行 expr2 并返回其结果。</td></tr></tbody></table><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">bool</span> isFinish = <span class="keyword">true</span>;</span><br><span class="line"><span class="built_in">String</span> txtVal = isFinish ? <span class="string">'yes'</span> : <span class="string">'no'</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">bool</span> isFinish;</span><br><span class="line">isFinish = isFinish ?? <span class="keyword">false</span>;</span><br><span class="line">or</span><br><span class="line">isFinish ??= <span class="keyword">false</span>;</span><br></pre></td></tr></table></figure><h1 id="位和移位操作符"><a href="#位和移位操作符" class="headerlink" title="位和移位操作符"></a>位和移位操作符</h1><table><thead><tr><th>操作符</th><th>解释</th></tr></thead><tbody><tr><td>&amp;</td><td>逻辑与</td></tr><tr><td></td><td>逻辑或</td></tr><tr><td>^</td><td>逻辑异或</td></tr><tr><td>~expr</td><td>取反</td></tr><tr><td>&lt;&lt;</td><td>左移</td></tr><tr><td>&gt;&gt;</td><td>右移</td></tr></tbody></table><h1 id="级联操作符"><a href="#级联操作符" class="headerlink" title="级联操作符"></a>级联操作符</h1><table><thead><tr><th>操作符</th><th>解释</th></tr></thead><tbody><tr><td>..</td><td>可以在同一个对象上 连续调用多个函数以及访问成员变量。</td></tr></tbody></table><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">StringBuffer</span> sb = <span class="keyword">new</span> <span class="built_in">StringBuffer</span>();</span><br><span class="line">sb</span><br><span class="line">..write(<span class="string">'hello'</span>)</span><br><span class="line">..write(<span class="string">'word'</span>)</span><br><span class="line">..write(<span class="string">'\n'</span>)</span><br><span class="line">..writeln(<span class="string">'doucafecat'</span>);</span><br></pre></td></tr></table></figure><h1 id="其他操作符"><a href="#其他操作符" class="headerlink" title="其他操作符"></a>其他操作符</h1><table><thead><tr><th>操作符</th><th>解释</th></tr></thead><tbody><tr><td>()</td><td>使用方法 代表调用一个方法</td></tr><tr><td>[]</td><td>访问 List 访问 list 中特定位置的元素</td></tr><tr><td>.</td><td>访问 Member 访问元素，例如 foo.bar 代表访问 foo 的 bar 成员</td></tr><tr><td>?.</td><td>条件成员访问 和 . 类似，但是左边的操作对象不能为 null，例如 foo?.bar 如果 foo 为 null 则返回 null，否则返回 bar 成员</td></tr></tbody></table><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span> a;</span><br><span class="line"><span class="built_in">print</span>(a?.length);</span><br></pre></td></tr></table></figure><h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><ul><li><a href="https://github.com/ducafecat/dart-learn/blob/master/16-%E6%93%8D%E4%BD%9C%E7%AC%A6/operator.dart" target="_blank" rel="noopener">operator.dart</a></li></ul><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul><li><a href="https://www.dartlang.org/guides/language/language-tour#operators" target="_blank" rel="noopener">operators</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;优先级&lt;/li&gt;
&lt;li&gt;算术操作符&lt;/li&gt;
&lt;li&gt;相等相关的操作符&lt;/li&gt;
&lt;li&gt;类型判定操作符&lt;/l
      
    
    </summary>
    
      <category term="Dart语言学习" scheme="https://blog.ducafecat.tech/categories/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="dart" scheme="https://blog.ducafecat.tech/tags/dart/"/>
    
  </entry>
  
  <entry>
    <title>Dart语言学习 - 15 函数 Function</title>
    <link href="https://blog.ducafecat.tech/2018/11/12/dart/dart-15-function/"/>
    <id>https://blog.ducafecat.tech/2018/11/12/dart/dart-15-function/</id>
    <published>2018-11-12T01:36:04.000Z</published>
    <updated>2019-08-01T18:39:22.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>函数定义</li><li>可选参数</li><li>默认值</li><li>命名参数</li><li>内部定义</li></ul><h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><ul><li>Dart 2.0.0</li></ul><h1 id="函数定义"><a href="#函数定义" class="headerlink" title="函数定义"></a>函数定义</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> add(<span class="built_in">int</span> x) &#123;</span><br><span class="line">  <span class="keyword">return</span> x + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">调用</span><br><span class="line">add(<span class="number">1</span>);</span><br></pre></td></tr></table></figure><h1 id="可选参数"><a href="#可选参数" class="headerlink" title="可选参数"></a>可选参数</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> add(<span class="built_in">int</span> x, [<span class="built_in">int</span> y, <span class="built_in">int</span> z]) &#123;</span><br><span class="line">  <span class="keyword">if</span> (y == <span class="keyword">null</span>) &#123;</span><br><span class="line">    y = <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (z == <span class="keyword">null</span>) &#123;</span><br><span class="line">    z = <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> x + y + z;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">调用</span><br><span class="line"><span class="built_in">int</span>(<span class="number">1</span>, <span class="number">2</span>);</span><br></pre></td></tr></table></figure><h1 id="可选参数-默认值"><a href="#可选参数-默认值" class="headerlink" title="可选参数 默认值"></a>可选参数 默认值</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> add(<span class="built_in">int</span> x, [<span class="built_in">int</span> y = <span class="number">1</span>, <span class="built_in">int</span> z = <span class="number">2</span>]) &#123;</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">调用</span><br><span class="line"><span class="built_in">int</span>(<span class="number">1</span>, <span class="number">2</span>);</span><br></pre></td></tr></table></figure><h1 id="命名参数-默认值"><a href="#命名参数-默认值" class="headerlink" title="命名参数 默认值"></a>命名参数 默认值</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> add(&#123;<span class="built_in">int</span> x = <span class="number">1</span>, <span class="built_in">int</span> y = <span class="number">1</span>, <span class="built_in">int</span> z = <span class="number">1</span>&#125;) &#123;</span><br><span class="line">  <span class="keyword">return</span> x + y + z;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">调用</span><br><span class="line"><span class="built_in">int</span>(x: <span class="number">1</span>, y: <span class="number">2</span>);</span><br></pre></td></tr></table></figure><h1 id="函数内定义"><a href="#函数内定义" class="headerlink" title="函数内定义"></a>函数内定义</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main()&#123;</span><br><span class="line">  <span class="built_in">int</span> add(<span class="built_in">int</span> x)&#123;</span><br><span class="line">    <span class="keyword">return</span> x + x;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">print</span>(add(<span class="number">1</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Funcation-返回函数对象"><a href="#Funcation-返回函数对象" class="headerlink" title="Funcation 返回函数对象"></a>Funcation 返回函数对象</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span> makeAdd(<span class="built_in">int</span> x) &#123;</span><br><span class="line">  <span class="keyword">return</span> (<span class="built_in">int</span> y) =&gt; x + y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">调用</span><br><span class="line"><span class="keyword">var</span> add = makeAdd(<span class="number">1</span>);</span><br><span class="line"><span class="built_in">print</span>(add(<span class="number">5</span>));</span><br></pre></td></tr></table></figure><h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><ul><li><a href="https://github.com/ducafecat/dart-learn/blob/master/15-%E5%87%BD%E6%95%B0-function/function.dart" target="_blank" rel="noopener">function.dart</a></li></ul><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul><li><a href="https://www.dartlang.org/guides/language/language-tour#functions" target="_blank" rel="noopener">Functions</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;函数定义&lt;/li&gt;
&lt;li&gt;可选参数&lt;/li&gt;
&lt;li&gt;默认值&lt;/li&gt;
&lt;li&gt;命名参数&lt;/li&gt;
&lt;li&gt;内
      
    
    </summary>
    
      <category term="Dart语言学习" scheme="https://blog.ducafecat.tech/categories/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="dart" scheme="https://blog.ducafecat.tech/tags/dart/"/>
    
  </entry>
  
  <entry>
    <title>Dart语言学习 - 14 symbol、enum、comments</title>
    <link href="https://blog.ducafecat.tech/2018/10/27/dart/dart-14-symbol-enum-comments/"/>
    <id>https://blog.ducafecat.tech/2018/10/27/dart/dart-14-symbol-enum-comments/</id>
    <published>2018-10-27T03:05:15.000Z</published>
    <updated>2019-08-01T18:39:22.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>symbol</li><li>enum</li><li>comments</li></ul><h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><ul><li>Dart 2.0.0</li></ul><h1 id="符号-Symbol"><a href="#符号-Symbol" class="headerlink" title="符号 Symbol"></a>符号 Symbol</h1><p>Dart语言的标识符，在反射中用的很普及，特别是很多发布包都是混淆后的。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'dart:mirrors'</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Symbol</span> libraryName = <span class="keyword">new</span> <span class="built_in">Symbol</span>(<span class="string">'dart.core'</span>);</span><br><span class="line">MirrorSystem mirrorSystem = currentMirrorSystem();</span><br><span class="line">LibraryMirror libMirror = mirrorSystem.findLibrary(libraryName);</span><br><span class="line">libMirror.declarations.forEach((s, d) =&gt; <span class="built_in">print</span>(<span class="string">'$s - $d'</span>));</span><br></pre></td></tr></table></figure><h1 id="枚举-Enum"><a href="#枚举-Enum" class="headerlink" title="枚举 Enum"></a>枚举 Enum</h1><p>适合用在常量定义，类型比较很方便。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> Status &#123; none, running, stopped, paused &#125;</span><br><span class="line"></span><br><span class="line">Status.values.forEach((it) =&gt; <span class="built_in">print</span>(<span class="string">'$it - index: <span class="subst">$&#123;it.index&#125;</span>'</span>));</span><br></pre></td></tr></table></figure><h1 id="注释-Comments"><a href="#注释-Comments" class="headerlink" title="注释 Comments"></a>注释 Comments</h1><h2 id="单行注释"><a href="#单行注释" class="headerlink" title="单行注释"></a>单行注释</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Symbol libraryName = new Symbol('dart.core');</span></span><br></pre></td></tr></table></figure><h2 id="多行注释"><a href="#多行注释" class="headerlink" title="多行注释"></a>多行注释</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Symbol</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment">Symbol libraryName = new Symbol('dart.core');</span></span><br><span class="line"><span class="comment">MirrorSystem mirrorSystem = currentMirrorSystem();</span></span><br><span class="line"><span class="comment">LibraryMirror libMirror = mirrorSystem.findLibrary(libraryName);</span></span><br><span class="line"><span class="comment">libMirror.declarations.forEach((s, d) =&gt; print('$s - $d')); </span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h2 id="文档注释"><a href="#文档注释" class="headerlink" title="文档注释"></a>文档注释</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="markdown">/// <span class="code">`main`</span> 函数</span></span></span><br><span class="line"><span class="comment"><span class="markdown">///</span></span></span><br><span class="line"><span class="comment"><span class="markdown">/// 符号</span></span></span><br><span class="line"><span class="comment"><span class="markdown">/// 枚举</span></span></span><br><span class="line"><span class="comment"><span class="markdown">///</span></span></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>可参考 <code>String</code> 类中的注释使用</p><h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><ul><li><a href="https://github.com/ducafecat/dart-learn/tree/master/14-symbol-enum-comments" target="_blank" rel="noopener">symbol-enum-comments.dart</a></li></ul><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul><li><a href="https://www.dartlang.org/guides/language/language-tour" target="_blank" rel="noopener">language-tour</a></li><li><a href="https://api.dartlang.org/stable/2.0.0/dart-core/Symbol-class.html" target="_blank" rel="noopener">Symbol</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;symbol&lt;/li&gt;
&lt;li&gt;enum&lt;/li&gt;
&lt;li&gt;comments&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id
      
    
    </summary>
    
      <category term="Dart语言学习" scheme="https://blog.ducafecat.tech/categories/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="dart" scheme="https://blog.ducafecat.tech/tags/dart/"/>
    
  </entry>
  
  <entry>
    <title>Dart语言学习 - 13 Runes</title>
    <link href="https://blog.ducafecat.tech/2018/10/27/dart/dart-13-runes/"/>
    <id>https://blog.ducafecat.tech/2018/10/27/dart/dart-13-runes/</id>
    <published>2018-10-27T00:51:21.000Z</published>
    <updated>2019-08-01T18:39:22.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>Runes</li><li>基础知识 字符编码 ASCII、Unicode、UTF-8、UTF-16、UTF-32</li></ul><h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><ul><li>Dart 2.0.0</li></ul><h1 id="Runes"><a href="#Runes" class="headerlink" title="Runes"></a>Runes</h1><p>Runes 对象是一个 32位 字符对象，用来表示一个字。<br>这样设计也是考虑兼容 UTF-16 四个字节的情况。</p><h2 id="length-和-runes-length-比较"><a href="#length-和-runes-length-比较" class="headerlink" title="length 和 runes.length 比较"></a><code>length</code> 和 <code>runes.length</code> 比较</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span> a = <span class="string">'👺'</span>;</span><br><span class="line"><span class="built_in">print</span>(a.length);</span><br><span class="line"><span class="built_in">print</span>(a.runes.length);</span><br><span class="line"></span><br><span class="line">&gt;&gt; 输出</span><br><span class="line"><span class="number">2</span> <span class="comment">// 标识占 2 个 16 位字符</span></span><br><span class="line"><span class="number">1</span> <span class="comment">// 表示占 1 个 32 位字符</span></span><br></pre></td></tr></table></figure><blockquote><p>runes 是一个 32 位字符对象</p></blockquote><h2 id="操作-32-bit-Unicode-字符"><a href="#操作-32-bit-Unicode-字符" class="headerlink" title="操作 32-bit Unicode 字符"></a>操作 32-bit Unicode 字符</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Runes b = <span class="keyword">new</span> Runes(<span class="string">'\u&#123;1f596&#125; \u6211'</span>);</span><br><span class="line"><span class="keyword">var</span> c = <span class="built_in">String</span>.fromCharCodes(b);</span><br><span class="line"></span><br><span class="line">或者</span><br><span class="line"></span><br><span class="line"><span class="built_in">String</span> c = <span class="string">'\u&#123;1f596&#125; \u6211'</span></span><br></pre></td></tr></table></figure><blockquote><p>如果非4个数值，需要用 {…}</p></blockquote><h2 id="返回-16-bit-code-units-的-codeUnitAt-codeUnits"><a href="#返回-16-bit-code-units-的-codeUnitAt-codeUnits" class="headerlink" title="返回 16-bit code units 的 codeUnitAt codeUnits"></a>返回 16-bit code units 的 <code>codeUnitAt</code> <code>codeUnits</code></h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">'👺'</span>;</span><br><span class="line"><span class="built_in">print</span>(a.codeUnitAt(<span class="number">0</span>));</span><br><span class="line"><span class="built_in">print</span>(a.codeUnits);</span><br><span class="line"></span><br><span class="line">&gt;&gt; 输出</span><br><span class="line"><span class="number">55357</span>           <span class="comment">// 第 1 位的 10 进制数值</span></span><br><span class="line">[<span class="number">55357</span>, <span class="number">56442</span>]  <span class="comment">// 显示 2 位的 10 进制数值</span></span><br></pre></td></tr></table></figure><h2 id="返回-32-bit-Unicode-的-runes"><a href="#返回-32-bit-Unicode-的-runes" class="headerlink" title="返回 32-bit Unicode 的 runes"></a>返回 32-bit Unicode 的 <code>runes</code></h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">'👺'</span>;</span><br><span class="line"><span class="built_in">print</span>(a.runes);</span><br><span class="line"></span><br><span class="line">&gt;&gt; 输出</span><br><span class="line"></span><br><span class="line">(<span class="number">128122</span>) <span class="comment">// 显示 32 位的 10 进制数值</span></span><br></pre></td></tr></table></figure><h2 id="String-操作整理"><a href="#String-操作整理" class="headerlink" title="String 操作整理"></a>String 操作整理</h2><table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>codeUnitAt</td><td>某个字符的码 10进制</td></tr><tr><td>fromCharCodes</td><td>Runes 转 String 工厂函数</td></tr><tr><td>runes</td><td>返回字对象</td></tr></tbody></table><h1 id="基础知识字符集"><a href="#基础知识字符集" class="headerlink" title="基础知识字符集"></a>基础知识字符集</h1><h2 id="ASCII"><a href="#ASCII" class="headerlink" title="ASCII"></a>ASCII</h2><ul><li><a href="https://zh.wikipedia.org/wiki/ASCII" target="_blank" rel="noopener">ASCII</a></li></ul><h2 id="非-ASCII-中的-GB2312、GBK"><a href="#非-ASCII-中的-GB2312、GBK" class="headerlink" title="非 ASCII 中的 GB2312、GBK"></a>非 ASCII 中的 GB2312、GBK</h2><ul><li><a href="https://zh.wikipedia.org/wiki/%E6%B1%89%E5%AD%97%E5%86%85%E7%A0%81%E6%89%A9%E5%B1%95%E8%A7%84%E8%8C%83" target="_blank" rel="noopener">汉字内码扩展规范</a></li></ul><h2 id="Unicode、UTF-8、UTF-16、UTF-32"><a href="#Unicode、UTF-8、UTF-16、UTF-32" class="headerlink" title="Unicode、UTF-8、UTF-16、UTF-32"></a>Unicode、UTF-8、UTF-16、UTF-32</h2><ul><li><a href="https://zh.wikipedia.org/wiki/UTF-8" target="_blank" rel="noopener">UTF-8</a></li><li><a href="https://zh.wikipedia.org/wiki/UTF-16" target="_blank" rel="noopener">UTF-16</a></li><li><a href="https://zh.wikipedia.org/wiki/UTF-32" target="_blank" rel="noopener">UTF-32</a></li></ul><h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><ul><li><a href="https://github.com/ducafecat/dart-learn/blob/master/13-Runes/runes.dart" target="_blank" rel="noopener">runes.dart</a></li></ul><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul><li><a href="https://www.dartlang.org/guides/language/language-tour" target="_blank" rel="noopener">language-tour</a></li><li><a href="https://api.dartlang.org/stable/2.0.0/dart-core/Runes-class.html" target="_blank" rel="noopener">Runes</a></li><li><a href="https://zh.wikipedia.org/wiki/ASCII" target="_blank" rel="noopener">ASCII</a></li><li><a href="https://zh.wikipedia.org/wiki/Unicode" target="_blank" rel="noopener">Unicode</a></li><li><a href="https://zh.wikipedia.org/wiki/UTF-8" target="_blank" rel="noopener">UTF-8</a></li><li><a href="https://zh.wikipedia.org/wiki/UTF-16" target="_blank" rel="noopener">UTF-16</a></li><li><a href="https://zh.wikipedia.org/wiki/UTF-32" target="_blank" rel="noopener">UTF-32</a></li><li><a href="http://copychar.cc/popular/" target="_blank" rel="noopener">在线字符</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;Runes&lt;/li&gt;
&lt;li&gt;基础知识 字符编码 ASCII、Unicode、UTF-8、UTF-16、UTF-
      
    
    </summary>
    
      <category term="Dart语言学习" scheme="https://blog.ducafecat.tech/categories/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="dart" scheme="https://blog.ducafecat.tech/tags/dart/"/>
    
  </entry>
  
  <entry>
    <title>Dart语言学习 - 12 Set</title>
    <link href="https://blog.ducafecat.tech/2018/10/25/dart/dart-12-set/"/>
    <id>https://blog.ducafecat.tech/2018/10/25/dart/dart-12-set/</id>
    <published>2018-10-25T06:47:10.000Z</published>
    <updated>2019-08-01T18:39:22.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>初始、声明</li><li>常用属性</li><li>常用方法</li></ul><h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><ul><li>Dart 2.0.0</li></ul><h1 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h1><p><code>Set</code> 是一个元素唯一的有序队列</p><h2 id="松散"><a href="#松散" class="headerlink" title="松散"></a>松散</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// var a = new Set();</span></span><br><span class="line"><span class="comment">// a.add('java');</span></span><br><span class="line"><span class="comment">// a.add('php');</span></span><br><span class="line"><span class="comment">// a.add('python');</span></span><br><span class="line"><span class="comment">// a.add('java');</span></span><br><span class="line"><span class="comment">// a.add('sql');</span></span><br><span class="line"><span class="comment">// a.add('swift');</span></span><br><span class="line"><span class="comment">// a.add('dart');</span></span><br></pre></td></tr></table></figure><h2 id="强类型"><a href="#强类型" class="headerlink" title="强类型"></a>强类型</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// var b = new Set&lt;String&gt;();</span></span><br><span class="line"><span class="comment">// b.addAll(['dart', 'c#', 'j#', 'e#']);</span></span><br></pre></td></tr></table></figure><h1 id="基本属性"><a href="#基本属性" class="headerlink" title="基本属性"></a>基本属性</h1><table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>isEmpty</td><td>是否为空</td></tr><tr><td>isNotEmpty</td><td>是否不为空</td></tr><tr><td>first</td><td>第一个</td></tr><tr><td>last</td><td>最后一个</td></tr><tr><td>length</td><td>个数</td></tr></tbody></table><h1 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h1><table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>addAll</td><td>添加</td></tr><tr><td>contains</td><td>查询单个</td></tr><tr><td>containsAll</td><td>查询多个</td></tr><tr><td>difference</td><td>集合不同</td></tr><tr><td>intersection</td><td>交集</td></tr><tr><td>union</td><td>联合</td></tr><tr><td>lookup</td><td>按对象查询到返回对象</td></tr><tr><td>remove</td><td>删除单个</td></tr><tr><td>removeAll</td><td>删除多个</td></tr><tr><td>clear</td><td>清空</td></tr><tr><td>firstWhere</td><td>按条件正向查询</td></tr><tr><td>lastWhere</td><td>按条件反向查询</td></tr><tr><td>removeWhere</td><td>按条件删除</td></tr><tr><td>retainAll</td><td>只保留几个</td></tr><tr><td>retainWhere</td><td>按条件只保留几个</td></tr></tbody></table><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// b.addAll(['dart', 'c#', 'j#', 'e#']);</span></span><br><span class="line"><span class="comment">// print(b.contains('dart'));</span></span><br><span class="line"><span class="comment">// print(b.containsAll(['dart', 'swift']));</span></span><br><span class="line"><span class="comment">// print('b =&gt; $b');</span></span><br><span class="line"><span class="comment">// print(a.difference(b));</span></span><br><span class="line"><span class="comment">// print(a.intersection(b));</span></span><br><span class="line"><span class="comment">// print(b.lookup('dart'));</span></span><br><span class="line"><span class="comment">// print(b.union(a));</span></span><br><span class="line"><span class="comment">// b.remove('dart');</span></span><br><span class="line"><span class="comment">// b.removeAll(['dart','c#']);</span></span><br><span class="line"><span class="comment">// b.clear();</span></span><br><span class="line"><span class="comment">// print(b.firstWhere((it) =&gt; it == 'c#'));</span></span><br><span class="line"><span class="comment">// print(b.lastWhere((it) =&gt; it == 'c#'));</span></span><br><span class="line"><span class="comment">// b.removeWhere((it) =&gt; it == 'c#');</span></span><br><span class="line"><span class="comment">// b.retainAll(['e#']);</span></span><br><span class="line"><span class="comment">// b.retainWhere((it) =&gt; it == 'e#');</span></span><br><span class="line"><span class="comment">// b.retainWhere((it) &#123;</span></span><br><span class="line"><span class="comment">//   bool ret = it == 'e#';</span></span><br><span class="line"><span class="comment">//   return ret;</span></span><br><span class="line"><span class="comment">// &#125;);</span></span><br></pre></td></tr></table></figure><h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><ul><li><a href="https://github.com/ducafecat/dart-learn/blob/master/12-Set/set.dart" target="_blank" rel="noopener">set.dart</a></li></ul><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul><li><a href="https://www.dartlang.org/guides/language/language-tour" target="_blank" rel="noopener">language-tour</a></li><li><a href="https://api.dartlang.org/stable/2.0.0/dart-core/Set-class.html" target="_blank" rel="noopener">Set</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;初始、声明&lt;/li&gt;
&lt;li&gt;常用属性&lt;/li&gt;
&lt;li&gt;常用方法&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;环境&quot;
      
    
    </summary>
    
      <category term="Dart语言学习" scheme="https://blog.ducafecat.tech/categories/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="dart" scheme="https://blog.ducafecat.tech/tags/dart/"/>
    
  </entry>
  
  <entry>
    <title>Dart语言学习 - 11 Map</title>
    <link href="https://blog.ducafecat.tech/2018/10/23/dart/dart-11-map/"/>
    <id>https://blog.ducafecat.tech/2018/10/23/dart/dart-11-map/</id>
    <published>2018-10-23T07:36:12.000Z</published>
    <updated>2019-08-01T18:39:22.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>初始、声明</li><li>常用属性</li><li>常用方法</li></ul><h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><ul><li>Dart 2.0.0</li></ul><h1 id="初始"><a href="#初始" class="headerlink" title="初始"></a>初始</h1><p>key value 形式的集合</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;<span class="string">'name'</span>: <span class="string">'ducafecat'</span>, <span class="string">'web'</span>: <span class="string">'www.ducafecat.tech'</span>&#125;;</span><br></pre></td></tr></table></figure><h1 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h1><h2 id="松散"><a href="#松散" class="headerlink" title="松散"></a>松散</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">a[<span class="string">'name'</span>] = <span class="string">'ducafecat'</span>;</span><br><span class="line">a[<span class="string">'web'</span>] = <span class="string">'www.ducafecat.tech'</span>;</span><br><span class="line">a[<span class="number">0</span>] = <span class="string">'abc'</span>;</span><br></pre></td></tr></table></figure><h2 id="强类型"><a href="#强类型" class="headerlink" title="强类型"></a>强类型</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> b = <span class="keyword">new</span> <span class="built_in">Map</span>&lt;<span class="built_in">int</span>, <span class="built_in">String</span>&gt;();</span><br><span class="line">b[<span class="number">0</span>] = <span class="string">'java'</span>;</span><br><span class="line">b[<span class="number">1</span>] = <span class="string">'python'</span>;</span><br></pre></td></tr></table></figure><h1 id="基本属性"><a href="#基本属性" class="headerlink" title="基本属性"></a>基本属性</h1><table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>isEmpty</td><td>是否为空</td></tr><tr><td>isNotEmpty</td><td>是否不为空</td></tr><tr><td>keys</td><td>key 集合</td></tr><tr><td>values</td><td>values 集合</td></tr><tr><td>length</td><td>个数</td></tr><tr><td>entries</td><td>加工数据入口</td></tr></tbody></table><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(a.isEmpty);</span><br><span class="line"><span class="built_in">print</span>(a.isNotEmpty);</span><br><span class="line"><span class="built_in">print</span>(a.keys);</span><br><span class="line"><span class="built_in">print</span>(a.values);</span><br><span class="line"><span class="built_in">print</span>(a.length);</span><br><span class="line"><span class="built_in">print</span>(a.entries);</span><br></pre></td></tr></table></figure><h1 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h1><table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>addAll</td><td>添加</td></tr><tr><td>addEntries</td><td>从入口添加</td></tr><tr><td>containsKey</td><td>按 key 查询</td></tr><tr><td>containsValue</td><td>按 value 查询</td></tr><tr><td>clear</td><td>清空</td></tr><tr><td>remove</td><td>删除某个</td></tr><tr><td>removeWhere</td><td>按条件删除</td></tr><tr><td>update</td><td>更新某个</td></tr><tr><td>updateAll</td><td>按条件更新</td></tr></tbody></table><h2 id="addAll"><a href="#addAll" class="headerlink" title="addAll"></a>addAll</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b.addAll(&#123;<span class="string">'first'</span>: <span class="string">'java'</span>, <span class="string">'second'</span>: <span class="string">'python'</span>&#125;);</span><br></pre></td></tr></table></figure><h2 id="addEntries"><a href="#addEntries" class="headerlink" title="addEntries"></a>addEntries</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b.addEntries(a.entries);</span><br></pre></td></tr></table></figure><h2 id="containsKey"><a href="#containsKey" class="headerlink" title="containsKey"></a>containsKey</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(a.containsKey(<span class="string">'name'</span>));</span><br></pre></td></tr></table></figure><h2 id="containsValue"><a href="#containsValue" class="headerlink" title="containsValue"></a>containsValue</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(a.containsValue(<span class="string">'www.ducafecat.tech'</span>));</span><br></pre></td></tr></table></figure><h2 id="clear"><a href="#clear" class="headerlink" title="clear"></a>clear</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b.clear();</span><br></pre></td></tr></table></figure><h2 id="remove"><a href="#remove" class="headerlink" title="remove"></a>remove</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a.remove(<span class="string">'name'</span>);</span><br></pre></td></tr></table></figure><h2 id="removeWhere"><a href="#removeWhere" class="headerlink" title="removeWhere"></a>removeWhere</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a.removeWhere((key,val) =&gt; key == <span class="string">'name'</span>);</span><br></pre></td></tr></table></figure><h2 id="update"><a href="#update" class="headerlink" title="update"></a>update</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a.update(<span class="string">'name'</span>, (val) =&gt; <span class="string">'abc'</span>);</span><br></pre></td></tr></table></figure><h2 id="updateAll"><a href="#updateAll" class="headerlink" title="updateAll"></a>updateAll</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a.updateAll((key, val) =&gt; <span class="string">"---$val---"</span>);</span><br></pre></td></tr></table></figure><h1 id="操作符"><a href="#操作符" class="headerlink" title="操作符"></a>操作符</h1><table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>[]</td><td>取值</td></tr><tr><td>[]=</td><td>赋值</td></tr></tbody></table><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(a[<span class="string">'name'</span>]);</span><br><span class="line">a[<span class="string">'name'</span>] = <span class="string">'abc'</span>;</span><br></pre></td></tr></table></figure><h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><ul><li><a href="https://github.com/ducafecat/dart-learn/blob/master/11-Map/map.dart" target="_blank" rel="noopener">map.dart</a></li></ul><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul><li><a href="https://www.dartlang.org/guides/language/language-tour" target="_blank" rel="noopener">language-tour</a></li><li><a href="https://api.dartlang.org/stable/2.0.0/dart-core/Map-class.html" target="_blank" rel="noopener">Map</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;初始、声明&lt;/li&gt;
&lt;li&gt;常用属性&lt;/li&gt;
&lt;li&gt;常用方法&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;环境&quot;
      
    
    </summary>
    
      <category term="Dart语言学习" scheme="https://blog.ducafecat.tech/categories/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="dart" scheme="https://blog.ducafecat.tech/tags/dart/"/>
    
  </entry>
  
  <entry>
    <title>Dart语言学习 - 10 列表</title>
    <link href="https://blog.ducafecat.tech/2018/10/19/dart/dart-10-list/"/>
    <id>https://blog.ducafecat.tech/2018/10/19/dart/dart-10-list/</id>
    <published>2018-10-19T02:49:35.000Z</published>
    <updated>2019-08-01T18:39:22.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>初始、声明</li><li>常用属性</li><li>常用方法</li></ul><h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><ul><li>Dart 2.0.0</li></ul><h1 id="初始"><a href="#初始" class="headerlink" title="初始"></a>初始</h1><p>List 是一个有序列表</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> l = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="built_in">print</span>(l);</span><br></pre></td></tr></table></figure><h1 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h1><h2 id="自动"><a href="#自动" class="headerlink" title="自动"></a>自动</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">List</span>&lt;<span class="built_in">int</span>&gt; l = <span class="keyword">new</span> <span class="built_in">List</span>();</span><br><span class="line">l</span><br><span class="line">..add(<span class="number">1</span>)</span><br><span class="line">..add(<span class="number">2</span>)</span><br><span class="line">..add(<span class="number">3</span>);</span><br><span class="line"><span class="built_in">print</span>(l);</span><br></pre></td></tr></table></figure><h2 id="定长"><a href="#定长" class="headerlink" title="定长"></a>定长</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">List</span>&lt;<span class="built_in">int</span>&gt; l = <span class="keyword">new</span> <span class="built_in">List</span>(<span class="number">3</span>);</span><br><span class="line"><span class="comment">// print(l[0]);</span></span><br><span class="line">l[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">l[<span class="number">1</span>] = <span class="number">2</span>;</span><br><span class="line">l[<span class="number">2</span>] = <span class="number">3</span>;</span><br><span class="line"><span class="built_in">print</span>(l);</span><br></pre></td></tr></table></figure><h1 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h1><table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>isEmpty</td><td>是否为空</td></tr><tr><td>isNotEmpty</td><td>是否不为空</td></tr><tr><td>first</td><td>第一个对象</td></tr><tr><td>last</td><td>最后一个对象</td></tr><tr><td>length</td><td>个数</td></tr><tr><td>reversed</td><td>反转</td></tr></tbody></table><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> l = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="built_in">print</span>(l.first);</span><br><span class="line"><span class="built_in">print</span>(l.last);</span><br><span class="line"><span class="built_in">print</span>(l.length);</span><br><span class="line"><span class="built_in">print</span>(l.isEmpty);</span><br><span class="line"><span class="built_in">print</span>(l.isNotEmpty);</span><br><span class="line"><span class="built_in">print</span>(l.reversed);</span><br></pre></td></tr></table></figure><h1 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h1><table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>add</td><td>添加</td></tr><tr><td>addAll</td><td>添加多个</td></tr><tr><td>insert</td><td>插入</td></tr><tr><td>insertAll</td><td>插入多个</td></tr><tr><td>indexOf</td><td>查询</td></tr><tr><td>indexWhere</td><td>按条件查询</td></tr><tr><td>remove</td><td>删除</td></tr><tr><td>removeAt</td><td>按位置删除</td></tr><tr><td>fillRange</td><td>按区间填充</td></tr><tr><td>getRange</td><td>按区间获取</td></tr><tr><td>shuffle</td><td>随机变换顺序</td></tr><tr><td>sort</td><td>排序</td></tr><tr><td>sublist</td><td>创建子</td></tr></tbody></table><h2 id="添加"><a href="#添加" class="headerlink" title="添加"></a>添加</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">List</span>&lt;<span class="built_in">int</span>&gt; l = <span class="keyword">new</span> <span class="built_in">List</span>();</span><br><span class="line"></span><br><span class="line">l</span><br><span class="line">  ..add(<span class="number">1</span>)</span><br><span class="line">  ..addAll([<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>])</span><br><span class="line">  ..insert(<span class="number">0</span>, <span class="number">6</span>)</span><br><span class="line">  ..insertAll(<span class="number">6</span>, [<span class="number">6</span>, <span class="number">6</span>])</span><br><span class="line">  ;</span><br></pre></td></tr></table></figure><h2 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(l.indexOf(<span class="number">5</span>));</span><br><span class="line"><span class="built_in">print</span>(l.indexWhere((it) =&gt; it == <span class="number">4</span>));</span><br></pre></td></tr></table></figure><h2 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">l.remove(<span class="number">6</span>);</span><br><span class="line"><span class="built_in">print</span>(l);</span><br><span class="line">l.removeAt(<span class="number">5</span>);</span><br><span class="line"><span class="built_in">print</span>(l);</span><br></pre></td></tr></table></figure><h2 id="Range"><a href="#Range" class="headerlink" title="Range"></a>Range</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">l.fillRange(<span class="number">0</span>, <span class="number">3</span>, <span class="number">9</span>);</span><br><span class="line"><span class="built_in">print</span>(l.getRange(<span class="number">0</span>, <span class="number">5</span>));</span><br></pre></td></tr></table></figure><h2 id="洗牌"><a href="#洗牌" class="headerlink" title="洗牌"></a>洗牌</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">l.shuffle();</span><br><span class="line"><span class="built_in">print</span>(l);</span><br><span class="line">l.shuffle();</span><br><span class="line"><span class="built_in">print</span>(l);</span><br></pre></td></tr></table></figure><h2 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">数字</span><br><span class="line">l.sort();</span><br><span class="line"><span class="built_in">print</span>(l);</span><br><span class="line">日期</span><br><span class="line"><span class="built_in">List</span>&lt;<span class="built_in">DateTime</span>&gt; dtList = <span class="keyword">new</span> <span class="built_in">List</span>();</span><br><span class="line">dtList.addAll([</span><br><span class="line">  <span class="built_in">DateTime</span>.now(),</span><br><span class="line">  <span class="built_in">DateTime</span>.now().add(<span class="keyword">new</span> <span class="built_in">Duration</span>(days: <span class="number">-12</span>)),</span><br><span class="line">  <span class="built_in">DateTime</span>.now().add(<span class="keyword">new</span> <span class="built_in">Duration</span>(days: <span class="number">-2</span>))</span><br><span class="line">  ]);</span><br><span class="line"><span class="built_in">print</span>(dtList);</span><br><span class="line">dtList.sort((a, b) =&gt; a.compareTo(b));</span><br><span class="line"><span class="built_in">print</span>(dtList);</span><br></pre></td></tr></table></figure><h2 id="复制子列表"><a href="#复制子列表" class="headerlink" title="复制子列表"></a>复制子列表</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(l);</span><br><span class="line"><span class="keyword">var</span> l2 = l.sublist(<span class="number">1</span>,<span class="number">4</span>);</span><br><span class="line"><span class="built_in">print</span>(l2);</span><br></pre></td></tr></table></figure><h2 id="操作符"><a href="#操作符" class="headerlink" title="操作符"></a>操作符</h2><table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>+</td><td>连接</td></tr><tr><td>[]</td><td>取值</td></tr><tr><td>[]=</td><td>赋值</td></tr></tbody></table><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> l1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">var</span> l2 = [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line"><span class="built_in">print</span>(l1 + l2);</span><br><span class="line">l1[<span class="number">2</span>] = <span class="number">9</span>;</span><br><span class="line"><span class="built_in">print</span>(l1[<span class="number">2</span>]);</span><br></pre></td></tr></table></figure><h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><ul><li><a href="https://github.com/ducafecat/dart-learn/blob/master/10-%E5%88%97%E8%A1%A8/list.dart" target="_blank" rel="noopener">list.dart</a></li></ul><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul><li><a href="https://www.dartlang.org/guides/language/language-tour" target="_blank" rel="noopener">language-tour</a></li><li><a href="https://api.dartlang.org/stable/2.0.0/dart-core/List-class.html" target="_blank" rel="noopener">List</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;初始、声明&lt;/li&gt;
&lt;li&gt;常用属性&lt;/li&gt;
&lt;li&gt;常用方法&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;环境&quot;
      
    
    </summary>
    
      <category term="Dart语言学习" scheme="https://blog.ducafecat.tech/categories/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="dart" scheme="https://blog.ducafecat.tech/tags/dart/"/>
    
  </entry>
  
  <entry>
    <title>Dart语言学习 - 09 日期时间</title>
    <link href="https://blog.ducafecat.tech/2018/10/18/dart/dart-09-datetime/"/>
    <id>https://blog.ducafecat.tech/2018/10/18/dart/dart-09-datetime/</id>
    <published>2018-10-18T07:02:05.000Z</published>
    <updated>2019-08-01T18:39:22.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>声明</li><li>UTC 时间</li><li>公元时间</li><li>时间戳</li><li>解析标准时间</li><li>时间运算</li></ul><h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><ul><li>Dart 2.0.0</li></ul><h1 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">DateTime</span>.now();</span><br><span class="line"><span class="built_in">print</span>(now);</span><br><span class="line"><span class="keyword">var</span> d = <span class="keyword">new</span> <span class="built_in">DateTime</span>(<span class="number">2018</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">9</span>, <span class="number">30</span>);</span><br><span class="line"><span class="built_in">print</span>(d);</span><br></pre></td></tr></table></figure><h1 id="创建时间-UTC"><a href="#创建时间-UTC" class="headerlink" title="创建时间 UTC"></a>创建时间 UTC</h1><ul><li><a href="https://zh.wikipedia.org/wiki/%E5%8D%8F%E8%B0%83%E4%B8%96%E7%95%8C%E6%97%B6" target="_blank" rel="noopener">UTC 协调世界时</a></li><li><a href="https://zh.wikipedia.org/wiki/%E5%8E%9F%E5%AD%90%E6%97%B6" target="_blank" rel="noopener">原子时</a></li><li><a href="https://zh.wikipedia.org/wiki/%E5%8E%9F%E5%AD%90%E9%90%98" target="_blank" rel="noopener">原子钟</a></li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d = <span class="keyword">new</span> <span class="built_in">DateTime</span>.utc(<span class="number">2018</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">9</span>, <span class="number">30</span>);</span><br><span class="line"><span class="built_in">print</span>(d);</span><br></pre></td></tr></table></figure><h1 id="解析时间-IOS-8601"><a href="#解析时间-IOS-8601" class="headerlink" title="解析时间 IOS 8601"></a>解析时间 IOS 8601</h1><ul><li><a href="https://zh.wikipedia.org/wiki/ISO_8601" target="_blank" rel="noopener">ISO 8601</a></li><li><a href="https://zh.wikipedia.org/wiki/%E6%97%B6%E5%8C%BA" target="_blank" rel="noopener">时区</a></li><li><a href="https://zh.wikipedia.org/wiki/%E6%97%B6%E5%8C%BA%E5%88%97%E8%A1%A8" target="_blank" rel="noopener">时区列表</a></li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d1 = <span class="built_in">DateTime</span>.parse(<span class="string">'2018-10-10 09:30:30Z'</span>);</span><br><span class="line"><span class="built_in">print</span>(d1);</span><br><span class="line"><span class="keyword">var</span> d2 = <span class="built_in">DateTime</span>.parse(<span class="string">'2018-10-10 09:30:30+0800'</span>);</span><br><span class="line"><span class="built_in">print</span>(d2);</span><br></pre></td></tr></table></figure><h1 id="时间增减量"><a href="#时间增减量" class="headerlink" title="时间增减量"></a>时间增减量</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d1 = <span class="built_in">DateTime</span>.now();</span><br><span class="line"><span class="built_in">print</span>(d1);</span><br><span class="line"><span class="built_in">print</span>(d1.add(<span class="keyword">new</span> <span class="built_in">Duration</span>(minutes: <span class="number">5</span>)));</span><br><span class="line"><span class="built_in">print</span>(d1.add(<span class="keyword">new</span> <span class="built_in">Duration</span>(minutes: <span class="number">-5</span>)));</span><br></pre></td></tr></table></figure><h1 id="比较时间"><a href="#比较时间" class="headerlink" title="比较时间"></a>比较时间</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d1 = <span class="keyword">new</span> <span class="built_in">DateTime</span>(<span class="number">2018</span>, <span class="number">10</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">var</span> d2 = <span class="keyword">new</span> <span class="built_in">DateTime</span>(<span class="number">2018</span>, <span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line"><span class="built_in">print</span>(d1.isAfter(d2));</span><br><span class="line"><span class="built_in">print</span>(d1.isBefore(d2));</span><br><span class="line"><span class="keyword">var</span> d1 = <span class="built_in">DateTime</span>.now();</span><br><span class="line"><span class="keyword">var</span> d2 = d1.add(<span class="keyword">new</span> <span class="built_in">Duration</span>(milliseconds: <span class="number">30</span>));</span><br><span class="line"><span class="built_in">print</span>(d1.isAtSameMomentAs(d2));</span><br></pre></td></tr></table></figure><h1 id="时间差"><a href="#时间差" class="headerlink" title="时间差"></a>时间差</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d1 = <span class="keyword">new</span> <span class="built_in">DateTime</span>(<span class="number">2018</span>, <span class="number">10</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">var</span> d2 = <span class="keyword">new</span> <span class="built_in">DateTime</span>(<span class="number">2018</span>, <span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line"><span class="keyword">var</span> difference = d1.difference(d2);</span><br><span class="line"><span class="built_in">print</span>([difference.inDays, difference.inHours]);</span><br></pre></td></tr></table></figure><h1 id="时间戳"><a href="#时间戳" class="headerlink" title="时间戳"></a>时间戳</h1><ul><li><a href="https://zh.wikipedia.org/wiki/%E5%85%AC%E5%85%83" target="_blank" rel="noopener">公元</a></li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">DateTime</span>.now();</span><br><span class="line"><span class="built_in">print</span>(now.millisecondsSinceEpoch);</span><br><span class="line"><span class="built_in">print</span>(now.microsecondsSinceEpoch);</span><br></pre></td></tr></table></figure><h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><ul><li><a href="https://github.com/ducafecat/dart-learn/blob/master/09-%E6%97%A5%E6%9C%9F%E6%97%B6%E9%97%B4/datetime.dart" target="_blank" rel="noopener">datetime.dart</a></li></ul><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul><li><a href="https://www.dartlang.org/guides/language/language-tour" target="_blank" rel="noopener">language-tour</a></li><li><a href="https://api.dartlang.org/stable/2.0.0/dart-core/DateTime-class.html" target="_blank" rel="noopener">DateTime</a></li><li><a href="https://zh.wikipedia.org/wiki/%E5%8D%8F%E8%B0%83%E4%B8%96%E7%95%8C%E6%97%B6" target="_blank" rel="noopener">UTC 协调世界时</a></li><li><a href="https://zh.wikipedia.org/wiki/%E5%8E%9F%E5%AD%90%E6%97%B6" target="_blank" rel="noopener">原子时</a></li><li><a href="https://zh.wikipedia.org/wiki/%E5%8E%9F%E5%AD%90%E9%90%98" target="_blank" rel="noopener">原子钟</a></li><li><a href="https://zh.wikipedia.org/wiki/ISO_8601" target="_blank" rel="noopener">ISO 8601</a></li><li><a href="https://zh.wikipedia.org/wiki/%E6%97%B6%E5%8C%BA" target="_blank" rel="noopener">时区</a></li><li><a href="https://zh.wikipedia.org/wiki/%E6%97%B6%E5%8C%BA%E5%88%97%E8%A1%A8" target="_blank" rel="noopener">时区列表</a></li><li><a href="https://zh.wikipedia.org/wiki/%E5%85%AC%E5%85%83" target="_blank" rel="noopener">公元</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;声明&lt;/li&gt;
&lt;li&gt;UTC 时间&lt;/li&gt;
&lt;li&gt;公元时间&lt;/li&gt;
&lt;li&gt;时间戳&lt;/li&gt;
&lt;li&gt;解
      
    
    </summary>
    
      <category term="Dart语言学习" scheme="https://blog.ducafecat.tech/categories/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="dart" scheme="https://blog.ducafecat.tech/tags/dart/"/>
    
  </entry>
  
  <entry>
    <title>Dart语言学习 - 08 字符串</title>
    <link href="https://blog.ducafecat.tech/2018/10/18/dart/dart-08-string/"/>
    <id>https://blog.ducafecat.tech/2018/10/18/dart/dart-08-string/</id>
    <published>2018-10-18T05:48:22.000Z</published>
    <updated>2019-08-01T18:39:22.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>声明方式</li><li>字符串模板</li><li>字符串连接</li><li>转义操作</li><li>其它常用运算</li></ul><h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><ul><li>Dart 2.0.0</li></ul><h1 id="单引号或者双引号"><a href="#单引号或者双引号" class="headerlink" title="单引号或者双引号"></a>单引号或者双引号</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span> a = <span class="string">'ducafecat'</span>;</span><br><span class="line"><span class="built_in">String</span> b = <span class="string">"ducafecat"</span>;</span><br></pre></td></tr></table></figure><h1 id="字符串模板"><a href="#字符串模板" class="headerlink" title="字符串模板"></a>字符串模板</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">123</span>;</span><br><span class="line"><span class="built_in">String</span> b = <span class="string">'ducafecat : <span class="subst">$&#123;a&#125;</span>'</span>;</span><br><span class="line"><span class="built_in">print</span>(b);</span><br></pre></td></tr></table></figure><h1 id="字符串连接"><a href="#字符串连接" class="headerlink" title="字符串连接"></a>字符串连接</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">'hello'</span> + <span class="string">' '</span> + <span class="string">'ducafecat'</span>;</span><br><span class="line"><span class="keyword">var</span> a = <span class="string">'hello'</span><span class="string">' '</span><span class="string">'ducafecat'</span>;</span><br><span class="line"><span class="keyword">var</span> a = <span class="string">'hello'</span>   <span class="string">' '</span>     <span class="string">'ducafecat'</span>;</span><br><span class="line"><span class="keyword">var</span> a = <span class="string">'hello'</span></span><br><span class="line"><span class="string">' '</span></span><br><span class="line"><span class="string">'ducafecat'</span>;</span><br><span class="line"><span class="keyword">var</span> a = <span class="string">'''</span></span><br><span class="line"><span class="string">hello word</span></span><br><span class="line"><span class="string">this is multi line</span></span><br><span class="line"><span class="string">'''</span>;</span><br><span class="line"><span class="keyword">var</span> a = <span class="string">"""</span></span><br><span class="line"><span class="string">hello word</span></span><br><span class="line"><span class="string">this is multi line</span></span><br><span class="line"><span class="string">"""</span>;</span><br><span class="line"><span class="built_in">print</span>(a);</span><br></pre></td></tr></table></figure><h1 id="转义符号"><a href="#转义符号" class="headerlink" title="转义符号"></a>转义符号</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">'hello word \n this is multi line'</span>;</span><br><span class="line"><span class="built_in">print</span>(a);</span><br></pre></td></tr></table></figure><h1 id="取消转义"><a href="#取消转义" class="headerlink" title="取消转义"></a>取消转义</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">r'hello word \n this is multi line'</span>;</span><br><span class="line"><span class="built_in">print</span>(a);</span><br></pre></td></tr></table></figure><h1 id="搜索"><a href="#搜索" class="headerlink" title="搜索"></a>搜索</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">'web site ducafecat.tech'</span>;</span><br><span class="line"><span class="built_in">print</span>(a.contains(<span class="string">'ducafecat'</span>));</span><br><span class="line"><span class="built_in">print</span>(a.startsWith(<span class="string">'web'</span>));</span><br><span class="line"><span class="built_in">print</span>(a.endsWith(<span class="string">'tech'</span>));</span><br><span class="line"><span class="built_in">print</span>(a.indexOf(<span class="string">'site'</span>));</span><br></pre></td></tr></table></figure><h1 id="提取数据"><a href="#提取数据" class="headerlink" title="提取数据"></a>提取数据</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(a.substring(<span class="number">0</span>,<span class="number">5</span>));</span><br><span class="line"><span class="keyword">var</span> b = a.split(<span class="string">' '</span>);</span><br><span class="line"><span class="built_in">print</span>(b.length);</span><br><span class="line"><span class="built_in">print</span>(b[<span class="number">0</span>]);</span><br></pre></td></tr></table></figure><h1 id="大小写转换"><a href="#大小写转换" class="headerlink" title="大小写转换"></a>大小写转换</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(a.toLowerCase());</span><br><span class="line"><span class="built_in">print</span>(a.toUpperCase());</span><br></pre></td></tr></table></figure><h1 id="裁剪-判断空字符串"><a href="#裁剪-判断空字符串" class="headerlink" title="裁剪 判断空字符串"></a>裁剪 判断空字符串</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">'    hello word     '</span>.trim());</span><br><span class="line"><span class="built_in">print</span>(<span class="string">''</span>.isEmpty);</span><br></pre></td></tr></table></figure><h1 id="替换部分字符"><a href="#替换部分字符" class="headerlink" title="替换部分字符"></a>替换部分字符</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">'hello word word!'</span>.replaceAll(<span class="string">'word'</span>, <span class="string">'ducafecat'</span>));</span><br></pre></td></tr></table></figure><h1 id="字符串创建"><a href="#字符串创建" class="headerlink" title="字符串创建"></a>字符串创建</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sb = <span class="built_in">StringBuffer</span>();</span><br><span class="line">sb..write(<span class="string">'hello word!'</span>)</span><br><span class="line">..write(<span class="string">'my'</span>)</span><br><span class="line">..write(<span class="string">' '</span>)</span><br><span class="line">..writeAll([<span class="string">'web'</span>, <span class="string">'site'</span>, <span class="string">'https://ducafecat.tech'</span>]);</span><br><span class="line"><span class="built_in">print</span>(sb.toString());</span><br></pre></td></tr></table></figure><h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><ul><li><a href="https://github.com/ducafecat/dart-learn/blob/master/08-%E5%AD%97%E7%AC%A6%E4%B8%B2/string.dart" target="_blank" rel="noopener">string.dart</a></li></ul><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul><li><a href="https://www.dartlang.org/guides/language/language-tour" target="_blank" rel="noopener">language-tour</a></li><li><a href="https://api.dartlang.org/stable/2.0.0/dart-core/String-class.html" target="_blank" rel="noopener">String</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;声明方式&lt;/li&gt;
&lt;li&gt;字符串模板&lt;/li&gt;
&lt;li&gt;字符串连接&lt;/li&gt;
&lt;li&gt;转义操作&lt;/li&gt;
&lt;l
      
    
    </summary>
    
      <category term="Dart语言学习" scheme="https://blog.ducafecat.tech/categories/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="dart" scheme="https://blog.ducafecat.tech/tags/dart/"/>
    
  </entry>
  
  <entry>
    <title>Dart语言学习 - 07 布尔</title>
    <link href="https://blog.ducafecat.tech/2018/10/17/dart/dart-07-bool/"/>
    <id>https://blog.ducafecat.tech/2018/10/17/dart/dart-07-bool/</id>
    <published>2018-10-17T09:37:31.000Z</published>
    <updated>2019-08-01T18:39:22.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>布尔 声明、比较、默认值</li><li>断言、asset、isEmpty、isNaN</li><li>逻辑操作符 &amp;&amp;、||、!</li><li>关系运算符 == != &gt; &gt;= &lt; &lt;=</li></ul><h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><ul><li>Dart 2.0.0</li></ul><h1 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h1><p>为了代表布尔值，Dart 有一个名字为 bool 的类型。 只有两个对象是布尔类型的：true 和 false 所创建的对象， 这两个对象也都是编译时常量。</p><p><a href="https://api.dartlang.org/stable/2.0.0/dart-core/bool-class.html" target="_blank" rel="noopener">bool</a></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">bool</span> a;</span><br><span class="line"><span class="built_in">print</span>(a);</span><br></pre></td></tr></table></figure><p>只有 true 对象才被认为是 true。 所有其他的值都是 flase。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span> name = <span class="string">'ducafecat'</span>;</span><br><span class="line"><span class="keyword">if</span>(name) &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'this is name'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="assert-断言"><a href="#assert-断言" class="headerlink" title="assert 断言"></a>assert 断言</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="keyword">true</span>;</span><br><span class="line"><span class="keyword">assert</span>(a);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">''</span>;</span><br><span class="line"><span class="keyword">assert</span>(name.isEmpty);</span><br><span class="line"><span class="keyword">assert</span>(name.isNotEmpty);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="built_in">num</span> = <span class="number">0</span> / <span class="number">0</span>;</span><br><span class="line"><span class="keyword">assert</span>(<span class="built_in">num</span>.isNaN);</span><br></pre></td></tr></table></figure><blockquote><p>注意： 断言只在检查模式下运行有效，如果在生产模式 运行，则断言不会执行。</p></blockquote><h1 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h1><h2 id="amp-amp-逻辑与"><a href="#amp-amp-逻辑与" class="headerlink" title="&amp;&amp; 逻辑与"></a><code>&amp;&amp;</code> 逻辑与</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">bool</span> a = <span class="keyword">true</span>;</span><br><span class="line"><span class="built_in">bool</span> b = <span class="keyword">true</span>;</span><br><span class="line"><span class="keyword">assert</span>(a &amp;&amp; b);</span><br></pre></td></tr></table></figure><h2 id="逻辑或"><a href="#逻辑或" class="headerlink" title="|| 逻辑或"></a><code>||</code> 逻辑或</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">bool</span> a = <span class="keyword">true</span>;</span><br><span class="line"><span class="built_in">bool</span> b = <span class="keyword">false</span>;</span><br><span class="line"><span class="keyword">assert</span>(a || b);</span><br></pre></td></tr></table></figure><h2 id="逻辑非"><a href="#逻辑非" class="headerlink" title="! 逻辑非"></a><code>!</code> 逻辑非</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">bool</span> a = <span class="keyword">true</span>;</span><br><span class="line"><span class="built_in">bool</span> b = !a;</span><br><span class="line"><span class="built_in">print</span>(b);</span><br></pre></td></tr></table></figure><h1 id="关系运算符"><a href="#关系运算符" class="headerlink" title="关系运算符"></a>关系运算符</h1><h2 id="等于"><a href="#等于" class="headerlink" title="== 等于"></a><code>==</code> 等于</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(a == b) &#123;&#125;</span><br></pre></td></tr></table></figure><h2 id="不等于"><a href="#不等于" class="headerlink" title="!= 不等于"></a><code>!=</code> 不等于</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(a != b) &#123;&#125;</span><br></pre></td></tr></table></figure><h2 id="gt-大于"><a href="#gt-大于" class="headerlink" title="&gt; 大于"></a><code>&gt;</code> 大于</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(a &gt; b) &#123;&#125;</span><br></pre></td></tr></table></figure><h2 id="gt-大于或等于"><a href="#gt-大于或等于" class="headerlink" title="&gt;= 大于或等于"></a><code>&gt;=</code> 大于或等于</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(a &gt;= b) &#123;&#125;</span><br></pre></td></tr></table></figure><h2 id="lt-小于"><a href="#lt-小于" class="headerlink" title="&lt; 小于"></a><code>&lt;</code> 小于</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(a &lt; b) &#123;&#125;</span><br></pre></td></tr></table></figure><h2 id="lt-小于或等于"><a href="#lt-小于或等于" class="headerlink" title="&lt;= 小于或等于"></a><code>&lt;=</code> 小于或等于</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(a &lt;= b) &#123;&#125;</span><br></pre></td></tr></table></figure><h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><ul><li><a href="https://github.com/ducafecat/dart-learn/blob/master/07-%E5%B8%83%E5%B0%94/bool.dart" target="_blank" rel="noopener">bool.dart</a></li></ul><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul><li><a href="https://www.dartlang.org/guides/language/language-tour" target="_blank" rel="noopener">language-tour</a></li><li><a href="https://api.dartlang.org/stable/2.0.0/dart-core/bool-class.html" target="_blank" rel="noopener">bool</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;布尔 声明、比较、默认值&lt;/li&gt;
&lt;li&gt;断言、asset、isEmpty、isNaN&lt;/li&gt;
&lt;li&gt;逻辑
      
    
    </summary>
    
      <category term="Dart语言学习" scheme="https://blog.ducafecat.tech/categories/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="dart" scheme="https://blog.ducafecat.tech/tags/dart/"/>
    
  </entry>
  
  <entry>
    <title>Dart语言学习 - 06 数值</title>
    <link href="https://blog.ducafecat.tech/2018/10/16/dart/dart-06-number/"/>
    <id>https://blog.ducafecat.tech/2018/10/16/dart/dart-06-number/</id>
    <published>2018-10-16T09:08:33.000Z</published>
    <updated>2019-08-01T18:39:22.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>数值类型 int、double、num</li><li>数值表示法 十进制、十六进制</li><li>科学计数法</li><li>数值转换</li><li>位运算</li></ul><h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><ul><li>Dart 2.0.0</li></ul><h1 id="数值"><a href="#数值" class="headerlink" title="数值"></a>数值</h1><h2 id="数值类型"><a href="#数值类型" class="headerlink" title="数值类型"></a>数值类型</h2><h3 id="int"><a href="#int" class="headerlink" title="int"></a>int</h3><p>整数值，其取值通常位于 -253 和 253 之间。</p><p><a href="https://api.dartlang.org/stable/2.0.0/dart-core/int-class.html" target="_blank" rel="noopener">int class</a></p><h3 id="double"><a href="#double" class="headerlink" title="double"></a>double</h3><p>64-bit (双精度) 浮点数，符合 IEEE 754 标准。</p><p><a href="https://api.dartlang.org/stable/2.0.0/dart-core/double-class.html" target="_blank" rel="noopener">double class</a></p><h3 id="num"><a href="#num" class="headerlink" title="num"></a>num</h3><p>int 和 double 都是 num 的子类。</p><p><a href="https://api.dartlang.org/stable/2.0.0/dart-core/num-class.html" target="_blank" rel="noopener">num class</a></p><h2 id="数值表示法-十进制、十六进制"><a href="#数值表示法-十进制、十六进制" class="headerlink" title="数值表示法 十进制、十六进制"></a>数值表示法 十进制、十六进制</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> a = <span class="number">1001</span>;</span><br><span class="line"><span class="built_in">int</span> b = <span class="number">0xABC</span>;</span><br><span class="line"><span class="built_in">print</span>([a, b]);</span><br></pre></td></tr></table></figure><h2 id="科学计数法"><a href="#科学计数法" class="headerlink" title="科学计数法"></a>科学计数法</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">num</span> a = <span class="number">21.2e3</span>;</span><br><span class="line"><span class="built_in">print</span>([a]);</span><br></pre></td></tr></table></figure><h2 id="数值转换"><a href="#数值转换" class="headerlink" title="数值转换"></a>数值转换</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// string -&gt; int</span></span><br><span class="line"><span class="comment">// string -&gt; double</span></span><br><span class="line"><span class="built_in">int</span> a = <span class="built_in">int</span>.parse(<span class="string">'123'</span>);</span><br><span class="line"><span class="built_in">double</span> b = <span class="built_in">double</span>.parse(<span class="string">'1.223'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// int -&gt; string</span></span><br><span class="line"><span class="comment">// double -&gt; string</span></span><br><span class="line"><span class="built_in">String</span> a = <span class="number">123.</span>toString();</span><br><span class="line"><span class="built_in">String</span> b = <span class="number">1.223</span>.toString();</span><br><span class="line"><span class="built_in">print</span>([a, b]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// double -&gt; int</span></span><br><span class="line"><span class="built_in">double</span> a = <span class="number">1.8</span>;</span><br><span class="line"><span class="built_in">int</span> b = a.toInt();</span><br><span class="line"><span class="built_in">print</span>(b);</span><br></pre></td></tr></table></figure><h2 id="位运算"><a href="#位运算" class="headerlink" title="位运算"></a>位运算</h2><h3 id="amp-与运算"><a href="#amp-与运算" class="headerlink" title="&amp; 与运算"></a><code>&amp;</code> 与运算</h3><p>同时 <code>1</code> 才行</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1 0 1 0          10</span><br><span class="line">0 0 1 0          2</span><br><span class="line">--------</span><br><span class="line">0 0 1 0          2</span><br></pre></td></tr></table></figure><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">var</span> b = <span class="number">2</span>;</span><br><span class="line"><span class="built_in">print</span>(a &amp; b);</span><br></pre></td></tr></table></figure><h3 id="或运算"><a href="#或运算" class="headerlink" title="| 或运算"></a><code>|</code> 或运算</h3><p>有一个 <code>1</code> 就行</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1 0 1 0          10</span><br><span class="line">0 0 1 0          2</span><br><span class="line">--------</span><br><span class="line">1 0 1 0          10</span><br></pre></td></tr></table></figure><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">var</span> b = <span class="number">2</span>;</span><br><span class="line"><span class="built_in">print</span>(a | b);</span><br></pre></td></tr></table></figure><p>可以用在常量组合</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> USE_LEFT = <span class="number">0x1</span>;</span><br><span class="line"><span class="keyword">const</span> USE_TOP = <span class="number">0x2</span>;</span><br><span class="line"><span class="keyword">const</span> USE_LEFT_TOP = USE_LEFT | USE_TOP;</span><br><span class="line"><span class="keyword">var</span> result = USE_LEFT | USE_TOP;</span><br><span class="line"><span class="built_in">print</span>(result);</span><br><span class="line"><span class="keyword">assert</span>(USE_LEFT_TOP == result);</span><br></pre></td></tr></table></figure><h3 id="非运算"><a href="#非运算" class="headerlink" title="~ 非运算"></a><code>~</code> 非运算</h3><p>二进制数逐位进行逻辑非运算</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">0 1 0 0 1          +9 二进制 最高位 0 整数 1 负数</span><br><span class="line">0 0 1 1 0          补码</span><br><span class="line">1 1 0 0 1          取反</span><br><span class="line">1 1 0 1 0          加1</span><br><span class="line">--------</span><br><span class="line">1 1 0 1 0          -10</span><br></pre></td></tr></table></figure><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">9</span>;</span><br><span class="line"><span class="built_in">print</span>(~a);</span><br></pre></td></tr></table></figure><h3 id="异或"><a href="#异或" class="headerlink" title="^ 异或"></a><code>^</code> 异或</h3><p>不相同的才出 <code>1</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1 0 1 0          10</span><br><span class="line">0 0 1 0          2</span><br><span class="line">--------</span><br><span class="line">1 0 0 0          8</span><br></pre></td></tr></table></figure><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">var</span> b = <span class="number">2</span>;</span><br><span class="line"><span class="built_in">print</span>(a ^ b);</span><br></pre></td></tr></table></figure><p>计算机中可以用来取反色</p><h2 id="移位运算符"><a href="#移位运算符" class="headerlink" title="移位运算符"></a>移位运算符</h2><h3 id="lt-lt-左移"><a href="#lt-lt-左移" class="headerlink" title="&lt;&lt; 左移"></a><code>&lt;&lt;</code> 左移</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">0 0 0 1          1 二进制</span><br><span class="line">0 0 1 0          左移一位 2</span><br><span class="line">0 1 0 0          左移一位 4</span><br><span class="line">1 0 0 0          左移一位 8</span><br></pre></td></tr></table></figure><p>向左移动一位</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span> &lt;&lt; <span class="number">1</span>;</span><br><span class="line"><span class="built_in">print</span>(a);</span><br></pre></td></tr></table></figure><h3 id="gt-gt-右移"><a href="#gt-gt-右移" class="headerlink" title="&gt;&gt; 右移"></a><code>&gt;&gt;</code> 右移</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1 0 0 0          8 二进制</span><br><span class="line">0 1 0 0          右移一位 4</span><br><span class="line">0 0 1 0          右移一位 2</span><br><span class="line">0 0 0 1          右移一位 1</span><br></pre></td></tr></table></figure><p>向右移动一位</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">8</span> &gt;&gt; <span class="number">1</span>;</span><br><span class="line"><span class="built_in">print</span>(a);</span><br></pre></td></tr></table></figure><h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><ul><li><a href="https://github.com/ducafecat/dart-learn/blob/master/06-%E6%95%B0%E5%80%BC/number.dart" target="_blank" rel="noopener">number.dart</a></li></ul><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul><li><a href="https://www.dartlang.org/guides/language/language-tour" target="_blank" rel="noopener">language-tour</a></li><li><a href="https://api.dartlang.org/stable/2.0.0/dart-core/int-class.html" target="_blank" rel="noopener">int class</a></li><li><a href="https://api.dartlang.org/stable/2.0.0/dart-core/double-class.html" target="_blank" rel="noopener">double class</a></li><li><a href="https://api.dartlang.org/stable/2.0.0/dart-core/num-class.html" target="_blank" rel="noopener">num class</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;数值类型 int、double、num&lt;/li&gt;
&lt;li&gt;数值表示法 十进制、十六进制&lt;/li&gt;
&lt;li&gt;科学计
      
    
    </summary>
    
      <category term="Dart语言学习" scheme="https://blog.ducafecat.tech/categories/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="dart" scheme="https://blog.ducafecat.tech/tags/dart/"/>
    
  </entry>
  
  <entry>
    <title>Dart语言学习 - 05 常量</title>
    <link href="https://blog.ducafecat.tech/2018/10/10/dart/dart-05-constant/"/>
    <id>https://blog.ducafecat.tech/2018/10/10/dart/dart-05-constant/</id>
    <published>2018-10-10T06:49:26.000Z</published>
    <updated>2019-08-01T18:39:22.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>常量的定义方式</li><li><code>final</code> <code>const</code> 的区别</li></ul><h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><ul><li>Dart 2.0.0</li></ul><h1 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h1><h2 id="类型声明可以省略"><a href="#类型声明可以省略" class="headerlink" title="类型声明可以省略"></a>类型声明可以省略</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="built_in">String</span> a = <span class="string">'ducafecat'</span>;</span><br><span class="line"><span class="keyword">final</span> a = <span class="string">'ducafecat'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">String</span> a = <span class="string">'ducafecat'</span>;</span><br><span class="line"><span class="keyword">const</span> a = <span class="string">'ducafecat'</span>;</span><br></pre></td></tr></table></figure><h2 id="初始后不能再赋值"><a href="#初始后不能再赋值" class="headerlink" title="初始后不能再赋值"></a>初始后不能再赋值</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> a = <span class="string">'ducafecat'</span>;</span><br><span class="line">a = <span class="string">'abc'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> a = <span class="string">'ducafecat'</span>;</span><br><span class="line">a = <span class="string">'abc'</span>;</span><br></pre></td></tr></table></figure><h2 id="不能和-var-同时使用"><a href="#不能和-var-同时使用" class="headerlink" title="不能和 var 同时使用"></a>不能和 var 同时使用</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="keyword">var</span> a = <span class="string">'ducafecat'</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">var</span> a = <span class="string">'ducafecat'</span>;</span><br></pre></td></tr></table></figure><h2 id="const-赋值-申明可省略"><a href="#const-赋值-申明可省略" class="headerlink" title="const 赋值 申明可省略"></a>const 赋值 申明可省略</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="built_in">List</span> ls = <span class="keyword">const</span> [<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>];</span><br><span class="line"><span class="keyword">const</span> <span class="built_in">List</span> ls = [<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>];</span><br></pre></td></tr></table></figure><h1 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h1><h2 id="需要确定的值"><a href="#需要确定的值" class="headerlink" title="需要确定的值"></a>需要确定的值</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> dt = <span class="built_in">DateTime</span>.now();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> dt = <span class="keyword">const</span> <span class="built_in">DateTime</span>.now();</span><br></pre></td></tr></table></figure><h2 id="不可变性可传递"><a href="#不可变性可传递" class="headerlink" title="不可变性可传递"></a>不可变性可传递</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="built_in">List</span> ls = [<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>];</span><br><span class="line">ls[<span class="number">1</span>] = <span class="number">44</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">List</span> ls = [<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>];</span><br><span class="line">ls[<span class="number">1</span>] = <span class="number">44</span>;</span><br></pre></td></tr></table></figure><h2 id="内存中重复创建"><a href="#内存中重复创建" class="headerlink" title="内存中重复创建"></a>内存中重复创建</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> a1 = [<span class="number">11</span> , <span class="number">22</span>];</span><br><span class="line"><span class="keyword">final</span> a2 = [<span class="number">11</span> , <span class="number">22</span>];</span><br><span class="line"><span class="built_in">print</span>(identical(a1, a2));</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> a1 = [<span class="number">11</span> , <span class="number">22</span>];</span><br><span class="line"><span class="keyword">const</span> a2 = [<span class="number">11</span> , <span class="number">22</span>];</span><br><span class="line"><span class="built_in">print</span>(identical(a1, a2));</span><br></pre></td></tr></table></figure><h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><ul><li><a href="https://github.com/ducafecat/dart-learn/blob/master/05-%E5%B8%B8%E9%87%8F/constant.dart" target="_blank" rel="noopener">constant.dart</a></li></ul><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul><li><a href="https://www.dartlang.org/guides/language/language-tour" target="_blank" rel="noopener">language-tour</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;常量的定义方式&lt;/li&gt;
&lt;li&gt;&lt;code&gt;final&lt;/code&gt; &lt;code&gt;const&lt;/code&gt; 的
      
    
    </summary>
    
      <category term="Dart语言学习" scheme="https://blog.ducafecat.tech/categories/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="dart" scheme="https://blog.ducafecat.tech/tags/dart/"/>
    
  </entry>
  
  <entry>
    <title>Dart语言学习 - 04 变量的两种类型</title>
    <link href="https://blog.ducafecat.tech/2018/10/10/dart/dart-04-variables/"/>
    <id>https://blog.ducafecat.tech/2018/10/10/dart/dart-04-variables/</id>
    <published>2018-10-10T02:18:25.000Z</published>
    <updated>2019-08-01T18:39:22.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>了解 <code>弱类型</code> <code>强类型</code></li><li>常见 <code>强类型</code> 有哪些</li><li>如何选着何时用那种类型</li></ul><h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><ul><li>Dart 2.0.0</li></ul><h1 id="弱类型"><a href="#弱类型" class="headerlink" title="弱类型"></a>弱类型</h1><h2 id="var"><a href="#var" class="headerlink" title="var"></a>var</h2><p>如果没有初始值，可以变成任何类型</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a;</span><br><span class="line">a = <span class="string">'ducafecat'</span>;</span><br><span class="line">a = <span class="number">123</span>;</span><br><span class="line">a = <span class="keyword">true</span>;</span><br><span class="line">a = &#123;<span class="string">'key'</span>: <span class="string">'val123'</span>&#125;;</span><br><span class="line">a = [<span class="string">'abc'</span>];</span><br></pre></td></tr></table></figure><h2 id="Object"><a href="#Object" class="headerlink" title="Object"></a>Object</h2><p>动态任意类型，编译阶段检查类型</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span> a = <span class="string">'doucafecat'</span>;</span><br><span class="line">a = <span class="number">123</span>;</span><br><span class="line">a = [<span class="number">2222</span>];</span><br><span class="line">a.p();</span><br></pre></td></tr></table></figure><h2 id="dynamic"><a href="#dynamic" class="headerlink" title="dynamic"></a>dynamic</h2><p>动态任意类型，编译阶段不检查检查类型</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">dynamic</span> a = <span class="string">'doucafecat'</span>;</span><br><span class="line">a = <span class="number">123</span>;</span><br><span class="line">a = [<span class="number">1111</span>];</span><br><span class="line">a.p();</span><br></pre></td></tr></table></figure><h2 id="比较-var-与-dynamic、Object"><a href="#比较-var-与-dynamic、Object" class="headerlink" title="比较 var 与 dynamic、Object"></a>比较 var 与 dynamic、Object</h2><p>唯一区别 var 如果有初始值，类型被锁定</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">'ducafecat'</span>;</span><br><span class="line"><span class="keyword">dynamic</span> a = <span class="string">'doucafecat'</span>;</span><br><span class="line"><span class="built_in">Object</span> a = <span class="string">'doucafecat'</span>;</span><br><span class="line">a = <span class="number">123</span>;</span><br></pre></td></tr></table></figure><h1 id="强类型"><a href="#强类型" class="headerlink" title="强类型"></a>强类型</h1><h2 id="申明类型"><a href="#申明类型" class="headerlink" title="申明类型"></a>申明类型</h2><p>声明后，类型被锁定</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span> a;</span><br><span class="line">a = <span class="string">'ducafecat'</span>;</span><br><span class="line">a = <span class="number">123</span>;</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2018-10-10-11-24-04.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="常见类型"><a href="#常见类型" class="headerlink" title="常见类型"></a>常见类型</h2><table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>num</td><td>数字</td></tr><tr><td>int</td><td>整型</td></tr><tr><td>double</td><td>浮点</td></tr><tr><td>bool</td><td>布尔</td></tr><tr><td>String</td><td>字符串</td></tr><tr><td>StringBuffer</td><td>字符串 buffer</td></tr><tr><td>DateTime</td><td>时间日期</td></tr><tr><td>Duration</td><td>时间区间</td></tr><tr><td>List</td><td>列表</td></tr><tr><td>Sets</td><td>无重复队列</td></tr><tr><td>Maps</td><td>kv 容器</td></tr><tr><td>enum</td><td>枚举</td></tr></tbody></table><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span> a = <span class="string">'doucafecat'</span>;</span><br><span class="line"><span class="built_in">int</span> i = <span class="number">123</span>;</span><br><span class="line"><span class="built_in">double</span> d = <span class="number">0.12</span>;</span><br><span class="line"><span class="built_in">bool</span> b = <span class="keyword">true</span>;</span><br><span class="line"><span class="built_in">DateTime</span> dt = <span class="keyword">new</span> <span class="built_in">DateTime</span>.now();</span><br><span class="line"><span class="built_in">List</span> l = [ a, i, d, b, dt];</span><br></pre></td></tr></table></figure><h1 id="默认值"><a href="#默认值" class="headerlink" title="默认值"></a>默认值</h1><p>一切都是 <code>Object</code> , 变量声明后默认都是 <code>null</code></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a;</span><br><span class="line"><span class="built_in">String</span> a;</span><br><span class="line"><span class="built_in">print</span>(a);</span><br><span class="line"><span class="keyword">assert</span>(a == <span class="keyword">null</span>);</span><br></pre></td></tr></table></figure><blockquote><p><code>assert</code> 检查点函数，如果不符合条件直接抛出错误并终止程序进程</p></blockquote><h1 id="如何使用"><a href="#如何使用" class="headerlink" title="如何使用"></a>如何使用</h1><ul><li>在写 API 接口的时候，请用 <code>强类型</code>，一旦不符合约定，接收数据时能方便排查故障</li><li>你在写个小工具时，可以用 <code>弱类型</code>，这样代码写起来很快，类型自动适应</li></ul><h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><ul><li><a href="https://github.com/ducafecat/dart-learn/tree/master/04-%E5%8F%98%E9%87%8F%E7%9A%84%E4%B8%A4%E7%A7%8D%E7%B1%BB%E5%9E%8B" target="_blank" rel="noopener">variables.dart</a></li></ul><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul><li><a href="https://www.dartlang.org/guides/language/language-tour" target="_blank" rel="noopener">language-tour</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;了解 &lt;code&gt;弱类型&lt;/code&gt; &lt;code&gt;强类型&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;常见 &lt;code&gt;强
      
    
    </summary>
    
      <category term="Dart语言学习" scheme="https://blog.ducafecat.tech/categories/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="dart" scheme="https://blog.ducafecat.tech/tags/dart/"/>
    
  </entry>
  
  <entry>
    <title>Dart语言学习 - 03 MacOS 下安装 SDK</title>
    <link href="https://blog.ducafecat.tech/2018/09/30/dart/dart-03-install-macos/"/>
    <id>https://blog.ducafecat.tech/2018/09/30/dart/dart-03-install-macos/</id>
    <published>2018-09-30T07:41:49.000Z</published>
    <updated>2019-08-01T18:39:22.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>配置 Dart 开发环境</li><li>解决墙内问题</li></ul><h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><ul><li>MacOS</li><li>Dart SDK 2.0.0</li></ul><h1 id="下载-SDK"><a href="#下载-SDK" class="headerlink" title="下载 SDK"></a>下载 SDK</h1><h2 id="SDK-列表"><a href="#SDK-列表" class="headerlink" title="SDK 列表"></a><a href="https://webdev.dartlang.org/tools/sdk/archive" target="_blank" rel="noopener">SDK 列表</a></h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2018-09-30-16-07-22.png" alt="archive" title="">                </div>                <div class="image-caption">archive</div>            </figure><h2 id="下载-URL"><a href="#下载-URL" class="headerlink" title="下载 URL"></a>下载 URL</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://storage.googleapis.com/dart-archive/channels/stable/release/2.0.0/sdk/dartsdk-macos-x64-release.zip</span><br></pre></td></tr></table></figure><p><strong> 墙内请替换域名 <code>storage.flutter-io.cn</code> </strong></p><h2 id="替换后-URL"><a href="#替换后-URL" class="headerlink" title="替换后 URL"></a>替换后 URL</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://storage.flutter-io.cn/dart-archive/channels/stable/release/2.0.0/sdk/dartsdk-macos-x64-release.zip</span><br></pre></td></tr></table></figure><h1 id="解压到磁盘"><a href="#解压到磁盘" class="headerlink" title="解压到磁盘"></a>解压到磁盘</h1><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2018-09-30-16-09-28.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>磁盘位置 <code>~/Documents/sdk/dart-sdk</code></p><h1 id="配置-VSCode-IDE"><a href="#配置-VSCode-IDE" class="headerlink" title="配置 VSCode IDE"></a>配置 VSCode IDE</h1><h2 id="下载链接"><a href="#下载链接" class="headerlink" title="下载链接"></a><a href="https://code.visualstudio.com/" target="_blank" rel="noopener">下载链接</a></h2><h2 id="安装-Dart-插件"><a href="#安装-Dart-插件" class="headerlink" title="安装 Dart 插件"></a>安装 Dart 插件</h2><h1 id="编写-HelloWord"><a href="#编写-HelloWord" class="headerlink" title="编写 HelloWord"></a>编写 HelloWord</h1><ul><li><p>新建目录 <code>dart-learn</code></p></li><li><p>编写文件 <code>hello.dart</code></p></li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'hello word!'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="调试运行"><a href="#调试运行" class="headerlink" title="调试运行"></a>调试运行</h2><p>配置文件 <code>launch.json</code></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  // Use IntelliSense to learn about possible attributes.</span><br><span class="line">  // Hover to view descriptions of existing attributes.</span><br><span class="line">  // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387</span><br><span class="line">  "version": "0.2.0",</span><br><span class="line">  "configurations": [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"name"</span>: <span class="string">"Dart"</span>,</span><br><span class="line">      <span class="attr">"program"</span>: <span class="string">"$&#123;file&#125;"</span>,</span><br><span class="line">      <span class="attr">"request"</span>: <span class="string">"launch"</span>,</span><br><span class="line">      <span class="attr">"type"</span>: <span class="string">"dart"</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="配置命令行模式"><a href="#配置命令行模式" class="headerlink" title="配置命令行模式"></a>配置命令行模式</h1><h2 id="设置环境变量"><a href="#设置环境变量" class="headerlink" title="设置环境变量"></a>设置环境变量</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 打开配置文件</span></span><br><span class="line">vim ~/.bash_profile</span><br><span class="line"></span><br><span class="line"><span class="comment"># 尾部加入配置</span></span><br><span class="line"><span class="built_in">export</span> PATH=~/Documents/sdk/dart-sdk/bin:<span class="variable">$PATH</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 重载配置文件</span></span><br><span class="line"><span class="built_in">source</span> ~/.bash_profile</span><br></pre></td></tr></table></figure><h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2018-09-30-16-23-57.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>新开命令行窗口</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dart --version</span><br><span class="line">Dart VM version: 2.0.0 (Fri Aug 3 10:53:23 2018 +0200) on <span class="string">"macos_x64"</span></span><br></pre></td></tr></table></figure><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul><li><a href="https://webdev.dartlang.org/tools/sdk/archive" target="_blank" rel="noopener">Dart SDK Archive</a></li><li><a href="https://github.com/flutter/flutter/wiki/Using-Flutter-in-China" target="_blank" rel="noopener">Using-Flutter-in-China</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;配置 Dart 开发环境&lt;/li&gt;
&lt;li&gt;解决墙内问题&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;环境&quot;&gt;&lt;a h
      
    
    </summary>
    
      <category term="Dart语言学习" scheme="https://blog.ducafecat.tech/categories/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="dart" scheme="https://blog.ducafecat.tech/tags/dart/"/>
    
  </entry>
  
  <entry>
    <title>Dart语言学习 - 02 Windows 下安装 SDK</title>
    <link href="https://blog.ducafecat.tech/2018/09/30/dart/dart-02-install-windows/"/>
    <id>https://blog.ducafecat.tech/2018/09/30/dart/dart-02-install-windows/</id>
    <published>2018-09-30T06:41:49.000Z</published>
    <updated>2019-08-01T18:39:22.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>配置 Dart 开发环境</li><li>解决墙内问题</li></ul><h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><ul><li>Windows 10</li><li>Dart SDK 2.0.0</li></ul><h1 id="下载-SDK"><a href="#下载-SDK" class="headerlink" title="下载 SDK"></a>下载 SDK</h1><h2 id="SDK-列表"><a href="#SDK-列表" class="headerlink" title="SDK 列表"></a><a href="https://webdev.dartlang.org/tools/sdk/archive" target="_blank" rel="noopener">SDK 列表</a></h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2018-09-30-14-54-15.png" alt="archive" title="">                </div>                <div class="image-caption">archive</div>            </figure><h2 id="源下载-URL"><a href="#源下载-URL" class="headerlink" title="源下载 URL"></a>源下载 URL</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://storage.googleapis.com/dart-archive/channels/stable/release/2.0.0/sdk/dartsdk-windows-x64-release.zip</span><br></pre></td></tr></table></figure><p><strong> 墙内请替换域名 <code>storage.flutter-io.cn</code> </strong></p><h2 id="替换后-URL"><a href="#替换后-URL" class="headerlink" title="替换后 URL"></a>替换后 URL</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://storage.flutter-io.cn/dart-archive/channels/stable/release/2.0.0/sdk/dartsdk-windows-x64-release.zip</span><br></pre></td></tr></table></figure><h1 id="解压到磁盘"><a href="#解压到磁盘" class="headerlink" title="解压到磁盘"></a>解压到磁盘</h1><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2018-09-30-15-24-14.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>磁盘位置 <code>C:\sdk\dart-sdk</code></p><h1 id="配置-VSCode-IDE"><a href="#配置-VSCode-IDE" class="headerlink" title="配置 VSCode IDE"></a>配置 VSCode IDE</h1><h2 id="下载链接"><a href="#下载链接" class="headerlink" title="下载链接"></a><a href="https://code.visualstudio.com/" target="_blank" rel="noopener">下载链接</a></h2><h2 id="安装-Dart-插件"><a href="#安装-Dart-插件" class="headerlink" title="安装 Dart 插件"></a>安装 Dart 插件</h2><h1 id="编写-HelloWord"><a href="#编写-HelloWord" class="headerlink" title="编写 HelloWord"></a>编写 HelloWord</h1><ul><li><p>新建目录 <code>dart-learn</code></p></li><li><p>编写文件 <code>hello.dart</code></p></li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'hello word!'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="调试运行"><a href="#调试运行" class="headerlink" title="调试运行"></a>调试运行</h2><p>配置文件 <code>launch.json</code></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  // Use IntelliSense to learn about possible attributes.</span><br><span class="line">  // Hover to view descriptions of existing attributes.</span><br><span class="line">  // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387</span><br><span class="line">  "version": "0.2.0",</span><br><span class="line">  "configurations": [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"name"</span>: <span class="string">"Dart"</span>,</span><br><span class="line">      <span class="attr">"program"</span>: <span class="string">"$&#123;file&#125;"</span>,</span><br><span class="line">      <span class="attr">"request"</span>: <span class="string">"launch"</span>,</span><br><span class="line">      <span class="attr">"type"</span>: <span class="string">"dart"</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="配置命令行模式"><a href="#配置命令行模式" class="headerlink" title="配置命令行模式"></a>配置命令行模式</h1><h2 id="设置环境变量"><a href="#设置环境变量" class="headerlink" title="设置环境变量"></a>设置环境变量</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2018-09-30-15-01-44.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>环境变量 <code>PATH</code> 新增 <code>C:\sdk\dart-sdk\bin</code></p><h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2018-09-30-15-08-44.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>新开命令行窗口</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dart --version</span><br><span class="line">Dart VM version: 2.0.0 (Fri Aug 3 10:53:23 2018 +0200) on <span class="string">"windows_x64"</span></span><br></pre></td></tr></table></figure><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul><li><a href="https://webdev.dartlang.org/tools/sdk/archive" target="_blank" rel="noopener">Dart SDK Archive</a></li><li><a href="https://github.com/flutter/flutter/wiki/Using-Flutter-in-China" target="_blank" rel="noopener">Using-Flutter-in-China</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;配置 Dart 开发环境&lt;/li&gt;
&lt;li&gt;解决墙内问题&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;环境&quot;&gt;&lt;a h
      
    
    </summary>
    
      <category term="Dart语言学习" scheme="https://blog.ducafecat.tech/categories/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="dart" scheme="https://blog.ducafecat.tech/tags/dart/"/>
    
  </entry>
  
  <entry>
    <title>Dart语言学习 - 01 前言</title>
    <link href="https://blog.ducafecat.tech/2018/09/30/dart/dart-01-introduce/"/>
    <id>https://blog.ducafecat.tech/2018/09/30/dart/dart-01-introduce/</id>
    <published>2018-09-30T02:00:48.000Z</published>
    <updated>2019-08-01T18:39:22.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="本节目标"><a href="#本节目标" class="headerlink" title="本节目标"></a>本节目标</h1><ul><li>为什么学习 Dart</li><li>课程计划</li><li>如果获取课程资料、代码、视频</li></ul><h1 id="2018-Google-开发者大会"><a href="#2018-Google-开发者大会" class="headerlink" title="2018 Google 开发者大会"></a>2018 Google 开发者大会</h1><h2 id="大会官网"><a href="#大会官网" class="headerlink" title="大会官网"></a><a href="http://www.google.cn/events/developerdays2018/" target="_blank" rel="noopener">大会官网</a></h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2018-10-09-09-45-04.png" alt="首页简介" title="">                </div>                <div class="image-caption">首页简介</div>            </figure><h2 id="bilibili-视频"><a href="#bilibili-视频" class="headerlink" title="bilibili 视频"></a><a href="https://space.bilibili.com/64169458/#/" target="_blank" rel="noopener">bilibili 视频</a></h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2018-10-09-09-45-53.png" alt="介绍视频" title="">                </div>                <div class="image-caption">介绍视频</div>            </figure><h1 id="Flutter"><a href="#Flutter" class="headerlink" title="Flutter"></a>Flutter</h1><h2 id="官网"><a href="#官网" class="headerlink" title="官网"></a><a href="https://flutter.io/" target="_blank" rel="noopener">官网</a></h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2018-09-30-11-26-41.png" alt="Flutter" title="">                </div>                <div class="image-caption">Flutter</div>            </figure><h1 id="Dart"><a href="#Dart" class="headerlink" title="Dart"></a>Dart</h1><h2 id="官网-1"><a href="#官网-1" class="headerlink" title="官网"></a><a href="https://www.dartlang.org/" target="_blank" rel="noopener">官网</a></h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2018-09-30-11-24-24.png" alt="homepage" title="">                </div>                <div class="image-caption">homepage</div>            </figure><h2 id="多平台开发"><a href="#多平台开发" class="headerlink" title="多平台开发"></a><a href="https://www.dartlang.org/guides/platforms" target="_blank" rel="noopener">多平台开发</a></h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="2018-09-30-11-25-34.png" alt="Platforms" title="">                </div>                <div class="image-caption">Platforms</div>            </figure><h1 id="课程计划"><a href="#课程计划" class="headerlink" title="课程计划"></a>课程计划</h1><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">## 前言</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 安装&amp;配置 - Windows</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 安装&amp;配置 - MacOS</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 变量 - 两种方式</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 变量 - 常量</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 类型 - 数字</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 类型 - Bool</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 类型 - 字符串</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 类型 - 日期</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 类型 - List</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 类型 - Map</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 类型 - Set</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 类型 - Runes</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 类型 - Symbol</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 类型 - Enum</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 注释 - Comments</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 函数</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 操作符</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 流程控制</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 异常</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 类 - Class</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 类 - getter、setter</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 类 - 静态变量、方法</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 类 - Abstract 抽象类、方法</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 类 - Interface 接口</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 类 - extends 继承</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 类 - mixin 混合</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 类 - 工厂构造函数</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 类库 - Libraries</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 泛型 - Generics</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 异步 - Asynchrony</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 生成器 - Generators</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 可调用 - Callable</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 隔离 - Isolate</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 类型定义 - Typedef</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 注解 - Metadata</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 代码规范 - 代码风格</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 代码规范 - 文档注释</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 代码规范 - 最佳实践</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 代码规范 - 设计指南</span></span><br></pre></td></tr></table></figure><h1 id="课程资料"><a href="#课程资料" class="headerlink" title="课程资料"></a>课程资料</h1><h2 id="主站-https-ducafecat-tech"><a href="#主站-https-ducafecat-tech" class="headerlink" title="主站 https://ducafecat.tech"></a><a href="https://ducafecat.tech/" target="_blank" rel="noopener">主站 https://ducafecat.tech</a></h2><h2 id="资料"><a href="#资料" class="headerlink" title="资料"></a>资料</h2><ul><li>视频<ul><li><a href="">youtube</a></li><li><a href="">优酷</a></li></ul></li><li><a href="https://ducafecat.tech/categories/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/" target="_blank" rel="noopener">文档</a></li><li><a href="https://github.com/ducafecat/dart-learn" target="_blank" rel="noopener">代码</a></li></ul><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul><li><a href="https://www.dartlang.org/" target="_blank" rel="noopener">Dart 官网</a></li><li><a href="https://flutter.io/" target="_blank" rel="noopener">Flutter 官网</a></li><li><a href="http://www.google.cn/events/developerdays2018/" target="_blank" rel="noopener">2018 Google 开发者大会</a></li><li><a href="https://space.bilibili.com/64169458/#/" target="_blank" rel="noopener">bilibili</a></li></ul><hr><p>© 猫哥</p><p><a href="https://ducafecat.tech/" target="_blank" rel="noopener">https://ducafecat.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;本节目标&quot;&gt;&lt;a href=&quot;#本节目标&quot; class=&quot;headerlink&quot; title=&quot;本节目标&quot;&gt;&lt;/a&gt;本节目标&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;为什么学习 Dart&lt;/li&gt;
&lt;li&gt;课程计划&lt;/li&gt;
&lt;li&gt;如果获取课程资料、代码、视频&lt;/li&gt;
&lt;/
      
    
    </summary>
    
      <category term="Dart语言学习" scheme="https://blog.ducafecat.tech/categories/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="dart" scheme="https://blog.ducafecat.tech/tags/dart/"/>
    
  </entry>
  
</feed>
